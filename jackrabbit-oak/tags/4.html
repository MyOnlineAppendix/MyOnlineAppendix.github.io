<h3><span class=" glyphicon glyphicon-tag"/>&nbspEqualityVerifier</h3><kbd>Verifies whether objects/variable are equal to an expected value </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.jackrabbit.oak.OakTest </h4><pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithDefaultWorkspaceName() throws Exception {
  ContentRepository repo=new Oak().with("test").with(new OpenSecurityProvider()).createContentRepository();
  String[] valid=new String[]{null,"test"};
  for (  String wspName : valid) {
    ContentSession cs=null;
    try {
      cs=repo.login(null,wspName);
      assertEquals("test",cs.getWorkspaceName());
    }
  finally {
      if (cs != null) {
        cs.close();
      }
    }
  }
  String[] invalid=new String[]{"","another",Oak.DEFAULT_WORKSPACE_NAME};
  for (  String wspName : invalid) {
    ContentSession cs=null;
    try {
      cs=repo.login(null,wspName);
      fail("invalid workspace nam");
    }
 catch (    NoSuchWorkspaceException e) {
    }
 finally {
      if (cs != null) {
        cs.close();
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testContentRepositoryReuse() throws Exception {
  Oak oak=new Oak().with(new OpenSecurityProvider());
  ContentRepository r0=null;
  ContentRepository r1=null;
  try {
    r0=oak.createContentRepository();
    r1=oak.createContentRepository();
    assertEquals(r0,r1);
  }
  finally {
    if (r0 != null) {
      ((Closeable)r0).close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.api.QueryTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void queryOnStableRevision() throws Exception {
  ContentSession s=repository.login(null,null);
  Root r=s.getLatestRoot();
  Tree t=r.getTree("/").addChild("test");
  t.addChild("node1").setProperty("jcr:primaryType","nt:base");
  t.addChild("node2").setProperty("jcr:primaryType","nt:base");
  t.addChild("node3").setProperty("jcr:primaryType","nt:base");
  r.commit();
  ContentSession s2=repository.login(null,null);
  Root r2=s2.getLatestRoot();
  r.getTree("/test").getChild("node2").remove();
  r.commit();
  Result result=r2.getQueryEngine().executeQuery("test//element(*, nt:base)",Query.XPATH,QueryEngine.NO_BINDINGS,QueryEngine.NO_MAPPINGS);
  Set<String> paths=new HashSet<String>();
  for (  ResultRow rr : result.getRows()) {
    paths.add(rr.getPath());
  }
  assertEquals(new HashSet<String>(Arrays.asList("/test/node1","/test/node2","/test/node3")),paths);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.api.TreeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void orderBefore() throws Exception {
  ContentSession s=repository.login(null,null);
  try {
    Root r=s.getLatestRoot();
    Tree t=r.getTree("/");
    t.addChild("node1");
    t.addChild("node2");
    t.addChild("node3");
    r.commit();
    t.getChild("node1").orderBefore("node2");
    t.getChild("node3").orderBefore(null);
    assertSequence(t.getChildren(),"node1","node2","node3");
    r.commit();
    assertSequence(t.getChildren(),"node1","node2","node3");
    t.getChild("node3").orderBefore("node2");
    assertSequence(t.getChildren(),"node1","node3","node2");
    r.commit();
    assertSequence(t.getChildren(),"node1","node3","node2");
    t.getChild("node1").orderBefore(null);
    assertSequence(t.getChildren(),"node3","node2","node1");
    r.commit();
    assertSequence(t.getChildren(),"node3","node2","node1");
    assertTrue(t.getProperty(":childOrder") == null);
    assertEquals("must not have any properties",0,t.getPropertyCount());
  }
  finally {
    s.close();
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void concurrentAddChild() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/");
    t1.addChild("node1");
    t1.addChild("node2");
    t1.addChild("node3");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/");
      t1=r1.getTree("/");
      t1.addChild("node4");
      r1.commit();
      t2.addChild("node5");
      r2.commit();
      r1=s1.getLatestRoot();
      t1=r1.getTree("/");
      Set<String> names=Sets.newHashSet();
      for (      Tree t : t1.getChildren()) {
        names.add(t.getName());
      }
      assertEquals(Sets.newHashSet("node1","node2","node3","node4","node5"),names);
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.api.TypePreconditionTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testArrayTypeOnSingleValueType(){
  assertEquals(multi,single.getArrayType());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBaseTypeOnMultiValueType(){
  assertEquals(single,multi.getBaseType());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.cache.CacheTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLimitHot(){
  CacheLIRS<Integer,Integer> test=createCache(100);
  for (int i=0; i < 300; i++) {
    test.put(i,10 * i);
  }
  assertEquals(100,test.size());
  assertEquals(99,test.sizeNonResident());
  assertEquals(93,test.sizeHot());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void evictionCallback() throws ExecutionException {
  final Set<String> evictedKeys=newHashSet();
  final Set<Integer> evictedValues=newHashSet();
  CacheLIRS<String,Integer> cache=CacheLIRS.<String,Integer>newBuilder().maximumSize(100).evictionCallback(new EvictionCallback<String,Integer>(){
    @Override public void evicted(    String key,    Integer value){
      evictedKeys.add(key);
      if (value != null) {
        assertEquals(key,valueOf(value));
        evictedValues.add(value);
      }
    }
  }
).build();
  for (int k=0; k < 200; k++) {
    cache.put(valueOf(k),k);
  }
  assertTrue(evictedKeys.size() <= evictedValues.size());
  for (  String key : evictedKeys) {
    assertFalse(cache.containsKey(key));
  }
  cache.invalidateAll();
  assertEquals(200,evictedKeys.size());
  assertEquals(200,evictedValues.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPutPeekRemove(){
  CacheLIRS<Integer,Integer> test=createCache(4);
  test.put(1,10);
  test.put(2,20);
  test.put(3,30);
  assertNull(test.peek(4));
  assertNull(test.getIfPresent(4));
  test.put(4,40);
  verify(test,"mem: 4 stack: 4 3 2 1 cold: non-resident:");
  assertEquals(30,test.getUnchecked(3).intValue());
  assertEquals(20,test.getUnchecked(2).intValue());
  assertEquals(20,test.peek(2).intValue());
  assertEquals(20,test.getUnchecked(2).intValue());
  assertEquals(10,test.peek(1).intValue());
  assertEquals(10,test.getUnchecked(1).intValue());
  verify(test,"mem: 4 stack: 1 2 3 4 cold: non-resident:");
  test.put(3,30);
  verify(test,"mem: 4 stack: 3 1 2 4 cold: non-resident:");
  test.put(5,50);
  verify(test,"mem: 4 stack: 5 3 1 2 cold: 5 non-resident: 4");
  assertEquals(1,test.getMemory(1));
  assertEquals(1,test.getMemory(5));
  assertEquals(0,test.getMemory(4));
  assertEquals(0,test.getMemory(100));
  assertNull(test.peek(4));
  assertNull(test.getIfPresent(4));
  assertEquals(10,test.getUnchecked(1).intValue());
  assertEquals(20,test.getUnchecked(2).intValue());
  assertEquals(30,test.getUnchecked(3).intValue());
  verify(test,"mem: 4 stack: 3 2 1 cold: 5 non-resident: 4");
  assertEquals(50,test.getUnchecked(5).intValue());
  verify(test,"mem: 4 stack: 5 3 2 1 cold: 5 non-resident: 4");
  assertEquals(50,test.getUnchecked(5).intValue());
  verify(test,"mem: 4 stack: 5 3 2 cold: 1 non-resident: 4");
  assertEquals(50,test.remove(5).intValue());
  assertNull(test.remove(5));
  verify(test,"mem: 3 stack: 3 2 1 cold: non-resident: 4");
  assertNull(test.remove(4));
  verify(test,"mem: 3 stack: 3 2 1 cold: non-resident:");
  assertNull(test.remove(4));
  verify(test,"mem: 3 stack: 3 2 1 cold: non-resident:");
  test.put(4,40);
  test.put(5,50);
  verify(test,"mem: 4 stack: 5 4 3 2 cold: 5 non-resident: 1");
  test.getUnchecked(5);
  test.getUnchecked(2);
  test.getUnchecked(3);
  test.getUnchecked(4);
  verify(test,"mem: 4 stack: 4 3 2 5 cold: 2 non-resident: 1");
  assertEquals(50,test.remove(5).intValue());
  verify(test,"mem: 3 stack: 4 3 2 cold: non-resident: 1");
  assertEquals(20,test.remove(2).intValue());
  assertFalse(test.containsKey(1));
  assertNull(test.remove(1));
  assertFalse(test.containsKey(1));
  verify(test,"mem: 2 stack: 4 3 cold: non-resident:");
  test.put(1,10);
  test.put(2,20);
  verify(test,"mem: 4 stack: 2 1 4 3 cold: non-resident:");
  test.getUnchecked(1);
  test.getUnchecked(3);
  test.getUnchecked(4);
  verify(test,"mem: 4 stack: 4 3 1 2 cold: non-resident:");
  assertEquals(10,test.remove(1).intValue());
  verify(test,"mem: 3 stack: 4 3 2 cold: non-resident:");
  test.remove(2);
  test.remove(3);
  test.remove(4);
  test.clear();
  verify(test,"mem: 0 stack: cold: non-resident:");
  test.put(1,10);
  test.put(2,20);
  test.put(3,30);
  test.put(4,40);
  test.put(5,50);
  assertTrue(test.containsValue(50));
  verify(test,"mem: 4 stack: 5 4 3 2 cold: 5 non-resident: 1");
  test.put(1,10);
  verify(test,"mem: 4 stack: 1 5 4 3 2 cold: 1 non-resident: 5");
  assertFalse(test.containsValue(50));
  test.remove(2);
  test.remove(3);
  test.remove(4);
  verify(test,"mem: 1 stack: 1 cold: non-resident: 5");
  assertTrue(test.containsKey(1));
  test.remove(1);
  assertFalse(test.containsKey(1));
  verify(test,"mem: 0 stack: cold: non-resident: 5");
  assertFalse(test.containsKey(5));
  assertTrue(test.isEmpty());
  test.clear();
  test.put(1,10);
  test.put(2,20);
  test.put(3,30);
  test.put(4,40);
  test.put(5,50);
  test.getUnchecked(4);
  test.getUnchecked(3);
  verify(test,"mem: 4 stack: 3 4 5 2 cold: 5 non-resident: 1");
  test.put(6,60);
  verify(test,"mem: 4 stack: 6 3 4 5 2 cold: 6 non-resident: 5 1");
  test.getUnchecked(6);
  verify(test,"mem: 4 stack: 6 3 4 cold: 2 non-resident: 5 1");
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefresh() throws ExecutionException {
  CacheLIRS<Integer,String> cache=new CacheLIRS.Builder<Integer,String>().maximumWeight(100).weigher(new Weigher<Integer,String>(){
    @Override public int weigh(    Integer key,    String value){
      return key + value.length();
    }
  }
).build(new CacheLoader<Integer,String>(){
    @Override public String load(    Integer key) throws Exception {
      if (key < 0 || key >= 100) {
        throw new Exception("Out of range");
      }
      return "n" + key;
    }
    @Override public ListenableFuture<String> reload(    Integer key,    String oldValue){
      assertTrue(oldValue != null);
      SettableFuture<String> f=SettableFuture.create();
      f.set(oldValue);
      return f;
    }
  }
);
  assertEquals("n1",cache.get(1));
  cache.refresh(1);
  cache.refresh(2);
  try {
    cache.get(-1);
    fail();
  }
 catch (  Exception e) {
  }
  cache.refresh(-1);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomOperations(){
  boolean log=false;
  int size=10;
  Random r=new Random(1);
  for (int j=0; j < 100; j++) {
    CacheLIRS<Integer,Integer> test=createCache(size / 2);
    HashMap<Integer,Integer> good=new HashMap<Integer,Integer>();
    for (int i=0; i < 10000; i++) {
      int key=r.nextInt(size);
      int value=r.nextInt();
switch (r.nextInt(3)) {
case 0:
        if (log) {
          System.out.println(i + " put " + key+ " "+ value);
        }
      good.put(key,value);
    test.put(key,value);
  break;
case 1:
if (log) {
  System.out.println(i + " get " + key);
}
Integer a=good.get(key);
Integer b=test.getIfPresent(key);
if (a == null) {
assertNull(b);
}
 else if (b != null) {
assertEquals(a,b);
}
break;
case 2:
if (log) {
System.out.println(i + " remove " + key);
}
good.remove(key);
test.remove(key);
break;
}
if (log) {
System.out.println(" -> " + toString(test));
}
}
verify(test,null);
}
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClear(){
  CacheLIRS<Integer,Integer> test=createCache(40,10);
  for (int i=0; i < 5; i++) {
    test.put(i,10 * i,9);
  }
  verify(test,"mem: 36 stack: 4 3 2 1 cold: 4 non-resident: 0");
  for (  Entry<Integer,Integer> e : test.entrySet()) {
    assertTrue(e.getKey() >= 1 && e.getKey() <= 4);
    assertTrue(e.getValue() >= 10 && e.getValue() <= 40);
  }
  for (  int x : test.asMap().values()) {
    assertTrue(x >= 10 && x <= 40);
  }
  for (  int x : test.keySet()) {
    assertTrue(x >= 1 && x <= 4);
  }
  assertEquals(40,test.getMaxMemory());
  assertEquals(10,test.getAverageMemory());
  assertEquals(36,test.getUsedMemory());
  assertEquals(4,test.size());
  assertEquals(3,test.sizeHot());
  assertEquals(1,test.sizeNonResident());
  assertFalse(test.isEmpty());
  test.setMaxMemory(10);
  assertEquals(10,test.getMaxMemory());
  test.setMaxMemory(40);
  test.setAverageMemory(1);
  assertEquals(1,test.getAverageMemory());
  test.setAverageMemory(10);
  verify(test,"mem: 36 stack: 4 3 2 1 cold: 4 non-resident: 0");
  test.asMap().putAll(test.asMap());
  verify(test,"mem: 40 stack: 4 3 2 1 cold: non-resident: 0");
  test.clear();
  verify(test,"mem: 0 stack: cold: non-resident:");
  assertEquals(40,test.getMaxMemory());
  assertEquals(10,test.getAverageMemory());
  assertEquals(0,test.getUsedMemory());
  assertEquals(0,test.size());
  assertEquals(0,test.sizeHot());
  assertEquals(0,test.sizeNonResident());
  assertTrue(test.isEmpty());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEdgeCases(){
  CacheLIRS<Integer,Integer> test=createCache(1);
  test.put(1,10,100);
  assertEquals(10,test.getUnchecked(1).intValue());
  try {
    test.put(null,10,100);
    fail();
  }
 catch (  NullPointerException e) {
  }
  try {
    test.put(1,null,100);
    fail();
  }
 catch (  NullPointerException e) {
  }
  try {
    test.setMaxMemory(-1);
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    test.setAverageMemory(0);
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAsMap(){
  CacheLIRS<Integer,String> cache=createCache(10,1);
  ConcurrentMap<Integer,String> map=cache.asMap();
  assertNull(map.putIfAbsent(1,"Hello"));
  assertEquals(1,map.size());
  assertEquals("Hello",cache.getIfPresent(1));
  assertEquals("Hello",map.putIfAbsent(1,"Hallo"));
  assertEquals("Hello",cache.getIfPresent(1));
  assertEquals("Hello",map.replace(1,"Hallo"));
  assertEquals("Hallo",cache.getIfPresent(1));
  assertFalse(map.replace(1,"x","y"));
  assertTrue(map.replace(1,"Hallo","Hi!"));
  assertFalse(map.remove(1,"Hello"));
  assertTrue(map.remove(1,"Hi!"));
  assertEquals(0,map.size());
  map.put(1,"Hello");
  assertEquals("[1]",map.keySet().toString());
  assertEquals("[1=Hello]",cache.entrySet().toString());
  assertEquals("Hello",map.get(1));
  assertTrue(map.containsKey(1));
  assertFalse(map.containsKey(2));
  assertTrue(map.containsValue("Hello"));
  assertFalse(map.containsValue("Hallo"));
  assertFalse(map.isEmpty());
  map.remove(1);
  assertTrue(map.isEmpty());
  map.put(1,"Hello");
  map.clear();
  assertTrue(map.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadHashMethod(){
  final int size=4;
  /** 
 * A class with a bad hashCode implementation.
 */
class BadHash {
    int x;
    BadHash(    int x){
      this.x=x;
    }
    @Override public int hashCode(){
      return (x & 1) * size * 2;
    }
    @Override public boolean equals(    Object o){
      return ((BadHash)o).x == x;
    }
    @Override public String toString(){
      return "" + x;
    }
  }
  CacheLIRS<BadHash,Integer> test=createCache(size * 2);
  for (int i=0; i < size; i++) {
    test.put(new BadHash(i),i);
  }
  for (int i=0; i < size; i++) {
    if (i % 3 == 0) {
      assertEquals(i,test.remove(new BadHash(i)).intValue());
      assertNull(test.remove(new BadHash(i)));
    }
  }
  for (int i=0; i < size; i++) {
    if (i % 3 == 0) {
      assertNull(test.getIfPresent(new BadHash(i)));
    }
 else {
      assertEquals(i,test.getIfPresent(new BadHash(i)).intValue());
    }
  }
  for (int i=0; i < size; i++) {
    test.put(new BadHash(i),i);
  }
  for (int i=0; i < size; i++) {
    if (i % 3 == 0) {
      assertEquals(i,test.remove(new BadHash(i)).intValue());
      assertNull(test.remove(new BadHash(i)));
    }
  }
  for (int i=0; i < size; i++) {
    if (i % 3 == 0) {
      assertNull(test.getIfPresent(new BadHash(i)));
    }
 else {
      assertEquals(i,test.getIfPresent(new BadHash(i)).intValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScanResistance(){
  boolean log=false;
  int size=20;
  CacheLIRS<Integer,Integer> test=createCache(size / 2 + 1);
  for (int i=0; i < size; i++) {
    test.put(-i,-i * 10);
  }
  verify(test,null);
  for (int i=0; i < size / 2; i++) {
    test.put(i,i * 10);
    test.getUnchecked(i);
    if (log) {
      System.out.println("get " + i + " -> "+ test);
    }
  }
  verify(test,null);
  for (int i=0; i < size; i++) {
    Integer x=test.getIfPresent(i);
    Integer y=test.peek(i);
    if (i < size / 2) {
      assertTrue("i: " + i,x != null);
      assertTrue("i: " + i,y != null);
      assertEquals(i * 10,x.intValue());
      assertEquals(i * 10,y.intValue());
    }
 else {
      assertNull(x);
      assertNull(y);
      test.put(i,i * 10);
      assertEquals(i * 10,test.peek(i).intValue());
    }
    if (log) {
      System.out.println("get " + i + " -> "+ test);
    }
    verify(test,null);
  }
  for (int i=0; i < size; i++) {
    Integer x=test.getIfPresent(i);
    if (i < size / 2 || i == size - 1) {
      assertTrue("i: " + i,x != null);
      assertEquals(i * 10,x.intValue());
    }
 else {
      assertNull(x);
    }
    verify(test,null);
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSize(){
  verifyMapSize(7,16);
  verifyMapSize(13,32);
  verifyMapSize(25,64);
  verifyMapSize(49,128);
  verifyMapSize(97,256);
  verifyMapSize(193,512);
  verifyMapSize(385,1024);
  verifyMapSize(769,2048);
  CacheLIRS<Integer,Integer> test;
  test=createCache(3,10);
  test.put(0,0,9);
  test.put(1,10,9);
  test.put(2,20,9);
  test.put(3,30,9);
  test.put(4,40,9);
  test=createCache(1,1);
  test.put(1,10);
  test.put(0,0);
  test.getUnchecked(0);
  test=createCache(1000);
  for (int j=0; j < 2000; j++) {
    test.put(j,j);
  }
  assertEquals(62,test.size() - test.sizeHot());
  assertEquals(968,test.sizeNonResident());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void evictionCallbackRandomized() throws ExecutionException {
  final HashMap<Integer,Integer> evictedMap=new HashMap<Integer,Integer>();
  final HashSet<Integer> evictedNonResidentSet=new HashSet<Integer>();
  CacheLIRS<Integer,Integer> cache=CacheLIRS.<Integer,Integer>newBuilder().maximumSize(10).evictionCallback(new EvictionCallback<Integer,Integer>(){
    @Override public void evicted(    Integer key,    Integer value){
      if (value == null) {
        assertTrue(evictedNonResidentSet.add(key));
      }
 else {
        assertEquals(null,evictedMap.put(key,value));
      }
    }
  }
).build();
  Random r=new Random(1);
  for (int k=0; k < 10000; k++) {
    if (r.nextInt(20) == 0) {
      evictedMap.clear();
      evictedNonResidentSet.clear();
      long size=cache.size();
      long sizeNonResident=cache.sizeNonResident();
      cache.invalidateAll();
      assertEquals(evictedMap.size(),size);
      assertEquals(evictedNonResidentSet.size(),sizeNonResident);
    }
    evictedMap.clear();
    evictedNonResidentSet.clear();
    int key=r.nextInt(20);
    if (r.nextBoolean()) {
      cache.put(key,k);
    }
 else {
      cache.get(key);
    }
    for (    Entry<Integer,Integer> ev : evictedMap.entrySet()) {
      int ek=ev.getKey();
      if (ek == key) {
      }
 else {
        assertFalse(cache.containsKey(ek));
      }
    }
    for (    Entry<Integer,Integer> ev : evictedMap.entrySet()) {
      int ek=ev.getKey();
      Integer v=ev.getValue();
      assertTrue(v < k);
      if (ek == key) {
      }
 else {
        assertFalse(cache.containsKey(ek));
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.PathUtilsTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetDepth(){
  assertEquals(0,PathUtils.getDepth("/"));
  assertEquals(0,PathUtils.getDepth(""));
  assertEquals(1,PathUtils.getDepth("/a"));
  assertEquals(1,PathUtils.getDepth("a"));
  assertEquals(2,PathUtils.getDepth("/a/b"));
  assertEquals(2,PathUtils.getDepth("a/b"));
}

</code></pre>

<br>
<pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConcatRelativePaths(){
  assertNull(PathUtils.concatRelativePaths("","",""));
  assertNull(PathUtils.concatRelativePaths());
  assertEquals("a/b/c",PathUtils.concatRelativePaths("a","b","c"));
  assertEquals("a/b/c",PathUtils.concatRelativePaths("a","b/c"));
  assertEquals("a/b/c",PathUtils.concatRelativePaths("a/b/c",""));
  assertEquals("a/b/c",PathUtils.concatRelativePaths("a/b","c"));
  assertEquals("a/b/c",PathUtils.concatRelativePaths("/","a","","b/c/"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.PropertiesUtilTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToString(){
  assertEquals("hallo",PropertiesUtil.toString("hallo",null));
  assertEquals(this.toString(),PropertiesUtil.toString(null,this.toString()));
  final Map<String,Object> m=new HashMap<String,Object>();
  m.put("1",5);
  assertEquals(m.toString(),PropertiesUtil.toString(m,this.toString()));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings({"deprecation","UnnecessaryBoxing"}) @Test public void testToDouble(){
  assertEquals(2.0,PropertiesUtil.toDouble(null,2.0),0);
  assertEquals(1.0,PropertiesUtil.toDouble(1.0,2.0),0);
  assertEquals(1.0,PropertiesUtil.toDouble(new Double(1.0),2.0),0);
  assertEquals(5.0,PropertiesUtil.toDouble(new Long(5),2.0),0);
  assertEquals(2.0,PropertiesUtil.toDouble("abc",2.0),0);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToBoolean(){
  assertEquals(true,PropertiesUtil.toBoolean(null,true));
  assertEquals(false,PropertiesUtil.toBoolean(1.0,true));
  assertEquals(false,PropertiesUtil.toBoolean(false,true));
  assertEquals(false,PropertiesUtil.toBoolean("false",true));
  assertEquals(false,PropertiesUtil.toBoolean("abc",true));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToStringArray(){
  final String[] defaultValue=new String[]{"1"};
  assertArrayEquals(null,PropertiesUtil.toStringArray(5));
  assertArrayEquals(null,PropertiesUtil.toStringArray(null));
  assertArrayEquals(defaultValue,PropertiesUtil.toStringArray(5,defaultValue));
  assertArrayEquals(defaultValue,PropertiesUtil.toStringArray(null,defaultValue));
  assertArrayEquals(new String[]{"hallo"},PropertiesUtil.toStringArray("hallo",defaultValue));
  assertArrayEquals(new String[]{"hallo"},PropertiesUtil.toStringArray(new String[]{"hallo"},defaultValue));
  assertArrayEquals(new String[]{"hallo","you"},PropertiesUtil.toStringArray(new String[]{"hallo","you"},defaultValue));
  assertArrayEquals(new String[]{"5","1"},PropertiesUtil.toStringArray(new Integer[]{5,1},defaultValue));
  assertArrayEquals(new String[]{"5","1"},PropertiesUtil.toStringArray(new Integer[]{5,null,1},defaultValue));
  final List<String> l=new ArrayList<String>();
  assertArrayEquals(new String[]{},PropertiesUtil.toStringArray(l,defaultValue));
  l.add("1");
  l.add("2");
  assertArrayEquals(new String[]{"1","2"},PropertiesUtil.toStringArray(l,defaultValue));
  l.add(null);
  assertArrayEquals(new String[]{"1","2"},PropertiesUtil.toStringArray(l,defaultValue));
  final Map<String,Object> m=new HashMap<String,Object>();
  m.put("1",5);
  assertArrayEquals(defaultValue,PropertiesUtil.toStringArray(m,defaultValue));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("UnnecessaryBoxing") @Test public void testToInteger(){
  assertEquals(2,PropertiesUtil.toInteger(null,2));
  assertEquals(2,PropertiesUtil.toInteger(1.0,2));
  assertEquals(2,PropertiesUtil.toInteger(new Double(1.0),2));
  assertEquals(5,PropertiesUtil.toInteger(new Long(5),2));
  assertEquals(5,PropertiesUtil.toInteger(new Integer(5),2));
  assertEquals(2,PropertiesUtil.toInteger("abc",2));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPopulate(){
  Map<String,Object> props=new HashMap<String,Object>();
  props.put("string","foo");
  props.put("bool","true");
  props.put("integer","7");
  props.put("aLong","11");
  TestBeanA bean=new TestBeanA();
  PropertiesUtil.populate(bean,props,false);
  assertEquals("foo",bean.getString());
  assertTrue(bean.getBool());
  assertEquals(7,bean.getInteger());
  assertEquals(11,bean.getaLong());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToObject(){
  assertEquals("hallo",PropertiesUtil.toObject("hallo"));
  assertEquals("1",PropertiesUtil.toObject(new String[]{"1","2"}));
  assertEquals(null,PropertiesUtil.toObject(null));
  assertEquals(null,PropertiesUtil.toObject(new String[]{}));
  final List<String> l=new ArrayList<String>();
  assertEquals(null,PropertiesUtil.toObject(l));
  l.add("1");
  assertEquals("1",PropertiesUtil.toObject(l));
  l.add("2");
  assertEquals("1",PropertiesUtil.toObject(l));
  final Map<String,Object> m=new HashMap<String,Object>();
  assertEquals(m,PropertiesUtil.toObject(m));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("UnnecessaryBoxing") @Test public void testToLong(){
  assertEquals(2,PropertiesUtil.toLong(null,2));
  assertEquals(2,PropertiesUtil.toLong(1.0,2));
  assertEquals(2,PropertiesUtil.toLong(new Double(1.0),2));
  assertEquals(5,PropertiesUtil.toLong(new Long(5),2));
  assertEquals(5,PropertiesUtil.toLong(new Integer(5),2));
  assertEquals(2,PropertiesUtil.toLong("abc",2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.cache.ConcurrentCacheTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  Concurrent.run("cache",new Concurrent.Task(){
    @Override public void call() throws Exception {
      int k=value++ % 10;
      Data v=cache.get(k);
      Assert.assertEquals(k,v.value);
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.concurrent.NotifyingFutureTaskTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void completed() throws Exception {
  CountingRunnable runnable=new CountingRunnable();
  NotifyingFutureTask nft=NotifyingFutureTask.completed();
  nft.onComplete(runnable);
  assertEquals("Callback should still be invoked if already done",1,runnable.count);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void onCompletion() throws Exception {
  CountingCallable callable=new CountingCallable();
  CountingRunnable runnable=new CountingRunnable();
  NotifyingFutureTask nft=new NotifyingFutureTask(callable);
  nft.onComplete(runnable);
  nft.run();
  assertEquals(1,callable.count);
  assertEquals(1,runnable.count);
  nft.run();
  assertEquals("Callback should be invoked only once",1,runnable.count);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.io.LazyInputStreamTest </h4><pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws IOException {
  createFile();
  LazyInputStream in=new LazyInputStream(asByteSource(file));
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(0,in.read());
  assertEquals(-1,in.read());
  assertEquals(-1,in.read());
  assertEquals(-1,in.read());
  in.close();
  in.close();
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertFalse(in.markSupported());
  in.mark(1);
  assertEquals(0,in.read());
  try {
    in.reset();
    fail();
  }
 catch (  IOException e) {
  }
  assertEquals(-1,in.read());
  in.close();
  in=new LazyInputStream(asByteSource(file));
  byte[] test=new byte[2];
  assertEquals(1,in.read(test));
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(1,in.read(test,0,2));
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(2,in.skip(2));
  assertEquals(-1,in.read(test));
  in.close();
  createFile();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(0,in.read());
  assertEquals(-1,in.read());
  in.close();
  file.delete();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.jmx.AnnotatedStandardMBeanTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  MBeanInfo info=server.getMBeanInfo(objectName);
  assertEquals("MBean desc.",info.getDescription());
  MBeanAttributeInfo a0=findAttribute(info,"Getter");
  assertEquals("getter",a0.getDescription());
  MBeanAttributeInfo a1=findAttribute(info,"It");
  assertEquals("is",a1.getDescription());
  MBeanAttributeInfo a2=findAttribute(info,"Setter");
  assertEquals("setter",a2.getDescription());
  MBeanOperationInfo op0=info.getOperations()[0];
  assertEquals("run",op0.getDescription());
  assertEquals(MBeanOperationInfo.INFO,op0.getImpact());
  MBeanParameterInfo p0=op0.getSignature()[0];
  assertEquals("timeout",p0.getName());
  assertEquals("how long?",p0.getDescription());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.jmx.JmxUtilTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void quotation() throws Exception {
  assertEquals("text",JmxUtil.quoteValueIfRequired("text"));
  TestCase.assertEquals("",JmxUtil.quoteValueIfRequired(""));
  assertTrue(JmxUtil.quoteValueIfRequired("text*with?chars").startsWith("\""));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.sort.EscapeUtilsTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnEscape() throws Exception {
  assertEquals("ab\nc\r",EscapeUtils.unescapeLineBreaks("ab\\nc\\r"));
  assertEquals("a\\z",EscapeUtils.unescapeLineBreaks("a\\\\z"));
  assertEquals("some text with multi \nbyte  characters.",EscapeUtils.unescapeLineBreaks("some text with multi \\nbyte  characters."));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEscape() throws Exception {
  assertEquals("ab\\nc\\r",EscapeUtils.escapeLineBreak("ab\nc\r"));
  assertEquals("a\\\\z",EscapeUtils.escapeLineBreak("a\\z"));
  assertEquals("some text with multi \\nbyte  characters.",EscapeUtils.escapeLineBreak("some text with multi \nbyte  characters."));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noOp() throws Exception {
  assertEquals(null,EscapeUtils.escapeLineBreak(null));
  assertEquals("abc",EscapeUtils.escapeLineBreak("abc"));
  assertEquals("",EscapeUtils.escapeLineBreak(""));
  assertEquals("some text with multi byte  characters.",EscapeUtils.escapeLineBreak("some text with multi byte  characters."));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void randomized() throws Exception {
  Random r=new Random(1);
  for (int i=0; i < 100000; i++) {
    int len=r.nextInt(10);
    StringBuilder buff=new StringBuilder();
    for (int j=0; j < len; j++) {
switch (r.nextInt(3)) {
case 0:
        String s="\\\r\nrnRN ";
      buff.append(s.charAt(r.nextInt(s.length())));
    break;
case 1:
  buff.append(RandomStringUtils.random(4,true,false));
break;
case 2:
buff.append((char)r.nextInt(65000));
break;
}
}
String original=buff.toString();
String escaped=EscapeUtils.escapeLineBreak(original);
String unescaped=EscapeUtils.unescapeLineBreaks(escaped);
assertTrue(escaped.indexOf('\n') < 0);
assertTrue(escaped.indexOf('\r') < 0);
assertEquals(original,unescaped);
}
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noOpUnEscape() throws Exception {
  assertEquals(null,EscapeUtils.unescapeLineBreaks(null));
  assertEquals("abc",EscapeUtils.unescapeLineBreaks("abc"));
  assertEquals("abc\b",EscapeUtils.unescapeLineBreaks("abc\b"));
  assertEquals("",EscapeUtils.unescapeLineBreaks(""));
  assertEquals("some text with multi byte  characters.",EscapeUtils.unescapeLineBreaks("some text with multi byte  characters."));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.sort.ExternalSortTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMergeSortedFilesDistinct() throws Exception {
  String line;
  List<String> result;
  BufferedReader bf;
  Comparator<String> cmp=new Comparator<String>(){
    @Override public int compare(    String o1,    String o2){
      return o1.compareTo(o2);
    }
  }
;
  File out=File.createTempFile("test_results",".tmp",null);
  ExternalSort.mergeSortedFiles(this.fileList,out,cmp,Charset.defaultCharset(),true);
  bf=new BufferedReader(new FileReader(out));
  result=new ArrayList<String>();
  while ((line=bf.readLine()) != null) {
    result.add(line);
  }
  bf.close();
  assertArrayEquals(Arrays.toString(result.toArray()),EXPECTED_MERGE_DISTINCT_RESULTS,result.toArray());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortAndSave() throws Exception {
  File f;
  String line;
  List<String> result;
  BufferedReader bf;
  List<String> sample=Arrays.asList(SAMPLE);
  Comparator<String> cmp=new Comparator<String>(){
    @Override public int compare(    String o1,    String o2){
      return o1.compareTo(o2);
    }
  }
;
  f=ExternalSort.sortAndSave(sample,cmp,Charset.defaultCharset(),null,false,false);
  assertNotNull(f);
  assertTrue(f.exists());
  assertTrue(f.length() > 0);
  bf=new BufferedReader(new FileReader(f));
  result=new ArrayList<String>();
  while ((line=bf.readLine()) != null) {
    result.add(line);
  }
  bf.close();
  assertArrayEquals(Arrays.toString(result.toArray()),EXPECTED_SORT_RESULTS,result.toArray());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMergeSortedFilesAppend() throws Exception {
  String line;
  List<String> result;
  BufferedReader bf;
  Comparator<String> cmp=new Comparator<String>(){
    @Override public int compare(    String o1,    String o2){
      return o1.compareTo(o2);
    }
  }
;
  File out=File.createTempFile("test_results",".tmp",null);
  writeStringToFile(out,"HEADER, HEADER\n");
  ExternalSort.mergeSortedFiles(this.fileList,out,cmp,Charset.defaultCharset(),true,true,false);
  bf=new BufferedReader(new FileReader(out));
  result=new ArrayList<String>();
  while ((line=bf.readLine()) != null) {
    result.add(line);
  }
  bf.close();
  assertArrayEquals(Arrays.toString(result.toArray()),EXPECTED_HEADER_RESULTS,result.toArray());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortAndSaveDistinct() throws Exception {
  File f;
  String line;
  List<String> result;
  BufferedReader bf;
  List<String> sample=Arrays.asList(SAMPLE);
  Comparator<String> cmp=new Comparator<String>(){
    @Override public int compare(    String o1,    String o2){
      return o1.compareTo(o2);
    }
  }
;
  f=ExternalSort.sortAndSave(sample,cmp,Charset.defaultCharset(),null,true,false);
  assertNotNull(f);
  assertTrue(f.exists());
  assertTrue(f.length() > 0);
  bf=new BufferedReader(new FileReader(f));
  result=new ArrayList<String>();
  while ((line=bf.readLine()) != null) {
    result.add(line);
  }
  bf.close();
  assertArrayEquals(Arrays.toString(result.toArray()),EXPECTED_DISTINCT_RESULTS,result.toArray());
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSortInBatch() throws Exception {
  Comparator<String> cmp=new Comparator<String>(){
    @Override public int compare(    String o1,    String o2){
      return o1.compareTo(o2);
    }
  }
;
  List<File> listOfFiles=ExternalSort.sortInBatch(this.csvFile,cmp,ExternalSort.DEFAULTMAXTEMPFILES,ExternalSort.DEFAULT_MAX_MEM_BYTES,Charset.defaultCharset(),null,false,1,false);
  assertEquals(1,listOfFiles.size());
  ArrayList<String> result=readLines(listOfFiles.get(0));
  assertArrayEquals(Arrays.toString(result.toArray()),EXPECTED_MERGE_DISTINCT_RESULTS,result.toArray());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMergeSortedFiles() throws Exception {
  String line;
  List<String> result;
  BufferedReader bf;
  Comparator<String> cmp=new Comparator<String>(){
    @Override public int compare(    String o1,    String o2){
      return o1.compareTo(o2);
    }
  }
;
  File out=File.createTempFile("test_results",".tmp",null);
  ExternalSort.mergeSortedFiles(this.fileList,out,cmp,Charset.defaultCharset(),false);
  bf=new BufferedReader(new FileReader(out));
  result=new ArrayList<String>();
  while ((line=bf.readLine()) != null) {
    result.add(line);
  }
  bf.close();
  assertArrayEquals(Arrays.toString(result.toArray()),EXPECTED_MERGE_RESULTS,result.toArray());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.DefaultConflictHandlerOursTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddExistingProperties() throws CommitFailedException {
  theirRoot.getTree("/").setProperty("p",THEIR_VALUE);
  theirRoot.getTree("/").setProperty("q",THEIR_VALUE);
  ourRoot.getTree("/").setProperty("p",OUR_VALUE);
  ourRoot.getTree("/").setProperty("q",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("p");
  assertNotNull(p);
  assertEquals(OUR_VALUE,p.getValue(STRING));
  PropertyState q=ourRoot.getTree("/").getProperty("q");
  assertNotNull(q);
  assertEquals(OUR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddExistingNode() throws CommitFailedException {
  theirRoot.getTree("/").addChild("n").setProperty("p",THEIR_VALUE);
  ourRoot.getTree("/").addChild("n").setProperty("p",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/n");
  assertTrue(n.exists());
  assertEquals(OUR_VALUE,n.getProperty("p").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeDeletedProperty() throws CommitFailedException {
  theirRoot.getTree("/").removeProperty("a");
  ourRoot.getTree("/").setProperty("a",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("a");
  assertNotNull(p);
  assertEquals(OUR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeChangedProperty() throws CommitFailedException {
  theirRoot.getTree("/").setProperty("a",THEIR_VALUE);
  ourRoot.getTree("/").setProperty("a",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("a");
  assertNotNull(p);
  assertEquals(OUR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeDeletedNode() throws CommitFailedException {
  theirRoot.getTree("/x").remove();
  ourRoot.getTree("/x").setProperty("p",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/x");
  assertTrue(n.exists());
  assertEquals(OUR_VALUE,n.getProperty("p").getValue(STRING));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.DefaultConflictHandlerTheirsTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddExistingNode() throws CommitFailedException {
  theirRoot.getTree("/").addChild("n").setProperty("p",THEIR_VALUE);
  ourRoot.getTree("/").addChild("n").setProperty("p",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/n");
  assertNotNull(n);
  assertEquals(THEIR_VALUE,n.getProperty("p").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteChangedNode() throws CommitFailedException {
  theirRoot.getTree("/x").setProperty("p",THEIR_VALUE);
  ourRoot.getTree("/x").remove();
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/x");
  assertTrue(n.exists());
  assertEquals(THEIR_VALUE,n.getProperty("p").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddExistingProperties() throws CommitFailedException {
  theirRoot.getTree("/").setProperty("p",THEIR_VALUE);
  theirRoot.getTree("/").setProperty("q",THEIR_VALUE);
  ourRoot.getTree("/").setProperty("p",OUR_VALUE);
  ourRoot.getTree("/").setProperty("q",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("p");
  assertNotNull(p);
  assertEquals(THEIR_VALUE,p.getValue(STRING));
  PropertyState q=ourRoot.getTree("/").getProperty("q");
  assertNotNull(q);
  assertEquals(THEIR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeChangedProperty() throws CommitFailedException {
  theirRoot.getTree("/").setProperty("a",THEIR_VALUE);
  ourRoot.getTree("/").setProperty("a",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("a");
  assertNotNull(p);
  assertEquals(THEIR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteChangedProperty() throws CommitFailedException {
  theirRoot.getTree("/").setProperty("a",THEIR_VALUE);
  ourRoot.getTree("/").removeProperty("a");
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("a");
  assertNotNull(p);
  assertEquals(THEIR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.MutableTreeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBlob() throws CommitFailedException, IOException {
  Blob expected=new StringBasedBlob("test blob");
  root.getTree("/x").setProperty("blob",expected);
  root.commit();
  Blob actual=root.getTree("/x").getProperty("blob").getValue(Type.BINARY);
  assertEquals(expected,actual);
  assertTrue(expected.getNewStream().available() >= 0);
  assertTrue(actual.getNewStream().available() >= 0);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setProperty() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertFalse(tree.hasProperty("new"));
  tree.setProperty("new","value");
  PropertyState property=tree.getProperty("new");
  assertNotNull(property);
  assertEquals("new",property.getName());
  assertEquals("value",property.getValue(STRING));
  root.commit();
  property=tree.getProperty("new");
  assertNotNull(property);
  assertEquals("new",property.getName());
  assertEquals("value",property.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getPropertyCount(){
  Tree tree=root.getTree("/");
  assertEquals(3,tree.getPropertyCount());
  tree.setProperty("a","foo");
  assertEquals(3,tree.getPropertyCount());
  tree.removeProperty("a");
  assertEquals(2,tree.getPropertyCount());
  tree.setProperty("x","foo");
  assertEquals(3,tree.getPropertyCount());
  tree.setProperty("a","foo");
  assertEquals(4,tree.getPropertyCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void modifiedAfterRebase() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.addChild("new");
  assertEquals(Status.MODIFIED,tree.getStatus());
  root.rebase();
  assertEquals(Status.MODIFIED,tree.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeStatus() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.addChild("new");
  assertEquals(Tree.Status.NEW,tree.getChild("new").getStatus());
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getChild("new").getStatus());
  Tree added=tree.getChild("new");
  added.addChild("another");
  assertEquals(Tree.Status.MODIFIED,tree.getChild("new").getStatus());
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getChild("new").getStatus());
  tree.getChild("new").getChild("another").remove();
  assertEquals(Tree.Status.MODIFIED,tree.getChild("new").getStatus());
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getChild("new").getStatus());
  assertFalse(tree.getChild("new").getChild("another").exists());
  Tree x=root.getTree("/x");
  Tree y=x.addChild("y");
  x.remove();
  assertFalse(x.exists());
  assertFalse(y.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisconnectAfterRefresh(){
  Tree x=root.getTree("/x");
  x.setProperty("p","any");
  Tree xx=x.addChild("xx");
  xx.setProperty("q","any");
  assertEquals(Status.MODIFIED,x.getStatus());
  assertEquals(Status.NEW,x.getPropertyStatus("p"));
  assertEquals(Status.NEW,xx.getStatus());
  assertEquals(Status.NEW,xx.getPropertyStatus("q"));
  root.refresh();
  assertEquals(Status.UNCHANGED,x.getStatus());
  assertNull(x.getPropertyStatus("p"));
  assertFalse(xx.exists());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetOrderableChildren() throws Exception {
  Tree tree=root.getTree("/").addChild("test2");
  tree.setOrderableChildren(true);
  String[] childNames=new String[]{"a","b","c","d"};
  for (  String name : childNames) {
    tree.addChild(name);
  }
  int index=0;
  for (  Tree child : tree.getChildren()) {
    assertEquals(childNames[index++],child.getName());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getProperty(){
  Tree tree=root.getTree("/");
  PropertyState propertyState=tree.getProperty("any");
  assertNull(propertyState);
  propertyState=tree.getProperty("a");
  assertNotNull(propertyState);
  assertFalse(propertyState.isArray());
  assertEquals(LONG,propertyState.getType());
  assertEquals(1,(long)propertyState.getValue(LONG));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisconnectAfterRemove(){
  Tree x=root.getTree("/x");
  x.setProperty("p","any");
  Tree xx=x.addChild("xx");
  xx.setProperty("q","any");
  assertEquals(Status.MODIFIED,x.getStatus());
  assertEquals(Status.NEW,x.getPropertyStatus("p"));
  assertEquals(Status.NEW,xx.getStatus());
  assertEquals(Status.NEW,xx.getPropertyStatus("q"));
  root.getTree("/x").remove();
  assertFalse(x.exists());
  assertFalse(xx.exists());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getChildrenCount(){
  Tree tree=root.getTree("/");
  assertEquals(3,tree.getChildrenCount(4));
  tree.getChild("x").remove();
  assertEquals(2,tree.getChildrenCount(3));
  tree.addChild("a");
  assertEquals(3,tree.getChildrenCount(3));
  tree.addChild("x");
  assertEquals(4,tree.getChildrenCount(5));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void isNew() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.addChild("c");
  root.commit();
  tree.getChild("c").remove();
  Tree c=tree.addChild("c");
  assertEquals(Status.NEW,c.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getChildren(){
  Tree tree=root.getTree("/");
  Iterable<Tree> children=tree.getChildren();
  Set<String> expectedPaths=new HashSet<String>();
  Collections.addAll(expectedPaths,"/x","/y","/z");
  for (  Tree child : children) {
    assertTrue(expectedPaths.remove(child.getPath()));
  }
  assertTrue(expectedPaths.isEmpty());
  assertEquals(3,tree.getChildrenCount(4));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noTransitiveModifiedStatus() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.addChild("one").addChild("two");
  root.commit();
  tree.getChild("one").getChild("two").addChild("three");
  assertEquals(Tree.Status.UNCHANGED,tree.getChild("one").getStatus());
  assertEquals(Tree.Status.MODIFIED,tree.getChild("one").getChild("two").getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addChild() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertFalse(tree.hasChild("new"));
  Tree added=tree.addChild("new");
  assertTrue(added.exists());
  assertEquals("new",added.getName());
  assertTrue(tree.hasChild("new"));
  root.commit();
  assertTrue(tree.hasChild("new"));
  tree.getChild("new").addChild("more");
  assertTrue(tree.getChild("new").hasChild("more"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getProperties(){
  Tree tree=root.getTree("/");
  Set<PropertyState> expectedProperties=Sets.newHashSet(LongPropertyState.createLongProperty("a",1L),LongPropertyState.createLongProperty("b",2L),LongPropertyState.createLongProperty("c",3L));
  Iterable<? extends PropertyState> properties=tree.getProperties();
  for (  PropertyState property : properties) {
    assertTrue(expectedProperties.remove(property));
  }
  assertTrue(expectedProperties.isEmpty());
  assertEquals(3,tree.getPropertyCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyStatus() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.setProperty("new","value1");
  assertEquals(Tree.Status.NEW,tree.getPropertyStatus("new"));
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getPropertyStatus("new"));
  tree.setProperty("new","value2");
  assertEquals(Tree.Status.MODIFIED,tree.getPropertyStatus("new"));
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getPropertyStatus("new"));
  tree.removeProperty("new");
  assertNull(tree.getPropertyStatus("new"));
  root.commit();
  assertNull(tree.getPropertyStatus("new"));
  Tree x=root.getTree("/x");
  x.setProperty("y","value1");
  x.remove();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addExistingChild() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertFalse(tree.hasChild("new"));
  tree.addChild("new");
  root.commit();
  assertTrue(tree.hasChild("new"));
  Tree added=tree.addChild("new");
  assertTrue(added.exists());
  assertEquals("new",added.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.RootTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void moveNew(){
  Root root=session.getLatestRoot();
  Tree tree=root.getTree("/");
  Tree t=tree.addChild("new");
  root.move("/new","/y/new");
  assertEquals("/y/new",t.getPath());
  assertFalse(tree.getChild("new").exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getTree(){
  Root root=session.getLatestRoot();
  List<String> validPaths=new ArrayList<String>();
  validPaths.add("/");
  validPaths.add("/x");
  validPaths.add("/x/xx");
  validPaths.add("/y");
  validPaths.add("/z");
  for (  String treePath : validPaths) {
    Tree tree=root.getTree(treePath);
    assertTrue(tree.exists());
    assertEquals(treePath,tree.getPath());
  }
  List<String> invalidPaths=new ArrayList<String>();
  invalidPaths.add("/any");
  invalidPaths.add("/x/any");
  for (  String treePath : invalidPaths) {
    assertFalse(root.getTree(treePath).exists());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void moveRemoveAdd(){
  Root root=session.getLatestRoot();
  Tree x=root.getTree("/x");
  Tree z=root.getTree("/z");
  z.setProperty("p","1");
  root.move("/z","/x/z");
  root.getTree("/x/z").remove();
  assertFalse(z.exists());
  x.addChild("z");
  assertEquals(Status.NEW,z.getStatus());
  x.getChild("z").setProperty("p","2");
  PropertyState p=z.getProperty("p");
  assertNotNull(p);
  assertEquals("2",p.getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rebasePreservesStatus() throws CommitFailedException {
  Root root1=session.getLatestRoot();
  Root root2=session.getLatestRoot();
  Tree x=root1.getTree("/x");
  Tree added=x.addChild("added");
  assertEquals(NEW,added.getStatus());
  root2.getTree("/x").addChild("bar");
  root2.commit();
  root1.rebase();
  assertTrue(x.hasChild("added"));
  assertEquals(NEW,x.getChild("added").getStatus());
  assertTrue(x.hasChild("bar"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void moveExistingParent() throws CommitFailedException {
  Root root=session.getLatestRoot();
  root.getTree("/").addChild("parent").addChild("new");
  root.commit();
  Tree parent=root.getTree("/parent");
  Tree n=root.getTree("/parent/new");
  root.move("/parent","/moved");
  assertEquals(Status.NEW,parent.getStatus());
  assertEquals(Status.NEW,n.getStatus());
  assertEquals("/moved",parent.getPath());
  assertEquals("/moved/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rename() throws CommitFailedException {
  Root root=session.getLatestRoot();
  Tree tree=root.getTree("/");
  Tree x=tree.getChild("x");
  assertTrue(x.exists());
  root.move("/x","/xx");
  assertFalse(tree.hasChild("x"));
  assertTrue(tree.hasChild("xx"));
  assertEquals("/xx",x.getPath());
  root.commit();
  assertFalse(tree.hasChild("x"));
  assertTrue(tree.hasChild("xx"));
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void purgePreservesStatus() throws CommitFailedException {
  Tree x=session.getLatestRoot().getTree("/x");
  Tree added=x.addChild("added");
  for (int k=0; k < 10000; k++) {
    assertEquals("k=" + k,NEW,x.getChild("added").getStatus());
    x.addChild("k" + k);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void move() throws CommitFailedException {
  Root root=session.getLatestRoot();
  Tree tree=root.getTree("/");
  Tree y=tree.getChild("y");
  Tree x=tree.getChild("x");
  assertTrue(x.exists());
  assertFalse(root.hasPendingChanges());
  root.move("/x","/y/xx");
  assertTrue(root.hasPendingChanges());
  assertFalse(tree.hasChild("x"));
  assertTrue(y.hasChild("xx"));
  assertEquals("/y/xx",x.getPath());
  root.commit();
  assertFalse(root.hasPendingChanges());
  assertFalse(tree.hasChild("x"));
  assertTrue(tree.hasChild("y"));
  assertTrue(tree.getChild("y").hasChild("xx"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AtomicCounterClusterIT </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void increments() throws Exception {
  setUpCluster(this.getClass(),mks,repos,NOT_PROVIDED);
  assertEquals("repositories and executors should match",repos.size(),executors.size());
  final String counterPath;
  final Random rnd=new Random(14);
  final AtomicLong expected=new AtomicLong(0);
  final Map<String,Exception> exceptions=Collections.synchronizedMap(new HashMap<String,Exception>());
  Repository repo=repos.get(0);
  Session session=repo.login(ADMIN);
  Node counter;
  try {
    counter=session.getRootNode().addNode("counter");
    counter.addMixin(MIX_ATOMIC_COUNTER);
    session.save();
    counterPath=counter.getPath();
  }
  finally {
    session.logout();
  }
  alignCluster(mks);
  assertFalse("Path to the counter node should be set",Strings.isNullOrEmpty(counterPath));
  for (  Repository r : repos) {
    try {
      session=r.login(ADMIN);
      counter=session.getNode(counterPath);
      assertEquals("Nothing should have touched the `expected`",0,expected.get());
      assertEquals("Wrong initial counter",expected.get(),counter.getProperty(PROP_COUNTER).getLong());
    }
  finally {
      session.logout();
    }
  }
  final int numIncrements=Integer.getInteger("oak.test.it.atomiccounter.threads",100);
  LOG.debug("pushing {} increments per each of the {} cluster nodes for a total of {} concurrent updates",numIncrements,repos.size(),numIncrements * repos.size());
  long start=LOG_PERF.start("Firing the threads");
  List<ListenableFutureTask<Void>> tasks=Lists.newArrayList();
  for (  Repository rep : repos) {
    final Repository r=rep;
    for (int i=0; i < numIncrements; i++) {
      ListenableFutureTask<Void> task=ListenableFutureTask.create(new Callable<Void>(){
        @Override public Void call() throws Exception {
          Session s=r.login(ADMIN);
          try {
            try {
              Node n=s.getNode(counterPath);
              int increment=rnd.nextInt(10) + 1;
              n.setProperty(PROP_INCREMENT,increment);
              expected.addAndGet(increment);
              s.save();
            }
  finally {
              s.logout();
            }
          }
 catch (          Exception e) {
            exceptions.put(Thread.currentThread().getName(),e);
          }
          return null;
        }
      }
);
      new Thread(task).start();
      tasks.add(task);
    }
  }
  LOG_PERF.end(start,-1,"Firing threads completed","");
  Futures.allAsList(tasks).get();
  LOG_PERF.end(start,-1,"Futures completed","");
  waitForTaskCompletion();
  LOG_PERF.end(start,-1,"All tasks completed","");
  Thread.sleep(5000);
  raiseExceptions(exceptions,LOG);
  for (int i=0; i < repos.size(); i++) {
    Repository r=repos.get(i);
    try {
      session=r.login(ADMIN);
      counter=session.getNode(counterPath);
      LOG.debug("Cluster node: {}, actual counter: {}, expected counter: {}",i + 1,expected.get(),counter.getProperty(PROP_COUNTER).getLong());
      assertEquals("Wrong counter on node " + (i + 1),expected.get(),counter.getProperty(PROP_COUNTER).getLong());
    }
  finally {
      session.logout();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AtomicCounterIT </h4><pre class="type-6 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void concurrentSegmentIncrements() throws RepositoryException, InterruptedException, ExecutionException {
  assumeTrue(NodeStoreFixtures.SEGMENT_MK.equals(fixture));
  Session session=getAdminSession();
  try {
    Node counter=session.getRootNode().addNode("counter");
    counter.addMixin(MIX_ATOMIC_COUNTER);
    session.save();
    final AtomicLong expected=new AtomicLong(0);
    final String counterPath=counter.getPath();
    final Random rnd=new Random(11);
    assertEquals(expected.get(),counter.getProperty(PROP_COUNTER).getLong());
    List<ListenableFutureTask<Void>> tasks=Lists.newArrayList();
    for (int t=0; t < 100; t++) {
      tasks.add(updateCounter(counterPath,rnd.nextInt(10) + 1,expected));
    }
    Futures.allAsList(tasks).get();
    session.refresh(false);
    assertEquals(expected.get(),session.getNode(counterPath).getProperty(PROP_COUNTER).getLong());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AutoCreatedItemsTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void autoCreatedItems() throws Exception {
  Session s=getAdminSession();
  new TestContentLoader().loadTestContent(s);
  Node test=s.getRootNode().addNode("test","test:autoCreate");
  assertTrue(test.hasProperty("test:property"));
  assertEquals("default value",test.getProperty("test:property").getString());
  assertTrue(test.hasProperty("test:propertyMulti"));
  assertArrayEquals(new Value[]{s.getValueFactory().createValue("value1"),s.getValueFactory().createValue("value2")},test.getProperty("test:propertyMulti").getValues());
  assertTrue(test.hasNode("test:folder"));
  Node folder=test.getNode("test:folder");
  assertEquals("nt:folder",folder.getPrimaryNodeType().getName());
  assertTrue(folder.hasProperty("jcr:created"));
  assertTrue(folder.hasProperty("jcr:createdBy"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.CRUDTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2488">OAK-2488</a>
 */
@Test public void testMixins() throws Exception {
  Session session=getAdminSession();
  String nodename="mixintest";
  Node mixinTest=session.getRootNode().addNode(nodename,"nt:folder");
  NodeType[] types;
  types=mixinTest.getMixinNodeTypes();
  assertEquals(Arrays.toString(types),0,types.length);
  mixinTest.addMixin("mix:versionable");
  types=mixinTest.getMixinNodeTypes();
  assertEquals(Arrays.toString(types),1,types.length);
  session.save();
  mixinTest=session.getRootNode().getNode(nodename);
  mixinTest.remove();
  mixinTest=session.getRootNode().addNode(nodename,"nt:folder");
  types=mixinTest.getMixinNodeTypes();
  assertEquals(Arrays.toString(types),0,types.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCRUD() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("world","hello world");
  session.save();
  assertEquals("hello world",session.getProperty("/hello/world").getString());
  session.getNode("/hello").setProperty("world","Hello, World!");
  session.save();
  assertEquals("Hello, World!",session.getProperty("/hello/world").getString());
  session.getNode("/hello").remove();
  session.save();
  assertTrue(!session.propertyExists("/hello/world"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetPropertyDateWithTimeZone() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  final Calendar cal=Calendar.getInstance();
  cal.setTimeZone(TimeZone.getTimeZone("America/Chicago"));
  cal.setTimeInMillis(1239902100000L);
  root.setProperty("start",cal);
  session.save();
  assertEquals(12,root.getProperty("start").getDate().get(Calendar.HOUR_OF_DAY));
  root.getProperty("start").remove();
  session.save();
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRootPropertyPath() throws RepositoryException {
  Property property=getAdminSession().getRootNode().getProperty("jcr:primaryType");
  assertEquals("/jcr:primaryType",property.getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.CompatibilityIssuesTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * OAK-948 - JR2 generates propertyChange event for touched properties while Oak does not
 */
@Test public void noEventsForTouchedProperties() throws RepositoryException, InterruptedException {
  final String testNodeName="test_touched_node";
  final String testNodePath='/' + testNodeName;
  Session session=getAdminSession();
  Node testNode=session.getRootNode().addNode(testNodeName);
  testNode.setProperty("foo","bar");
  testNode.setProperty("foo2","bar0");
  session.save();
  Session observingSession=createAdminSession();
  ObservationManager observationManager=observingSession.getWorkspace().getObservationManager();
  try {
    final List<Event> events=new ArrayList<Event>();
    final CountDownLatch latch=new CountDownLatch(1);
    EventListener listener=new EventListener(){
      @Override public void onEvent(      EventIterator eventIt){
        while (eventIt.hasNext()) {
          events.add(eventIt.nextEvent());
        }
        if (!events.isEmpty()) {
          latch.countDown();
        }
      }
    }
;
    observationManager.addEventListener(listener,PROPERTY_CHANGED,testNodePath,true,null,null,false);
    session.getNode(testNodePath).setProperty("foo","bar");
    session.getNode(testNodePath).setProperty("foo2","bar2");
    session.save();
    latch.await(60,TimeUnit.SECONDS);
    assertEquals(1,events.size());
  }
  finally {
    observingSession.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConcurrentAddIT </h4><pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void addNodesSameParent() throws Exception {
  List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  Node test=getAdminSession().getRootNode().addNode("test","nt:unstructured");
  List<Thread> worker=new ArrayList<Thread>();
  for (int i=0; i < NUM_WORKERS; i++) {
    worker.add(new Thread(new Worker(createAdminSession(),test.getPath(),exceptions)));
  }
  getAdminSession().save();
  for (  Thread t : worker) {
    t.start();
  }
  for (  Thread t : worker) {
    t.join();
  }
  for (  Exception e : exceptions) {
    fail(e.toString());
  }
  getAdminSession().refresh(false);
  assertEquals(NODES_PER_WORKER * NUM_WORKERS,Iterators.size(test.getNodes()));
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void addNodes() throws Exception {
  List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  Node test=getAdminSession().getRootNode().addNode("test");
  List<Thread> worker=new ArrayList<Thread>();
  for (int i=0; i < NUM_WORKERS; i++) {
    String path=test.addNode("node" + i).getPath();
    worker.add(new Thread(new Worker(createAdminSession(),path,exceptions)));
  }
  getAdminSession().save();
  for (  Thread t : worker) {
    t.start();
  }
  for (  Thread t : worker) {
    t.join();
  }
  for (  Exception e : exceptions) {
    fail(e.toString());
  }
  getAdminSession().refresh(false);
  for (  Node n : in((Iterator<Node>)test.getNodes())) {
    assertEquals(NODES_PER_WORKER,Iterators.size(n.getNodes()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConcurrentAddReferenceTest </h4><pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void addReferences() throws Exception {
  List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  List<Thread> worker=new ArrayList<Thread>();
  for (int i=0; i < NUM_WORKERS; i++) {
    String path=testRoot.addNode("node" + i).getPath();
    worker.add(new Thread(new Worker(createAdminSession(),path,exceptions)));
  }
  getAdminSession().save();
  for (  Thread t : worker) {
    t.start();
  }
  for (  Thread t : worker) {
    t.join();
  }
  for (  Exception e : exceptions) {
    fail(e.toString());
  }
  getAdminSession().refresh(false);
  for (  Node n : in((Iterator<Node>)testRoot.getNodes())) {
    assertEquals(NODES_PER_WORKER,Iterators.size(n.getNodes()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.CopyTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCopyVersionableNodeCreatesJcrCopiedFrom() throws Exception {
  Session session=getAdminSession();
  Node toCopy=session.getNode(TEST_PATH + "/source/node");
  toCopy.addMixin(JcrConstants.MIX_VERSIONABLE);
  session.save();
  Version baseV=toCopy.getBaseVersion();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  Node copy=testNode.getNode("target/copied");
  VersionHistory copiedVh=copy.getVersionHistory();
  assertTrue(copiedVh.hasProperty(VersionConstants.JCR_COPIED_FROM));
  Property prop=copiedVh.getProperty(VersionConstants.JCR_COPIED_FROM);
  assertEquals(PropertyType.WEAKREFERENCE,prop.getType());
  Node copiedFrom=prop.getNode();
  assertTrue(baseV.isSame(copiedFrom));
}

</code></pre>

<br>
<pre class="type-13 type-12 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCopyVersionableNodeClearsVersions() throws Exception {
  Session session=getAdminSession();
  Node toCopy=session.getNode(TEST_PATH + "/source/node");
  toCopy.addMixin(JcrConstants.MIX_VERSIONABLE);
  session.save();
  Version v1=toCopy.checkin();
  toCopy.checkout();
  Version v2=toCopy.checkin();
  toCopy.checkout();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  Node copy=testNode.getNode("target/copied");
  VersionHistory vh=copy.getVersionHistory();
  Version rootV=vh.getRootVersion();
  assertEquals(0,rootV.getSuccessors().length);
  VersionIterator vItr=vh.getAllVersions();
  while (vItr.hasNext()) {
    if (!rootV.isSame(vItr.nextVersion())) {
      fail("Unexpected version in version history of copied node.");
    }
  }
  try {
    vh.getVersion(v1.getName());
    fail("Unexpected version in version history of copied node.");
  }
 catch (  VersionException e) {
  }
  try {
    vh.getVersion(v2.getName());
    fail("Unexpected version in version history of copied node.");
  }
 catch (  VersionException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.LongPathTest </h4><pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLongPath() throws Exception {
  Session s=getAdminSession();
  StringBuilder buff=new StringBuilder();
  for (int i=0; i < 10; i++) {
    buff.append("0123456789");
  }
  String longName="n" + buff.toString();
  Node n=s.getRootNode();
  ArrayList<String> paths=new ArrayList<String>();
  for (int i=0; i < 30; i++) {
    n=n.addNode(longName + "_" + i);
    paths.add(n.getPath());
  }
  s.save();
  Session s2=createAdminSession();
  Node n2=s2.getRootNode();
  for (int i=0; i < 30; i++) {
    n2=n2.getNode(longName + "_" + i);
    assertEquals(paths.get(i),n2.getPath());
  }
  s2.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.MoveRemoveTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void moveExistingNode() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  session.save();
  Node n=session.getNode("/new");
  session.move("/new","/moved");
  assertEquals("/moved",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void moveExistingNodeRefresh() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  session.save();
  Session session2=createAdminSession();
  Node n2=session2.getNode("/new");
  Node n=session.getNode("/new");
  session.move("/new","/moved");
  session.save();
  session2.refresh(false);
  try {
    n2.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("new");
  session.save();
  session2.refresh(false);
  assertEquals("/new",n2.getPath());
  session2.logout();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void moveExistingParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  Node p=session.getNode("/parent");
  Node n=session.getNode("/parent/new");
  session.move("/parent","/moved");
  assertEquals("/moved",p.getPath());
  assertEquals("/moved/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void moveExistingNodeRefreshParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  Session session2=createAdminSession();
  Node n2=session2.getNode("/parent/new");
  Node n=session.getNode("/parent/new");
  session.move("/parent","/moved");
  session.save();
  session2.refresh(false);
  try {
    n2.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  session2.refresh(false);
  assertEquals("/parent/new",n2.getPath());
  session2.logout();
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeExistingNodeParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  Node n=session.getNode("/parent/new");
  n.getParent().remove();
  try {
    n.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("parent").addNode("new");
  assertEquals("/parent/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeExistingNodeRefreshParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  Session session2=createAdminSession();
  Node n2=session2.getNode("/parent/new");
  Node n=session.getNode("/parent/new");
  n.getParent().remove();
  session.save();
  session2.refresh(false);
  try {
    n2.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  session2.refresh(false);
  assertEquals("/parent/new",n2.getPath());
  session2.logout();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void moveNewNode() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  Node n=session.getNode("/new");
  session.move("/new","/moved");
  assertEquals("/moved",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeNewNodeParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  Node n=session.getNode("/parent/new");
  n.getParent().remove();
  try {
    n.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("parent").addNode("new");
  assertEquals("/parent/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void moveNewNodeParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  Node n=session.getNode("/parent/new");
  session.move("/parent","/moved");
  assertEquals("/moved/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeExistingNode() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  session.save();
  Node n=session.getNode("/new");
  n.remove();
  try {
    n.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("new");
  assertEquals("/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeNewNode() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  Node n=session.getNode("/new");
  n.remove();
  try {
    n.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("new");
  assertEquals("/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeExistingNodeRefresh() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  session.save();
  Session session2=createAdminSession();
  Node n2=session2.getNode("/new");
  Node n=session.getNode("/new");
  n.remove();
  session.save();
  session2.refresh(false);
  try {
    n2.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("new");
  session.save();
  session2.refresh(false);
  assertEquals("/new",n2.getPath());
  session2.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.MoveTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMoveReferenceable() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  node1.addMixin(JcrConstants.MIX_REFERENCEABLE);
  Node node2=testRootNode.addNode(nodeName2);
  superuser.save();
  String destPath=node2.getPath() + '/' + nodeName1;
  move(node1.getPath(),destPath,true);
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMoveNewReferenceable() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  node1.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(node1.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  Node node2=testRootNode.addNode(nodeName2);
  String destPath=node2.getPath() + '/' + nodeName1;
  move(node1.getPath(),destPath,false);
  assertEquals(destPath,node1.getPath());
  superuser.save();
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMove() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  Node node2=testRootNode.addNode(nodeName2);
  superuser.save();
  String destPath=node2.getPath() + '/' + nodeName1;
  move(node1.getPath(),destPath,true);
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRename() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  superuser.save();
  String destPath=testRoot + '/' + nodeName2;
  move(node1.getPath(),destPath,true);
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRenameNewNode() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  String destPath=testRoot + '/' + nodeName2;
  move(node1.getPath(),destPath,false);
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMoveNewNode() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  Node node2=testRootNode.addNode(nodeName2);
  String destPath=node2.getPath() + '/' + nodeName1;
  move(node1.getPath(),destPath,false);
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.OrderableNodesTest </h4><pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void setPrimaryType() throws Exception {
  new TestContentLoader().loadTestContent(getAdminSession());
  Session session=getAdminSession();
  Node root=session.getRootNode().addNode("test","nt:folder");
  List<String> names=new ArrayList<String>();
  for (int i=0; i < 100; i++) {
    String name="node-" + i;
    root.addNode(name,"nt:folder");
    names.add(name);
  }
  root.setPrimaryType("test:orderableFolder");
  List<String> expected=getChildNames(root);
  while (!expected.isEmpty()) {
    String name=expected.remove((int)Math.floor(Math.random() * expected.size()));
    root.getNode(name).remove();
    assertEquals(expected,getChildNames(root));
  }
  for (  String name : names) {
    root.addNode(name,"nt:folder");
    expected.add(name);
    assertEquals(expected,getChildNames(root));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-612
 */
@Test public void testAddNode() throws Exception {
  new TestContentLoader().loadTestContent(getAdminSession());
  Session session=getAdminSession();
  Node test=session.getRootNode().addNode("test","test:orderableFolder");
  assertTrue(test.getPrimaryNodeType().hasOrderableChildNodes());
  test.addNode("a");
  test.addNode("b");
  session.save();
  NodeIterator it=test.getNodes();
  assertEquals("a",it.nextNode().getName());
  assertEquals("b",it.nextNode().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ReferenceBinaryIT </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Taken from org.apache.jackrabbit.core.value.ReferenceBinaryTest
 * @throws Exception
 */
@Test public void testReferenceBinaryExchangeWithSharedRepository() throws Exception {
  Session firstSession=createAdminSession();
  Binary b=firstSession.getValueFactory().createBinary(new RandomInputStream(1,STREAM_LENGTH));
  ReferenceBinary referenceBinary=null;
  if (b instanceof ReferenceBinary) {
    referenceBinary=(ReferenceBinary)b;
  }
  assertNotNull(referenceBinary);
  assertNotNull(referenceBinary.getReference());
  String newNode="sample_" + System.nanoTime();
  firstSession.getRootNode().addNode(newNode).setProperty("reference",referenceBinary.getReference());
  firstSession.save();
  Session secondSession=repository.login(new SimpleCredentials("admin","admin".toCharArray()));
  String reference=secondSession.getRootNode().getNode(newNode).getProperty("reference").getString();
  ReferenceBinary ref=new SimpleReferenceBinary(reference);
  assertEquals(b,secondSession.getValueFactory().createValue(ref).getBinary());
  safeLogout(firstSession);
  safeLogout(secondSession);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.RepositoryTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedDouble() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(42.1d);
  values[1]=getAdminSession().getValueFactory().createValue(99.0d);
  parentNode.setProperty("multi double",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi double");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.DOUBLE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeFromNode() throws RepositoryException {
  Node root=getNode("/");
  Node node=root.getNode("foo");
  assertNotNull(node);
  assertEquals("foo",node.getName());
  assertEquals("/foo",node.getPath());
  Node nodeAgain=getNode("/foo");
  assertTrue(node.isSame(nodeAgain));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedDecimal() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(BigDecimal.valueOf(42));
  values[1]=getAdminSession().getValueFactory().createValue(BigDecimal.valueOf(99));
  parentNode.setProperty("multi decimal",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi decimal");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.DECIMAL,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void move() throws RepositoryException {
  Session session=getAdminSession();
  Node node=getNode(TEST_PATH);
  Node source=node.addNode("source").addNode("node");
  node.addNode("target");
  session.save();
  session.refresh(true);
  session.move(TEST_PATH + "/source/node",TEST_PATH + "/target/moved");
  assertEquals(TEST_PATH + "/target/moved",source.getPath());
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
  session.save();
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void workspaceCopyWithReferences() throws RepositoryException {
  Session session=getAdminSession();
  ValueFactory vf=session.getValueFactory();
  Node root=session.getRootNode();
  Node other=root.addNode("other");
  other.addMixin("mix:referenceable");
  Node src=root.addNode("src");
  Node test=src.addNode("test");
  test.addMixin("mix:referenceable");
  src.setProperty("test",test);
  src.setProperty("other",other);
  src.setProperty("multi",new Value[]{vf.createValue(test),vf.createValue(other)});
  session.save();
  session.getWorkspace().copy("/src","/dest");
  Node dest=root.getNode("dest");
  assertEquals("/dest/test",dest.getProperty("test").getNode().getPath());
  assertEquals("/other",dest.getProperty("other").getNode().getPath());
  Value[] refs=dest.getProperty("multi").getValues();
  assertEquals(2,refs.length);
  Set<String> paths=new HashSet<String>();
  for (  Value v : refs) {
    paths.add(session.getNodeByIdentifier(v.getString()).getPath());
  }
  assertTrue(paths.contains("/other"));
  assertTrue(paths.contains("/dest/test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNamedWeakReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  Value value=session.getValueFactory().createValue(referee,true);
  getNode(TEST_PATH).setProperty("weak-reference1",value);
  getNode("/bar").setProperty("weak-reference2",value);
  session.save();
  PropertyIterator refs=referee.getWeakReferences("weak-reference1");
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("weak-reference1",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedBinary() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  InputStream is=new ByteArrayInputStream("foo".getBytes());
  Binary bin=getAdminSession().getValueFactory().createBinary(is);
  values[0]=getAdminSession().getValueFactory().createValue(bin);
  is=new ByteArrayInputStream("bar".getBytes());
  bin=getAdminSession().getValueFactory().createBinary(is);
  values[1]=getAdminSession().getValueFactory().createValue(bin);
  parentNode.setProperty("multi binary",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi binary");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.BINARY,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getRootFromPath() throws RepositoryException {
  Node root=getNode("/");
  assertEquals("",root.getName());
  assertEquals("/",root.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sessionRemappedNamespace() throws RepositoryException {
  NamespaceRegistry nsReg=getAdminSession().getWorkspace().getNamespaceRegistry();
  nsReg.registerNamespace("foo","file:///foo");
  getAdminSession().getRootNode().addNode("foo:test");
  getAdminSession().save();
  Session s=createAdminSession();
  s.setNamespacePrefix("bar","file:///foo");
  assertTrue(s.getRootNode().hasNode("bar:test"));
  Node n=s.getRootNode().getNode("bar:test");
  assertEquals("bar:test",n.getName());
  s.logout();
  getAdminSession().getRootNode().getNode("foo:test").remove();
  getAdminSession().save();
  nsReg.unregisterNamespace("foo");
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeDot() throws RepositoryException {
  Node node=getNode("/foo");
  Node same=node.getNode(".");
  assertNotNull(same);
  assertEquals("foo",same.getName());
  assertTrue(same.isSame(node));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNode() throws RepositoryException {
  Node node=getNode("/foo");
  assertNotNull(node);
  assertEquals("foo",node.getName());
  assertEquals("/foo",node.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedStringWithNull() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[3];
  values[0]=getAdminSession().getValueFactory().createValue(true);
  values[2]=getAdminSession().getValueFactory().createValue(false);
  parentNode.setProperty("multi with null",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi with null");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.BOOLEAN,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length - 1,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addEmptyMultiValueName() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[0];
  parentNode.setProperty("multi name",values,PropertyType.NAME);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi name");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.NAME,property.getType());
    Value[] values2=property.getValues();
    assertEquals(0,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedURI() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("http://www.day.com",PropertyType.URI);
  values[1]=getAdminSession().getValueFactory().createValue("file://var/dam",PropertyType.URI);
  parentNode.setProperty("multi uri",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi uri");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.URI,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void renameNonOrderable() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node parent=root.addNode("parent",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  parent.addNode("fo");
  Node foo=parent.addNode("foo");
  session.save();
  ((JackrabbitNode)foo).rename("renamed");
  assertEquals("renamed",foo.getName());
  assertFalse(session.nodeExists("/parent/foo"));
  assertTrue(session.nodeExists("/parent/renamed"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedLong() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(42L);
  values[1]=getAdminSession().getValueFactory().createValue(84L);
  parentNode.setProperty("multi long",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi long");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.LONG,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedString() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("one");
  values[1]=getAdminSession().getValueFactory().createValue("two");
  parentNode.setProperty("multi string",values);
  parentNode.getSession().save();
  Session session2=createAdminSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi string");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.STRING,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addEmptyMultiValue() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[0];
  parentNode.setProperty("multi value",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi value");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.STRING,property.getType());
    Value[] values2=property.getValues();
    assertEquals(0,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void setPrimaryType() throws RepositoryException {
  Node testNode=getNode(TEST_PATH);
  assertEquals("nt:unstructured",testNode.getPrimaryNodeType().getName());
  assertEquals("nt:unstructured",testNode.getProperty("jcr:primaryType").getString());
  testNode.setPrimaryType("nt:folder");
  getAdminSession().save();
  Session session2=createAnonymousSession();
  try {
    testNode=session2.getNode(TEST_PATH);
    assertEquals("nt:folder",testNode.getPrimaryNodeType().getName());
    assertEquals("nt:folder",testNode.getProperty("jcr:primaryType").getString());
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("OAK-118") @Test public void createDeleteWorkspace() throws RepositoryException {
  getAdminSession().getWorkspace().createWorkspace("new");
  Session session2=createAdminSession();
  try {
    String[] workspaces=session2.getWorkspace().getAccessibleWorkspaceNames();
    assertTrue(asList(workspaces).contains("new"));
    Session session3=getRepository().login("new");
    assertEquals("new",session3.getWorkspace().getName());
    session3.logout();
    session2.getWorkspace().deleteWorkspace("new");
  }
  finally {
    session2.logout();
  }
  Session session4=createAdminSession();
  try {
    String[] workspaces=session4.getWorkspace().getAccessibleWorkspaceNames();
    assertFalse(asList(workspaces).contains("new"));
  }
  finally {
    session4.logout();
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void invalidItemStateExceptionOnRemovedNode() throws Exception {
  Session session=getAdminSession();
  for (  String parentPath : new String[]{"/",TEST_PATH}) {
    Node parent=session.getNode(parentPath);
    Node child=parent.addNode("child");
    String childPath=child.getPath();
    child.remove();
    try {
      child.getPath();
      fail();
    }
 catch (    InvalidItemStateException expected) {
    }
    session.save();
    try {
      child.getPath();
      fail();
    }
 catch (    InvalidItemStateException expected) {
    }
    parent.addNode("child");
    assertEquals(childPath,child.getPath());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setMultiValuedProperty() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("one");
  values[1]=getAdminSession().getValueFactory().createValue("two");
  parentNode.setProperty("multi string2",values);
  parentNode.getSession().save();
  values[0]=getAdminSession().getValueFactory().createValue("eins");
  values[1]=getAdminSession().getValueFactory().createValue("zwei");
  parentNode.setProperty("multi string2",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi string2");
    assertTrue(property.isMultiple());
    Value[] values2=property.getValues();
    assertEquals(2,values.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sessionRefresh() throws RepositoryException {
  Session session=getAdminSession();
  session.getNode("/").addNode("node1");
  session.getNode("/node1").addNode("node2");
  session.getNode("/").addNode("node1/node3");
  Node node1=session.getNode("/node1");
  assertEquals("/node1",node1.getPath());
  Node node2=session.getNode("/node1/node2");
  assertEquals("/node1/node2",node2.getPath());
  Node node3=session.getNode("/node1/node3");
  assertEquals("/node1/node3",node3.getPath());
  node3.setProperty("property1","value1");
  Item property1=session.getProperty("/node1/node3/property1");
  assertFalse(property1.isNode());
  assertEquals("value1",((Property)property1).getString());
  session.refresh(true);
  assertTrue(session.itemExists("/node1"));
  assertTrue(session.itemExists("/node1/node2"));
  assertTrue(session.itemExists("/node1/node3"));
  assertTrue(session.itemExists("/node1/node3/property1"));
  session.refresh(false);
  assertFalse(session.itemExists("/node1"));
  assertFalse(session.itemExists("/node1/node2"));
  assertFalse(session.itemExists("/node1/node3"));
  assertFalse(session.itemExists("/node1/node3/property1"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedBoolean() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(true);
  values[1]=getAdminSession().getValueFactory().createValue(false);
  parentNode.setProperty("multi boolean",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi boolean");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.BOOLEAN,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  getNode(TEST_PATH).setProperty("reference",session.getValueFactory().createValue(referee));
  session.save();
  PropertyIterator refs=referee.getReferences();
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("reference",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void mixin() throws RepositoryException {
  NodeTypeManager ntMgr=getAdminSession().getWorkspace().getNodeTypeManager();
  NodeTypeTemplate mixTest=ntMgr.createNodeTypeTemplate();
  mixTest.setName("mix:test");
  mixTest.setMixin(true);
  ntMgr.registerNodeType(mixTest,false);
  Node testNode=getNode(TEST_PATH);
  NodeType[] mix=testNode.getMixinNodeTypes();
  assertEquals(0,mix.length);
  testNode.addMixin("mix:test");
  testNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    mix=session2.getNode(TEST_PATH).getMixinNodeTypes();
    assertEquals(1,mix.length);
    assertEquals("mix:test",mix[0].getName());
  }
  finally {
    session2.logout();
  }
  testNode.removeMixin("mix:test");
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNamedReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  Value value=session.getValueFactory().createValue(referee);
  getNode(TEST_PATH).setProperty("reference1",value);
  getNode("/bar").setProperty("reference2",value);
  session.save();
  PropertyIterator refs=referee.getReferences("reference1");
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("reference1",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void importWithRegisteredType() throws Exception {
  Session session=getAdminSession();
  NodeTypeManager ntMgr=getAdminSession().getWorkspace().getNodeTypeManager();
  NodeTypeTemplate ntd=ntMgr.createNodeTypeTemplate();
  ntd.setName("fooType");
  PropertyDefinitionTemplate propDefTemplate=ntMgr.createPropertyDefinitionTemplate();
  propDefTemplate.setName("fooProp");
  propDefTemplate.setRequiredType(PropertyType.STRING);
  ntd.getPropertyDefinitionTemplates().add(propDefTemplate);
  ntMgr.registerNodeType(ntd,false);
  Node node=session.getRootNode().addNode("node","fooType");
  node.setProperty("fooProp","fooValue");
  session.save();
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  session.exportDocumentView("/node",out,true,false);
  node.remove();
  session.save();
  session.getWorkspace().importXML("/",new ByteArrayInputStream(out.toByteArray()),IMPORT_UUID_CREATE_NEW);
  session.save();
  assertEquals("fooValue",session.getProperty("/node/fooProp").getString());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addEmptyMultiValuedProperty() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[0];
  parentNode.setProperty("multi empty",values,PropertyType.BOOLEAN);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi empty");
    assertTrue(property.isMultiple());
    Value[] values2=property.getValues();
    assertEquals(0,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeByUUID() throws RepositoryException {
  Node node=getNode("/foo").addNode("boo");
  node.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(node.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String uuid=node.getUUID();
  assertNotNull(uuid);
  assertEquals(uuid,node.getIdentifier());
  Node nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
  Node childNode=node.addNode("boohoo");
  childNode.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(childNode.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String childUuid=childNode.getUUID();
  assertNotNull(childUuid);
  assertEquals(childUuid,childNode.getIdentifier());
  nAgain=childNode.getSession().getNodeByUUID(childUuid);
  assertTrue(nAgain.isSame(childNode));
  assertTrue(nAgain.isSame(childNode.getSession().getNodeByIdentifier(childUuid)));
  node.getSession().move("/foo/boo","/foo/boohoo");
  node=getNode("/foo/boohoo");
  nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedName() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("jcr:foo",PropertyType.NAME);
  values[1]=getAdminSession().getValueFactory().createValue("bar",PropertyType.NAME);
  parentNode.setProperty("multi name",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi name");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.NAME,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getProperties() throws RepositoryException {
  Set<String> propertyNames=new HashSet<String>(){
{
      add("intProp");
      add("mvProp");
      add("added");
    }
  }
;
  Set<String> values=new HashSet<String>(){
{
      add("added");
      add("1");
      add("2");
      add("3");
      add("42");
    }
  }
;
  Node node=getNode("/foo");
  node.setProperty("added","added");
  node.getProperty("stringProp").remove();
  node.getProperty("intProp").remove();
  node.setProperty("intProp",42);
  PropertyIterator properties=node.getProperties();
  assertEquals(4,properties.getSize());
  while (properties.hasNext()) {
    Property p=properties.nextProperty();
    if (JcrConstants.JCR_PRIMARYTYPE.equals(p.getName())) {
      continue;
    }
    assertTrue(propertyNames.remove(p.getName()));
    if (p.isMultiple()) {
      for (      Value v : p.getValues()) {
        assertTrue(values.remove(v.getString()));
      }
    }
 else {
      assertTrue(values.remove(p.getString()));
    }
  }
  assertTrue(propertyNames.isEmpty());
  assertTrue(values.isEmpty());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getProperty() throws RepositoryException {
  Property property=getProperty("/foo/stringProp");
  assertNotNull(property);
  assertEquals("stringProp",property.getName());
  assertEquals("/foo/stringProp",property.getPath());
  Value value=property.getValue();
  assertNotNull(value);
  assertEquals(PropertyType.STRING,value.getType());
  assertEquals("stringVal",value.getString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getRootChildByUUID() throws RepositoryException {
  Node node=getNode("/").addNode("boo");
  node.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(node.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String uuid=node.getUUID();
  assertNotNull(uuid);
  assertEquals(uuid,node.getIdentifier());
  Node nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
  Node childNode=node.addNode("boohoo");
  childNode.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(childNode.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String childUuid=childNode.getUUID();
  assertNotNull(childUuid);
  assertEquals(childUuid,childNode.getIdentifier());
  nAgain=childNode.getSession().getNodeByUUID(childUuid);
  assertTrue(nAgain.isSame(childNode));
  assertTrue(nAgain.isSame(childNode.getSession().getNodeByIdentifier(childUuid)));
  node.getSession().move("/boo","/boohoo");
  node=getNode("/boohoo");
  nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getWeakReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  getNode(TEST_PATH).setProperty("weak-reference",session.getValueFactory().createValue(referee,true));
  session.save();
  PropertyIterator refs=referee.getWeakReferences();
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("weak-reference",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeDotDot() throws RepositoryException {
  Node node=getNode("/foo");
  Node root=node.getNode("..");
  assertNotNull(root);
  assertEquals("",root.getName());
  assertTrue(root.isSame(node.getParent()));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodes() throws RepositoryException {
  Node test=getNode(TEST_PATH);
  test.addNode("foo");
  test.addNode("bar");
  test.addNode("baz");
  getAdminSession().save();
  Set<String> nodeNames=new HashSet<String>(){
{
      add("bar");
      add("added");
      add("baz");
    }
  }
;
  test=getNode(TEST_PATH);
  test.addNode("added");
  test.getNode("foo").remove();
  test.getNode("bar").remove();
  test.addNode("bar");
  NodeIterator nodes=test.getNodes();
  assertEquals(3,nodes.getSize());
  while (nodes.hasNext()) {
    String name=nodes.nextNode().getName();
    assertTrue(nodeNames.remove(name));
  }
  assertTrue(nodeNames.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddNodeWithExpandedName() throws RepositoryException {
  Session session=getAdminSession();
  session.getWorkspace().getNamespaceRegistry().registerNamespace("foo","http://foo");
  Node node=getNode(TEST_PATH);
  Node added=node.addNode("{http://foo}new");
  assertEquals("foo:new",added.getName());
  session.save();
  added=session.getNode(TEST_PATH + "/{http://foo}new");
  assertEquals("foo:new",added.getName());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPropertyFromNode() throws RepositoryException {
  Node node=getNode("/foo");
  Property property=node.getProperty("stringProp");
  assertNotNull(property);
  assertEquals("stringProp",property.getName());
  assertEquals("/foo/stringProp",property.getPath());
  Value value=property.getValue();
  assertNotNull(value);
  assertEquals(PropertyType.STRING,value.getType());
  assertEquals("stringVal",value.getString());
  Property propertyAgain=getProperty("/foo/stringProp");
  assertTrue(property.isSame(propertyAgain));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void loginWithCredentialsAttribute() throws RepositoryException {
  SimpleCredentials sc=getAdminCredentials();
  sc.setAttribute("attr","val");
  Session session=null;
  try {
    session=getRepository().login(sc,null);
    String[] attributeNames=session.getAttributeNames();
    assertEquals(1,attributeNames.length);
    assertEquals("attr",attributeNames[0]);
    assertEquals("val",session.getAttribute("attr"));
  }
  finally {
    if (session != null) {
      session.logout();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setStringProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"string",getAdminSession().getValueFactory().createValue("string \" value"));
  Property property=parentNode.getProperty("string");
  property.setValue("new value");
  assertTrue(parentNode.isModified());
  assertTrue(property.isModified());
  assertFalse(property.isNew());
  property.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property2=session2.getProperty(TEST_PATH + "/string");
    assertEquals("new value",property2.getString());
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void setPropertyWithConversion() throws RepositoryException {
  Node n=getNode(TEST_PATH);
  Node file=n.addNode("file","nt:file");
  Node content=file.addNode("jcr:content","nt:resource");
  long value=System.currentTimeMillis();
  Property property=content.setProperty("jcr:lastModified",value);
  assertEquals(value,property.getDate().getTimeInMillis());
  content.setProperty("jcr:data",new ByteArrayInputStream("foo".getBytes()));
  content.setProperty("jcr:mimeType","text/plain");
  n.getSession().save();
}

</code></pre>

<br>
<pre class="type-6 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReferenceBinary() throws RepositoryException {
  ValueFactory valueFactory=getAdminSession().getValueFactory();
  Binary binary=valueFactory.createBinary(new RandomInputStream(1,256 * 1024));
  String reference=binary instanceof ReferenceBinary ? ((ReferenceBinary)binary).getReference() : null;
  assumeTrue(reference != null);
  Session session=createAdminSession();
  try {
    valueFactory=session.getValueFactory();
    assertEquals(binary,valueFactory.createValue(new SimpleReferenceBinary(reference)).getBinary());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedPath() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("/nt:foo/jcr:bar",PropertyType.PATH);
  values[1]=getAdminSession().getValueFactory().createValue("/",PropertyType.PATH);
  parentNode.setProperty("multi path",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi path");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.PATH,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getRoot() throws RepositoryException {
  Node root=getAdminSession().getRootNode();
  assertNotNull(root);
  assertEquals("",root.getName());
  assertEquals("/",root.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void setPropertyAgain() throws RepositoryException {
  Session session=getAdminSession();
  Property p1=session.getProperty("/foo/stringProp");
  Property p2=p1.getParent().setProperty("stringProp","newValue");
  Property p3=session.getProperty("/foo/stringProp");
  assertEquals("newValue",p1.getString());
  assertEquals("newValue",p2.getString());
  assertEquals("newValue",p3.getString());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test SNS 1-based indexed path.
 * JCR 2.0, Chapter 22.2:
 * <em>
 * A name in a content repository path that does not explicitly specify an index implies an index of 1.
 * For example, /a/b/c is equivalent to /a[1]/b[1]/c[1].
 * </em>
 * @throws RepositoryException
 */
@Test public void getNodeSNS() throws RepositoryException {
  Node node=getNode("/foo[1]");
  assertNotNull(node);
  assertEquals("foo",node.getName());
  assertEquals("/foo",node.getPath());
  node.addNode("bar");
  Node bar=getNode("/foo[1]/bar[1]");
  assertEquals("/foo/bar",bar.getPath());
  try {
    getNode("/foo[1]/bar[2]");
    fail("retrieving wrong SNS index should throw PathNotFoundException");
  }
 catch (  PathNotFoundException e) {
  }
  try {
    getProperty("/foo[1]/bar[2]/jcr:primaryType");
    fail("retrieving wrong SNS index should throw PathNotFoundException");
  }
 catch (  PathNotFoundException e) {
  }
  assertTrue(getAdminSession().nodeExists("/foo[1]/bar[1]"));
  assertTrue(node.hasNode("bar[1]"));
  assertTrue(node.hasProperty("bar[1]/jcr:primaryType"));
  assertTrue(getAdminSession().propertyExists("/foo[1]/bar[1]/jcr:primaryType"));
  assertFalse(getAdminSession().nodeExists("/foo[1]/bar[2]"));
  assertFalse(node.hasNode("bar[2]"));
  assertFalse(node.hasProperty("bar[2]/jcr:primaryType"));
  assertFalse(getAdminSession().propertyExists("/foo[1]/bar[2]/jcr:primaryType"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void loginWithAttribute() throws RepositoryException {
  Session session=((JackrabbitRepository)getRepository()).login(new GuestCredentials(),null,Collections.<String,Object>singletonMap(RepositoryImpl.REFRESH_INTERVAL,42));
  String[] attributeNames=session.getAttributeNames();
  assertEquals(1,attributeNames.length);
  assertEquals(RepositoryImpl.REFRESH_INTERVAL,attributeNames[0]);
  assertEquals(42L,session.getAttribute(RepositoryImpl.REFRESH_INTERVAL));
  session.logout();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedReference() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Node referee=getAdminSession().getNode("/foo");
  referee.addMixin("mix:referenceable");
  getAdminSession().save();
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(referee);
  values[1]=getAdminSession().getValueFactory().createValue(referee);
  parentNode.setProperty("multi reference",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi reference");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.REFERENCE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedWeakReference() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Node referee=getAdminSession().getNode("/foo");
  referee.addMixin("mix:referenceable");
  getAdminSession().save();
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(referee,true);
  values[1]=getAdminSession().getValueFactory().createValue(referee,true);
  parentNode.setProperty("multi weak reference",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi weak reference");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.WEAKREFERENCE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sessionSave() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    session1.getNode("/").addNode("node1");
    session1.getNode("/node1").addNode("node2");
    session1.getNode("/").addNode("node1/node3");
    Node node1=session1.getNode("/node1");
    assertEquals("/node1",node1.getPath());
    Node node2=session1.getNode("/node1/node2");
    assertEquals("/node1/node2",node2.getPath());
    Node node3=session1.getNode("/node1/node3");
    assertEquals("/node1/node3",node3.getPath());
    node3.setProperty("property1","value1");
    Item property1=session1.getProperty("/node1/node3/property1");
    assertFalse(property1.isNode());
    assertEquals("value1",((Property)property1).getString());
    assertFalse(session2.itemExists("/node1"));
    assertFalse(session2.itemExists("/node1/node2"));
    assertFalse(session2.itemExists("/node1/node3"));
    assertFalse(session2.itemExists("/node1/node3/property1"));
    session1.save();
    assertTrue(session2.itemExists("/node1"));
    assertTrue(session2.itemExists("/node1/node2"));
    assertTrue(session2.itemExists("/node1/node3"));
    assertTrue(session2.itemExists("/node1/node3/property1"));
    session2.refresh(false);
    assertTrue(session2.itemExists("/node1"));
    assertTrue(session2.itemExists("/node1/node2"));
    assertTrue(session2.itemExists("/node1/node3"));
    assertTrue(session2.itemExists("/node1/node3/property1"));
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedDate() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  Calendar calendar=Calendar.getInstance();
  values[0]=getAdminSession().getValueFactory().createValue(calendar);
  calendar.add(Calendar.DAY_OF_MONTH,1);
  values[1]=getAdminSession().getValueFactory().createValue(calendar);
  parentNode.setProperty("multi date",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi date");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.DATE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.SameNameSiblingTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void modifySiblings() throws RepositoryException {
  for (  String name : SIBLINGS) {
    Node sib=sns.getNode(name);
    sib.addNode("node");
    sib.setProperty("prop",42);
  }
  session.save();
  for (  String name : asList(SIBLING,SIBLINGS)) {
    Node sib=sns.getNode(name);
    assertTrue(sib.hasNode("node"));
    assertEquals(42L,sib.getProperty("prop").getLong());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.cluster.ManyChildrenTest </h4><pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void manyChildrenWithoutIndex() throws Exception {
  if (session == null) {
    return;
  }
  Node index=session.getRootNode().getNode("oak:index");
  if (index.hasNode("nodetype")) {
    index.getNode("nodetype").remove();
    session.save();
  }
  long start=System.currentTimeMillis(), last=start;
  int count=10;
  Profiler prof=null;
  String nodeType=NodeTypeConstants.NT_OAK_UNSTRUCTURED;
  if (session.getRootNode().hasNode("many")) {
    session.getRootNode().getNode("many").remove();
    session.save();
  }
  Node many=session.getRootNode().addNode("many",nodeType);
  for (int i=0; i < count; i++) {
    Node n=many.addNode("test" + i,nodeType);
    n.setProperty("prop",i);
    if (i % 100 == 0) {
      session.save();
    }
    long now=System.currentTimeMillis();
    if (now - last > 5000) {
      int opsPerSecond=(int)(i * 1000 / (now - start));
      System.out.println(i + " ops; " + opsPerSecond+ " op/s");
      last=now;
      if (prof != null) {
        System.out.println(prof.getTop(5));
      }
      if (opsPerSecond < 1000 && i % 100 == 0) {
        prof=new Profiler();
        prof.startCollecting();
      }
    }
  }
  start=System.currentTimeMillis();
  last=start;
  for (int i=0; i < count; i++) {
    Node n=many.getNode("test" + i);
    long x=n.getProperty("prop").getValue().getLong();
    assertEquals(i,x);
    long now=System.currentTimeMillis();
    if (now - last > 5000) {
      int opsPerSecond=(int)(i * 1000 / (now - start));
      System.out.println(i + " read ops; " + opsPerSecond+ " op/s");
      last=now;
      if (prof != null) {
        System.out.println(prof.getTop(5));
      }
      if (opsPerSecond < 1000 && i % 100 == 0) {
        prof=new Profiler();
        prof.startCollecting();
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.nodetype.NodeDefinitionTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRootType() throws RepositoryException {
  assertEquals(testNodeTypeTestRoot,testRootNode.getDefinition().getDeclaringNodeType().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.nodetype.NodeTypeEqualsTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests if 2 NodeType objects are equals if they refer to the same node type. OAK-1086.
 * @throws Exception
 */
@Test public void testNodeTypeEquals() throws Exception {
  NodeType nt=testRootNode.getPrimaryNodeType();
  Assert.assertEquals("Same NoteType could be equal",nt,testRootNode.getPrimaryNodeType());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.observation.ObservationRefreshTest </h4><pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void observation() throws RepositoryException, InterruptedException, ExecutionException {
  final MyListener listener=new MyListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    Node n=getAdminSession().getNode(TEST_PATH);
    for (int i=0; i < 1000; i++) {
      n.addNode("n" + i);
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numAdded == 1000;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("added nodes",1000,listener.numAdded);
    for (int i=0; i < 1000; i++) {
      n.getNode("n" + i).remove();
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numRemoved == 1000;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("removed nodes",1000,listener.numRemoved);
    for (int i=0; i < 100; i++) {
      n.setProperty("test" + i,"foo");
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numPropsAdded == 1100;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("properties added",1100,listener.numPropsAdded);
    for (int i=0; i < 100; i++) {
      n.setProperty("test" + i,i);
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numPropsModified == 100;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("properties modified",100,listener.numPropsModified);
    for (int i=0; i < 10; i++) {
      n.setProperty("test100","foo");
      n.getSession().save();
      assertTrue("Gave up waiting for events",listener.waitFor(CONDITION_TIMEOUT,new Condition(){
        @Override public boolean evaluate(){
          return listener.test100Exists;
        }
      }
));
      n.getProperty("test100").remove();
      n.getSession().save();
      assertTrue("Gave up waiting for events",listener.waitFor(CONDITION_TIMEOUT,new Condition(){
        @Override public boolean evaluate(){
          return !listener.test100Exists;
        }
      }
));
    }
    assertEquals("",listener.error);
    for (int i=0; i < 100; i++) {
      n.getProperty("test" + i).remove();
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numPropsRemoved == 1100;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("properties removed",1100,listener.numPropsRemoved);
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.PrefetchIteratorTest </h4><pre class="type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test(){
  for (  int size : seq(0,100)) {
    for (    int readBefore : seq(0,30)) {
      final long testTimeout=size % 3 == 0 ? 100 : 0;
      Iterable<Integer> s=seq(0,size);
      PrefetchIterator<Integer> it=new PrefetchIterator<Integer>(s.iterator(),new PrefetchOptions(){
{
          min=20;
          timeout=testTimeout;
          max=30;
          size=-1;
        }
      }
);
      for (      int x : seq(0,readBefore)) {
        boolean hasNext=it.hasNext();
        if (!hasNext) {
          assertEquals(x,size);
          break;
        }
        String m="s:" + size + " b:"+ readBefore+ " x:"+ x;
        assertTrue(m,hasNext);
        assertEquals(m,x,it.next().intValue());
      }
      String m="s:" + size + " b:"+ readBefore;
      int max=testTimeout <= 0 ? 20 : 30;
      if (size > max && readBefore <= size) {
        assertEquals(m,-1,it.size());
        assertEquals(m,-1,it.size());
      }
 else {
        assertEquals(m,size,it.size());
        assertEquals(m,size,it.size());
      }
      for (      int x : seq(readBefore,size)) {
        m="s:" + size + " b:"+ readBefore+ " x:"+ x;
        assertTrue(m,it.hasNext());
        assertEquals(m,x,it.next().intValue());
      }
      assertFalse(it.hasNext());
      try {
        it.next();
        fail();
      }
 catch (      NoSuchElementException e) {
      }
      try {
        it.remove();
        fail();
      }
 catch (      UnsupportedOperationException e) {
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testKnownSize(){
  Iterable<Integer> s;
  PrefetchIterator<Integer> it;
  s=seq(0,100);
  it=new PrefetchIterator<Integer>(s.iterator(),new PrefetchOptions(){
{
      min=5;
      timeout=0;
      max=10;
      size=200;
    }
  }
);
  assertEquals(200,it.size());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeout(){
  Iterable<Integer> s;
  PrefetchIterator<Integer> it;
  final long testTimeout=10;
  s=seq(0,100,10);
  it=new PrefetchIterator<Integer>(s.iterator(),new PrefetchOptions(){
{
      min=5;
      timeout=testTimeout;
      max=10;
      size=-1;
    }
  }
);
  assertEquals(-1,it.size());
  s=seq(0,100);
  it=new PrefetchIterator<Integer>(s.iterator(),new PrefetchOptions(){
{
      min=5;
      timeout=testTimeout;
      max=1000;
      size=-1;
    }
  }
);
  assertEquals(100,it.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.QueryFulltextTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fulltextOrWithinText() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n1=testRootNode.addNode("node1");
  n1.setProperty("text","hello");
  Node n2=testRootNode.addNode("node2");
  n2.setProperty("text","hallo");
  Node n3=testRootNode.addNode("node3");
  n3.setProperty("text","hello hallo");
  session.save();
  String sql2="select [jcr:path] as [path] from [nt:base] " + "where contains([text], 'hello OR hallo') order by [jcr:path]";
  Query q;
  q=qm.createQuery("explain " + sql2,Query.JCR_SQL2);
  assertEquals("[nt:base] as [nt:base] /* traverse \"*\" " + "where contains([nt:base].[text], 'hello OR hallo') */",getResult(q.execute(),"plan"));
  q=qm.createQuery(sql2,Query.JCR_SQL2);
  assertEquals("/testroot/node1, /testroot/node2, /testroot/node3",getResult(q.execute(),"path"));
  sql2="select [jcr:path] as [path] from [nt:base] " + "where contains([text], 'hello or hallo') order by [jcr:path]";
  q=qm.createQuery(sql2,Query.JCR_SQL2);
  assertEquals("",getResult(q.execute(),"path"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.QueryPlanTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void uuidIndex() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n=testRootNode.addNode("node");
  n.addMixin("mix:referenceable");
  session.save();
  String xpath="/jcr:root/testroot/node[@jcr:uuid]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* traverse \"/testroot/node\" where " + "([a].[jcr:uuid] is not null) " + "and (issamenode([a], [/testroot/node])) */",plan);
  q=qm.createQuery(xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String path=it.nextRow().getPath();
  assertEquals("/testroot/node",path);
  assertFalse(it.hasNext());
  xpath="/jcr:root/testroot/*[@jcr:uuid]";
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property uuid IS NOT NULL " + "where ([a].[jcr:uuid] is not null) " + "and (ischildnode([a], [/testroot])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-1372") public void pathAndPropertyRestrictions() throws Exception {
  ;
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node b=testRootNode.addNode("b");
  Node c=b.addNode("c");
  Node d=c.addNode("d");
  Node e1=d.addNode("e1");
  e1.setProperty("type","1");
  Node e2=d.addNode("e2");
  e2.setProperty("type","2");
  Node e3=d.addNode("e3");
  e3.setProperty("type","3");
  session.save();
  String xpath="/jcr:root/testroot//b/c/d/*[@jcr:uuid='1' or @jcr:uuid='2'] ";
  String sql2="select d.[jcr:path] as [jcr:path], d.[jcr:score] as [jcr:score], d.* " + "from [nt:base] as a inner join [nt:base] as b on ischildnode(b, a) " + "inner join [nt:base] as c on ischildnode(c, b) "+ "inner join [nt:base] as d on ischildnode(d, c) "+ "where name(a) = 'b' "+ "and isdescendantnode(a, '/testroot') "+ "and name(b) = 'c' "+ "and name(c) = 'd' "+ "and (d.[jcr:uuid] = '1' or d.[jcr:uuid] = '2')";
  sql2="select d.[jcr:path] as [jcr:path], d.[jcr:score] as [jcr:score], d.* " + "from [nt:base] as d " + "where (d.[jcr:uuid] = '1' or d.[jcr:uuid] = '2')";
  sql2="select d.[jcr:path] as [jcr:path], d.[jcr:score] as [jcr:score], d.* " + "from [nt:base] as d " + "inner join [nt:base] as c on ischildnode(d, c) "+ "inner join [nt:base] as b on ischildnode(c, b) "+ "inner join [nt:base] as a on ischildnode(b, a) "+ "where name(a) = 'b' "+ "and isdescendantnode(a, '/testroot') "+ "and name(b) = 'c' "+ "and name(c) = 'd' "+ "and (d.[jcr:uuid] = '1' or d.[jcr:uuid] = '2')";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + sql2,Query.JCR_SQL2);
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("",plan);
  q=qm.createQuery(xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String path=it.nextRow().getValue("path").getString();
  assertEquals("/testroot/b/c/d/e1",path);
  path=it.nextRow().getValue("path").getString();
  assertEquals("/testroot/b/c/d/e2",path);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyEqualsVersusPropertyNotNull() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  createPropertyIndex(session,"notNull");
  createPropertyIndex(session,"equals");
  for (int i=0; i < 100; i++) {
    Node n=testRootNode.addNode("n" + i,"oak:Unstructured");
    if (i % 2 == 0) {
      n.setProperty("notNull",i);
    }
    n.setProperty("equals",1);
  }
  session.save();
  String xpath="/jcr:root//*[@notNull and @equals=1]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property notNull IS NOT NULL " + "where ([a].[notNull] is not null) " + "and ([a].[equals] = 1) "+ "and (isdescendantnode([a], [/])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void correctPropertyIndexUsage() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  createPropertyIndex(session,"fiftyPercent");
  createPropertyIndex(session,"tenPercent");
  createPropertyIndex(session,"hundredPercent");
  for (int i=0; i < 300; i++) {
    Node n=testRootNode.addNode("n" + i,"oak:Unstructured");
    if (i % 10 == 0) {
      n.setProperty("tenPercent",i);
    }
    if (i % 2 == 0) {
      n.setProperty("fiftyPercent",i);
    }
    n.setProperty("hundredPercent",i);
  }
  session.save();
  String xpath="/jcr:root//*[@tenPercent and @fiftyPercent and @hundredPercent]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property tenPercent IS NOT NULL " + "where ([a].[tenPercent] is not null) " + "and ([a].[fiftyPercent] is not null) "+ "and ([a].[hundredPercent] is not null) "+ "and (isdescendantnode([a], [/])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeType() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node nodetype=session.getRootNode().getNode("oak:index").getNode("nodetype");
  nodetype.setProperty("entryCount",100000);
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n1=testRootNode.addNode("node1");
  Node n2=n1.addNode("node2");
  n2.addNode("node3");
  session.save();
  String sql2="select [jcr:path] as [path] from [nt:base] " + "where [node2/node3/jcr:primaryType] is not null " + "and isdescendantnode('/testroot')";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + sql2,Query.JCR_SQL2);
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [nt:base] /* traverse \"/testroot//*\" " + "where ([nt:base].[node2/node3/jcr:primaryType] is not null) " + "and (isdescendantnode([nt:base], [/testroot])) "+ "*/",plan);
  q=qm.createQuery(sql2,Query.JCR_SQL2);
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String path=it.nextRow().getValue("path").getString();
  assertEquals("/testroot/node1",path);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void traversalVersusPropertyIndex() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n=testRootNode;
  for (int i=0; i < 20; i++) {
    n.setProperty("depth",i + 2);
    n=n.addNode("n","oak:Unstructured");
    n.addMixin("mix:referenceable");
  }
  session.save();
  String xpath="/jcr:root/testroot/n/n/n/n/n/n/n//*[jcr:uuid]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property uuid IS NOT NULL " + "where ([a].[jcr:uuid] is not null) and " + "(isdescendantnode([a], [/testroot/n/n/n/n/n/n/n])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyIndexVersusNodeTypeIndex() throws Exception {
  Session session=getAdminSession();
  Node nt=session.getRootNode().getNode("oak:index").getNode("nodetype");
  nt.setProperty("entryCount",200);
  Node uuid=session.getRootNode().getNode("oak:index").getNode("uuid");
  uuid.setProperty("entryCount",100);
  QueryManager qm=session.getWorkspace().getQueryManager();
  if (session.getRootNode().hasNode("testroot")) {
    session.getRootNode().getNode("testroot").remove();
    session.save();
  }
  Node testRootNode=session.getRootNode().addNode("testroot");
  for (int i=0; i < 100; i++) {
    Node n=testRootNode.addNode("n" + i,"oak:Unstructured");
    n.addMixin("mix:referenceable");
  }
  session.save();
  Query q;
  QueryResult result;
  RowIterator it;
  String xpath="/jcr:root//element(*, oak:Unstructured)";
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[oak:Unstructured] as [a] " + "/* nodeType Filter(query=explain select [jcr:path], [jcr:score], * " + "from [oak:Unstructured] as a "+ "where isdescendantnode(a, '/') "+ "/* xpath: /jcr:root//element(*, oak:Unstructured) */"+ ", path=//*) where isdescendantnode([a], [/]) */",plan);
  String xpath2="/jcr:root//element(*, oak:Unstructured)[@jcr:uuid]";
  q=qm.createQuery("explain " + xpath2 + "","xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  plan=it.nextRow().getValue("plan").getString();
  assertEquals("[oak:Unstructured] as [a] " + "/* property uuid IS NOT NULL where ([a].[jcr:uuid] is not null) " + "and (isdescendantnode([a], [/])) */",plan);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.QueryTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void twoSelectors() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node test=root.addNode("test");
  test.addNode("testNode","oak:Unstructured");
  session.save();
  assertEquals("/test/testNode",getNodeList(session,"select b.[jcr:path] as [jcr:path], b.[jcr:score] as [jcr:score], b.* " + "from [nt:base] as a " + "inner join [nt:base] as b "+ "on ischildnode(b, a) "+ "where issamenode(a, '/test')",Query.JCR_SQL2));
  assertEquals("/test/testNode",getNodeList(session,"select b.[jcr:path] as [jcr:path], b.[jcr:score] as [jcr:score], b.* " + "from [nt:base] as b " + "inner join [nt:base] as a "+ "on ischildnode(b, a) "+ "where issamenode(b, '/test/testNode')",Query.JCR_SQL2));
  assertEquals("/test",getNodeList(session,"select a.[jcr:path] as [jcr:path], a.[jcr:score] as [jcr:score], a.* " + "from [nt:base] as a " + "inner join [nt:base] as b "+ "on ischildnode(b, a) "+ "where issamenode(a, '/test')",Query.JCR_SQL2));
  assertEquals("/test",getNodeList(session,"select a.[jcr:path] as [jcr:path], a.[jcr:score] as [jcr:score], a.* " + "from [nt:base] as b " + "inner join [nt:base] as a "+ "on ischildnode(b, a) "+ "where issamenode(b, '/test/testNode')",Query.JCR_SQL2));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOak1354() throws Exception {
  Session session=createAdminSession();
  NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
  if (!manager.hasNodeType("mymixinOak1354")) {
    StringBuilder defs=new StringBuilder();
    defs.append("[mymixinOak1354]\n");
    defs.append("  mixin");
    Reader cndReader=new InputStreamReader(new ByteArrayInputStream(defs.toString().getBytes()));
    CndImporter.registerNodeTypes(cndReader,session);
  }
  Node p=session.getRootNode().addNode("one");
  p.addMixin("mymixinOak1354");
  session.save();
  Query q=session.getWorkspace().getQueryManager().createQuery("SELECT * FROM [mymixinOak1354]",Query.JCR_SQL2);
  QueryResult qr=q.execute();
  NodeIterator ni=qr.getNodes();
  assertTrue(ni.hasNext());
  Node n=ni.nextNode();
  assertEquals("/one",n.getPath());
  assertFalse(ni.hasNext());
  session.logout();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void unicode() throws Exception {
  Session session=getAdminSession();
  Node content=session.getRootNode().addNode("test");
  String[][] list={{"three","\u00e4\u00f6\u00fc"},{"two","123456789"},{"one","\u3360\u3361\u3362\u3363\u3364\u3365\u3366\u3367\u3368\u3369"}};
  for (  String[] pair : list) {
    content.addNode(pair[0]).setProperty("prop","propValue testSearch " + pair[1] + " data");
  }
  session.save();
  for (  String[] pair : list) {
    String query="//*[jcr:contains(., '" + pair[1] + "')]";
    QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
    NodeIterator it=r.getNodes();
    assertTrue(it.hasNext());
    String path=it.nextNode().getPath();
    assertEquals("/test/" + pair[0],path);
    assertFalse(it.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void skip() throws RepositoryException {
  Session session=getAdminSession();
  Node hello1=session.getRootNode().addNode("hello1");
  hello1.setProperty("id","1");
  hello1.setProperty("data","x");
  session.save();
  Node hello3=hello1.addNode("hello3");
  hello3.setProperty("id","3");
  hello3.setProperty("data","z");
  session.save();
  Node hello2=hello3.addNode("hello2");
  hello2.setProperty("id","2");
  hello2.setProperty("data","y");
  session.save();
  ValueFactory vf=session.getValueFactory();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select id from [nt:base] where data >= $data order by id",Query.JCR_SQL2);
  q.bindValue("data",vf.createValue("x"));
  for (int i=-1; i < 5; i++) {
    QueryResult r=q.execute();
    RowIterator it=r.getRows();
    assertEquals(3,r.getRows().getSize());
    assertEquals(3,r.getNodes().getSize());
    Row row;
    try {
      it.skip(i);
      assertTrue(i >= 0 && i <= 3);
    }
 catch (    IllegalArgumentException e) {
      assertEquals(-1,i);
    }
catch (    NoSuchElementException e) {
      assertTrue(i >= 2);
    }
    if (i <= 0) {
      assertTrue(it.hasNext());
      row=it.nextRow();
      assertEquals("1",row.getValue("id").getString());
    }
    if (i <= 1) {
      assertTrue(it.hasNext());
      row=it.nextRow();
      assertEquals("2",row.getValue("id").getString());
    }
    if (i <= 2) {
      assertTrue(it.hasNext());
      row=it.nextRow();
      assertEquals("3",row.getValue("id").getString());
    }
    assertFalse(it.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void propertyIndexWithDeclaringNodeTypeAndRelativQuery() throws RepositoryException {
  Session session=getAdminSession();
  RowIterator rit;
  QueryResult r;
  String query;
  query="//element(*, rep:Authorizable)[@rep:principalName = 'admin']";
  r=session.getWorkspace().getQueryManager().createQuery("explain " + query,"xpath").execute();
  rit=r.getRows();
  assertEquals("[rep:Authorizable] as [a] /* property principalName = admin " + "where [a].[rep:principalName] = 'admin' */",rit.nextRow().getValue("plan").getString());
  query="//element(*, rep:Authorizable)[admin/@rep:principalName = 'admin']";
  r=session.getWorkspace().getQueryManager().createQuery("explain " + query,"xpath").execute();
  rit=r.getRows();
  assertEquals("[rep:Authorizable] as [a] /* nodeType " + "Filter(query=explain select [jcr:path], [jcr:score], * " + "from [rep:Authorizable] as a "+ "where [admin/rep:principalName] = 'admin' "+ "/* xpath: //element(*, rep:Authorizable)["+ "admin/@rep:principalName = 'admin'] */, path=*, "+ "property=[admin/rep:principalName=[admin]]) "+ "where [a].[admin/rep:principalName] = 'admin' */",rit.nextRow().getValue("plan").getString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noDeclaringNodeTypesIndex() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node nodeTypeIndex=root.getNode("oak:index").getNode("nodetype");
  nodeTypeIndex.setProperty("declaringNodeTypes",new String[]{},PropertyType.NAME);
  session.save();
  Node test=root.addNode("test");
  test.addNode("testNode","oak:Unstructured");
  session.save();
  String query="/jcr:root/test//*[@jcr:primaryType='oak:Unstructured']";
  QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  NodeIterator it=r.getNodes();
  assertTrue(it.hasNext());
  assertEquals("/test/testNode",it.nextNode().getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void typeConversion() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node test=root.addNode("test");
  test.addNode("a","oak:Unstructured").setProperty("time","2001-01-01T00:00:00.000Z",PropertyType.DATE);
  test.addNode("b","oak:Unstructured").setProperty("time","2010-01-01T00:00:00.000Z",PropertyType.DATE);
  test.addNode("c","oak:Unstructured").setProperty("time","2020-01-01T00:00:00.000Z",PropertyType.DATE);
  session.save();
  assertEquals("/test/c",getNodeList(session,"select [jcr:path] " + "from [nt:base] " + "where [time] > '2011-01-01T00:00:00.000z'",Query.JCR_SQL2));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void relativeNotExistsProperty() throws Exception {
  Session session=getAdminSession();
  Node content=session.getRootNode().addNode("test");
  content.addNode("one").addNode("child").setProperty("prop","hello");
  content.addNode("two").addNode("child");
  session.save();
  String query="//*[not(child/@prop)]";
  QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  NodeIterator it=r.getNodes();
  assertTrue(it.hasNext());
  String path=it.nextNode().getPath();
  assertEquals("/test/two",path);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void join() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node a=root.addNode("a");
  a.addMixin("mix:referenceable");
  Node b=root.addNode("b");
  b.setProperty("join",a.getProperty("jcr:uuid").getString(),PropertyType.REFERENCE);
  session.save();
  assertEquals("/a",getNodeList(session,"select [a].* from [nt:unstructured] as [a] " + "inner join [nt:unstructured] as [b] " + "on [a].[jcr:uuid] = [b].[join] where issamenode([a], '/a')",Query.JCR_SQL2));
  assertEquals("/a",getNodeList(session,"select [a].* from [nt:unstructured] as [a] " + "inner join [nt:unstructured] as [b] " + "on [b].[join] = [a].[jcr:uuid] where issamenode([a], '/a')",Query.JCR_SQL2));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOak1128() throws RepositoryException {
  Session session=createAdminSession();
  Node p=session.getRootNode().addNode("etc");
  p.addNode("p1");
  Node r=p.addNode("p2").addNode("r","nt:unstructured");
  r.setProperty("nt:resourceType","test");
  session.save();
  Query q=session.getWorkspace().getQueryManager().createQuery("/jcr:root/etc//*[" + "(@jcr:primaryType = 'nt:file'  or @jcr:primaryType = 'nt:folder') " + "or @nt:resourceType = 'test']","xpath");
  QueryResult qr=q.execute();
  NodeIterator ni=qr.getNodes();
  Node n=ni.nextNode();
  assertEquals("/etc/p2/r",n.getPath());
  session.logout();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOak1171() throws RepositoryException {
  Session session=createAdminSession();
  Node p=session.getRootNode().addNode("etc");
  p.addNode("p1").setProperty("title","test");
  p.addNode("p2").setProperty("title",1);
  session.save();
  Query q=session.getWorkspace().getQueryManager().createQuery("//*[@title = 'test']","xpath");
  QueryResult qr=q.execute();
  NodeIterator ni=qr.getNodes();
  assertTrue(ni.hasNext());
  Node n=ni.nextNode();
  assertEquals("/etc/p1",n.getPath());
  assertFalse(ni.hasNext());
  session.logout();
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("deprecation") @Test public void nodeTypeConstraint() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node folder1=root.addNode("folder1","nt:folder");
  Node folder2=root.addNode("folder2","nt:folder");
  JcrUtils.putFile(folder1,"file","text/plain",new ByteArrayInputStream("foo bar".getBytes("UTF-8")));
  folder2.addNode("folder3","nt:folder");
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("//element(*, nt:folder)",Query.XPATH);
  Set<String> paths=new HashSet<String>();
  for (RowIterator it=q.execute().getRows(); it.hasNext(); ) {
    paths.add(it.nextRow().getPath());
  }
  assertEquals(new HashSet<String>(Arrays.asList("/folder1","/folder2","/folder2/folder3")),paths);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("deprecation") @Test public void xpathEscapeTest() throws RepositoryException {
  Session writer=createAdminSession();
  Session reader=createAdminSession();
  UserManager uMgr=((JackrabbitSession)writer).getUserManager();
  String uid="testUser";
  try {
    User user=uMgr.createUser("testUser","pw");
    writer.getNode(user.getPath()).addNode(".tokens","rep:Unstructured");
    writer.save();
    QueryManager qm=reader.getWorkspace().getQueryManager();
    Query q=qm.createQuery("/jcr:root//*[_x002e_tokens/@jcr:primaryType]",Query.XPATH);
    NodeIterator res=q.execute().getNodes();
    assertEquals(1,res.getSize());
  }
  finally {
    Authorizable a=uMgr.getAuthorizable(uid);
    if (a != null) {
      a.remove();
      writer.save();
    }
    if (reader != null) {
      reader.logout();
    }
    if (writer != null) {
      writer.logout();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-1215") public void anyChildNodeProperty() throws Exception {
  Session session=getAdminSession();
  Node content=session.getRootNode().addNode("test");
  content.addNode("one").addNode("child").setProperty("prop","hello");
  content.addNode("two").addNode("child").setProperty("prop","hi");
  session.save();
  String query="//*[*/@prop = 'hello']";
  QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  NodeIterator it=r.getNodes();
  assertTrue(it.hasNext());
  String path=it.nextNode().getPath();
  assertEquals("/test/one",path);
  assertFalse(it.hasNext());
  query="//*[*/*/@prop = 'hello']";
  r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  it=r.getNodes();
  assertTrue(it.hasNext());
  path=it.nextNode().getPath();
  assertEquals("/test",path);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("deprecation") @Test public void encodedPath() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("hello").addNode("world");
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q;
  q=qm.createQuery("/jcr:root/hel_x006c_o/*",Query.XPATH);
  assertEquals("/hello/world",getPaths(q));
  q=qm.createQuery("//hel_x006c_o",Query.XPATH);
  assertEquals("/hello",getPaths(q));
  q=qm.createQuery("//element(hel_x006c_o, nt:base)",Query.XPATH);
  assertEquals("/hello",getPaths(q));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void simple() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("id","1");
  hello.setProperty("text","hello_world");
  session.save();
  Node hello2=session.getRootNode().addNode("hello2");
  hello2.setProperty("id","2");
  hello2.setProperty("text","hello world");
  session.save();
  ValueFactory vf=session.getValueFactory();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select text from [nt:base] where id = $id",Query.JCR_SQL2);
  q.bindValue("id",vf.createValue("1"));
  QueryResult r=q.execute();
  RowIterator it=r.getRows();
  assertTrue(it.hasNext());
  Row row=it.nextRow();
  assertEquals("hello_world",row.getValue("text").getString());
  String[] columns=r.getColumnNames();
  assertEquals(1,columns.length);
  assertEquals("text",columns[0]);
  assertFalse(it.hasNext());
  r=q.execute();
  NodeIterator nodeIt=r.getNodes();
  assertTrue(nodeIt.hasNext());
  Node n=nodeIt.nextNode();
  assertEquals("hello_world",n.getProperty("text").getString());
  assertFalse(it.hasNext());
  q=qm.createQuery("select text from [nt:base] where text like 'hello\\_world' escape '\\'",Query.SQL);
  r=q.execute();
  columns=r.getColumnNames();
  assertEquals(3,columns.length);
  assertEquals("text",columns[0]);
  assertEquals("jcr:path",columns[1]);
  assertEquals("jcr:score",columns[2]);
  nodeIt=r.getNodes();
  assertTrue(nodeIt.hasNext());
  n=nodeIt.nextNode();
  assertEquals("hello_world",n.getProperty("text").getString());
  assertFalse(nodeIt.hasNext());
  q=qm.createQuery("//*[@id=1]",Query.XPATH);
  r=q.execute();
  assertEquals(newHashSet("jcr:path","jcr:score","jcr:primaryType"),newHashSet(r.getColumnNames()));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-1093
 */
@Test public void getValuesOnMvp() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("id","1");
  hello.setProperty("properties",new String[]{"p1","p2"});
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select properties from [nt:base] where id = 1",Query.JCR_SQL2);
  QueryResult r=q.execute();
  RowIterator it=r.getRows();
  assertTrue(it.hasNext());
  Row row=it.nextRow();
  assertEquals("p1 p2",row.getValues()[0].getString());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void limit() throws RepositoryException {
  Session session=getAdminSession();
  Node hello1=session.getRootNode().addNode("hello1");
  hello1.setProperty("id","1");
  hello1.setProperty("data","x");
  session.save();
  Node hello3=session.getRootNode().addNode("hello3");
  hello3.setProperty("id","3");
  hello3.setProperty("data","z");
  session.save();
  Node hello2=session.getRootNode().addNode("hello2");
  hello2.setProperty("id","2");
  hello2.setProperty("data","y");
  session.save();
  ValueFactory vf=session.getValueFactory();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select id from [nt:base] where data >= $data order by id",Query.JCR_SQL2);
  q.bindValue("data",vf.createValue("x"));
  for (int limit=0; limit < 5; limit++) {
    q.setLimit(limit);
    for (int offset=0; offset < 3; offset++) {
      q.setOffset(offset);
      QueryResult r=q.execute();
      RowIterator it=r.getRows();
      int l=Math.min(Math.max(0,3 - offset),limit);
      assertEquals(l,r.getRows().getSize());
      assertEquals(l,r.getNodes().getSize());
      Row row;
      for (int x=offset + 1, i=0; i < limit && x < 4; i++, x++) {
        assertTrue(it.hasNext());
        row=it.nextRow();
        assertEquals("" + x,row.getValue("id").getString());
      }
      assertFalse(it.hasNext());
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void doubleQuote() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("x",1);
  Node world=hello.addNode("world");
  world.setProperty("x",2);
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q;
  q=qm.createQuery("SELECT * FROM [nt:base] AS s WHERE ISDESCENDANTNODE(s,[/hello])",Query.JCR_SQL2);
  assertEquals("/hello/world",getPaths(q));
  q=qm.createQuery("SELECT * FROM [nt:base] AS s WHERE ISDESCENDANTNODE(s,\"/hello\")",Query.JCR_SQL2);
  assertEquals("/hello/world",getPaths(q));
  try {
    q=qm.createQuery("SELECT * FROM [nt:base] AS s WHERE ISDESCENDANTNODE(s,[\"/hello\"])",Query.JCR_SQL2);
    getPaths(q);
    fail();
  }
 catch (  InvalidQueryException e) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("deprecation") @Test public void fnNameEncoding() throws Exception {
  Session session=getAdminSession();
  session.getRootNode().addNode("123456_test_name");
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q;
  q=qm.createQuery("//*[jcr:like(fn:name(), '%123456%')]",Query.XPATH);
  assertEquals("/123456_test_name",getPaths(q));
  q=qm.createQuery("//*[fn:name() = '123456_test_name']",Query.XPATH);
  assertEquals("",getPaths(q));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOak1096() throws RepositoryException {
  Session writer=createAdminSession();
  Session reader=createAdminSession();
  try {
    Node rootNode=writer.getRootNode();
    Node node=rootNode.addNode("test","nt:unstructured");
    node.setProperty("text","find me");
    writer.save();
    QueryManager qm=reader.getWorkspace().getQueryManager();
    Query q=qm.createQuery("select * from 'nt:base' where contains(*, 'find me')",Query.JCR_SQL2);
    NodeIterator res=q.execute().getNodes();
    assertEquals("False amount of hits",1,res.getSize());
  }
  finally {
    if (reader != null) {
      reader.logout();
    }
    if (writer != null) {
      writer.logout();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("deprecation") @Test public void or() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("x",1);
  Node world=hello.addNode("world");
  world.setProperty("x",2);
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q;
  q=qm.createQuery("select a.[jcr:path] from [nt:base] as a " + "inner join [nt:base] as b " + "on ischildnode(a, b) "+ "where a.x = 1 or a.x = 2 or b.x = 3 or b.x = 4",Query.JCR_SQL2);
  assertEquals("/hello",getPaths(q));
  q=qm.createQuery("//hello[@x=1]/*[@x=2]",Query.XPATH);
  assertEquals("/hello/world",getPaths(q));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.qom.QomTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void and() throws RepositoryException {
  Constraint c0=f.propertyExistence("x","c0");
  Constraint c1=f.propertyExistence("x","c1");
  And and=f.and(c0,c1);
  assertEquals(and.getConstraint1(),c0);
  assertEquals(and.getConstraint2(),c1);
  assertEquals("([x].[c0] IS NOT NULL) AND ([x].[c1] IS NOT NULL)",and.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void not() throws RepositoryException {
  Constraint c=f.propertyExistence("x","c0");
  Not n=f.not(c);
  assertEquals(c,n.getConstraint());
  assertEquals("[x].[c0] IS NOT NULL",c.toString());
  assertEquals("* IS NOT NULL",f.propertyExistence(null,null).toString());
  assertEquals("[s].* IS NOT NULL",f.propertyExistence("s",null).toString());
  assertEquals("[p] IS NOT NULL",f.propertyExistence(null,"p").toString());
  assertEquals("[s].[p] IS NOT NULL",f.propertyExistence("s","p").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void propertyExistence() throws RepositoryException {
  PropertyExistence pe=f.propertyExistence("selectorName","propertyName");
  assertEquals("selectorName",pe.getSelectorName());
  assertEquals("propertyName",pe.getPropertyName());
  assertEquals("[selectorName].[propertyName] IS NOT NULL",pe.toString());
  assertEquals("* IS NOT NULL",f.propertyExistence(null,null).toString());
  assertEquals("[s].* IS NOT NULL",f.propertyExistence("s",null).toString());
  assertEquals("[p] IS NOT NULL",f.propertyExistence(null,"p").toString());
  assertEquals("[s].[p] IS NOT NULL",f.propertyExistence("s","p").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fullTextSearch() throws RepositoryException {
  Literal l=f.literal(vf.createValue(1));
  FullTextSearch x=f.fullTextSearch("selectorName","propertyName",l);
  assertEquals("selectorName",x.getSelectorName());
  assertEquals("propertyName",x.getPropertyName());
  assertEquals(l,x.getFullTextSearchExpression());
  assertEquals("CONTAINS([selectorName].[propertyName], 1)",x.toString());
  assertEquals("CONTAINS([p], null)",f.fullTextSearch(null,"p",null).toString());
  assertEquals("CONTAINS([s].[p], null)",f.fullTextSearch("s","p",null).toString());
  assertEquals("CONTAINS([s].*, null)",f.fullTextSearch("s",null,null).toString());
  assertEquals("CONTAINS(*, null)",f.fullTextSearch(null,null,null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void selector() throws RepositoryException {
  Selector s=f.selector("nodeTypeName","selectorName");
  assertEquals("nodeTypeName",s.getNodeTypeName());
  assertEquals("selectorName",s.getSelectorName());
  assertEquals("[nodeTypeName] AS [selectorName]",s.toString());
  assertEquals("[n]",f.selector("n",null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void descendantNode() throws RepositoryException {
  DescendantNode d=f.descendantNode("selectorName","path");
  assertEquals("selectorName",d.getSelectorName());
  assertEquals("path",d.getAncestorPath());
  assertEquals("ISDESCENDANTNODE([selectorName], [path])",d.toString());
  assertEquals("ISDESCENDANTNODE([p])",f.descendantNode(null,"p").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void descendantNodeJoinCondition() throws RepositoryException {
  DescendantNodeJoinCondition d=f.descendantNodeJoinCondition("descendantSelectorName","ancestorSelectorName");
  assertEquals("descendantSelectorName",d.getDescendantSelectorName());
  assertEquals("ancestorSelectorName",d.getAncestorSelectorName());
  assertEquals("ISDESCENDANTNODE([descendantSelectorName], [ancestorSelectorName])",d.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void comparison() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Literal l=f.literal(vf.createValue(1));
  Comparison c=f.comparison(p,QueryObjectModelConstants.JCR_OPERATOR_EQUAL_TO,l);
  assertEquals(p,c.getOperand1());
  assertEquals(QueryObjectModelConstants.JCR_OPERATOR_EQUAL_TO,c.getOperator());
  assertEquals(l,c.getOperand2());
  assertEquals("[selectorName].[propertyName] = 1",c.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void length() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Length l=f.length(p);
  assertEquals(p,l.getPropertyValue());
  assertEquals("LENGTH([selectorName].[propertyName])",l.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeName() throws RepositoryException {
  NodeName n=f.nodeName("selectorName");
  assertEquals("selectorName",n.getSelectorName());
  assertEquals("NAME([selectorName])",n.toString());
  assertEquals("NAME()",f.nodeName(null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void upperCase() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Length length=f.length(p);
  UpperCase u=f.upperCase(length);
  assertEquals(length,u.getOperand());
  assertEquals("UPPER(LENGTH([selectorName].[propertyName]))",u.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void childNodeJoinCondition() throws RepositoryException {
  ChildNodeJoinCondition c=f.childNodeJoinCondition("childSelectorName","parentSelectorName");
  assertEquals("childSelectorName",c.getChildSelectorName());
  assertEquals("parentSelectorName",c.getParentSelectorName());
  assertEquals("ISCHILDNODE([childSelectorName], [parentSelectorName])",c.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void or() throws RepositoryException {
  Constraint c0=f.propertyExistence("x","c0");
  Constraint c1=f.propertyExistence("x","c1");
  Or or=f.or(c0,c1);
  assertEquals(or.getConstraint1(),c0);
  assertEquals(or.getConstraint2(),c1);
  assertEquals("([x].[c0] IS NOT NULL) OR ([x].[c1] IS NOT NULL)",or.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void literal() throws RepositoryException {
  Value v=vf.createValue(1);
  Literal l=f.literal(v);
  assertEquals(v,l.getLiteralValue());
  assertEquals("1",l.toString());
  assertEquals("'Joe''s'",f.literal(vf.createValue("Joe's")).toString());
  assertEquals("' - \" - '",f.literal(vf.createValue(" - \" - ")).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void childNode() throws RepositoryException {
  ChildNode cn=f.childNode("selectorName","parentPath");
  assertEquals("selectorName",cn.getSelectorName());
  assertEquals("parentPath",cn.getParentPath());
  assertEquals("ISCHILDNODE([selectorName], [parentPath])",cn.toString());
  assertEquals("ISCHILDNODE([p])",f.childNode(null,"p").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void descending() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Ordering o=f.descending(p);
  assertEquals(p,o.getOperand());
  assertEquals(QueryObjectModelConstants.JCR_ORDER_DESCENDING,o.getOrder());
  assertEquals("[selectorName].[propertyName] DESC",o.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void join() throws RepositoryException {
  Source left=f.selector("nodeTypeName","selectorName");
  Source right=f.selector("nodeTypeName2","selectorName2");
  ChildNodeJoinCondition jc=f.childNodeJoinCondition("childSelectorName","parentSelectorName");
  Join j=f.join(left,right,QueryObjectModelConstants.JCR_JOIN_TYPE_INNER,jc);
  assertEquals(left,j.getLeft());
  assertEquals(right,j.getRight());
  assertEquals(QueryObjectModelConstants.JCR_JOIN_TYPE_INNER,j.getJoinType());
  assertEquals(jc,j.getJoinCondition());
  assertEquals("ISCHILDNODE([childSelectorName], [parentSelectorName])",jc.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeLocalName() throws RepositoryException {
  NodeLocalName n=f.nodeLocalName("selectorName");
  assertEquals("selectorName",n.getSelectorName());
  assertEquals("LOCALNAME([selectorName])",n.toString());
  assertEquals("LOCALNAME()",f.nodeLocalName(null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void bindVariable() throws RepositoryException {
  BindVariableValue b=f.bindVariable("bindVariableName");
  assertEquals("bindVariableName",b.getBindVariableName());
  assertEquals("$bindVariableName",b.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void sameNodeJoinCondition() throws RepositoryException {
  SameNodeJoinCondition s=f.sameNodeJoinCondition("selector1Name","selector2Name","selector2Path");
  assertEquals("selector1Name",s.getSelector1Name());
  assertEquals("selector2Name",s.getSelector2Name());
  assertEquals("selector2Path",s.getSelector2Path());
  assertEquals("ISSAMENODE([selector1Name], [selector2Name], [selector2Path])",s.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void createQuery() throws RepositoryException {
  Selector s=f.selector("nt:file","x");
  BindVariableValue b=f.bindVariable("var");
  Constraint c=f.propertyExistence("x","c");
  PropertyValue p=f.propertyValue("x","propertyName");
  c=f.and(f.comparison(p,QueryObjectModelConstants.JCR_OPERATOR_EQUAL_TO,b),c);
  Ordering o=f.ascending(p);
  Column col=f.column("x","propertyName","columnName");
  Ordering[] ords=new Ordering[]{o};
  Column[] cols=new Column[]{col};
  QueryObjectModel q=f.createQuery(s,c,ords,cols);
  assertEquals(Query.JCR_JQOM,q.getLanguage());
  String[] bv=q.getBindVariableNames();
  assertEquals(1,bv.length);
  assertEquals("var",bv[0]);
  assertEquals(s,q.getSource());
  assertEquals(c,q.getConstraint());
  assertEquals(o,q.getOrderings()[0]);
  assertEquals(col,q.getColumns()[0]);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void sameNode() throws RepositoryException {
  SameNode s=f.sameNode("selectorName","path");
  assertEquals("selectorName",s.getSelectorName());
  assertEquals("path",s.getPath());
  assertEquals("ISSAMENODE([selectorName], [path])",s.toString());
  assertEquals("ISSAMENODE([path])",f.sameNode(null,"path").toString());
  assertEquals("ISSAMENODE([s], [path])",f.sameNode("s","path").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void lowerCase() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Length length=f.length(p);
  LowerCase l=f.lowerCase(length);
  assertEquals(length,l.getOperand());
  assertEquals("LOWER(LENGTH([selectorName].[propertyName]))",l.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void equiJoinCondition() throws RepositoryException {
  EquiJoinCondition e=f.equiJoinCondition("selector1Name","property1Name","selector2Name","property2Name");
  assertEquals("selector1Name",e.getSelector1Name());
  assertEquals("property1Name",e.getProperty1Name());
  assertEquals("selector2Name",e.getSelector2Name());
  assertEquals("property2Name",e.getProperty2Name());
  assertEquals("[selector1Name].[property1Name] = [selector2Name].[property2Name]",e.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void column() throws RepositoryException {
  Column c=f.column("selectorName","propertyName","columnName");
  assertEquals("selectorName",c.getSelectorName());
  assertEquals("propertyName",c.getPropertyName());
  assertEquals("columnName",c.getColumnName());
  assertEquals("[selectorName].[propertyName] AS [columnName]",c.toString());
  assertEquals("[p]",f.column(null,"p",null).toString());
  assertEquals("[p] AS [c]",f.column(null,"p","c").toString());
  assertEquals("[s].[p]",f.column("s","p",null).toString());
  assertEquals("[s].[p] AS [c]",f.column("s","p","c").toString());
  assertEquals("[s].* AS [c]",f.column("s",null,"c").toString());
  assertEquals("* AS [c]",f.column(null,null,"c").toString());
  assertEquals("*",f.column(null,null,null).toString());
  assertEquals("[s].*",f.column("s",null,null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void ascending() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Ordering o=f.ascending(p);
  assertEquals(p,o.getOperand());
  assertEquals(QueryObjectModelConstants.JCR_ORDER_ASCENDING,o.getOrder());
  assertEquals("[selectorName].[propertyName]",p.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void escapedName() throws RepositoryException {
  assertEquals("[[n]]]",f.selector("[n]",null).toString());
  assertEquals("[[s]]].[[p]]]",f.propertyValue("[s]","[p]").toString());
  assertEquals("ISSAMENODE([[s1]]], [[s2]]], [[p]]])",f.sameNodeJoinCondition("[s1]","[s2]","[p]").toString());
  assertEquals("ISSAMENODE([[s]]], [[p]]])",f.sameNode("[s]","[p]").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fullTextSearchScore() throws RepositoryException {
  FullTextSearchScore x=f.fullTextSearchScore("selectorName");
  assertEquals("selectorName",x.getSelectorName());
  assertEquals("SCORE([selectorName])",x.toString());
  assertEquals("SCORE()",f.fullTextSearchScore(null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void propertyValue() throws RepositoryException {
  PropertyValue pv=f.propertyValue("selectorName","propertyName");
  assertEquals("selectorName",pv.getSelectorName());
  assertEquals("propertyName",pv.getPropertyName());
  assertEquals("[selectorName].[propertyName]",pv.toString());
  assertEquals("*",f.propertyValue(null,null).toString());
  assertEquals("[s].*",f.propertyValue("s",null).toString());
  assertEquals("[p]",f.propertyValue(null,"p").toString());
  assertEquals("[s].[p]",f.propertyValue("s","p").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void jcrNameConversion() throws RepositoryException {
  assertEquals("[nt:base]",f.column(null,NodeType.NT_BASE,null).toString());
  assertEquals("[s1].[nt:base] = [s2].[nt:base]",f.equiJoinCondition("s1",NodeType.NT_BASE,"s2",NodeType.NT_BASE).toString());
  assertEquals("CONTAINS([nt:base], null)",f.fullTextSearch(null,NodeType.NT_BASE,null).toString());
  assertEquals("CAST('nt:base' AS NAME)",f.literal(vf.createValue(NodeType.NT_BASE,PropertyType.NAME)).toString());
  assertEquals("[nt:base] IS NOT NULL",f.propertyExistence(null,NodeType.NT_BASE).toString());
  assertEquals("[nt:base]",f.propertyValue(null,NodeType.NT_BASE).toString());
  assertEquals("[nt:base]",f.selector(NodeType.NT_BASE,null).toString());
  Source source1=f.selector(NodeType.NT_BASE,"selector");
  Column[] columns=new Column[]{f.column("selector",null,null)};
  Constraint constraint2=f.childNode("selector","/");
  QueryObjectModel qom=f.createQuery(source1,constraint2,null,columns);
  assertEquals("select [selector].* from " + "[nt:base] AS [selector] " + "where ISCHILDNODE([selector], [/])",qom.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.AccessControlManagementTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadAccessControl() throws Exception {
  Privilege[] privileges=privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL);
  allow(path,privileges);
  assertTrue(testAcMgr.hasPrivileges(path,privileges));
  assertTrue(testSession.nodeExists(path + "/rep:policy"));
  testAcMgr.getPolicies(path);
  assertTrue(testAcMgr.hasPrivileges(childNPath,privileges));
  assertEquals(0,testAcMgr.getPolicies(childNPath).length);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadAccessControlWithRestriction() throws Exception {
  Privilege[] privileges=privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL);
  allow(path,privileges,createGlobRestriction('/' + nodeName2));
  assertFalse(testAcMgr.hasPrivileges(path,privileges));
  assertFalse(testSession.nodeExists(path + "/rep:policy"));
  try {
    testAcMgr.getPolicies(path);
    fail("AccessDeniedException expected");
  }
 catch (  AccessDeniedException e) {
  }
  assertTrue(testAcMgr.hasPrivileges(childNPath,privileges));
  assertEquals(0,testAcMgr.getPolicies(childNPath).length);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetModifiedPolicy() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{REP_WRITE,Privilege.JCR_READ_ACCESS_CONTROL,Privilege.JCR_MODIFY_ACCESS_CONTROL});
  JackrabbitAccessControlList acl=allow(path,privileges);
  AccessControlPolicy[] policies=testAcMgr.getPolicies(path);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlList policy=(AccessControlList)policies[0];
  if (policy.addAccessControlEntry(testUser.getPrincipal(),privilegesFromName(Privilege.JCR_LOCK_MANAGEMENT))) {
    testAcMgr.setPolicy(path,acl);
    testSession.save();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRetrievePrivilegesOnAcNodes() throws Exception {
  Privilege[] privileges=privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL);
  allow(path,privileges);
  assertTrue(testAcMgr.hasPrivileges(path,privileges));
  AccessControlPolicy[] policies=testAcMgr.getPolicies(path);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof JackrabbitAccessControlList);
  String aclNodePath=null;
  Node n=superuser.getNode(path);
  for (NodeIterator itr=n.getNodes(); itr.hasNext(); ) {
    Node child=itr.nextNode();
    if (child.isNodeType("rep:Policy")) {
      aclNodePath=child.getPath();
    }
  }
  if (aclNodePath == null) {
    fail("Expected node at " + path + " to have an ACL child node.");
  }
  assertTrue(testAcMgr.hasPrivileges(aclNodePath,privileges));
  assertTrue(testSession.hasPermission(aclNodePath,Session.ACTION_READ));
  for (NodeIterator aceNodes=superuser.getNode(aclNodePath).getNodes(); aceNodes.hasNext(); ) {
    String aceNodePath=aceNodes.nextNode().getPath();
    assertTrue(testAcMgr.hasPrivileges(aceNodePath,privileges));
    assertTrue(testSession.hasPermission(aceNodePath,Session.ACTION_READ));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.CopyTest </h4><pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2810">OAK-2810</a>
 */
@Test public void testCopyToProtectedParentDestination() throws Exception {
  allow(targetPath,privilegesFromName(Privilege.JCR_ALL));
  Node destParent=null;
  NodeIterator nodeIterator=superuser.getNode(targetPath).getNode(AccessControlConstants.REP_POLICY).getNodes();
  while (nodeIterator.hasNext()) {
    Node n=nodeIterator.nextNode();
    if (n.getDefinition().isProtected()) {
      destParent=n;
      break;
    }
  }
  if (destParent == null) {
    throw new NotExecutableException("No protected parent found");
  }
  try {
    superuser.getWorkspace().copy(childNPath,destParent.getPath() + "/copy");
    fail("Copy must fail with constraint-violation if the destination parent is a protected node.");
  }
 catch (  ConstraintViolationException e) {
    assertEquals("Node " + destParent.getPath() + " is protected.",e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ImportBesteffortTest </h4><pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUnknownPrincipal() throws Exception {
  runImport();
  AccessControlManager acMgr=adminSession.getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(target.getPath());
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof JackrabbitAccessControlList);
  AccessControlEntry[] entries=((JackrabbitAccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,entries.length);
  AccessControlEntry entry=entries[0];
  assertEquals("unknownprincipal",entry.getPrincipal().getName());
  assertEquals(1,entry.getPrivileges().length);
  assertEquals(acMgr.privilegeFromName(Privilege.JCR_WRITE),entry.getPrivileges()[0]);
  if (entry instanceof JackrabbitAccessControlEntry) {
    assertTrue(((JackrabbitAccessControlEntry)entry).isAllow());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ImportIgnoreTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testImportUnknownPrincipal() throws Exception {
  try {
    runImport();
    AccessControlManager acMgr=adminSession.getAccessControlManager();
    AccessControlPolicy[] policies=acMgr.getPolicies(target.getPath());
    assertEquals(1,policies.length);
    assertEquals(0,((AccessControlList)policies[0]).getAccessControlEntries().length);
  }
  finally {
    adminSession.refresh(false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.JackrabbitAccessControlListTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-1026">OAK-1026</a>
 */
@Test public void testEntryWithAggregatePrivileges() throws Exception {
  Privilege write=acMgr.privilegeFromName(Privilege.JCR_WRITE);
  acl.addEntry(testPrincipal,write.getAggregatePrivileges(),true);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(1,entries.length);
  assertArrayEquals(new Privilege[]{write},entries[0].getPrivileges());
  acMgr.setPolicy(acl.getPath(),acl);
  AccessControlPolicy policy=AccessControlUtils.getAccessControlList(acMgr,acl.getPath());
  assertNotNull(policy);
  entries=acl.getAccessControlEntries();
  assertEquals(1,entries.length);
  assertArrayEquals(new Privilege[]{write},entries[0].getPrivileges());
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSize() throws RepositoryException {
  if (acl.addAccessControlEntry(testPrincipal,testPrivileges)) {
    assertTrue(acl.size() > 0);
  }
 else {
    assertEquals(0,acl.size());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testApplicablePolicyIsEmpty(){
  assertTrue(acl.isEmpty());
  assertEquals(0,acl.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveEntry() throws NotExecutableException, RepositoryException {
  Principal princ=getValidPrincipal();
  Privilege[] grPriv=privilegesFromName("rep:write");
  acl.addEntry(princ,grPriv,true,Collections.<String,Value>emptyMap());
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  int length=entries.length;
  assertTrue("Grant was both successful -> at least 1 entry.",length > 0);
  for (  AccessControlEntry entry : entries) {
    acl.removeAccessControlEntry(entry);
    length=length - 1;
    assertEquals(length,acl.size());
    assertEquals(length,acl.getAccessControlEntries().length);
  }
  assertTrue(acl.isEmpty());
  assertEquals(0,acl.size());
  assertEquals(0,acl.getAccessControlEntries().length);
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddEntry() throws NotExecutableException, RepositoryException {
  List<AccessControlEntry> entriesBefore=Arrays.asList(acl.getAccessControlEntries());
  if (acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap())) {
    AccessControlEntry[] entries=acl.getAccessControlEntries();
    AccessControlEntry ace=null;
    for (    AccessControlEntry entry : entries) {
      if (testPrincipal.equals(entry.getPrincipal())) {
        ace=entry;
      }
    }
    assertNotNull("addEntry was successful -> expected entry for tesPrincipal.",ace);
    assertTrue("addEntry was successful -> at least 1 entry.",entries.length > 0);
  }
 else {
    AccessControlEntry[] entries=acl.getAccessControlEntries();
    assertEquals("Grant ALL not successful -> entries must not have changed.",entriesBefore,Arrays.asList(entries));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadPropertyTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadProperty() throws Exception {
  deny(path,privilegesFromName(PrivilegeConstants.JCR_READ));
  allow(path,privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES));
  assertFalse(testSession.nodeExists(path));
  assertFalse(testSession.itemExists(path));
  assertFalse(testSession.nodeExists(childNPath));
  List<String> propertyPaths=new ArrayList<String>();
  propertyPaths.add(childPPath);
  propertyPaths.add(childchildPPath);
  propertyPaths.add(path + "/jcr:primaryType");
  for (  String pPath : propertyPaths) {
    assertTrue(testSession.itemExists(pPath));
    assertTrue(testSession.propertyExists(pPath));
    Property p=testSession.getProperty(pPath);
    assertEquals(pPath,p.getPath());
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPath() throws Exception {
  deny(path,privilegesFromName(PrivilegeConstants.JCR_READ));
  allow(path,privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES));
  List<String> propertyPaths=new ArrayList<String>();
  propertyPaths.add(childPPath);
  propertyPaths.add(childchildPPath);
  propertyPaths.add(path + "/jcr:primaryType");
  for (  String pPath : propertyPaths) {
    Property p=testSession.getProperty(pPath);
    assertEquals(pPath,p.getPath());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChildNodes() throws Exception {
  Node n=superuser.getNode(path);
  for (int i=0; i < 5; i++) {
    n=n.addNode(nodeName4,testNodeType);
  }
  superuser.save();
  testSession.refresh(false);
  String childPath=n.getPath();
  assertArrayEquals(readPrivileges,testAcMgr.getPrivileges(childPath));
  testSession.checkPermission(childPath,Session.ACTION_READ);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.VersionManagementTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionablePath() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  VersionHistory vh=n.getVersionHistory();
  Property versionablePath=vh.getProperty(superuser.getWorkspace().getName());
  assertEquals(n.getPath(),versionablePath.getString());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionableChildNode2() throws Exception {
  Node testNode=superuser.getNode(path).addNode("n1").addNode("n2").addNode("n3").addNode("jcr:content");
  testNode.addMixin("mix:versionable");
  superuser.save();
  testNode.remove();
  testNode=superuser.getNode(path).getNode("n1").getNode("n2").getNode("n3").addNode("jcr:content");
  testNode.addMixin("mix:versionable");
  superuser.save();
  assertTrue(testNode.isNodeType("mix:versionable"));
  VersionHistory vh=testNode.getVersionHistory();
  Property versionablePath=vh.getProperty(superuser.getWorkspace().getName());
  assertEquals(testNode.getPath(),versionablePath.getString());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionableChildNode() throws Exception {
  Node testNode=superuser.getNode(path).addNode("n1").addNode("n2").addNode("n3").addNode("jcr:content");
  superuser.save();
  testNode.addMixin("mix:versionable");
  superuser.save();
  assertTrue(testNode.isNodeType("mix:versionable"));
  VersionHistory vh=testNode.getVersionHistory();
  Property versionablePath=vh.getProperty(superuser.getWorkspace().getName());
  assertEquals(testNode.getPath(),versionablePath.getString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.principal.PrincipalManagerTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrincipalGetName(){
  for (  Principal pcpl : adminPrincipals) {
    Principal pp=principalMgr.getPrincipal(pcpl.getName());
    assertEquals("PrincipalManager.getPrincipal returned Principal with different Name",pcpl.getName(),pp.getName());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindPrincipalByTypeAll(){
  for (  Principal pcpl : adminPrincipals) {
    if (pcpl.equals(everyone)) {
      continue;
    }
    assertTrue(principalMgr.hasPrincipal(pcpl.getName()));
    PrincipalIterator it=principalMgr.findPrincipals(pcpl.getName(),PrincipalManager.SEARCH_TYPE_ALL);
    PrincipalIterator it2=principalMgr.findPrincipals(pcpl.getName());
    assertTrue("Principal " + pcpl.getName() + " not found",it.hasNext());
    assertTrue("Principal " + pcpl.getName() + " not found",it2.hasNext());
    assertTrue(it.getSize() == it2.getSize());
    Set<Principal> s1=new HashSet<Principal>();
    Set<Principal> s2=new HashSet<Principal>();
    while (it.hasNext() && it2.hasNext()) {
      s1.add(it.nextPrincipal());
      s2.add(it2.nextPrincipal());
    }
    assertEquals(s1,s2);
    assertFalse(it.hasNext() && it2.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAllPrincipals(){
  PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_ALL);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    assertTrue(principalMgr.hasPrincipal(p.getName()));
    assertEquals(principalMgr.getPrincipal(p.getName()),p);
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrincipal(){
  Principal p=principalMgr.getPrincipal(everyone.getName());
  assertEquals(everyone,p);
  for (  Principal pcpl : adminPrincipals) {
    Principal pp=principalMgr.getPrincipal(pcpl.getName());
    assertEquals("PrincipalManager.getPrincipal returned Principal with different Name",pcpl.getName(),pp.getName());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetEveryoneByName(){
  assertTrue(principalMgr.hasPrincipal(EveryonePrincipal.NAME));
  assertNotNull(principalMgr.getPrincipal(EveryonePrincipal.NAME));
  assertEquals(EveryonePrincipal.getInstance(),principalMgr.getPrincipal(EveryonePrincipal.NAME));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.privilege.PrivilegeManagerTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegeFromName() throws AccessControlException, RepositoryException {
  Privilege p=privilegeManager.getPrivilege(Privilege.JCR_VERSION_MANAGEMENT);
  assertTrue(p != null);
  assertEquals(PrivilegeConstants.JCR_VERSION_MANAGEMENT,p.getName());
  assertFalse(p.isAggregate());
  p=privilegeManager.getPrivilege(Privilege.JCR_WRITE);
  assertTrue(p != null);
  assertEquals(PrivilegeConstants.JCR_WRITE,p.getName());
  assertTrue(p.isAggregate());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.privilege.PrivilegeRegistrationTest </h4><pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testCustomPrivilegeVisibleAfterRefresh() throws RepositoryException {
  Session s2=getAdminSession();
  PrivilegeManager pm=getPrivilegeManager(s2);
  try {
    boolean isAbstract=false;
    String privName="testCustomPrivilegeVisibleAfterRefresh";
    privilegeManager.registerPrivilege(privName,isAbstract,new String[0]);
    try {
      Privilege priv=pm.getPrivilege(privName);
      fail("Custom privilege will show up after Session#refresh()");
    }
 catch (    AccessControlException e) {
    }
    s2.refresh(true);
    Privilege priv=pm.getPrivilege(privName);
    assertEquals(privName,priv.getName());
    assertEquals(isAbstract,priv.isAbstract());
    assertFalse(priv.isAggregate());
  }
  finally {
    s2.logout();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterPrivilegeAggregatingJcrAll() throws Exception {
  privilegeManager.registerPrivilege("customPriv",false,null);
  try {
    privilegeManager.registerPrivilege("customPriv2",false,new String[]{"customPriv",Privilege.JCR_ALL});
    fail("Aggregation containing jcr:all is invalid.");
  }
 catch (  RepositoryException e) {
    Throwable cause=e.getCause();
    assertTrue(cause instanceof CommitFailedException);
    assertEquals(53,((CommitFailedException)cause).getCode());
  }
 finally {
    superuser.refresh(false);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterCustomPrivileges() throws RepositoryException {
  Workspace workspace=session.getWorkspace();
  workspace.getNamespaceRegistry().registerNamespace("test","http://www.apache.org/jackrabbit/test");
  Map<String,String[]> newCustomPrivs=new HashMap<String,String[]>();
  newCustomPrivs.put("new",new String[0]);
  newCustomPrivs.put("test:new",new String[0]);
  for (  String name : newCustomPrivs.keySet()) {
    boolean isAbstract=true;
    String[] aggrNames=newCustomPrivs.get(name);
    Privilege registered=privilegeManager.registerPrivilege(name,isAbstract,aggrNames);
    Privilege privilege=privilegeManager.getPrivilege(name);
    assertNotNull(privilege);
    assertEquals(name,privilege.getName());
    assertTrue(privilege.isAbstract());
    assertEquals(0,privilege.getDeclaredAggregatePrivileges().length);
    assertContainsDeclared(privilegeManager.getPrivilege(PrivilegeConstants.JCR_ALL),name);
  }
  Map<String,String[]> newAggregates=new HashMap<String,String[]>();
  newAggregates.put("newA2",getAggregateNames("test:new","new"));
  newAggregates.put("newA1",getAggregateNames("new",PrivilegeConstants.JCR_READ));
  newAggregates.put("aggrBuiltIn",getAggregateNames(PrivilegeConstants.JCR_MODIFY_PROPERTIES,PrivilegeConstants.JCR_READ));
  for (  String name : newAggregates.keySet()) {
    boolean isAbstract=false;
    String[] aggrNames=newAggregates.get(name);
    privilegeManager.registerPrivilege(name,isAbstract,aggrNames);
    Privilege p=privilegeManager.getPrivilege(name);
    assertNotNull(p);
    assertEquals(name,p.getName());
    assertFalse(p.isAbstract());
    for (    String n : aggrNames) {
      assertContainsDeclared(p,n);
    }
    assertContainsDeclared(privilegeManager.getPrivilege(PrivilegeConstants.JCR_ALL),name);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testCustomPrivilegeVisibleToNewSession() throws RepositoryException {
  boolean isAbstract=false;
  String privName="testCustomPrivilegeVisibleToNewSession";
  privilegeManager.registerPrivilege(privName,isAbstract,new String[0]);
  Session s2=getAdminSession();
  try {
    PrivilegeManager pm=getPrivilegeManager(s2);
    Privilege priv=pm.getPrivilege(privName);
    assertEquals(privName,priv.getName());
    assertEquals(isAbstract,priv.isAbstract());
    assertFalse(priv.isAggregate());
  }
  finally {
    s2.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.AuthorizablePropertyTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetMultiValueProperty() throws NotExecutableException, RepositoryException {
  String propName="Fullname";
  Value[] v=new Value[]{superuser.getValueFactory().createValue("Super User")};
  try {
    user.setProperty(propName,v);
    superuser.save();
  }
 catch (  RepositoryException e) {
    throw new NotExecutableException("Cannot test 'Authorizable.setProperty'.");
  }
  try {
    boolean found=false;
    for (Iterator<String> it=user.getPropertyNames(); it.hasNext() && !found; ) {
      found=propName.equals(it.next());
    }
    assertTrue(found);
    found=false;
    for (Iterator<String> it=user.getPropertyNames("."); it.hasNext() && !found; ) {
      found=propName.equals(it.next());
    }
    assertTrue(found);
    assertTrue(user.hasProperty(propName));
    assertTrue(user.hasProperty("./" + propName));
    assertEquals(Arrays.asList(v),Arrays.asList(user.getProperty(propName)));
    assertEquals(Arrays.asList(v),Arrays.asList(user.getProperty("./" + propName)));
    assertTrue(user.removeProperty(propName));
    assertFalse(user.hasProperty(propName));
    superuser.save();
  }
  finally {
    user.removeProperty(propName);
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMembersPropertyType() throws NotExecutableException, RepositoryException {
  Node n=getNode(group,superuser);
  if (!n.hasProperty(UserConstants.REP_MEMBERS)) {
    group.addMember(user);
  }
  Property p=n.getProperty(UserConstants.REP_MEMBERS);
  for (  Value v : p.getValues()) {
    assertEquals(PropertyType.WEAKREFERENCE,v.getType());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetProperty() throws NotExecutableException, RepositoryException {
  String propName="Fullname";
  Value v=superuser.getValueFactory().createValue("Super User");
  try {
    user.setProperty(propName,v);
    superuser.save();
  }
 catch (  RepositoryException e) {
    throw new NotExecutableException("Cannot test 'Authorizable.setProperty'.");
  }
  try {
    boolean found=false;
    for (Iterator<String> it=user.getPropertyNames(); it.hasNext() && !found; ) {
      found=propName.equals(it.next());
    }
    assertTrue(found);
    found=false;
    for (Iterator<String> it=user.getPropertyNames("."); it.hasNext() && !found; ) {
      found=propName.equals(it.next());
    }
    assertTrue(found);
    assertTrue(user.hasProperty(propName));
    assertTrue(user.hasProperty("./" + propName));
    assertTrue(user.getProperty(propName).length == 1);
    assertEquals(v,user.getProperty(propName)[0]);
    assertEquals(v,user.getProperty("./" + propName)[0]);
    assertTrue(user.removeProperty(propName));
    assertFalse(user.hasProperty(propName));
    superuser.save();
  }
  finally {
    user.removeProperty(propName);
    superuser.save();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.AuthorizableTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testObjectMethods() throws Exception {
  final Authorizable user=getTestUser(superuser);
  Authorizable user2=getTestUser(superuser);
  assertEquals(user,user2);
  assertEquals(user.hashCode(),user2.hashCode());
  Set<Authorizable> s=new HashSet<Authorizable>();
  s.add(user);
  assertFalse(s.add(user2));
  Authorizable user3=new Authorizable(){
    public String getID() throws RepositoryException {
      return user.getID();
    }
    public boolean isGroup(){
      return user.isGroup();
    }
    public Principal getPrincipal() throws RepositoryException {
      return user.getPrincipal();
    }
    public Iterator<Group> declaredMemberOf() throws RepositoryException {
      return user.declaredMemberOf();
    }
    public Iterator<Group> memberOf() throws RepositoryException {
      return user.memberOf();
    }
    public void remove() throws RepositoryException {
      user.remove();
    }
    public Iterator<String> getPropertyNames() throws RepositoryException {
      return user.getPropertyNames();
    }
    public Iterator<String> getPropertyNames(    String relPath) throws RepositoryException {
      return user.getPropertyNames(relPath);
    }
    public boolean hasProperty(    String name) throws RepositoryException {
      return user.hasProperty(name);
    }
    public void setProperty(    String name,    Value value) throws RepositoryException {
      user.setProperty(name,value);
    }
    public void setProperty(    String name,    Value[] values) throws RepositoryException {
      user.setProperty(name,values);
    }
    public Value[] getProperty(    String name) throws RepositoryException {
      return user.getProperty(name);
    }
    public boolean removeProperty(    String name) throws RepositoryException {
      return user.removeProperty(name);
    }
    public String getPath() throws RepositoryException {
      return user.getPath();
    }
  }
;
  assertFalse(user.equals(user3));
  assertTrue(s.add(user3));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.CreateGroupTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroup() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  Group gr=createGroup(p);
  createdGroups.add(gr);
  assertNotNull(gr.getID());
  assertEquals(p.getName(),gr.getPrincipal().getName());
  assertFalse("A new group must not have members.",gr.getMembers().hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.CreateUserTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserWithDifferentPrincipalName() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  String uid=getTestPrincipal().getName();
  User user=createUser(uid,"pw",p,"any/path");
  createdUsers.add(user);
  assertNotNull(user.getID());
  assertEquals(p.getName(),user.getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUser() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  String uid=p.getName();
  User user=createUser(uid,"pw");
  createdUsers.add(user);
  assertNotNull(user.getID());
  assertEquals(p.getName(),user.getPrincipal().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.EveryoneGroupTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEveryoneGroup() throws RepositoryException, NotExecutableException {
  assertEquals(EveryonePrincipal.NAME,everyone.getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrincipal() throws RepositoryException {
  assertEquals(EveryonePrincipal.getInstance(),everyone.getPrincipal());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.FindAuthorizablesTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindGroupByPrinicpalName() throws RepositoryException, NotExecutableException {
  Group gr=null;
  try {
    Principal p=getTestPrincipal();
    gr=userMgr.createGroup(p);
    superuser.save();
    boolean found=false;
    Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,p.getName(),UserManager.SEARCH_TYPE_GROUP);
    assertTrue(it.hasNext());
    Group ng=(Group)it.next();
    assertEquals("Searching for principal-name must find the created group.",p.getName(),ng.getPrincipal().getName());
    assertFalse("Only a single group must be found for a given principal name.",it.hasNext());
  }
  finally {
    if (gr != null) {
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable() throws RepositoryException, NotExecutableException {
  Set<Principal> principals=new HashSet<Principal>();
  PrincipalManager pMgr=((JackrabbitSession)superuser).getPrincipalManager();
  Principal p=pMgr.getPrincipal(superuser.getUserID());
  if (p != null) {
    principals.add(p);
    PrincipalIterator principalIterator=pMgr.getGroupMembership(p);
    while (principalIterator.hasNext()) {
      principals.add(principalIterator.nextPrincipal());
    }
  }
  Authorizable auth;
  for (  Principal principal : principals) {
    auth=userMgr.getAuthorizable(principal);
    if (auth != null) {
      if (!auth.isGroup() && auth.hasProperty(UserConstants.REP_PRINCIPAL_NAME)) {
        String val=auth.getProperty(UserConstants.REP_PRINCIPAL_NAME)[0].getString();
        Iterator<Authorizable> users=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,val);
        assertTrue(users.hasNext());
        Authorizable first=users.next();
        assertEquals(first.getID(),val);
        assertFalse(users.hasNext());
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizableByRelativePath() throws NotExecutableException, RepositoryException {
  Principal p=getTestPrincipal();
  Authorizable auth=null;
  try {
    auth=userMgr.createGroup(p);
    Value[] vs=new Value[]{superuser.getValueFactory().createValue("v1"),superuser.getValueFactory().createValue("v2")};
    String relPath="relPath/" + propertyName1;
    String relPath2="another/" + propertyName1;
    String relPath3="relPath/relPath/" + propertyName1;
    auth.setProperty(relPath,vs);
    auth.setProperty(relPath2,vs);
    auth.setProperty(relPath3,superuser.getValueFactory().createValue("v3"));
    superuser.save();
    Iterator<Authorizable> result=userMgr.findAuthorizables(propertyName1,"v1");
    assertTrue("expected result",result.hasNext());
    assertEquals(auth.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
    result=userMgr.findAuthorizables(propertyName1,"v3");
    assertTrue("expected result",result.hasNext());
    assertEquals(auth.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
    result=userMgr.findAuthorizables(relPath,"v1");
    assertTrue("expected result",result.hasNext());
    assertEquals(auth.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
    result=userMgr.findAuthorizables("./" + propertyName1,"v1");
    assertFalse("expected result",result.hasNext());
  }
  finally {
    if (auth != null) {
      auth.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupImportBestEffortTest </h4><pre class="type-12 type-5 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportNonExistingMemberBestEffort() throws Exception {
  List<String> invalid=new ArrayList<String>();
  invalid.add(UUID.randomUUID().toString());
  invalid.add(getExistingUUID());
  Session s=getImportSession();
  for (  String id : invalid) {
    String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "<sv:node sv:name=\"g1\"><sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>" + id + "</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>";
    try {
      doImport(getTargetPath(),xml);
      Authorizable a=getUserManager().getAuthorizable("g1");
      if (a.isGroup()) {
        boolean found=false;
        Node grNode=s.getNode(a.getPath());
        for (        Value memberValue : grNode.getProperty(UserConstants.REP_MEMBERS).getValues()) {
          assertEquals(PropertyType.WEAKREFERENCE,memberValue.getType());
          if (id.equals(memberValue.getString())) {
            found=true;
            break;
          }
        }
        assertTrue("ImportBehavior.BESTEFFORT must import non-existing members.",found);
        assertNotDeclaredMember((Group)a,id,s);
      }
 else {
        fail("'g1' was not imported as Group.");
      }
    }
  finally {
      s.refresh(false);
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportNonExistingMemberBestEffort2() throws Exception {
  String g1Id="0120a4f9-196a-3f9e-b9f5-23f31f914da7";
  String nonExistingId="b2f5ff47-4366-31b6-a533-d8dc3614845d";
  if (getUserManager().getAuthorizable("g") != null) {
    throw new NotExecutableException();
  }
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "<sv:node sv:name=\"g1\"><sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>" + g1Id + "</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>"+ nonExistingId+ "</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable g1=getUserManager().getAuthorizable("g1");
  if (g1.isGroup()) {
    boolean found=false;
    Node grNode=getImportSession().getNode(g1.getPath());
    for (    Value memberValue : grNode.getProperty(UserConstants.REP_MEMBERS).getValues()) {
      assertEquals(PropertyType.WEAKREFERENCE,memberValue.getType());
      if (nonExistingId.equals(memberValue.getString())) {
        found=true;
        break;
      }
    }
    assertTrue("ImportBehavior.BESTEFFORT must import non-existing members.",found);
  }
 else {
    fail("'g1' was not imported as Group.");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupImportTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportGroupWithAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(newGroup.isGroup());
  assertEquals("g",newGroup.getID());
  assertTrue(s.propertyExists(newGroup.getPath() + "/rep:authorizableId"));
  assertEquals("g",s.getProperty(newGroup.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportGroup() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  Session s=getImportSession();
  assertTrue(s.hasPendingChanges());
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(newGroup.isGroup());
  assertEquals("g",newGroup.getPrincipal().getName());
  assertEquals("g",newGroup.getID());
  Node n=s.getNode(newGroup.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("g",n.getName());
  assertEquals("g",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  s.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupImportWithPoliciesTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportGroupWithPolicies() throws Exception {
  Node target=getTargetNode();
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(newGroup.isGroup());
  assertEquals("g",newGroup.getPrincipal().getName());
  assertEquals("g",newGroup.getID());
  Node n=getImportSession().getNode(newGroup.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("g",n.getName());
  assertEquals("g",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  AccessControlList acl=AccessControlUtils.getAccessControlList(getImportSession(),newGroup.getPath());
  assertNotNull(acl);
  AccessControlEntry[] aces=acl.getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("administrators",aces[0].getPrincipal().getName());
  assertEquals(PrivilegeConstants.JCR_READ,aces[0].getPrivileges()[0].getName());
  getImportSession().save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupTest </h4><pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPath() throws RepositoryException, NotExecutableException {
  assertNotNull(group.getPath());
  assertNotNull(userMgr.getAuthorizable(group.getID()).getPath());
  try {
    assertEquals(getNode(group,superuser).getPath(),group.getPath());
  }
 catch (  UnsupportedRepositoryOperationException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.RemappingTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuery() throws Exception {
  Iterator<Authorizable> result=getUserManager(session).findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.eq("@my:property",vf.createValue("value")));
    }
  }
);
  assertTrue(result.hasNext());
  assertEquals(user.getID(),result.next().getID());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable2() throws Exception {
  for (  String relPath : unmappedPaths) {
    user.setProperty(relPath,nameValue);
  }
  superuser.save();
  session.refresh(false);
  Map<String,String> m=ImmutableMap.of("my:property","my:value","my:node/my:property2","my:value");
  for (  String relPath : m.keySet()) {
    String value=m.get(relPath);
    Iterator<Authorizable> result=getUserManager(session).findAuthorizables(relPath,value);
    assertTrue(result.hasNext());
    assertEquals(user.getID(),result.next().getID());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyNames2() throws Exception {
  Iterator it=authorizable.getPropertyNames("my:node");
  assertTrue(it.hasNext());
  assertEquals("my:property2",it.next());
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable3() throws Exception {
  for (  String relPath : unmappedPaths) {
    user.setProperty(relPath,nameValue);
  }
  superuser.save();
  session.refresh(false);
  Map<String,String> m=ImmutableMap.of("my:property","my:value","my:node/my:property2","my:value");
  for (  String relPath : m.keySet()) {
    String value=m.get(relPath);
    Iterator<Authorizable> result=getUserManager(session).findAuthorizables(relPath,value,UserManager.SEARCH_TYPE_USER);
    assertTrue(result.hasNext());
    assertEquals(user.getID(),result.next().getID());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyNames() throws Exception {
  Iterator it=authorizable.getPropertyNames();
  assertTrue(it.hasNext());
  assertEquals("my:property",it.next());
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProperty() throws Exception {
  for (  String relPath : unmappedPaths) {
    user.setProperty(relPath,nameValue);
    user.setProperty(relPath,new Value[]{nameValue});
  }
  superuser.save();
  session.refresh(false);
  for (  String relPath : mappedPaths) {
    Value[] values=authorizable.getProperty(relPath);
    assertNotNull(values);
    assertEquals(1,values.length);
    if (PropertyType.STRING == values[0].getType()) {
      assertEquals("value",values[0].getString());
    }
 else {
      assertEquals("my:value",values[0].getString());
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable() throws Exception {
  user.setProperty("prop",superuser.getValueFactory().createValue(true));
  superuser.save();
  session.refresh(false);
  Map<String,String> m=ImmutableMap.of("prop","true","my:property","value","my:node/my:property2","value");
  for (  String relPath : m.keySet()) {
    String value=m.get(relPath);
    Iterator<Authorizable> result=getUserManager(session).findAuthorizables(relPath,value);
    assertTrue(result.hasNext());
    assertEquals(user.getID(),result.next().getID());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.SystemUserImportTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUser() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  assertTrue(target.isModified());
  assertTrue(s.hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertTrue(((User)newUser).isSystemUser());
  assertEquals("t",newUser.getPrincipal().getName());
  assertEquals("t",newUser.getID());
  assertTrue(((User)newUser).isDisabled());
  assertEquals("disabledUser",((User)newUser).getDisabledReason());
  Node n=s.getNode(newUser.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("t",n.getName());
  assertEquals("t",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  assertEquals("disabledUser",n.getProperty(UserConstants.REP_DISABLED).getString());
  assertFalse(n.hasProperty(UserConstants.REP_PASSWORD));
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Same as {@link #testImportUserWithIdDifferentFromNodeName} but with
 * different order of properties.
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName2() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  Session s=getImportSession();
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUuidMismatch() throws Exception {
  String mismatchUUID="a358efa4-89f5-3062-b10d-d7316b65649e";
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>" + mismatchUUID + "</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property></sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  assertTrue(target.hasNode("t"));
  Node n=target.getNode("t");
  assertEquals(mismatchUUID,n.getUUID());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNull(newUser);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportWithIntermediatePath() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"some\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d5433be9-68d0-4fba-bf96-efc29f461993</sv:value></sv:property>"+ "<sv:node sv:name=\"intermediate\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d87354a4-037e-4756-a8fb-deb2eb7c5149</sv:value></sv:property>"+ "<sv:node sv:name=\"path\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>24263272-b789-4568-957a-3bcaf99dbab3</sv:value></sv:property>"+ "<sv:node sv:name=\"t3\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0b8854ad-38f0-36c6-9807-928d28195609</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}4358694eeb098c6708ae914a10562ce722bbbc34</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t3</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t3");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t3",newUser.getPrincipal().getName());
  assertEquals("t3",newUser.getID());
  Node n=getImportSession().getNode(newUser.getPath());
  assertTrue(n.isNew());
  Node parent=n.getParent();
  assertFalse(n.isSame(target));
  assertTrue(parent.isNodeType(UserConstants.NT_REP_AUTHORIZABLE_FOLDER));
  assertFalse(parent.getDefinition().isProtected());
  assertTrue(target.hasNode("some"));
  assertTrue(target.hasNode("some/intermediate/path"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.SystemUserTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisable() throws Exception {
  user=createUser(uid);
  user.disable("gone");
  superuser.save();
  assertTrue(user.isDisabled());
  assertEquals("gone",user.getDisabledReason());
  user.disable(null);
  assertFalse(user.isDisabled());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportFromJackrabbit </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testImportCreatesAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals(uid,newUser.getID());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplaceFromRenamed2() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",movedPath,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0022"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplaceFromRenamed3() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String originalPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  String expectedPath=Text.getRelativeParent(originalPath,1) + '/' + randomNodeName;
  assertEquals("user path",expectedPath,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0021"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplaceFromRenamed() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",Text.getRelativeParent(initialPath,1) + '/' + uid,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,newUser.getID());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemoveFromRenamed() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",getTargetPath() + '/' + uid,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,newUser.getID());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemoveFromRenamed3() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String originalPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  String expectedPath=getTargetPath() + '/' + randomNodeName;
  assertEquals("user path",expectedPath,newUser.getPath());
  assertFalse((Text.getRelativeParent(originalPath,1) + '/' + randomNodeName).equals(newUser.getPath()));
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0021"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemove() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals(getTargetPath(),Text.getRelativeParent(newUser.getPath(),1));
  assertFalse(initialPath.equals(newUser.getPath()));
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemoveFromRenamed2() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",getTargetPath() + '/' + randomNodeName,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0021"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplace() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl("t"),getTargetPath() + "/foo/bar/test");
  String initialPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals(initialPath,newUser.getPath());
  assertFalse(getTargetPath().equals(Text.getRelativeParent(newUser.getPath(),1)));
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  importSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportHistoryTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.3.3
 */
@Test public void testImportUserWithPwdHistory() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"y\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>41529076-9594-360e-ae48-5922904f345d</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>yPrincipal</sv:value>"+ "   </sv:property>"+ "   <sv:node sv:name=\"" + UserConstants.REP_PWD + "\">"+ "      <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "         <sv:value>"+ UserConstants.NT_REP_PASSWORD+ "</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\""+ UserConstants.REP_PWD_HISTORY+ "\" sv:type=\"String\" sv:multiple=\"true\">"+ "         <sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value>"+ "      </sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable("y");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PWD_HISTORY));
  assertEquals("{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375",pwdNode.getProperty(UserConstants.REP_PWD_HISTORY).getString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportPwExpiryTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.1
 */
@Test public void testImportUserWithPwdProperties() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"y\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>41529076-9594-360e-ae48-5922904f345d</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>yPrincipal</sv:value>"+ "   </sv:property>"+ "   <sv:node sv:name=\"" + UserConstants.REP_PWD + "\">"+ "      <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "         <sv:value>"+ UserConstants.NT_REP_PASSWORD+ "</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\""+ UserConstants.REP_PASSWORD_LAST_MODIFIED+ "\" sv:type=\"Long\">"+ "         <sv:value>1404036716000</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\"customProp\" sv:type=\"String\">"+ "         <sv:value>abc</sv:value>"+ "      </sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable("y");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED));
  assertEquals(1404036716000L,pwdNode.getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getLong());
  assertTrue(pwdNode.hasProperty("customProp"));
  Property custom=pwdNode.getProperty("customProp");
  assertTrue(custom.getDefinition().isProtected());
  assertEquals("abc",custom.getString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUser() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getPrincipal().getName());
  assertEquals("t",newUser.getID());
  assertTrue(((User)newUser).isDisabled());
  assertEquals("disabledUser",((User)newUser).getDisabledReason());
  Node n=getImportSession().getNode(newUser.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("t",n.getName());
  assertEquals("t",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  assertEquals("{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375",n.getProperty(UserConstants.REP_PASSWORD).getString());
  assertEquals("disabledUser",n.getProperty(UserConstants.REP_DISABLED).getString());
  getImportSession().save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  Session s=getImportSession();
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Same as {@link #testImportUserWithIdDifferentFromNodeName} but with
 * different order of properties.
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName2() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  Session s=getImportSession();
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportAuthorizableId() throws Exception {
  String mismatchUUID="a358efa4-89f5-3062-b10d-d7316b65649e";
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>" + mismatchUUID + "</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property></sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  assertTrue(target.hasNode("t"));
  Node n=target.getNode("t");
  assertEquals(mismatchUUID,n.getUUID());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNull(newUser);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportWithIntermediatePath() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"some\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d5433be9-68d0-4fba-bf96-efc29f461993</sv:value></sv:property>"+ "<sv:node sv:name=\"intermediate\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d87354a4-037e-4756-a8fb-deb2eb7c5149</sv:value></sv:property>"+ "<sv:node sv:name=\"path\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>24263272-b789-4568-957a-3bcaf99dbab3</sv:value></sv:property>"+ "<sv:node sv:name=\"t3\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0b8854ad-38f0-36c6-9807-928d28195609</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}4358694eeb098c6708ae914a10562ce722bbbc34</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t3</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  assertTrue(target.isModified());
  assertTrue(s.hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t3");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t3",newUser.getPrincipal().getName());
  assertEquals("t3",newUser.getID());
  Node n=s.getNode(newUser.getPath());
  assertTrue(n.isNew());
  Node parent=n.getParent();
  assertFalse(n.isSame(target));
  assertTrue(parent.isNodeType(UserConstants.NT_REP_AUTHORIZABLE_FOLDER));
  assertFalse(parent.getDefinition().isProtected());
  assertTrue(target.hasNode("some"));
  assertTrue(target.hasNode("some/intermediate/path"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportWithActionsTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForSystemUser() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.USER_PRIVILEGE_NAMES,new String[]{Privilege.JCR_ALL}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>tSystemPrincipal</sv:value></sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("t");
  assertNotNull(a);
  assertFalse(a.isGroup());
  assertTrue(((User)a).isSystemUser());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForUser2() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.USER_PRIVILEGE_NAMES,new String[]{Privilege.JCR_ALL}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>tPrincipal</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("t");
  assertNotNull(a);
  assertFalse(a.isGroup());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] aces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("tPrincipal",aces[0].getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testActionExecutionForUser() throws Exception {
  TestAction testAction=new TestAction();
  setAuthorizableActions(testAction);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>pw</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>tPrincipal</sv:value></sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  assertEquals(testAction.id,"t");
  assertEquals(testAction.pw,"pw");
}

</code></pre>

<br>
<pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testActionExecutionForGroup() throws Exception {
  TestAction testAction=new TestAction();
  setAuthorizableActions(testAction);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>gPrincipal</sv:value></sv:property>"+ "</sv:node>";
  doImport(GROUPPATH,xml);
  assertEquals(testAction.id,"g");
  assertNull(testAction.pw);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForUser() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.USER_PRIVILEGE_NAMES,new String[]{Privilege.JCR_ALL}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>tPrincipal</sv:value></sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("t");
  assertNotNull(a);
  assertFalse(a.isGroup());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] aces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("tPrincipal",aces[0].getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForGroup() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.GROUP_PRIVILEGE_NAMES,new String[]{Privilege.JCR_READ}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>gPrincipal</sv:value></sv:property>"+ "</sv:node>";
  doImport(GROUPPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("g");
  assertNotNull(a);
  assertTrue(a.isGroup());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] aces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("gPrincipal",aces[0].getPrincipal().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserManagerTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthorizableByPath() throws RepositoryException, NotExecutableException {
  String uid=superuser.getUserID();
  Authorizable a=userMgr.getAuthorizable(uid);
  if (a == null) {
    throw new NotExecutableException();
  }
  try {
    String path=a.getPath();
    Authorizable a2=userMgr.getAuthorizableByPath(path);
    assertNotNull(a2);
    assertEquals(a.getID(),a2.getID());
  }
 catch (  UnsupportedRepositoryOperationException e) {
    throw new NotExecutableException();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthorizable() throws RepositoryException, NotExecutableException {
  String uid=createUserId();
  User user=null;
  try {
    user=userMgr.createUser(uid,uid);
    superuser.save();
    assertEquals(uid,user.getID());
    assertNotNull(userMgr.getAuthorizable(uid));
    assertEquals(user,userMgr.getAuthorizable(uid));
    assertNotNull(getNode(user,superuser));
  }
  finally {
    if (user != null) {
      user.remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCreateGroupWithId() throws RepositoryException, NotExecutableException {
  Group gr=null;
  try {
    String id=createGroupId();
    gr=userMgr.createGroup(id);
    superuser.save();
    assertEquals("Expect group with exact ID",id,gr.getID());
  }
  finally {
    if (gr != null) {
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCreateUserPrincipalNameEqualsUserID() throws RepositoryException, NotExecutableException {
  User u=null;
  try {
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw");
    superuser.save();
    String msg="User.getID() must return the userID pass to createUser.";
    assertEquals(msg,uid,u.getID());
    msg="Principal name must be the same as userID.";
    assertEquals(msg,uid,u.getPrincipal().getName());
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCreateGroupWithIdAndPrincipal() throws RepositoryException, NotExecutableException {
  Group gr=null;
  try {
    Principal p=getTestPrincipal();
    String uid=p.getName();
    gr=userMgr.createGroup(uid,p,null);
    superuser.save();
    assertEquals("Expect group with exact ID",uid,gr.getID());
    assertEquals("Expected group with exact principal name",p.getName(),gr.getPrincipal().getName());
  }
  finally {
    if (gr != null) {
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserIdDifferentFromPrincipalName() throws RepositoryException, NotExecutableException {
  User u=null;
  Session uSession=null;
  try {
    Principal p=getTestPrincipal();
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    String msg="Creating a User with principal-name distinct from Principal-name must succeed as long as both are unique.";
    assertEquals(msg,u.getID(),uid);
    assertEquals(msg,p.getName(),u.getPrincipal().getName());
    assertFalse(msg,u.getID().equals(u.getPrincipal().getName()));
    uSession=superuser.getRepository().login(new SimpleCredentials(uid,"pw".toCharArray()));
    assertEquals(uid,uSession.getUserID());
  }
  finally {
    if (uSession != null) {
      uSession.logout();
    }
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserIDFromSession() throws RepositoryException, NotExecutableException {
  User u=null;
  Session uSession=null;
  try {
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw");
    superuser.save();
    uSession=superuser.getRepository().login(new SimpleCredentials(uid,"pw".toCharArray()));
    assertEquals(u.getID(),uSession.getUserID());
  }
  finally {
    if (uSession != null) {
      uSession.logout();
    }
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNewAuthorizable() throws RepositoryException, NotExecutableException {
  String uid=createUserId();
  User user=null;
  try {
    user=userMgr.createUser(uid,uid);
    assertEquals(uid,user.getID());
    assertNotNull(userMgr.getAuthorizable(uid));
    assertEquals(user,userMgr.getAuthorizable(uid));
    assertNotNull(getNode(user,superuser));
  }
  finally {
    if (user != null) {
      user.remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroupIdDifferentFromPrincipalName() throws RepositoryException, NotExecutableException {
  Group g=null;
  try {
    Principal p=getTestPrincipal();
    g=userMgr.createGroup("testGroup",p,null);
    superuser.save();
    String msg="Creating a Group with principal-name distinct from Principal-name must succeed as long as both are unique.";
    assertEquals(msg,g.getID(),"testGroup");
    assertEquals(msg,p.getName(),g.getPrincipal().getName());
    assertFalse(msg,g.getID().equals(g.getPrincipal().getName()));
  }
  finally {
    if (g != null) {
      g.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserQueryTest </h4><pre class="type-5 type-7 type-6 type-19 type-4 type-8 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetBound() throws RepositoryException {
  List<User> sortedUsers=new ArrayList<User>(users);
  sortedUsers.removeAll(systemDefined);
  Comparator<? super User> comp=new Comparator<User>(){
    public int compare(    User user1,    User user2){
      try {
        Value[] weight1=user1.getProperty("profile/weight");
        assertNotNull(weight1);
        assertEquals(1,weight1.length);
        Value[] weight2=user2.getProperty("profile/weight");
        assertNotNull(weight2);
        assertEquals(1,weight2.length);
        return weight1[0].getDouble() < weight2[0].getDouble() ? -1 : 1;
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
        return 0;
      }
    }
  }
;
  Collections.sort(sortedUsers,comp);
  long[] counts={4,0,100000};
  for (  final long count : counts) {
    Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
      public <T>void build(      QueryBuilder<T> builder){
        builder.setCondition(builder.eq("profile/@cute",vf.createValue(true)));
        builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING,false);
        builder.setLimit(vf.createValue(1000.0),count);
      }
    }
);
    Iterator<User> expected=Iterators.filter(sortedUsers.iterator(),new Predicate<User>(){
      public boolean apply(      User user){
        try {
          Value[] cute=user.getProperty("profile/cute");
          Value[] weight=user.getProperty("profile/weight");
          return cute != null && cute.length == 1 && cute[0].getBoolean() && weight != null && weight.length == 1 && weight[0].getDouble() > 1000.0;
        }
 catch (        RepositoryException e) {
          fail(e.getMessage());
        }
        return false;
      }
    }
);
    assertSame(expected,result,count);
    assertFalse(result.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortOrderRespectCaseAscendingDoubleValue() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("profile/@weight"));
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING,false);
    }
  }
);
  assertTrue(result.hasNext());
  double prev=Double.MIN_VALUE;
  while (result.hasNext()) {
    Authorizable authorizable=result.next();
    Value[] weight=authorizable.getProperty("profile/weight");
    assertNotNull(weight);
    assertEquals(1,weight.length);
    assertTrue(prev <= weight[0].getDouble());
    prev=weight[0].getDouble();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2266">OAK-2266</a>
 */
@Test public void testSortOrderIgnoreCaseAscending() throws Exception {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@continent"));
      builder.setSortOrder("@continent",QueryBuilder.Direction.ASCENDING,true);
    }
  }
);
  Iterator<String> continents=ImmutableList.of("africa","america","australia").iterator();
  String expected=continents.next();
  while (result.hasNext()) {
    Authorizable a=result.next();
    String continent=a.getProperty("continent")[0].getString().toLowerCase();
    if (!continent.equals(expected)) {
      expected=continents.next();
      assertEquals(expected,continent);
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * The name matching condition must not only search for node-name and
 * principal name but also needs to take the new rep:authoriableId into
 * account that has been introduced as of Oak 1.0
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2243">OAK-2243</a>
 */
@Test public void testNameMatch2() throws RepositoryException {
  User user=userMgr.createUser("moloch",null,new PrincipalImpl("MolochHorridus"),"reptiles");
  String userPath=user.getPath();
  superuser.move(userPath,Text.getRelativeParent(userPath,1) + "/thorny_dragon");
  superuser.save();
  authorizables.add(user);
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.nameMatches("moloch"));
    }
  }
);
  assertTrue(result.hasNext());
  Authorizable a=result.next();
  assertEquals("moloch",a.getID());
  assertFalse(result.hasNext());
  result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.nameMatches("MolochHorridus"));
    }
  }
);
  assertTrue(result.hasNext());
  a=result.next();
  assertEquals("MolochHorridus",a.getPrincipal().getName());
  assertFalse(result.hasNext());
  result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.nameMatches("thorny_dragon"));
    }
  }
);
  assertTrue(result.hasNext());
  a=result.next();
  assertEquals("thorny_dragon",Text.getName(a.getPath()));
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2266">OAK-2266</a>
 */
@Test() public void testSortOrderRespectCaseAscending() throws Exception {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@continent"));
      builder.setSortOrder("@continent",QueryBuilder.Direction.ASCENDING,false);
    }
  }
);
  Iterator<String> continents=ImmutableList.of("Africa","America","africa","australia").iterator();
  String expected=continents.next();
  while (result.hasNext()) {
    Authorizable a=result.next();
    String continent=a.getProperty("continent")[0].getString();
    if (!continent.equals(expected)) {
      expected=continents.next();
      assertEquals(expected,continent);
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortOrderIgnoreCaseDescending() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@color"));
      builder.setSortOrder("@color",QueryBuilder.Direction.DESCENDING,true);
    }
  }
);
  assertTrue(result.hasNext());
  String prev=null;
  while (result.hasNext()) {
    Authorizable authorizable=result.next();
    Value[] color=authorizable.getProperty("color");
    assertNotNull(color);
    assertEquals(1,color.length);
    assertTrue(prev == null || prev.compareToIgnoreCase(color[0].getString()) >= 0);
    prev=color[0].getString();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortOrderRespectCaseDescending() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@color"));
      builder.setSortOrder("@color",QueryBuilder.Direction.DESCENDING,false);
    }
  }
);
  assertTrue(result.hasNext());
  String prev=null;
  while (result.hasNext()) {
    Authorizable authorizable=result.next();
    Value[] color=authorizable.getProperty("color");
    assertNotNull(color);
    assertEquals(1,color.length);
    assertTrue(prev == null || prev.compareTo(color[0].getString()) >= 0);
    prev=color[0].getString();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisable() throws Exception {
  String reason="readonly user is disabled!";
  user.disable(reason);
  superuser.save();
  assertTrue(user.isDisabled());
  assertEquals(reason,user.getDisabledReason());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessPrincipalOfDisabledUser() throws Exception {
  user.disable("readonly user is disabled!");
  superuser.save();
  Principal principal=user.getPrincipal();
  assertTrue(((JackrabbitSession)superuser).getPrincipalManager().hasPrincipal(principal.getName()));
  assertEquals(principal,((JackrabbitSession)superuser).getPrincipalManager().getPrincipal(principal.getName()));
}

</code></pre>

<br>
<pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPath() throws RepositoryException, NotExecutableException {
  assertNotNull(user.getPath());
  assertNotNull(userMgr.getAuthorizable(user.getID()).getPath());
  try {
    assertEquals(getNode(user,superuser).getPath(),user.getPath());
  }
 catch (  UnsupportedRepositoryOperationException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.json.JsopDiffTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPropertyChanges(){
  JsopDiff diff;
  PropertyState before=StringPropertyState.stringProperty("foo","bar");
  diff=new JsopDiff();
  diff.propertyAdded(before);
  assertEquals("^\"/foo\":\"bar\"",diff.toString());
  diff=new JsopDiff();
  diff.propertyChanged(before,LongPropertyState.createLongProperty("foo",123L));
  assertEquals("^\"/foo\":123",diff.toString());
  diff=new JsopDiff();
  diff.propertyChanged(before,DoublePropertyState.doubleProperty("foo",1.23));
  assertEquals("^\"/foo\":1.23",diff.toString());
  diff=new JsopDiff();
  diff.propertyChanged(before,BooleanPropertyState.booleanProperty("foo",true));
  assertEquals("^\"/foo\":true",diff.toString());
  diff=new JsopDiff();
  diff.propertyDeleted(before);
  assertEquals("^\"/foo\":null",diff.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNodeChanges(){
  JsopDiff diff;
  NodeState before=EMPTY_NODE;
  NodeBuilder builder=before.builder();
  builder.setProperty("a",1L);
  builder.child("x");
  NodeState after=builder.getNodeState();
  diff=new JsopDiff();
  diff.childNodeAdded("test",before);
  assertEquals("+\"/test\":{}",diff.toString());
  diff=new JsopDiff();
  diff.childNodeChanged("test",before,after);
  assertEquals("^\"/test/a\":1+\"/test/x\":{}",diff.toString());
  diff=new JsopDiff();
  diff.childNodeDeleted("test",after);
  assertEquals("-\"/test\"",diff.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.json.TypeCodesTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSplit(){
  assertEquals(3,TypeCodes.split("str:foo"));
  assertEquals(3,TypeCodes.split("str:"));
  assertEquals(-1,TypeCodes.split("foo"));
  assertEquals(-1,TypeCodes.split(""));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDecodeName(){
  String strFoo="str:foo";
  assertEquals("foo",TypeCodes.decodeName(TypeCodes.split(strFoo),strFoo));
  String str="str:";
  assertEquals("",TypeCodes.decodeName(TypeCodes.split(str),str));
  String any="any";
  assertEquals("any",TypeCodes.decodeName(TypeCodes.split(any),any));
  String empty="";
  assertEquals("",TypeCodes.decodeName(TypeCodes.split(empty),empty));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDecodeType(){
  String strFoo="str:foo";
  assertEquals(PropertyType.STRING,TypeCodes.decodeType(TypeCodes.split(strFoo),strFoo));
  String str="str:";
  assertEquals(PropertyType.STRING,TypeCodes.decodeType(TypeCodes.split(str),str));
  String any="any";
  assertEquals(PropertyType.UNDEFINED,TypeCodes.decodeType(TypeCodes.split(any),any));
  String empty="";
  assertEquals(PropertyType.UNDEFINED,TypeCodes.decodeType(TypeCodes.split(empty),empty));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEncode(){
  assertEquals("str:foo",TypeCodes.encode(PropertyType.STRING,"foo"));
  assertEquals(":blobId:",TypeCodes.encode(PropertyType.BINARY,""));
  assertEquals("und:foo",TypeCodes.encode(PropertyType.UNDEFINED,"foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.management.ManagementOperationTest </h4><pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void running() throws InterruptedException {
  final LinkedBlockingDeque<Thread> thread=new LinkedBlockingDeque<Thread>(1);
  ManagementOperation<Void> op=newManagementOperation("test",new Callable<Void>(){
    @Override public Void call() throws Exception {
      thread.add(currentThread());
      sleep(100000);
      return null;
    }
  }
);
  executor.execute(op);
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(RUNNING,status.getCode());
  thread.poll(5,SECONDS).interrupt();
  try {
    op.get();
    fail("Expected InterruptedException");
  }
 catch (  ExecutionException e) {
    assertTrue(e.getCause() instanceof InterruptedException);
  }
  assertTrue(op.isDone());
  status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(FAILED,status.getCode());
  assertTrue(status.getMessage().contains("test failed: "));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void succeeded() throws InterruptedException, ExecutionException, TimeoutException {
  ManagementOperation<Long> op=newManagementOperation("test",new Callable<Long>(){
    @Override public Long call() throws Exception {
      return 42L;
    }
  }
);
  executor.execute(op);
  assertEquals(42L,(long)op.get(5,SECONDS));
  assertTrue(op.isDone());
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(SUCCEEDED,status.getCode());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalStateException.class) public void notStarted() throws ExecutionException, InterruptedException {
  ManagementOperation<Integer> op=ManagementOperation.done("test",42);
  assertTrue(op.isDone());
  assertEquals(42,(int)op.get());
  sameThreadExecutor().execute(op);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void failed() throws InterruptedException, TimeoutException {
  final Exception failure=new Exception("fail");
  ManagementOperation<Void> op=newManagementOperation("test",new Callable<Void>(){
    @Override public Void call() throws Exception {
      throw failure;
    }
  }
);
  executor.execute(op);
  try {
    assertEquals(null,op.get(5,SECONDS));
    fail("Expected " + failure);
  }
 catch (  ExecutionException e) {
    assertEquals(failure,e.getCause());
  }
  assertTrue(op.isDone());
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(FAILED,status.getCode());
  assertEquals("test failed: " + failure.getMessage(),status.getMessage());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cancelled(){
  ManagementOperation<Void> op=newManagementOperation("test",new Callable<Void>(){
    @Override public Void call() throws Exception {
      return null;
    }
  }
);
  op.cancel(false);
  executor.execute(op);
  assertTrue(op.isDone());
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(FAILED,status.getCode());
  assertEquals("test cancelled",status.getMessage());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.namepath.GlobalNameMapperTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleNames() throws RepositoryException {
  List<String> simpleNames=new ArrayList<String>();
  simpleNames.add("foo");
  simpleNames.add(" foo ");
  simpleNames.add("foo.bar");
  simpleNames.add(".");
  simpleNames.add("..");
  simpleNames.add("/");
  simpleNames.add(" ");
  for (  String name : simpleNames) {
    assertEquals(name,mapper.getOakNameOrNull(name));
    assertEquals(name,mapper.getOakName(name));
    assertEquals(name,mapper.getJcrName(name));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyName() throws RepositoryException {
  assertEquals("",mapper.getJcrName(""));
  assertEquals("",mapper.getOakNameOrNull(""));
  assertEquals("",mapper.getOakName(""));
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExpandedNames() throws RepositoryException {
  Map<String,String> jcrToOak=new HashMap<String,String>();
  jcrToOak.put("{}foo","foo");
  jcrToOak.put("{foo","{foo");
  jcrToOak.put("{foo}","{foo}");
  jcrToOak.put("{0} foo","{0} foo");
  jcrToOak.put("{","{");
  jcrToOak.put("{http://www.jcp.org/jcr/nt/1.0}base","nt:base");
  jcrToOak.put("{http://www.example.com/foo}bar","foo:bar");
  jcrToOak.put("{http://www.example.com/quu}bar","quu:bar");
  for (  String jcrName : jcrToOak.keySet()) {
    assertEquals(jcrToOak.get(jcrName),mapper.getOakNameOrNull(jcrName));
    assertEquals(jcrToOak.get(jcrName),mapper.getOakName(jcrName));
  }
  assertNull(mapper.getOakNameOrNull("{http://www.example.com/bar}bar"));
  try {
    mapper.getOakName("{http://www.example.com/bar}bar");
    fail("RepositoryException expected");
  }
 catch (  RepositoryException e) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrefixedNames() throws RepositoryException {
  List<String> prefixed=new ArrayList<String>();
  prefixed.add("nt:base");
  prefixed.add("foo: bar");
  prefixed.add("quu:bar ");
  prefixed.add("unknown:bar");
  for (  String name : prefixed) {
    assertEquals(name,mapper.getOakNameOrNull(name));
    assertEquals(name,mapper.getOakName(name));
    assertEquals(name,mapper.getJcrName(name));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.namepath.NamePathMapperImplTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBracketsInNodeName() throws Exception {
  String[] childNames={"{A}","B}","{C","(D)","E)","(F"};
  for (  String name : childNames) {
    assertEquals(name,npMapper.getOakName(name));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyName() throws RepositoryException {
  assertEquals("",npMapper.getJcrName(""));
  assertEquals("",npMapper.getOakNameOrNull(""));
  assertEquals("",npMapper.getOakName(""));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJcrToOakKeepIndexNoRemap(){
  NameMapper mapper=new GlobalNameMapper(GLOBAL);
  NamePathMapper npMapper=new NamePathMapperImpl(mapper);
  assertEquals("/",npMapper.getOakPath("/"));
  assertEquals("/foo:bar",npMapper.getOakPath("/foo:bar"));
  assertEquals("/foo:bar/quu:qux",npMapper.getOakPath("/foo:bar/quu:qux"));
  assertEquals("foo:bar",npMapper.getOakPath("foo:bar"));
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOakToJcr(){
  assertEquals("/foo:bar",npMapper.getJcrPath("/oak-foo:bar"));
  assertEquals("/foo:bar/quu:qux",npMapper.getJcrPath("/oak-foo:bar/oak-quu:qux"));
  assertEquals("foo:bar",npMapper.getJcrPath("oak-foo:bar"));
  assertEquals(".",npMapper.getJcrPath(""));
  try {
    npMapper.getJcrPath("{http://www.jcp.org/jcr/nt/1.0}unstructured");
    fail("expanded name should not be accepted");
  }
 catch (  IllegalArgumentException expected) {
  }
  try {
    npMapper.getJcrPath("foobar/{http://www.jcp.org/jcr/1.0}content");
    fail("expanded name should not be accepted");
  }
 catch (  IllegalArgumentException expected) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJcrToOak(){
  assertEquals("/",npMapper.getOakPath("/"));
  assertEquals("foo",npMapper.getOakPath("{}foo"));
  assertEquals("/oak-foo:bar",npMapper.getOakPath("/foo:bar"));
  assertEquals("/oak-foo:bar/oak-quu:qux",npMapper.getOakPath("/foo:bar/quu:qux"));
  assertEquals("oak-foo:bar",npMapper.getOakPath("foo:bar"));
  assertEquals("oak-nt:unstructured",npMapper.getOakPath("{http://www.jcp.org/jcr/nt/1.0}unstructured"));
  assertEquals("foobar/oak-jcr:content",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content"));
  assertEquals("foobar",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/.."));
  assertEquals("",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/../.."));
  assertEquals("..",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/../../.."));
  assertEquals("../..",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/../../../.."));
  assertEquals("oak-jcr:content",npMapper.getOakPath("foobar/../{http://www.jcp.org/jcr/1.0}content"));
  assertEquals("../oak-jcr:content",npMapper.getOakPath("foobar/../../{http://www.jcp.org/jcr/1.0}content"));
  assertEquals("..",npMapper.getOakPath(".."));
  assertEquals("",npMapper.getOakPath("."));
  assertEquals("foobar/oak-jcr:content",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/."));
  assertEquals("foobar/oak-jcr:content",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/./."));
  assertEquals("foobar/oak-jcr:content",npMapper.getOakPath("foobar/./{http://www.jcp.org/jcr/1.0}content"));
  assertEquals("oak-jcr:content",npMapper.getOakPath("foobar/./../{http://www.jcp.org/jcr/1.0}content"));
  assertEquals("/a/b/c",npMapper.getOakPath("/a/b[1]/c[01]"));
  assertEquals("/a/b[2]/c[3]",npMapper.getOakPath("/a[1]/b[2]/c[03]"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWhitespace(){
  String[] paths=new String[]{" leading","trailing\n"," ","\t","oak: leading","oak:trailing\n","oak: ","oak:\t"};
  NamePathMapper noLocal=new NamePathMapperImpl(new LocalNameMapper(GLOBAL,Collections.<String,String>emptyMap()));
  for (  String path : paths) {
    assertEquals("without local mappings",path,noLocal.getOakPath(path));
    assertEquals("with local mappings",path,npMapper.getOakPath(path));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTrailingSlash(){
  assertEquals("/oak-foo:bar/oak-quu:qux",npMapper.getOakPath("/foo:bar/quu:qux/"));
  assertEquals("/a/b/c",npMapper.getOakPath("/a/b/c/"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.osgi.OSGiIT </h4><pre class="type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void bundleStates(){
  assumeTrue(!buildBotTrunkLinux());
  for (  Bundle bundle : context.getBundles()) {
    assertEquals(String.format("Bundle %s not active. have a look at the logs",bundle.toString()),Bundle.ACTIVE,bundle.getState());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.osgi.ObserverTrackerTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void registerUnregister(){
  tracker.addingService(ref1);
  assertEquals(ImmutableSet.of(observer1),observers);
  tracker.addingService(ref2);
  assertEquals(ImmutableSet.of(observer1,observer2),observers);
  tracker.removedService(ref1,null);
  assertEquals(ImmutableSet.of(observer2),observers);
  tracker.removedService(ref2,null);
  assertTrue(observers.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void unregisterTwice(){
  tracker.addingService(ref1);
  assertEquals(ImmutableSet.of(observer1),observers);
  tracker.removedService(ref1,null);
  assertTrue(observers.isEmpty());
  tracker.removedService(ref1,null);
  assertTrue(observers.isEmpty());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void registerTwice(){
  tracker.addingService(ref1);
  assertEquals(ImmutableSet.of(observer1),observers);
  tracker.addingService(ref1);
  assertEquals(ImmutableSet.of(observer1),observers);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.osgi.OsgiUtilTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFallbackLookupWithValueInFramework(){
  Dictionary dictionary=mock(Dictionary.class);
  doReturn(null).when(dictionary).get("cname");
  BundleContext bundleContext=mock(BundleContext.class);
  doReturn("value").when(bundleContext).getProperty("fname");
  ComponentContext componentContext=mock(ComponentContext.class);
  doReturn(dictionary).when(componentContext).getProperties();
  doReturn(bundleContext).when(componentContext).getBundleContext();
  assertEquals("value",lookupConfigurationThenFramework(componentContext,"cname","fname"));
  assertEquals("value",lookupFrameworkThenConfiguration(componentContext,"cname","fname"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComponentLookupWithStringValue(){
  Dictionary properties=mock(Dictionary.class);
  doReturn("  value   ").when(properties).get("name");
  ComponentContext context=mock(ComponentContext.class);
  doReturn(properties).when(context).getProperties();
  assertEquals("value",lookup(context,"name"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFallbackLookupWithValueInComponent(){
  Dictionary dictionary=mock(Dictionary.class);
  doReturn("value").when(dictionary).get("cname");
  BundleContext bundleContext=mock(BundleContext.class);
  doReturn(null).when(bundleContext).getProperty("fname");
  ComponentContext componentContext=mock(ComponentContext.class);
  doReturn(dictionary).when(componentContext).getProperties();
  doReturn(bundleContext).when(componentContext).getBundleContext();
  assertEquals("value",lookupConfigurationThenFramework(componentContext,"cname","fname"));
  assertEquals("value",lookupFrameworkThenConfiguration(componentContext,"cname","fname"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFrameworkLookupWith(){
  BundleContext context=mock(BundleContext.class);
  doReturn("  value   ").when(context).getProperty("name");
  assertEquals("value",lookup(context,"name"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFallbackLookupWithValueInComponentAndFramework(){
  Dictionary dictionary=mock(Dictionary.class);
  doReturn("cvalue").when(dictionary).get("cname");
  BundleContext bundleContext=mock(BundleContext.class);
  doReturn("fvalue").when(bundleContext).getProperty("fname");
  ComponentContext componentContext=mock(ComponentContext.class);
  doReturn(dictionary).when(componentContext).getProperties();
  doReturn(bundleContext).when(componentContext).getBundleContext();
  assertEquals("cvalue",lookupConfigurationThenFramework(componentContext,"cname","fname"));
  assertEquals("fvalue",lookupFrameworkThenConfiguration(componentContext,"cname","fname"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComponentLookupWithNonStringValue(){
  Dictionary properties=mock(Dictionary.class);
  doReturn(42).when(properties).get("name");
  ComponentContext context=mock(ComponentContext.class);
  doReturn(properties).when(context).getProperties();
  assertEquals("42",lookup(context,"name"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.atomic.AtomicCounterEditorTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noHookInWhiteboard() throws CommitFailedException, InterruptedException, ExecutionException {
  NodeStore store=new MemoryNodeStore();
  MyExecutor exec1=new MyExecutor();
  Whiteboard board=new DefaultWhiteboard();
  EditorHook hook1=new EditorHook(new TestableACEProvider(CLUSTER_1,exec1,store,board));
  NodeBuilder builder, root;
  PropertyState p;
  root=store.getRoot().builder();
  builder=root.child("c");
  builder=setMixin(builder);
  builder=incrementBy(builder,INCREMENT_BY_1);
  store.merge(root,hook1,CommitInfo.EMPTY);
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue(builder.exists());
  p=builder.getProperty(PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PROP_COUNTER);
  assertEquals(1,p.getValue(LONG).longValue());
  assertTrue("without a registered hook it should have fell to sync",exec1.isEmpty());
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue("the counter node should exists",builder.exists());
  assertCounterNodeState(builder,ImmutableSet.of(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId(),PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId()),1);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void singleNodeAsync() throws CommitFailedException, InterruptedException, ExecutionException {
  NodeStore store=new MemoryNodeStore();
  MyExecutor exec1=new MyExecutor();
  Whiteboard board=new DefaultWhiteboard();
  EditorHook hook1=new EditorHook(new TestableACEProvider(CLUSTER_1,exec1,store,board));
  NodeBuilder builder, root;
  PropertyState p;
  board.register(CommitHook.class,EmptyHook.INSTANCE,null);
  root=store.getRoot().builder();
  builder=root.child("c");
  builder=setMixin(builder);
  builder=incrementBy(builder,INCREMENT_BY_1);
  store.merge(root,hook1,CommitInfo.EMPTY);
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue(builder.exists());
  p=builder.getProperty(PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PROP_COUNTER);
  assertNull(p);
  exec1.execute();
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue("the counter node should exists",builder.exists());
  assertCounterNodeState(builder,ImmutableSet.of(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId(),PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId()),1);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nextDelay(){
  assertEquals(AtomicCounterEditor.ConsolidatorTask.MIN_TIMEOUT,AtomicCounterEditor.ConsolidatorTask.nextDelay(-23456789));
  assertEquals(AtomicCounterEditor.ConsolidatorTask.MIN_TIMEOUT,AtomicCounterEditor.ConsolidatorTask.nextDelay(AtomicCounterEditor.ConsolidatorTask.MIN_TIMEOUT - 1));
  assertEquals(1000,AtomicCounterEditor.ConsolidatorTask.nextDelay(500));
  assertEquals(2000,AtomicCounterEditor.ConsolidatorTask.nextDelay(1000));
  assertEquals(4000,AtomicCounterEditor.ConsolidatorTask.nextDelay(2000));
  assertEquals(8000,AtomicCounterEditor.ConsolidatorTask.nextDelay(4000));
  assertEquals(16000,AtomicCounterEditor.ConsolidatorTask.nextDelay(8000));
  assertEquals(32000,AtomicCounterEditor.ConsolidatorTask.nextDelay(16000));
  assertEquals(Long.MAX_VALUE,AtomicCounterEditor.ConsolidatorTask.nextDelay(AtomicCounterEditor.ConsolidatorTask.MAX_TIMEOUT));
  assertEquals(Long.MAX_VALUE,AtomicCounterEditor.ConsolidatorTask.nextDelay(AtomicCounterEditor.ConsolidatorTask.MAX_TIMEOUT + 1));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * covers the revision increments aspect
 * @throws CommitFailedException 
 */
@Test public void revisionIncrements() throws CommitFailedException {
  NodeBuilder builder;
  NodeState before, after;
  PropertyState rev;
  builder=EMPTY_NODE.builder();
  before=builder.getNodeState();
  builder=setMixin(builder);
  builder=incrementBy(builder,INCREMENT_BY_1);
  after=builder.getNodeState();
  builder=HOOK_1_SYNC.processCommit(before,after,EMPTY).builder();
  rev=builder.getProperty(PREFIX_PROP_REVISION + "1");
  assertNotNull(rev);
  assertEquals(1,rev.getValue(LONG).longValue());
  before=builder.getNodeState();
  builder=incrementBy(builder,INCREMENT_BY_2);
  after=builder.getNodeState();
  builder=HOOK_1_SYNC.processCommit(before,after,EMPTY).builder();
  rev=builder.getProperty(PREFIX_PROP_REVISION + "1");
  assertNotNull(rev);
  assertEquals(2,rev.getValue(LONG).longValue());
  before=builder.getNodeState();
  builder=incrementBy(builder,INCREMENT_BY_1);
  after=builder.getNodeState();
  builder=HOOK_2_SYNC.processCommit(before,after,EMPTY).builder();
  rev=builder.getProperty(PREFIX_PROP_REVISION + "1");
  assertNotNull(rev);
  assertEquals(2,rev.getValue(LONG).longValue());
  rev=builder.getProperty(PREFIX_PROP_REVISION + "2");
  assertNotNull(rev);
  assertEquals(1,rev.getValue(LONG).longValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.BlobStoreStatsTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void download() throws Exception {
  stats.downloaded("foo",103,TimeUnit.SECONDS,1079);
  assertEquals(103,stats.getDownloadTotalSeconds());
  assertEquals(1079,stats.getDownloadTotalSize());
  assertEquals(0,stats.getDownloadCount());
  stats.downloadCompleted("foo");
  assertEquals(1,stats.getDownloadCount());
  stats.downloaded("foo",53,TimeUnit.SECONDS,47);
  assertEquals(103 + 53,stats.getDownloadTotalSeconds());
  assertEquals(1079 + 47,stats.getDownloadTotalSize());
  stats.downloadCompleted("foo");
  assertEquals(2,stats.getDownloadCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void upload() throws Exception {
  stats.uploaded(103,TimeUnit.SECONDS,1079);
  assertEquals(103,stats.getUploadTotalSeconds());
  assertEquals(1079,stats.getUploadTotalSize());
  assertEquals(0,stats.getUploadCount());
  stats.uploadCompleted("foo");
  assertEquals(1,stats.getUploadCount());
  stats.uploaded(53,TimeUnit.SECONDS,47);
  assertEquals(103 + 53,stats.getUploadTotalSeconds());
  assertEquals(1079 + 47,stats.getUploadTotalSize());
  stats.uploadCompleted("foo");
  assertEquals(2,stats.getUploadCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.ClusterRepositoryInfoTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkChangeId() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ds1=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(store).setClusterId(1).getNodeStore();
  String repoId1=ClusterRepositoryInfo.createId(ds1,null);
  ds1.runBackgroundOperations();
  ClusterRepositoryInfo.createId(ds1,"xxxxxxxx");
  String id=ClusterRepositoryInfo.getId(ds1);
  Assert.assertNotNull(id);
  Assert.assertEquals(id,"xxxxxxxx");
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void sameCluster() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ds1=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(store).setClusterId(1).setBlobStore(blobStore).getNodeStore();
  String repoId1=ClusterRepositoryInfo.createId(ds1);
  ds1.runBackgroundOperations();
  DocumentNodeStore ds2=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(store).setClusterId(2).setBlobStore(blobStore).getNodeStore();
  String repoId2=ClusterRepositoryInfo.createId(ds2);
  Assert.assertEquals(repoId1,repoId2);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkCustomId() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ds1=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(store).setClusterId(1).getNodeStore();
  String repoId1=ClusterRepositoryInfo.createId(ds1,"yyyyyyy");
  ds1.runBackgroundOperations();
  String id=ClusterRepositoryInfo.getId(ds1);
  Assert.assertEquals(id,"yyyyyyy");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.SharedDataStoreUtilsTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  dataStore=DataStoreUtils.getBlobStore();
  String repoId1=UUID.randomUUID().toString();
  String repoId2=UUID.randomUUID().toString();
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REPOSITORY.getNameFromId(repoId1));
  DataRecord repo1=dataStore.getMetadataRecord(SharedStoreRecordType.REPOSITORY.getNameFromId(repoId1));
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REPOSITORY.getNameFromId(repoId2));
  DataRecord repo2=dataStore.getMetadataRecord(SharedStoreRecordType.REPOSITORY.getNameFromId(repoId2));
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.MARKED_START_MARKER.getNameFromId(repoId1));
  DataRecord markerRec1=dataStore.getMetadataRecord(SharedStoreRecordType.MARKED_START_MARKER.getNameFromId(repoId1));
  Assert.assertEquals(SharedStoreRecordType.MARKED_START_MARKER.getIdFromName(markerRec1.getIdentifier().toString()),repoId1);
  long lastModifiedMarkerRec1=markerRec1.getLastModified();
  TimeUnit.MILLISECONDS.sleep(100);
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REFERENCES.getNameFromId(repoId1));
  DataRecord rec1=dataStore.getMetadataRecord(SharedStoreRecordType.REFERENCES.getNameFromId(repoId1));
  long lastModifiedRec1=rec1.getLastModified();
  TimeUnit.MILLISECONDS.sleep(25);
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REFERENCES.getNameFromId(repoId2));
  DataRecord rec2=dataStore.getMetadataRecord(SharedStoreRecordType.REFERENCES.getNameFromId(repoId2));
  long lastModifiedRec2=rec2.getLastModified();
  Assert.assertEquals(SharedStoreRecordType.REPOSITORY.getIdFromName(repo1.getIdentifier().toString()),repoId1);
  Assert.assertEquals(SharedStoreRecordType.REPOSITORY.getIdFromName(repo2.getIdentifier().toString()),repoId2);
  Assert.assertEquals(SharedStoreRecordType.REFERENCES.getIdFromName(rec1.getIdentifier().toString()),repoId1);
  Assert.assertEquals(SharedStoreRecordType.REFERENCES.getIdFromName(rec2.getIdentifier().toString()),repoId2);
  Assert.assertTrue(SharedDataStoreUtils.refsNotAvailableFromRepos(dataStore.getAllMetadataRecords(SharedStoreRecordType.REPOSITORY.getType()),dataStore.getAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType())).isEmpty());
  long minRefTime=(lastModifiedRec1 <= lastModifiedRec2 ? lastModifiedRec1 : lastModifiedRec2);
  Assert.assertEquals(SharedDataStoreUtils.getEarliestRecord(dataStore.getAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType())).getLastModified(),minRefTime);
  long minMarkerTime=SharedDataStoreUtils.getEarliestRecord(dataStore.getAllMetadataRecords(SharedStoreRecordType.MARKED_START_MARKER.getType())).getLastModified();
  Assert.assertTrue(minRefTime >= minMarkerTime);
  dataStore.deleteAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType());
  Assert.assertTrue(dataStore.getAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType()).isEmpty());
  dataStore.deleteAllMetadataRecords(SharedStoreRecordType.MARKED_START_MARKER.getType());
  Assert.assertTrue(dataStore.getAllMetadataRecords(SharedStoreRecordType.MARKED_START_MARKER.getType()).isEmpty());
  Assert.assertEquals(2,dataStore.getAllMetadataRecords(SharedStoreRecordType.REPOSITORY.getType()).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.DataStoreBlobStoreTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEncodedBlobId() throws Exception {
  BlobId blobId=new BlobId("abc" + BlobId.SEP + "123");
  assertEquals("abc",blobId.blobId);
  assertEquals(123,blobId.length);
  blobId=new BlobId("abc" + BlobId.SEP + "abc"+ BlobId.SEP+ "123");
  assertEquals("abc" + BlobId.SEP + "abc",blobId.blobId);
  assertEquals(123,blobId.length);
  blobId=new BlobId("abc",123);
  assertEquals("abc" + BlobId.SEP + "123",blobId.encodedValue());
  assertTrue(BlobId.isEncoded("abc" + BlobId.SEP + "123"));
  assertFalse(BlobId.isEncoded("abc"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReference() throws DataStoreException, IOException {
  String reference="testReference";
  String blobId="test";
  DataIdentifier testDI=new DataIdentifier(blobId);
  DataRecord testDR=new ByteArrayDataRecord("foo".getBytes(),testDI,reference);
  DataStore mockedDS=mock(DataStore.class);
  when(mockedDS.getRecordFromReference(reference)).thenReturn(testDR);
  when(mockedDS.getRecord(testDI)).thenReturn(testDR);
  DataStoreBlobStore ds=new DataStoreBlobStore(mockedDS);
  assertEquals(reference,ds.getReference(blobId));
  assertEquals(blobId,BlobId.of(ds.getBlobId(reference)).blobId);
  assertEquals(BlobId.of(testDR).encodedValue(),ds.getBlobId(reference));
  String inMemBlobId=InMemoryDataRecord.getInstance("foo".getBytes()).getIdentifier().toString();
  assertNull(ds.getReference(inMemBlobId));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAllChunks() throws Exception {
  DataIdentifier d10=new DataIdentifier("d-10");
  DataIdentifier d20=new DataIdentifier("d-20");
  DataIdentifier d30=new DataIdentifier("d-30");
  List<DataIdentifier> dis=ImmutableList.of(d10,d20,d30);
  DataStore mockedDS=mock(DataStore.class);
  when(mockedDS.getAllIdentifiers()).thenReturn(dis.iterator());
  when(mockedDS.getRecord(new DataIdentifier("d-10"))).thenReturn(new TimeDataRecord(d10));
  when(mockedDS.getRecord(new DataIdentifier("d-20"))).thenReturn(new TimeDataRecord(d20));
  when(mockedDS.getRecord(new DataIdentifier("d-30"))).thenReturn(new TimeDataRecord(d30));
  DataStoreBlobStore ds=new DataStoreBlobStore(mockedDS);
  Iterator<String> chunks=ds.getAllChunkIds(25);
  Set<String> expected=Sets.newHashSet("d-10","d-20");
  assertEquals(expected,Sets.newHashSet(chunks));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExternalBinary() throws DataStoreException, IOException {
  int maxInlineSize=300;
  int actualSize=maxInlineSize + 10;
  byte[] data=new byte[actualSize];
  new Random().nextBytes(data);
  DataIdentifier testDI=new DataIdentifier("test");
  DataRecord testDR=new ByteArrayDataRecord(data,testDI,"testReference");
  DataStore mockedDS=mock(DataStore.class);
  when(mockedDS.getMinRecordLength()).thenReturn(maxInlineSize);
  when(mockedDS.getRecord(testDI)).thenReturn(testDR);
  when(mockedDS.getRecordIfStored(testDI)).thenReturn(testDR);
  when(mockedDS.addRecord(any(InputStream.class))).thenReturn(testDR);
  DataStoreBlobStore ds=new DataStoreBlobStore(mockedDS);
  DataRecord dr=ds.addRecord(new ByteArrayInputStream(data));
  assertFalse(InMemoryDataRecord.isInstance(dr.getIdentifier().toString()));
  assertEquals(testDI,dr.getIdentifier());
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),dr.getStream()));
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),new BlobStoreInputStream(ds,dr.getIdentifier().toString(),0)));
  assertEquals(dr,ds.getRecordIfStored(dr.getIdentifier()));
  assertEquals(dr,ds.getRecord(dr.getIdentifier()));
  assertEquals(actualSize,ds.getBlobLength(dr.getIdentifier().toString()));
  assertEquals(testDI.toString(),BlobId.of(ds.writeBlob(new ByteArrayInputStream(data))).blobId);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInlineBinary() throws DataStoreException, IOException {
  int maxInlineSize=300;
  DataStore mockedDS=mock(DataStore.class);
  when(mockedDS.getMinRecordLength()).thenReturn(maxInlineSize);
  DataStoreBlobStore ds=new DataStoreBlobStore(mockedDS);
  byte[] data=new byte[maxInlineSize];
  new Random().nextBytes(data);
  DataRecord dr=ds.addRecord(new ByteArrayInputStream(data));
  assertTrue(InMemoryDataRecord.isInstance(dr.getIdentifier().toString()));
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),dr.getStream()));
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),new BlobStoreInputStream(ds,dr.getIdentifier().toString(),0)));
  assertEquals(dr,ds.getRecordIfStored(dr.getIdentifier()));
  assertEquals(dr,ds.getRecord(dr.getIdentifier()));
  assertEquals(maxInlineSize,ds.getBlobLength(dr.getIdentifier().toString()));
  assertEquals(dr.getIdentifier().toString(),BlobId.of(ds.writeBlob(new ByteArrayInputStream(data))).blobId);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.DataStoreServiceTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test @CachingFDS is returned when cacheSize > 0
 */
@Test public void configCachingFDS() throws Exception {
  String nasPath=folder.getRoot().getAbsolutePath() + "/NASPath";
  String cachePath=folder.getRoot().getAbsolutePath() + "/cachePath";
  long cacheSize=100l;
  Map<String,Object> config=new HashMap<String,Object>();
  config.put("repository.home",folder.getRoot().getAbsolutePath());
  config.put(FileDataStoreService.CACHE_SIZE,cacheSize);
  config.put(FileDataStoreService.PATH,nasPath);
  config.put(FileDataStoreService.CACHE_PATH,cachePath);
  FileDataStoreService fdsSvc=new FileDataStoreService();
  DataStore ds=fdsSvc.createDataStore(context.componentContext(),config);
  PropertiesUtil.populate(ds,config,false);
  ds.init(folder.getRoot().getAbsolutePath());
  assertTrue("not instance of CachingFDS",ds instanceof CachingFDS);
  CachingFDS cds=(CachingFDS)ds;
  assertEquals("cachesize not equal",cacheSize,cds.getCacheSize());
  assertEquals("cachepath not equal",cachePath,cds.getPath());
  Backend backend=cds.getBackend();
  Properties props=(Properties)getField(backend,"properties");
  assertEquals("path not equal",nasPath,props.getProperty(FSBackend.FS_BACKEND_PATH));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test to verify @FileDataStore is returned if cacheSize is not configured.
 */
@Test public void configFileDataStore() throws Exception {
  String nasPath=folder.getRoot().getAbsolutePath() + "/NASPath";
  String cachePath=folder.getRoot().getAbsolutePath() + "/cachePath";
  Map<String,Object> config=new HashMap<String,Object>();
  config.put("repository.home",folder.getRoot().getAbsolutePath());
  config.put(FileDataStoreService.PATH,nasPath);
  config.put(FileDataStoreService.CACHE_PATH,cachePath);
  FileDataStoreService fdsSvc=new FileDataStoreService();
  DataStore ds=fdsSvc.createDataStore(context.componentContext(),config);
  PropertiesUtil.populate(ds,config,false);
  ds.init(folder.getRoot().getAbsolutePath());
  assertTrue("not instance of FileDataStore",ds instanceof FileDataStore);
  FileDataStore fds=(FileDataStore)ds;
  assertEquals("path not equal",nasPath,fds.getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.DataStoreTextWriterTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nonExistingEntry() throws Exception {
  File fdsDir=temporaryFolder.newFolder();
  FileDataStore fds=DataStoreUtils.createFDS(fdsDir,0);
  ByteArrayInputStream is=new ByteArrayInputStream("hello".getBytes());
  DataRecord dr=fds.addRecord(is);
  File writerDir=temporaryFolder.newFolder();
  DataStoreTextWriter w=new DataStoreTextWriter(writerDir,false);
  String id=dr.getIdentifier().toString();
  assertFalse(w.isProcessed(id));
  assertNull(w.getText("/a",new IdBlob("foo",id)));
  w.write(id,"foo");
  assertTrue(w.isProcessed(id));
  ExtractedText et=w.getText("/a",new IdBlob("foo",id));
  assertEquals("foo",et.getExtractedText());
  assertEquals(ExtractionResult.SUCCESS,et.getExtractionResult());
  w.markEmpty("a");
  assertTrue(w.isProcessed("a"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkEmptyAndErrorBlobs() throws Exception {
  DataStoreTextWriter w=new DataStoreTextWriter(temporaryFolder.getRoot(),false);
  w.markEmpty("a");
  w.markError("b");
  w.close();
  DataStoreTextWriter w2=new DataStoreTextWriter(temporaryFolder.getRoot(),true);
  assertEquals(ExtractionResult.EMPTY,w2.getText("/a",new IdBlob("foo","a")).getExtractionResult());
  assertEquals(ExtractionResult.ERROR,w2.getText("/a",new IdBlob("foo","b")).getExtractionResult());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noLoadingInReadOnlyMode() throws Exception {
  DataStoreTextWriter w=new DataStoreTextWriter(temporaryFolder.getRoot(),true);
  assertEquals(0,w.getEmptyBlobsHolder().getLoadCount());
  assertEquals(0,w.getErrorBlobsHolder().getLoadCount());
  DataStoreTextWriter w1=new DataStoreTextWriter(temporaryFolder.getRoot(),false);
  assertEquals(1,w1.getEmptyBlobsHolder().getLoadCount());
  assertEquals(1,w1.getErrorBlobsHolder().getLoadCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.DataStoreUtils </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPropertySetup() throws Exception {
  System.setProperty(DS_CLASS_NAME,FileDataStore.class.getName());
  System.setProperty("ds.minRecordLength","1000");
  DataStoreBlobStore dbs=getBlobStore();
  assertEquals(1000,dbs.getDataStore().getMinRecordLength());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.InMemoryDataRecordTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetInstance() throws Exception {
  int length=400;
  byte[] data=new byte[length];
  new Random().nextBytes(data);
  DataRecord dr=InMemoryDataRecord.getInstance(data);
  assertTrue(InMemoryDataRecord.isInstance(dr.getIdentifier().toString()));
  DataRecord dr2=InMemoryDataRecord.getInstance(dr.getIdentifier().toString());
  assertTrue(IOUtils.contentEquals(dr.getStream(),dr2.getStream()));
  assertTrue(IOUtils.contentEquals(dr.getStream(),new ByteArrayInputStream(data)));
  assertEquals(length,dr.getLength());
  assertEquals(dr2.getLength(),dr.getLength());
  assertEquals(dr,dr2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.OakFileDataStoreTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAllIdentifiers() throws Exception {
  File testDir=new File("./target","oak-fds-test");
  FileUtils.touch(new File(testDir,"a"));
  FileUtils.touch(new File(testDir,"b"));
  FileUtils.touch(new File(testDir,"adir/c"));
  FileDataStore fds=new OakFileDataStore();
  fds.setPath(testDir.getAbsolutePath());
  fds.init(null);
  Iterator<DataIdentifier> dis=fds.getAllIdentifiers();
  Set<String> fileNames=Sets.newHashSet(Iterators.transform(dis,new Function<DataIdentifier,String>(){
    @Override public String apply(    @Nullable DataIdentifier input){
      return input.toString();
    }
  }
));
  Set<String> expectedNames=Sets.newHashSet("a","b","c");
  assertEquals(expectedNames,fileNames);
  FileUtils.cleanDirectory(testDir);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BasicDocumentStoreTest </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuery(){
  String base=this.getClass().getName() + ".testQuery-";
  for (int i=0; i < 10; i++) {
    String id=base + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("document with " + id + " not created",success);
    removeMe.add(id);
  }
  List<String> result=getKeys(ds.query(Collection.NODES,base,base + "A",5));
  assertEquals(5,result.size());
  assertTrue(result.contains(base + "4"));
  assertFalse(result.contains(base + "5"));
  result=getKeys(ds.query(Collection.NODES,base,base + "A",20));
  assertEquals(10,result.size());
  assertTrue(result.contains(base + "0"));
  assertTrue(result.contains(base + "9"));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeWithCondition() throws Exception {
  Set<String> existingDocs=new HashSet<String>();
  for (  NodeDocument doc : Utils.getAllDocuments(ds)) {
    existingDocs.add(doc.getPath());
  }
  List<UpdateOp> docs=Lists.newArrayList();
  docs.add(newDocument("/foo",100));
  removeMe.add(Utils.getIdFromPath("/foo"));
  docs.add(newDocument("/bar",200));
  removeMe.add(Utils.getIdFromPath("/bar"));
  docs.add(newDocument("/baz",300));
  removeMe.add(Utils.getIdFromPath("/baz"));
  ds.create(Collection.NODES,docs);
  for (  UpdateOp op : docs) {
    assertNotNull(ds.find(Collection.NODES,op.getId()));
  }
  Map<String,Map<Key,Condition>> toRemove=Maps.newHashMap();
  removeDocument(toRemove,"/foo",100);
  removeDocument(toRemove,"/bar",300);
  removeDocument(toRemove,"/qux",100);
  removeDocument(toRemove,"/baz",300);
  int removed=ds.remove(Collection.NODES,toRemove);
  assertEquals(2,removed);
  assertNotNull(ds.find(Collection.NODES,Utils.getIdFromPath("/bar")));
  for (  NodeDocument doc : Utils.getAllDocuments(ds)) {
    if (!doc.getPath().equals("/bar") && !existingDocs.contains(doc.getPath())) {
      fail("document must not exist: " + doc.getId());
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateMultiple(){
  String id=this.getClass().getName() + ".testUpdateMultiple";
  super.ds.remove(Collection.NODES,id);
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  List<String> toupdate=new ArrayList<String>();
  toupdate.add(id + "-" + UUID.randomUUID());
  toupdate.add(id);
  UpdateOp up2=new UpdateOp(id,false);
  up2.set("foo","bar");
  ds.update(Collection.NODES,toupdate,up2);
  ds.invalidateCache();
  Document d=ds.find(Collection.NODES,id);
  assertNotNull(d);
  assertEquals(id,d.getId());
  assertEquals("bar",d.get("foo").toString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterestingStrings(){
  String[] tests=new String[]{"simple:foo","cr:a\n\b","dquote:a\"b","bs:a\\b","euro:a\u201c","gclef:\uD834\uDD1E","tab:a\tb","nul:a\u0000b","brokensurrogate:\ud800"};
  for (  String t : tests) {
    int pos=t.indexOf(":");
    String testname=t.substring(0,pos);
    String test=t.substring(pos + 1);
    String id=this.getClass().getName() + ".testInterestingStrings-" + testname;
    super.ds.remove(Collection.NODES,id);
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("foo",test);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("failed to insert a document with property value of " + test + " ("+ testname+ ") in "+ super.dsname,success);
    super.ds.invalidateCache();
    NodeDocument nd=super.ds.find(Collection.NODES,id);
    assertEquals("failure to round-trip " + testname + " through "+ super.dsname,test,nd.get("foo"));
    super.ds.remove(Collection.NODES,id);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifiedMaxUpdateQuery(){
  String id=this.getClass().getName() + ".testModifiedMaxUpdate";
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_modified",1000L);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  UpdateOp up2=new UpdateOp(id,true);
  up2.set("_id",id);
  up2.max("_modified",100L);
  super.ds.findAndUpdate(Collection.NODES,up2);
  super.ds.invalidateCache();
  String startId=this.getClass().getName() + ".testModifiedMaxUpdatd";
  String endId=this.getClass().getName() + ".testModifiedMaxUpdatf";
  List<NodeDocument> results=super.ds.query(Collection.NODES,startId,endId,"_modified",1000,1);
  assertEquals("document not found, maybe indexed _modified property not properly updated",1,results.size());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyDeletedOnce(){
  String id=this.getClass().getName() + ".testModifyDeletedOnce";
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set(NodeDocument.DELETED_ONCE,Boolean.FALSE);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  NodeDocument nd=super.ds.find(Collection.NODES,id,0);
  assertNotNull(nd);
  Boolean dovalue=(Boolean)nd.get(NodeDocument.DELETED_ONCE);
  if (dovalue != null) {
    assertEquals(dovalue.booleanValue(),Boolean.FALSE);
  }
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.set(NodeDocument.DELETED_ONCE,Boolean.TRUE);
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  nd=super.ds.find(Collection.NODES,id,0);
  assertNotNull(nd);
  assertNotNull(nd.get(NodeDocument.DELETED_ONCE));
  assertEquals(((Boolean)nd.get(NodeDocument.DELETED_ONCE)).booleanValue(),Boolean.TRUE);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryBinary(){
  String base=this.getClass().getName() + ".testQueryBinary-";
  for (int i=0; i < 10; i++) {
    String id=base + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set(NodeDocument.HAS_BINARY_FLAG,i % 2L);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("document with " + id + " not created",success);
    removeMe.add(id);
  }
  List<String> result=getKeys(ds.query(Collection.NODES,base,base + "Z",NodeDocument.HAS_BINARY_FLAG,NodeDocument.HAS_BINARY_VAL,1000));
  assertEquals(5,result.size());
  assertTrue(result.contains(base + "1"));
  assertFalse(result.contains(base + "0"));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryCollation(){
  String base="2:/" + this.getClass().getName() + ".testQueryCollation";
  List<UpdateOp> creates=new ArrayList<UpdateOp>();
  List<String> expected=new ArrayList<String>();
  for (  char c : "!\"#$%&'()*+,-./0123456789:;<=>?@AZ[\\]^_`az{|}~".toCharArray()) {
    String id=base + c;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    creates.add(up);
    removeMe.add(id);
    id=base + "/" + c;
    up=new UpdateOp(id,true);
    up.set("_id",id);
    creates.add(up);
    expected.add(id);
    removeMe.add(id);
  }
  boolean success=super.ds.create(Collection.NODES,creates);
  assertTrue("documents not created",success);
  List<String> result=getKeys(ds.query(Collection.NODES,base + "/",base + "0",1000));
  List<String> diff=new ArrayList<String>();
  diff.addAll(result);
  diff.removeAll(expected);
  if (!diff.isEmpty()) {
    fail("unexpected query results (broken collation handling in persistence?): " + diff);
  }
  diff=new ArrayList<String>();
  diff.addAll(expected);
  diff.removeAll(result);
  if (!diff.isEmpty()) {
    fail("missing query results (broken collation handling in persistence?): " + diff);
  }
  assertEquals("incorrect result ordering in query result (broken collation handling in persistence?)",expected,result);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyModified(){
  String id=this.getClass().getName() + ".testModifyModified";
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_modified",1000L);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.max("_modified",2000L);
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  NodeDocument nd=super.ds.find(Collection.NODES,id,0);
  assertEquals(((Number)nd.get("_modified")).longValue(),2000L);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.set("_modified",1500L);
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  nd=super.ds.find(Collection.NODES,id,0);
  assertEquals(((Number)nd.get("_modified")).longValue(),1500L);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateModified(){
  String id=this.getClass().getName() + ".testUpdateModified";
  super.ds.remove(Collection.NODES,id);
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  ds.invalidateCache();
  Document d=super.ds.find(Collection.NODES,id);
  Object m=d.get("_modified");
  assertNull("_modified should be null until set",m);
  up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_modified",123L);
  super.ds.findAndUpdate(Collection.NODES,up);
  ds.invalidateCache();
  d=super.ds.find(Collection.NODES,id);
  m=d.get("_modified");
  assertNotNull("_modified should now be != null",m);
  assertEquals("123",m.toString());
  up=new UpdateOp(id,true);
  up.set("_id",id);
  up.max("_modified",122L);
  super.ds.findAndUpdate(Collection.NODES,up);
  ds.invalidateCache();
  d=super.ds.find(Collection.NODES,id);
  m=d.get("_modified");
  assertNotNull("_modified should now be != null",m);
  assertEquals("123",m.toString());
  up=new UpdateOp(id,true);
  up.set("_id",id);
  up.max("_modified",124L);
  super.ds.findAndUpdate(Collection.NODES,up);
  ds.invalidateCache();
  d=super.ds.find(Collection.NODES,id);
  m=d.get("_modified");
  assertNotNull("_modified should now be != null",m);
  assertEquals("124",m.toString());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryDeletedOnce(){
  String base=this.getClass().getName() + ".testQueryDeletedOnce-";
  for (int i=0; i < 10; i++) {
    String id=base + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set(NodeDocument.DELETED_ONCE,Boolean.valueOf(i % 2 == 0));
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("document with " + id + " not created",success);
    removeMe.add(id);
  }
  List<String> result=getKeys(ds.query(Collection.NODES,base,base + "Z",NodeDocument.DELETED_ONCE,1L,1000));
  assertEquals(5,result.size());
  assertTrue(result.contains(base + "0"));
  assertFalse(result.contains(base + "1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BlobCollectorTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCollect() throws Exception {
  NodeBuilder b1=store.getRoot().builder();
  List<ReferencedBlob> blobs=Lists.newArrayList();
  b1.child("x").child("y");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < 2; i++) {
    b1=store.getRoot().builder();
    Blob b=store.createBlob(randomStream(i,4096));
    b1.child("x").child("y").setProperty("b" + i,b);
    blobs.add(new ReferencedBlob(b,"/x/y"));
    store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  PropertyBuilder<Blob> p1=PropertyBuilder.array(Type.BINARY).setName("barr");
  for (int i=0; i < 2; i++) {
    Blob b=store.createBlob(randomStream(i,4096));
    p1.addValue(b);
    blobs.add(new ReferencedBlob(b,"/x/y"));
  }
  b1=store.getRoot().builder();
  b1.child("x").child("y").setProperty(p1.getPropertyState());
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < 2; i++) {
    b1=store.getRoot().builder();
    Blob b=store.createBlob(randomStream(i + 1,4096));
    b1.child("x").child("y").setProperty("b" + i,b);
    blobs.add(new ReferencedBlob(b,"/x/y"));
    store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  NodeDocument doc=store.getDocumentStore().find(Collection.NODES,Utils.getIdFromPath("/x/y"));
  List<ReferencedBlob> collectedBlobs=Lists.newArrayList();
  blobCollector.collect(doc,collectedBlobs);
  assertEquals(blobs.size(),collectedBlobs.size());
  assertEquals(new HashSet<ReferencedBlob>(blobs),new HashSet<ReferencedBlob>(collectedBlobs));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BlobReferenceIteratorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBlobIterator() throws Exception {
  List<ReferencedBlob> blobs=Lists.newArrayList();
  for (int i=0; i < 10; i++) {
    NodeBuilder b1=store.getRoot().builder();
    Blob b=store.createBlob(randomStream(i,4096));
    b1.child("x").child("y" + 1).setProperty("b" + i,b);
    blobs.add(new ReferencedBlob(b,"/x/y" + 1));
    store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  List<ReferencedBlob> collectedBlobs=ImmutableList.copyOf(store.getReferencedBlobsIterator());
  assertEquals(blobs.size(),collectedBlobs.size());
  assertEquals(new HashSet<ReferencedBlob>(blobs),new HashSet<ReferencedBlob>(collectedBlobs));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BlobTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBlobSerialization() throws Exception {
  TestBlobStore blobStore=new TestBlobStore();
  DocumentMK mk=builderProvider.newBuilder().setBlobStore(blobStore).open();
  BlobSerializer blobSerializer=mk.getNodeStore().getBlobSerializer();
  Blob blob=new BlobStoreBlob(blobStore,"foo");
  assertEquals("foo",blobSerializer.serialize(blob));
  assertEquals(0,blobStore.writeCount);
  blob=new ArrayBasedBlob("foo".getBytes());
  blobSerializer.serialize(blob);
  assertEquals(1,blobStore.writeCount);
  byte[] bytes="foo".getBytes();
  String blobId=blobStore.writeBlob(new ByteArrayInputStream(bytes));
  String reference=blobStore.getReference(blobId);
  blob=new ReferencedBlob("foo".getBytes(),reference);
  blobStore.writeCount=0;
  blobSerializer.serialize(blob);
  assertEquals(0,blobStore.writeCount);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void addBlobs() throws Exception {
  DocumentMK mk=setMongoConnection(builderProvider.newBuilder()).open();
  long blobSize=TOTAL_SIZE / DOCUMENT_COUNT;
  ArrayList<String> blobIds=new ArrayList<String>();
  Random r=new Random();
  for (int i=0; i < DOCUMENT_COUNT; i++) {
    log("writing " + i + "/"+ DOCUMENT_COUNT);
    String id=mk.write(new RandomStream(blobSize,r.nextInt()));
    blobIds.add(id);
  }
  for (  String id : blobIds) {
    assertEquals(blobSize,mk.getLength(id));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BulkCreateOrUpdateClusterTest </h4><pre class="type-13 type-9 type-12 type-5 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Run multiple batch updates concurrently. Each thread modifies only its own documents.
 */
@Test public void testConcurrentNoConflict() throws InterruptedException {
  int amountPerThread=100;
  int threadCount=10;
  int amount=amountPerThread * threadCount;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  for (int i=0; i < amount; i+=2) {
    String id=this.getClass().getName() + ".testConcurrentNoConflict" + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("prop",100);
    updates.add(up);
  }
  ds1.create(Collection.NODES,updates);
  final Set<Exception> exceptions=new HashSet<Exception>();
  List<Thread> threads=new ArrayList<Thread>();
  final Map<String,NodeDocument> oldDocs=new ConcurrentHashMap<String,NodeDocument>();
  for (int i=0; i < threadCount; i++) {
    final DocumentStore selectedDs=i % 2 == 0 ? this.ds1 : this.ds2;
    final List<UpdateOp> threadUpdates=new ArrayList<UpdateOp>(amountPerThread);
    for (int j=0; j < amountPerThread; j++) {
      String id=this.getClass().getName() + ".testConcurrentNoConflict" + (j + i * amountPerThread);
      UpdateOp up=new UpdateOp(id,true);
      up.set("_id",id);
      up.set("prop",200 + i + j);
      threadUpdates.add(up);
      removeMe.add(id);
    }
    shuffle(threadUpdates);
    threads.add(new Thread(){
      public void run(){
        try {
          for (          NodeDocument d : selectedDs.createOrUpdate(Collection.NODES,threadUpdates)) {
            if (d == null) {
              continue;
            }
            oldDocs.put(d.getId(),d);
          }
        }
 catch (        Exception ex) {
          exceptions.add(ex);
        }
      }
    }
);
  }
  for (  Thread t : threads) {
    t.start();
  }
  for (  Thread t : threads) {
    t.join();
    if (t.isAlive()) {
      fail("Thread hasn't finished in 10s");
    }
  }
  if (!exceptions.isEmpty()) {
    String msg=exceptions.size() + " out of " + threadCount+ " failed with exceptions, the first being: "+ exceptions.iterator().next();
    fail(msg);
  }
  for (int i=0; i < amount; i++) {
    String id=this.getClass().getName() + ".testConcurrentNoConflict" + i;
    NodeDocument oldDoc=oldDocs.get(id);
    NodeDocument newDoc;
    if (i % 2 == 1) {
      assertNull("The returned value should be null for created doc",oldDoc);
      newDoc=ds1.find(Collection.NODES,id);
    }
 else {
      assertNotNull("The returned doc shouldn't be null for updated doc",oldDoc);
      assertEquals("The old value is not correct",100l,oldDoc.get("prop"));
      newDoc=ds2.find(Collection.NODES,id);
    }
    assertNotEquals("The document hasn't been updated",100l,newDoc.get("prop"));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-5 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Run multiple batch updates concurrently. Each thread modifies the same set of documents.
 */
@Test public void testConcurrentWithConflict() throws InterruptedException {
  int threadCount=10;
  int amount=500;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  for (int i=0; i < amount; i+=2) {
    String id=this.getClass().getName() + ".testConcurrentNoConflict" + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("prop",100);
    updates.add(up);
    removeMe.add(id);
  }
  ds1.create(Collection.NODES,updates);
  final Set<Exception> exceptions=new HashSet<Exception>();
  List<Thread> threads=new ArrayList<Thread>();
  for (int i=0; i < threadCount; i++) {
    final DocumentStore selectedDs=i % 2 == 0 ? this.ds1 : this.ds2;
    final List<UpdateOp> threadUpdates=new ArrayList<UpdateOp>(amount);
    for (int j=0; j < amount; j++) {
      String id=this.getClass().getName() + ".testConcurrentWithConflict" + j;
      UpdateOp up=new UpdateOp(id,true);
      up.set("_id",id);
      up.set("prop",200 + i * amount + j);
      threadUpdates.add(up);
      removeMe.add(id);
    }
    shuffle(threadUpdates);
    threads.add(new Thread(){
      public void run(){
        try {
          selectedDs.createOrUpdate(Collection.NODES,threadUpdates);
        }
 catch (        Exception ex) {
          exceptions.add(ex);
        }
      }
    }
);
  }
  for (  Thread t : threads) {
    t.start();
  }
  for (  Thread t : threads) {
    t.join(10000);
    if (t.isAlive()) {
      fail("Thread hasn't finished in 10s");
    }
  }
  if (!exceptions.isEmpty()) {
    String msg=exceptions.size() + " out of " + threadCount+ " failed with exceptions, the first being: "+ exceptions.iterator().next();
    fail(msg);
  }
  for (int i=0; i < amount; i++) {
    String id=this.getClass().getName() + ".testConcurrentWithConflict" + i;
    NodeDocument newDoc=ds1.find(Collection.NODES,id);
    assertNotNull("The document hasn't been inserted",newDoc);
    assertNotEquals("The document hasn't been updated",100l,newDoc.get("prop"));
    newDoc=ds2.find(Collection.NODES,id);
    assertNotNull("The document hasn't been inserted",newDoc);
    assertNotEquals("The document hasn't been updated",100l,newDoc.get("prop"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BulkCreateOrUpdateTest </h4><pre class="type-13 type-9 type-12 type-5 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Run multiple batch updates concurrently. Each thread modifies only its own documents.
 */
@Test public void testConcurrentNoConflict() throws InterruptedException {
  int amountPerThread=100;
  int threadCount=10;
  int amount=amountPerThread * threadCount;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  for (int i=0; i < amount; i+=2) {
    String id=this.getClass().getName() + ".testConcurrentNoConflict" + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("prop",100);
    updates.add(up);
  }
  ds.create(Collection.NODES,updates);
  List<Thread> threads=new ArrayList<Thread>();
  final Map<String,NodeDocument> oldDocs=new ConcurrentHashMap<String,NodeDocument>();
  for (int i=0; i < threadCount; i++) {
    final List<UpdateOp> threadUpdates=new ArrayList<UpdateOp>(amountPerThread);
    for (int j=0; j < amountPerThread; j++) {
      String id=this.getClass().getName() + ".testConcurrentNoConflict" + (j + i * amountPerThread);
      UpdateOp up=new UpdateOp(id,true);
      up.set("_id",id);
      up.set("prop",200 + i + j);
      threadUpdates.add(up);
      removeMe.add(id);
    }
    shuffle(threadUpdates);
    threads.add(new Thread(){
      public void run(){
        for (        NodeDocument d : ds.createOrUpdate(Collection.NODES,threadUpdates)) {
          if (d == null) {
            continue;
          }
          oldDocs.put(d.getId(),d);
        }
      }
    }
);
  }
  for (  Thread t : threads) {
    t.start();
  }
  for (  Thread t : threads) {
    t.join();
    if (t.isAlive()) {
      fail("Thread hasn't finished in 10s");
    }
  }
  for (int i=0; i < amount; i++) {
    String id=this.getClass().getName() + ".testConcurrentNoConflict" + i;
    NodeDocument oldDoc=oldDocs.get(id);
    NodeDocument newDoc=ds.find(Collection.NODES,id);
    if (i % 2 == 1) {
      assertNull("The returned value should be null for created doc",oldDoc);
    }
 else {
      assertNotNull("The returned doc shouldn't be null for updated doc",oldDoc);
      assertEquals("The old value is not correct",100l,oldDoc.get("prop"));
    }
    assertNotEquals("The document hasn't been updated",100l,newDoc.get("prop"));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-5 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Run multiple batch updates concurrently. Each thread modifies the same set of documents.
 */
@Test public void testConcurrentWithConflict() throws InterruptedException {
  int threadCount=10;
  int amount=500;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  for (int i=0; i < amount; i+=2) {
    String id=this.getClass().getName() + ".testConcurrentNoConflict" + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("prop",100);
    updates.add(up);
    removeMe.add(id);
  }
  ds.create(Collection.NODES,updates);
  final Set<Exception> exceptions=new HashSet<Exception>();
  List<Thread> threads=new ArrayList<Thread>();
  for (int i=0; i < threadCount; i++) {
    final List<UpdateOp> threadUpdates=new ArrayList<UpdateOp>(amount);
    for (int j=0; j < amount; j++) {
      String id=this.getClass().getName() + ".testConcurrentWithConflict" + j;
      UpdateOp up=new UpdateOp(id,true);
      up.set("_id",id);
      up.set("prop",200 + i * amount + j);
      threadUpdates.add(up);
      removeMe.add(id);
    }
    shuffle(threadUpdates);
    threads.add(new Thread(){
      public void run(){
        try {
          ds.createOrUpdate(Collection.NODES,threadUpdates);
        }
 catch (        Exception ex) {
          exceptions.add(ex);
        }
      }
    }
);
  }
  for (  Thread t : threads) {
    t.start();
  }
  for (  Thread t : threads) {
    t.join(10000);
    if (t.isAlive()) {
      fail("Thread hasn't finished in 10s");
    }
  }
  if (!exceptions.isEmpty()) {
    String msg=exceptions.size() + " out of " + threadCount+ " failed with exceptions, the first being: "+ exceptions.iterator().next();
    fail(msg);
  }
  for (int i=0; i < amount; i++) {
    String id=this.getClass().getName() + ".testConcurrentWithConflict" + i;
    NodeDocument newDoc=ds.find(Collection.NODES,id);
    assertNotNull("The document hasn't been inserted",newDoc);
    assertNotEquals("The document hasn't been updated",100l,newDoc.get("prop"));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * This method updates multiple items using createOrUpdate() method. The
 * return value should be a list of items before the update.
 */
@Test public void testUpdateMultiple(){
  final int amount=100;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  for (int i=0; i < amount; i++) {
    String id=this.getClass().getName() + ".testUpdateMultiple" + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("prop",100);
    updates.add(up);
    removeMe.add(id);
  }
  ds.create(Collection.NODES,updates);
  for (int i=0; i < amount; i++) {
    UpdateOp up=updates.get(i).copy();
    up.set("prop",200);
    updates.set(i,up);
  }
  List<NodeDocument> docs=ds.createOrUpdate(Collection.NODES,updates);
  assertEquals(amount,docs.size());
  for (int i=0; i < amount; i++) {
    NodeDocument oldDoc=docs.get(i);
    String id=oldDoc.getId();
    NodeDocument newDoc=ds.find(Collection.NODES,id);
    assertEquals("The result list order is incorrect",updates.get(i).getId(),id);
    assertEquals("The old value is not correct",100l,oldDoc.get("prop"));
    assertEquals("The document hasn't been updated",200l,newDoc.get("prop"));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This method creates or updates multiple items using createOrUpdate()
 * method. New items have odd indexes and updates items have even indexes.
 * The return value should be a list of old documents (for the updates) or
 * nulls (for the inserts).
 */
@Test public void testCreateOrUpdateMultiple(){
  int amount=100;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  for (int i=0; i < amount; i+=2) {
    String id=this.getClass().getName() + ".testCreateOrUpdateMultiple" + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("prop",100);
    updates.add(up);
    removeMe.add(id);
  }
  ds.create(Collection.NODES,updates);
  updates.clear();
  for (int i=0; i < amount; i++) {
    String id=this.getClass().getName() + ".testCreateOrUpdateMultiple" + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("prop",200);
    updates.add(up);
    removeMe.add(id);
  }
  List<NodeDocument> docs=ds.createOrUpdate(Collection.NODES,updates);
  assertEquals(amount,docs.size());
  for (int i=0; i < amount; i++) {
    String id=this.getClass().getName() + ".testCreateOrUpdateMultiple" + i;
    NodeDocument oldDoc=docs.get(i);
    NodeDocument newDoc=ds.find(Collection.NODES,id);
    if (i % 2 == 1) {
      assertNull("The returned value should be null for created doc",oldDoc);
    }
 else {
      assertNotNull("The returned doc shouldn't be null for updated doc",oldDoc);
      assertEquals("The old value is not correct",100l,oldDoc.get("prop"));
      assertEquals("The result list order is incorrect",updates.get(i).getId(),oldDoc.getId());
    }
    assertEquals("The document hasn't been updated",200l,newDoc.get("prop"));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This method adds a few updateOperations modifying the same document.
 */
@Test public void testUpdateSameDocument(){
  final int amount=5;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  String id=this.getClass().getName() + ".testUpdateSameDocument";
  removeMe.add(id);
  for (int i=0; i < amount; i++) {
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("update_id",i);
    up.set("prop_" + i,100);
    updates.add(up);
  }
  List<NodeDocument> docs=ds.createOrUpdate(Collection.NODES,updates);
  assertEquals(amount,docs.size());
  assertNull("The old value should be null for the first update",docs.get(0));
  Long prevModCount=null;
  for (int i=1; i < amount; i++) {
    Long modCount=docs.get(i).getModCount();
    if (prevModCount != null) {
      assertNotNull(modCount);
      assertTrue("_modCount, when present, must be increasing, but changed from " + prevModCount + " to "+ modCount,prevModCount.longValue() < modCount.longValue());
    }
    prevModCount=modCount;
    assertEquals("The old value is not correct",Long.valueOf(i - 1),docs.get(i).get("update_id"));
  }
  NodeDocument newDoc=ds.find(Collection.NODES,id);
  if (newDoc.getModCount() != null) {
    assertEquals("The final mod count is not correct",Long.valueOf(5),newDoc.getModCount());
  }
  for (int i=0; i < amount; i++) {
    assertEquals("The value is not correct",100l,newDoc.get("prop_" + i));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This tests create multiple items using createOrUpdate() method. The
 * return value should be a list of null values.
 */
@Test public void testCreateMultiple(){
  final int amount=100;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  for (int i=0; i < amount; i++) {
    String id=this.getClass().getName() + ".testCreateMultiple" + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    updates.add(up);
    removeMe.add(id);
  }
  List<NodeDocument> docs=ds.createOrUpdate(Collection.NODES,updates);
  assertEquals(amount,docs.size());
  for (int i=0; i < amount; i++) {
    assertNull("There shouldn't be a value for created doc",docs.get(i));
    assertNotNull("The node hasn't been created",ds.find(Collection.NODES,updates.get(i).getId()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CheckpointsTest </h4><pre class="type-6 type-19 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetOldestRevisionToKeep() throws Exception {
  long et1=1000, et2=et1 + 1000;
  Revision r1=Revision.fromString(store.checkpoint(et1));
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x");
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Revision r2=Revision.fromString(store.checkpoint(et2));
  assertNotSame(r1,r2);
  assertEquals(r2,store.getCheckpoints().getOldestRevisionToKeep());
  long starttime=clock.getTime();
  clock.waitUntil(starttime + et1 + 1);
  assertEquals(r2,store.getCheckpoints().getOldestRevisionToKeep());
  clock.waitUntil(starttime + et2 + 1);
  assertNull(store.getCheckpoints().getOldestRevisionToKeep());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckpointPurge() throws Exception {
  long expiryTime=1000;
  Revision r1=Revision.fromString(store.checkpoint(expiryTime));
  assertEquals(r1,store.getCheckpoints().getOldestRevisionToKeep());
  clock.waitUntil(clock.getTime() + expiryTime + 1);
  assertNull(store.getCheckpoints().getOldestRevisionToKeep());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void expiryOverflow() throws Exception {
  clock.waitUntil(System.currentTimeMillis());
  Map<String,String> empty=Collections.emptyMap();
  Revision r=Revision.fromString(store.checkpoint(Long.MAX_VALUE,empty));
  Checkpoints.Info info=store.getCheckpoints().getCheckpoints().get(r);
  assertNotNull(info);
  assertEquals(Long.MAX_VALUE,info.getExpiryTime());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkpointRemove() throws Exception {
  long et1=1000, et2=et1 + 1000;
  String cp1=store.checkpoint(et1);
  Revision r1=Revision.fromString(cp1);
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x");
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  String cp2=store.checkpoint(et2);
  Revision r2=Revision.fromString(cp2);
  assertEquals(2,store.getCheckpoints().size());
  assertEquals(r2,store.getCheckpoints().getOldestRevisionToKeep());
  store.release(cp2);
  assertEquals(1,store.getCheckpoints().size());
  assertEquals(r1,store.getCheckpoints().getOldestRevisionToKeep());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readOldFormat() throws Exception {
  clock.waitUntil(System.currentTimeMillis());
  DocumentStore docStore=store.getDocumentStore();
  Map<String,String> empty=Collections.emptyMap();
  Revision r=Revision.fromString(store.checkpoint(Integer.MAX_VALUE,empty));
  Document doc=docStore.find(Collection.SETTINGS,"checkpoint");
  assertNotNull(doc);
  @SuppressWarnings("unchecked") Map<Revision,String> data=(Map<Revision,String>)doc.get("data");
  assertNotNull(data);
  assertEquals(1,data.size());
  assertTrue(data.containsKey(r));
  UpdateOp update=new UpdateOp("checkpoint",false);
  long expires=clock.getTime() + 1000 + Integer.MAX_VALUE;
  update.setMapEntry("data",r,String.valueOf(expires));
  assertNotNull(docStore.findAndUpdate(Collection.SETTINGS,update));
  Checkpoints.Info info=store.getCheckpoints().getCheckpoints().get(r);
  assertNotNull(info);
  assertEquals(expires,info.getExpiryTime());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userInfoNamedExpires() throws Exception {
  Map<String,String> props=ImmutableMap.of("expires","today");
  Revision r=Revision.fromString(store.checkpoint(Integer.MAX_VALUE,props));
  Map<String,String> info=store.checkpointInfo(r.toString());
  assertNotNull(info);
  assertEquals(props,info);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCheckpointPurgeByCount() throws Exception {
  long expiryTime=TimeUnit.HOURS.toMillis(1);
  Revision r1=null;
  for (int i=0; i < Checkpoints.CLEANUP_INTERVAL; i++) {
    r1=Revision.fromString(store.checkpoint(expiryTime));
    store.setRoot(new RevisionVector(Revision.newRevision(store.getClusterId())));
  }
  assertEquals(r1,store.getCheckpoints().getOldestRevisionToKeep());
  assertEquals(Checkpoints.CLEANUP_INTERVAL,store.getCheckpoints().size());
  clock.waitUntil(clock.getTime() + expiryTime);
  store.checkpoint(expiryTime);
  assertEquals(1,store.getCheckpoints().size());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void parseInfo(){
  long expires=System.currentTimeMillis();
  Checkpoints.Info info=Checkpoints.Info.fromString(String.valueOf(expires));
  assertEquals(expires,info.getExpiryTime());
  String infoString="{\"expires\":\"" + expires + "\",\"foo\":\"bar\"}";
  info=Checkpoints.Info.fromString(infoString);
  assertEquals(expires,info.getExpiryTime());
  assertEquals(Collections.singleton("foo"),info.get().keySet());
  assertEquals("bar",info.get().get("foo"));
  Revision r1=new Revision(1,0,1);
  Revision r2=new Revision(1,0,2);
  RevisionVector rv=new RevisionVector(r1,r2);
  infoString="{\"expires\":\"" + expires + "\",\"rv\":\""+ rv.toString()+ "\",\"foo\":\"bar\"}";
  info=Checkpoints.Info.fromString(infoString);
  assertEquals(expires,info.getExpiryTime());
  assertEquals(Collections.singleton("foo"),info.get().keySet());
  assertEquals("bar",info.get().get("foo"));
  assertEquals(rv,info.getCheckpoint());
  assertEquals(infoString,info.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multipleCheckpointOnSameRevision() throws Exception {
  long e1=TimeUnit.HOURS.toMillis(1);
  long e2=TimeUnit.HOURS.toMillis(3);
  Revision r2=Revision.fromString(store.checkpoint(e2));
  Revision r1=Revision.fromString(store.checkpoint(e1));
  clock.waitUntil(clock.getTime() + e1 + 1);
  assertEquals(r2,store.getCheckpoints().getOldestRevisionToKeep());
  assertEquals(1,store.getCheckpoints().size());
  assertNull(store.retrieve(r1.toString()));
  assertNotNull(store.retrieve(r2.toString()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterInfoTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readWriteMode() throws InterruptedException {
  MemoryDocumentStore mem=new MemoryDocumentStore();
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  ClusterNodeInfo.setClock(clock);
  DocumentNodeStore ns1=new DocumentMK.Builder().setDocumentStore(mem).setAsyncDelay(0).setLeaseCheck(false).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=new DocumentMK.Builder().setDocumentStore(mem).setAsyncDelay(0).setLeaseCheck(false).setClusterId(2).getNodeStore();
  clock.waitUntil(clock.getTime() + ns1.getClusterInfo().getLeaseTime());
  ns1.getClusterInfo().setLeaseTime(0);
  ns1.getClusterInfo().setLeaseUpdateInterval(0);
  ns2.getClusterInfo().setLeaseTime(0);
  ns2.getClusterInfo().setLeaseUpdateInterval(0);
  List<ClusterNodeInfoDocument> list=mem.query(Collection.CLUSTER_NODES,"0","a",Integer.MAX_VALUE);
  assertEquals(2,list.size());
  assertNull(mem.getReadPreference());
  assertNull(mem.getWriteConcern());
  mem.setReadWriteMode("read:primary, write:majority");
  assertEquals(ReadPreference.primary(),mem.getReadPreference());
  assertEquals(WriteConcern.MAJORITY,mem.getWriteConcern());
  UpdateOp op;
  op=new UpdateOp(list.get(0).getId(),false);
  op.set("readWriteMode","read:xyz, write:abc");
  mem.findAndUpdate(Collection.CLUSTER_NODES,op);
  ns1.renewClusterIdLease();
  assertEquals(ReadPreference.primary(),mem.getReadPreference());
  assertEquals(WriteConcern.MAJORITY,mem.getWriteConcern());
  op=new UpdateOp(list.get(0).getId(),false);
  op.set("readWriteMode","read:nearest, write:fsynced");
  mem.findAndUpdate(Collection.CLUSTER_NODES,op);
  ns1.renewClusterIdLease();
  assertEquals(ReadPreference.nearest(),mem.getReadPreference());
  assertEquals(WriteConcern.FSYNCED,mem.getWriteConcern());
  ns1.dispose();
  ns2.dispose();
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void useAbandoned() throws InterruptedException {
  MemoryDocumentStore mem=new MemoryDocumentStore();
  DocumentNodeStore ns1=new DocumentMK.Builder().setDocumentStore(mem).setAsyncDelay(0).setLeaseCheck(false).getNodeStore();
  DocumentStore ds=ns1.getDocumentStore();
  int cid=ns1.getClusterId();
  ClusterNodeInfoDocument cnid=ds.find(Collection.CLUSTER_NODES,"" + cid);
  assertNotNull(cnid);
  assertEquals(ClusterNodeState.ACTIVE.toString(),cnid.get(ClusterNodeInfo.STATE));
  ns1.dispose();
  long waitFor=2000;
  UpdateOp up=new UpdateOp("" + cid,false);
  up.set(Document.ID,"" + cid);
  up.set(ClusterNodeInfo.STATE,ClusterNodeState.ACTIVE.toString());
  long now=System.currentTimeMillis();
  up.set(ClusterNodeInfo.LEASE_END_KEY,now + waitFor);
  ds.findAndUpdate(Collection.CLUSTER_NODES,up);
  ns1=new DocumentMK.Builder().setDocumentStore(mem).setAsyncDelay(0).setLeaseCheck(false).getNodeStore();
  assertEquals("should have re-used existing cluster id",cid,ns1.getClusterId());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void renewLease() throws InterruptedException {
  MemoryDocumentStore mem=new MemoryDocumentStore();
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  ClusterNodeInfo.setClock(clock);
  DocumentNodeStore ns=new DocumentMK.Builder().setDocumentStore(mem).setAsyncDelay(0).setLeaseCheck(false).getNodeStore();
  ClusterNodeInfo info=ns.getClusterInfo();
  assertNotNull(info);
  long leaseEnd=getLeaseEndTime(ns);
  clock.waitUntil(clock.getTime() + ClusterNodeInfo.DEFAULT_LEASE_UPDATE_INTERVAL_MILLIS - 1000);
  ns.renewClusterIdLease();
  assertEquals(leaseEnd,getLeaseEndTime(ns));
  clock.waitUntil(clock.getTime() + 2000);
  ns.renewClusterIdLease();
  assertTrue(getLeaseEndTime(ns) > leaseEnd);
  ns.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterJoinTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeJoins() throws Exception {
  String rev1, rev2, rev3;
  mk.getNodeStore().setAsyncDelay(0);
  rev1=mk.commit("/","+\"foo\":{}",null,null);
  DocumentMK mk2=new DocumentMK.Builder().setAsyncDelay(0).setMongoDB(connectionFactory.getConnection().getDB()).setClusterId(mk.getNodeStore().getClusterId() + 1).open();
  try {
    mk2.commit("/","+\"bar\":{}+\"bla\":{}",null,null);
    rev2=mk.commit("/","+\"baz\":{}+\"qux\":{}",null,null);
    assertChildNodeCount("/",rev1,1);
    JSONObject obj=parseJSONObject(mk.getNodes("/",rev2,0,0,10,null));
    mk2.runBackgroundOperations();
    mk.runBackgroundOperations();
    for (    Object key : obj.keySet()) {
      String name=key.toString();
      if (name.startsWith(":")) {
        continue;
      }
      assertNodesExist(rev2,"/" + name);
    }
    assertEquals(3L,obj.get(":childNodeCount"));
    rev3=mk.getHeadRevision();
    obj=parseJSONObject(mk.getNodes("/",rev3,0,0,10,null));
    for (    Object key : obj.keySet()) {
      String name=key.toString();
      if (name.startsWith(":")) {
        continue;
      }
      assertNodesExist(rev3,"/" + name);
    }
    assertEquals(5L,obj.get(":childNodeCount"));
  }
  finally {
    mk2.dispose();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterTest </h4><pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void conflict(){
  DocumentMK mk1=createMK(1,0);
  DocumentMK mk2=createMK(2,0);
  String m1r0=mk1.getHeadRevision();
  String m2r0=mk2.getHeadRevision();
  mk1.commit("/","+\"test\":{}",m1r0,null);
  try {
    mk2.commit("/","+\"test\":{}",m2r0,null);
    fail();
  }
 catch (  DocumentStoreException e) {
  }
  mk1.runBackgroundOperations();
  mk2.runBackgroundOperations();
  String n1=mk1.getNodes("/",mk1.getHeadRevision(),0,0,10,null);
  String n2=mk2.getNodes("/",mk2.getHeadRevision(),0,0,10,null);
  assertEquals(n1,n2);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void clusterBranchInVisibility() throws InterruptedException {
  DocumentMK mk1=createMK(1);
  mk1.commit("/","+\"regular\": {}",null,null);
  String b1=mk1.branch(null);
  String b2=mk1.branch(null);
  b1=mk1.commit("/","+\"branchVisible\": {}",b1,null);
  b2=mk1.commit("/","+\"branchInvisible\": {}",b2,null);
  mk1.merge(b1,null);
  disposeMK(mk1);
  DocumentMK mk2=createMK(2);
  String nodes=mk2.getNodes("/",null,0,0,100,null);
  assertEquals("{\"branchVisible\":{},\"regular\":{},\":childNodeCount\":2}",nodes);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void revisionVisibility() throws InterruptedException {
  DocumentMK mk1=createMK(1);
  DocumentMK mk2=createMK(2);
  String m2h;
  m2h=mk2.getNodes("/",mk2.getHeadRevision(),0,0,2,null);
  assertEquals("{\":childNodeCount\":0}",m2h);
  String oldHead=mk2.getHeadRevision();
  mk1.commit("/","+\"test\":{}",null,null);
  String m1h=mk1.getNodes("/",mk1.getHeadRevision(),0,0,2,null);
  assertEquals("{\"test\":{},\":childNodeCount\":1}",m1h);
  assertEquals("{\":childNodeCount\":0}",m2h);
  m2h=mk2.getNodes("/test",mk2.getHeadRevision(),0,0,2,null);
  for (int i=0; i < 100; i++) {
    Thread.sleep(10);
    if (mk1.getPendingWriteCount() > 0) {
      continue;
    }
    if (mk2.getHeadRevision().equals(oldHead)) {
      continue;
    }
    break;
  }
  m2h=mk2.getNodes("/",mk2.getHeadRevision(),0,0,5,null);
  assertEquals("{\"test\":{},\":childNodeCount\":1}",m2h);
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void clusterNodeInfo(){
  MemoryDocumentStore store=new MemoryDocumentStore();
  ClusterNodeInfo c1, c2, c3, c4;
  c1=ClusterNodeInfo.getInstance(store,"m1",null);
  assertEquals(1,c1.getId());
  c1.dispose();
  c1=ClusterNodeInfo.getInstance(store,"m1",null);
  assertEquals(1,c1.getId());
  c1.dispose();
  c2=ClusterNodeInfo.getInstance(store,"m2",null);
  assertEquals(2,c2.getId());
  c3=ClusterNodeInfo.getInstance(store,"m3","/a");
  assertEquals(3,c3.getId());
  c2.dispose();
  c3.dispose();
  c3=ClusterNodeInfo.getInstance(store,"m3","/a");
  assertEquals(3,c3.getId());
  c3.dispose();
  c4=ClusterNodeInfo.getInstance(store,"m3","/b");
  assertEquals(4,c4.getId());
  c1.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for OAK-1254
 */
@Test public void clusterBranchRebase() throws Exception {
  DocumentMK mk1=createMK(1,0);
  mk1.commit("/","+\"test\":{}",null,null);
  mk1.runBackgroundOperations();
  DocumentMK mk2=createMK(2,0);
  DocumentMK mk3=createMK(3,0);
  DocumentNodeStore ns3=mk3.getNodeStore();
  traverse(ns3.getRoot(),"/");
  String b3=mk3.branch(null);
  b3=mk3.commit("/","+\"mk3\":{}",b3,null);
  assertTrue(mk3.nodeExists("/test",b3));
  mk2.commit("/","+\"test/mk21\":{}",null,null);
  mk2.runBackgroundOperations();
  mk3.runBackgroundOperations();
  String base3=mk3.getHeadRevision();
  assertFalse(mk3.nodeExists("/test/mk21",b3));
  b3=mk3.rebase(b3,base3);
  mk2.commit("/","+\"test/mk22\":{}",null,null);
  mk2.runBackgroundOperations();
  mk3.runBackgroundOperations();
  DocumentNodeState base=ns3.getNode("/",RevisionVector.fromString(base3));
  assertNotNull(base);
  NodeState branchHead=ns3.getNode("/",RevisionVector.fromString(b3));
  assertNotNull(branchHead);
  TrackingDiff diff=new TrackingDiff();
  branchHead.compareAgainstBaseState(base,diff);
  assertEquals(1,diff.added.size());
  assertEquals(Sets.newHashSet("/mk3"),diff.added);
  assertEquals(new HashSet<String>(),diff.deleted);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fromExternalChange() throws Exception {
  final List<DocumentNodeState> rootStates1=Lists.newArrayList();
  DocumentNodeStore ns1=createMK(1,0).getNodeStore();
  ns1.addObserver(new Observer(){
    @Override public void contentChanged(    @Nonnull NodeState root,    @Nullable CommitInfo info){
      rootStates1.add((DocumentNodeState)root);
    }
  }
);
  final List<DocumentNodeState> rootStates2=Lists.newArrayList();
  DocumentNodeStore ns2=createMK(2,0).getNodeStore();
  ns2.addObserver(new Observer(){
    @Override public void contentChanged(    @Nonnull NodeState root,    @Nullable CommitInfo info){
      rootStates2.add((DocumentNodeState)root);
    }
  }
);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  rootStates1.clear();
  rootStates2.clear();
  NodeBuilder builder=ns1.getRoot().builder();
  builder.child("foo");
  merge(ns1,builder);
  assertEquals(1,rootStates1.size());
  assertEquals(0,rootStates2.size());
  assertFalse(rootStates1.get(0).isFromExternalChange());
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  assertEquals(1,rootStates1.size());
  assertEquals(1,rootStates2.size());
  assertTrue(rootStates2.get(0).isFromExternalChange());
  NodeState foo=rootStates2.get(0).getChildNode("foo");
  assertTrue(foo instanceof DocumentNodeState);
  assertTrue(((DocumentNodeState)foo).isFromExternalChange());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void threeNodes() throws Exception {
  DocumentMK mk1=createMK(1,0);
  DocumentMK mk2=createMK(2,0);
  DocumentMK mk3=createMK(3,0);
  mk1.commit("/","+\"test\":{}",null,null);
  mk2.commit("/","+\"a\":{}",null,null);
  mk3.commit("/","+\"b\":{}",null,null);
  mk2.backgroundWrite();
  mk2.backgroundRead();
  mk3.backgroundWrite();
  mk3.backgroundRead();
  mk1.backgroundWrite();
  mk1.backgroundRead();
  mk2.backgroundWrite();
  mk2.backgroundRead();
  mk3.backgroundWrite();
  mk3.backgroundRead();
  mk2.commit("/","^\"test/x\":1",null,null);
  String n3=mk3.getNodes("/test",mk3.getHeadRevision(),0,0,10,null);
  assertEquals("{\":childNodeCount\":0}",n3);
  mk3.commit("/","^\"test/y\":2",null,null);
  mk3.backgroundWrite();
  mk3.backgroundRead();
  mk1.backgroundWrite();
  mk1.backgroundRead();
  String r1=mk1.getHeadRevision();
  String n1=mk1.getNodes("/test",r1,0,0,10,null);
  assertEquals("{\"y\":2,\":childNodeCount\":0}",n1);
  mk2.backgroundWrite();
  mk2.backgroundRead();
  mk1.backgroundWrite();
  mk1.backgroundRead();
  String r1b=mk1.getHeadRevision();
  String n1b=mk1.getNodes("/test",r1b,0,0,10,null);
  JSONParser parser=new JSONParser();
  JSONObject obj=(JSONObject)parser.parse(n1b);
  assertEquals(1L,obj.get("x"));
  assertEquals(2L,obj.get("y"));
  assertEquals(0L,obj.get(":childNodeCount"));
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void clusterNodeInfoLease() throws InterruptedException {
  MemoryDocumentStore store=new MemoryDocumentStore();
  ClusterNodeInfo c1, c2;
  c1=ClusterNodeInfo.getInstance(store,"m1",null);
  assertEquals(1,c1.getId());
  c1.setLeaseTime(1);
  c1.setLeaseUpdateInterval(0);
  c1.renewLease();
  Thread.sleep(10);
  c2=ClusterNodeInfo.getInstance(store,"m1",null);
  assertEquals(1,c2.getId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterTest2 </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void twoNodes() throws Exception {
  MemoryDocumentStore ds=new MemoryDocumentStore();
  MemoryBlobStore bs=new MemoryBlobStore();
  DocumentMK.Builder builder;
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs);
  DocumentMK mk1=builder.setClusterId(1).open();
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs);
  DocumentMK mk2=builder.setClusterId(2).open();
  mk1.commit("/","+\"test\":{\"x\": 1}",null,null);
  mk1.backgroundWrite();
  mk2.backgroundRead();
  String b1=mk2.branch(mk2.getHeadRevision());
  mk2.commit("/","-\"test\"",b1,null);
  String b2=mk2.branch(mk2.getHeadRevision());
  String b2b=mk2.commit("/","-\"test\"",b2,null);
  mk2.merge(b2b,null);
  mk2.backgroundWrite();
  mk1.backgroundRead();
  mk1.commit("/","+\"test\":{\"x\": 1}",null,null);
  mk1.backgroundWrite();
  mk2.backgroundRead();
  String n1=mk1.getNodes("/test",mk1.getHeadRevision(),0,0,10,null);
  String n2=mk2.getNodes("/test",mk2.getHeadRevision(),0,0,10,null);
  assertEquals("{\"x\":1,\":childNodeCount\":0}",n1);
  assertEquals("{\"x\":1,\":childNodeCount\":0}",n2);
  mk1.dispose();
  mk2.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterViewDocumentTest </h4><pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHistory() throws Exception {
  final int localClusterId=1;
  final DocumentNodeStore ns=createMK(localClusterId).nodeStore;
  final Set<Integer> activeIds=new HashSet<Integer>();
  activeIds.add(localClusterId);
  ClusterViewDocument.readOrUpdate(ns,activeIds,null,null);
  final int LOOP_CNT=100;
  for (int i=0; i < LOOP_CNT; i++) {
    activeIds.add(i + 2);
    ClusterViewDocument result=ClusterViewDocument.readOrUpdate(ns,activeIds,null,null);
    assertNotNull(result);
    assertEquals(i + 2,result.getActiveIds().size());
    if (i < 10) {
      assertEquals(i + 1,result.getHistory().size());
    }
 else {
      assertTrue(result.getHistory().size() <= ClusterViewDocument.HISTORY_LIMIT);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstructor(){
  ClusterViewDocument doc=new ClusterViewBuilder(1,"2",3).active(3,4).asDoc();
  assertNotNull(doc);
  assertEquals("2",doc.getClusterViewId());
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(0,doc.getInactiveIds().size());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(3));
  assertTrue(doc.getActiveIds().contains(4));
  doc=new ClusterViewBuilder(1,"2",3).active(3,4).backlogs(5).inactive(5,6).asDoc();
  assertNotNull(doc);
  assertEquals("2",doc.getClusterViewId());
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(2,doc.getInactiveIds().size());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(3));
  assertTrue(doc.getActiveIds().contains(4));
  assertTrue(doc.getInactiveIds().contains(5));
  assertTrue(doc.getInactiveIds().contains(6));
  doc=new ClusterViewBuilder(11,"x",4).active(3,4,5).recovering(6).inactive(7,8).asDoc();
  assertNotNull(doc);
  assertEquals(11,doc.getViewSeqNum());
  assertEquals("x",doc.getClusterViewId());
  assertEquals(1,doc.getRecoveringIds().size());
  assertEquals(2,doc.getInactiveIds().size());
  assertEquals(3,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(3));
  assertTrue(doc.getActiveIds().contains(4));
  assertTrue(doc.getActiveIds().contains(5));
  assertTrue(doc.getRecoveringIds().contains(6));
  assertTrue(doc.getInactiveIds().contains(7));
  assertTrue(doc.getInactiveIds().contains(8));
}

</code></pre>

<br>
<pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testArrayToCsv() throws Throwable {
  assertNull(callArrayToCsv(null));
  assertNull(callArrayToCsv(new Integer[0]));
  assertEquals("101",callArrayToCsv(new Integer[]{101}));
  assertEquals("101,102",callArrayToCsv(new Integer[]{101,102}));
  assertEquals("101,102,103",callArrayToCsv(new Integer[]{101,102,103}));
  assertEquals("101,102,103,104",callArrayToCsv(new Integer[]{101,102,103,104}));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadUpdate() throws Exception {
  final int localClusterId=11;
  final DocumentNodeStore ns=createMK(localClusterId).nodeStore;
  try {
    ClusterViewDocument.readOrUpdate(ns,null,null,null);
    fail("should complain");
  }
 catch (  Exception ok) {
  }
  try {
    ClusterViewDocument.readOrUpdate(ns,new HashSet<Integer>(),null,null);
    fail("should complain");
  }
 catch (  Exception ok) {
  }
  Set<Integer> activeIds=new HashSet<Integer>();
  activeIds.add(2);
  Set<Integer> recoveringIds=null;
  Set<Integer> inactiveIds=null;
  ClusterViewDocument doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  final String id=doc.getClusterViewId();
  assertTrue(id != null && id.length() > 0);
  String createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  long createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(1,doc.getViewSeqNum());
  assertEquals(1,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(0,doc.getInactiveIds().size());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(1,doc.getViewSeqNum());
  activeIds.add(3);
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(id,doc.getClusterViewId());
  createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(2,doc.getViewSeqNum());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertTrue(doc.getActiveIds().contains(3));
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(0,doc.getInactiveIds().size());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(2,doc.getViewSeqNum());
  recoveringIds=new HashSet<Integer>();
  recoveringIds.add(4);
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(id,doc.getClusterViewId());
  createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(3,doc.getViewSeqNum());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertTrue(doc.getActiveIds().contains(3));
  assertEquals(1,doc.getRecoveringIds().size());
  assertTrue(doc.getRecoveringIds().contains(4));
  assertEquals(0,doc.getInactiveIds().size());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(3,doc.getViewSeqNum());
  recoveringIds=new HashSet<Integer>();
  inactiveIds=new HashSet<Integer>();
  inactiveIds.add(4);
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(id,doc.getClusterViewId());
  createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(4,doc.getViewSeqNum());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertTrue(doc.getActiveIds().contains(3));
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(1,doc.getInactiveIds().size());
  assertTrue(doc.getInactiveIds().contains(4));
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(4,doc.getViewSeqNum());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(4,doc.getViewSeqNum());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(4,doc.getViewSeqNum());
}

</code></pre>

<br>
<pre class="type-13 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetToCsv() throws Throwable {
  assertNull(callSetToCsv(null));
  assertNull(callSetToCsv(new HashSet<Integer>()));
  Set<Integer> input=new TreeSet<Integer>();
  StringBuffer sb=new StringBuffer();
  for (int i=100; i < 199; i++) {
    input.add(i);
    if (sb.length() != 0) {
      sb.append(",");
    }
    sb.append(String.valueOf(i));
    assertEquals(sb.toString(),callSetToCsv(input));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterViewTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWithRecoveringAndBacklog() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,2);
  ClusterView view=builder.active(2,3).recovering(4).inactive(5,6).backlogs(5).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("2",props.get("me"));
  assertEquals("false",props.get("final"));
  assertEquals(asJsonArray(2,3),props.get("active"));
  assertEquals(asJsonArray(4,5),props.get("deactivating"));
  assertEquals(asJsonArray(6),props.get("inactive"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneActiveOneInactive() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,2);
  ClusterView view=builder.active(2).inactive(3).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("2",props.get("me"));
  assertEquals(asJsonArray(2),props.get("active"));
  assertEquals(asJsonArray(),props.get("deactivating"));
  assertEquals(asJsonArray(3),props.get("inactive"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneActiveSeveralInactive() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,2);
  ClusterView view=builder.active(2).inactive(3,4,5,6).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("true",props.get("final"));
  assertEquals("2",props.get("me"));
  assertEquals(asJsonArray(2),props.get("active"));
  assertEquals(asJsonArray(),props.get("deactivating"));
  assertEquals(asJsonArray(3,4,5,6),props.get("inactive"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneActiveOnly() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,21);
  ClusterView view=builder.active(21).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("21",props.get("me"));
  assertEquals(asJsonArray(21),props.get("active"));
  assertEquals(asJsonArray(),props.get("deactivating"));
  assertEquals(asJsonArray(),props.get("inactive"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSeveralActiveOneInactive() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,2);
  ClusterView view=builder.active(2,5,6).inactive(3).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("true",props.get("final"));
  assertEquals("2",props.get("me"));
  assertEquals(asJsonArray(2,5,6),props.get("active"));
  assertEquals(asJsonArray(),props.get("deactivating"));
  assertEquals(asJsonArray(3),props.get("inactive"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWithRecoveringOnly() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,2);
  ClusterView view=builder.active(2,3).recovering(4).inactive(5,6).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("true",props.get("final"));
  assertEquals("2",props.get("me"));
  assertEquals(asJsonArray(2,3),props.get("active"));
  assertEquals(asJsonArray(4),props.get("deactivating"));
  assertEquals(asJsonArray(5,6),props.get("inactive"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CollisionTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void purge() throws Exception {
  DocumentMK mk1=builderProvider.newBuilder().setClusterId(1).open();
  DocumentNodeStore ns1=mk1.getNodeStore();
  DocumentStore store=ns1.getDocumentStore();
  DocumentMK mk2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).open();
  DocumentNodeStore ns2=mk2.getNodeStore();
  createCollision(mk1);
  createCollision(mk2);
  String id=getIdFromPath("/");
  assertEquals(2,store.find(NODES,id).getLocalMap(COLLISIONS).size());
  ns1.dispose();
  mk1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).open();
  ns1=mk1.getNodeStore();
  assertEquals(1,store.find(NODES,id).getLocalMap(COLLISIONS).size());
  ns1.dispose();
  ns2.dispose();
  mk2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).open();
  ns2=mk2.getNodeStore();
  assertEquals(0,store.find(NODES,id).getLocalMap(COLLISIONS).size());
  ns2.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CollisionWithSplitTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void collisionAfterSplit() throws Exception {
  final int NUM_NODES=10;
  NodeBuilder b1=ns1.getRoot().builder();
  for (int i=0; i < NUM_NODES; i++) {
    b1.child("node-" + i);
  }
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  Revision conflictRev=null;
  for (int i=0; i < NUM_NODES; i++) {
    b1=ns1.getRoot().builder();
    b1.setProperty("p",i);
    b1.child("node-" + i).remove();
    merge(ns1,b1);
    if (i == 0) {
      conflictRev=ns1.getHeadRevision().getRevision(ns1.getClusterId());
    }
  }
  assertNotNull(conflictRev);
  DocumentStore store=ns1.getDocumentStore();
  NodeDocument doc=Utils.getRootDocument(store);
  List<UpdateOp> ops=SplitOperations.forDocument(doc,ns1,ns1.getHeadRevision(),NUM_NODES);
  assertFalse(ops.isEmpty());
  for (  UpdateOp op : ops) {
    if (!op.isNew() || !store.create(NODES,Collections.singletonList(op))) {
      store.createOrUpdate(NODES,op);
    }
  }
  String id=Utils.getIdFromPath("/node-0");
  UpdateOp op=new UpdateOp(id,false);
  Revision ourRev=ns2.newRevision();
  op.setMapEntry("p",ourRev,"v");
  NodeDocument.setModified(op,ourRev);
  NodeDocument.setCommitRoot(op,ourRev,0);
  ns2.getDocumentStore().findAndUpdate(NODES,op);
  doc=ns2.getDocumentStore().find(NODES,id);
  assertTrue(doc.getLocalCommitRoot().containsKey(conflictRev));
  Collision c=new Collision(doc,conflictRev,op,ourRev);
  assertEquals("Collision must match our revision (" + ourRev + "). "+ "The conflict revision "+ conflictRev+ " is already committed.",ourRev,c.mark(ns2.getDocumentStore()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CommitQueueTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void suspendUntil() throws Exception {
  final AtomicReference<RevisionVector> headRevision=new AtomicReference<RevisionVector>();
  RevisionContext context=new DummyRevisionContext(){
    @Nonnull @Override public RevisionVector getHeadRevision(){
      return headRevision.get();
    }
  }
;
  headRevision.set(new RevisionVector(context.newRevision()));
  final CommitQueue queue=new CommitQueue(context);
  final Revision newHeadRev=context.newRevision();
  final Set<Revision> revisions=queue.createRevisions(10);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      queue.suspendUntilAll(union(of(newHeadRev),revisions));
    }
  }
);
  t.start();
  for (int i=0; i < 100; i++) {
    if (queue.numSuspendedThreads() > 0) {
      break;
    }
    Thread.sleep(10);
  }
  assertEquals(1,queue.numSuspendedThreads());
  queue.headRevisionChanged();
  assertEquals(1,queue.numSuspendedThreads());
  headRevision.set(new RevisionVector(newHeadRev));
  queue.headRevisionChanged();
  assertEquals(1,queue.numSuspendedThreads());
  for (  Revision rev : revisions) {
    queue.canceled(rev);
  }
  assertEquals(0,queue.numSuspendedThreads());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void concurrentSuspendUntil() throws Exception {
  final AtomicReference<RevisionVector> headRevision=new AtomicReference<RevisionVector>();
  RevisionContext context=new DummyRevisionContext(){
    @Nonnull @Override public RevisionVector getHeadRevision(){
      return headRevision.get();
    }
  }
;
  headRevision.set(new RevisionVector(context.newRevision()));
  List<Thread> threads=new ArrayList<Thread>();
  List<Revision> allRevisions=new ArrayList<Revision>();
  final CommitQueue queue=new CommitQueue(context);
  for (int i=0; i < 10; i++) {
    final Set<Revision> revisions=new HashSet<Revision>();
    for (int j=0; j < 10; j++) {
      Revision r=queue.createRevision();
      revisions.add(r);
      allRevisions.add(r);
    }
    Thread t=new Thread(new Runnable(){
      public void run(){
        queue.suspendUntilAll(revisions);
      }
    }
);
    threads.add(t);
    t.start();
  }
  for (int i=0; i < 100; i++) {
    if (queue.numSuspendedThreads() == 10) {
      break;
    }
    Thread.sleep(10);
  }
  assertEquals(10,queue.numSuspendedThreads());
  Collections.shuffle(allRevisions);
  for (  Revision r : allRevisions) {
    queue.canceled(r);
    Thread.sleep(10);
  }
  for (int i=0; i < 100; i++) {
    if (queue.numSuspendedThreads() == 0) {
      break;
    }
    Thread.sleep(10);
  }
  assertEquals(0,queue.numSuspendedThreads());
  for (  Thread t : threads) {
    t.join(1000);
    assertFalse(t.isAlive());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CommitTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testModifiedTime(){
  assertEquals(10,NodeDocument.getModifiedInSecs(10000));
  assertEquals(10,NodeDocument.getModifiedInSecs(10003));
  assertEquals(10,NodeDocument.getModifiedInSecs(12000));
  assertEquals(15,NodeDocument.getModifiedInSecs(15000));
  assertEquals(15,NodeDocument.getModifiedInSecs(15006));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ConcurrentDocumentStoreTest </h4><pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConcurrentCreateOrUpdate() throws Exception {
  int workers=8;
  String id=this.getClass().getName() + ".testConcurrentCreateOrUpdate";
  super.removeMe.add(id);
  List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  List<Thread> worker=new ArrayList<Thread>();
  for (int i=0; i < workers; i++) {
    worker.add(new Thread(new Worker(id,true,exceptions)));
  }
  for (  Thread t : worker) {
    t.start();
  }
  for (  Thread t : worker) {
    t.join();
  }
  for (  Exception e : exceptions) {
    fail(e.toString());
  }
  Document d=ds.find(Collection.NODES,id);
  String val=d.get("counter").toString();
  org.junit.Assert.assertEquals("counter property not updated as expected",Integer.toString(workers),val);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConcurrentUpdate() throws Exception {
  int workers=20;
  String id=this.getClass().getName() + ".testConcurrentUpdate";
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("thread",Thread.currentThread().getName());
  up.set("counter",0L);
  ds.create(Collection.NODES,Collections.singletonList(up));
  super.removeMe.add(id);
  List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  List<Thread> worker=new ArrayList<Thread>();
  for (int i=0; i < workers; i++) {
    worker.add(new Thread(new Worker(id,false,exceptions)));
  }
  for (  Thread t : worker) {
    t.start();
  }
  for (  Thread t : worker) {
    t.join();
  }
  for (  Exception e : exceptions) {
    fail(e.toString());
  }
  Document d=ds.find(Collection.NODES,id);
  String val=d.get("counter").toString();
  org.junit.Assert.assertEquals("counter property not updated as expected",Integer.toString(workers),val);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ConflictExceptionTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void asCommitFailedException(){
  Revision r=Revision.newRevision(1);
  ConflictException e=new ConflictException("conflict",r);
  CommitFailedException cfe=e.asCommitFailedException();
  assertTrue(cfe instanceof FailedWithConflictException);
  FailedWithConflictException fwce=(FailedWithConflictException)cfe;
  assertEquals(CommitFailedException.MERGE,fwce.getType());
  assertEquals(Collections.singleton(r),fwce.getConflictRevisions());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void type(){
  ConflictException e=new ConflictException("conflict");
  CommitFailedException cfe=e.asCommitFailedException();
  assertEquals(CommitFailedException.MERGE,cfe.getType());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKBranchMergeTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * This is a test to make sure properties are properly escaped in merge.
 */
@Test public void oneBranchAddPropertyRoot(){
  String branchRev=mk.branch(null);
  branchRev=setProp(branchRev,"/jcr:primaryType","nam:rep:root");
  assertPropExists(branchRev,"/","jcr:primaryType");
  branchRev=mk.merge(branchRev,"");
  assertPropExists(branchRev,"/","jcr:primaryType");
  String mergedNode=mk.getNodes("/",branchRev,0,0,-1,null);
  String expectedNode="{\"jcr:primaryType\":\"nam:rep:root\",\":childNodeCount\":0}";
  assertEquals("Wrong property value after merge",expectedNode,mergedNode);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKBranchTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void branchIsolation2() throws Exception {
  String filter="{\"properties\":[\"*\",\":hash\",\":id\"]}";
  String baseRev=mk.commit("/","+\"test\":{\"node\":{}}",null,null);
  String branchRev=mk.branch(baseRev);
  String rev1=mk.commit("/test/node","+\"trunk-node\":{}",null,null);
  mk.commit("/test/node","+\"branch-node\":{}",branchRev,null);
  String rev2=mk.commit("/","+\"other\":{}",null,null);
  String json=mk.getNodes("/test",rev2,0,0,1000,filter);
  JSONObject test=parseJSONObject(json);
  String id=resolveValue(test,":id").toString();
  String revision=id.split("@")[1];
  assertEquals(rev1,revision);
  assertNodesExist(revision,"/test/node/trunk-node");
  assertNodesNotExist(revision,"/test/node/branch-node");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKDiffTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void diffMergedRevision(){
  mk.commit("/","+\"test\":{}",null,null);
  String before=mk.getHeadRevision();
  String b=mk.branch(null);
  b=mk.commit("/test","^\"p\":1",b,null);
  String after=mk.merge(b,null);
  String jsop=mk.diff(before,after,"/",0).trim();
  assertEquals("^\"/test\":{}",jsop);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKGetHeadRevisionTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simple() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  String rev1=scenario.create();
  String rev2=mk.getHeadRevision();
  assertEquals(rev1,rev2);
  String rev3=scenario.deleteA();
  assertFalse(rev3.equals(rev2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKRebaseTest </h4><pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseChangedChangedProperty(){
  mk.commit("","+\"/x\":{\"y\":{\"p\":42}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":41",branch,null);
  mk.commit("","^\"/x/y/p\":99",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":99"));
  String conflict=mk.getNodes("/x/y/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"changeChangedProperty\":{\"p\":41,\":childNodeCount\":0}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseRemoveRemovedProperty(){
  mk.commit("","+\"/x\":{\"y\":{\"p\":42}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":null",branch,null);
  mk.commit("","^\"/x/y/p\":null",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertFalse(branchNode.contains("\"p\":42"));
  String conflict=mk.getNodes("/x/y/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"deleteDeletedProperty\":{\"p\":42,\":childNodeCount\":0}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fastForwardRebase(){
  String branch=mk.branch(null);
  branch=mk.commit("","+\"/a\":{}",branch,null);
  String rebased=mk.rebase(branch,null);
  assertEquals(branch,rebased);
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void rebaseWithoutChanges(){
  String branch=mk.branch(null);
  String rebased=mk.rebase(branch,null);
  assertEquals(branch,rebased);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseRemoveRemovedNode(){
  mk.commit("","+\"/x\":{\"y\":{}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","-\"/x/y\"",branch,null);
  mk.commit("","-\"/x/y\"",null,null);
  branch=mk.rebase(branch,null);
  assertFalse(mk.nodeExists("/x/y",branch));
  String conflict=mk.getNodes("/x/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"deleteDeletedNode\":{\":childNodeCount\":1,\"y\":{\":childNodeCount\":0}}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void rebaseMultiple(){
  String branch=mk.branch(null);
  branch=mk.commit("/","+\"x\":{}",branch,null);
  String head=mk.commit("/","+\"y\":{}",null,null);
  branch=mk.rebase(branch,head);
  assertEquals("repeated rebase with same head must not create new branch revision",branch,mk.rebase(branch,head));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rebaseEmptyBranch(){
  String branch=mk.branch(null);
  String trunk=mk.commit("","+\"/a\":{}",null,null);
  String rebased=mk.rebase(branch,null);
  JSONObject json=parseJSONObject(mk.getNodes("/",rebased,0,0,-1,null));
  assertPropertyValue(json,":childNodeCount",1L);
  assertNotNull(json.get("a"));
  json=parseJSONObject(mk.getNodes("/",null,0,0,-1,null));
  assertPropertyValue(json,":childNodeCount",1L);
  assertNotNull(json.get("a"));
  assertEquals(trunk,mk.getHeadRevision());
  assertFalse(trunk.equals(rebased));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseAddExistingNode(){
  mk.commit("","+\"/x\":{}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","+\"/x/a\":{}",branch,null);
  mk.commit("","+\"/x/a\":{\"b\":{}}",null,null);
  branch=mk.rebase(branch,null);
  assertTrue(mk.nodeExists("/x/a/b",branch));
  String conflict=mk.getNodes("/x/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"addExistingNode\":{\":childNodeCount\":1,\"a\":{\":childNodeCount\":0}}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseChangeRemovedProperty(){
  mk.commit("","+\"/x\":{\"y\":{\"p\":42}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":99",branch,null);
  mk.commit("","^\"/x/y/p\":null",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertFalse(branchNode.contains("\"p\":99"));
  String conflict=mk.getNodes("/x/y/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"changeDeletedProperty\":{\"p\":99,\":childNodeCount\":0}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseChangeRemovedNode(){
  mk.commit("","+\"/x\":{\"y\":{}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/p\":42",branch,null);
  mk.commit("","-\"/x\"",null,null);
  branch=mk.rebase(branch,null);
  assertFalse(mk.nodeExists("/x",branch));
  String conflict=mk.getNodes("/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"changeDeletedNode\":{\":childNodeCount\":1,\"x\":{\"p\":42,\"" + ":childNodeCount\":1,\"y\":{\":childNodeCount\":0}}}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseAddExistingProperty(){
  mk.commit("","+\"/x\":{\"y\":{}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":42 ^\"/x/y/q\":42",branch,null);
  mk.commit("","^\"/x/y/p\":99 ^\"/x/y/q\":99",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":99"));
  String conflict=mk.getNodes("/x/y/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"addExistingProperty\":{\"q\":42,\"p\":42,\":childNodeCount\":0}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseRemoveChangedProperty(){
  mk.commit("","+\"/x\":{\"y\":{\"p\":42}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":null",branch,null);
  mk.commit("","^\"/x/y/p\":99",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":99"));
  String conflict=mk.getNodes("/x/y/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"deleteChangedProperty\":{\"p\":42,\":childNodeCount\":0}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseRemoveChangedNode(){
  mk.commit("","+\"/x\":{\"y\":{}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","-\"/x/y\"",branch,null);
  mk.commit("","^\"/x/y/p\":42",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":42"));
  String conflict=mk.getNodes("/x/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"deleteChangedNode\":{\":childNodeCount\":1,\"y\":{\":childNodeCount\":0}}}",conflict);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKResetTest </h4><pre class="type-9 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void resetMultipleCommits(){
  DocumentStore store=mk.getDocumentStore();
  addNodes(null,"/foo");
  String b0=mk.branch(null);
  String b1=mk.commit("","^\"/foo/p1\":1",b0,null);
  String b2=mk.commit("","^\"/foo/p2\":1",b1,null);
  String b3=mk.commit("","^\"/foo/p3\":1",b2,null);
  mk.commit("","^\"/foo/p2\":1^\"/foo/p3\":1",null,null);
  NodeDocument rootDoc=store.find(NODES,getIdFromPath("/"));
  assertNotNull(rootDoc);
  Map<Revision,String> collisions=rootDoc.getValueMap(COLLISIONS);
  assertEquals(2,collisions.size());
  assertTrue(collisions.containsKey(Revision.fromString(b2).asTrunkRevision()));
  assertTrue(collisions.containsKey(Revision.fromString(b3).asTrunkRevision()));
  try {
    mk.merge(b3,null);
    fail("merge with conflict must fail");
  }
 catch (  DocumentStoreException e) {
  }
  String b4=mk.reset(b3,b1);
  String b5=mk.commit("","^\"/foo/p4\":1",b4,null);
  rootDoc=store.find(NODES,getIdFromPath("/"));
  assertNotNull(rootDoc);
  collisions=rootDoc.getValueMap(COLLISIONS);
  assertEquals(0,collisions.size());
  String rev=mk.merge(b5,null);
  assertPropExists(rev,"/foo","p1");
  assertPropExists(rev,"/foo","p2");
  assertPropExists(rev,"/foo","p3");
  assertPropExists(rev,"/foo","p4");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentNodeStateTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getMemory(){
  DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  RevisionVector rv=new RevisionVector(Revision.newRevision(1));
  DocumentNodeState state=new DocumentNodeState(store,"/foo",rv);
  assertEquals(232,state.getMemory());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentNodeStoreDiffTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void diff() throws Exception {
  DocumentNodeStore store=mk.getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("other");
  for (int i=0; i < 10; i++) {
    builder.child("test").child("folder").child("node-" + i);
  }
  merge(store,builder);
  for (int i=0; i < 50; i++) {
    builder=store.getRoot().builder();
    builder.child("other").child("node-" + i);
    merge(store,builder);
  }
  NodeState before=store.getRoot();
  builder=store.getRoot().builder();
  builder.child("test").child("folder").child("node-x").child("child");
  NodeState after=merge(store,builder);
  for (int i=0; i < 10; i++) {
    builder=store.getRoot().builder();
    builder.child("test").child("folder").child("node-" + i).child("child");
    merge(store,builder);
  }
  Iterable<CacheStats> stats=store.getDiffCacheStats();
  for (  CacheStats cs : stats) {
    cs.resetStats();
  }
  Diff.perform(before,after);
  for (  CacheStats cs : stats) {
    assertEquals(0,cs.getMissCount());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentNodeStoreIT </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void modifiedResetWithDiff() throws Exception {
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  Revision.setClock(clock);
  DocumentStore docStore=new TimingDocumentStoreWrapper(ds){
    @Override public void dispose(){
    }
  }
;
  DocumentNodeStore ns1=new DocumentMK.Builder().setDocumentStore(docStore).setClusterId(1).setAsyncDelay(0).clock(clock).setDiffCache(AmnesiaDiffCache.INSTANCE).getNodeStore();
  NodeBuilder builder1=ns1.getRoot().builder();
  builder1.child("node");
  removeMe.add(getIdFromPath("/node"));
  for (int i=0; i < DocumentMK.MANY_CHILDREN_THRESHOLD; i++) {
    builder1.child("node-" + i);
    removeMe.add(getIdFromPath("/node/node-" + i));
  }
  ns1.merge(builder1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=new DocumentMK.Builder().setDocumentStore(docStore).setClusterId(2).setAsyncDelay(0).clock(clock).getNodeStore();
  NodeBuilder builder2=ns2.getRoot().builder();
  builder2.child("node").child("child-a");
  removeMe.add(getIdFromPath("/node/child-a"));
  ns2.merge(builder2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  clock.waitUntil(System.currentTimeMillis() + SECONDS.toMillis(MODIFIED_IN_SECS_RESOLUTION + 1));
  builder1=ns1.getRoot().builder();
  builder1.child("node").child("child-b");
  removeMe.add(getIdFromPath("/node/child-b"));
  ns1.merge(builder1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  DocumentNodeState root1=ns1.getRoot();
  builder1=root1.builder();
  builder1.child("node").child("child-c");
  removeMe.add(getIdFromPath("/node/child-c"));
  ns1.merge(builder1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  DocumentNodeState root2=ns1.getRoot();
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  JsopDiff diff=new JsopDiff("",0);
  ns1.compare(root2,root1,diff);
  assertEquals("^\"node\":{}",diff.toString());
  ns1.dispose();
  ns2.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentNodeStoreTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void concurrentChildOperations() throws Exception {
  Clock clock=new Clock.Virtual();
  Revision.setClock(clock);
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setAsyncDelay(0).clock(clock).setDocumentStore(store).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setAsyncDelay(0).clock(clock).setDocumentStore(store).setClusterId(2).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  NodeBuilder node=b1.child("foo").child("bar");
  node.child("child-0");
  node.child("child-1");
  node.child("child-2");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  b1=ns1.getRoot().builder();
  b1.child("foo").child("bar").getChildNode("child-0").remove();
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("foo").child("bar").getChildNode("child-1").remove();
  merge(ns2,b2);
  List<ChildNodeEntry> children=Lists.newArrayList(ns2.getRoot().getChildNode("foo").getChildNode("bar").getChildNodeEntries());
  assertEquals(2,Iterables.size(children));
  RevisionVector invalidate=null;
  for (  ChildNodeEntry entry : children) {
    if (entry.getName().equals("child-0")) {
      invalidate=asDocumentNodeState(entry.getNodeState()).getRevision();
    }
  }
  assertNotNull(invalidate);
  ns2.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + TimeUnit.HOURS.toMillis(2));
  ns1.getVersionGarbageCollector().gc(1,TimeUnit.HOURS);
  ns2.invalidateNodeCache("/foo/bar/child-0",invalidate);
  children=Lists.newArrayList(ns2.getRoot().getChildNode("foo").getChildNode("bar").getChildNodeEntries());
  assertEquals(1,Iterables.size(children));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ignoreUncommitted() throws Exception {
  final AtomicLong numPreviousFinds=new AtomicLong();
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      if (Utils.getPathFromId(key).startsWith("p")) {
        numPreviousFinds.incrementAndGet();
      }
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore ns=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  String id=Utils.getIdFromPath("/test");
  NodeBuilder b=ns.getRoot().builder();
  b.child("test").setProperty("p","a");
  merge(ns,b);
  NodeDocument doc;
  int i=0;
  do {
    b=ns.getRoot().builder();
    b.child("test").setProperty("q",i++);
    merge(ns,b);
    doc=store.find(NODES,id);
    assertNotNull(doc);
    if (i % 100 == 0) {
      ns.runBackgroundOperations();
    }
  }
 while (doc.getPreviousRanges().isEmpty());
  Revision r=ns.newRevision();
  UpdateOp op=new UpdateOp(id,false);
  NodeDocument.setCommitRoot(op,r,0);
  op.setMapEntry("p",r,"b");
  assertNotNull(store.findAndUpdate(NODES,op));
  doc=store.find(NODES,id);
  numPreviousFinds.set(0);
  doc.getNodeAtRevision(ns,ns.getHeadRevision(),null);
  assertEquals(0,numPreviousFinds.get());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNewestRevision2() throws Exception {
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(1).getNodeStore();
  ns1.getRoot();
  Revision r1=ns1.getHeadRevision().getRevision(ns1.getClusterId());
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(2).getNodeStore();
  ns2.getRoot();
  NodeBuilder b1=ns1.getRoot().builder();
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    b1.setProperty("p",String.valueOf(i));
    ns1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  ns1.runBackgroundOperations();
  NodeDocument doc=docStore.find(NODES,Utils.getIdFromPath("/"));
  assertNotNull(doc);
  Revision newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),Revision.newRevision(ns2.getClusterId()),null,Sets.<Revision>newHashSet());
  assertEquals(r1,newest);
}

</code></pre>

<br>
<pre class="type-13 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void commitHookChangesOnBranch() throws Exception {
  final int NUM_NODES=DocumentRootBuilder.UPDATE_LIMIT / 2;
  final int NUM_PROPS=10;
  DocumentNodeStore ns=builderProvider.newBuilder().getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  for (int i=0; i < NUM_NODES; i++) {
    NodeBuilder c=builder.child("n" + i);
    for (int j=0; j < NUM_PROPS; j++) {
      c.setProperty("q" + j,"value");
      c.setProperty("p" + j,"value");
    }
  }
  try {
    ns.merge(builder,CompositeHook.compose(Arrays.asList(new TestHook("p"),new TestHook("q"),FAILING_HOOK)),CommitInfo.EMPTY);
    fail("merge must fail and reset changes done by commit hooks");
  }
 catch (  CommitFailedException e) {
  }
  for (int i=0; i < NUM_NODES; i++) {
    NodeBuilder c=builder.getChildNode("n" + i);
    assertTrue(c.exists());
    for (int j=0; j < NUM_PROPS; j++) {
      PropertyState p=c.getProperty("p" + j);
      assertNotNull(p);
      assertEquals("value",p.getValue(Type.STRING));
      p=c.getProperty("q" + j);
      assertNotNull(p);
      assertEquals("value",p.getValue(Type.STRING));
    }
  }
  ns.merge(builder,CompositeHook.compose(Arrays.<CommitHook>asList(new TestHook("p"),new TestHook("q"))),CommitInfo.EMPTY);
  builder=ns.getRoot().builder();
  for (int i=0; i < NUM_NODES; i++) {
    NodeBuilder c=builder.getChildNode("n" + i);
    assertTrue(c.exists());
    for (int j=0; j < NUM_PROPS; j++) {
      PropertyState p=c.getProperty("p" + j);
      assertNotNull(p);
      assertEquals("test",p.getValue(Type.STRING));
      p=c.getProperty("q" + j);
      assertNotNull(p);
      assertEquals("test",p.getValue(Type.STRING));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dispose() throws CommitFailedException, InterruptedException {
  final BlockingQueue<String> updates=new ArrayBlockingQueue<String>(1);
  final AtomicBoolean throttleUpdates=new AtomicBoolean(true);
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>void update(    Collection<T> collection,    List<String> keys,    UpdateOp updateOp){
      if (throttleUpdates.get()) {
        for (        String k : keys) {
          try {
            updates.put(k);
          }
 catch (          InterruptedException e) {
            throw new RuntimeException(e);
          }
        }
      }
      super.update(collection,keys,updateOp);
    }
  }
;
  final DocumentNodeStore store=builderProvider.newBuilder().setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  updates.clear();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").child("node");
  merge(store,builder);
  builder=store.getRoot().builder();
  builder.child("test").child("node").child("child-1");
  merge(store,builder);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      store.dispose();
    }
  }
);
  t.start();
  String p=updates.take();
  assertEquals("2:/test/node",p);
  assertTrue(t.isAlive());
  for (; ; ) {
    if (updates.peek() != null) {
      break;
    }
  }
  try {
    builder=store.getRoot().builder();
    builder.child("test").child("node").child("child-2");
    merge(store,builder);
    fail("Merge must fail with CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
  while (t.isAlive()) {
    updates.poll(10,TimeUnit.MILLISECONDS);
  }
  updates.clear();
  throttleUpdates.set(false);
  DocumentNodeStore store2=builderProvider.newBuilder().setClusterId(2).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  LastRevRecoveryAgent agent=new LastRevRecoveryAgent(store2);
  if (agent.isRecoveryNeeded()) {
    agent.recover(1);
  }
  builder=store2.getRoot().builder();
  NodeBuilder test=builder.getChildNode("test");
  assertTrue(test.exists());
  NodeBuilder node=test.getChildNode("node");
  assertTrue(node.exists());
  if (!node.hasChildNode("child-2")) {
    node.child("child-2");
    merge(store2,builder);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rootRevision() throws Exception {
  DocumentNodeStore ns=builderProvider.newBuilder().getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.child("foo").child("child");
  builder.child("bar").child("child");
  merge(ns,builder);
  builder=ns.getRoot().builder();
  builder.child("foo").child("child").child("node");
  merge(ns,builder);
  RevisionVector head=ns.getHeadRevision();
  NodeState child=ns.getRoot().getChildNode("bar").getChildNode("child");
  assertTrue(child instanceof DocumentNodeState);
  DocumentNodeState state=(DocumentNodeState)child;
  assertEquals(head,state.getRootRevision());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void backgroundLeaseUpdateThread() throws Exception {
  int clusterId=-1;
  Random random=new Random();
  for (int i=0; i < 10; i++) {
    int id=random.nextInt(1000) + 1000;
    if (!backgroundLeaseUpdateThreadRunning(id)) {
      clusterId=id;
      break;
    }
  }
  assertNotEquals(-1,clusterId);
  DocumentNodeStore ns=builderProvider.newBuilder().setAsyncDelay(0).setClusterId(clusterId).getNodeStore();
  for (int i=0; i < 10; i++) {
    if (!backgroundLeaseUpdateThreadRunning(clusterId)) {
      Thread.sleep(100);
    }
  }
  assertTrue(backgroundLeaseUpdateThreadRunning(clusterId));
  assertEquals(clusterId,ns.getClusterId());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readFromPreviousDoc() throws CommitFailedException {
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns=builderProvider.newBuilder().setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.child("test").setProperty("prop","initial");
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns.dispose();
  ns=builderProvider.newBuilder().setClusterId(2).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  builder=ns.getRoot().builder();
  builder.child("test").setProperty("prop","value");
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  RevisionVector rev=ns.getHeadRevision();
  NodeDocument doc=docStore.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  DocumentNodeState state=doc.getNodeAtRevision(ns,rev,null);
  assertNotNull(state);
  assertTrue(state.hasProperty("prop"));
  assertEquals("value",state.getProperty("prop").getValue(Type.STRING));
  for (int i=0; i < NUM_REVS_THRESHOLD; i++) {
    builder=ns.getRoot().builder();
    builder.child("test").setProperty("prop","v-" + i);
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  ns.runBackgroundOperations();
  doc=docStore.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  state=doc.getNodeAtRevision(ns,rev,null);
  assertNotNull(state);
  assertTrue(state.hasProperty("prop"));
  assertEquals("value",state.getProperty("prop").getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void docChildCacheWithIncompatiblDocStoreSort() throws CommitFailedException {
  final Set<String> reads=Sets.newHashSet();
  final ConcurrentSkipListMap<String,NodeDocument> nodes=new ConcurrentSkipListMap<String,NodeDocument>(new Comparator<String>(){
    @Override public int compare(    String o1,    String o2){
      int ret=o1.compareTo(o2);
      if (o1.indexOf("child") > 0 && o2.indexOf("child") > 0) {
        ret=(-ret);
      }
      return ret;
    }
  }
);
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override @SuppressWarnings("unchecked") protected <T extends Document>ConcurrentSkipListMap<String,T> getMap(    Collection<T> collection){
      if (collection == Collection.NODES) {
        return (ConcurrentSkipListMap<String,T>)nodes;
      }
 else {
        return super.getMap(collection);
      }
    }
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      reads.add(key);
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore store=builderProvider.newBuilder().setUseSimpleRevision(true).setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder parentBuilder=builder.child("parent");
  int numChildren=DocumentNodeState.INITIAL_FETCH_SIZE - 2;
  for (int i=0; i < numChildren; i++) {
    parentBuilder.child("child" + (i + 1));
  }
  merge(store,builder);
  store.invalidateNodeChildrenCache();
  NodeState parentNodeState=store.getRoot().getChildNode("parent");
  Iterables.size(parentNodeState.getChildNodeEntries());
  reads.clear();
  NodeState nonExistingChild=parentNodeState.getChildNode("child501-non-existing-child");
  assertEquals("Fully cached entry in doc child cache should be able to find non existing children" + " even if doc store sort order is incompatible to that of Java",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
  store.invalidateNodeCache("/parent/child25",store.getHeadRevision());
  reads.clear();
  NodeState existingChild=parentNodeState.getChildNode("child25");
  assertTrue("Fully cached entry in doc child cache should be able to find existing children" + " even if doc store sort order is incompatible to that of Java",reads.size() > 0);
  assertTrue("Existing children should be reported as such",existingChild.exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rollback() throws Exception {
  final Map<Thread,Semaphore> locks=Collections.synchronizedMap(new HashMap<Thread,Semaphore>());
  final Semaphore created=new Semaphore(0);
  DocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>List<T> createOrUpdate(    Collection<T> collection,    List<UpdateOp> updateOps){
      Semaphore semaphore=locks.get(Thread.currentThread());
      List<T> result=super.createOrUpdate(collection,updateOps);
      if (semaphore != null) {
        created.release();
        semaphore.acquireUninterruptibly();
      }
      return result;
    }
  }
;
  final List<Exception> exceptions=new ArrayList<Exception>();
  final DocumentMK mk=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).open();
  final DocumentNodeStore store=mk.getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("deletedNode");
  builder.child("updateNode").setProperty("foo","bar");
  merge(store,builder);
  builder=store.getRoot().builder();
  builder.child("deletedNode").remove();
  merge(store,builder);
  final RevisionVector head=store.getHeadRevision();
  Thread writer=new Thread(new Runnable(){
    @Override public void run(){
      try {
        Revision r=store.newRevision();
        Commit c=new Commit(store,r,head,null);
        c.addNode(new DocumentNodeState(store,"/newConflictingNode",new RevisionVector(r)));
        c.addNode(new DocumentNodeState(store,"/deletedNode",new RevisionVector(r)));
        c.updateProperty("/updateNode","foo","baz");
        c.apply();
      }
 catch (      DocumentStoreException e) {
        exceptions.add(e);
      }
    }
  }
);
  final Semaphore s=new Semaphore(0);
  locks.put(writer,s);
  writer.start();
  created.acquireUninterruptibly();
  Revision r=store.newRevision();
  Commit c=new Commit(store,r,head,null);
  c.addNode(new DocumentNodeState(store,"/newConflictingNode",new RevisionVector(r)));
  c.addNode(new DocumentNodeState(store,"/newNonConflictingNode",new RevisionVector(r)));
  c.apply();
  s.release();
  writer.join();
  assertEquals("expected exception",1,exceptions.size());
  String id=Utils.getIdFromPath("/newConflictingNode");
  NodeDocument doc=docStore.find(NODES,id);
  assertNotNull("document with id " + id + " does not exist",doc);
  assertTrue("document with id " + id + " should get _deletedOnce marked due to rollback",doc.wasDeletedOnce());
  id=Utils.getIdFromPath("/newNonConflictingNode");
  doc=docStore.find(NODES,id);
  assertNull("document with id " + id + " must not have _deletedOnce",doc.get(NodeDocument.DELETED_ONCE));
  id=Utils.getIdFromPath("/deletedNode");
  doc=docStore.find(NODES,id);
  assertTrue("document with id " + id + " should get _deletedOnce marked due to rollback",doc.wasDeletedOnce());
  id=Utils.getIdFromPath("/updateNode");
  doc=docStore.find(NODES,id);
  assertNull("document with id " + id + " must not have _deletedOnce despite rollback",doc.get(NodeDocument.DELETED_ONCE));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void clusterWithClockDifferences2() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  long now=System.currentTimeMillis();
  Clock c1=new Clock.Virtual();
  c1.waitUntil(now);
  Revision.setClock(c1);
  DocumentNodeStore ns1=builderProvider.newBuilder().clock(c1).setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("node").setProperty("p",1);
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Clock c2=new Clock.Virtual();
  c2.waitUntil(now + 5000);
  Revision.setClock(c2);
  DocumentNodeStore ns2=builderProvider.newBuilder().clock(c2).setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  assertTrue(ns2.getRoot().hasChildNode("node"));
  assertEquals(1,ns2.getRoot().getChildNode("node").getProperty("p").getValue(Type.LONG).longValue());
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("node").setProperty("p",2);
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c1);
  ns1.runBackgroundOperations();
  b1=ns1.getRoot().builder();
  assertEquals(2,b1.getChildNode("node").getProperty("p").getValue(Type.LONG).longValue());
  b1.child("node").setProperty("p",3);
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c2);
  ns2.runBackgroundOperations();
  b2=ns2.getRoot().builder();
  assertEquals(3,b2.getChildNode("node").getProperty("p").getValue(Type.LONG).longValue());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void childNodeCache() throws Exception {
  DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  int max=(int)(100 * 1.5);
  SortedSet<String> children=new TreeSet<String>();
  for (int i=0; i < max; i++) {
    String name="c" + i;
    children.add(name);
    builder.child(name);
  }
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  builder=store.getRoot().builder();
  String name=new ArrayList<String>(children).get(100 / 2);
  builder.child(name).remove();
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  int numEntries=Iterables.size(store.getRoot().getChildNodeEntries());
  assertEquals(max - 1,numEntries);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void diffMany() throws Exception {
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  Revision.setClock(clock);
  final List<Long> startValues=Lists.newArrayList();
  MemoryDocumentStore ds=new MemoryDocumentStore(){
    @Nonnull @Override public <T extends Document>List<T> query(    Collection<T> collection,    String fromKey,    String toKey,    String indexedProperty,    long startValue,    int limit){
      if (indexedProperty != null) {
        startValues.add(startValue);
      }
      return super.query(collection,fromKey,toKey,indexedProperty,startValue,limit);
    }
  }
;
  DocumentNodeStore ns=builderProvider.newBuilder().clock(clock).setDocumentStore(ds).setAsyncDelay(0).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  NodeBuilder test=builder.child("test");
  for (int i=0; i < DocumentMK.MANY_CHILDREN_THRESHOLD * 2; i++) {
    test.child("node-" + i);
  }
  merge(ns,builder);
  clock.waitUntil(clock.getTime() + TimeUnit.HOURS.toMillis(1));
  builder=ns.getRoot().builder();
  builder.child("foo");
  DocumentNodeState before=asDocumentNodeState(merge(ns,builder));
  NodeState beforeTest=before.getChildNode("test");
  builder=ns.getRoot().builder();
  builder.child("bar");
  merge(ns,builder);
  builder=ns.getRoot().builder();
  builder.child("test").child("bar");
  NodeState after=merge(ns,builder);
  NodeState afterTest=after.getChildNode("test");
  startValues.clear();
  afterTest.compareAgainstBaseState(beforeTest,new DefaultNodeStateDiff());
  assertEquals(1,startValues.size());
  Revision localHead=before.getRevision().getRevision(ns.getClusterId());
  assertNotNull(localHead);
  long beforeModified=getModifiedInSecs(localHead.getTimestamp());
  assertEquals(beforeModified,(long)startValues.get(0));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void updateClusterState(){
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setAsyncDelay(0).setClusterId(1).setDocumentStore(docStore).getNodeStore();
  int cId1=ns1.getClusterId();
  DocumentNodeStore ns2=builderProvider.newBuilder().setAsyncDelay(0).setClusterId(2).setDocumentStore(docStore).getNodeStore();
  int cId2=ns2.getClusterId();
  ns1.updateClusterState();
  ns2.updateClusterState();
  assertEquals(0,ns1.getMBean().getInactiveClusterNodes().length);
  assertEquals(0,ns2.getMBean().getInactiveClusterNodes().length);
  assertEquals(2,ns1.getMBean().getActiveClusterNodes().length);
  assertEquals(2,ns2.getMBean().getActiveClusterNodes().length);
  ns1.dispose();
  ns2.updateClusterState();
  String[] inactive=ns2.getMBean().getInactiveClusterNodes();
  String[] active=ns2.getMBean().getActiveClusterNodes();
  assertEquals(1,inactive.length);
  assertTrue(inactive[0].startsWith(cId1 + "="));
  assertEquals(1,active.length);
  assertTrue(active[0].startsWith(cId2 + "="));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void concurrentChildOperations2() throws Exception {
  Clock clock=new Clock.Virtual();
  Revision.setClock(clock);
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setAsyncDelay(0).clock(clock).setDocumentStore(store).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setAsyncDelay(0).clock(clock).setDocumentStore(store).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("foo");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  b1=ns1.getRoot().builder();
  b1.child("foo").child("child-1");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("foo").child("child-2");
  merge(ns2,b2);
  List<ChildNodeEntry> children=Lists.newArrayList(ns2.getRoot().getChildNode("foo").getChildNodeEntries());
  assertEquals(1,Iterables.size(children));
  ns2.runBackgroundOperations();
  children=Lists.newArrayList(ns2.getRoot().getChildNode("foo").getChildNodeEntries());
  assertEquals(2,Iterables.size(children));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void useDocChildCacheForFindingNodes() throws CommitFailedException {
  final Set<String> reads=Sets.newHashSet();
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      reads.add(key);
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore store=builderProvider.newBuilder().setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("a");
  builder.child("b").child("c");
  merge(store,builder);
  NodeState parentState=store.getRoot().getChildNode("b");
  reads.clear();
  NodeState nonExistingChild=parentState.getChildNode("non-existing-node-1");
  assertEquals("Should not go to DocStore::find for a known non-existent child",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
  builder=store.getRoot().builder();
  NodeBuilder childPropBuilder=builder.child("a");
  childPropBuilder.setProperty("foo","bar");
  merge(store,builder);
  parentState=store.getRoot().getChildNode("b");
  reads.clear();
  nonExistingChild=parentState.getChildNode("non-existing-node-2");
  assertEquals("Should not go to DocStore::find for a known non-existent child," + " even if another merge has happened (on another sub-tree)",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
  store.invalidateNodeChildrenCache();
  parentState=store.getRoot().getChildNode("b");
  Iterables.size(parentState.getChildNodeEntries());
  reads.clear();
  nonExistingChild=parentState.getChildNode("non-existing-node-3");
  assertEquals("Should not go to DocStore::find when doc child cache is filled by reading",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void diffExternalChanges() throws Exception {
  long modifiedResMillis=SECONDS.toMillis(MODIFIED_IN_SECS_RESOLUTION);
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  Revision.setClock(clock);
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setAsyncDelay(0).clock(clock).setDocumentStore(docStore).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setAsyncDelay(0).clock(clock).setDocumentStore(docStore).setClusterId(2).getNodeStore();
  NodeBuilder builder=ns1.getRoot().builder();
  NodeBuilder test=builder.child("test");
  for (int i=0; i < DocumentMK.MANY_CHILDREN_THRESHOLD * 2; i++) {
    test.child("node-" + i);
  }
  ns1.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + modifiedResMillis * 2);
  builder=ns2.getRoot().builder();
  builder.child("test").child("foo");
  ns2.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  clock.waitUntil(clock.getTime() + modifiedResMillis * 2);
  builder=ns1.getRoot().builder();
  builder.child("test").child("bar");
  ns1.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeState r1=ns1.getRoot();
  ns2.runBackgroundOperations();
  ns1.runBackgroundOperations();
  NodeState r2=ns1.getRoot();
  boolean found=false;
  for (  ChildNodeEntry entry : r2.getChildNode("test").getChildNodeEntries()) {
    if (entry.getName().equals("foo")) {
      found=true;
      break;
    }
  }
  assertTrue(found);
  TrackingDiff diff=new TrackingDiff();
  r2.compareAgainstBaseState(r1,diff);
  assertEquals(1,diff.modified.size());
  assertTrue(diff.modified.contains("/test"));
  assertEquals(1,diff.added.size());
  assertTrue(diff.added.contains("/test/foo"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void diffCache() throws Exception {
  final AtomicInteger numQueries=new AtomicInteger();
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Nonnull @Override public <T extends Document>List<T> query(    Collection<T> collection,    String fromKey,    String toKey,    int limit){
      numQueries.incrementAndGet();
      return super.query(collection,fromKey,toKey,limit);
    }
  }
;
  DocumentNodeStore ns=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.child("foo").child("child");
  merge(ns,builder);
  builder=ns.getRoot().builder();
  builder.child("bar");
  merge(ns,builder);
  DocumentNodeState before=ns.getRoot();
  builder=ns.getRoot().builder();
  builder.child("foo").child("child").child("node");
  merge(ns,builder);
  DocumentNodeState after=ns.getRoot();
  numQueries.set(0);
  final List<String> added=Lists.newArrayList();
  ns.compare(asDocumentNodeState(after.getChildNode("foo").getChildNode("child")),asDocumentNodeState(before.getChildNode("foo").getChildNode("child")),new DefaultNodeStateDiff(){
    @Override public boolean childNodeAdded(    String name,    NodeState after){
      added.add(name);
      return super.childNodeAdded(name,after);
    }
  }
);
  assertEquals(1,added.size());
  assertEquals("node",added.get(0));
  assertEquals("must not run queries",0,numQueries.get());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void childNodeEntries() throws Exception {
  final AtomicInteger counter=new AtomicInteger();
  DocumentStore docStore=new MemoryDocumentStore(){
    @Nonnull @Override public <T extends Document>List<T> query(    Collection<T> collection,    String fromKey,    String toKey,    int limit){
      counter.incrementAndGet();
      return super.query(collection,fromKey,toKey,limit);
    }
  }
;
  DocumentNodeStore store=builderProvider.newBuilder().setDocumentStore(docStore).getNodeStore();
  NodeBuilder root=store.getRoot().builder();
  for (int i=0; i < 10; i++) {
    root.child("node-" + i);
  }
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  counter.set(0);
  for (  ChildNodeEntry e : store.getRoot().getChildNodeEntries()) {
    e.getNodeState();
  }
  assertEquals(1,counter.get());
  counter.set(0);
  for (  ChildNodeEntry e : store.getRoot().getChildNodeEntries()) {
    e.getNodeState();
  }
  assertEquals(0,counter.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentSplitTest </h4><pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cascadingWithSplitRatio(){
  String id=Utils.getIdFromPath("/test");
  mk.commit("/","+\"test\":{}",null,null);
  DocumentStore store=mk.getDocumentStore();
  int clusterId=mk.getNodeStore().getClusterId();
  UpdateOp op=new UpdateOp(id,false);
  for (int i=0; i < 1000; i++) {
    Revision r=Revision.newRevision(2);
    op.setMapEntry("prop",r,"some long test value with many characters");
    NodeDocument.setRevision(op,r,"c");
  }
  store.findAndUpdate(NODES,op);
  NodeDocument doc=store.find(NODES,id);
  assertNotNull(doc);
  assertTrue(doc.getMemory() > NodeDocument.DOC_SIZE_THRESHOLD);
  for (int i=0; i < NUM_REVS_THRESHOLD / 2; i++) {
    Revision r=Revision.newRevision(clusterId);
    op.setMapEntry("prop",r,"value");
    NodeDocument.setRevision(op,r,"c");
  }
  TreeSet<Revision> prev=Sets.newTreeSet(StableRevisionComparator.INSTANCE);
  for (int i=0; i < PREV_SPLIT_FACTOR; i++) {
    Revision low=Revision.newRevision(clusterId);
    Revision high=Revision.newRevision(clusterId);
    prev.add(high);
    NodeDocument.setPrevious(op,new Range(high,low,0));
  }
  store.findAndUpdate(NODES,op);
  doc=store.find(NODES,id);
  assertNotNull(doc);
  List<UpdateOp> splitOps=Lists.newArrayList(doc.split(mk.getNodeStore(),mk.getNodeStore().getHeadRevision()));
  assertEquals(2,splitOps.size());
  op=splitOps.get(0);
  String newPrevId=Utils.getPreviousIdFor("/test",prev.last(),1);
  assertEquals(newPrevId,op.getId());
  op=splitOps.get(1);
  assertEquals(id,op.getId());
  for (  Map.Entry<Key,Operation> entry : op.getChanges().entrySet()) {
    Revision r=entry.getKey().getRevision();
    assertNotNull(r);
    assertEquals(clusterId,r.getClusterId());
    if (entry.getKey().getName().equals("_prev")) {
      if (entry.getValue().type == REMOVE_MAP_ENTRY) {
        assertTrue(prev.contains(r));
      }
 else       if (entry.getValue().type == SET_MAP_ENTRY) {
        assertEquals(newPrevId,Utils.getPreviousIdFor("/test",r,1));
      }
 else {
        fail("unexpected update operation " + entry);
      }
    }
 else {
      fail("unexpected update operation " + entry);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitDocWithHasBinary() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  NodeBuilder b1=ns.getRoot().builder();
  b1.child("test").child("foo").setProperty("binaryProp",ns.createBlob(randomStream(1,4096)));
  ns.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    b1=ns.getRoot().builder();
    b1.child("test").child("foo").setProperty("prop",i);
    ns.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  ns.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test/foo"));
  List<NodeDocument> prevDocs=ImmutableList.copyOf(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  assertTrue(doc.hasBinary());
  assertTrue(prevDocs.get(0).hasBinary());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitPropertyRevisions() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  mk.commit("/","+\"foo\":{}",null,null);
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Set<Revision> revisions=Sets.newHashSet();
  while (revisions.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    revisions.add(Revision.fromString(mk.commit("/","^\"foo/prop\":" + revisions.size(),null,null)));
  }
  mk.runBackgroundOperations();
  doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Map<Revision,String> localRevs=doc.getLocalRevisions();
  assertEquals(1,localRevs.size());
  for (  Revision rev : revisions) {
    assertTrue(doc.isCommitted(rev));
  }
  Map<Revision,String> valueMap=doc.getValueMap("prop");
  assertEquals((long)revisions.size(),valueMap.size());
  valueMap=doc.getLocalMap("prop");
  assertEquals(1L,valueMap.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSplitDocNoChild() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  mk.commit("/","+\"test\":{\"node\":{}}",null,null);
  mk.commit("/test","+\"foo\":{}+\"bar\":{}",null,null);
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    mk.commit("/test/foo","^\"prop\":" + i,null,null);
  }
  ns.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test/foo"));
  List<NodeDocument> prevDocs=ImmutableList.copyOf(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  assertEquals(SplitDocType.DEFAULT_LEAF,prevDocs.get(0).getSplitDocType());
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cluster(){
  MemoryDocumentStore ds=new MemoryDocumentStore();
  MemoryBlobStore bs=new MemoryBlobStore();
  DocumentMK.Builder builder;
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs).setAsyncDelay(0);
  DocumentMK mk1=builder.setClusterId(1).open();
  mk1.commit("/","+\"test\":{\"prop1\":0}",null,null);
  mk1.backgroundWrite();
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs).setAsyncDelay(0);
  DocumentMK mk2=builder.setClusterId(2).open();
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs).setAsyncDelay(0);
  DocumentMK mk3=builder.setClusterId(3).open();
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    mk1.commit("/","^\"test/prop1\":" + i,null,null);
    mk2.commit("/","^\"test/prop2\":" + i,null,null);
    mk3.commit("/","^\"test/prop3\":" + i,null,null);
  }
  mk1.runBackgroundOperations();
  mk2.runBackgroundOperations();
  mk3.runBackgroundOperations();
  NodeDocument doc=ds.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  Map<Revision,String> revs=doc.getLocalRevisions();
  assertEquals(3,revs.size());
  revs=doc.getValueMap("_revisions");
  assertEquals(3 * NodeDocument.NUM_REVS_THRESHOLD,revs.size());
  Revision previous=null;
  for (  Map.Entry<Revision,String> entry : revs.entrySet()) {
    if (previous != null) {
      assertTrue(previous.compareRevisionTimeThenClusterId(entry.getKey()) > 0);
    }
    previous=entry.getKey();
  }
  mk1.dispose();
  mk2.dispose();
  mk3.dispose();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void mainPath(){
  Revision r=Revision.fromString("r1-0-1");
  for (  String path : new String[]{"/","/test","/test/path"}) {
    DocumentStore store=mk.getDocumentStore();
    NodeDocument doc=new NodeDocument(store);
    String id=Utils.getPreviousIdFor(path,r,0);
    doc.put(NodeDocument.ID,id);
    assertEquals(path,doc.getMainPath());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitCommitRoot() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  mk.commit("/","+\"foo\":{}+\"bar\":{}",null,null);
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Set<Revision> commitRoots=Sets.newHashSet();
  commitRoots.addAll(doc.getLocalCommitRoot().keySet());
  while (commitRoots.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    commitRoots.add(Revision.fromString(mk.commit("/","^\"foo/prop\":" + commitRoots.size() + "^\"bar/prop\":"+ commitRoots.size(),null,null)));
  }
  mk.runBackgroundOperations();
  doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Map<Revision,String> commits=doc.getLocalCommitRoot();
  assertEquals(2,commits.size());
  for (  Revision rev : commitRoots) {
    assertTrue(doc.isCommitted(rev));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitDeleted() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  Set<Revision> revisions=Sets.newHashSet();
  mk.commit("/","+\"foo\":{}",null,null);
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  revisions.addAll(doc.getLocalRevisions().keySet());
  boolean create=false;
  while (revisions.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    if (create) {
      revisions.add(Revision.fromString(mk.commit("/","+\"foo\":{}",null,null)));
    }
 else {
      revisions.add(Revision.fromString(mk.commit("/","-\"foo\"",null,null)));
    }
    create=!create;
  }
  mk.runBackgroundOperations();
  String head=mk.getHeadRevision();
  doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Map<Revision,String> deleted=doc.getLocalDeleted();
  assertEquals(1,deleted.size());
  for (  Revision rev : revisions) {
    assertTrue("document should contain revision (or have revision in commit root path):" + rev,doc.containsRevision(rev) || doc.getCommitRootPath(rev) != null);
    assertTrue(doc.isCommitted(rev));
  }
  DocumentNodeState node=ns.getNode("/foo",RevisionVector.fromString(head));
  if (create) {
    assertNull(node);
  }
 else {
    assertNotNull(node);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void keepCommitRootForMostRecentChanges() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  NodeStore ns=mk.getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.setProperty("p",-1);
  NodeBuilder test=builder.child("test");
  test.setProperty("foo",-1);
  test.setProperty("bar",-1);
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NUM_REVS_THRESHOLD; i++) {
    builder=ns.getRoot().builder();
    builder.setProperty("p",i);
    test=builder.child("test");
    test.setProperty("foo",i);
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  mk.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("bar");
  assertFalse(valueMap.isEmpty());
  Revision r=valueMap.keySet().iterator().next();
  assertTrue(doc.getLocalCommitRoot().containsKey(r));
  List<NodeDocument> prevDocs=Lists.newArrayList(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  NodeDocument prev=prevDocs.get(0);
  assertTrue(prev.getLocalCommitRoot().containsKey(r));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitRevisionsManyClusterNodes(){
  int numClusterNodes=5;
  String id=Utils.getIdFromPath("/test");
  mk.commit("/","+\"test\":{}",null,null);
  DocumentStore store=mk.getDocumentStore();
  int clusterId=mk.getNodeStore().getClusterId();
  List<Revision> revs=Lists.newArrayList();
  UpdateOp op=new UpdateOp(id,false);
  for (int i=0; i < numClusterNodes; i++) {
    for (int j=0; j < NUM_REVS_THRESHOLD; j++) {
      Revision r=Revision.newRevision(i + 1);
      if (clusterId == r.getClusterId()) {
        revs.add(r);
      }
      op.setMapEntry("prop",r,"value");
      NodeDocument.setRevision(op,r,"c");
    }
  }
  store.findAndUpdate(NODES,op);
  NodeDocument doc=store.find(NODES,id);
  assertNotNull(doc);
  List<UpdateOp> splitOps=Lists.newArrayList(doc.split(mk.getNodeStore(),mk.getNodeStore().getHeadRevision()));
  assertEquals(2,splitOps.size());
  String prevId=Utils.getPreviousIdFor("/test",revs.get(revs.size() - 2),0);
  assertEquals(prevId,splitOps.get(0).getId());
  assertEquals(id,splitOps.get(1).getId());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void keepRevisionsForMostRecentChanges() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  NodeStore ns=mk.getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.setProperty("foo",-1);
  builder.setProperty("bar",-1);
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NUM_REVS_THRESHOLD; i++) {
    builder=ns.getRoot().builder();
    builder.setProperty("foo",i);
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  mk.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/"));
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("bar");
  assertFalse(valueMap.isEmpty());
  Revision r=valueMap.keySet().iterator().next();
  assertTrue(doc.getLocalRevisions().containsKey(r));
  List<NodeDocument> prevDocs=Lists.newArrayList(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  NodeDocument prev=prevDocs.get(0);
  assertTrue(prev.getLocalRevisions().containsKey(r));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSplitPropAndCommitOnly() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  NodeBuilder b1=ns.getRoot().builder();
  b1.child("test").child("foo").child("bar");
  ns.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    b1=ns.getRoot().builder();
    b1.child("test").child("foo").setProperty("prop",i);
    b1.child("test").setProperty("prop",i);
    ns.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  ns.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test/foo"));
  List<NodeDocument> prevDocs=ImmutableList.copyOf(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  assertEquals(SplitDocType.COMMIT_ROOT_ONLY,prevDocs.get(0).getSplitDocType());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitRevisions() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  Set<Revision> revisions=Sets.newHashSet();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/"));
  assertNotNull(doc);
  revisions.addAll(doc.getLocalRevisions().keySet());
  revisions.add(Revision.fromString(mk.commit("/","+\"foo\":{}+\"bar\":{}",null,null)));
  while (revisions.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    revisions.add(Revision.fromString(mk.commit("/","+\"foo/node-" + revisions.size() + "\":{}"+ "+\"bar/node-"+ revisions.size()+ "\":{}",null,null)));
  }
  mk.runBackgroundOperations();
  String head=mk.getHeadRevision();
  doc=store.find(NODES,Utils.getIdFromPath("/"));
  assertNotNull(doc);
  Map<Revision,String> revs=doc.getLocalRevisions();
  assertEquals(1,revs.size());
  for (  Revision rev : revisions) {
    assertTrue(doc.containsRevision(rev));
    assertTrue(doc.isCommitted(rev));
  }
  assertNotNull(ns.getNode("/",RevisionVector.fromString(head)));
  NodeDocument prevDoc=Iterators.getOnlyElement(doc.getAllPreviousDocs());
  assertEquals(SplitDocType.DEFAULT,prevDoc.getSplitDocType());
  mk.commit("/","+\"baz\":{}",null,null);
  ns.setAsyncDelay(0);
  mk.backgroundWrite();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentStorePerformanceTest </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPerfLastRevBatch(){
  String bid=this.getClass().getName() + ".testPerfLastRevBatch";
  int nodecount=100;
  long duration=5000;
  int cnt=0;
  List<String> ids=new ArrayList<String>();
  Revision cr=Revision.fromString("r0-0-1");
  for (int i=0; i < nodecount; i++) {
    String id=bid + "-" + i;
    super.ds.remove(Collection.NODES,id);
    removeMe.add(id);
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("testprop",generateString(100 * i,true));
    up.setMapEntry("_lastRev",cr,"setup");
    up.set("_modified",NodeDocument.getModifiedInSecs(System.currentTimeMillis()));
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("creation failed for " + id + " in "+ super.dsname,success);
    ids.add(id);
  }
  long end=System.currentTimeMillis() + duration;
  while (System.currentTimeMillis() < end) {
    UpdateOp up=new UpdateOp(bid,true);
    up.setMapEntry("_lastRev",cr,"iteration-" + cnt);
    up.max("_modified",NodeDocument.getModifiedInSecs(System.currentTimeMillis()));
    super.ds.update(Collection.NODES,ids,up);
    cnt+=1;
  }
  super.ds.invalidateCache();
  for (int i=0; i < nodecount; i++) {
    NodeDocument d=super.ds.find(Collection.NODES,bid + "-" + i);
    assertNotNull(d);
    Map<Revision,String> m=(Map<Revision,String>)d.get("_lastRev");
    assertEquals("iteration-" + (cnt - 1),m.get(cr));
  }
  LOG.info("batch update for _lastRev for " + super.dsname + " was "+ cnt+ " in "+ duration+ "ms ("+ (cnt / (duration / 1000f))+ "/s)");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentStoreStatsTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void doneCreate_Journal() throws Exception {
  stats.doneCreate(100,Collection.JOURNAL,of("a","b"),true);
  assertEquals(2,getMeter(DocumentStoreStats.JOURNAL_CREATE).getCount());
  assertEquals(100,getTimer(DocumentStoreStats.JOURNAL_CREATE_TIMER).getSnapshot().getMax());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void doneQuery_Nodes() throws Exception {
  stats.doneQuery(100,Collection.NODES,"foo","bar",false,5,-1,false);
  assertEquals(5,getMeter(DocumentStoreStats.NODES_QUERY_FIND_READ_COUNT).getCount());
  assertEquals(1,getMeter(DocumentStoreStats.NODES_QUERY_PRIMARY).getCount());
  stats.doneQuery(100,Collection.NODES,"foo","bar",false,7,-1,true);
  assertEquals(1,getMeter(DocumentStoreStats.NODES_QUERY_SLAVE).getCount());
  assertEquals(12,getMeter(DocumentStoreStats.NODES_QUERY_FIND_READ_COUNT).getCount());
  stats.doneQuery(100,Collection.NODES,"foo","bar",false,7,1000,false);
  assertEquals(2,getMeter(DocumentStoreStats.NODES_QUERY_PRIMARY).getCount());
  assertEquals(1,getMeter(DocumentStoreStats.NODES_QUERY_LOCK).getCount());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void doneFindCached() throws Exception {
  stats.doneFindCached(Collection.NODES,"foo");
  assertEquals(1,getMeter(DocumentStoreStats.NODES_FIND_CACHED).getCount());
  stats.doneFindCached(Collection.SETTINGS,"foo");
  assertEquals(1,getMeter(DocumentStoreStats.NODES_FIND_CACHED).getCount());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void doneFindAndModify() throws Exception {
  stats.doneFindAndModify(100,Collection.NODES,"foo",true,true,0);
  assertEquals(1,getMeter(DocumentStoreStats.NODES_CREATE_UPSERT).getCount());
  assertEquals(100,getTimer(DocumentStoreStats.NODES_CREATE_UPSERT_TIMER).getSnapshot().getMax());
  stats.doneFindAndModify(100,Collection.NODES,"foo",false,true,0);
  assertEquals(1,getMeter(DocumentStoreStats.NODES_UPDATE).getCount());
  assertEquals(100,getTimer(DocumentStoreStats.NODES_UPDATE_TIMER).getSnapshot().getMax());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void doneQuery_Journal() throws Exception {
  stats.doneQuery(100,Collection.JOURNAL,"foo","bar",false,5,-1,false);
  assertEquals(5,getMeter(DocumentStoreStats.JOURNAL_QUERY).getCount());
  assertEquals(1,getTimer(DocumentStoreStats.JOURNAL_QUERY_TIMER).getCount());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void perfLog() throws Exception {
  String logName=DocumentStoreStats.class.getName() + ".perf";
  LogCustomizer customLogs=LogCustomizer.forLogger(logName).filter(Level.TRACE).create();
  enableLevel(logName,Level.INFO);
  customLogs.starting();
  stats.doneFindAndModify(100,Collection.NODES,"foo",true,true,0);
  assertEquals(0,customLogs.getLogs().size());
  stats.doneFindAndModify(TimeUnit.SECONDS.toNanos(10),Collection.NODES,"foo",true,true,0);
  assertEquals(0,customLogs.getLogs().size());
  enableLevel(logName,Level.DEBUG);
  stats.doneFindAndModify(100,Collection.NODES,"foo",true,true,0);
  assertEquals(0,customLogs.getLogs().size());
  stats.doneFindAndModify(TimeUnit.SECONDS.toNanos(10),Collection.NODES,"foo",true,true,0);
  assertEquals(1,customLogs.getLogs().size());
  enableLevel(logName,Level.TRACE);
  stats.doneFindAndModify(100,Collection.NODES,"foo",true,true,0);
  assertEquals(2,customLogs.getLogs().size());
  customLogs.finished();
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void doneFindUncached() throws Exception {
  stats.doneFindUncached(100,Collection.NODES,"0:/",true,false);
  assertEquals(1,getMeter(DocumentStoreStats.NODES_FIND_PRIMARY).getCount());
  assertEquals(100,getTimer(DocumentStoreStats.NODES_FIND_TIMER).getSnapshot().getMax());
  assertEquals(0,getMeter(DocumentStoreStats.NODES_FIND_SLAVE).getCount());
  stats.doneFindUncached(100,Collection.NODES,"0:/",true,true);
  assertEquals(1,getMeter(DocumentStoreStats.NODES_FIND_PRIMARY).getCount());
  assertEquals(1,getMeter(DocumentStoreStats.NODES_FIND_SLAVE).getCount());
  stats.doneFindUncached(100,Collection.NODES,"2:p/foo",true,false);
  assertEquals(2,getMeter(DocumentStoreStats.NODES_FIND_PRIMARY).getCount());
  assertEquals(1,getMeter(DocumentStoreStats.NODES_FIND_SPLIT).getCount());
  stats.doneFindUncached(100,Collection.SETTINGS,"0:/",true,false);
  assertEquals(2,getMeter(DocumentStoreStats.NODES_FIND_PRIMARY).getCount());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void doneFindAndModifyRetryAndFailure() throws Exception {
  stats.doneFindAndModify(100,Collection.NODES,"foo",true,false,3);
  assertEquals(1,getMeter(DocumentStoreStats.NODES_UPDATE_FAILURE).getCount());
  assertEquals(3,getMeter(DocumentStoreStats.NODES_UPDATE_RETRY_COUNT).getCount());
  stats.doneFindAndModify(100,Collection.NODES,"foo",true,true,2);
  assertEquals(5,getMeter(DocumentStoreStats.NODES_UPDATE_RETRY_COUNT).getCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.JournalEntryTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fillExternalChanges() throws Exception {
  DocumentStore store=new MemoryDocumentStore();
  JournalEntry entry=JOURNAL.newDocument(store);
  Set<String> paths=Sets.newHashSet();
  addRandomPaths(paths);
  entry.modified(paths);
  Revision r1=new Revision(1,0,1);
  Revision r2=new Revision(2,0,1);
  Revision r3=new Revision(3,0,1);
  UpdateOp op=entry.asUpdateOp(r2);
  assertTrue(store.create(JOURNAL,Collections.singletonList(op)));
  StringSort sort=JournalEntry.newSorter();
  JournalEntry.fillExternalChanges(sort,r2,r3,store);
  assertEquals(0,sort.getSize());
  JournalEntry.fillExternalChanges(sort,r1,r2,store);
  assertEquals(paths.size(),sort.getSize());
  sort.close();
  sort=JournalEntry.newSorter();
  JournalEntry.fillExternalChanges(sort,r1,r3,store);
  assertEquals(paths.size(),sort.getSize());
  sort.close();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getRevisionTimestamp() throws Exception {
  DocumentStore store=new MemoryDocumentStore();
  JournalEntry entry=JOURNAL.newDocument(store);
  entry.modified("/foo");
  Revision r=Revision.newRevision(1);
  assertTrue(store.create(JOURNAL,Collections.singletonList(entry.asUpdateOp(r))));
  entry=store.find(JOURNAL,JournalEntry.asId(r));
  assertEquals(r.getTimestamp(),entry.getRevisionTimestamp());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.JournalTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void externalBranchChange() throws Exception {
  DocumentMK mk1=createMK(1,0);
  DocumentNodeStore ns1=mk1.getNodeStore();
  DocumentMK mk2=createMK(2,0);
  DocumentNodeStore ns2=mk2.getNodeStore();
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  mk1.commit("/","+\"regular1\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/regular1","+\"regular1child\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular2\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular3\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular4\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular5\": {}",null,null);
  ns1.runBackgroundOperations();
  String b1=mk1.branch(null);
  b1=mk1.commit("/","+\"branchVisible\": {}",b1,null);
  mk1.merge(b1,null);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  String nodes=mk2.getNodes("/",null,0,0,100,null);
  assertEquals("{\"branchVisible\":{},\"regular1\":{},\"regular2\":{},\"regular3\":{},\"regular4\":{},\"regular5\":{},\":childNodeCount\":6}",nodes);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void journalTest() throws Exception {
  DocumentMK mk1=createMK(1,0);
  DocumentNodeStore ns1=mk1.getNodeStore();
  CountingDocumentStore countingDocStore1=builder.actualStore;
  CountingTieredDiffCache countingDiffCache1=builder.actualDiffCache;
  DocumentMK mk2=createMK(2,0);
  DocumentNodeStore ns2=mk2.getNodeStore();
  CountingDocumentStore countingDocStore2=builder.actualStore;
  CountingTieredDiffCache countingDiffCache2=builder.actualDiffCache;
  final DiffingObserver observer=new DiffingObserver(false);
  ns1.addObserver(observer);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  observer.processAll();
  observer.clear();
  countingDocStore1.resetCounters();
  countingDocStore2.resetCounters();
  countingDiffCache1.resetLoadCounter();
  countingDiffCache2.resetLoadCounter();
  mk2.commit("/","+\"regular1\": {}",null,null);
  mk2.commit("/","+\"regular2\": {}",null,null);
  mk2.commit("/","+\"regular3\": {}",null,null);
  mk2.commit("/regular2","+\"regular4\": {}",null,null);
  ns2.runBackgroundOperations();
  assertEquals(0,observer.getTotal());
  assertEquals(0,countingDocStore1.getNumFindCalls(Collection.NODES));
  assertEquals(0,countingDocStore1.getNumQueryCalls(Collection.NODES));
  assertEquals(0,countingDocStore1.getNumRemoveCalls(Collection.NODES));
  assertEquals(0,countingDocStore1.getNumCreateOrUpdateCalls(Collection.NODES));
  assertEquals(0,countingDiffCache1.getLoadCount());
  ns1.runBackgroundOperations();
  mk2.commit("/","+\"regular5\": {}",null,null);
  ns2.runBackgroundOperations();
  ns1.runBackgroundOperations();
  observer.processAll();
  countingDocStore1.printStacks=false;
  assertEquals(2,observer.getTotal());
  assertEquals(0,countingDiffCache1.getLoadCount());
  assertEquals(0,countingDocStore1.getNumRemoveCalls(Collection.NODES));
  assertEquals(0,countingDocStore1.getNumCreateOrUpdateCalls(Collection.NODES));
  assertEquals(0,countingDocStore1.getNumQueryCalls(Collection.NODES));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void cleanupTest() throws Exception {
  DocumentMK mk1=createMK(0,0);
  DocumentNodeStore ns1=mk1.getNodeStore();
  ns1.renewClusterIdLease();
  JournalGarbageCollector gc=new JournalGarbageCollector(ns1);
  Thread.sleep(100);
  gc.gc(1,TimeUnit.MILLISECONDS);
  Thread.sleep(100);
  assertEquals(0,gc.gc(1,TimeUnit.DAYS));
  assertEquals(0,gc.gc(6,TimeUnit.HOURS));
  assertEquals(0,gc.gc(1,TimeUnit.HOURS));
  assertEquals(0,gc.gc(10,TimeUnit.MINUTES));
  assertEquals(0,gc.gc(1,TimeUnit.MINUTES));
  assertEquals(0,gc.gc(1,TimeUnit.SECONDS));
  assertEquals(0,gc.gc(1,TimeUnit.MILLISECONDS));
  mk1.commit("/","+\"regular1\": {}",null,null);
  mk1.commit("/","+\"regular2\": {}",null,null);
  mk1.commit("/","+\"regular3\": {}",null,null);
  mk1.commit("/regular2","+\"regular4\": {}",null,null);
  Thread.sleep(100);
  assertEquals(0,gc.gc(5,TimeUnit.SECONDS));
  assertEquals(0,gc.gc(1,TimeUnit.MILLISECONDS));
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular5\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular6\": {}",null,null);
  ns1.runBackgroundOperations();
  Thread.sleep(100);
  assertEquals(0,gc.gc(5,TimeUnit.SECONDS));
  assertEquals(3,gc.gc(1,TimeUnit.MILLISECONDS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LastRevRecoveryAgentTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsRecoveryRequired() throws Exception {
  NodeBuilder b1=ds1.getRoot().builder();
  b1.child("x").child("y");
  ds1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ds1.runBackgroundOperations();
  ds2.runBackgroundOperations();
  NodeBuilder b2=ds2.getRoot().builder();
  b2.child("x").child("y").child("z").setProperty("foo","bar");
  ds2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Revision zlastRev2=ds2.getHeadRevision().getRevision(ds2.getClusterId());
  long leaseTime=ds1.getClusterInfo().getLeaseTime();
  ds1.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + leaseTime + 10);
  ds1.getClusterInfo().renewLease();
  assertTrue(ds1.getLastRevRecoveryAgent().isRecoveryNeeded());
  List<Integer> cids=ds1.getLastRevRecoveryAgent().getRecoveryCandidateNodes();
  assertEquals(1,cids.size());
  assertEquals(c2Id,cids.get(0).intValue());
  ds1.getLastRevRecoveryAgent().recover(cids.get(0));
  assertEquals(zlastRev2,getDocument(ds1,"/x/y").getLastRev().get(c2Id));
  assertEquals(zlastRev2,getDocument(ds1,"/x").getLastRev().get(c2Id));
  assertEquals(zlastRev2,getDocument(ds1,"/").getLastRev().get(c2Id));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LastRevRecoveryTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecover() throws Exception {
  NodeBuilder b1=ds1.getRoot().builder();
  b1.child("x").child("y");
  ds1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ds1.runBackgroundOperations();
  ds2.runBackgroundOperations();
  NodeBuilder b2=ds2.getRoot().builder();
  b2.child("x").setProperty("f1","b1");
  ds2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ds2.runBackgroundOperations();
  b2=ds2.getRoot().builder();
  b2.child("x").child("y").child("z").setProperty("foo","bar");
  ds2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ds1.runBackgroundOperations();
  NodeDocument z1=getDocument(ds1,"/x/y/z");
  NodeDocument y1=getDocument(ds1,"/x/y");
  NodeDocument x1=getDocument(ds1,"/x");
  Revision zlastRev2=z1.getLastRev().get(c2Id);
  assertNull(zlastRev2);
  Revision head2=ds2.getHeadRevision().getRevision(c2Id);
  assertNull(y1.getLastRev().get(c2Id));
  LastRevRecoveryAgent recovery=new LastRevRecoveryAgent(ds1);
  recovery.recover(Iterators.forArray(x1,z1),c2Id);
  assertEquals(head2,getDocument(ds1,"/x/y").getLastRev().get(c2Id));
  assertEquals(head2,getDocument(ds1,"/x").getLastRev().get(c2Id));
  assertEquals(head2,getDocument(ds1,"/").getLastRev().get(c2Id));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void recoveryWithoutRootUpdate() throws Exception {
  String clusterId=String.valueOf(c1Id);
  ClusterNodeInfoDocument doc=sharedStore.find(CLUSTER_NODES,clusterId);
  NodeBuilder builder=ds1.getRoot().builder();
  builder.child("x").child("y").child("z");
  merge(ds1,builder);
  ds1.dispose();
  sharedStore.remove(CLUSTER_NODES,clusterId);
  sharedStore.create(CLUSTER_NODES,newArrayList(updateOpFromDocument(doc)));
  clock.waitUntil(doc.getLeaseEndTime() + 1);
  LastRevRecoveryAgent agent=new LastRevRecoveryAgent(ds2);
  List<Integer> clusterIds=agent.getRecoveryCandidateNodes();
  assertTrue(clusterIds.contains(c1Id));
  assertEquals("must not recover any documents",0,agent.recover(c1Id));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LastRevSingleNodeRecoveryTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoMissingUpdates() throws Exception {
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 10);
  setupScenario();
  mk.backgroundWrite();
  clock.waitUntil(clock.getTime() + 5000);
  mk.commit("/","^\"a/key2\" : \"value2\"",null,null);
  mk.backgroundWrite();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime());
  mk.getClusterInfo().renewLease();
  int pendingCount=mk.getPendingWriteCount();
  LastRevRecoveryAgent recoveryAgent=mk.getNodeStore().getLastRevRecoveryAgent();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime());
  assertEquals(pendingCount,recoveryAgent.recover(mk.getClusterInfo().getId()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLastRevRestoreOnNodeStart() throws Exception {
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 10);
  setupScenario();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 10);
  mk.getClusterInfo().renewLease();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 1000);
  mk2=openMK(0,mk.getNodeStore().getDocumentStore());
  int pendingCount=mk2.getPendingWriteCount();
  LastRevRecoveryAgent recoveryAgent=mk2.getNodeStore().getLastRevRecoveryAgent();
  assertEquals(pendingCount,recoveryAgent.recover(mk2.getClusterInfo().getId()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNodeRecoveryNeeded() throws InterruptedException {
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 10);
  setupScenario();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 1000);
  LastRevRecoveryAgent recoveryAgent=mk.getNodeStore().getLastRevRecoveryAgent();
  List<Integer> cids=recoveryAgent.getRecoveryCandidateNodes();
  assertEquals(1,cids.size());
  assertEquals(Integer.valueOf(1),cids.get(0));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLastRevRestore() throws Exception {
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 10);
  setupScenario();
  int pendingCount=mk.getPendingWriteCount();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 1000);
  LastRevRecoveryAgent recoveryAgent=mk.getNodeStore().getLastRevRecoveryAgent();
  assertEquals(pendingCount,recoveryAgent.recover(mk.getClusterInfo().getId()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LocalDiffCacheTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpleDiff() throws Exception {
  TestNodeObserver o=new TestNodeObserver("/");
  store=createMK().getNodeStore();
  store.addObserver(o);
  o.reset();
  DiffCache cache=store.getDiffCache();
  Iterable<CacheStats> stats=cache.getStats();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("a").child("a2").setProperty("foo","bar");
  builder.child("b");
  merge(store,builder);
  assertTrue(getHitCount(stats) > 0);
  assertEquals(0,getMissCount(stats));
  assertEquals(3,o.added.size());
  builder=store.getRoot().builder();
  builder.child("a").child("a2").removeProperty("foo");
  o.reset();
  resetStats(stats);
  merge(store,builder);
  assertTrue(getHitCount(stats) > 0);
  assertEquals(0,getMissCount(stats));
  assertEquals(1,o.changed.size());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyDiff() throws Exception {
  Map<String,String> changes=new HashMap<String,String>();
  Diff diff=new Diff(changes,100);
  String asString=diff.asString();
  Diff diff2=Diff.fromString(asString);
  assertEquals(diff,diff2);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void diffFromAsString(){
  Map<String,String> changes=Maps.newHashMap();
  changes.put("/","+\"foo\":{}^\"bar\":{}-\"baz\"");
  changes.put("/foo","");
  changes.put("/bar","+\"qux\"");
  changes.put("/bar/qux","");
  Diff diff=new Diff(changes,0);
  assertEquals(changes,Diff.fromString(diff.asString()).getChanges());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoBlobGCTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void consistencyCheckInlined() throws Exception {
  DataStoreState state=setUp(true);
  addInlined();
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void consistencyCheckWithGc() throws Exception {
  DataStoreState state=setUp(true);
  Set<String> existingAfterGC=gc(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void consistencyCheckInit() throws Exception {
  DataStoreState state=setUp(true);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcLongRunningBlobCollection() throws Exception {
  DataStoreState state=setUp(true);
  log.info("{} Blobs added {}",state.blobsAdded.size(),state.blobsAdded);
  log.info("{} Blobs should be present {}",state.blobsPresent.size(),state.blobsPresent);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  DocumentNodeStore store=mk.getNodeStore();
  String repoId=null;
  if (SharedDataStoreUtils.isShared(store.getBlobStore())) {
    repoId=ClusterRepositoryInfo.createId(store);
    ((SharedDataStore)store.getBlobStore()).addMetadataRecord(new ByteArrayInputStream(new byte[0]),REPOSITORY.getNameFromId(repoId));
  }
  TestGarbageCollector gc=new TestGarbageCollector(new DocumentBlobReferenceRetriever(store),(GarbageCollectableBlobStore)store.getBlobStore(),executor,"./target",5,5000,repoId);
  gc.collectGarbage(false);
  Set<String> existingAfterGC=iterate();
  log.info("{} Blobs existing after gc {}",existingAfterGC.size(),existingAfterGC);
  assertTrue(Sets.difference(state.blobsPresent,existingAfterGC).isEmpty());
  assertEquals(gc.additionalBlobs,Sets.symmetricDifference(state.blobsPresent,existingAfterGC));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void consistencyCheckWithRenegadeDelete() throws Exception {
  DataStoreState state=setUp(true);
  Random rand=new Random(87);
  List<String> existing=Lists.newArrayList(state.blobsPresent);
  GarbageCollectableBlobStore store=(GarbageCollectableBlobStore)mk.getNodeStore().getBlobStore();
  long count=store.countDeleteChunks(ImmutableList.of(existing.get(rand.nextInt(existing.size()))),0);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(count,candidates);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoDocumentStoreIT </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void create() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  String id=Utils.getIdFromPath("/test");
  UpdateOp updateOp=new UpdateOp(id,true);
  updateOp.set(Document.ID,id);
  Revision r1=Revision.newRevision(1);
  updateOp.setMapEntry("p",r1,"a");
  Revision r2=Revision.newRevision(1);
  updateOp.setMapEntry("p",r2,"b");
  Revision r3=Revision.newRevision(1);
  updateOp.setMapEntry("p",r3,"c");
  assertTrue(store.create(NODES,Collections.singletonList(updateOp)));
  NodeDocument doc=store.find(NODES,id,0);
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("p");
  assertEquals(3,valueMap.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void concurrent() throws Exception {
  final long time=System.currentTimeMillis();
  mk.commit("/","+\"test\":{}",null,null);
  final String id=Utils.getIdFromPath("/test");
  final DocumentStore docStore=mk.getDocumentStore();
  List<Thread> threads=new ArrayList<Thread>();
  for (int i=0; i < NUM_THREADS; i++) {
    final int tId=i;
    threads.add(new Thread(new Runnable(){
      @Override public void run(){
        Revision r=new Revision(time,tId,0);
        for (int i=0; i < UPDATES_PER_THREAD; i++) {
          UpdateOp update=new UpdateOp(id,false);
          update.setMapEntry("prop",r,String.valueOf(i));
          docStore.createOrUpdate(NODES,update);
        }
      }
    }
));
  }
  final List<Exception> exceptions=new ArrayList<Exception>();
  final AtomicBoolean running=new AtomicBoolean(true);
  Thread reader=new Thread(new Runnable(){
    @Override public void run(){
      try {
        Map<Revision,Integer> previous=Maps.newHashMap();
        while (running.get()) {
          NodeDocument doc=docStore.find(NODES,id);
          if (doc == null) {
            throw new Exception("document is null");
          }
          Map<Revision,String> values=doc.getValueMap("prop");
          for (          Map.Entry<Revision,String> entry : values.entrySet()) {
            Revision r=entry.getKey();
            Integer previousValue=previous.get(r);
            Integer currentValue=Integer.parseInt(entry.getValue());
            if (previousValue != null && previousValue > currentValue) {
              throw new Exception("inconsistent read for " + r + ". previous value: "+ previousValue+ ", now: "+ entry.getValue());
            }
            previous.put(r,currentValue);
          }
          Thread.yield();
        }
      }
 catch (      Exception e) {
        exceptions.add(e);
      }
    }
  }
);
  reader.start();
  for (  Thread t : threads) {
    t.start();
  }
  for (  Thread t : threads) {
    t.join();
  }
  running.set(false);
  reader.join();
  for (  Exception e : exceptions) {
    throw e;
  }
  NodeDocument doc=docStore.find(NODES,id);
  assertNotNull(doc);
  Map<Revision,String> values=doc.getLocalMap("prop");
  assertNotNull(values);
  for (  Map.Entry<Revision,String> entry : values.entrySet()) {
    assertEquals(String.valueOf(UPDATES_PER_THREAD - 1),entry.getValue());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createWithNull() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  String id=Utils.getIdFromPath("/test");
  UpdateOp updateOp=new UpdateOp(id,true);
  updateOp.set(Document.ID,id);
  Revision r1=Revision.newRevision(1);
  updateOp.setMapEntry("p",r1,"a");
  Revision r2=Revision.newRevision(1);
  updateOp.setMapEntry("p",r2,null);
  Revision r3=Revision.newRevision(1);
  updateOp.setMapEntry("p",r3,"c");
  assertTrue(store.create(NODES,Collections.singletonList(updateOp)));
  NodeDocument doc=store.find(NODES,id,0);
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("p");
  assertEquals(3,valueMap.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoDocumentStoreTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void containsMapEntry(){
  Revision r=new Revision(0,0,0);
  Revision unknown=new Revision(0,1,0);
  DocumentStore docStore=openDocumentStore();
  UpdateOp op=new UpdateOp("/node",true);
  op.setMapEntry("map",r,"value");
  docStore.createOrUpdate(Collection.NODES,op);
  op=new UpdateOp("/node",false);
  op.set("prop","value");
  op.containsMapEntry("map",unknown,true);
  assertNull(docStore.findAndUpdate(Collection.NODES,op));
  op=new UpdateOp("/node",false);
  op.set("prop","value");
  op.containsMapEntry("map",r,true);
  NodeDocument doc=docStore.findAndUpdate(Collection.NODES,op);
  assertNotNull(doc);
  doc=docStore.find(Collection.NODES,"/node");
  assertNotNull(doc);
  assertNotNull(doc.get("prop"));
  assertEquals("value",doc.get("prop"));
  op=new UpdateOp("/node",false);
  op.set("prop","other");
  op.containsMapEntry("map",r,false);
  assertNull(docStore.findAndUpdate(Collection.NODES,op));
  doc=docStore.find(Collection.NODES,"/node");
  assertNotNull(doc);
  assertNotNull(doc.get("prop"));
  assertEquals("value",doc.get("prop"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void queryWithLimit() throws Exception {
  DocumentStore docStore=openDocumentStore();
  DocumentNodeStore store=new DocumentMK.Builder().setDocumentStore(docStore).setAsyncDelay(0).getNodeStore();
  Revision rev=Revision.newRevision(0);
  List<UpdateOp> inserts=new ArrayList<UpdateOp>();
  for (int i=0; i < DocumentMK.MANY_CHILDREN_THRESHOLD * 2; i++) {
    DocumentNodeState n=new DocumentNodeState(store,"/node-" + i,new RevisionVector(rev));
    inserts.add(n.asOperation(rev));
  }
  docStore.create(Collection.NODES,inserts);
  List<NodeDocument> docs=docStore.query(Collection.NODES,Utils.getKeyLowerLimit("/"),Utils.getKeyUpperLimit("/"),DocumentMK.MANY_CHILDREN_THRESHOLD);
  assertEquals(DocumentMK.MANY_CHILDREN_THRESHOLD,docs.size());
  store.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addGetAndRemove() throws Exception {
  DocumentStore docStore=openDocumentStore();
  UpdateOp updateOp=new UpdateOp("/",true);
  Revision r1=new Revision(0,0,0);
  updateOp.setMapEntry("property1",r1,"value1");
  updateOp.increment("property2",1);
  updateOp.set("property3","value3");
  docStore.createOrUpdate(Collection.NODES,updateOp);
  NodeDocument doc=docStore.find(Collection.NODES,"/");
  assertNotNull(doc);
  Map<?,?> property1=(Map<?,?>)doc.get("property1");
  assertNotNull(property1);
  String value1=(String)property1.get(r1);
  assertEquals("value1",value1);
  Long value2=(Long)doc.get("property2");
  assertEquals(Long.valueOf(1),value2);
  String value3=(String)doc.get("property3");
  assertEquals("value3",value3);
  docStore.remove(Collection.NODES,"/");
  doc=docStore.find(Collection.NODES,"/");
  assertTrue(doc == null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MultiDocumentStoreTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void batchUpdateCachedDocument() throws Exception {
  String id=Utils.getIdFromPath("/foo");
  removeMe.add(id);
  UpdateOp op=new UpdateOp(id,true);
  op.set(Document.ID,id);
  op.set("_ds1",1);
  assertNull(ds1.createOrUpdate(Collection.NODES,op));
  assertNotNull(ds2.find(Collection.NODES,id));
  op=new UpdateOp(id,false);
  op.set("_ds1",2);
  assertNotNull(ds1.createOrUpdate(Collection.NODES,op));
  op=new UpdateOp(id,false);
  op.set("_ds2",1);
  List<UpdateOp> ops=Lists.newArrayList();
  ops.add(op);
  for (int i=0; i < 10; i++) {
    String docId=Utils.getIdFromPath("/node-" + i);
    UpdateOp update=new UpdateOp(docId,true);
    update.set(Document.ID,docId);
    update.set("_ds2",1);
    removeMe.add(docId);
    ops.add(update);
  }
  List<NodeDocument> old=ds2.createOrUpdate(Collection.NODES,ops);
  assertEquals(11,old.size());
  assertNotNull(old.get(0));
  assertEquals(2L,old.get(0).get("_ds1"));
  NodeDocument foo=ds2.find(Collection.NODES,id);
  assertNotNull(foo);
  assertEquals(2L,foo.get("_ds1"));
  assertEquals(1L,foo.get("_ds2"));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterleavedBatchUpdate(){
  int amount=10;
  int halfAmount=amount / 2;
  String baseId=this.getClass().getName() + ".testInterleavedBatchUpdate";
  for (int i=0; i < amount; i++) {
    String id=baseId + "-" + i;
    NodeDocument nd=super.ds1.find(Collection.NODES,id);
    if (nd != null) {
      super.ds1.remove(Collection.NODES,id);
    }
    removeMe.add(id);
  }
{
    List<UpdateOp> ops=new ArrayList<UpdateOp>();
    for (int i=0; i < halfAmount; i++) {
      String id=baseId + "-" + i;
      UpdateOp up=new UpdateOp(id,true);
      up.set(Document.ID,id);
      up.set("_createdby","ds1");
      ops.add(up);
    }
    List<NodeDocument> result=super.ds1.createOrUpdate(Collection.NODES,ops);
    assertEquals(halfAmount,result.size());
    for (    NodeDocument doc : result) {
      assertNull(doc);
    }
  }
{
    List<UpdateOp> ops=new ArrayList<UpdateOp>();
    for (int i=0; i < amount; i++) {
      String id=baseId + "-" + i;
      UpdateOp up=new UpdateOp(id,true);
      up.set(Document.ID,id);
      up.set("_createdby","ds2");
      ops.add(up);
    }
    List<NodeDocument> result=super.ds2.createOrUpdate(Collection.NODES,ops);
    assertEquals(amount,result.size());
    for (    NodeDocument doc : result) {
      if (doc != null) {
        assertEquals("ds1",doc.get("_createdby"));
      }
    }
  }
  for (int i=0; i < amount; i++) {
    String id=baseId + "-" + i;
    NodeDocument doc=super.ds1.find(Collection.NODES,id,0);
    assertNotNull(doc);
    assertEquals("ds2",doc.get("_createdby"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidateCache(){
  String id="1:/" + this.getClass().getName() + ".testInvalidateCache";
  NodeDocument nd=super.ds1.find(Collection.NODES,id);
  if (nd != null) {
    super.ds1.remove(Collection.NODES,id);
  }
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_foo","bar");
  assertTrue(super.ds1.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  NodeDocument nd1=super.ds1.find(Collection.NODES,id);
  NodeDocument nd2=super.ds2.find(Collection.NODES,id);
  assertNotNull(nd1);
  assertNotNull(nd2);
  long firstVersion=nd1.getModCount();
  assertEquals(firstVersion,nd2.getModCount().longValue());
  UpdateOp upds1=new UpdateOp(id,true);
  upds1.set("_id",id);
  upds1.set("foo","qux");
  super.ds1.update(Collection.NODES,Collections.singletonList(id),upds1);
  nd1=super.ds1.find(Collection.NODES,id);
  assertEquals("modcount should have changed in ds1",firstVersion + 1,nd1.getModCount().longValue());
  nd2=super.ds2.find(Collection.NODES,id);
  assertEquals("ds2 should still be on first version",firstVersion,nd2.getModCount().longValue());
  nd2=super.ds2.find(Collection.NODES,id,0);
  assertEquals("ds2 should now see the second version",firstVersion + 1,nd2.getModCount().longValue());
  NodeDocument nd2b=super.ds2.find(Collection.NODES,id);
  assertEquals("ds2 should now see the second version",firstVersion + 1,nd2b.getModCount().longValue());
  UpdateOp upds2=new UpdateOp(id,true);
  upds2.set("_id",id);
  upds2.set("foo","blub");
  super.ds2.update(Collection.NODES,Collections.singletonList(id),upds1);
  nd2=super.ds2.find(Collection.NODES,id);
  assertEquals("modcount should have incremented again",firstVersion + 2,nd2.getModCount().longValue());
  long ds1checktime=nd1.getLastCheckTime();
  letTimeElapse();
  ds1.invalidateCache();
  nd1=super.ds1.find(Collection.NODES,id);
  assertEquals("modcount should have incremented again",firstVersion + 2,nd1.getModCount().longValue());
  assertTrue(nd1.getLastCheckTime() > ds1checktime);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterleavedUpdate(){
  String id=this.getClass().getName() + ".testInterleavedUpdate";
  NodeDocument nd=super.ds1.find(Collection.NODES,id);
  if (nd != null) {
    super.ds1.remove(Collection.NODES,id);
  }
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_foo",0);
  assertTrue(super.ds1.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  long increments=10;
  for (int i=0; i < increments; i++) {
    up=new UpdateOp(id,true);
    up.set("_id",id);
    up.increment("_foo",1);
    if (i % 2 == 0) {
      super.ds1.update(Collection.NODES,Collections.singletonList(id),up);
    }
 else {
      super.ds2.update(Collection.NODES,Collections.singletonList(id),up);
    }
  }
  nd=super.ds1.find(Collection.NODES,id,0);
  assertEquals("_foo should have been incremented 10 times",increments,nd.get("_foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.NodeDocumentIdComparatorTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void sort(){
  List<String> paths=new ArrayList<String>();
  paths.add(Utils.getIdFromPath("/foo"));
  paths.add(Utils.getIdFromPath("/foo/bar"));
  paths.add(Utils.getIdFromPath("/bar/qux"));
  paths.add(Utils.getIdFromPath("/"));
  paths.add(Utils.getIdFromPath("/bar"));
  Collections.sort(paths,NodeDocumentIdComparator.INSTANCE);
  List<String> expected=Lists.newArrayList("2:/bar/qux","2:/foo/bar","1:/bar","1:/foo","0:/");
  assertEquals(expected,paths);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.NodeDocumentTest </h4><pre class="type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChangesAfterGC2() throws Exception {
  int numChanges=200;
  DocumentNodeStore ns=createTestStore(numChanges);
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  NodeDocument toRemove=Iterators.getLast(root.getAllPreviousDocs());
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  numChanges-=Iterables.size(toRemove.getAllChanges());
  root=getRootDocument(ns.getDocumentStore());
  Revision previous=ns.newRevision();
  for (  Revision r : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  assertEquals(numChanges + 1,Iterables.size(root.getAllChanges()));
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChanges() throws Exception {
  final int NUM_CHANGES=200;
  DocumentNodeStore ns=createTestStore(NUM_CHANGES);
  Revision previous=ns.newRevision();
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  for (  Revision r : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  assertEquals(NUM_CHANGES + 1,Iterables.size(root.getAllChanges()));
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChangesCluster() throws Exception {
  final int NUM_CLUSTER_NODES=3;
  final int NUM_CHANGES=500;
  DocumentStore store=new MemoryDocumentStore();
  List<DocumentNodeStore> docStores=Lists.newArrayList();
  for (int i=0; i < NUM_CLUSTER_NODES; i++) {
    DocumentNodeStore ns=new DocumentMK.Builder().setDocumentStore(store).setAsyncDelay(0).setClusterId(i + 1).getNodeStore();
    docStores.add(ns);
  }
  Random r=new Random(42);
  for (int i=0; i < NUM_CHANGES; i++) {
    int clusterIdx=r.nextInt(NUM_CLUSTER_NODES);
    DocumentNodeStore ns=docStores.get(clusterIdx);
    NodeBuilder builder=ns.getRoot().builder();
    builder.setProperty("p-" + clusterIdx,i);
    merge(ns,builder);
    if (r.nextFloat() < 0.2) {
      RevisionVector head=ns.getHeadRevision();
      for (      UpdateOp op : SplitOperations.forDocument(getRootDocument(store),ns,head,2)) {
        store.createOrUpdate(NODES,op);
      }
    }
  }
  DocumentNodeStore ns=docStores.get(0);
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  Revision previous=ns.newRevision();
  for (  Revision rev : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTimeThenClusterId(rev) > 0);
    previous=rev;
  }
  assertEquals(NUM_CHANGES + 1,Iterables.size(root.getAllChanges()));
  for (  DocumentNodeStore dns : docStores) {
    dns.dispose();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChangesAfterGC1() throws Exception {
  int numChanges=200;
  DocumentNodeStore ns=createTestStore(numChanges);
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  NodeDocument toRemove=root.getAllPreviousDocs().next();
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  numChanges-=Iterables.size(toRemove.getAllChanges());
  root=getRootDocument(ns.getDocumentStore());
  Revision previous=ns.newRevision();
  for (  Revision r : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  assertEquals(numChanges + 1,Iterables.size(root.getAllChanges()));
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void isConflicting() throws Exception {
  final int numChanges=200;
  final Set<String> prevDocCalls=newHashSet();
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      if (Utils.getPathFromId(key).startsWith("p")) {
        prevDocCalls.add(key);
      }
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore ns=createTestStore(store,0,numChanges);
  NodeDocument doc=getRootDocument(store);
  Map<Revision,String> valueMap=doc.getValueMap("p");
  assertEquals(200,valueMap.size());
  RevisionVector baseRev=new RevisionVector(valueMap.keySet().iterator().next());
  Revision commitRev=ns.newRevision();
  UpdateOp op=new UpdateOp(Utils.getIdFromPath("/"),false);
  op.setMapEntry("p",commitRev,"v");
  prevDocCalls.clear();
  assertFalse(doc.isConflicting(op,baseRev,commitRev,false));
  assertTrue("too many calls for previous documents: " + prevDocCalls,prevDocCalls.size() <= 6);
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getConflictsFor(){
  MemoryDocumentStore docStore=new MemoryDocumentStore();
  String id=Utils.getPathFromId("/");
  NodeDocument doc=new NodeDocument(docStore);
  doc.put(Document.ID,id);
  Iterable<Revision> branchCommits=Collections.emptyList();
  Set<Revision> conflicts=doc.getConflictsFor(branchCommits);
  assertTrue(conflicts.isEmpty());
  UpdateOp op=new UpdateOp(id,false);
  Revision r0=Revision.newRevision(1);
  Revision r1=Revision.newRevision(1);
  Revision c1=Revision.newRevision(1);
  Revision r2=Revision.newRevision(1);
  Revision c2=Revision.newRevision(1);
  op.setMapEntry(COLLISIONS,r0,String.valueOf(true));
  NodeDocument.addCollision(op,r1,c1);
  NodeDocument.addCollision(op,r2,c2);
  UpdateUtils.applyChanges(doc,op);
  branchCommits=Collections.singleton(r0);
  conflicts=doc.getConflictsFor(branchCommits);
  assertTrue(conflicts.isEmpty());
  branchCommits=Collections.singleton(r1.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c1),conflicts);
  branchCommits=Collections.singleton(r2.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c2),conflicts);
  branchCommits=Lists.newArrayList(r1.asBranchRevision(),r2.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c1,c2),conflicts);
  branchCommits=Lists.newArrayList(r2.asBranchRevision(),r1.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c1,c2),conflicts);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPreviousDocLeavesAfterGC1() throws Exception {
  DocumentNodeStore ns=createTestStore(200);
  Revision previous=ns.newRevision();
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  int numLeaves=Iterators.size(root.getPreviousDocLeaves());
  NodeDocument toRemove=root.getAllPreviousDocs().next();
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  root=getRootDocument(ns.getDocumentStore());
  assertEquals(numLeaves - 1,Iterators.size(root.getPreviousDocLeaves()));
  Iterator<NodeDocument> it=root.getPreviousDocLeaves();
  while (it.hasNext()) {
    NodeDocument leaf=it.next();
    Revision r=leaf.getAllChanges().iterator().next();
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPreviousDocLeavesAfterGC2() throws Exception {
  DocumentNodeStore ns=createTestStore(200);
  Revision previous=ns.newRevision();
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  int numLeaves=Iterators.size(root.getPreviousDocLeaves());
  NodeDocument toRemove=Iterators.getLast(root.getAllPreviousDocs());
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  root=getRootDocument(ns.getDocumentStore());
  assertEquals(numLeaves - 1,Iterators.size(root.getPreviousDocLeaves()));
  Iterator<NodeDocument> it=root.getPreviousDocLeaves();
  while (it.hasNext()) {
    NodeDocument leaf=it.next();
    Revision r=leaf.getAllChanges().iterator().next();
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getChanges() throws Exception {
  final int numChanges=200;
  Random random=new Random();
  DocumentNodeStore ns=createTestStore(numChanges);
  DocumentStore store=ns.getDocumentStore();
  NodeDocument doc=getRootDocument(store);
  for (int i=0; i < 10; i++) {
    int idx=random.nextInt(numChanges);
    Revision r=Iterables.get(doc.getValueMap("p").keySet(),idx);
    Iterable<Revision> revs=doc.getChanges("p",new RevisionVector(r));
    assertEquals(idx,Iterables.size(revs));
  }
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNewestRevision() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=createTestStore(store,1,0);
  DocumentNodeStore ns2=createTestStore(store,2,0);
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("test");
  merge(ns1,b1);
  RevisionVector headCreated=ns1.getHeadRevision();
  Revision created=headCreated.getRevision(ns1.getClusterId());
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test"));
  Set<Revision> collisions=newHashSet();
  Revision newest=doc.getNewestRevision(ns1,ns1.getHeadRevision(),ns1.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(0,collisions.size());
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertNull(newest);
  assertEquals(1,collisions.size());
  assertEquals(created,collisions.iterator().next());
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  collisions.clear();
  doc=store.find(NODES,Utils.getIdFromPath("/test"));
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(0,collisions.size());
  Revision uncommitted=ns1.newRevision();
  UpdateOp op=new UpdateOp(Utils.getIdFromPath("/test"),false);
  NodeDocument.setCommitRoot(op,uncommitted,0);
  op.setMapEntry("p",uncommitted,"v");
  assertNotNull(store.findAndUpdate(NODES,op));
  collisions.clear();
  doc=store.find(NODES,Utils.getIdFromPath("/test"));
  newest=doc.getNewestRevision(ns1,ns1.getHeadRevision(),ns1.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(1,collisions.size());
  assertEquals(uncommitted,collisions.iterator().next());
  collisions.clear();
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(1,collisions.size());
  assertEquals(uncommitted,collisions.iterator().next());
  b1=ns1.getRoot().builder();
  b1.child("test").setProperty("q","v");
  merge(ns1,b1);
  Revision committed=ns1.getHeadRevision().getRevision(ns1.getClusterId());
  collisions.clear();
  doc=store.find(NODES,Utils.getIdFromPath("/test"));
  newest=doc.getNewestRevision(ns1,headCreated,ns1.newRevision(),null,collisions);
  assertEquals(committed,newest);
  assertEquals(0,collisions.size());
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(2,collisions.size());
  assertTrue(collisions.contains(uncommitted));
  assertTrue(collisions.contains(committed));
  ns1.dispose();
  ns2.dispose();
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getChangesMixedClusterIds() throws Exception {
  final int numChanges=200;
  Random random=new Random();
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=createTestStore(store,1,0);
  DocumentNodeStore ns2=createTestStore(store,2,0);
  List<DocumentNodeStore> nodeStores=Lists.newArrayList(ns1,ns2);
  List<RevisionVector> headRevisions=Lists.newArrayList();
  for (int i=0; i < numChanges; i++) {
    DocumentNodeStore ns=nodeStores.get(random.nextInt(nodeStores.size()));
    ns.runBackgroundOperations();
    NodeBuilder builder=ns.getRoot().builder();
    builder.setProperty("p",i);
    merge(ns,builder);
    headRevisions.add(ns.getHeadRevision());
    ns.runBackgroundOperations();
    if (random.nextDouble() < 0.2) {
      RevisionVector head=ns.getHeadRevision();
      for (      UpdateOp op : SplitOperations.forDocument(getRootDocument(store),ns,head,2)) {
        store.createOrUpdate(NODES,op);
      }
    }
  }
  headRevisions=Lists.reverse(headRevisions);
  NodeDocument doc=getRootDocument(store);
  for (int i=0; i < 10; i++) {
    int idx=random.nextInt(numChanges);
    RevisionVector r=headRevisions.get(idx);
    Iterable<Revision> revs1=doc.getChanges("p",r);
    Iterable<Revision> revs2=doc.getChanges("p",r);
    assertEquals(Iterables.size(revs1),Iterables.size(revs2));
    assertEquals(idx,Iterables.size(revs1));
  }
  ns1.dispose();
  ns2.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.PathComparatorTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void sort(){
  List<String> paths=new ArrayList<String>();
  paths.add("/foo");
  paths.add("/foo/bar");
  paths.add("/bar/qux");
  paths.add("/");
  paths.add("/bar");
  Collections.sort(paths,PathComparator.INSTANCE);
  List<String> expected=Lists.newArrayList("/bar/qux","/foo/bar","/bar","/foo","/");
  assertEquals(expected,paths);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.PreviousDocCacheTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cacheTestPrevDocs() throws Exception {
  DocumentNodeStore ns=mk.getNodeStore();
  DocumentStore docStore=ns.getDocumentStore();
  final int SPLIT_THRESHOLD=10;
  NodeBuilder b;
  for (int j=0; j <= SPLIT_THRESHOLD; j++) {
    for (int i=0; i < SPLIT_THRESHOLD; i++) {
      b=ns.getRoot().builder();
      b.setProperty("foo","node-" + j + "-"+ i);
      merge(ns,b);
    }
    splitDocs(ns,SPLIT_THRESHOLD);
  }
  CacheStats nodesCache=null;
  CacheStats prevDocsCache=null;
  for (  CacheStats cacheStats : docStore.getCacheStats()) {
    if ("Document-Documents".equals(cacheStats.getName())) {
      nodesCache=cacheStats;
    }
 else     if ("Document-PrevDocuments".equals(cacheStats.getName())) {
      prevDocsCache=cacheStats;
    }
  }
  assertNotNull("Nodes cache must not be null",nodesCache);
  assertNotNull("Prev docs cache must not be null",prevDocsCache);
  validateFullyLoadedCache(docStore,SPLIT_THRESHOLD,nodesCache,prevDocsCache);
  docStore.invalidateCache();
  assertEquals("No entries expected in nodes cache",0,nodesCache.getElementCount());
  assertEquals("No entries expected in prev docs cache",0,prevDocsCache.getElementCount());
  NodeDocument doc=docStore.find(NODES,"0:/");
  assertEquals("Only main doc entry expected in nodes cache",1,nodesCache.getElementCount());
  assertEquals("No entries expected in prev docs cache",0,prevDocsCache.getElementCount());
  Iterators.size(doc.getAllPreviousDocs());
  validateFullyLoadedCache(docStore,SPLIT_THRESHOLD,nodesCache,prevDocsCache);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RangeTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void parse(){
  Revision low=Revision.fromString("r1-0-1");
  Revision high=Revision.fromString("r2-0-1");
  Range r=new Range(high,low,0);
  assertEquals("r1-0-1/0",r.getLowValue());
  assertEquals(r,Range.fromEntry(high,r.getLowValue()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RevisionTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void equalsHashCode(){
  Revision a=Revision.newRevision(0);
  Revision b=Revision.newRevision(0);
  assertTrue(a.equals(a));
  assertFalse(a.equals(b));
  assertFalse(b.equals(a));
  assertFalse(a.hashCode() == b.hashCode());
  Revision a1=Revision.fromString(a.toString());
  assertTrue(a.equals(a1));
  assertTrue(a1.equals(a));
  Revision a2=new Revision(a.getTimestamp(),a.getCounter(),a.getClusterId());
  assertTrue(a.equals(a2));
  assertTrue(a2.equals(a));
  assertEquals(a.hashCode(),a1.hashCode());
  assertEquals(a.hashCode(),a2.hashCode());
  Revision x1=new Revision(a.getTimestamp() + 1,a.getCounter(),a.getClusterId());
  assertFalse(a.equals(x1));
  assertFalse(x1.equals(a));
  assertFalse(a.hashCode() == x1.hashCode());
  Revision x2=new Revision(a.getTimestamp(),a.getCounter() + 1,a.getClusterId());
  assertFalse(a.equals(x2));
  assertFalse(x2.equals(a));
  assertFalse(a.hashCode() == x2.hashCode());
  Revision x3=new Revision(a.getTimestamp(),a.getCounter(),a.getClusterId() + 1);
  assertFalse(a.equals(x3));
  assertFalse(x3.equals(a));
  assertFalse(a.hashCode() == x3.hashCode());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fromStringToString(){
  for (int i=0; i < 10000; i++) {
    Revision r=Revision.newRevision(i);
    Revision r2=Revision.fromString(r.toString());
    assertEquals(r.toString(),r2.toString());
    assertEquals(r.hashCode(),r2.hashCode());
    assertTrue(r.equals(r2));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RevisionVectorTest </h4><pre class="type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void remove(){
  RevisionVector rv=new RevisionVector();
  assertSame(rv,rv.remove(1));
  Revision rev1=new Revision(1,0,1);
  Revision rev2=new Revision(1,0,2);
  Revision rev3=new Revision(1,0,3);
  rv=new RevisionVector(rev1);
  assertSame(rv,rv.remove(2));
  assertEquals(new RevisionVector(),rv.remove(rev1.getClusterId()));
  rv=new RevisionVector(rev1,rev2,rev3);
  assertEquals(new RevisionVector(rev2,rev3),rv.remove(rev1.getClusterId()));
  assertEquals(new RevisionVector(rev1,rev3),rv.remove(rev2.getClusterId()));
  assertEquals(new RevisionVector(rev1,rev2),rv.remove(rev3.getClusterId()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void equals(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(rv1,rv2);
  Revision r11=new Revision(1,0,1);
  rv1=rv1.update(r11);
  assertNotEquals(rv1,rv2);
  rv2=rv2.update(r11);
  assertEquals(rv1,rv2);
  Revision r12=new Revision(1,0,2);
  rv1=rv1.update(r12);
  assertNotEquals(rv1,rv2);
  rv2=rv2.update(r12);
  assertEquals(rv1,rv2);
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void construct(){
  RevisionVector rv=new RevisionVector();
  assertEquals(newHashSet(),newHashSet(rv));
  Revision rev1=new Revision(1,0,1);
  Revision rev2=new Revision(1,0,2);
  rv=new RevisionVector(newHashSet(rev1,rev2));
  assertEquals(newHashSet(rev1,rev2),newHashSet(rv));
  rv=new RevisionVector(Lists.newArrayList(rev1,rev2));
  assertEquals(newHashSet(rev1,rev2),newHashSet(rv));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getBranchRevision(){
  Revision r1=new Revision(1,0,1);
  Revision r2=new Revision(1,0,2,true);
  RevisionVector rv=new RevisionVector(r1,r2);
  assertEquals(r2,rv.getBranchRevision());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void asBranchRevision3(){
  Revision r11=new Revision(1,0,1);
  Revision br11=r11.asBranchRevision();
  RevisionVector rv=new RevisionVector(r11);
  assertEquals(new RevisionVector(br11),rv.asBranchRevision(1));
  rv=rv.asTrunkRevision();
  Revision r12=new Revision(1,0,2);
  rv=rv.update(r12);
  assertEquals(new RevisionVector(br11,r12),rv.asBranchRevision(1));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void hashCodeTest(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(rv1.hashCode(),rv2.hashCode());
  Revision r11=new Revision(1,0,1);
  rv1=rv1.update(r11);
  rv2=rv2.update(r11);
  assertEquals(rv1.hashCode(),rv2.hashCode());
  Revision r12=new Revision(1,0,2);
  rv1=rv1.update(r12);
  rv2=rv2.update(r12);
  assertEquals(rv1.hashCode(),rv2.hashCode());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void pmin(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(newHashSet(),newHashSet(rv1.pmin(rv2)));
  Revision rev11=new Revision(1,0,1);
  Revision rev21=new Revision(2,0,1);
  Revision rev12=new Revision(1,0,2);
  Revision rev22=new Revision(2,0,2);
  rv1=rv1.update(rev11);
  assertEquals(newHashSet(),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(),newHashSet(rv2.pmin(rv1)));
  rv2=rv2.update(rev12);
  assertEquals(newHashSet(),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(),newHashSet(rv2.pmin(rv1)));
  rv1=rv1.update(rev12);
  assertEquals(newHashSet(rev12),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev12),newHashSet(rv2.pmin(rv1)));
  rv2=rv2.update(rev22);
  assertEquals(newHashSet(rev12),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev12),newHashSet(rv2.pmin(rv1)));
  rv2=rv2.update(rev11);
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv2.pmin(rv1)));
  rv1=rv1.update(rev21);
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv2.pmin(rv1)));
  rv1=rv1.update(rev22);
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv2.pmin(rv1)));
  rv2=rv2.update(rev21);
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv2.pmin(rv1)));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void pmax(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(newHashSet(),newHashSet(rv1.pmax(rv2)));
  Revision rev11=new Revision(1,0,1);
  Revision rev21=new Revision(2,0,1);
  Revision rev12=new Revision(1,0,2);
  Revision rev22=new Revision(2,0,2);
  rv1=rv1.update(rev11);
  assertEquals(newHashSet(rev11),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev11),newHashSet(rv2.pmax(rv1)));
  rv2=rv2.update(rev12);
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv2.pmax(rv1)));
  rv1=rv1.update(rev12);
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv2.pmax(rv1)));
  rv2=rv2.update(rev22);
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv2.pmax(rv1)));
  rv2=rv2.update(rev11);
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv2.pmax(rv1)));
  rv1=rv1.update(rev21);
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv2.pmax(rv1)));
  rv1=rv1.update(rev22);
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv2.pmax(rv1)));
  rv2=rv2.update(rev21);
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv2.pmax(rv1)));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void difference(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(new RevisionVector(),rv1.difference(rv2));
  Revision r11=new Revision(1,0,1);
  rv1=rv1.update(r11);
  assertEquals(new RevisionVector(r11),rv1.difference(rv2));
  assertEquals(new RevisionVector(),rv2.difference(rv1));
  rv2=rv2.update(r11);
  assertEquals(new RevisionVector(),rv1.difference(rv2));
  assertEquals(new RevisionVector(),rv2.difference(rv1));
  Revision r12=new Revision(1,0,2);
  rv1=rv1.update(r12);
  assertEquals(new RevisionVector(r12),rv1.difference(rv2));
  assertEquals(new RevisionVector(),rv2.difference(rv1));
  Revision r22=new Revision(2,0,2);
  rv2=rv2.update(r22);
  assertEquals(new RevisionVector(r12),rv1.difference(rv2));
  assertEquals(new RevisionVector(r22),rv2.difference(rv1));
  Revision r21=new Revision(2,0,1);
  rv1=rv1.update(r21);
  assertEquals(new RevisionVector(r21,r12),rv1.difference(rv2));
  assertEquals(new RevisionVector(r11,r22),rv2.difference(rv1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compareTo(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(0,rv1.compareTo(rv2));
  Revision r11=new Revision(1,0,1);
  rv1=rv1.update(r11);
  assertTrue(rv1.compareTo(rv2) > 0);
  assertTrue(rv2.compareTo(rv1) < 0);
  Revision r12=new Revision(1,0,2);
  rv2=rv2.update(r12);
  assertTrue(rv1.compareTo(rv2) > 0);
  assertTrue(rv2.compareTo(rv1) < 0);
  rv2=rv2.update(r11);
  assertTrue(rv1.compareTo(rv2) < 0);
  assertTrue(rv2.compareTo(rv1) > 0);
  rv1=rv1.update(r12);
  assertEquals(0,rv1.compareTo(rv2));
  assertEquals(0,rv2.compareTo(rv1));
  Revision r22=new Revision(2,0,2);
  rv2=rv2.update(r22);
  assertTrue(rv1.compareTo(rv2) < 0);
  assertTrue(rv2.compareTo(rv1) > 0);
  Revision rb22=r22.asBranchRevision();
  rv1=rv1.update(rb22);
  assertTrue(rv1.compareTo(rv2) < 0);
  assertTrue(rv2.compareTo(rv1) > 0);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getRevision(){
  RevisionVector rv=new RevisionVector();
  assertNull(rv.getRevision(1));
  Revision r11=new Revision(1,0,1);
  rv=rv.update(r11);
  assertEquals(r11,rv.getRevision(1));
  assertNull(rv.getRevision(2));
  Revision r13=new Revision(1,0,3);
  rv=rv.update(r13);
  assertEquals(r13,rv.getRevision(3));
  assertNull(rv.getRevision(2));
}

</code></pre>

<br>
<pre class="type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void update(){
  Revision rev1=new Revision(1,0,1);
  RevisionVector rv=new RevisionVector(rev1);
  assertEquals(1,Iterables.size(rv));
  assertSame(rv,rv.update(rev1));
  Revision rev2=new Revision(2,0,1);
  rv=rv.update(rev2);
  assertEquals(newHashSet(rev2),newHashSet(rv));
  Revision rev3=new Revision(3,0,2);
  rv=rv.update(rev3);
  assertEquals(newHashSet(rev2,rev3),newHashSet(rv));
  rev3=rev3.asBranchRevision();
  rv=rv.update(rev3);
  assertEquals(newHashSet(rev2,rev3),newHashSet(rv));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.SharedBlobStoreGCTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGC() throws Exception {
  log.debug("Running testGC()");
  cluster1.gc.collectGarbage(true);
  cluster2.gc.collectGarbage(true);
  cluster1.gc.collectGarbage(false);
  Assert.assertEquals(true,Sets.symmetricDifference(Sets.union(cluster1.getInitBlobs(),cluster2.getInitBlobs()),cluster1.getExistingBlobIds()).isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.SimpleTest </h4><pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeAndPropertyNames(){
  DocumentMK mk=createMK();
  String rev;
  String nodes;
  for (  String s : new String[]{"_","$","__","_id","$x",".",".\\","x\\","\\x","first.name"}) {
    String x2=Utils.escapePropertyName(s);
    String s2=Utils.unescapePropertyName(x2);
    if (!s.equals(s2)) {
      assertEquals(s,s2);
    }
    JsopBuilder jsop=new JsopBuilder();
    jsop.tag('+').key(s).object().key(s).value("x").endObject();
    rev=mk.commit("/",jsop.toString(),null,null);
    nodes=mk.getNodes("/" + s,rev,0,0,10,null);
    jsop=new JsopBuilder();
    jsop.object().key(s).value("x").key(":childNodeCount").value(0).endObject();
    String n=jsop.toString();
    assertEquals(n,nodes);
    nodes=mk.getNodes("/",rev,0,0,10,null);
    jsop=new JsopBuilder();
    jsop.object().key(s).object().endObject().key(":childNodeCount").value(1).endObject();
    n=jsop.toString();
    assertEquals(n,nodes);
    jsop=new JsopBuilder();
    jsop.tag('-').value(s);
    rev=mk.commit("/",jsop.toString(),rev,null);
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void move(){
  DocumentMK mk=createMK();
  String rev=mk.commit("/","+\"test\":{\"x\":\"1\",\"child\": {}}",null,null);
  rev=mk.commit("/",">\"test\": \"/test2\"",rev,null);
  String test=mk.getNodes("/test2",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"x\":\"1\",\"child\":{},\":childNodeCount\":1}",test);
  test=mk.getNodes("/test",rev,0,0,Integer.MAX_VALUE,null);
  assertNull(test);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void escapeUnescape(){
  DocumentMK mk=createMK();
  String rev;
  String nodes;
  Random r=new Random(1);
  for (int i=0; i < 20; i++) {
    int len=1 + r.nextInt(5);
    StringBuilder buff=new StringBuilder();
    for (int j=0; j < len; j++) {
      buff.append((char)(32 + r.nextInt(128)));
    }
    String s=buff.toString();
    String x2=Utils.escapePropertyName(s);
    String s2=Utils.unescapePropertyName(x2);
    if (!s.equals(s2)) {
      assertEquals(s,s2);
    }
    if (s.indexOf('/') >= 0) {
      continue;
    }
    JsopBuilder jsop=new JsopBuilder();
    jsop.tag('+').key(s).object().key(s).value("x").endObject();
    rev=mk.commit("/",jsop.toString(),null,null);
    nodes=mk.getNodes("/" + s,rev,0,0,100,null);
    jsop=new JsopBuilder();
    jsop.object().key(s).value("x").key(":childNodeCount").value(0).endObject();
    String n=jsop.toString();
    assertEquals(n,nodes);
    nodes=mk.getNodes("/",rev,0,0,100,null);
    jsop=new JsopBuilder();
    jsop.object().key(s).object().endObject().key(":childNodeCount").value(1).endObject();
    n=jsop.toString();
    assertEquals(n,nodes);
    jsop=new JsopBuilder();
    jsop.tag('-').value(s);
    rev=mk.commit("/",jsop.toString(),rev,null);
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void delete(){
  DocumentMK mk=createMK();
  DocumentNodeStore ns=mk.getNodeStore();
  mk.commit("/","+\"testDel\":{\"name\": \"Hello\"}",null,null);
  mk.commit("/testDel","+\"a\":{\"name\": \"World\"}",null,null);
  mk.commit("/testDel","+\"b\":{\"name\": \"!\"}",null,null);
  String r1=mk.commit("/testDel","+\"c\":{\"name\": \"!\"}",null,null);
  DocumentNodeState n=ns.getNode("/testDel",RevisionVector.fromString(r1));
  assertNotNull(n);
  Children c=ns.getChildren(n,null,Integer.MAX_VALUE);
  assertEquals(3,c.children.size());
  String r2=mk.commit("/testDel","-\"c\"",null,null);
  n=ns.getNode("/testDel",RevisionVector.fromString(r2));
  assertNotNull(n);
  c=ns.getChildren(n,null,Integer.MAX_VALUE);
  assertEquals(2,c.children.size());
  String r3=mk.commit("/","-\"testDel\"",null,null);
  n=ns.getNode("/testDel",RevisionVector.fromString(r3));
  assertNull(n);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void diff(){
  DocumentMK mk=createMK();
  String rev0=mk.getHeadRevision();
  String rev1=mk.commit("/","+\"t1\":{}",null,null);
  String rev2=mk.commit("/","+\"t2\":{}",null,null);
  String rev3=mk.commit("/","+\"t3\":{}",null,null);
  String rev4=mk.commit("/","^\"t3/x\":1",null,null);
  String r0=mk.getNodes("/",rev0,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\":childNodeCount\":0}",r0);
  String r1=mk.getNodes("/",rev1,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"t1\":{},\":childNodeCount\":1}",r1);
  String r2=mk.getNodes("/",rev2,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"t1\":{},\"t2\":{},\":childNodeCount\":2}",r2);
  String r3=mk.getNodes("/",rev3,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"t1\":{},\"t2\":{},\"t3\":{},\":childNodeCount\":3}",r3);
  String diff01=mk.diff(rev0,rev1,"/",0).trim();
  assertEquals("+\"/t1\":{}",diff01);
  String diff12=mk.diff(rev1,rev2,"/",0).trim();
  assertEquals("+\"/t2\":{}",diff12);
  String diff23=mk.diff(rev2,rev3,"/",0).trim();
  assertEquals("+\"/t3\":{}",diff23);
  String diff13=mk.diff(rev1,rev3,"/",0).trim();
  assertEquals("+\"/t2\":{}+\"/t3\":{}",diff13);
  String diff34=mk.diff(rev3,rev4,"/",0).trim();
  assertEquals("^\"/t3\":{}",diff34);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void copy(){
  DocumentMK mk=createMK();
  String rev=mk.commit("/","+\"test\":{\"x\":\"1\",\"child\": {}}",null,null);
  rev=mk.commit("/","*\"test\": \"/test2\"",rev,null);
  String test=mk.getNodes("/test2",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"x\":\"1\",\"child\":{},\":childNodeCount\":1}",test);
  test=mk.getNodes("/test",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"x\":\"1\",\"child\":{},\":childNodeCount\":1}",test);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeIdentifier(){
  DocumentMK mk=createMK(true);
  String rev0=mk.getHeadRevision();
  String rev1=mk.commit("/","+\"test\":{}",null,null);
  String rev2=mk.commit("/test","+\"a\":{}",null,null);
  String rev3=mk.commit("/test","+\"b\":{}",null,null);
  String rev4=mk.commit("/test","^\"a/x\":1",null,null);
  String r0=mk.getNodes("/",rev0,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/@r0-0-1\",\":childNodeCount\":0}",r0);
  String r1=mk.getNodes("/",rev1,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/@r1-0-1\",\"test\":{},\":childNodeCount\":1}",r1);
  String r2=mk.getNodes("/",rev2,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/@r2-0-1\",\"test\":{},\":childNodeCount\":1}",r2);
  String r3;
  r3=mk.getNodes("/",rev3,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/@r3-0-1\",\"test\":{},\":childNodeCount\":1}",r3);
  r3=mk.getNodes("/test",rev3,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/test@r3-0-1\",\"a\":{},\"b\":{},\":childNodeCount\":2}",r3);
  String r4;
  r4=mk.getNodes("/",rev4,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/@r4-0-1\",\"test\":{},\":childNodeCount\":1}",r4);
  r4=mk.getNodes("/test",rev4,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/test@r4-0-1\",\"a\":{},\"b\":{},\":childNodeCount\":2}",r4);
  r4=mk.getNodes("/test/a",rev4,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/test/a@r4-0-1\",\"x\":1,\":childNodeCount\":0}",r4);
  r4=mk.getNodes("/test/b",rev4,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/test/b@r3-0-1\",\":childNodeCount\":0}",r4);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void pathToId(){
  assertEquals("0:/",Utils.getIdFromPath("/"));
  assertEquals("/",Utils.getPathFromId("0:/"));
  assertEquals("1:/test",Utils.getIdFromPath("/test"));
  assertEquals("/test",Utils.getPathFromId("1:/test"));
  assertEquals("10:/1/2/3/3/4/6/7/8/9/a",Utils.getIdFromPath("/1/2/3/3/4/6/7/8/9/a"));
  assertEquals("/1/2/3/3/4/6/7/8/9/a",Utils.getPathFromId("10:/1/2/3/3/4/6/7/8/9/a"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void escapePropertyName(){
  DocumentMK mk=createMK();
  String rev=mk.commit("/","+\"test1\":{\"name.first\": \"Hello\"} +\"test2\":{\"_id\": \"a\"} +\"test3\":{\"$x\": \"1\"}",null,null);
  String test1=mk.getNodes("/test1",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"name.first\":\"Hello\",\":childNodeCount\":0}",test1);
  String test2=mk.getNodes("/test2",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"_id\":\"a\",\":childNodeCount\":0}",test2);
  String test3=mk.getNodes("/test3",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"$x\":\"1\",\":childNodeCount\":0}",test3);
  mk.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void commit(){
  DocumentMK mk=createMK();
  DocumentNodeStore ns=mk.getNodeStore();
  String rev=mk.commit("/","+\"test\":{\"name\": \"Hello\"}",null,null);
  String test=mk.getNodes("/test",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"name\":\"Hello\",\":childNodeCount\":0}",test);
  String r0=mk.commit("/test","+\"a\":{\"name\": \"World\"}",null,null);
  String r1=mk.commit("/test","+\"b\":{\"name\": \"!\"}",null,null);
  test=mk.getNodes("/test",r0,0,0,Integer.MAX_VALUE,null);
  DocumentNodeState n=ns.getNode("/",RevisionVector.fromString(r0));
  assertNotNull(n);
  Children c=ns.getChildren(n,null,Integer.MAX_VALUE);
  assertEquals("[test]",c.toString());
  n=ns.getNode("/test",RevisionVector.fromString(r1));
  assertNotNull(n);
  c=ns.getChildren(n,null,Integer.MAX_VALUE);
  assertEquals("[a, b]",c.toString());
  rev=mk.commit("","^\"/test\":1",null,null);
  test=mk.getNodes("/",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"test\":1,\"test\":{},\":childNodeCount\":1}",test);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void commitRoot(){
  DocumentMK mk=createMK();
  DocumentStore store=mk.getDocumentStore();
  Revision head=Revision.fromString(mk.getHeadRevision());
  head=Revision.fromString(mk.commit("","+\"/test\":{\"foo\":{}}",head.toString(),null));
  NodeDocument rootDoc=store.find(Collection.NODES,"0:/");
  NodeDocument node=store.find(Collection.NODES,"1:/test");
  NodeDocument foo=store.find(Collection.NODES,"2:/test/foo");
  assertNotNull(foo);
  assertFalse(foo.containsRevision(head));
  assertEquals("/",foo.getCommitRootPath(head));
  head=Revision.fromString(mk.commit("","+\"/bar\":{}+\"/test/foo/bar\":{}",head.toString(),null));
  rootDoc=store.find(Collection.NODES,"0:/");
  assertNotNull(rootDoc);
  assertTrue(rootDoc.containsRevision(head));
  NodeDocument bar=store.find(Collection.NODES,"1:/bar");
  assertNotNull(bar);
  assertEquals("/",bar.getCommitRootPath(head));
  bar=store.find(Collection.NODES,"3:/test/foo/bar");
  assertNotNull(bar);
  assertEquals("/",bar.getCommitRootPath(head));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void pathDepth(){
  assertEquals(0,Utils.pathDepth(""));
  assertEquals(0,Utils.pathDepth("/"));
  assertEquals(1,Utils.pathDepth("1/"));
  assertEquals(2,Utils.pathDepth("/a/"));
  assertEquals(2,Utils.pathDepth("/a/b"));
  assertEquals(3,Utils.pathDepth("/a/b/c"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addNodeGetNode(){
  DocumentMK mk=builderProvider.newBuilder().open();
  DocumentStore s=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  RevisionVector rev=RevisionVector.fromString(mk.getHeadRevision());
  DocumentNodeState n=new DocumentNodeState(ns,"/test",rev);
  n.setProperty("name","\"Hello\"");
  UpdateOp op=n.asOperation(rev.getRevision(ns.getClusterId()));
  NodeDocument.setRevision(op,rev.getRevision(ns.getClusterId()),"c");
  assertTrue(s.create(Collection.NODES,Lists.newArrayList(op)));
  DocumentNodeState n2=ns.getNode("/test",rev);
  assertNotNull(n2);
  PropertyState p=n2.getProperty("name");
  assertNotNull(p);
  assertEquals("Hello",p.getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void reAddDeleted2(){
  DocumentMK mk=createMK();
  String rev=mk.commit("/","+\"test\":{\"x\":\"1\",\"child\": {}}",null,null);
  rev=mk.commit("/","-\"test\"",rev,null);
  rev=mk.commit("/","+\"test\":{}  +\"test2\": {}",null,null);
  String test=mk.getNodes("/test",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\":childNodeCount\":0}",test);
  String test2=mk.getNodes("/test2",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\":childNodeCount\":0}",test2);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void reAddDeleted(){
  DocumentMK mk=createMK();
  String rev0=mk.getHeadRevision();
  String rev1=mk.commit("/","+\"test\":{\"name\": \"Hello\"} ^ \"x\": 1",null,null);
  String rev2=mk.commit("/","-\"test\" ^ \"x\": 2",null,null);
  String rev3=mk.commit("/","+\"test\":{\"name\": \"Hallo\"} ^ \"x\": 3",null,null);
  String test0=mk.getNodes("/test",rev0,0,0,Integer.MAX_VALUE,null);
  assertNull(null,test0);
  String test1=mk.getNodes("/test",rev1,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"name\":\"Hello\",\":childNodeCount\":0}",test1);
  String test2=mk.getNodes("/test",rev2,0,0,Integer.MAX_VALUE,null);
  assertNull(null,test2);
  String test3=mk.getNodes("/test",rev3,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"name\":\"Hallo\",\":childNodeCount\":0}",test3);
  mk.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.UpdateOpTest </h4><pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void notEqualsTest(){
  Revision r=Revision.newRevision(1);
  UpdateOp op=new UpdateOp("id",true);
  try {
    op.notEquals("p",r,"v");
    fail("expected " + IllegalStateException.class.getName());
  }
 catch (  IllegalStateException e) {
  }
  op=new UpdateOp("id",false);
  op.notEquals("p",r,"v");
  assertEquals(1,op.getConditions().size());
  UpdateOp.Key key=op.getConditions().keySet().iterator().next();
  assertEquals(r,key.getRevision());
  assertEquals("p",key.getName());
  UpdateOp.Condition c=op.getConditions().get(key);
  assertEquals(UpdateOp.Condition.Type.NOTEQUALS,c.type);
  assertEquals("v",c.value);
  op=new UpdateOp("id",false);
  op.notEquals("p",r,null);
  assertEquals(1,op.getConditions().size());
  key=op.getConditions().keySet().iterator().next();
  assertEquals(r,key.getRevision());
  assertEquals("p",key.getName());
  c=op.getConditions().get(key);
  assertEquals(UpdateOp.Condition.Type.NOTEQUALS,c.type);
  assertEquals(null,c.value);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void equalsTest(){
  Revision r=Revision.newRevision(1);
  UpdateOp op=new UpdateOp("id",true);
  try {
    op.equals("p",r,"v");
    fail("expected " + IllegalStateException.class.getName());
  }
 catch (  IllegalStateException e) {
  }
  op=new UpdateOp("id",false);
  op.equals("p",r,"v");
  assertEquals(1,op.getConditions().size());
  UpdateOp.Key key=op.getConditions().keySet().iterator().next();
  assertEquals(r,key.getRevision());
  assertEquals("p",key.getName());
  UpdateOp.Condition c=op.getConditions().get(key);
  assertEquals(UpdateOp.Condition.Type.EQUALS,c.type);
  assertEquals("v",c.value);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void combine(){
  UpdateOp op1=new UpdateOp("id",false);
  op1.set("p","value");
  UpdateOp op2=new UpdateOp("id",false);
  Revision r=Revision.newRevision(1);
  op2.containsMapEntry("e",r,true);
  UpdateOp combined=UpdateOp.combine("id",newArrayList(op1,op2));
  assertTrue(combined.hasChanges());
  assertEquals(1,combined.getChanges().size());
  assertEquals(1,combined.getConditions().size());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void containsMapEntry(){
  Revision r=Revision.newRevision(1);
  UpdateOp op=new UpdateOp("id",true);
  try {
    op.containsMapEntry("p",r,true);
    fail("expected " + IllegalStateException.class.getName());
  }
 catch (  IllegalStateException e) {
  }
  op=new UpdateOp("id",false);
  op.containsMapEntry("p",r,true);
  assertEquals(1,op.getConditions().size());
  UpdateOp.Key key=op.getConditions().keySet().iterator().next();
  assertEquals(r,key.getRevision());
  assertEquals("p",key.getName());
  UpdateOp.Condition c=op.getConditions().get(key);
  assertEquals(UpdateOp.Condition.EXISTS,c);
  op=new UpdateOp("id",false);
  op.containsMapEntry("p",r,false);
  assertEquals(1,op.getConditions().size());
  key=op.getConditions().keySet().iterator().next();
  assertEquals(r,key.getRevision());
  assertEquals("p",key.getName());
  c=op.getConditions().get(key);
  assertEquals(UpdateOp.Condition.MISSING,c);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shallowCopy(){
  UpdateOp op1=new UpdateOp("id",false);
  op1.set("p","value");
  UpdateOp op2=op1.shallowCopy("id");
  assertTrue(op2.hasChanges());
  assertEquals(1,op2.getChanges().size());
  assertEquals(0,op2.getConditions().size());
  Revision r=Revision.newRevision(1);
  op1.containsMapEntry("e",r,true);
  op2=op1.shallowCopy("id");
  assertEquals(1,op2.getConditions().size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getChanges(){
  UpdateOp op=new UpdateOp("id",false);
  assertEquals(0,op.getChanges().size());
  assertTrue(!op.hasChanges());
  op.set("p","value");
  assertEquals(1,op.getChanges().size());
  assertTrue(op.hasChanges());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void copy(){
  UpdateOp op1=new UpdateOp("id",false);
  op1.set("p","value");
  UpdateOp op2=op1.copy();
  assertTrue(op2.hasChanges());
  assertEquals(1,op2.getChanges().size());
  assertEquals(0,op2.getConditions().size());
  Revision r=Revision.newRevision(1);
  op1.containsMapEntry("e",r,true);
  op2=op1.copy();
  assertEquals(1,op2.getConditions().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.UpdateUtilsTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void applyChanges(){
  Revision r=Revision.newRevision(1);
  String id=Utils.getIdFromPath("/foo");
  Document d=new Document();
  d.put(Document.ID,id);
  UpdateOp op=newUpdateOp(id);
  op.set("p",42L);
  UpdateUtils.applyChanges(d,op);
  assertEquals(42L,d.get("p"));
  op=newUpdateOp(id);
  op.max("p",23L);
  UpdateUtils.applyChanges(d,op);
  assertEquals(42L,d.get("p"));
  op=newUpdateOp(id);
  op.max("p",58L);
  UpdateUtils.applyChanges(d,op);
  assertEquals(58L,d.get("p"));
  op=newUpdateOp(id);
  op.increment("p",3);
  UpdateUtils.applyChanges(d,op);
  assertEquals(61L,d.get("p"));
  op=newUpdateOp(id);
  op.setMapEntry("t",r,"value");
  UpdateUtils.applyChanges(d,op);
  assertEquals("value",getMapEntry(d,"t",r));
  op=newUpdateOp(id);
  op.removeMapEntry("t",r);
  UpdateUtils.applyChanges(d,op);
  assertNull(getMapEntry(d,"t",r));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ValueMapTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void previousDocs1(){
  String rootPath="/";
  String rootId=Utils.getIdFromPath(rootPath);
  Revision r0=new Revision(0,0,1);
  MemoryDocumentStore store=new MemoryDocumentStore();
  UpdateOp op=new UpdateOp(Utils.getPreviousIdFor(rootPath,r0,0),true);
  op.set(ID,op.getId());
  op.setMapEntry("prop",r0,"0");
  NodeDocument.setRevision(op,r0,"c");
  store.createOrUpdate(NODES,op);
  Revision r1low=new Revision(1,0,1);
  Revision r1high=new Revision(1,10,1);
  op=new UpdateOp(Utils.getPreviousIdFor(rootPath,r1high,0),true);
  op.set(ID,op.getId());
  for (int i=r1low.getCounter(); i <= r1high.getCounter(); i++) {
    Revision r=new Revision(1,i,1);
    op.setMapEntry("foo",r,String.valueOf(i));
    NodeDocument.setRevision(op,r,"c");
  }
  store.createOrUpdate(NODES,op);
  op=new UpdateOp(rootId,true);
  op.set(ID,op.getId());
  Revision r2=new Revision(2,0,1);
  op.setMapEntry("prop",r2,"1");
  NodeDocument.setRevision(op,r2,"c");
  NodeDocument.setPrevious(op,new Range(r0,r0,0));
  NodeDocument.setPrevious(op,new Range(r1high,r1low,0));
  store.createOrUpdate(NODES,op);
  NodeDocument doc=store.find(NODES,rootId);
  assertNotNull(doc);
  Set<Revision> revs=doc.getValueMap("prop").keySet();
  assertEquals(2,revs.size());
  assertTrue(revs.contains(r0));
  assertTrue(revs.contains(r2));
  Iterator<Revision> it=revs.iterator();
  assertTrue(it.hasNext());
  assertEquals(r2,it.next());
  assertTrue(it.hasNext());
  assertEquals(r0,it.next());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void previousDocs2(){
  MemoryDocumentStore store=new MemoryDocumentStore();
  String rootPath="/";
  String rootId=Utils.getIdFromPath(rootPath);
  Revision r01=new Revision(0,0,1);
  Revision r12=new Revision(1,0,2);
  Revision r22=new Revision(2,0,2);
  Revision r31=new Revision(3,0,1);
  Revision r42=new Revision(4,0,2);
  Revision r51=new Revision(5,0,1);
  UpdateOp op=new UpdateOp(Utils.getPreviousIdFor(rootPath,r31,0),true);
  op.set(ID,op.getId());
  op.setMapEntry("p0",r01,"0");
  NodeDocument.setRevision(op,r01,"c");
  op.setMapEntry("p1",r31,"1");
  NodeDocument.setRevision(op,r31,"c");
  store.createOrUpdate(NODES,op);
  op=new UpdateOp(Utils.getPreviousIdFor(rootPath,r42,0),true);
  op.set(ID,op.getId());
  op.setMapEntry("p1",r12,"0");
  NodeDocument.setRevision(op,r12,"c");
  op.setMapEntry("p1",r22,"1");
  NodeDocument.setRevision(op,r22,"c");
  op.setMapEntry("p0",r42,"1");
  NodeDocument.setRevision(op,r42,"c");
  store.createOrUpdate(NODES,op);
  op=new UpdateOp(rootId,true);
  op.set(ID,op.getId());
  op.setMapEntry("p0",r51,"2");
  op.setMapEntry("p1",r51,"2");
  NodeDocument.setRevision(op,r51,"c");
  NodeDocument.setPrevious(op,new Range(r42,r12,0));
  NodeDocument.setPrevious(op,new Range(r31,r01,0));
  store.createOrUpdate(NODES,op);
  NodeDocument doc=store.find(NODES,rootId);
  assertNotNull(doc);
  List<NodeDocument> prevDocs=Lists.newArrayList(doc.getPreviousDocs("p1",null));
  assertEquals(2,prevDocs.size());
  assertEquals(Utils.getPreviousIdFor(rootPath,r31,0),prevDocs.get(0).getId());
  assertEquals(Utils.getPreviousIdFor(rootPath,r42,0),prevDocs.get(1).getId());
  List<Revision> revs=new ArrayList<Revision>();
  for (  Revision r : doc.getValueMap("p1").keySet()) {
    revs.add(r);
  }
  assertEquals(Arrays.asList(r51,r31,r22,r12),revs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.VersionGCDeletionTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void gcWithPathsHavingNewLine() throws Exception {
  int noOfDocsToDelete=200;
  DocumentStore ts=new MemoryDocumentStore();
  store=new DocumentMK.Builder().clock(clock).setDocumentStore(new MemoryDocumentStore()).setAsyncDelay(0).getNodeStore();
  clock.waitUntil(Revision.getCurrentTimestamp());
  NodeBuilder b1=store.getRoot().builder();
  NodeBuilder xb=b1.child("x");
  for (int i=0; i < noOfDocsToDelete - 1; i++) {
    xb.child("a" + i).child("b" + i);
  }
  xb.child("a-1").child("b\r");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x").remove();
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge * 2) + delta);
  VersionGarbageCollector gc=store.getVersionGarbageCollector();
  gc.setOverflowToDiskThreshold(100);
  VersionGCStats stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(noOfDocsToDelete * 2 + 1,stats.deletedDocGCCount);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void queryWhileDocsAreRemoved() throws Exception {
  clock.waitUntil(Revision.getCurrentTimestamp());
  final Thread currentThread=Thread.currentThread();
  final Semaphore queries=new Semaphore(0);
  final CountDownLatch ready=new CountDownLatch(1);
  MemoryDocumentStore ms=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      if (Thread.currentThread() != currentThread) {
        ready.countDown();
        queries.acquireUninterruptibly();
      }
      return super.find(collection,key);
    }
  }
;
  store=new DocumentMK.Builder().clock(clock).setDocumentStore(ms).setAsyncDelay(0).getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder node=builder.child("node");
  for (int i=0; i < 200; i++) {
    node.child("c-" + i);
  }
  merge(store,builder);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(1));
  builder=store.getRoot().builder();
  node=builder.child("node");
  for (int i=0; i < 90; i++) {
    node.getChildNode("c-" + i).remove();
  }
  merge(store,builder);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(1));
  List<String> expected=Lists.newArrayList();
  NodeState n=store.getRoot().getChildNode("node");
  for (  ChildNodeEntry entry : n.getChildNodeEntries()) {
    expected.add(entry.getName());
  }
  assertEquals(110,expected.size());
  store.invalidateNodeChildrenCache();
  Future<List<String>> f=newSingleThreadExecutor().submit(new Callable<List<String>>(){
    @Override public List<String> call() throws Exception {
      List<String> names=Lists.newArrayList();
      NodeState n=store.getRoot().getChildNode("node");
      for (      ChildNodeEntry entry : n.getChildNodeEntries()) {
        names.add(entry.getName());
      }
      return names;
    }
  }
);
  ready.await();
  VersionGarbageCollector gc=store.getVersionGarbageCollector();
  VersionGCStats stats=gc.gc(30,MINUTES);
  assertEquals(90,stats.deletedDocGCCount);
  queries.release(200);
  List<String> names=f.get();
  assertEquals(expected,names);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteLargeNumber() throws Exception {
  int noOfDocsToDelete=10000;
  DocumentStore ts=new MemoryDocumentStore();
  store=new DocumentMK.Builder().clock(clock).setDocumentStore(new MemoryDocumentStore()).setAsyncDelay(0).getNodeStore();
  clock.waitUntil(Revision.getCurrentTimestamp());
  NodeBuilder b1=store.getRoot().builder();
  NodeBuilder xb=b1.child("x");
  for (int i=0; i < noOfDocsToDelete; i++) {
    xb.child("a" + i).child("b" + i);
  }
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x").remove();
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge * 2) + delta);
  VersionGarbageCollector gc=store.getVersionGarbageCollector();
  gc.setOverflowToDiskThreshold(100);
  VersionGCStats stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(noOfDocsToDelete * 2 + 1,stats.deletedDocGCCount);
  assertNull(ts.find(Collection.NODES,"1:/x"));
  for (int i=0; i < noOfDocsToDelete; i++) {
    assertNull(ts.find(Collection.NODES,"2:/a" + i + "/b"+ i));
    assertNull(ts.find(Collection.NODES,"1:/a" + i));
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcForPreviousDocs() throws Exception {
  DocumentStore ts=new MemoryDocumentStore();
  store=new DocumentMK.Builder().clock(clock).setDocumentStore(ts).setAsyncDelay(0).getNodeStore();
  clock.waitUntil(Revision.getCurrentTimestamp());
  NodeBuilder b1;
  NodeBuilder xb;
  boolean create=true;
  for (int i=0; create || i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    b1=store.getRoot().builder();
    xb=b1.child("x").child("split");
    if (!create) {
      xb.remove();
    }
    store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    create=!create;
  }
  store.runBackgroundOperations();
  NodeDocument doc=ts.find(Collection.NODES,"2:/x/split");
  int splitDocCount=Iterators.size(doc.getAllPreviousDocs());
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x").remove();
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge * 2) + delta);
  VersionGarbageCollector gc=store.getVersionGarbageCollector();
  VersionGCStats stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(2,stats.deletedDocGCCount);
  assertEquals(splitDocCount,stats.splitDocGCCount);
  assertNull(ts.find(Collection.NODES,"1:/x"));
  assertNull(ts.find(Collection.NODES,"2:/x/split"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.VersionGCWithSplitTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcWithConcurrentSplit() throws Exception {
  Revision.setClock(clock);
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").setProperty("prop",-1);
  merge(store,builder);
  final String id=Utils.getIdFromPath("/test");
  DocumentStore docStore=store.getDocumentStore();
  int count=0;
  while (docStore.find(NODES,id).getPreviousRanges().size() < PREV_SPLIT_FACTOR) {
    builder=store.getRoot().builder();
    builder.child("test").setProperty("prop",count);
    merge(store,builder);
    if (count++ % NUM_REVS_THRESHOLD == 0) {
      store.runBackgroundOperations();
    }
  }
  clock.waitUntil(Revision.getCurrentTimestamp() + HOURS.toMillis(1) + 2 * SECONDS.toMillis(MODIFIED_IN_SECS_RESOLUTION));
  final AtomicReference<VersionGarbageCollector.VersionGCStats> stats=new AtomicReference<VersionGarbageCollector.VersionGCStats>();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        stats.set(gc.gc(1,HOURS));
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
);
  Semaphore gcLock=new Semaphore(0);
  updateLocks.put(t,gcLock);
  t.start();
  while (!gcLock.hasQueuedThreads()) {
    Thread.sleep(1);
  }
  while (docStore.find(NODES,id).getPreviousRanges().size() >= PREV_SPLIT_FACTOR) {
    builder=store.getRoot().builder();
    builder.child("test").setProperty("prop",count);
    merge(store,builder);
    if (count++ % NUM_REVS_THRESHOLD == 0) {
      store.runBackgroundOperations();
    }
  }
  gcLock.release();
  t.join();
  assertEquals(10,stats.get().splitDocGCCount);
  NodeDocument doc=docStore.find(NODES,id);
  assertEquals(1,doc.getStalePrev().size());
  store.addSplitCandidate(id);
  store.runBackgroundOperations();
  doc=docStore.find(NODES,id);
  assertTrue(doc.getStalePrev().isEmpty());
  Map<Revision,String> valueMap=doc.getValueMap("prop");
  assertEquals(NUM_REVS_THRESHOLD + 1,valueMap.size());
  assertEquals(NUM_REVS_THRESHOLD + 1,size(valueMap.entrySet()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.VersionGarbageCollectorIT </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGCDeletedDocument() throws Exception {
  NodeBuilder b1=store.getRoot().builder();
  b1.child("x").child("y");
  b1.child("z");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  clock.waitUntil(Revision.getCurrentTimestamp() + maxAge);
  VersionGCStats stats=gc.gc(maxAge,HOURS);
  assertEquals(0,stats.deletedDocGCCount);
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x").child("y").remove();
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + delta);
  stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(0,stats.deletedDocGCCount);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge * 2) + delta);
  stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(1,stats.deletedDocGCCount);
  NodeBuilder b3=store.getRoot().builder();
  b3.child("z").remove();
  store.merge(b3,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeBuilder b4=store.getRoot().builder();
  b4.child("z");
  store.merge(b4,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge * 2) + delta);
  stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(0,stats.deletedDocGCCount);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void cacheConsistency() throws Exception {
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  Set<String> names=Sets.newHashSet();
  NodeBuilder b1=store.getRoot().builder();
  for (int i=0; i < 10; i++) {
    String name="test-" + i;
    b1.child(name);
    names.add(name);
  }
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (  ChildNodeEntry entry : store.getRoot().getChildNodeEntries()) {
    entry.getNodeState();
  }
  b1=store.getRoot().builder();
  b1.getChildNode("test-7").remove();
  names.remove("test-7");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge) + delta);
  VersionGCStats stats=gc.gc(maxAge,HOURS);
  assertEquals(1,stats.deletedDocGCCount);
  Set<String> children=Sets.newHashSet();
  for (  ChildNodeEntry entry : store.getRoot().getChildNodeEntries()) {
    children.add(entry.getName());
  }
  assertEquals(names,children);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcPrevWithMostRecentModification() throws Exception {
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  for (int i=0; i < NUM_REVS_THRESHOLD + 1; i++) {
    NodeBuilder builder=store.getRoot().builder();
    builder.child("foo").setProperty("prop","v" + i);
    builder.child("bar").setProperty("prop","v" + i);
    store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge) + delta);
  VersionGCStats stats=gc.gc(maxAge,HOURS);
  assertEquals(2,stats.splitDocGCCount);
  NodeDocument doc=getDoc("/foo");
  assertNotNull(doc);
  DocumentNodeState state=doc.getNodeAtRevision(store,store.getHeadRevision(),null);
  assertNotNull(state);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcWithConcurrentModification() throws Exception {
  Revision.setClock(clock);
  DocumentStore ds=store.getDocumentStore();
  createTestNode("foo");
  createTestNode("bar");
  NodeBuilder builder=store.getRoot().builder();
  builder.getChildNode("foo").remove();
  builder.getChildNode("bar").remove();
  merge(store,builder);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(1));
  final BlockingQueue<NodeDocument> docs=Queues.newSynchronousQueue();
  VersionGCSupport gcSupport=new VersionGCSupport(store.getDocumentStore()){
    @Override public Iterable<NodeDocument> getPossiblyDeletedDocs(    long lastModifiedTime){
      return filter(super.getPossiblyDeletedDocs(lastModifiedTime),new Predicate<NodeDocument>(){
        @Override public boolean apply(        NodeDocument input){
          try {
            docs.put(input);
          }
 catch (          InterruptedException e) {
            throw new RuntimeException(e);
          }
          return true;
        }
      }
);
    }
  }
;
  final VersionGarbageCollector gc=new VersionGarbageCollector(store,gcSupport);
  Future<VersionGCStats> f=execService.submit(new Callable<VersionGCStats>(){
    @Override public VersionGCStats call() throws Exception {
      return gc.gc(30,MINUTES);
    }
  }
);
  NodeDocument doc=docs.take();
  String name=PathUtils.getName(doc.getPath());
  name=name.equals("foo") ? "bar" : "foo";
  builder=store.getRoot().builder();
  builder.child(name);
  merge(store,builder);
  for (  ChildNodeEntry cne : store.getRoot().getChildNodeEntries()) {
    cne.getName();
  }
  DocumentNodeState state=(DocumentNodeState)store.getRoot().getChildNode(name);
  store.invalidateNodeCache(state.getPath(),state.getRevision());
  while (!f.isDone()) {
    docs.poll();
  }
  List<String> names=Lists.newArrayList();
  for (  ChildNodeEntry cne : store.getRoot().getChildNodeEntries()) {
    names.add(cne.getName());
  }
  assertEquals(1,names.size());
  doc=ds.find(NODES,Utils.getIdFromPath("/" + names.get(0)));
  assertNotNull(doc);
  assertEquals(0,Iterators.size(doc.getAllPreviousDocs()));
  VersionGCStats stats=f.get();
  assertEquals(1,stats.deletedDocGCCount);
  assertEquals(2,stats.splitDocGCCount);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcIntermediateDocs() throws Exception {
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  NodeBuilder b1=store.getRoot().builder();
  b1.child("test");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(getDoc("/test").getLocalRevisions().isEmpty());
  b1=store.getRoot().builder();
  b1.child("test").setProperty("test","value");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(!getDoc("/test").getLocalRevisions().isEmpty());
  for (int i=0; i < PREV_SPLIT_FACTOR; i++) {
    for (int j=0; j < NUM_REVS_THRESHOLD; j++) {
      b1=store.getRoot().builder();
      b1.child("test").setProperty("prop",i * NUM_REVS_THRESHOLD + j);
      store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    }
    store.runBackgroundOperations();
  }
  store.addSplitCandidate(Utils.getIdFromPath("/test"));
  store.runBackgroundOperations();
  Map<Revision,Range> prevRanges=getDoc("/test").getPreviousRanges();
  boolean hasIntermediateDoc=false;
  for (  Map.Entry<Revision,Range> entry : prevRanges.entrySet()) {
    if (entry.getValue().getHeight() > 0) {
      hasIntermediateDoc=true;
      break;
    }
  }
  assertTrue("Test data does not have intermediate previous docs",hasIntermediateDoc);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge) + delta);
  VersionGCStats stats=gc.gc(maxAge,HOURS);
  assertEquals(10,stats.splitDocGCCount);
  DocumentNodeState test=getDoc("/test").getNodeAtRevision(store,store.getHeadRevision(),null);
  assertNotNull(test);
  assertTrue(test.hasProperty("test"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.VisibleChangesTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionablePathHook() throws CommitFailedException {
  TestStore store=new TestStore();
  DocumentNodeStore ns=new DocumentMK.Builder().setDocumentStore(store).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.child(":hidden");
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  builder=ns.getRoot().builder();
  NodeBuilder hidden=builder.child(":hidden");
  for (int i=0; i <= DocumentMK.MANY_CHILDREN_THRESHOLD; i++) {
    hidden.child("child-" + i);
  }
  NodeBuilder foo=builder.child("foo");
  int numRevs=getRevisionsSize(store,"/");
  while (numRevs == getRevisionsSize(store,"/")) {
    foo.setProperty("p","v");
    foo.removeProperty("p");
  }
  store.paths.clear();
  VersionablePathHook hook=new VersionablePathHook("default");
  hook.processCommit(ns.getRoot(),builder.getNodeState(),CommitInfo.EMPTY);
  assertEquals("Must not query for hidden paths: " + store.paths.toString(),0,store.paths.size());
  ns.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.CacheInvalidationIT </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCacheInvalidation() throws CommitFailedException {
  final int totalPaths=createScenario();
  NodeBuilder b2=getRoot(c2).builder();
  builder(b2,"/a/d").setProperty("foo","bar");
  c2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  c2.runBackgroundOperations();
  c1.runBackgroundOperations();
  assertEquals(initialCacheSizeC1 + totalPaths - 2,size(ds(c1).getNodeDocumentCache().keys()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.MongoDocumentStoreTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timeoutQuery(){
  String fromId=Utils.getKeyLowerLimit("/");
  String toId=Utils.getKeyUpperLimit("/");
  store.setMaxLockedQueryTimeMS(1);
  long index=0;
  for (int i=0; i < 100; i++) {
    StringBuilder sb=new StringBuilder();
    for (int j=0; j < 1000; j++) {
      sb.append("+\"node-").append(index++).append("\":{}");
    }
    mk.commit("/",sb.toString(),null,null);
    store.queriesWithoutLock.set(0);
    store.resetLockAcquisitionCount();
    List<NodeDocument> docs=store.query(Collection.NODES,fromId,toId,"foo",System.currentTimeMillis(),Integer.MAX_VALUE);
    assertTrue(docs.isEmpty());
    if (store.queriesWithoutLock.get() > 0) {
      assertEquals(1,store.getLockAcquisitionCount());
      return;
    }
  }
  fail("No query timeout triggered even after adding " + index + " nodes");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.MongoUtilsTest </h4><pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createIndex(){
  MongoConnection c=connectionFactory.getConnection();
  c.getDB().dropDatabase();
  DBCollection collection=c.getDB().getCollection("test");
  MongoUtils.createIndex(collection,"foo",true,false,true);
  MongoUtils.createIndex(collection,"bar",false,true,false);
  MongoUtils.createIndex(collection,new String[]{"baz","qux"},new boolean[]{true,false},false,false);
  assertTrue(MongoUtils.hasIndex(collection,"_id"));
  assertTrue(MongoUtils.hasIndex(collection,"foo"));
  assertFalse(MongoUtils.hasIndex(collection,"foo","bar"));
  assertTrue(MongoUtils.hasIndex(collection,"baz","qux"));
  assertEquals(4,collection.getIndexInfo().size());
  for (  DBObject info : collection.getIndexInfo()) {
    DBObject key=(DBObject)info.get("key");
    if (key.keySet().contains("foo")) {
      assertEquals(1,key.keySet().size());
      assertEquals(1,key.get("foo"));
      assertEquals(Boolean.TRUE,info.get("sparse"));
    }
 else     if (key.keySet().contains("bar")) {
      assertEquals(1,key.keySet().size());
      assertEquals(-1,key.get("bar"));
      assertEquals(Boolean.TRUE,info.get("unique"));
    }
 else     if (key.keySet().contains("baz")) {
      assertEquals(2,key.keySet().size());
      assertEquals(1,key.get("baz"));
      assertEquals(-1,key.get("qux"));
    }
  }
  c.getDB().dropDatabase();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.ReadPreferenceIT </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMongoReadPreferencesWithAge() throws Exception {
  ReadPreference testPref=ReadPreference.secondary();
  mongoDS.getDBCollection(NODES).getDB().setReadPreference(testPref);
  NodeStore nodeStore=mk.getNodeStore();
  NodeBuilder b1=nodeStore.getRoot().builder();
  b1.child("x").child("y");
  nodeStore.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  String id=Utils.getIdFromPath("/x/y");
  String parentId=Utils.getParentId(id);
  mongoDS.invalidateCache(NODES,id);
  assertEquals(ReadPreference.primary(),mongoDS.getMongoReadPreference(NODES,parentId,DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH));
  clock.waitUntil(Revision.getCurrentTimestamp() + replicationLag);
  mongoDS.setClock(clock);
  assertEquals(testPref,mongoDS.getMongoReadPreference(NODES,parentId,DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMongoReadPreferencesDefault() throws Exception {
  assertEquals(ReadPreference.primary(),mongoDS.getMongoReadPreference(NODES,"foo",DocumentReadPreference.PRIMARY));
  assertEquals(ReadPreference.primaryPreferred(),mongoDS.getMongoReadPreference(NODES,"foo",DocumentReadPreference.PREFER_PRIMARY));
  assertEquals(ReadPreference.primary(),mongoDS.getMongoReadPreference(NODES,"foo",DocumentReadPreference.PREFER_SECONDARY));
  mongoDS.getDBCollection(NODES).getDB().setReadPreference(ReadPreference.secondary());
  assertEquals(ReadPreference.secondary(),mongoDS.getMongoReadPreference(NODES,"foo",DocumentReadPreference.PREFER_SECONDARY));
  assertEquals(ReadPreference.primary(),mongoDS.getMongoReadPreference(NODES,"foo",DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH));
  assertEquals(ReadPreference.primary(),mongoDS.getMongoReadPreference(SETTINGS,"foo",DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadWriteMode() throws Exception {
  assertEquals(ReadPreference.primary(),mongoDS.getConfiguredReadPreference(NODES));
  mongoDS.setReadWriteMode("readPreference=secondary&w=2&safe=true&j=true");
  assertEquals(ReadPreference.secondary(),mongoDS.getDBCollection(NODES).getReadPreference());
  assertEquals(2,mongoDS.getDBCollection(NODES).getWriteConcern().getW());
  assertTrue(mongoDS.getDBCollection(NODES).getWriteConcern().getJ());
  assertEquals(ReadPreference.secondary(),mongoDS.getConfiguredReadPreference(NODES));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPreferenceConversion() throws Exception {
  assertEquals(DocumentReadPreference.PRIMARY,mongoDS.getReadPreference(0));
  assertEquals(DocumentReadPreference.PRIMARY,mongoDS.getReadPreference((int)(replicationLag - 100)));
  assertEquals(DocumentReadPreference.PREFER_SECONDARY,mongoDS.getReadPreference(Integer.MAX_VALUE));
  assertEquals(DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH,mongoDS.getReadPreference(-1));
  assertEquals(DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH,mongoDS.getReadPreference((int)(replicationLag + 100)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.persistentCache.CacheTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void interrupt() throws Exception {
  FileUtils.deleteDirectory(new File("target/cacheTest"));
  PersistentCache cache=new PersistentCache("target/cacheTest,size=1,-compress");
  try {
    CacheMap<String,String> m1=cache.openMap(0,"m1",null);
    CacheMap<String,String> m2=cache.openMap(0,"test",null);
    assertEquals(1,cache.getOpenCount());
    String largeString=new String(new char[1024 * 1024]);
    int count=10;
    for (int i=0; i < count; i++) {
      m1.put("x" + i,largeString);
      m2.put("y" + i,largeString);
    }
    Thread.currentThread().interrupt();
    for (int i=0; i < count; i++) {
      m1.get("x" + i);
      m2.get("y" + i);
    }
    assertEquals(2,cache.getOpenCount());
    assertFalse(Thread.interrupted());
  }
  finally {
    cache.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBDocumentSerializerTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidJsonSimple(){
  RDBJSONSupport json=new RDBJSONSupport(false);
  assertNull(json.parse("null"));
  assertTrue((Boolean)json.parse("true"));
  assertFalse((Boolean)json.parse("false"));
  assertEquals(123.45,(Number)json.parse("123.45"));
  assertEquals("\r\n\t\u00e0",(String)json.parse("\"\r\n\t\u00e0\""));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidJsonMap(){
  RDBJSONSupport json=new RDBJSONSupport(false);
  Map<String,Object> map=(Map<String,Object>)json.parse("{\"a\":true,\"b\":null,\"c\":123,\"d\":\"foobar\"}");
  assertEquals(4,map.size());
  assertTrue((Boolean)map.get("a"));
  assertTrue(map.containsKey("b"));
  assertNull(map.get("b"));
  assertEquals(123l,((Long)map.get("c")).longValue());
  assertEquals("foobar",(String)map.get("d"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleStringNonAscii(){
  RDBRow row=new RDBRow("_foo",true,false,1,2,3,"{\"x\":\"\u20ac\uD834\uDD1E\"}",null);
  NodeDocument doc=this.ser.fromRow(Collection.NODES,row);
  assertEquals("_foo",doc.getId());
  assertEquals("\u20ac\uD834\uDD1E",doc.get("x"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testValidJsonArray(){
  RDBJSONSupport json=new RDBJSONSupport(false);
  assertArrayEquals("",new Object[]{Boolean.TRUE},((List)json.parse("[true]")).toArray());
  assertArrayEquals("",new Object[]{Boolean.TRUE,null,123L,"foobar"},((List)json.parse("[true, null, 123, \"foobar\"]")).toArray());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleBlob() throws UnsupportedEncodingException {
  RDBRow row=new RDBRow("_foo",false,false,1,2,3,"\"blob\"","{}".getBytes("UTF-8"));
  NodeDocument doc=this.ser.fromRow(Collection.NODES,row);
  assertEquals("_foo",doc.getId());
  assertEquals(false,doc.hasBinary());
  assertEquals(2L,doc.getModCount().longValue());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBlobAndDiff() throws UnsupportedEncodingException {
  RDBRow row=new RDBRow("_foo",true,false,1,2,3,"\"blob\", [[\"=\", \"foo\", \"bar\"],[\"M\", \"m1\", 1],[\"M\", \"m2\", 3]]","{\"m1\":2, \"m2\":2}".getBytes("UTF-8"));
  NodeDocument doc=this.ser.fromRow(Collection.NODES,row);
  assertEquals("bar",doc.get("foo"));
  assertEquals(2L,doc.get("m1"));
  assertEquals(3L,doc.get("m2"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleString(){
  RDBRow row=new RDBRow("_foo",true,true,1,2,3,"{}",null);
  NodeDocument doc=this.ser.fromRow(Collection.NODES,row);
  assertEquals("_foo",doc.getId());
  assertEquals(true,doc.hasBinary());
  assertEquals(true,doc.get(NodeDocument.DELETED_ONCE));
  assertEquals(2L,doc.getModCount().longValue());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleBlob2() throws UnsupportedEncodingException {
  RDBRow row=new RDBRow("_foo",false,false,1,2,3,"\"blob\"","{\"s\":\"string\", \"b\":true, \"i\":1}".getBytes("UTF-8"));
  NodeDocument doc=this.ser.fromRow(Collection.NODES,row);
  assertEquals("_foo",doc.getId());
  assertEquals(false,doc.hasBinary());
  assertEquals(2L,doc.getModCount().longValue());
  assertEquals("string",doc.get("s"));
  assertEquals(Boolean.TRUE,doc.get("b"));
  assertEquals(1L,doc.get("i"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBDocumentStoreJDBCTest </h4><pre class="type-9 type-12 type-5 type-7 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void batchFailingInsertResult() throws SQLException {
  assumeTrue(super.dsf != DocumentStoreFixture.RDB_PG);
  String table=((RDBDocumentStore)super.ds).getTable(Collection.NODES).getName();
  Connection con=super.rdbDataSource.getConnection();
  con.setReadOnly(false);
  try {
    PreparedStatement st=con.prepareStatement("DELETE FROM " + table + " WHERE ID in (?, ?, ?)");
    setIdInStatement(st,1,"key-1");
    setIdInStatement(st,2,"key-2");
    setIdInStatement(st,3,"key-3");
    st.executeUpdate();
    st.close();
    con.commit();
    removeMe.add("key-3");
    st=con.prepareStatement("INSERT INTO " + table + " (id) VALUES (?)");
    setIdInStatement(st,1,"key-3");
    st.executeUpdate();
    st.close();
    con.commit();
    removeMe.add("key-1");
    removeMe.add("key-2");
    PreparedStatement batchSt=con.prepareStatement("INSERT INTO " + table + " (id) VALUES (?)");
    setIdInStatement(batchSt,1,"key-1");
    batchSt.addBatch();
    setIdInStatement(batchSt,1,"key-2");
    batchSt.addBatch();
    setIdInStatement(batchSt,1,"key-3");
    batchSt.addBatch();
    int[] batchResult=null;
    try {
      batchSt.executeBatch();
      fail("Batch operation should fail");
    }
 catch (    BatchUpdateException e) {
      batchResult=e.getUpdateCounts();
    }
    batchSt.close();
    con.commit();
    assertTrue(batchResult.length >= 2);
    assertTrue("Row should be inserted correctly.",isSuccess(batchResult[0]));
    assertTrue("Row should be inserted correctly.",isSuccess(batchResult[1]));
    if (batchResult.length == 3) {
      assertTrue("Row already exists, shouldn't be inserted.",!isSuccess(batchResult[2]));
    }
    PreparedStatement rst=con.prepareStatement("SELECT id FROM " + table + " WHERE id in (?, ?, ?)");
    setIdInStatement(rst,1,"key-1");
    setIdInStatement(rst,2,"key-2");
    setIdInStatement(rst,3,"key-3");
    ResultSet results=rst.executeQuery();
    Set<String> ids=new HashSet<String>();
    while (results.next()) {
      ids.add(getIdFromRS(results,1));
    }
    results.close();
    rst.close();
    assertEquals("Some of the rows weren't inserted.",of("key-1","key-2","key-3"),ids);
  }
  finally {
    con.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void batchUpdateResult() throws SQLException {
  assumeTrue(super.dsf != DocumentStoreFixture.RDB_ORACLE);
  String table=((RDBDocumentStore)super.ds).getTable(Collection.NODES).getName();
  Connection con=super.rdbDataSource.getConnection();
  con.setReadOnly(false);
  try {
    PreparedStatement st=con.prepareStatement("DELETE FROM " + table + " WHERE ID in (?, ?, ?)");
    setIdInStatement(st,1,"key-1");
    setIdInStatement(st,2,"key-2");
    setIdInStatement(st,3,"key-3");
    st.executeUpdate();
    st.close();
    con.commit();
    st=con.prepareStatement("INSERT INTO " + table + " (id) VALUES (?)");
    setIdInStatement(st,1,"key-3");
    st.executeUpdate();
    st.close();
    con.commit();
    removeMe.add("key-3");
    PreparedStatement batchSt=con.prepareStatement("UPDATE " + table + " SET data = '{}' WHERE id = ?");
    setIdInStatement(batchSt,1,"key-1");
    batchSt.addBatch();
    setIdInStatement(batchSt,1,"key-2");
    batchSt.addBatch();
    setIdInStatement(batchSt,1,"key-3");
    batchSt.addBatch();
    int[] batchResult=batchSt.executeBatch();
    batchSt.close();
    con.commit();
    assertEquals(3,batchResult.length);
    assertFalse("Row was updated although not present, status: " + batchResult[0],isSuccess(batchResult[0]));
    assertFalse("Row was updated although not present, status: " + batchResult[1],isSuccess(batchResult[1]));
    assertTrue("Row should be updated correctly.",isSuccess(batchResult[2]));
  }
  finally {
    con.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBDocumentStoreTest </h4><pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRDBQueryConditions(){
  if (ds instanceof RDBDocumentStore) {
    RDBDocumentStore rds=(RDBDocumentStore)ds;
    long now=System.currentTimeMillis();
    String base=this.getClass().getName() + ".testRDBQuery-";
    for (int i=0; i < 10; i++) {
      String id=base + i;
      UpdateOp up=new UpdateOp(id,true);
      up.set("_id",id);
      up.set(NodeDocument.DELETED_ONCE,i % 2 == 1);
      up.set(NodeDocument.MODIFIED_IN_SECS,now++);
      boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
      assertTrue("document with " + id + " not created",success);
      removeMe.add(id);
    }
    List<QueryCondition> conditions=new ArrayList<QueryCondition>();
    conditions.add(new QueryCondition(NodeDocument.DELETED_ONCE,"=",0));
    conditions.add(new QueryCondition(NodeDocument.MODIFIED_IN_SECS,"<",now - 2));
    List<NodeDocument> result=rds.query(Collection.NODES,base,base + "A",RDBDocumentStore.EMPTY_KEY_PATTERN,conditions,10);
    assertEquals(4,result.size());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBExportTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testparseDel(){
  String[] empty=new String[0];
  String[] result;
  result=RDBExport.parseDel("1,2,3").toArray(empty);
  assertArrayEquals(new String[]{"1","2","3"},result);
  result=RDBExport.parseDel("\"a\",\"b,c\",\"d\"\"e\"").toArray(empty);
  assertArrayEquals(new String[]{"a","b,c","d\"e"},result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBToolsTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAppendInCondition(){
  assertEquals("",appendInCondition("ID",0,1000));
  assertEquals("ID = ?",appendInCondition("ID",1,1000));
  assertEquals("ID in (?,?,?)",appendInCondition("ID",3,1000));
  assertEquals("(ID in (?,?,?) or ID in (?,?,?) or ID in (?,?,?))",appendInCondition("ID",9,3));
  assertEquals("(ID in (?,?,?) or ID in (?,?,?) or ID in (?,?,?) or ID in (?,?))",appendInCondition("ID",11,3));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.util.MergeSortedIteratorsTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void test(){
  assertEquals(list(),sort());
  assertEquals(list(),sort(list()));
  assertEquals(list(1,2,3,4),sort(list(1,2),list(3,4)));
  assertEquals(list(1,2,3,4),sort(list(1,3),list(2,4)));
  assertEquals(list(1,2,3),sort(list(1,3),list(2)));
  assertEquals(list(1,2,3,4),sort(list(1,4),list(2,3)));
  assertEquals(list(1,2,3,4,5,6),sort(list(1,5),list(2,4),list(3,6)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.util.RevisionsKeyTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fromAsString(){
  RevisionsKey k1=new RevisionsKey(new RevisionVector(new Revision(1,0,1)),new RevisionVector(new Revision(2,1,2)));
  RevisionsKey k2=RevisionsKey.fromString(k1.asString());
  assertEquals(k1,k2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.util.UtilsTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getPreviousIdFor(){
  Revision r=new Revision(System.currentTimeMillis(),0,0);
  assertEquals("2:p/" + r.toString() + "/0",Utils.getPreviousIdFor("/",r,0));
  assertEquals("3:p/test/" + r.toString() + "/1",Utils.getPreviousIdFor("/test",r,1));
  assertEquals("15:p/a/b/c/d/e/f/g/h/i/j/k/l/m/" + r.toString() + "/3",Utils.getPreviousIdFor("/a/b/c/d/e/f/g/h/i/j/k/l/m",r,3));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getDepthFromId() throws Exception {
  assertEquals(1,Utils.getDepthFromId("1:/x"));
  assertEquals(2,Utils.getDepthFromId("2:/x"));
  assertEquals(10,Utils.getDepthFromId("10:/x"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getAllDocuments() throws CommitFailedException {
  DocumentNodeStore store=new DocumentMK.Builder().getNodeStore();
  try {
    NodeBuilder builder=store.getRoot().builder();
    for (int i=0; i < 1000; i++) {
      builder.child("test-" + i);
    }
    store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    assertEquals(1001,Iterables.size(Utils.getAllDocuments(store.getDocumentStore())));
  }
  finally {
    store.dispose();
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getMaxExternalRevisionTime(){
  int localClusterId=1;
  List<Revision> revs=ImmutableList.of();
  long revTime=Utils.getMaxExternalTimestamp(revs,localClusterId);
  assertEquals(Long.MIN_VALUE,revTime);
  revs=ImmutableList.of(Revision.fromString("r1-0-1"));
  revTime=Utils.getMaxExternalTimestamp(revs,localClusterId);
  assertEquals(Long.MIN_VALUE,revTime);
  revs=ImmutableList.of(Revision.fromString("r1-0-1"),Revision.fromString("r2-0-2"));
  revTime=Utils.getMaxExternalTimestamp(revs,localClusterId);
  assertEquals(2,revTime);
  revs=ImmutableList.of(Revision.fromString("r3-0-1"),Revision.fromString("r2-0-2"));
  revTime=Utils.getMaxExternalTimestamp(revs,localClusterId);
  assertEquals(2,revTime);
  revs=ImmutableList.of(Revision.fromString("r1-0-1"),Revision.fromString("r2-0-2"),Revision.fromString("r2-0-3"));
  revTime=Utils.getMaxExternalTimestamp(revs,localClusterId);
  assertEquals(2,revTime);
  revs=ImmutableList.of(Revision.fromString("r1-0-1"),Revision.fromString("r3-0-2"),Revision.fromString("r2-0-3"));
  revTime=Utils.getMaxExternalTimestamp(revs,localClusterId);
  assertEquals(3,revTime);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getMinTimestampForDiff(){
  RevisionVector from=new RevisionVector(new Revision(17,0,1));
  RevisionVector to=new RevisionVector(new Revision(19,0,1));
  assertEquals(17,Utils.getMinTimestampForDiff(from,to,new RevisionVector()));
  assertEquals(17,Utils.getMinTimestampForDiff(to,from,new RevisionVector()));
  RevisionVector minRevs=new RevisionVector(new Revision(7,0,1),new Revision(4,0,2));
  assertEquals(17,Utils.getMinTimestampForDiff(from,to,minRevs));
  assertEquals(17,Utils.getMinTimestampForDiff(to,from,minRevs));
  to=to.update(new Revision(15,0,2));
  assertEquals(4,Utils.getMinTimestampForDiff(from,to,minRevs));
  assertEquals(4,Utils.getMinTimestampForDiff(to,from,minRevs));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getParentId() throws Exception {
  String longPath=PathUtils.concat("/" + Strings.repeat("p",Utils.PATH_LONG + 1),"foo");
  assertTrue(Utils.isLongPath(longPath));
  assertNull(Utils.getParentId(Utils.getIdFromPath(longPath)));
  assertNull(Utils.getParentId(Utils.getIdFromPath("/")));
  assertEquals("1:/foo",Utils.getParentId("2:/foo/bar"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getParentIdFromLowerLimit() throws Exception {
  assertEquals("1:/foo",Utils.getParentIdFromLowerLimit(Utils.getKeyLowerLimit("/foo")));
  assertEquals("1:/foo",Utils.getParentIdFromLowerLimit("2:/foo/bar"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.identifier.IdentifierManagerTest </h4><pre class="type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getTreeTest(){
  assertEquals("/",identifierManager.getTree(ID_ROOT).getPath());
  assertEquals(PATH_X1,identifierManager.getTree(ID_X1).getPath());
  assertEquals(PATH_Y1,identifierManager.getTree(ID_Y1).getPath());
  assertEquals(PATH_Z1,identifierManager.getTree(ID_Z1).getPath());
  assertNull(identifierManager.getTree(ID_NON_EXISTING));
  try {
    identifierManager.getTree(ID_INVALID);
    fail("Expected IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPathTest(){
  assertEquals("/",identifierManager.getPath(ID_ROOT));
  assertEquals(PATH_X1,identifierManager.getPath(ID_X1));
  assertEquals(PATH_Y1,identifierManager.getPath(ID_Y1));
  assertEquals(PATH_Z1,identifierManager.getPath(ID_Z1));
  assertNull(identifierManager.getPath(ID_NON_EXISTING));
  try {
    identifierManager.getPath(ID_INVALID);
    fail("Expected IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getIdentifierTest(){
  Tree rootTree=root.getTree("/");
  assertEquals(ID_ROOT,getIdentifier(rootTree));
  Tree xx1=root.getTree(PATH_X1);
  assertEquals(ID_X1,getIdentifier(xx1));
  Tree yy1=root.getTree(PATH_Y1);
  assertEquals(ID_Y1,getIdentifier(yy1));
  Tree zz1=root.getTree(PATH_Z1);
  assertEquals(ID_Z1,getIdentifier(zz1));
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPathFromPropertyTest(){
  assertEquals("/y",identifierManager.getPath(createReferenceProperty(UUID_Y)));
  assertEquals(PATH_Z1,identifierManager.getPath(createReferenceProperty(UUID_Z1)));
  assertNull(identifierManager.getPath(createReferenceProperty(ID_NON_EXISTING)));
  assertNull(identifierManager.getPath(createReferenceProperty(ID_INVALID)));
  try {
    identifierManager.getPath(PropertyStates.createProperty("any","any"));
    fail("Expected IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdateTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Async Index Test with 2 index defs at different tree locations
 * <ul>
 * <li>Add an index definition</li>
 * <li>Add some content</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testAsyncDoubleSubtree() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child("newchild").child("other").child(INDEX_DEFINITIONS_NAME),"subIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  builder.child("newchild").child("other").child("testChild").setProperty("foo","xyz");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  NodeState root=store.getRoot();
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  checkPathExists(root,"newchild","other",INDEX_DEFINITIONS_NAME,"subIndex",INDEX_CONTENT_NODE_NAME);
  PropertyIndexLookup lookup=new PropertyIndexLookup(root);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
  PropertyIndexLookup lookupChild=new PropertyIndexLookup(root.getChildNode("newchild").getChildNode("other"));
  assertEquals(ImmutableSet.of("testChild"),find(lookupChild,"foo","xyz"));
  assertEquals(ImmutableSet.<String>of(),find(lookupChild,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAsyncExecutionStats() throws Exception {
  final Set<String> knownCheckpoints=Sets.newHashSet();
  MemoryNodeStore store=new MemoryNodeStore(){
    @Override public synchronized NodeState retrieve(    @Nonnull String checkpoint){
      if (!knownCheckpoints.isEmpty() && !knownCheckpoints.contains(checkpoint)) {
        return null;
      }
      return super.retrieve(checkpoint);
    }
  }
;
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  runOneCycle(async);
  assertEquals(1,lastExecutionStats(async.getIndexStats().getExecutionCount()));
  runOneCycle(async);
  assertEquals(1,lastExecutionStats(async.getIndexStats().getExecutionCount()));
  runOneCycle(async);
  assertEquals(1,lastExecutionStats(async.getIndexStats().getExecutionCount()));
  builder=store.getRoot().builder();
  builder.child("testRoot2").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  runOneCycle(async);
  assertEquals(1,lastExecutionStats(async.getIndexStats().getExecutionCount()));
  builder=store.getRoot().builder();
  builder.child("testRoot3").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  knownCheckpoints.addAll(store.listCheckpoints());
  runOneCycle(async);
  assertEquals(0,lastExecutionStats(async.getIndexStats().getExecutionCount()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Async Index Test with 2 index defs at the same location
 * <ul>
 * <li>Add an index definition</li>
 * <li>Add some content</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testAsyncDouble() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndexSecond",true,false,ImmutableSet.of("bar"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc").setProperty("bar","def");
  builder.child("testSecond").setProperty("bar","ghi");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  NodeState root=store.getRoot();
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndexSecond",INDEX_CONTENT_NODE_NAME);
  PropertyIndexLookup lookup=new PropertyIndexLookup(root);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
  assertEquals(ImmutableSet.<String>of(),find(lookup,"foo","def"));
  assertEquals(ImmutableSet.<String>of(),find(lookup,"foo","ghi"));
  assertEquals(ImmutableSet.<String>of(),find(lookup,"bar","abc"));
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"bar","def"));
  assertEquals(ImmutableSet.of("testSecond"),find(lookup,"bar","ghi"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkpointStability() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  async.run();
  builder=store.getRoot().builder();
  builder.child("testRoot2").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  LogCustomizer customLogs=LogCustomizer.forLogger(AsyncIndexUpdate.class.getName()).filter(Level.WARN).create();
  builder=store.getRoot().builder();
  builder.child("testRoot3").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  customLogs.starting();
  async.run();
  assertEquals(Collections.emptyList(),customLogs.getLogs());
  customLogs.finished();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAsyncPause() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.getIndexStats().pause();
  async.run();
  assertFalse(store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("rootIndex").hasChildNode(INDEX_CONTENT_NODE_NAME));
  async.getIndexStats().resume();
  async.run();
  NodeState root=store.getRoot();
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  assertFalse(root.getChildNode(INDEX_DEFINITIONS_NAME).hasChildNode(":conflict"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(root);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupWUnrelatedChanges() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").child(":hidden");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String secondCp=store.listCheckpoints().iterator().next();
  assertFalse("Store should keep only second checkpoint",secondCp.equals(firstCp));
  assertEquals(secondCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupNoRelease() throws Exception {
  final MemoryNodeStore mns=new MemoryNodeStore();
  final AtomicBoolean canRelease=new AtomicBoolean(false);
  ProxyNodeStore store=new ProxyNodeStore(){
    @Override protected NodeStore getNodeStore(){
      return mns;
    }
    @Override public boolean release(    String checkpoint){
      if (canRelease.get()) {
        return super.release(checkpoint);
      }
      return false;
    }
  }
;
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",mns.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",mns.listCheckpoints().size() == 1);
  assertTrue("Expecting one temp checkpoint",newHashSet(store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getStrings("async-temp")).size() == 1);
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting two checkpoints",mns.listCheckpoints().size() == 2);
  assertTrue("Expecting two temp checkpoints",newHashSet(store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getStrings("async-temp")).size() == 2);
  canRelease.set(true);
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","ghi");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting one checkpoint",mns.listCheckpoints().size() == 1);
  String secondCp=mns.listCheckpoints().iterator().next();
  assertEquals(secondCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"));
  for (  String cp : store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getStrings("async-temp")) {
    if (cp.equals(secondCp)) {
      continue;
    }
    assertNull("Temp checkpoint was already cleared from store",store.retrieve(cp));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupWErrors() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  FaultyIndexEditorProvder provider=new FaultyIndexEditorProvder();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Error should have been triggered by the commit",provider.isFailed());
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexStats stats=async.getIndexStats();
  String since=stats.getFailingSince();
  assertTrue(stats.isFailing());
  assertEquals(1,stats.getConsecutiveFailedExecutions());
  assertEquals(since,stats.getLatestErrorTime());
  TimeUnit.MILLISECONDS.sleep(100);
  async.run();
  assertTrue(stats.isFailing());
  assertEquals(2,stats.getConsecutiveFailedExecutions());
  assertEquals(since,stats.getFailingSince());
  assertNotEquals(since,stats.getLatestErrorTime());
  stats.fixed();
  assertFalse(stats.isFailing());
  assertEquals(0,stats.getConsecutiveFailedExecutions());
  assertEquals("",stats.getFailingSince());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Async Index Test
 * <ul>
 * <li>Add an index definition</li>
 * <li>Add some content</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testAsync() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  NodeState root=store.getRoot();
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  assertFalse(root.getChildNode(INDEX_DEFINITIONS_NAME).hasChildNode(":conflict"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(root);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noRunWhenClosed() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  async.close();
  LogCustomizer lc=createLogCustomizer(Level.WARN);
  async.run();
  assertEquals(1,lc.getLogs().size());
  assertThat(lc.getLogs().get(0),containsString("Could not acquire run permit"));
  lc.finished();
  async.close();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-2203 Test reindex behavior on an async index when the index provider is missing
 * for a given type
 */
@Test public void testReindexMissingProvider() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"asyncMissing");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("asyncMissing",store,provider);
  async.run();
  assertFalse(async.isFailing());
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  assertEquals(firstCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("asyncMissing"));
  provider=CompositeIndexEditorProvider.compose(new ArrayList<IndexEditorProvider>());
  async=new AsyncIndexUpdate("asyncMissing",store,provider);
  async.run();
  assertTrue(async.isFailing());
  PropertyState reindex=store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("rootIndex").getProperty(REINDEX_PROPERTY_NAME);
  assertTrue(reindex == null || !reindex.getValue(Type.BOOLEAN));
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String secondCp=store.listCheckpoints().iterator().next();
  assertTrue("Store should not create a new checkpoint",secondCp.equals(firstCp));
  assertEquals(firstCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("asyncMissing"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupWChanges() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String secondCp=store.listCheckpoints().iterator().next();
  assertFalse("Store should keep only second checkpoint",secondCp.equals(firstCp));
  assertEquals(secondCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupNoChanges() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  async.run();
  assertTrue(async.isFinished());
  Set<String> checkpoints=newHashSet(store.listCheckpoints());
  assertTrue("Expecting the initial checkpoint",checkpoints.size() == 1);
  assertEquals(store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"),checkpoints.iterator().next());
  async.run();
  assertEquals("Expecting no checkpoint changes",checkpoints,store.listCheckpoints());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void taskSplitNoMatch() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"ignored",true,false,ImmutableSet.of("baz"),null).setProperty(ASYNC_PROPERTY_NAME,"async-ignored");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  IndexTaskSpliter splitter=async.getTaskSplitter();
  splitter.registerSplit(newHashSet("/oak:index/ignored"),"async-slow");
  async.run();
  Set<String> checkpoints=newHashSet(store.listCheckpoints());
  assertTrue("Expecting a single checkpoint",checkpoints.size() == 1);
  String secondCp=checkpoints.iterator().next();
  NodeState asyncNode=store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC);
  assertEquals(secondCp,asyncNode.getString("async"));
  assertNull(firstCp,asyncNode.getString("async-slow"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void taskSplit() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"changedIndex",true,false,ImmutableSet.of("bar"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"ignored1",true,false,ImmutableSet.of("baz"),null).setProperty(ASYNC_PROPERTY_NAME,"async-ignored");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"ignored2",true,false,ImmutableSet.of("etc"),null);
  builder.child("testRoot").setProperty("foo","abc");
  builder.child("testRoot").setProperty("bar","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  builder.child("testRoot").setProperty("bar","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  IndexTaskSpliter splitter=async.getTaskSplitter();
  splitter.registerSplit(newHashSet("/oak:index/changedIndex"),"async-slow");
  async.run();
  Set<String> checkpoints=newHashSet(store.listCheckpoints());
  assertTrue("Expecting two checkpoints",checkpoints.size() == 2);
  assertTrue(checkpoints.remove(firstCp));
  String secondCp=checkpoints.iterator().next();
  NodeState asyncNode=store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC);
  assertEquals(firstCp,asyncNode.getString("async-slow"));
  assertEquals(secondCp,asyncNode.getString("async"));
  assertFalse(newHashSet(asyncNode.getStrings("async-temp")).contains(firstCp));
  NodeState indexNode=store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME);
  assertEquals("async",indexNode.getChildNode("rootIndex").getString("async"));
  assertEquals("async-ignored",indexNode.getChildNode("ignored1").getString("async"));
  assertNull(indexNode.getChildNode("ignored2").getString("async"));
  assertEquals("async-slow",indexNode.getChildNode("changedIndex").getString("async"));
  assertEquals(false,indexNode.getChildNode("changedIndex").getBoolean("reindex"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(store.getRoot());
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"bar","abc"));
  assertEquals(ImmutableSet.of(),find(lookup,"bar","def"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.IndexUpdateTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Simple Test
 * <ul>
 * <li>Add an index definition</li>
 * <li>Add some content</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void test() throws Exception {
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null);
  createIndexDefinition(builder.child("newchild").child("other").child(INDEX_DEFINITIONS_NAME),"subIndex",true,false,ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.child("testRoot").setProperty("foo","abc");
  builder.child("newchild").child("other").child("testChild").setProperty("foo","xyz");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  checkPathExists(indexed,"newchild","other",INDEX_DEFINITIONS_NAME,"subIndex",INDEX_CONTENT_NODE_NAME);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
  PropertyIndexLookup lookupChild=new PropertyIndexLookup(indexed.getChildNode("newchild").getChildNode("other"));
  assertEquals(ImmutableSet.of("testChild"),find(lookupChild,"foo","xyz"));
  assertEquals(ImmutableSet.of(),find(lookupChild,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Async Reindex Test (OAK-2174)
 * <ul>
 * <li>Add some content</li>
 * <li>Add an index definition with the reindex flag and the reindex-async flag set</li>
 * <li>Run the background async job manually</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindexAsync() throws Exception {
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  EditorHook hook=new EditorHook(new IndexUpdateProvider(provider));
  NodeStore store=new MemoryNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(REINDEX_ASYNC_PROPERTY_NAME,true);
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,hook,CommitInfo.EMPTY);
  NodeState ns1=checkPathExists(store.getRoot(),INDEX_DEFINITIONS_NAME,"rootIndex");
  assertTrue(ns1.getProperty(REINDEX_PROPERTY_NAME).getValue(Type.BOOLEAN));
  assertTrue(ns1.getProperty(REINDEX_ASYNC_PROPERTY_NAME).getValue(Type.BOOLEAN));
  assertEquals(ASYNC_REINDEX_VALUE,ns1.getString(ASYNC_PROPERTY_NAME));
  AsyncIndexUpdate async=new AsyncIndexUpdate(ASYNC_REINDEX_VALUE,store,provider,true);
  int max=5;
  boolean done=false;
  int count=0;
  while (!done || count >= max) {
    async.run();
    done=async.isFinished();
    count++;
  }
  NodeState ns=checkPathExists(store.getRoot(),INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  assertFalse(ns.getProperty(REINDEX_PROPERTY_NAME).getValue(Type.BOOLEAN));
  assertNull(ns.getProperty(ASYNC_PROPERTY_NAME));
  PropertyIndexLookup lookup=new PropertyIndexLookup(store.getRoot());
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Reindex Test
 * <ul>
 * <li>Add some content</li>
 * <li>Add an index definition with the reindex flag set</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindex() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  NodeState before=builder.getNodeState();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyState ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void reindexAndIndexDefnChildRemoval_OAK_2117() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  NodeState before=builder.getNodeState();
  NodeBuilder nb=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",false,false,ImmutableSet.of("foo"),null);
  nb.child("prop1").setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,"prop1");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Auto Reindex Test
 * <ul>
 * <li>Add some content</li>
 * <li>Add an index definition without a reindex flag (see OAK-1874)</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindexAuto() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  NodeState before=builder.getNodeState();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",false,false,ImmutableSet.of("foo"),null);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyState ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Reindex Test
 * <ul>
 * <li>Add some content & an index definition</li>
 * <li>Update the index def by setting the reindex flag to true</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindex2() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).removeProperty("reindex");
  NodeState before=builder.getNodeState();
  builder.child(INDEX_DEFINITIONS_NAME).child("rootIndex").setProperty(REINDEX_PROPERTY_NAME,true);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyState ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.PathFilterTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void exclude() throws Exception {
  PathFilter p=new PathFilter(of("/"),of("/etc"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/a"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void config() throws Exception {
  NodeBuilder root=EMPTY_NODE.builder();
  root.setProperty(createProperty(PROP_INCLUDED_PATHS,of("/etc"),Type.STRINGS));
  root.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/etc/workflow"),Type.STRINGS));
  PathFilter p=PathFilter.from(root);
  assertEquals(PathFilter.Result.TRAVERSE,p.filter("/"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc/a"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow/1"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyConfig() throws Exception {
  NodeBuilder root=EMPTY_NODE.builder();
  PathFilter p=PathFilter.from(root);
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/a"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void include() throws Exception {
  PathFilter p=new PathFilter(of("/content","/etc"),of("/etc/workflow/instance"));
  assertEquals(PathFilter.Result.TRAVERSE,p.filter("/"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/var"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/content"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/content/example"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc/workflow"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow/instance"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow/instance/1"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/x"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/e"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etcx"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void configOnlyExclude() throws Exception {
  NodeBuilder root=EMPTY_NODE.builder();
  root.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/etc/workflow"),Type.STRINGS));
  PathFilter p=PathFilter.from(root);
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc/a"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow/1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.aggregate.SimpleNodeAggregatorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStarNameMoreLevels(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder file=builder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE);
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FILE,newArrayList("*","*/*","*/*/*","*/*/*/*"));
  String path="/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertEquals(newArrayList("/file"),actual);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNodeName(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder file=builder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE);
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FILE,newArrayList(JCR_CONTENT));
  String path="/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertEquals(newArrayList("/file"),actual);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStarName(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder file=builder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE);
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FILE,newArrayList(INCLUDE_ALL));
  String path="/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertEquals(newArrayList("/file"),actual);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCascadingNodeName(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder folder=builder.child("folder");
  folder.setProperty(JCR_PRIMARYTYPE,NT_FOLDER);
  NodeBuilder file=folder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE);
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FOLDER,newArrayList("file")).newRuleWithName(NT_FILE,newArrayList(JCR_CONTENT));
  String path="/folder/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertEquals(newArrayList("/folder/file","/folder"),actual);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCascadingStarName(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder folder=builder.child("folder");
  folder.setProperty(JCR_PRIMARYTYPE,NT_FOLDER);
  NodeBuilder file=folder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE);
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FOLDER,newArrayList("file")).newRuleWithName(NT_FILE,newArrayList(INCLUDE_ALL));
  String path="/folder/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertEquals(newArrayList("/folder/file","/folder"),actual);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.diffindex.DiffCollectorTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUUID() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("a").setProperty("jcr:uuid","abc");
  builder.child("b").setProperty("jcr:uuid","xyz");
  NodeState after=builder.getNodeState();
  UUIDDiffCollector collector=new UUIDDiffCollector(root,after);
  FilterImpl f=new FilterImpl();
  f.restrictProperty("jcr:uuid",Operator.EQUAL,PropertyValues.newString("abc"));
  Set<String> result=collector.getResults(f);
  Iterator<String> iterator=result.iterator();
  assertTrue(iterator.hasNext());
  assertEquals("a",iterator.next());
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeepChange() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  NodeBuilder b1=builder.child("rep:security").child("rep:authorizables");
  b1.child("rep:groups").child("t").child("te").child("testGroup_1c22a39f");
  NodeBuilder b2=b1.child("rep:users");
  b2.child("t").child("te").child("testUser_008e00d9");
  NodeBuilder b3=b2.child("a");
  b3.child("an").child("anonymous");
  b3.child("ad").child("admin");
  NodeState before=builder.getNodeState();
  builder=before.builder();
  NodeBuilder a1=builder.child("rep:security").child("rep:authorizables").child("rep:groups").child("t").child("te");
  a1.child("testGroup_1c22a39f").setProperty("jcr:uuid","c6195630-e956-3d4b-8912-479c303bf15a");
  a1.child("testPrincipal_4e6b704e").setProperty("jcr:uuid","ee59b554-76b7-3e27-9fc6-15bda1388894");
  NodeState after=builder.getNodeState();
  UUIDDiffCollector collector=new UUIDDiffCollector(before,after);
  FilterImpl f=new FilterImpl();
  f.restrictProperty("jcr:uuid",Operator.EQUAL,PropertyValues.newString("ee59b554-76b7-3e27-9fc6-15bda1388894"));
  Set<String> result=collector.getResults(f);
  Iterator<String> iterator=result.iterator();
  assertTrue(iterator.hasNext());
  assertEquals("rep:security/rep:authorizables/rep:groups/t/te/testPrincipal_4e6b704e",iterator.next());
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUUIDInner() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("a").setProperty("jcr:uuid","abc");
  NodeState before=builder.getNodeState();
  builder=before.builder();
  builder.child("a").child("b").setProperty("jcr:uuid","xyz");
  NodeState after=builder.getNodeState();
  UUIDDiffCollector collector=new UUIDDiffCollector(before,after);
  FilterImpl f=new FilterImpl();
  f.restrictProperty("jcr:uuid",Operator.EQUAL,PropertyValues.newString("xyz"));
  Set<String> result=collector.getResults(f);
  Iterator<String> iterator=result.iterator();
  assertTrue(iterator.hasNext());
  assertEquals("a/b",iterator.next());
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.AggregateTest </h4><pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propOneLevelNamed() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  child(rules,"nt:folder/properties/p1").setProperty(LuceneIndexConstants.PROP_NAME,"a/p1");
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Aggregate ag=defn.getApplicableIndexingRule("nt:folder").getAggregate();
  NodeBuilder nb=newNode("nt:folder");
  nb.child("a").setProperty("p1","foo");
  nb.child("a").setProperty("p2","foo");
  nb.child("b").setProperty("p2","foo");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(1,col.getPropPaths().size());
  assertThat(col.getPropPaths(),hasItems("a/p1"));
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void oneLevelNamed() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("a")));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a");
  nb.child("b");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(1,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a"));
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRelativeNodeInclude() throws Exception {
  Aggregate agContent=new Aggregate("app:Page",of(ni(null,"jcr:content",true)));
  mapper.add("app:Page",agContent);
  NodeBuilder nb=newNode("app:Page");
  nb.child("jcr:content").setProperty("foo","bar");
  agContent.collectAggregates(nb.getNodeState(),col);
  assertEquals(1,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("jcr:content"));
  assertEquals(2,col.nodeResults.get("jcr:content").size());
  assertEquals(1,col.getRelativeNodeResults("jcr:content","jcr:content").size());
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void recursionEnabledWithLimitCheck() throws Exception {
  int limit=5;
  Aggregate agFile=new Aggregate("nt:file",of(ni("*")),limit);
  mapper.add("nt:file",agFile);
  List<String> expectedPaths=Lists.newArrayList();
  NodeBuilder nb=newNode("nt:file");
  nb.child("a").child("c");
  String path="";
  NodeBuilder fb=nb;
  for (int i=0; i < limit + 2; i++) {
    String name="f " + i;
    path=PathUtils.concat(path,name);
    fb=fb.child(name);
    fb.setProperty(JCR_PRIMARYTYPE,"nt:file");
    if (i < limit) {
      expectedPaths.add(path);
    }
  }
  expectedPaths.add("a");
  agFile.collectAggregates(nb.getNodeState(),col);
  assertEquals(expectedPaths.size(),col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems(toArray(expectedPaths,String.class)));
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiLevelAll() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("*"),ni("*/*")));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b");
  nb.child("d").child("e").child("f");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(5,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","b","d","a/c","d/e"));
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiLevelNamed() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("a"),ni("d/e")));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b");
  nb.child("d").child("e").child("f");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(2,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","d/e"));
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiLevelNamedSubAll() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("a"),ni("d/*/*")));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b");
  nb.child("d").child("e").child("f");
  nb.child("d").child("e").child("f2");
  nb.child("d").child("e2").child("f3");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(4,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","d/e/f","d/e/f2","d/e2/f3"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpleAggregateConfig() throws Exception {
  NodeBuilder aggregates=builder.child(LuceneIndexConstants.AGGREGATES);
  NodeBuilder aggFolder=aggregates.child("nt:folder");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PATH,"*");
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Aggregate agg=defn.getAggregate("nt:folder");
  assertNotNull(agg);
  assertEquals(1,agg.getIncludes().size());
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiAggregateMapping() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("*")));
  Aggregate agFile=new Aggregate("nt:file",of(ni("*"),ni("*/*")));
  mapper.add("nt:file",agFile);
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b").setProperty(JCR_PRIMARYTYPE,"nt:file");
  nb.child("b").child("b1").child("b2");
  nb.child("c");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(5,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","b","c","b/b1","b/b1/b2"));
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void recursionEnabled() throws Exception {
  Aggregate agFile=new Aggregate("nt:file",of(ni("*")),5);
  mapper.add("nt:file",agFile);
  NodeBuilder nb=newNode("nt:file");
  nb.child("a").child("c");
  nb.child("b").setProperty(JCR_PRIMARYTYPE,"nt:file");
  nb.child("b").child("b1").child("b2");
  nb.child("c");
  agFile.collectAggregates(nb.getNodeState(),col);
  assertEquals(4,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","b","c","b/b1"));
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void oneLevelAll() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("*")));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(2,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","b"));
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReaggregateMixin() throws Exception {
  Aggregate agFolder=new Aggregate("nt:folder",of(ni("mix:title","*",true)));
  Aggregate agFile=new Aggregate("mix:title",of(ni(null,"jcr:content",true)));
  mapper.add("mix:title",agFile);
  mapper.add("nt:folder",agFolder);
  NodeBuilder nb=newNode("nt:folder");
  nb.child("a").child("c");
  createFileMixin(nb,"b","hello world");
  createFileMixin(nb,"c","hello world");
  agFolder.collectAggregates(nb.getNodeState(),col);
  assertEquals(4,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("b","c","b/jcr:content","c/jcr:content"));
  assertEquals(2,col.nodeResults.get("b/jcr:content").size());
  assertEquals(1,col.getRelativeNodeResults("b/jcr:content","b").size());
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propOneLevelRegex() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  child(rules,"nt:folder/properties/p1").setProperty(LuceneIndexConstants.PROP_NAME,"a/foo.*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Aggregate ag=defn.getApplicableIndexingRule("nt:folder").getAggregate();
  NodeBuilder nb=newNode("nt:folder");
  nb.child("a").setProperty("foo1","foo");
  nb.child("a").setProperty("foo2","foo");
  nb.child("a").setProperty("bar1","foo");
  nb.child("b").setProperty("p2","foo");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(2,col.getPropPaths().size());
  assertThat(col.getPropPaths(),hasItems("a/foo1","a/foo2"));
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReaggregate() throws Exception {
  Aggregate agFolder=new Aggregate("nt:folder",of(ni("nt:file","*",true)));
  Aggregate agFile=new Aggregate("nt:file",of(ni(null,"jcr:content",true)));
  mapper.add("nt:file",agFile);
  mapper.add("nt:folder",agFolder);
  NodeBuilder nb=newNode("nt:folder");
  nb.child("a").child("c");
  createFile(nb,"b","hello world");
  createFile(nb,"c","hello world");
  agFolder.collectAggregates(nb.getNodeState(),col);
  assertEquals(4,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("b","c","b/jcr:content","c/jcr:content"));
  assertEquals(2,col.nodeResults.get("b/jcr:content").size());
  assertEquals(1,col.getRelativeNodeResults("b/jcr:content","b").size());
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiLevelTyped() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("a"),ni("nt:resource","d/*/*",false)));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b");
  nb.child("d").child("e").child("f").setProperty(JCR_PRIMARYTYPE,"nt:resource");
  nb.child("d").child("e").child("f2");
  nb.child("d").child("e2").child("f3").setProperty(JCR_PRIMARYTYPE,"nt:resource");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(3,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","d/e/f","d/e2/f3"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void aggregateConfig2() throws Exception {
  NodeBuilder aggregates=builder.child(LuceneIndexConstants.AGGREGATES);
  NodeBuilder aggFolder=aggregates.child("nt:folder");
  aggFolder.setProperty(LuceneIndexConstants.AGG_RECURSIVE_LIMIT,42);
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PATH,"*");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PRIMARY_TYPE,"nt:file");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_RELATIVE_NODE,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Aggregate agg=defn.getAggregate("nt:folder");
  assertNotNull(agg);
  assertEquals(42,agg.reAggregationLimit);
  assertEquals(1,agg.getIncludes().size());
  assertEquals("nt:file",((NodeInclude)agg.getIncludes().get(0)).primaryType);
  assertTrue(((NodeInclude)agg.getIncludes().get(0)).relativeNode);
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void oneLevelTypedMixin() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("mix:title","*",false)));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").setProperty(JcrConstants.JCR_MIXINTYPES,Collections.singleton("mix:title"),Type.NAMES);
  nb.child("b");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(1,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a"));
}

</code></pre>

<br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void oneLevelTyped() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("nt:resource","*",false)));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").setProperty(JCR_PRIMARYTYPE,"nt:resource");
  nb.child("b");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(1,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.ExtractedTextCacheTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cacheEnabled() throws Exception {
  ExtractedTextCache cache=new ExtractedTextCache(10 * FileUtils.ONE_MB,100);
  assertNotNull(cache.getCacheStats());
  Blob b=new IdBlob("hello","a");
  String text=cache.get("/a","foo",b,false);
  assertNull(text);
  cache.put(b,new ExtractedText(ExtractedText.ExtractionResult.SUCCESS,"test hello"));
  text=cache.get("/a","foo",b,false);
  assertEquals("test hello",text);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexCopierTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicTestWithFS() throws Exception {
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new IndexCopier(sameThreadExecutor(),getWorkDir());
  Directory remote=new RAMDirectory();
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  assertEquals(2,wrapped.listAll().length);
  assertTrue(wrapped.fileExists("t1"));
  assertTrue(wrapped.fileExists("t2"));
  assertEquals(t1.length,wrapped.fileLength("t1"));
  assertEquals(t2.length,wrapped.fileLength("t2"));
  readAndAssert(wrapped,"t1",t1);
  File indexBaseDir=c1.getIndexDir("/foo");
  File indexDir=new File(indexBaseDir,"0");
  assertTrue(new File(indexDir,"t1").exists());
  TabularData td=c1.getIndexPathMapping();
  assertEquals(1,td.size());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void cowReadDoneFromLocalIfFileExist() throws Exception {
  final Set<String> readLocal=newHashSet();
  Directory baseDir=new CloseSafeDir(){
    @Override public IndexInput openInput(    String name,    IOContext context) throws IOException {
      readLocal.add(name);
      return super.openInput(name,context);
    }
  }
;
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  final Set<String> readRemotes=newHashSet();
  Directory remote=new RAMDirectory(){
    @Override public IndexInput openInput(    String name,    IOContext context) throws IOException {
      readRemotes.add(name);
      return super.openInput(name,context);
    }
  }
;
  byte[] t1=writeFile(remote,"t1");
  Directory local=copier.wrapForWrite(defn,remote,false);
  readRemotes.clear();
  readLocal.clear();
  readAndAssert(local,"t1",t1);
  assertEquals(newHashSet("t1"),readRemotes);
  assertEquals(newHashSet(),readLocal);
  Directory localForRead=copier.wrapForRead("/foo",defn,remote);
  readAndAssert(localForRead,"t1",t1);
  readRemotes.clear();
  readLocal.clear();
  readAndAssert(local,"t1",t1);
  assertEquals(newHashSet(),readRemotes);
  assertEquals(newHashSet("t1"),readLocal);
  local.close();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test for the case where local directory is opened already contains
 * the index files and in such a case file should not be read from remote
 */
@Test public void reuseLocalDir() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  TestRAMDirectory remote=new TestRAMDirectory();
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  readAndAssert(wrapped,"t1",t1);
  assertEquals(1,remote.openedFiles.size());
  Directory wrapped2=c1.wrapForRead("/foo",defn,remote);
  remote.reset();
  readAndAssert(wrapped2,"t1",t1);
  assertEquals(0,remote.openedFiles.size());
  Directory wrapped3=c1.wrapForRead("/foo",defn,remote);
  remote.reset();
  writeFile(baseDir,"t1");
  readAndAssert(wrapped3,"t1",t1);
  assertEquals(1,remote.openedFiles.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicTest() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote=new RAMDirectory();
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  assertEquals(2,wrapped.listAll().length);
  assertTrue(wrapped.fileExists("t1"));
  assertTrue(wrapped.fileExists("t2"));
  assertEquals(t1.length,wrapped.fileLength("t1"));
  assertEquals(t2.length,wrapped.fileLength("t2"));
  readAndAssert(wrapped,"t1",t1);
  assertTrue(baseDir.fileExists("t1"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Checks for the case where if the file exist local before writer starts
 * then those files do not get deleted even if deleted by writer via
 * indexing process from 'baseDir' as they might be in use by existing open
 * indexes
 */
@Test public void cowExistingLocalFileNotDeleted() throws Exception {
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote=new CloseSafeDir();
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  Directory local=copier.wrapForWrite(defn,remote,false);
  assertEquals(newHashSet("t1","t2"),newHashSet(local.listAll()));
  byte[] t3=writeFile(local,"t3");
  Directory localForRead=copier.wrapForRead("/foo",defn,remote);
  readAndAssert(localForRead,"t1",t1);
  assertTrue(baseDir.fileExists("t1"));
  local.deleteFile("t1");
  assertFalse("t1 should be deleted from remote",remote.fileExists("t1"));
  assertFalse("t1 should be deleted from 'local' view also",local.fileExists("t1"));
  assertTrue("t1 should not be deleted from baseDir",baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t3"));
  local.deleteFile("t3");
  assertFalse("t1 should be deleted from remote",local.fileExists("t3"));
  assertTrue("t1 should NOT be deleted from remote",baseDir.fileExists("t3"));
  local.close();
  assertFalse("t3 should also be deleted from local",baseDir.fileExists("t3"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicTestWithPrefetch() throws Exception {
  final List<String> syncedFiles=Lists.newArrayList();
  Directory baseDir=new RAMDirectory(){
    @Override public void sync(    Collection<String> names) throws IOException {
      syncedFiles.addAll(names);
      super.sync(names);
    }
  }
;
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir(),true);
  Directory remote=new RAMDirectory();
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  assertEquals(2,wrapped.listAll().length);
  assertThat(syncedFiles,containsInAnyOrder("t1","t2"));
  assertTrue(wrapped.fileExists("t1"));
  assertTrue(wrapped.fileExists("t2"));
  assertTrue(baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t2"));
  assertEquals(t1.length,wrapped.fileLength("t1"));
  assertEquals(t2.length,wrapped.fileLength("t2"));
  readAndAssert(wrapped,"t1",t1);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void copyInProgressStats() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  final List<ListenableFuture<?>> submittedTasks=Lists.newArrayList();
  ExecutorService executor=new ForwardingListeningExecutorService(){
    @Override protected ListeningExecutorService delegate(){
      return MoreExecutors.listeningDecorator(Executors.newSingleThreadExecutor());
    }
    @Override public void execute(    Runnable command){
      submittedTasks.add(super.submit(command));
    }
  }
;
  IndexCopier c1=new RAMIndexCopier(baseDir,executor,getWorkDir());
  final CountDownLatch copyProceed=new CountDownLatch(1);
  final CountDownLatch copyRequestArrived=new CountDownLatch(1);
  TestRAMDirectory remote=new TestRAMDirectory(){
    @Override public void copy(    Directory to,    String src,    String dest,    IOContext context) throws IOException {
      copyRequestArrived.countDown();
      try {
        copyProceed.await();
      }
 catch (      InterruptedException e) {
      }
      super.copy(to,src,dest,context);
    }
  }
;
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  readAndAssert(wrapped,"t1",t1);
  copyRequestArrived.await();
  assertEquals(1,c1.getCopyInProgressCount());
  assertEquals(1,remote.openedFiles.size());
  readAndAssert(wrapped,"t1",t1);
  assertEquals(1,c1.getCopyInProgressCount());
  assertEquals(IOUtils.humanReadableByteCount(t1.length),c1.getCopyInProgressSize());
  assertEquals(1,c1.getCopyInProgressDetails().length);
  System.out.println(Arrays.toString(c1.getCopyInProgressDetails()));
  assertEquals(2,remote.openedFiles.size());
  copyProceed.countDown();
  Futures.allAsList(submittedTasks).get();
  remote.reset();
  readAndAssert(wrapped,"t1",t1);
  assertEquals(0,remote.openedFiles.size());
  assertEquals(0,c1.getCopyInProgressCount());
  executor.shutdown();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void failureInDelete() throws Exception {
  final Set<String> testFiles=new HashSet<String>();
  Directory baseDir=new CloseSafeDir(){
    @Override public void deleteFile(    String name) throws IOException {
      if (testFiles.contains(name)) {
        throw new IOException("Not allowed to delete " + name);
      }
      super.deleteFile(name);
    }
  }
;
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory r1=new RAMDirectory();
  byte[] t1=writeFile(r1,"t1");
  byte[] t2=writeFile(r1,"t2");
  Directory w1=c1.wrapForRead("/foo",defn,r1);
  readAndAssert(w1,"t1",t1);
  readAndAssert(w1,"t2",t2);
  assertTrue(baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t2"));
  Directory r2=new CloseSafeDir();
  copy(r1,r2);
  r2.deleteFile("t1");
  Directory w2=c1.wrapForRead("/foo",defn,r2);
  testFiles.add("t1");
  w2.close();
  assertEquals(1,c1.getFailedToDeleteFiles().size());
  IndexCopier.LocalIndexFile testFile=c1.getFailedToDeleteFiles().values().iterator().next();
  assertEquals(1,testFile.getDeleteAttemptCount());
  assertEquals(IOUtils.humanReadableByteCount(t1.length),c1.getGarbageSize());
  assertEquals(1,c1.getGarbageDetails().length);
  Directory w3=c1.wrapForRead("/foo",defn,r2);
  w3.close();
  assertEquals(2,testFile.getDeleteAttemptCount());
  testFiles.clear();
  Directory w4=c1.wrapForRead("/foo",defn,r2);
  w4.close();
  assertEquals(0,c1.getFailedToDeleteFiles().size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void wrapForWriteWithIndexPath() throws Exception {
  assumeNotWindows();
  Directory remote=new CloseSafeDir();
  IndexCopier copier=new IndexCopier(sameThreadExecutor(),getWorkDir());
  builder.setProperty(LuceneIndexConstants.INDEX_PATH,"foo");
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Directory dir=copier.wrapForWrite(defn,remote,false);
  byte[] t1=writeFile(dir,"t1");
  dir.close();
  readAndAssert(remote,"t1",t1);
  List<File> files=new ArrayList<File>(FileUtils.listFiles(copier.getIndexRootDir(),null,true));
  assertEquals(1,files.size());
  assertEquals("t1",files.get(0).getName());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void concurrentRead() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  CollectingExecutor executor=new CollectingExecutor();
  IndexCopier c1=new RAMIndexCopier(baseDir,executor,getWorkDir());
  TestRAMDirectory remote=new TestRAMDirectory();
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  readAndAssert(wrapped,"t1",t1);
  assertEquals(1,c1.getScheduledForCopyCount());
  assertEquals(1,remote.openedFiles.size());
  assertEquals(1,executor.commands.size());
  readAndAssert(wrapped,"t1",t1);
  assertEquals(1,c1.getScheduledForCopyCount());
  assertEquals(2,remote.openedFiles.size());
  assertEquals(1,executor.commands.size());
  executor.executeAll();
  remote.reset();
  readAndAssert(wrapped,"t1",t1);
  assertEquals(0,remote.openedFiles.size());
  assertEquals(0,c1.getScheduledForCopyCount());
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nonExistentFile() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  CollectingExecutor executor=new CollectingExecutor();
  IndexCopier c1=new RAMIndexCopier(baseDir,executor,getWorkDir(),true);
  Directory remote=new RAMDirectory();
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  try {
    wrapped.openInput("foo.txt",IOContext.DEFAULT);
    fail();
  }
 catch (  FileNotFoundException ignore) {
  }
  assertEquals(0,executor.commands.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void wrapForWriteWithoutIndexPath() throws Exception {
  assumeNotWindows();
  Directory remote=new CloseSafeDir();
  IndexCopier copier=new IndexCopier(sameThreadExecutor(),getWorkDir());
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Directory dir=copier.wrapForWrite(defn,remote,false);
  byte[] t1=writeFile(dir,"t1");
  dir.close();
  readAndAssert(remote,"t1",t1);
  assertArrayEquals(FileUtils.EMPTY_FILE_ARRAY,copier.getIndexWorkDir().listFiles());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void copyOnWriteBasics() throws Exception {
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote=new RAMDirectory();
  byte[] t1=writeFile(remote,"t1");
  Directory local=copier.wrapForWrite(defn,remote,false);
  assertEquals(newHashSet("t1"),newHashSet(local.listAll()));
  assertEquals(t1.length,local.fileLength("t1"));
  byte[] t2=writeFile(local,"t2");
  assertEquals(newHashSet("t1","t2"),newHashSet(local.listAll()));
  assertEquals(t2.length,local.fileLength("t2"));
  assertTrue(local.fileExists("t1"));
  assertTrue(local.fileExists("t2"));
  assertTrue("t2 should be copied to remote",remote.fileExists("t2"));
  readAndAssert(local,"t1",t1);
  readAndAssert(local,"t2",t2);
  local.deleteFile("t1");
  assertEquals(newHashSet("t2"),newHashSet(local.listAll()));
  local.deleteFile("t2");
  assertEquals(newHashSet(),newHashSet(local.listAll()));
  try {
    local.fileLength("nonExistentFile");
    fail();
  }
 catch (  FileNotFoundException ignore) {
  }
  try {
    local.openInput("nonExistentFile",IOContext.DEFAULT);
    fail();
  }
 catch (  FileNotFoundException ignore) {
  }
  local.close();
  assertFalse(baseDir.fileExists("t2"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexDefinitionTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyDefinition() throws Exception {
  builder.child(PROP_NODE).child("foo").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  builder.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo","bar"),STRINGS));
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=idxDefn.getApplicableIndexingRule(NT_BASE);
  assertTrue(rule.isIndexed("foo"));
  assertTrue(rule.isIndexed("bar"));
  assertEquals(PropertyType.DATE,rule.getConfig("foo").getType());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionPropertyIsV2() throws Exception {
  NodeBuilder defnb=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(IndexFormatVersion.V2,defn.getVersion());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexRuleWithPropertyOrdering() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,"foo.*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.FIELD_BOOST,4.0);
  rules.child("nt:folder").child(PROP_NODE).setProperty(OAK_CHILD_ORDER,ImmutableList.of("prop2","prop1"),NAMES);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertTrue(rule1.isIndexed("prop1"));
  assertTrue(rule1.isIndexed("fooProp"));
  assertEquals(4.0f,rule1.getConfig("bazProp2").boost,0);
  assertEquals(4.0f,rule1.getConfig("fooProp").boost,0);
  rules.child("nt:folder").child(PROP_NODE).setProperty(OAK_CHILD_ORDER,ImmutableList.of("prop1","prop2"),NAMES);
  defn=new IndexDefinition(root,builder.getNodeState());
  rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertEquals(3.0f,rule1.getConfig("fooProp").boost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionFreshIsCurrent() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(IndexFormatVersion.getDefault(),defn.getVersion());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSuggestFrequency() throws Exception {
  int suggestFreq=40;
  NodeBuilder indexRoot=builder;
  IndexDefinition idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertEquals("Default config",60,idxDefn.getSuggesterUpdateFrequencyMinutes());
  indexRoot=builder.child("shadowConfigRoot");
  indexRoot.setProperty(LuceneIndexConstants.SUGGEST_UPDATE_FREQUENCY_MINUTES,suggestFreq);
  indexRoot.child(LuceneIndexConstants.SUGGESTION_CONFIG);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertEquals("Namespaced config node should shadow global config",60,idxDefn.getSuggesterUpdateFrequencyMinutes());
  indexRoot=builder.child("backwardCompatibilityRoot");
  indexRoot.setProperty(LuceneIndexConstants.SUGGEST_UPDATE_FREQUENCY_MINUTES,suggestFreq);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertEquals("Backward compatibility config",suggestFreq,idxDefn.getSuggesterUpdateFrequencyMinutes());
  indexRoot=builder.child("indexRoot");
  indexRoot.child(LuceneIndexConstants.SUGGESTION_CONFIG).setProperty(LuceneIndexConstants.SUGGEST_UPDATE_FREQUENCY_MINUTES,suggestFreq);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertEquals("Set config",suggestFreq,idxDefn.getSuggesterUpdateFrequencyMinutes());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fulltextCost() throws Exception {
  NodeBuilder defnb=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of("foo"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(300,defn.getFulltextEntryCount(300));
  assertEquals(IndexDefinition.DEFAULT_ENTRY_COUNT + 100,defn.getFulltextEntryCount(IndexDefinition.DEFAULT_ENTRY_COUNT + 100));
  defnb.setProperty(IndexConstants.ENTRY_COUNT_PROPERTY_NAME,100);
  defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(100,defn.getFulltextEntryCount(300));
  assertEquals(50,defn.getFulltextEntryCount(50));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexRuleWithPropertyRegEx() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo.*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.FIELD_BOOST,4.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertTrue(rule1.isIndexed("prop1"));
  assertFalse(rule1.isIndexed("prop2"));
  assertTrue(rule1.isIndexed("fooProp"));
  PropertyDefinition pd=rule1.getConfig("fooProp2");
  assertEquals(4.0f,pd.boost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void indexRuleInheritanceOrdering2() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.setProperty(OAK_CHILD_ORDER,ImmutableList.of("nt:base","nt:hierarchyNode"),NAMES);
  rules.child("nt:hierarchyNode").setProperty(LuceneIndexConstants.FIELD_BOOST,2.0);
  rules.child("nt:base").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertEquals(3.0,getRule(defn,"nt:base").boost,0);
  assertEquals(3.0,getRule(defn,"nt:hierarchyNode").boost,0);
  assertEquals(3.0,getRule(defn,"nt:file").boost,0);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexRuleSanity() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder").setProperty(LuceneIndexConstants.FIELD_BOOST,2.0);
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0).setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_BOOLEAN);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertNull(defn.getApplicableIndexingRule(newTree(newNode("nt:base"))));
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertEquals(2.0f,rule1.boost,0);
  assertTrue(rule1.isIndexed("prop1"));
  assertFalse(rule1.isIndexed("prop2"));
  PropertyDefinition pd=rule1.getConfig("prop1");
  assertEquals(3.0f,pd.boost,0);
  assertEquals(PropertyType.BOOLEAN,pd.getType());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void costConfig() throws Exception {
  NodeBuilder defnb=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of("foo"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(1.0,defn.getCostPerEntry(),0);
  assertEquals(1.0,defn.getCostPerExecution(),0);
  assertEquals(IndexDefinition.DEFAULT_ENTRY_COUNT,defn.getEntryCount());
  assertFalse(defn.isEntryCountDefined());
  defnb.setProperty(LuceneIndexConstants.COST_PER_ENTRY,2.0);
  defnb.setProperty(LuceneIndexConstants.COST_PER_EXECUTION,3.0);
  defnb.setProperty(IndexConstants.ENTRY_COUNT_PROPERTY_NAME,500);
  IndexDefinition defn2=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(2.0,defn2.getCostPerEntry(),0);
  assertEquals(3.0,defn2.getCostPerExecution(),0);
  assertEquals(500,defn2.getEntryCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void maxExtractLength() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(-IndexDefinition.DEFAULT_MAX_EXTRACT_LENGTH * IndexDefinition.DEFAULT_MAX_FIELD_LENGTH,defn.getMaxExtractLength());
  defnb.child(TIKA).setProperty(LuceneIndexConstants.TIKA_MAX_EXTRACT_LENGTH,1000);
  defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(1000,defn.getMaxExtractLength());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void codecConfig() throws Exception {
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertNotNull(defn.getCodec());
  assertEquals(oakCodec.getName(),defn.getCodec().getName());
  builder.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,false);
  defn=new IndexDefinition(root,builder.getNodeState());
  assertNull(defn.getCodec());
  Codec simple=Codec.getDefault();
  builder.setProperty(LuceneIndexConstants.CODEC_NAME,simple.getName());
  defn=new IndexDefinition(root,builder.getNodeState());
  assertNotNull(defn.getCodec());
  assertEquals(simple.getName(),defn.getCodec().getName());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionFullTextIsV1() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  defnb.child(INDEX_DATA_CHILD_NAME);
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(IndexFormatVersion.V1,defn.getVersion());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionFreshCompateMode() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  defnb.setProperty(LuceneIndexConstants.COMPAT_MODE,IndexFormatVersion.V1.getVersion());
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(IndexFormatVersion.V1,defn.getVersion());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void customAnalyzer() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  defnb.setProperty(LuceneIndexConstants.MAX_FIELD_LENGTH,-1);
  defnb.child(ANALYZERS).child(ANL_DEFAULT).child(LuceneIndexConstants.ANL_TOKENIZER).setProperty(LuceneIndexConstants.ANL_NAME,"whitespace");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(TokenizerChain.class.getName(),defn.getAnalyzer().getClass().getName());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionDefnUpdateFulltextIsV1() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  defnb.child(INDEX_DATA_CHILD_NAME);
  defnb=defnb.getNodeState().builder();
  IndexDefinition.updateDefinition(defnb);
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(IndexFormatVersion.V1,defn.getVersion());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void relativePropertyConfig() throws Exception {
  builder.child(PROP_NODE).child("foo1").child("bar").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  builder.child(PROP_NODE).child("foo2").child("bar2").child("baz").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_LONG);
  builder.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo","foo1/bar","foo2/bar2/baz"),STRINGS));
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule.getConfig("foo1/bar"));
  assertEquals(PropertyType.DATE,rule.getConfig("foo1/bar").getType());
  assertEquals(PropertyType.LONG,rule.getConfig("foo2/bar2/baz").getType());
  assertTrue(rule.getConfig("foo1/bar").relative);
  assertArrayEquals(new String[]{"foo2","bar2"},rule.getConfig("foo2/bar2/baz").ancestors);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyDefinitionWithExcludes() throws Exception {
  builder.child(PROP_NODE).child("foo").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=idxDefn.getApplicableIndexingRule(NT_BASE);
  assertTrue(rule.isIndexed("foo"));
  assertTrue(rule.isIndexed("bar"));
  assertEquals(PropertyType.DATE,rule.getConfig("foo").getType());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzedEnabledForBoostedField() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0).setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_ANALYZED,true).setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  TestUtil.child(rules,"nt:folder/properties/prop3").setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true).setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  PropertyDefinition pd=rule1.getConfig("prop1");
  assertEquals(3.0f,pd.boost,0);
  assertTrue("Analyzed should be assumed to be true for boosted fields",pd.analyzed);
  assertFalse(rule1.getConfig("prop3").analyzed);
  assertEquals(2,rule1.getNodeScopeAnalyzedProps().size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void indexRuleInheritanceOrdering() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.setProperty(OAK_CHILD_ORDER,ImmutableList.of("nt:hierarchyNode","nt:base"),NAMES);
  rules.child("nt:hierarchyNode").setProperty(LuceneIndexConstants.FIELD_BOOST,2.0);
  rules.child("nt:base").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertEquals(3.0,getRule(defn,"nt:base").boost,0);
  assertEquals(2.0,getRule(defn,"nt:hierarchyNode").boost,0);
  assertEquals(3.0,getRule(defn,"nt:query").boost,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexPlannerTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void propertyIndexCost() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  long numofDocs=IndexDefinition.DEFAULT_ENTRY_COUNT + 1000;
  IndexDefinition idxDefn=new IndexDefinition(root,defn.getNodeState());
  IndexNode node=createIndexNode(idxDefn,numofDocs);
  FilterImpl filter=createFilter("nt:base");
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertEquals(idxDefn.getEntryCount(),plan.getEstimatedEntryCount());
  assertEquals(1.0,plan.getCostPerExecution(),0);
  assertEquals(1.0,plan.getCostPerEntry(),0);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fulltextIndexCost() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder defn=newLuceneIndexDefinition(index,"lucene",of(TYPENAME_STRING));
  TestUtil.useV2(defn);
  long numofDocs=IndexDefinition.DEFAULT_ENTRY_COUNT + 1000;
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()),numofDocs);
  FilterImpl filter=createFilter("nt:base");
  filter.setFullTextConstraint(FullTextParser.parse(".","mountain"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertNotNull(plan);
  assertEquals(numofDocs,plan.getEstimatedEntryCount());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyIndexCost2() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(LuceneIndexConstants.COST_PER_ENTRY,2.0);
  defn.setProperty(LuceneIndexConstants.COST_PER_EXECUTION,3.0);
  long numofDocs=IndexDefinition.DEFAULT_ENTRY_COUNT - 100;
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()),numofDocs);
  FilterImpl filter=createFilter("nt:base");
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertEquals(numofDocs,plan.getEstimatedEntryCount());
  assertEquals(3.0,plan.getCostPerExecution(),0);
  assertEquals(2.0,plan.getCostPerEntry(),0);
  assertNotNull(plan);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexAugmentTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void indexHookCallbackFrequency() throws Exception {
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  TestUtil.enablePropertyIndex(props,"foo1",false);
  TestUtil.enablePropertyIndex(props,"foo2",false);
  TestUtil.enablePropertyIndex(props,"subChild/foo3",false);
  root.commit();
  final AtomicInteger counter=new AtomicInteger(0);
  factory.indexFieldProvider=new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      counter.incrementAndGet();
      return IndexFieldProvider.DEFAULT.getAugmentedFields(path,document,indexDefinition);
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  counter.set(0);
  Tree test=root.getTree("/").addChild("test");
  Tree node=createNodeWithType(test,"item",TestUtil.NT_TEST);
  node.setProperty("foo1","bar1");
  node.setProperty("foo2","bar2");
  Tree subChild=node.addChild("subChild");
  subChild.setProperty("foo3","bar3");
  root.commit();
  assertEquals("Number of callbacks should be same as number of changed properties",1,counter.get());
  counter.set(0);
  subChild=root.getTree("/test/item/subChild");
  subChild.setProperty("foo3","bar4");
  root.commit();
  assertEquals("Sub child property change should make call backs for all indexed properties",1,counter.get());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void indexAugmentorMismatchedNodeType() throws Exception {
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  TestUtil.enableForFullText(props,"foo1");
  root.commit();
  final AtomicInteger indexingCounter1=new AtomicInteger(0);
  final AtomicInteger indexingCounter2=new AtomicInteger(0);
  factory.registerIndexFieldProvider(new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      indexingCounter1.incrementAndGet();
      return IndexFieldProvider.DEFAULT.getAugmentedFields(path,document,indexDefinition);
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(JcrConstants.NT_BASE);
    }
  }
);
  factory.registerIndexFieldProvider(new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      indexingCounter2.incrementAndGet();
      return IndexFieldProvider.DEFAULT.getAugmentedFields(path,document,indexDefinition);
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
);
  factory.useSuperBehavior=true;
  createNodeWithType(root.getTree("/"),"node1",TestUtil.NT_TEST).setProperty("foo1","bar1");
  root.commit();
  assertEquals("Mismatching node type should not let index augmentor called",0,indexingCounter1.get());
  assertEquals("Matching node type should get augmentor called",1,indexingCounter2.get());
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void queryHook() throws Exception {
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  TestUtil.enableForFullText(props,"foo");
  root.commit();
  final String testSearchText="search this text";
  final String realSearchText="bar";
  factory.fulltextQueryTermsProvider=new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      assertEquals("Full text term passed to provider isn't same as the one passed in query",testSearchText,text);
      return new TermQuery(new Term(":fulltext",realSearchText));
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  Tree test=root.getTree("/").addChild("test");
  Tree node=createNodeWithType(test,"item",TestUtil.NT_TEST);
  node.setProperty("foo",realSearchText);
  root.commit();
  String query="select [jcr:path] from [oak:TestNode] where CONTAINS(*, '" + testSearchText + "')";
  List<String> paths=executeQuery(query,SQL2);
  assertEquals("Augmented query wasn't used to search",1,paths.size());
  assertEquals("/test/item",paths.get(0));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void skipDefaultOnlyUsingAugmentors() throws Exception {
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  Tree prop=props.addChild("foo1");
  prop.setProperty(LuceneIndexConstants.PROP_INDEX,true);
  prop=props.addChild("foo2");
  prop.setProperty(LuceneIndexConstants.PROP_NAME,"subChild/foo2");
  prop.setProperty(LuceneIndexConstants.PROP_INDEX,true);
  root.commit();
  final AtomicInteger indexingCounter=new AtomicInteger(0);
  factory.indexFieldProvider=new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      indexingCounter.incrementAndGet();
      return IndexFieldProvider.DEFAULT.getAugmentedFields(path,document,indexDefinition);
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  final AtomicInteger queryingCounter=new AtomicInteger(0);
  factory.fulltextQueryTermsProvider=new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      queryingCounter.set(1);
      return null;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  Tree node1=createNodeWithType(root.getTree("/"),"node1",TestUtil.NT_TEST);
  node1.setProperty("foo1","bar1");
  node1.addChild("subChild").setProperty("foo2","bar2");
  root.commit();
  assertEquals("Indexing augment should get called once",1,indexingCounter.get());
  assertEquals("No docs should get indexed (augmentor hasn't added any field)",0,getSearcher().getIndexReader().numDocs());
  String query="EXPLAIN SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE [foo1]='bar1'";
  List<String> paths=executeQuery(query,SQL2);
  assertTrue("indexed prop name shouldn't decide query plan (" + paths.get(0) + ")",paths.get(0).contains("/* no-index "));
  query="EXPLAIN SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE [subChild/foo2]='bar2'";
  paths=executeQuery(query,SQL2);
  assertTrue("indexed prop name shouldn't decide query plan (" + paths.get(0) + ")",paths.get(0).contains("/* no-index "));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyIndexUsingAugmentors() throws Exception {
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  TestUtil.enablePropertyIndex(props,"foo1",false);
  TestUtil.enablePropertyIndex(props,"subChild/foo2",false);
  root.commit();
  final AtomicInteger indexingCounter=new AtomicInteger(0);
  factory.indexFieldProvider=new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      indexingCounter.incrementAndGet();
      return IndexFieldProvider.DEFAULT.getAugmentedFields(path,document,indexDefinition);
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  final AtomicInteger queryingCounter=new AtomicInteger(0);
  factory.fulltextQueryTermsProvider=new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      queryingCounter.set(1);
      return null;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  Tree node1=createNodeWithType(root.getTree("/"),"node1",TestUtil.NT_TEST);
  node1.setProperty("foo1","bar1");
  node1.addChild("subChild").setProperty("foo2","bar2");
  root.commit();
  assertEquals("Indexing augment should get called once",1,indexingCounter.get());
  String query="SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE [foo1]='bar1'";
  executeQuery(query,SQL2);
  assertEquals("Query augmentor should not get called for property constraints",0,queryingCounter.get());
  query="EXPLAIN " + query;
  List<String> paths=executeQuery(query,SQL2,false);
  assertTrue("property index should have made the index selected (" + paths.get(0) + ")",paths.get(0).contains("/* lucene:test-index("));
  query="SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE [subChild/foo2]='bar2'";
  executeQuery(query,SQL2);
  assertEquals("Query augmentor should not get called for property constraints",0,queryingCounter.get());
  query="EXPLAIN " + query;
  paths=executeQuery(query,SQL2);
  assertTrue("property index should have made the index selected (" + paths.get(0) + ")",paths.get(0).contains("/* lucene:test-index("));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void queryAugmentorMismatchedNodeType() throws Exception {
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  TestUtil.enableForFullText(props,"foo1",false);
  root.commit();
  final AtomicInteger indexingCounter1=new AtomicInteger(0);
  final AtomicInteger indexingCounter2=new AtomicInteger(0);
  factory.registerQueryTermsProvider(new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      indexingCounter1.set(1);
      return null;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(JcrConstants.NT_BASE);
    }
  }
);
  factory.registerQueryTermsProvider(new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      indexingCounter2.set(1);
      return null;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
);
  factory.useSuperBehavior=true;
  executeQuery("SELECT [jcr:path] FROM [" + TestUtil.NT_TEST + "] WHERE CONTAINS(*, 'test')",SQL2,false);
  assertEquals("Mismatching node type should not let index augmentor called",0,indexingCounter1.get());
  assertEquals("Matching node type should get augmentor called",1,indexingCounter2.get());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fulltextIndexUsingAugmentors() throws Exception {
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  TestUtil.enableForFullText(props,"foo1");
  TestUtil.enableForFullText(props,"subChild/foo2");
  root.commit();
  final AtomicInteger indexingCounter=new AtomicInteger(0);
  factory.indexFieldProvider=new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      indexingCounter.incrementAndGet();
      return IndexFieldProvider.DEFAULT.getAugmentedFields(path,document,indexDefinition);
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  final AtomicInteger queryingCounter=new AtomicInteger(0);
  factory.fulltextQueryTermsProvider=new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      queryingCounter.set(1);
      return null;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  Tree node1=createNodeWithType(root.getTree("/"),"node1",TestUtil.NT_TEST);
  node1.setProperty("foo1","bar1");
  node1.addChild("subChild").setProperty("foo2","bar2");
  root.commit();
  assertEquals("Indexing augment should get called once",1,indexingCounter.get());
  String query="SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE CONTAINS(*, 'bar1')";
  executeQuery(query,SQL2);
  assertEquals("Query augmentor should get called for full text constraints",1,queryingCounter.get());
  queryingCounter.set(0);
  query="EXPLAIN " + query;
  List<String> paths=executeQuery(query,SQL2,false);
  assertEquals("Query augmentor should get called for full text constraints",1,queryingCounter.get());
  assertTrue("property index should have made the index selected (" + paths.get(0) + ")",paths.get(0).contains("/* lucene:test-index("));
  queryingCounter.set(0);
  query="SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE CONTAINS(*, 'bar2')";
  executeQuery(query,SQL2);
  assertEquals("Query augmentor should get called for full text constraints",1,queryingCounter.get());
  queryingCounter.set(0);
  query="EXPLAIN " + query;
  paths=executeQuery(query,SQL2,false);
  assertEquals("Query augmentor should get called for full text constraints",1,queryingCounter.get());
  assertTrue("property index should have made the index selected (" + paths.get(0) + ")",paths.get(0).contains("/* lucene:test-index("));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void indexHookCallbackAndStorage() throws Exception {
  final String propName="subChild/foo";
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  TestUtil.enableForFullText(props,propName);
  root.commit();
  factory.indexFieldProvider=new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      assertEquals("/test/item",path);
      assertEquals(TestUtil.NT_TEST,document.getName(JcrConstants.JCR_PRIMARYTYPE));
      assertEquals(IndexConstants.INDEX_DEFINITIONS_NODE_TYPE,indexDefinition.getName(JcrConstants.JCR_PRIMARYTYPE));
      return Lists.<Field>newArrayList(new StringField("barbar","1",Field.Store.NO));
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  Tree test=root.getTree("/").addChild("test");
  Tree node=createNodeWithType(test,"item",TestUtil.NT_TEST).addChild("subChild");
  node.setProperty("foo","bar");
  root.commit();
  IndexSearcher searcher=getSearcher();
  TopDocs docs=searcher.search(new TermQuery(new Term("barbar","1")),10);
  ScoreDoc[] scoreDocs=docs.scoreDocs;
  assertEquals("Number of results should be 1",1,scoreDocs.length);
  Document doc=searcher.doc(scoreDocs[0].doc);
  String path=doc.get(":path");
  assertEquals("/test/item",path);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void indexVersionSwitchOnReindex() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinition(index,"lucene",of(TYPENAME_STRING));
  NodeState indexed=HOOK.processCommit(EMPTY_NODE,builder.getNodeState(),CommitInfo.EMPTY);
  builder=indexed.builder();
  builder.child(INDEX_DEFINITIONS_NAME).child("lucene").setProperty(IndexDefinition.INDEX_VERSION,IndexFormatVersion.V1.getVersion());
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","fox is jumping");
  NodeState after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  assertEquals(IndexFormatVersion.V1,new IndexDefinition(root,indexed.getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("lucene")).getVersion());
  builder=indexed.builder();
  before=indexed;
  builder.child(INDEX_DEFINITIONS_NAME).child("lucene").setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  assertEquals(IndexFormatVersion.getDefault(),new IndexDefinition(root,indexed.getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("lucene")).getVersion());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 1. Index property foo in /test
 * 2. Then modify some other property in /test
 * This should not cause the index to be updated
 */
@Test public void nonIncludedPropertyChange() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinitionV2(index,"lucene",of(TYPENAME_STRING));
  nb.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,false);
  nb.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo"),STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","fox is jumping");
  builder.child("test2").setProperty("foo","bird is chirping");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  assertEquals(2,getSearcher().getIndexReader().numDocs());
  assertEquals("/test",getPath(new TermQuery(new Term("foo","fox is jumping"))));
  releaseIndexNode();
  before=indexed;
  builder=before.builder();
  builder.child("test").setProperty("bar","kite is flying");
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  assertEquals(2,getSearcher().getIndexReader().numDocs());
  assertEquals("change in non included property should not cause " + "index update",0,getSearcher().getIndexReader().numDeletedDocs());
}

</code></pre>

<br>
<pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLuceneWithRelativeProperty() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinitionV2(index,"lucene",of(TYPENAME_STRING));
  nb.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,false);
  nb.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo","jcr:content/mime","jcr:content/metadata/type"),STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","fox is jumping");
  builder.child("test").child("jcr:content").setProperty("mime","text");
  builder.child("test").child("jcr:content").child("metadata").setProperty("type","image");
  builder.child("jcr:content").setProperty("count","text");
  builder.child("jcr:content").child("boom").child("metadata").setProperty("type","image");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  assertEquals(1,getSearcher().getIndexReader().numDocs());
  assertEquals("/test",getPath(new TermQuery(new Term("foo","fox is jumping"))));
  assertEquals("/test",getPath(new TermQuery(new Term("jcr:content/mime","text"))));
  assertEquals("/test",getPath(new TermQuery(new Term("jcr:content/metadata/type","image"))));
  assertNull("bar must NOT be indexed",getPath(new TermQuery(new Term("count","text"))));
  releaseIndexNode();
  before=indexed;
  builder=before.builder();
  builder.child("test").child("jcr:content").setProperty("mime","pdf");
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  assertEquals("/test",getPath(new TermQuery(new Term("jcr:content/mime","pdf"))));
  releaseIndexNode();
  before=indexed;
  builder=before.builder();
  builder.child("test").child("jcr:content").remove();
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  assertNull("removes must be persisted too, 1st level",getPath(new TermQuery(new Term("jcr:content/mime","pdf"))));
  assertNull("removes must be persisted too, 2nd level",getPath(new TermQuery(new Term("jcr:content/metadata/type","image"))));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLuceneWithFullText() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder idxnb=newLuceneIndexDefinitionV2(index,"lucene",of(TYPENAME_STRING));
  IndexDefinition defn=new IndexDefinition(root,idxnb.getNodeState());
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","fox is jumping");
  builder.child("test").setProperty("price",100);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  assertEquals("/test",query(escape(FieldNames.createAnalyzedFieldName("foo")) + ":fox",defn));
  assertNull("Non string properties not indexed by default",getPath(NumericRangeQuery.newLongRange("price",100L,100L,true,true)));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noOfDocsIndexedNonFullText() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinitionV2(index,"lucene",of(TYPENAME_STRING));
  nb.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,false);
  nb.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo"),STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","fox is jumping");
  builder.child("test2").setProperty("bar","kite is flying");
  builder.child("test3").setProperty("foo","wind is blowing");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  assertEquals(2,getSearcher().getIndexReader().numDocs());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLuceneWithNonFullText() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinitionV2(index,"lucene",of(TYPENAME_STRING));
  nb.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,false);
  nb.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo","price","weight","bool","creationTime"),STRINGS));
  IndexDefinition defn=new IndexDefinition(root,nb.getNodeState());
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","fox is jumping");
  builder.child("test").setProperty("bar","kite is flying");
  builder.child("test").setProperty("price",100);
  builder.child("test").setProperty("weight",10.0);
  builder.child("test").setProperty("bool",true);
  builder.child("test").setProperty("truth",true);
  builder.child("test").setProperty("creationTime",createCal("05/06/2014"));
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  assertNull("Fulltext search should not work",query("foo:fox",defn));
  assertEquals("/test",getPath(new TermQuery(new Term("foo","fox is jumping"))));
  assertNull("bar must NOT be indexed",getPath(new TermQuery(new Term("bar","kite is flying"))));
  assertEquals("/test",getPath(NumericRangeQuery.newDoubleRange("weight",8D,12D,true,true)));
  assertEquals("/test",getPath(NumericRangeQuery.newLongRange("price",100L,100L,true,true)));
  assertEquals("/test",getPath(new TermQuery(new Term("bool","true"))));
  assertNull("truth must NOT be indexed",getPath(new TermQuery(new Term("truth","true"))));
  assertEquals("/test",getPath(NumericRangeQuery.newLongRange("creationTime",dateToTime("05/05/2014"),dateToTime("05/07/2014"),true,true)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexLookupTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void collectPathOnSubNode() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLuceneIndexDefinition(index,"l1",of(TYPENAME_STRING));
  index=builder.child("a").child(INDEX_DEFINITIONS_NAME);
  newLuceneIndexDefinition(index,"l2",of(TYPENAME_STRING));
  index=builder.child("a").child("b").child(INDEX_DEFINITIONS_NAME);
  newLuceneIndexDefinition(index,"l3",of(TYPENAME_STRING));
  LuceneIndexLookup lookup=new LuceneIndexLookup(builder.getNodeState());
  FilterImpl f=new FilterImpl();
  f.restrictPath("/a",Filter.PathRestriction.EXACT);
  assertEquals(of("/oak:index/l1","/a/oak:index/l2"),lookup.collectIndexNodePaths(f));
  f.restrictPath("/a/b",Filter.PathRestriction.EXACT);
  assertEquals(of("/oak:index/l1","/a/oak:index/l2","/a/b/oak:index/l3"),lookup.collectIndexNodePaths(f));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void collectPathOnRootNode() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLuceneIndexDefinition(index,"l1",of(TYPENAME_STRING));
  newLuceneIndexDefinition(index,"l2",of(TYPENAME_STRING));
  LuceneIndexLookup lookup=new LuceneIndexLookup(builder.getNodeState());
  FilterImpl f=new FilterImpl();
  f.restrictPath("/",Filter.PathRestriction.EXACT);
  assertEquals(of("/oak:index/l1","/oak:index/l2"),lookup.collectIndexNodePaths(f));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexProviderServiceTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void defaultSetup() throws Exception {
  MockOsgi.activate(service,context.bundleContext(),getDefaultConfig());
  assertNotNull(context.getService(QueryIndexProvider.class));
  assertNotNull(context.getService(Observer.class));
  assertNotNull(context.getService(IndexEditorProvider.class));
  LuceneIndexEditorProvider editorProvider=(LuceneIndexEditorProvider)context.getService(IndexEditorProvider.class);
  assertNotNull(editorProvider.getIndexCopier());
  IndexCopier indexCopier=service.getIndexCopier();
  assertNotNull("IndexCopier should be initialized as CopyOnRead is enabled by default",indexCopier);
  assertTrue(indexCopier.isPrefetchEnabled());
  assertNotNull("CopyOnRead should be enabled by default",context.getService(CopyOnReadStatsMBean.class));
  assertNotNull(context.getService(CacheStatsMBean.class));
  assertTrue(context.getService(Observer.class) instanceof BackgroundObserver);
  assertEquals(InfoStream.NO_OUTPUT,InfoStream.getDefault());
  MockOsgi.deactivate(service);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void enableExtractedTextCaching() throws Exception {
  Map<String,Object> config=getDefaultConfig();
  config.put("extractedTextCacheSizeInMB",11);
  MockOsgi.activate(service,context.bundleContext(),config);
  ExtractedTextCache textCache=service.getExtractedTextCache();
  assertNotNull(textCache.getCacheStats());
  assertNotNull(context.getService(CacheStatsMBean.class));
  assertEquals(11 * FileUtils.ONE_MB,textCache.getCacheStats().getMaxTotalWeight());
  MockOsgi.deactivate(service);
  assertNull(context.getService(CacheStatsMBean.class));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void debugLogging() throws Exception {
  Map<String,Object> config=getDefaultConfig();
  config.put("debug",true);
  MockOsgi.activate(service,context.bundleContext(),config);
  assertEquals(LoggingInfoStream.INSTANCE,InfoStream.getDefault());
  MockOsgi.deactivate(service);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexQueryTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepSimilarAsNativeQuery() throws Exception {
  String nativeQueryString="select [jcr:path] from [nt:base] where " + "native('lucene', 'mlt?stream.body=/test/a&mlt.fl=:path&mlt.mindf=0&mlt.mintf=0')";
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("text","Hello World");
  test.addChild("b").setProperty("text","He said Hello and then the world said Hello as well.");
  test.addChild("c").setProperty("text","He said Hi.");
  root.commit();
  Iterator<String> result=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void descendantTest() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a");
  test.addChild("b");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test')","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertEquals("/test/b",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeLuceneQuery() throws Exception {
  String nativeQueryString="select [jcr:path] from [nt:base] where native('lucene', 'title:foo -title:bar')";
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("title","foo");
  test.addChild("b").setProperty("title","bar");
  root.commit();
  Iterator<String> result=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepSimilarXPathQuery() throws Exception {
  String query="//element(*, nt:base)[rep:similar(., '/test/a')]";
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("text","Hello World Hello World");
  test.addChild("b").setProperty("text","Hello World");
  test.addChild("c").setProperty("text","World");
  test.addChild("d").setProperty("text","Hello");
  test.addChild("e").setProperty("text","World");
  test.addChild("f").setProperty("text","Hello");
  test.addChild("g").setProperty("text","World");
  test.addChild("h").setProperty("text","Hello");
  root.commit();
  Iterator<String> result=executeQuery(query,"xpath").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ischildnodeTest() throws Exception {
  Tree tree=root.getTree("/");
  Tree parents=tree.addChild("parents");
  parents.addChild("p0").setProperty("id","0");
  parents.addChild("p1").setProperty("id","1");
  parents.addChild("p2").setProperty("id","2");
  Tree children=tree.addChild("children");
  children.addChild("c1").setProperty("p","1");
  children.addChild("c2").setProperty("p","2");
  children.addChild("c3").setProperty("p","3");
  children.addChild("c4").setProperty("p","4");
  root.commit();
  Iterator<String> result=executeQuery("select p.[jcr:path], p2.[jcr:path] from [nt:base] as p inner join [nt:base] as p2 on ischildnode(p2, p) where p.[jcr:path] = '/'","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/, /children",result.next());
  assertEquals("/, /jcr:system",result.next());
  assertEquals("/, /oak:index",result.next());
  assertEquals("/, /parents",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void descendantTest2() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("name",asList("Hello","World"),STRINGS);
  test.addChild("b").setProperty("name","Hello");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test') and name='World'","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepSimilarQuery() throws Exception {
  String query="select [jcr:path] from [nt:base] where similar(., '/test/a')";
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("text","Hello World Hello World");
  test.addChild("b").setProperty("text","Hello World");
  test.addChild("c").setProperty("text","World");
  test.addChild("d").setProperty("text","Hello");
  test.addChild("e").setProperty("text","World");
  test.addChild("f").setProperty("text","Hello");
  test.addChild("g").setProperty("text","World");
  test.addChild("h").setProperty("text","Hello");
  root.commit();
  Iterator<String> result=executeQuery(query,"JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
  assertTrue(result.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexSuggestionTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void suggestNodeName() throws Exception {
  final String nodeType="nt:unstructured";
  createSuggestIndex("lucene-suggest",nodeType,LuceneIndexConstants.PROPDEF_PROP_NODE_NAME);
  root.addNode("indexedNode",nodeType);
  session.save();
  String suggQuery=createSuggestQuery(nodeType,"indexedn");
  QueryManager queryManager=session.getWorkspace().getQueryManager();
  QueryResult result=queryManager.createQuery(suggQuery,Query.JCR_SQL2).execute();
  RowIterator rows=result.getRows();
  String value=null;
  while (rows.hasNext()) {
    Row firstRow=rows.nextRow();
    value=firstRow.getValue("suggestion").getString();
    break;
  }
  assertEquals("Node name should be suggested","indexedNode",value);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCursorStability() throws Exception {
  NodeBuilder index=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",ImmutableSet.of("foo"),null);
  NodeBuilder rules=index.child(INDEX_RULES);
  NodeBuilder fooProp=rules.child("nt:base").child(LuceneIndexConstants.PROP_NODE).child("foo");
  fooProp.setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  NodeState before=builder.getNodeState();
  int noOfDocs=LucenePropertyIndex.LUCENE_QUERY_BATCH_SIZE + 10;
  for (int i=0; i < noOfDocs; i++) {
    builder.child("a" + i).setProperty("foo",(long)i);
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.GREATER_OR_EQUAL,PropertyValues.newLong(0L));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  before=indexed;
  builder=indexed.builder();
  for (int i=0; i < noOfDocs - 10; i++) {
    builder.child("a" + i).remove();
  }
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  builder=indexed.builder();
  NodeBuilder idx=builder.child(INDEX_DEFINITIONS_NAME).child("lucene");
  purgeDeletedDocs(idx,new IndexDefinition(root,idx));
  int numDeletes=getDeletedDocCount(idx,new IndexDefinition(root,idx));
  Assert.assertEquals(0,numDeletes);
  tracker.update(builder.getNodeState());
  Assert.assertTrue(Iterators.size(cursor) > 0);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLuceneV1NonExistentProperty() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder defn=newLuceneIndexDefinition(index,"lucene",ImmutableSet.of("String"));
  defn.setProperty(LuceneIndexConstants.COMPAT_MODE,IndexFormatVersion.V1.getVersion());
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","value-with-dash");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LuceneIndex(tracker,null);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictPath("/",Filter.PathRestriction.EXACT);
  filter.setFullTextConstraint(FullTextParser.parse("foo","value-with*"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,builder.getNodeState());
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
  FilterImpl filter2=createFilter(NT_BASE);
  filter2.restrictPath("/",Filter.PathRestriction.EXACT);
  filter2.setFullTextConstraint(FullTextParser.parse("baz","value-with*"));
  List<IndexPlan> plans2=queryIndex.getPlans(filter2,null,builder.getNodeState());
  Cursor cursor2=queryIndex.query(plans2.get(0),indexed);
  assertFalse(cursor2.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLucene() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictPath("/",Filter.PathRestriction.EXACT);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,builder.getNodeState());
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLucene3() throws Exception {
  NodeBuilder index=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",ImmutableSet.of("foo"),null);
  NodeBuilder rules=index.child(INDEX_RULES);
  NodeBuilder fooProp=rules.child("nt:base").child(LuceneIndexConstants.PROP_NODE).child("foo");
  fooProp.setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  fooProp.setProperty(LuceneIndexConstants.PROP_INCLUDED_TYPE,PropertyType.TYPENAME_STRING);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  builder.child("a").setProperty("foo","bar");
  builder.child("a").child("b").setProperty("foo","bar",Type.NAME);
  builder.child("a").child("b").child("c").setProperty("foo","bar",Type.NAME);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/a",cursor.next().getPath());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLuceneLazyCursor() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  for (int i=0; i < LuceneIndex.LUCENE_QUERY_BATCH_SIZE; i++) {
    builder.child("parent").child("child" + i).setProperty("foo","bar");
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  List<String> paths=copyOf(transform(cursor,new Function<IndexRow,String>(){
    public String apply(    IndexRow input){
      return input.getPath();
    }
  }
));
  assertTrue(!paths.isEmpty());
  assertEquals(LuceneIndex.LUCENE_QUERY_BATCH_SIZE + 1,paths.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void luceneWithCopyOnReadDirAndReindex() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo","foo2","foo3"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  NodeState indexed=HOOK.processCommit(before,builder.getNodeState(),CommitInfo.EMPTY);
  IndexCopier copier=new IndexCopier(sameThreadExecutor(),new File(getIndexDir()));
  IndexTracker tracker=new IndexTracker(copier);
  tracker.update(indexed);
  assertQuery(tracker,indexed,"foo","bar");
  assertEquals(0,copier.getInvalidFileCount());
  builder=indexed.builder();
  builder.setProperty("foo2","bar2");
  indexed=HOOK.processCommit(indexed,builder.getNodeState(),CommitInfo.EMPTY);
  tracker.update(indexed);
  assertQuery(tracker,indexed,"foo2","bar2");
  assertEquals(0,copier.getInvalidFileCount());
  builder=indexed.builder();
  builder.child(INDEX_DEFINITIONS_NAME).child("lucene").setProperty(REINDEX_PROPERTY_NAME,true);
  indexed=HOOK.processCommit(indexed,builder.getNodeState(),CommitInfo.EMPTY);
  tracker.update(indexed);
  assertQuery(tracker,indexed,"foo2","bar2");
  assertEquals(0,copier.getInvalidFileCount());
  assertEquals(2,copier.getIndexDir("/oak:index/lucene").listFiles().length);
  builder=indexed.builder();
  builder.setProperty("foo3","bar3");
  indexed=HOOK.processCommit(indexed,builder.getNodeState(),CommitInfo.EMPTY);
  tracker.update(indexed);
  assertQuery(tracker,indexed,"foo3","bar3");
  assertEquals(0,copier.getInvalidFileCount());
  assertEquals(1,copier.getIndexDir("/oak:index/lucene").listFiles().length);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLucene2() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  builder.child("a").setProperty("foo","bar");
  builder.child("a").child("b").setProperty("foo","bar");
  builder.child("a").child("b").child("c").setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/a/b/c",cursor.next().getPath());
  assertEquals("/a/b",cursor.next().getPath());
  assertEquals("/a",cursor.next().getPath());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTokens(){
  Analyzer analyzer=LuceneIndexConstants.ANALYZER;
  assertEquals(ImmutableList.of("parent","child"),LuceneIndex.tokenize("/parent/child",analyzer));
  assertEquals(ImmutableList.of("p1234","p5678"),LuceneIndex.tokenize("/p1234/p5678",analyzer));
  assertEquals(ImmutableList.of("first","second"),LuceneIndex.tokenize("first_second",analyzer));
  assertEquals(ImmutableList.of("first1","second2"),LuceneIndex.tokenize("first1_second2",analyzer));
  assertEquals(ImmutableList.of("first","second"),LuceneIndex.tokenize("first. second",analyzer));
  assertEquals(ImmutableList.of("first","second"),LuceneIndex.tokenize("first.second",analyzer));
  assertEquals(ImmutableList.of("hello","world"),LuceneIndex.tokenize("hello-world",analyzer));
  assertEquals(ImmutableList.of("hello","wor*"),LuceneIndex.tokenize("hello-wor*",analyzer));
  assertEquals(ImmutableList.of("*llo","world"),LuceneIndex.tokenize("*llo-world",analyzer));
  assertEquals(ImmutableList.of("*llo","wor*"),LuceneIndex.tokenize("*llo-wor*",analyzer));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LucenePropertyIndexTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void preExtractedTextProvider() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  root.commit();
  AccessStateProvidingBlob testBlob=new AccessStateProvidingBlob("fox is jumping","id1");
  MapBasedProvider textProvider=new MapBasedProvider();
  textProvider.write("id1","lion");
  editorProvider.getExtractedTextCache().setExtractedTextProvider(textProvider);
  Tree test=root.getTree("/").addChild("test");
  createFileNode(test,"text",testBlob,"text/plain");
  root.commit();
  assertTrue(testBlob.isStreamAccessed());
  assertQuery("select * from [nt:base] where CONTAINS(*, 'fox ')",asList("/test/text/jcr:content"));
  assertEquals(0,textProvider.accessCount);
  testBlob.resetState();
  root.getTree(idx.getPath()).setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  root.commit();
  assertFalse(testBlob.isStreamAccessed());
  assertQuery("select * from [nt:base] where CONTAINS(*, 'lion ')",asList("/test/text/jcr:content"));
  assertEquals(1,textProvider.accessCount);
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void multiValueAnd() throws Exception {
  Tree idx=createIndex("test1",of("tags"));
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("tags",of("a","b"),Type.STRINGS);
  test.addChild("b").setProperty("tags",of("a","c"),Type.STRINGS);
  root.commit();
  String q="SELECT * FROM [nt:unstructured] as content WHERE ISDESCENDANTNODE('/content/dam/en/us')\n" + "and(\n" + "    content.[tags] = 'Products:A'\n"+ "    or content.[tags] = 'Products:A/B'\n"+ "    or content.[tags] = 'Products:A/B'\n"+ "    or content.[tags] = 'Products:A'\n"+ ")\n"+ "and(\n"+ "    content.[tags] = 'DocTypes:A'\n"+ "    or content.[tags] = 'DocTypes:B'\n"+ "    or content.[tags] = 'DocTypes:C'\n"+ "    or content.[tags] = 'ProblemType:A'\n"+ ")\n"+ "and(\n"+ "    content.[hasRendition] IS NULL\n"+ "    or content.[hasRendition] = 'false'\n"+ ")";
  String explain=explain(q);
  System.out.println(explain);
  String luceneQuery=explain.substring(0,explain.indexOf('\n'));
  assertEquals("[nt:unstructured] as [content] /* lucene:test1(/oak:index/test1) " + "+(tags:Products:A tags:Products:A/B) " + "+(tags:DocTypes:A tags:DocTypes:B tags:DocTypes:C tags:ProblemType:A)",luceneQuery);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void excludedBlobContentNotAccessed() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  AccessStateProvidingBlob testBlob=new AccessStateProvidingBlob("<?xml version=\"1.0\" encoding=\"UTF-8\"?><msg>sky is blue</msg>");
  Tree test=root.getTree("/").addChild("test");
  createFileNode(test,"zip",testBlob,"application/zip");
  root.commit();
  assertFalse(testBlob.isStreamAccessed());
  assertEquals(0,testBlob.readByteCount());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void explainScoreTest() throws Exception {
  Tree idx=createIndex("test1",of("propa"));
  idx.addChild(PROP_NODE).addChild("propa");
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("propa","a");
  root.commit();
  String query="select [oak:scoreExplanation] from [nt:base] where propa='a'";
  List<String> result=executeQuery(query,SQL2,false,false);
  assertEquals(1,result.size());
  assertTrue(result.get(0).contains("(MATCH)"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void preExtractedTextCache() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  root.commit();
  AccessStateProvidingBlob testBlob=new AccessStateProvidingBlob("fox is jumping","id1");
  Tree test=root.getTree("/").addChild("test");
  createFileNode(test,"text",testBlob,"text/plain");
  root.commit();
  editorProvider.getExtractedTextCache().resetCache();
  test=root.getTree("/").addChild("test");
  createFileNode(test,"text2",testBlob,"text/plain");
  root.commit();
  assertTrue(testBlob.isStreamAccessed());
  assertEquals(2,testBlob.accessCount);
  testBlob.resetState();
  editorProvider.getExtractedTextCache().resetCache();
  test=root.getTree("/").addChild("test");
  createFileNode(test,"text3",testBlob,"text/plain");
  createFileNode(test,"text4",testBlob,"text/plain");
  root.commit();
  assertTrue(testBlob.isStreamAccessed());
  assertEquals(1,testBlob.accessCount);
  testBlob.resetState();
  test=root.getTree("/").addChild("test");
  createFileNode(test,"text5",testBlob,"text/plain");
  root.commit();
  assertFalse(testBlob.isStreamAccessed());
  assertEquals(0,testBlob.accessCount);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.NodeStateAnalyzerFactoryTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void analyzerByComposition_CharFilter() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"whitespace");
  NodeBuilder filters=nb.child(ANL_CHAR_FILTERS);
  filters.setProperty(OAK_CHILD_ORDER,ImmutableList.of("htmlStrip","mapping"),NAMES);
  filters.child("mapping").setProperty(ANL_NAME,"mapping");
  filters.child("htmlStrip");
  TokenizerChain analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(2,analyzer.getCharFilters().length);
  assertEquals(HTMLStripCharFilterFactory.class.getName(),analyzer.getCharFilters()[0].getClassArg());
  assertEquals(MappingCharFilterFactory.class.getName(),analyzer.getCharFilters()[1].getClassArg());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzerByComposition_FileResource() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"whitespace");
  NodeBuilder filters=nb.child(ANL_FILTERS);
  NodeBuilder stop=filters.child("stop");
  stop.setProperty("words","set1.txt, set2.txt");
  createFileNode(stop,"set1.txt",newCharArraySet("foo","bar"));
  createFileNode(stop,"set2.txt",newCharArraySet("foo1","bar1"));
  TokenizerChain analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(1,analyzer.getFilters().length);
  assertEquals(StopFilterFactory.class.getName(),analyzer.getFilters()[0].getClassArg());
  StopFilterFactory sff=(StopFilterFactory)analyzer.getFilters()[0];
  assertTrue(sff.getStopWords().contains("foo"));
  assertTrue(sff.getStopWords().contains("foo1"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzerViaReflection() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.setProperty(ANL_CLASS,TestAnalyzer.class.getName());
  TestAnalyzer analyzer=(TestAnalyzer)factory.createInstance(nb.getNodeState());
  assertNotNull(analyzer);
  assertEquals(LuceneIndexConstants.VERSION,analyzer.matchVersion);
  nb.setProperty(LuceneIndexConstants.ANL_LUCENE_MATCH_VERSION,Version.LUCENE_31.toString());
  analyzer=(TestAnalyzer)factory.createInstance(nb.getNodeState());
  assertEquals("Version field not picked from config",Version.LUCENE_31,analyzer.matchVersion);
  byte[] stopWords=newCharArraySet("foo","bar");
  createFileNode(nb,LuceneIndexConstants.ANL_STOPWORDS,stopWords);
  analyzer=(TestAnalyzer)factory.createInstance(nb.getNodeState());
  assertTrue("Configured stopword set not used",analyzer.getStopwordSet().contains("foo"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void analyzerByComposition_Tokenizer() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"whitespace");
  TokenizerChain analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(WhitespaceTokenizerFactory.class.getName(),analyzer.getTokenizer().getClassArg());
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"pathhierarchy").setProperty("delimiter","#");
  analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(PathHierarchyTokenizerFactory.class.getName(),analyzer.getTokenizer().getClassArg());
  assertEquals('#',getValue(analyzer.getTokenizer(),"delimiter"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzerByComposition_TokenFilter() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"whitespace");
  NodeBuilder filters=nb.child(ANL_FILTERS);
  filters.setProperty(OAK_CHILD_ORDER,ImmutableList.of("stop","LowerCase"),NAMES);
  filters.child("LowerCase").setProperty(ANL_NAME,"LowerCase");
  filters.child("LowerCase").setProperty(JCR_PRIMARYTYPE,"nt:unstructured");
  filters.child("stop").setProperty(ANL_LUCENE_MATCH_VERSION,Version.LUCENE_31.toString());
  TokenizerChain analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(2,analyzer.getFilters().length);
  assertEquals(StopFilterFactory.class.getName(),analyzer.getFilters()[0].getClassArg());
  assertEquals(LowerCaseFilterFactory.class.getName(),analyzer.getFilters()[1].getClassArg());
  assertTrue(analyzer.getFilters()[0].isExplicitLuceneMatchVersion());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeStateResourceLoader() throws Exception {
  byte[] testData="hello".getBytes();
  NodeBuilder nb=EMPTY_NODE.builder();
  createFileNode(nb,"foo",testData);
  NodeStateResourceLoader loader=new NodeStateResourceLoader(nb.getNodeState(),new ClasspathResourceLoader());
  assertArrayEquals(testData,IOUtils.toByteArray(loader.openResource("foo")));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeStateAsMap() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.setProperty("a","a");
  nb.setProperty("b",1);
  nb.setProperty(JcrConstants.JCR_PRIMARYTYPE,"nt:base");
  nb.setProperty(":hiddenProp","hiddenValue");
  Map<String,String> result=factory.convertNodeState(nb.getNodeState());
  assertEquals("a",result.get("a"));
  assertEquals("1",result.get("b"));
  assertNull(result.get(JcrConstants.JCR_PRIMARYTYPE));
  assertNull(result.get(":hiddenProp"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.OakDirectoryTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOverflow() throws Exception {
  Directory dir=createDir(builder,false);
  NodeBuilder file=builder.child(INDEX_DATA_CHILD_NAME).child("test.txt");
  int blobSize=32768;
  int dataSize=90844;
  file.setProperty(OakDirectory.PROP_BLOB_SIZE,blobSize);
  List<? super Blob> blobs=new ArrayList<Blob>(dataSize);
  for (int i=0; i < dataSize; i++) {
    blobs.add(new ArrayBasedBlob(new byte[0]));
  }
  file.setProperty(PropertyStates.createProperty("jcr:data",blobs,Type.BINARIES));
  IndexInput input=dir.openInput("test.txt",IOContext.DEFAULT);
  assertEquals((long)blobSize * (dataSize - 1),input.length());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void saveListing() throws Exception {
  builder.setProperty(LuceneIndexConstants.SAVE_DIR_LISTING,true);
  Directory dir=createDir(builder,false);
  Set<String> fileNames=newHashSet();
  for (int i=0; i < 10; i++) {
    String fileName="foo" + i;
    createFile(dir,fileName);
    fileNames.add(fileName);
  }
  dir.close();
  dir=createDir(builder,true);
  assertEquals(fileNames,newHashSet(dir.listAll()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void readOnlyDirectory() throws Exception {
  Directory dir=new OakDirectory(new ReadOnlyBuilder(builder.getNodeState()),new IndexDefinition(root,builder.getNodeState()),true);
  assertEquals(0,dir.listAll().length);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void largeFile() throws Exception {
  FileStore store=FileStore.newFileStore(tempFolder.getRoot()).withMemoryMapping(false).withBlobStore(new BlackHoleBlobStore()).create();
  SegmentNodeStore nodeStore=SegmentNodeStore.newSegmentNodeStore(store).create();
  IndexDefinition defn=new IndexDefinition(INITIAL_CONTENT,EmptyNodeState.EMPTY_NODE);
  Directory directory=new OakDirectory(nodeStore.getRoot().builder(),defn,false);
  long expectedSize=ONE_GB * 2 + ONE_MB;
  String fileName="test";
  writeFile(directory,fileName,expectedSize);
  assertEquals(expectedSize,directory.fileLength(fileName));
  IndexInput input=directory.openInput(fileName,IOContext.DEFAULT);
  readInputToEnd(expectedSize,input);
  store.close();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompatibility() throws Exception {
  builder.setProperty(LuceneIndexConstants.BLOB_SIZE,OakDirectory.DEFAULT_BLOB_SIZE);
  Directory dir=createDir(builder,false);
  byte[] data=assertWrites(dir,OakDirectory.DEFAULT_BLOB_SIZE);
  NodeBuilder testNode=builder.child(INDEX_DATA_CHILD_NAME).child("test");
  testNode.removeProperty(PROP_BLOB_SIZE);
  IndexInput i=dir.openInput("test",IOContext.DEFAULT);
  assertEquals(fileSize,i.length());
  byte[] result=new byte[fileSize];
  i.readBytes(result,0,result.length);
  assertTrue(Arrays.equals(data,result));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.util.FacetHelperTest </h4><pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseFacetField() throws Exception {
  String field=FacetHelper.parseFacetField("rep:facet(text)");
  assertNotNull(field);
  assertEquals("text",field);
  field=FacetHelper.parseFacetField("rep:facet(jcr:title)");
  assertNotNull(field);
  assertEquals("jcr:title",field);
  field=FacetHelper.parseFacetField("rep:facet(jcr:primaryType)");
  assertNotNull(field);
  assertEquals("jcr:primaryType",field);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.nodetype.NodeTypeIndexQueryTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void oak3371() throws Exception {
  setTraversalEnabled(false);
  Tree t, t1;
  NodeUtil n=new NodeUtil(root.getTree("/oak:index"));
  createIndexDefinition(n,"nodeType",false,new String[]{JCR_PRIMARYTYPE},new String[]{NT_UNSTRUCTURED});
  root.commit();
  t=root.getTree("/");
  t=child(t,"test",NT_UNSTRUCTURED);
  t1=child(t,"a",NT_UNSTRUCTURED);
  t1.setProperty("foo","bar");
  child(t,"b",NT_UNSTRUCTURED);
  root.commit();
  List<String> plan;
  plan=executeQuery("explain SELECT * FROM [nt:unstructured] " + "WHERE ISDESCENDANTNODE([/test]) " + "AND CONTAINS(foo, 'bar')",Query.JCR_SQL2,false);
  assertEquals(1,plan.size());
  assertTrue(plan.get(0).contains("no-index"));
  assertEquals("[nt:unstructured] as [nt:unstructured] /* no-index\n" + "  where (isdescendantnode([nt:unstructured], [/test]))\n" + "  and (contains([nt:unstructured].[foo], 'bar')) */",plan.get(0));
  plan=executeQuery("explain SELECT * FROM [nt:unstructured] " + "WHERE ISDESCENDANTNODE([/test]) " + "AND NOT CONTAINS(foo, 'bar')",Query.JCR_SQL2,false);
  assertEquals(1,plan.size());
  assertTrue(plan.get(0).contains("no-index"));
  assertEquals("[nt:unstructured] as [nt:unstructured] /* no-index\n" + "  where (isdescendantnode([nt:unstructured], [/test]))\n" + "  and (not contains([nt:unstructured].[foo], 'bar')) */",plan.get(0));
  plan=executeQuery("explain SELECT * FROM [nt:unstructured] " + "WHERE ISDESCENDANTNODE([/test]) " + "AND NOT NOT CONTAINS(foo, 'bar')",Query.JCR_SQL2,false);
  assertEquals(1,plan.size());
  assertTrue(plan.get(0).contains("no-index"));
  assertEquals("[nt:unstructured] as [nt:unstructured] /* no-index\n" + "  where (isdescendantnode([nt:unstructured], [/test]))\n" + "  and (contains([nt:unstructured].[foo], 'bar')) */",plan.get(0));
  setTraversalEnabled(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.nodetype.NodeTypeIndexTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeType() throws Exception {
  NodeBuilder root=store.getRoot().builder();
  root.getChildNode("rep:security").remove();
  root.getChildNode("oak:index").getChildNode("nodetype").setProperty("entryCount",-1);
  addFolder(root,"folder-1");
  addFolder(root,"folder-2");
  addFile(root,"file-1");
  store.merge(root,new EditorHook(new IndexUpdateProvider(new PropertyIndexEditorProvider())),CommitInfo.EMPTY);
  NodeState rootState=store.getRoot();
  NodeTypeIndex index=new NodeTypeIndex();
  FilterImpl filter;
  filter=createFilter(rootState,JcrConstants.NT_FOLDER);
  assertEquals(6.0,index.getCost(filter,rootState),0.0);
  checkCursor(index.query(filter,rootState),"/folder-1","/folder-2");
  filter=createFilter(rootState,JcrConstants.NT_FILE);
  assertEquals(5.0,index.getCost(filter,rootState),0.0);
  checkCursor(index.query(filter,rootState),"/file-1");
  filter=createFilter(rootState,JcrConstants.NT_HIERARCHYNODE);
  assertEquals(7.0,index.getCost(filter,rootState),0.0);
  checkCursor(index.query(filter,rootState),"/folder-1","/folder-2","/file-1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.AsyncPropertyIndexTest </h4><pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAsyncPropertyLookup() throws Exception {
  NodeStore store=new MemoryNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder def=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,of("foo"),null);
  def.setProperty(REINDEX_ASYNC_PROPERTY_NAME,true);
  builder.child("a").setProperty("foo","abc");
  builder.child("b").setProperty("foo",Arrays.asList("abc","def"),STRINGS);
  NodeState head=store.merge(builder,hook,EMPTY);
  FilterImpl f=createFilter(head,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(head);
  try {
    assertEquals(of(),find(lookup,"foo","abc",f));
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
  AsyncIndexUpdate async=new AsyncIndexUpdate(ASYNC_REINDEX_VALUE,store,provider,true);
  async.run();
  assertEquals(ASYNC_REINDEX_VALUE,store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("foo").getString(ASYNC_PROPERTY_NAME));
  async.run();
  assertEquals(null,store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("foo").getString(ASYNC_PROPERTY_NAME));
  builder=store.getRoot().builder();
  builder.child("c").setProperty("foo","def");
  head=store.merge(builder,hook,EMPTY);
  f=createFilter(head,NT_BASE);
  lookup=new PropertyIndexLookup(head);
  assertEquals(ImmutableSet.of("b","c"),find(lookup,"foo","def",f));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.MultiPropertyOrTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void query() throws Exception {
  Tree t=root.getTree("/");
  t.addChild("a").setProperty("x","foo");
  t.addChild("b").setProperty("y","bar");
  t.addChild("c").setProperty("z","foo");
  root.commit();
  setTraversalEnabled(false);
  assertQuery("select [jcr:path] from [nt:base] where [x] is not null",ImmutableList.of("/a"));
  List<String> lines=executeQuery("explain select [jcr:path] from [nt:base] where [x] is not null",Query.JCR_SQL2);
  assertEquals(1,lines.size());
  assertTrue(lines.get(0).contains("property xyz IS NOT NULL"));
  lines=executeQuery("explain select [jcr:path] from [nt:base] where [x] = 'foo' OR [y] = 'foo'",Query.JCR_SQL2);
  assertEquals(1,lines.size());
  assertTrue(lines.get(0).contains("property xyz = foo"));
  lines=executeQuery("explain select [jcr:path] from [nt:base] where [x] = 'foo' OR [y] = 'bar'",Query.JCR_SQL2);
  assertEquals(1,lines.size());
  assertTrue(lines.get(0),lines.get(0).contains("property xyz IN (foo, bar)"));
  assertQuery("select [jcr:path] from [nt:base] where [x] = 'foo' OR [y] = 'foo'",ImmutableList.of("/a"));
  assertQuery("select [jcr:path] from [nt:base] where [x] = 'foo' OR [z] = 'foo'",ImmutableList.of("/a","/c"));
  assertQuery("select [jcr:path] from [nt:base] where [x] = 'foo' OR [y] = 'bar'",ImmutableList.of("/a","/b"));
  setTraversalEnabled(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.OrderedPropertyIndexEditorProviderTest </h4><pre class="type-9 type-7 type-6 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void withIndexDefSingleNode() throws RepositoryException, CommitFailedException {
  NodeBuilder root=InitialContent.INITIAL_CONTENT.builder();
  createIndexDef(root);
  NodeState before=root.getNodeState();
  root.child("n1").setProperty(indexedProperty,"dead");
  NodeState after=root.getNodeState();
  custom.starting();
  root=hook.processCommit(before,after,CommitInfo.EMPTY).builder();
  assertEquals(1,custom.getLogs().size());
  assertThat(custom.getLogs(),hasItem(OrderedIndex.DEPRECATION_MESSAGE));
  custom.finished();
  NodeBuilder b=root.getChildNode(IndexConstants.INDEX_DEFINITIONS_NODE_TYPE).getChildNode(indexName).getChildNode(IndexConstants.INDEX_CONTENT_NODE_NAME);
  assertFalse("nothing should have been touched under the actual index",b.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.OrderedPropertyIndexProviderTest </h4><pre class="type-6 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void singleQueryRun(){
  custom.starting();
  executeQuery("SELECT * FROM [oak:Unstructured]",SQL2);
  List<String> logs=custom.getLogs();
  assertEquals(1,logs.size());
  assertThat(logs,hasItem(OrderedIndex.DEPRECATION_MESSAGE));
  custom.finished();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.PropertyIndexQueryTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void bindVariableTest() throws Exception {
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("hello").setProperty("id","1");
  test.addChild("world").setProperty("id","2");
  root.commit();
  Map<String,PropertyValue> sv=new HashMap<String,PropertyValue>();
  sv.put("id",PropertyValues.newString("1"));
  Iterator<? extends ResultRow> result;
  result=executeQuery("select * from [nt:base] where id = $id",SQL2,sv).getRows().iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/hello",result.next().getPath());
  sv.put("id",PropertyValues.newString("2"));
  result=executeQuery("select * from [nt:base] where id = $id",SQL2,sv).getRows().iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/world",result.next().getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.PropertyIndexTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void traversalWarning() throws Exception {
  ListAppender appender=createAndRegisterAppender();
  int testDataSize=ContentMirrorStoreStrategy.TRAVERSING_WARN;
  NodeState indexed=createTestData(testDataSize);
  assertEquals(testDataSize,getResultSize(indexed,"foo","bar"));
  assertFalse(appender.list.isEmpty());
  appender.list.clear();
  testDataSize=100;
  indexed=createTestData(100);
  assertEquals(testDataSize,getResultSize(indexed,"foo","bar"));
  assertTrue("Warning should not be logged for traversing " + testDataSize,appender.list.isEmpty());
  deregisterAppender(appender);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPathAwarePropertyLookup() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty("foo","abc");
  builder.child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictPath("/a",Filter.PathRestriction.ALL_CHILDREN);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("a"),find(lookup,"foo","abc",f));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPathIncludeExclude() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty(createProperty(PROP_INCLUDED_PATHS,of("/test/a"),Type.STRINGS));
  index.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/test/a/b"),Type.STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").child("a").setProperty("foo","abc");
  builder.child("test").child("a").child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("abc"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("test/a"),find(lookup,"foo","abc",f));
  PropertyIndexPlan plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
  f.setPath("/test/a/x");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY != plan.getCost());
  f.setPath("/test/a/b");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
  f.setPath("/test/a");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomConfigPropertyLookup() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"fooIndex",true,false,ImmutableSet.of("foo","extrafoo"),null);
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty("foo","abc").setProperty("extrafoo","pqr");
  builder.child("b").setProperty("foo",Arrays.asList("abc","def"),Type.STRINGS);
  for (int i=0; i < MANY; i++) {
    builder.child("n" + i).setProperty("foo","xyz");
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("a","b"),find(lookup,"foo","abc",f));
  assertEquals(ImmutableSet.of("b"),find(lookup,"foo","def",f));
  assertEquals(ImmutableSet.of(),find(lookup,"foo","ghi",f));
  assertEquals(MANY,find(lookup,"foo","xyz",f).size());
  assertEquals(ImmutableSet.of("a"),find(lookup,"extrafoo","pqr",f));
  try {
    assertEquals(ImmutableSet.of(),find(lookup,"pqr","foo",f));
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPathInclude() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty(createProperty(PROP_INCLUDED_PATHS,of("/test/a"),Type.STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").child("a").setProperty("foo","abc");
  builder.child("test").child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("test/a"),find(lookup,"foo","abc",f));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyLookup() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty("entryCount",-1);
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty("foo","abc");
  builder.child("b").setProperty("foo",Arrays.asList("abc","def"),Type.STRINGS);
  for (int i=0; i < MANY; i++) {
    builder.child("n" + i).setProperty("foo","xyz");
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("a","b"),find(lookup,"foo","abc",f));
  assertEquals(ImmutableSet.of("b"),find(lookup,"foo","def",f));
  assertEquals(ImmutableSet.of(),find(lookup,"foo","ghi",f));
  assertEquals(MANY,find(lookup,"foo","xyz",f).size());
  assertEquals(MANY + 2,find(lookup,"foo",null,f).size());
  double cost;
  cost=lookup.getCost(f,"foo",PropertyValues.newString("xyz"));
  assertTrue("cost: " + cost,cost >= MANY);
  cost=lookup.getCost(f,"foo",null);
  assertTrue("cost: " + cost,cost >= MANY);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-666">OAK-666:
     *      Property2Index: node type is used when indexing, but ignored when
     *      querying</a>
 */
@Test public void testCustomConfigNodeType() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  createIndexDefinition(index,"fooIndex",true,false,ImmutableSet.of("foo","extrafoo"),ImmutableSet.of(NT_UNSTRUCTURED));
  createIndexDefinition(index,"fooIndexFile",true,false,ImmutableSet.of("foo"),ImmutableSet.of(NT_FILE));
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,Type.NAME).setProperty("foo","abc");
  builder.child("b").setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,Type.NAME).setProperty("foo",Arrays.asList("abc","def"),Type.STRINGS);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_UNSTRUCTURED);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("a","b"),find(lookup,"foo","abc",f));
  assertEquals(ImmutableSet.of("b"),find(lookup,"foo","def",f));
  assertEquals(ImmutableSet.of(),find(lookup,"foo","ghi",f));
  try {
    assertEquals(ImmutableSet.of(),find(lookup,"pqr","foo",f));
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPathExclude() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/test/a"),Type.STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").child("a").setProperty("foo","abc");
  builder.child("test").child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("abc"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("test/b"),find(lookup,"foo","abc",f));
  PropertyIndexPlan plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
  f.setPath("/test2");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY != plan.getCost());
  f.setPath("/test");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-666">OAK-666:
     *      Property2Index: node type is used when indexing, but ignored when
     *      querying</a>
 */
@Test public void testCustomConfigNodeTypeFallback() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  createIndexDefinition(index,"fooIndex",true,false,ImmutableSet.of("foo","extrafoo"),null);
  createIndexDefinition(index,"fooIndexFile",true,false,ImmutableSet.of("foo"),ImmutableSet.of(NT_FILE));
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,Type.NAME).setProperty("foo","abc");
  builder.child("b").setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,Type.NAME).setProperty("foo",Arrays.asList("abc","def"),Type.STRINGS);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(after,NT_UNSTRUCTURED);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("a","b"),find(lookup,"foo","abc",f));
  assertEquals(ImmutableSet.of("b"),find(lookup,"foo","def",f));
  assertEquals(ImmutableSet.of(),find(lookup,"foo","ghi",f));
  try {
    assertEquals(ImmutableSet.of(),find(lookup,"pqr","foo",f));
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.RelativePathTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void query() throws Exception {
  Tree t=root.getTree("/");
  t.addChild("a").addChild("n").setProperty("myProp","foo");
  t.addChild("b").addChild("n").setProperty("myProp","bar");
  t.addChild("c").addChild("x").setProperty("myProp","foo");
  t.setProperty("myProp","foo");
  root.commit();
  setTraversalEnabled(false);
  assertQuery("select [jcr:path] from [nt:base] where [n/myProp] is not null",ImmutableList.of("/a","/b"));
  List<String> lines=executeQuery("explain select [jcr:path] from [nt:base] where [n/myProp] is not null",Query.JCR_SQL2);
  assertEquals(1,lines.size());
  assertTrue(lines.get(0).contains("property myProp"));
  assertQuery("select [jcr:path] from [nt:base] where [n/myProp] = 'foo'",ImmutableList.of("/a"));
  setTraversalEnabled(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.ValuePathTupleTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void greaterThanPredicate(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.GreaterThanPredicate("b")).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertEquals("e",filtered.next().getValue());
  assertEquals("f",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void greaterThanEqualaPredicate(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.GreaterThanPredicate("b",true)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("b",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertEquals("e",filtered.next().getValue());
  assertEquals("f",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void betweenIncludeStart(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.BetweenPredicate("b","d",true,false)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("b",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void betweenNoIncludes(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.BetweenPredicate("b","d",false,false)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("c",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * testing for asserting the right comparison behaviour of the custom class
 */
@Test public void valuePathTupleComparison(){
  try {
    new ValuePathTuple("value","path").compareTo(null);
    fail("It should have raised a NPE");
  }
 catch (  NullPointerException e) {
  }
  assertEquals(0,(new ValuePathTuple("value","path")).compareTo(new ValuePathTuple("value","path")));
  assertEquals(-1,(new ValuePathTuple("value","path")).compareTo(new ValuePathTuple("value1","path")));
  assertEquals(-1,(new ValuePathTuple("value1","path")).compareTo(new ValuePathTuple("value1","path1")));
  assertEquals(1,(new ValuePathTuple("value1","path")).compareTo(new ValuePathTuple("value","path")));
  assertEquals(1,(new ValuePathTuple("value1","path1")).compareTo(new ValuePathTuple("value1","path")));
  assertEquals(-1,(new ValuePathTuple("value000","/test/n1")).compareTo(new ValuePathTuple("value001","/test/n0")));
  assertEquals(1,(new ValuePathTuple("value001","/test/n0")).compareTo(new ValuePathTuple("value000","/test/n1")));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void lessThanEqualPredicate(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.LessThanPredicate("e",true)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("a",filtered.next().getValue());
  assertEquals("b",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertEquals("e",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void betweenIncludeBoth(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.BetweenPredicate("b","d",true,true)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("b",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void lessThanPredicate(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.LessThanPredicate("e")).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("a",filtered.next().getValue());
  assertEquals("b",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertFalse(filtered.hasNext());
  data=ImmutableList.of(new ValuePathTuple("f","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("a","foobar"));
  filtered=Iterables.filter(data,new ValuePathTuple.LessThanPredicate("e")).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("d",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertEquals("b",filtered.next().getValue());
  assertEquals("a",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void betweenIncludeEnd(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.BetweenPredicate("b","d",false,true)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.strategy.ContentMirrorStoreStrategyTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * <p>
 * Tests the index pruning mechanism
 * </p>
 * <ul>
 * <li>
 * adds a few levels of nodes, nodes with an even index will have the
 * 'match' property set</li>
 * <li>
 * pruning in this case means that whatever path that doesn't have a 'match'
 * property is considered dead weight and should be removed from the index</li>
 * </ul>
 */
@Test public void testIndexPruning(){
  IndexStoreStrategy store=new ContentMirrorStoreStrategy();
  NodeState root=EMPTY_NODE;
  NodeBuilder index=root.builder();
  for (  String path : asList("/","a/b/c","a/b/d","b","d/e","d/e/f")) {
    store.update(index,path,null,null,EMPTY,KEY);
  }
  checkPath(index,"key","",true);
  checkPath(index,"key","a/b/c",true);
  checkPath(index,"key","a/b/d",true);
  checkPath(index,"key","b",true);
  checkPath(index,"key","d/e",true);
  checkPath(index,"key","d/e/f",true);
  store.update(index,"/",null,null,KEY,EMPTY);
  checkPath(index,"key","d/e/f",true);
  store.update(index,"d/e",null,null,KEY,EMPTY);
  checkPath(index,"key","d/e/f",true);
  store.update(index,"d/e/f",null,null,KEY,EMPTY);
  checkNotPath(index,"key","d");
  store.update(index,"a/b/d",null,null,KEY,EMPTY);
  store.update(index,"a/b",null,null,KEY,EMPTY);
  checkPath(index,"key","a/b/c",true);
  store.update(index,"",null,null,EMPTY,KEY);
  store.update(index,"d/e/f",null,null,KEY,EMPTY);
  store.update(index,"b",null,null,KEY,EMPTY);
  store.update(index,"a/b/c",null,null,KEY,EMPTY);
  store.update(index,"",null,null,KEY,EMPTY);
  Assert.assertEquals(0,index.getChildNodeCount(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIndexCountersUsageWithoutPathRestriction(){
  final long approxNodeCount=50;
  final long approxKeyCount=25;
  final long entryCount=30 * DEFAULT_RESOLUTION;
  final long keyCount=75;
  final int maxTraversal=200;
  final String keyValue=KEY.iterator().next();
  final String approxPropName=COUNT_PROPERTY_PREFIX + "gen_uuid";
  IndexStoreStrategy store=new ContentMirrorStoreStrategy();
  NodeState root=EMPTY_NODE;
  NodeBuilder indexMeta=root.builder();
  NodeBuilder index=indexMeta.child(INDEX_CONTENT_NODE_NAME);
  NodeBuilder key=index.child(keyValue);
  index.setProperty(approxPropName,approxNodeCount,Type.LONG);
  Assert.assertEquals("Approximate count not used for is-not-null query",approxNodeCount,store.count(root,indexMeta.getNodeState(),null,maxTraversal));
  key.setProperty(approxPropName,approxKeyCount,Type.LONG);
  Assert.assertEquals("Approximate count not used for key=value query",approxKeyCount,store.count(root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(ENTRY_COUNT_PROPERTY_NAME,entryCount,Type.LONG);
  Assert.assertEquals("Entry count not used even when present for is-not-null query",entryCount,store.count(root,indexMeta.getNodeState(),null,maxTraversal));
  Assert.assertTrue("Rough key count not considered for key=value query",entryCount > store.count(root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(KEY_COUNT_PROPERTY_NAME,keyCount,Type.LONG);
  Assert.assertTrue("Key count not considered for key=value query",entryCount > store.count(root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(ENTRY_COUNT_PROPERTY_NAME,(long)-1,Type.LONG);
  Assert.assertEquals("Entry count not used even when present for is-not-null query",0,store.count(root,indexMeta.getNodeState(),null,maxTraversal));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.index.SolrIndexEditorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIndexedProperties() throws Exception {
  SolrServer solrServer=TestUtils.createSolrServer();
  OakSolrConfiguration configuration=TestUtils.getTestConfiguration();
  IndexUpdateCallback callback=mock(IndexUpdateCallback.class);
  SolrIndexEditor solrIndexEditor=new SolrIndexEditor(solrServer,configuration,callback);
  NodeState before=mock(NodeState.class);
  NodeState after=mock(NodeState.class);
  Iterable properties=new Iterable<PropertyState>(){
    @Override public Iterator<PropertyState> iterator(){
      return Arrays.asList(PropertyStates.createProperty("foo1","bar")).iterator();
    }
  }
;
  when(after.getProperties()).thenReturn(properties);
  solrIndexEditor.leave(before,after);
  QueryResponse queryResponse=solrServer.query(new SolrQuery("foo1:*"));
  assertEquals(1,queryResponse.getResults().getNumFound());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIgnoredPropertiesNotIndexed() throws Exception {
  NodeBuilder builder=mock(NodeBuilder.class);
  SolrServer solrServer=TestUtils.createSolrServer();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Nonnull @Override public Collection<String> getIgnoredProperties(){
      return Arrays.asList("foo2");
    }
    @Nonnull @Override public CommitPolicy getCommitPolicy(){
      return CommitPolicy.HARD;
    }
  }
;
  IndexUpdateCallback callback=mock(IndexUpdateCallback.class);
  SolrIndexEditor solrIndexEditor=new SolrIndexEditor(solrServer,configuration,callback);
  NodeState before=mock(NodeState.class);
  NodeState after=mock(NodeState.class);
  Iterable properties=new Iterable<PropertyState>(){
    @Override public Iterator<PropertyState> iterator(){
      return Arrays.asList(PropertyStates.createProperty("foo2","bar")).iterator();
    }
  }
;
  when(after.getProperties()).thenReturn(properties);
  solrIndexEditor.leave(before,after);
  QueryResponse queryResponse=solrServer.query(new SolrQuery("foo2:*"));
  assertEquals(0,queryResponse.getResults().getNumFound());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.index.SolrIndexHookIT </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleNodeCreation() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("oak:index").child("solr").setProperty(JCR_PRIMARYTYPE,"oak:QueryIndexDefinition").setProperty("type","solr");
  NodeState before=builder.getNodeState();
  builder.child("newnode").setProperty("prop","val");
  NodeState after=builder.getNodeState();
  NodeState indexed=hook.processCommit(before,after,CommitInfo.EMPTY);
  QueryIndex queryIndex=new SolrQueryIndex("solr",server,configuration);
  FilterImpl filter=new FilterImpl(mock(SelectorImpl.class),"",new QueryEngineSettings());
  filter.restrictPath("/newnode",Filter.PathRestriction.EXACT);
  filter.restrictProperty("prop",Operator.EQUAL,PropertyValues.newString("val"));
  Cursor cursor=queryIndex.query(filter,indexed);
  assertNotNull(cursor);
  assertTrue("no results found",cursor.hasNext());
  IndexRow next=cursor.next();
  assertNotNull("first returned item should not be null",next);
  assertEquals("/newnode",next.getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyAddition() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("oak:index").child("solr").setProperty(JCR_PRIMARYTYPE,"oak:QueryIndexDefinition").setProperty("type","solr");
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=hook.processCommit(before,after,CommitInfo.EMPTY);
  QueryIndex queryIndex=new SolrQueryIndex("solr",server,configuration);
  FilterImpl filter=new FilterImpl(mock(SelectorImpl.class),"",new QueryEngineSettings());
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  Cursor cursor=queryIndex.query(filter,indexed);
  assertNotNull(cursor);
  assertTrue("no results found",cursor.hasNext());
  IndexRow next=cursor.next();
  assertNotNull("first returned item should not be null",next);
  assertEquals("/test",next.getPath());
  assertNotNull(next.getValue("foo"));
  assertEquals(PropertyValues.newString("[bar]"),next.getValue("foo"));
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.FilterQueryParserTest </h4><pre class="type-9 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMatchAllConversionWithNoConstraints() throws Exception {
  Filter filter=mock(Filter.class);
  OakSolrConfiguration configuration=mock(OakSolrConfiguration.class);
  SolrQuery solrQuery=FilterQueryParser.getQuery(filter,null,configuration);
  assertNotNull(solrQuery);
  assertEquals("*:*",solrQuery.getQuery());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCollapseJcrContentNodes() throws Exception {
  String query="select [jcr:path], [jcr:score], * from [nt:hierarchy] as a where isdescendantnode(a, '/')";
  Filter filter=mock(Filter.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean collapseJcrContentNodes(){
      return true;
    }
  }
;
  when(filter.getQueryStatement()).thenReturn(query);
  SolrQuery solrQuery=FilterQueryParser.getQuery(filter,null,configuration);
  assertNotNull(solrQuery);
  String[] filterQueries=solrQuery.getFilterQueries();
  assertTrue(Arrays.asList(filterQueries).contains("{!collapse field=" + configuration.getCollapsedPathField() + " min="+ configuration.getPathDepthField()+ " hint=top_fc nullPolicy=expand}"));
  assertEquals("*:*",solrQuery.get("q"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAllChildrenQueryParsing() throws Exception {
  String query="select [jcr:path], [jcr:score], * from [nt:hierarchy] as a where isdescendantnode(a, '/')";
  Filter filter=mock(Filter.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPathRestrictions(){
      return true;
    }
  }
;
  when(filter.getQueryStatement()).thenReturn(query);
  Filter.PathRestriction pathRestriction=Filter.PathRestriction.ALL_CHILDREN;
  when(filter.getPathRestriction()).thenReturn(pathRestriction);
  when(filter.getPath()).thenReturn("/");
  SolrQuery solrQuery=FilterQueryParser.getQuery(filter,null,configuration);
  assertNotNull(solrQuery);
  String[] filterQueries=solrQuery.getFilterQueries();
  assertTrue(Arrays.asList(filterQueries).contains(configuration.getFieldForPathRestriction(pathRestriction) + ":\\/"));
  assertEquals("*:*",solrQuery.get("q"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.LMSEstimatorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEstimate() throws Exception {
  LMSEstimator lmsEstimator=new LMSEstimator();
  Filter filter=mock(Filter.class);
  long estimate=lmsEstimator.estimate(filter);
  assertEquals(1l,estimate);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleUpdates() throws Exception {
  LMSEstimator lmsEstimator=new LMSEstimator();
  Filter filter=mock(Filter.class);
  FullTextExpression fte=new FullTextTerm("foo","bar",false,false,"");
  when(filter.getFullTextConstraint()).thenReturn(fte);
  SolrDocumentList docs=new SolrDocumentList();
  lmsEstimator.update(filter,docs);
  long actualCount=10;
  docs.setNumFound(actualCount);
  long estimate=lmsEstimator.estimate(filter);
  long diff=actualCount - estimate;
  lmsEstimator.update(filter,docs);
  long estimate2=lmsEstimator.estimate(filter);
  long diff2=actualCount - estimate2;
  assertTrue(diff2 < diff);
  lmsEstimator.update(filter,docs);
  long estimate3=lmsEstimator.estimate(filter);
  assertEquals(estimate3,estimate2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.SolrIndexQueryTestIT </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRepSimilarXPathQuery() throws Exception {
  String query="//element(*, nt:base)[rep:similar(., '/test/a')]";
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("text","the quick brown fox jumped over the lazy white dog");
  test.addChild("b").setProperty("text","I am a dog");
  test.addChild("c").setProperty("text","dogs don't hurt");
  test.addChild("d").setProperty("text","white men can't jump");
  test.addChild("e").setProperty("text","the fox is brown");
  test.addChild("f").setProperty("text","a quickest dog jumped over the quick white dog");
  test.addChild("g").setProperty("text","hello world");
  test.addChild("h").setProperty("text","over the lazy top");
  root.commit();
  Iterator<String> result=executeQuery(query,"xpath").iterator();
  String list="";
  while (result.hasNext()) {
    String p=result.next();
    if (p.startsWith("/oak:index")) {
      continue;
    }
    list+=p + " ";
  }
  assertEquals("/test/b " + "/test/d " + "/test/e "+ "/test/f "+ "/test/h ",list);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ischildnodeTest2() throws Exception {
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("jcr:resource").addChild("x");
  test.addChild("resource");
  root.commit();
  Iterator<String> strings=executeQuery("select [jcr:path] from [nt:base] as b where ischildnode(b, '/test')","JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/jcr:resource",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/resource",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortingOnProperty() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  Tree a=test.addChild("a");
  a.setProperty("foo","bar");
  a.addChild("c").setProperty("foo","car");
  Tree b=test.addChild("b");
  b.setProperty("foo","tar");
  b.addChild("d").setProperty("foo","jar");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test') order by [foo] asc","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/a/c",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b/d",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeMLTQueryWithStream() throws Exception {
  assumeTrue(!System.getProperty("java.version").startsWith("1.8"));
  String nativeQueryString="select [jcr:path] from [nt:base] where native('solr', 'mlt?stream.body=world is nice today&mlt.fl=name&mlt.mindf=0&mlt.mintf=0')";
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("a").setProperty("name","Hello World, today weather is nice");
  test.addChild("b").setProperty("name","Cheers World, today weather is quite nice");
  test.addChild("c").setProperty("name","Halo Welt, today sky is cloudy");
  root.commit();
  Iterator<String> strings=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/a",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/c",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void descendantTest2() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").addChild("c").setProperty("name",asList("Hello","World"),STRINGS);
  test.addChild("b").setProperty("name","Hello");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test') and name='World'","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a/c",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCollapsedJcrContentNodeDescandants() throws Exception {
  Tree index=root.getTree("/oak:index/" + TEST_INDEX_NAME);
  assertTrue(index.exists());
  index.setProperty("collapseJcrContentNodes",true);
  index.setProperty("reindex",true);
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  Tree content=test.addChild("content");
  Tree content1=content.addChild("sample1").addChild("jcr:content");
  content1.setProperty("foo","bar");
  content1.addChild("text").setProperty("text","bar");
  Tree content2=content.addChild("sample2").addChild("jcr:content");
  content2.setProperty("foo","bar");
  content2.addChild("text").setProperty("text","bar");
  root.commit();
  String xpath="/jcr:root/test/content//element(*, nt:base)[jcr:contains(., 'bar')]";
  Iterator<String> result=executeQuery(xpath,XPATH).iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/content/sample1/jcr:content",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/content/sample2/jcr:content",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeSolrLocalParams() throws Exception {
  String nativeQueryString="select [jcr:path] from [nt:base] where native('solr', '_query_:\"{!dismax qf=catch_all q.op=OR}hello world\"')";
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("a").setProperty("name","Hello");
  test.addChild("b").setProperty("name","World");
  test.addChild("c");
  root.commit();
  Iterator<String> strings=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/a",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/b",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotNullAndNative() throws Exception {
  Tree index=root.getTree("/oak:index/" + TEST_INDEX_NAME);
  assertTrue(index.exists());
  index.setProperty("rows",10000);
  index.setProperty("reindex",true);
  root.commit();
  Tree content=root.getTree("/").addChild("content");
  Tree a=content.addChild("a");
  a.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  a.setProperty("foo","doc doc doc");
  a.setProperty("loc","2");
  Tree b=content.addChild("b");
  b.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  b.setProperty("foo","bye bye bye");
  b.setProperty("loc","1");
  root.commit();
  String query="select [jcr:path] from [nt:base] where native('solr','select?q=loc:*') AND foo IS NOT NULL";
  Iterator<String> results=executeQuery(query,Query.JCR_SQL2,true).iterator();
  assertTrue(results.hasNext());
  assertEquals("/content/a",results.next());
  assertTrue(results.hasNext());
  assertEquals("/content/b",results.next());
  assertFalse(results.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeSolrFunctionQuery() throws Exception {
  String nativeQueryString="select [jcr:path] from [nt:base] where native('solr', 'path_child:\\/test  _val_:\"recip(rord(name),1,2,3)\"')";
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("a").setProperty("name","Hello");
  test.addChild("b").setProperty("name","World");
  tree.addChild("c");
  root.commit();
  Iterator<String> strings=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/a",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/b",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ischildnodeTest() throws Exception {
  Tree tree=root.getTree("/");
  Tree parents=tree.addChild("parents");
  parents.addChild("p0").setProperty("id","0");
  parents.addChild("p1").setProperty("id","1");
  parents.addChild("p2").setProperty("id","2");
  Tree children=tree.addChild("children");
  children.addChild("c1").setProperty("p","1");
  children.addChild("c2").setProperty("p","2");
  children.addChild("c3").setProperty("p","3");
  children.addChild("c4").setProperty("p","4");
  root.commit();
  Iterator<String> result=executeQuery("select p.[jcr:path], p2.[jcr:path] from [nt:base] as p inner join [nt:base] as p2 on ischildnode(p2, p) where p.[jcr:path] = '/'","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/, /children",result.next());
  assertTrue(result.hasNext());
  assertEquals("/, /jcr:system",result.next());
  assertTrue(result.hasNext());
  assertEquals("/, /oak:index",result.next());
  assertTrue(result.hasNext());
  assertEquals("/, /parents",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeMLTQuery() throws Exception {
  assumeTrue(!System.getProperty("java.version").startsWith("1.8"));
  String nativeQueryString="select [jcr:path] from [nt:base] where native('solr', 'mlt?q=name:World&mlt.fl=name&mlt.mindf=0&mlt.mintf=0')";
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("a").setProperty("name","Hello World, today weather is nice");
  test.addChild("b").setProperty("name","Cheers World, today weather is quite nice");
  test.addChild("c").setProperty("name","Halo Welt, today sky is cloudy");
  root.commit();
  Iterator<String> strings=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/a",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/c",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void descendantTest() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").addChild("c");
  test.addChild("b").addChild("d");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test')","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/a/c",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b/d",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOrderByJcrScore() throws Exception {
  Tree index=root.getTree("/oak:index/" + TEST_INDEX_NAME);
  assertTrue(index.exists());
  index.setProperty("rows",10000);
  index.setProperty("reindex",true);
  root.commit();
  Tree content=root.getTree("/").addChild("content");
  Tree a=content.addChild("a");
  a.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  a.setProperty("type","doc doc doc");
  root.commit();
  String statement="select [jcr:path], [jcr:score], [rep:excerpt] " + "from [nt:unstructured] as a " + "where contains(*, 'doc') "+ "and isdescendantnode(a, '/content') "+ "order by [jcr:score] desc";
  Iterator<String> results=executeQuery(statement,Query.JCR_SQL2,true).iterator();
  assertTrue(results.hasNext());
  assertEquals("/content/a",results.next());
  assertFalse(results.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeSolrQuery() throws Exception {
  String nativeQueryString="select [jcr:path] from [nt:base] where native('solr', 'name:(Hello OR World)')";
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("a").setProperty("name","Hello");
  test.addChild("b").setProperty("name","World");
  test.addChild("c");
  root.commit();
  Iterator<String> strings=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/a",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/b",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOrderByMVProperty() throws Exception {
  Tree index=root.getTree("/oak:index/" + TEST_INDEX_NAME);
  assertTrue(index.exists());
  index.setProperty("rows",10000);
  index.setProperty("reindex",true);
  root.commit();
  Tree content=root.getTree("/").addChild("content");
  Tree a=content.addChild("a");
  a.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  a.setProperty("type",Arrays.asList("a","z"),Type.STRINGS);
  a.setProperty("text","a doc");
  Tree aContent=a.addChild("jcr:content");
  aContent.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  aContent.setProperty("type",Collections.singletonList("3"),Type.STRINGS);
  Tree b=content.addChild("b");
  b.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  b.setProperty("type",Arrays.asList("b","y"),Type.STRINGS);
  b.setProperty("text","b doc");
  Tree bContent=b.addChild("jcr:content");
  bContent.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  bContent.setProperty("type",Collections.singletonList("1"),Type.STRINGS);
  root.commit();
  Tree c=content.addChild("c");
  c.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  c.setProperty("type",Arrays.asList("c","x"),Type.STRINGS);
  c.setProperty("text","c doc");
  Tree cContent=c.addChild("jcr:content");
  cContent.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  cContent.setProperty("type",Collections.singletonList("2"),Type.STRINGS);
  root.commit();
  String statement="select [jcr:path], [jcr:score] " + "from [nt:unstructured] as a " + "where contains(*, 'doc') "+ "and isdescendantnode(a, '/content') "+ "order by [type] desc";
  Iterator<String> results=executeQuery(statement,Query.JCR_SQL2,true).iterator();
  assertTrue(results.hasNext());
  assertEquals("/content/c",results.next());
  assertTrue(results.hasNext());
  assertEquals("/content/b",results.next());
  assertTrue(results.hasNext());
  assertEquals("/content/a",results.next());
  assertFalse(results.hasNext());
  statement="select [jcr:path], [jcr:score] " + "from [nt:unstructured] as a " + "where contains(*, 'doc') "+ "and isdescendantnode(a, '/content') "+ "order by [type] asc";
  results=executeQuery(statement,Query.JCR_SQL2,true).iterator();
  assertTrue(results.hasNext());
  assertEquals("/content/a",results.next());
  assertTrue(results.hasNext());
  assertEquals("/content/b",results.next());
  assertTrue(results.hasNext());
  assertEquals("/content/c",results.next());
  assertFalse(results.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortingOnPath() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").addChild("c");
  test.addChild("b").addChild("d");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test') order by [jcr:path] asc","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/a/c",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b/d",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.SolrQueryIndexTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultCostWithPropertyRestrictions() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration();
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyAndPathRestrictionsEnabled() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPathRestrictions(){
      return true;
    }
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where isdescendantnode(a, '/test')",new QueryEngineSettings());
  filter.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(5,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithOnlyPrimaryTypeRestrictionsEnabled() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPrimaryTypes(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where jcr:primaryType = 'nt:unstructured')",new QueryEngineSettings());
  filter.restrictProperty("jcr:primaryType",Operator.EQUAL,PropertyValues.newString("nt:unstructured"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyRestrictionsEnabledButPropertyIgnored() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getIgnoredProperties(){
      return Arrays.asList("name");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultCostWithPrimaryTypeRestrictions() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration();
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where jcr:primaryType = 'nt:unstructured')",new QueryEngineSettings());
  filter.restrictProperty("jcr:primaryType",Operator.EQUAL,PropertyValues.newString("nt:unstructured"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithOnlyPathRestrictionsEnabled() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPathRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where isdescendantnode(a, '/test')",new QueryEngineSettings());
  filter.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyRestrictionsEnabledAndUsedProperty() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getUsedProperties(){
      return Arrays.asList("name");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(10,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultCostWithPathRestrictions() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration();
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where isdescendantnode(a, '/test')",new QueryEngineSettings());
  filter.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultCostWithNoRestrictions() throws Exception {
  NodeState root=mock(NodeState.class);
  SelectorImpl selector=mock(SelectorImpl.class);
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration();
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"",new QueryEngineSettings());
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyRestrictionsEnabledButNotUsedProperty() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getUsedProperties(){
      return Arrays.asList("foo");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoMoreThanThreeSolrRequests() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  String sqlQuery="select [jcr:path], [jcr:score] from [nt:base] as a where" + " contains([jcr:content/*], 'founded')";
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Override public int getRows(){
      return 10;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,sqlQuery,new QueryEngineSettings());
  CountingResponse response=new CountingResponse(0);
  when(solrServer.query(any(SolrParams.class))).thenReturn(response);
  Cursor cursor=solrQueryIndex.query(filter,root);
  assertNotNull(cursor);
  while (cursor.hasNext()) {
    IndexRow row=cursor.next();
    assertNotNull(row);
  }
  assertEquals(3,response.getCounter());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyAndPrimaryTypeRestrictionsEnabled() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPrimaryTypes(){
      return true;
    }
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where jcr:primaryType = 'nt:unstructured')",new QueryEngineSettings());
  filter.restrictProperty("jcr:primaryType",Operator.EQUAL,PropertyValues.newString("nt:unstructured"));
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(5,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyRestrictionsEnabled() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(10,cost,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.server.EmbeddedSolrServerProviderTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmbeddedSolrServerInitialization() throws Exception {
  EmbeddedSolrServerConfiguration solrServerConfiguration=new EmbeddedSolrServerConfiguration(getClass().getResource("/solr").getFile(),"oak");
  EmbeddedSolrServerProvider embeddedSolrServerProvider=new EmbeddedSolrServerProvider(solrServerConfiguration);
  SolrServer solrServer=embeddedSolrServerProvider.getSolrServer();
  assertNotNull(solrServer);
  SolrPingResponse ping=solrServer.ping();
  assertNotNull(ping);
  assertEquals(0,ping.getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.memory.MemoryNodeBuilderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnmodifiedEqualsBase(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.child("x");
  assertEquals(x.getBaseState(),x.getNodeState());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteOnRemoveNode(){
  for (  String name : new String[]{"x","new"}) {
    NodeBuilder root=base.builder();
    NodeBuilder child=root.child(name);
    root.getChildNode(name).remove();
    try {
      child.setProperty("q","w");
      fail();
    }
 catch (    IllegalStateException e) {
    }
    root.child(name);
    assertEquals(0,child.getChildNodeCount(1));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectOnRemoveProperty(){
  NodeBuilder root=base.builder();
  NodeBuilder childA=root.child("x");
  NodeBuilder childB=root.child("x");
  childB.setProperty("test","foo");
  childA.removeProperty("test");
  assertFalse(childA.hasProperty("test"));
  assertFalse(childB.hasProperty("test"));
  childA.setProperty("test","bar");
  assertEquals("bar",childA.getProperty("test").getValue(STRING));
  assertEquals("bar",childB.getProperty("test").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConnectOnUpdateProperty(){
  NodeBuilder root=base.builder();
  NodeBuilder childA=root.child("x");
  NodeBuilder childB=root.child("x");
  childB.setProperty("test","foo");
  childA.setProperty("test","bar");
  assertEquals("bar",childA.getProperty("test").getValue(STRING));
  assertEquals("bar",childB.getProperty("test").getValue(STRING));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.memory.PropertyBuilderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromString(){
  PropertyState source=StringPropertyState.stringProperty("foo","42");
  PropertyBuilder builder=PropertyBuilder.scalar(Type.LONG);
  builder.assignFrom(source);
  assertEquals(LongPropertyState.createLongProperty("foo",42L),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromDates(){
  String date1="1970-01-01T00:00:00.000Z";
  String date2="1971-01-01T00:00:00.000Z";
  PropertyState source=MultiGenericPropertyState.dateProperty("foo",Arrays.asList(date1,date2));
  PropertyBuilder builder=PropertyBuilder.scalar(Type.DATE);
  builder.assignFrom(source);
  assertEquals(source,builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromLong(){
  PropertyState source=LongPropertyState.createLongProperty("foo",42L);
  PropertyBuilder builder=PropertyBuilder.scalar(Type.STRING);
  builder.assignFrom(source);
  assertEquals(StringPropertyState.stringProperty("foo","42"),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDateProperty(){
  PropertyBuilder builder=PropertyBuilder.array(Type.DATE);
  String date1="1970-01-01T00:00:00.000Z";
  String date2="1971-01-01T00:00:00.000Z";
  builder.setName("foo").addValue(date1).addValue(date2);
  Assert.assertEquals(MultiGenericPropertyState.dateProperty("foo",Arrays.asList(date1,date2)),builder.getPropertyState());
  builder.setScalar();
  try {
    builder.getPropertyState();
  }
 catch (  IllegalStateException expected) {
  }
  builder.removeValue(date1);
  Assert.assertEquals(GenericPropertyState.dateProperty("foo",date2),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLongProperty(){
  PropertyBuilder builder=PropertyBuilder.scalar(Type.LONG);
  builder.setName("foo").setValue(42L);
  Assert.assertEquals(LongPropertyState.createLongProperty("foo",42L),builder.getPropertyState());
  builder.setArray();
  Assert.assertEquals(MultiLongPropertyState.createLongProperty("foo",Arrays.asList(42L)),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromDate(){
  String date="1970-01-01T00:00:00.000Z";
  PropertyState source=GenericPropertyState.dateProperty("foo",date);
  PropertyBuilder builder=PropertyBuilder.scalar(Type.DATE);
  builder.assignFrom(source);
  assertEquals(source,builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromLongs(){
  PropertyState source=MultiLongPropertyState.createLongProperty("foo",Arrays.asList(1L,2L,3L));
  PropertyBuilder builder=PropertyBuilder.scalar(Type.STRING);
  builder.assignFrom(source);
  assertEquals(MultiStringPropertyState.stringProperty("foo",Arrays.asList("1","2","3")),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringProperty(){
  PropertyBuilder builder=PropertyBuilder.scalar(Type.STRING);
  builder.setName("foo").setValue("bar");
  Assert.assertEquals(StringPropertyState.stringProperty("foo","bar"),builder.getPropertyState());
  builder.setArray();
  Assert.assertEquals(MultiStringPropertyState.stringProperty("foo",Arrays.asList("bar")),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromStrings(){
  PropertyState source=MultiStringPropertyState.stringProperty("foo",Arrays.asList("1","2","3"));
  PropertyBuilder builder=PropertyBuilder.scalar(Type.LONG);
  builder.assignFrom(source);
  assertEquals(MultiLongPropertyState.createLongProperty("foo",Arrays.asList(1L,2L,3L)),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringsProperty(){
  PropertyBuilder builder=PropertyBuilder.array(Type.STRING);
  builder.setName("foo").addValue("one").addValue("two");
  assertEquals(MultiStringPropertyState.stringProperty("foo",Arrays.asList("one","two")),builder.getPropertyState());
  builder.setScalar();
  try {
    builder.getPropertyState();
  }
 catch (  IllegalStateException expected) {
  }
  builder.removeValue("one");
  assertEquals(StringPropertyState.stringProperty("foo","two"),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignInvariant(){
  PropertyState source=MultiStringPropertyState.stringProperty("source",Arrays.asList("1","2","3"));
  PropertyBuilder builder=PropertyBuilder.scalar(Type.STRING);
  builder.assignFrom(source);
  assertEquals(source,builder.getPropertyState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.memory.PropertyStatesTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void pathPropertyFromPathValue() throws RepositoryException {
  PropertyState pathProperty=PropertyStates.createProperty("path","oak-prefix:a/oak-prefix:b",PropertyType.PATH);
  Value nameValue=ValueFactoryImpl.createValue(pathProperty,namePathMapper);
  PropertyState namePropertyFromValue=PropertyStates.createProperty("path",nameValue);
  assertEquals(pathProperty,namePropertyFromValue);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void dateValueFromDateProperty() throws RepositoryException {
  String expected=ISO8601.format(Calendar.getInstance());
  PropertyState dateProperty=PropertyStates.createProperty("date",expected,Type.DATE);
  String actual=dateProperty.getValue(Type.DATE);
  assertEquals(expected,actual);
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void namePropertyFromNameValue() throws RepositoryException {
  PropertyState nameProperty=PropertyStates.createProperty("name","oak-prefix:value",PropertyType.NAME);
  Value nameValue=ValueFactoryImpl.createValue(nameProperty,namePathMapper);
  PropertyState namePropertyFromValue=PropertyStates.createProperty("name",nameValue);
  assertEquals(nameProperty,namePropertyFromValue);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.metric.CompositeStatsTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void meter() throws Exception {
  AtomicLong simpleStats=new AtomicLong();
  Meter meter=registry.meter("test");
  CompositeStats meterStats=new CompositeStats(simpleStats,meter);
  meterStats.mark();
  assertEquals(1,simpleStats.get());
  assertEquals(1,meter.getCount());
  meterStats.mark(5);
  assertEquals(6,simpleStats.get());
  assertEquals(6,meter.getCount());
  assertTrue(meterStats.isMeter());
  assertFalse(meterStats.isTimer());
  assertFalse(meterStats.isCounter());
  assertNotNull(meterStats.getMeter());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timerContext() throws Exception {
  AtomicLong counter=new AtomicLong();
  VirtualClock clock=new VirtualClock();
  Timer time=new Timer(new ExponentiallyDecayingReservoir(),clock);
  TimerStats timerStats=new CompositeStats(counter,time);
  TimerStats.Context context=timerStats.time();
  clock.tick=TimeUnit.SECONDS.toNanos(314);
  context.close();
  assertEquals(1,time.getCount());
  assertEquals(TimeUnit.SECONDS.toMillis(314),counter.get());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timer() throws Exception {
  AtomicLong counter=new AtomicLong();
  Timer time=registry.timer("test");
  CompositeStats timerStats=new CompositeStats(counter,time);
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(1,time.getCount());
  assertEquals(TimeUnit.SECONDS.toMillis(100),counter.get());
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(2,timerStats.getCount());
  assertFalse(timerStats.isMeter());
  assertTrue(timerStats.isTimer());
  assertFalse(timerStats.isCounter());
  assertNotNull(timerStats.getTimer());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void counter() throws Exception {
  AtomicLong simpleStats=new AtomicLong();
  Counter counter=registry.counter("test");
  CompositeStats counterStats=new CompositeStats(simpleStats,counter);
  counterStats.inc();
  assertEquals(1,simpleStats.get());
  assertEquals(1,counter.getCount());
  assertEquals(1,counterStats.getCount());
  counterStats.inc();
  counterStats.inc();
  assertEquals(3,simpleStats.get());
  counterStats.dec();
  assertEquals(2,simpleStats.get());
  assertEquals(2,counter.getCount());
  counterStats.inc(7);
  assertEquals(9,simpleStats.get());
  assertEquals(9,counter.getCount());
  counterStats.dec(5);
  assertEquals(4,simpleStats.get());
  assertEquals(4,counter.getCount());
  assertFalse(counterStats.isMeter());
  assertFalse(counterStats.isTimer());
  assertTrue(counterStats.isCounter());
  assertNotNull(counterStats.getCounter());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void histogram() throws Exception {
  Histogram histo=registry.histogram("test");
  CompositeStats histoStats=new CompositeStats(new AtomicLong(),histo);
  histoStats.update(100);
  assertEquals(1,histo.getCount());
  assertEquals(100,histo.getSnapshot().getMax());
  assertFalse(histoStats.isMeter());
  assertFalse(histoStats.isTimer());
  assertFalse(histoStats.isCounter());
  assertTrue(histoStats.isHistogram());
  assertNotNull(histoStats.getHistogram());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.metric.MetricImplTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void meter() throws Exception {
  Meter meter=registry.meter("test");
  MeterImpl meterStats=new MeterImpl(meter);
  meterStats.mark();
  assertEquals(1,meter.getCount());
  meterStats.mark(5);
  assertEquals(6,meter.getCount());
  assertEquals(6,meterStats.getCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timerContext() throws Exception {
  VirtualClock clock=new VirtualClock();
  Timer time=new Timer(new ExponentiallyDecayingReservoir(),clock);
  TimerStats timerStats=new TimerImpl(time);
  TimerStats.Context context=timerStats.time();
  clock.tick=TimeUnit.SECONDS.toNanos(314);
  context.close();
  assertEquals(1,time.getCount());
  assertEquals(TimeUnit.SECONDS.toNanos(314),time.getSnapshot().getMax());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timer() throws Exception {
  Timer time=registry.timer("test");
  TimerImpl timerStats=new TimerImpl(time);
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(1,time.getCount());
  assertEquals(TimeUnit.SECONDS.toNanos(100),time.getSnapshot().getMax());
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(2,time.getCount());
  assertEquals(2,timerStats.getCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void counter() throws Exception {
  Counter counter=registry.counter("test");
  CounterImpl counterStats=new CounterImpl(counter);
  counterStats.inc();
  assertEquals(1,counter.getCount());
  assertEquals(1,counterStats.getCount());
  counterStats.inc();
  counterStats.inc();
  counterStats.dec();
  assertEquals(2,counter.getCount());
  counterStats.inc(7);
  assertEquals(9,counter.getCount());
  counterStats.dec(5);
  assertEquals(4,counter.getCount());
  assertEquals(4,counterStats.getCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void histogram() throws Exception {
  Histogram histo=registry.histogram("test");
  HistogramImpl histoStats=new HistogramImpl(histo);
  histoStats.update(100);
  assertEquals(1,histo.getCount());
  assertEquals(100,histo.getSnapshot().getMax());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.metric.MetricStatisticsProviderTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicSetup() throws Exception {
  assertEquals(1,statsProvider.getRegistry().getMeters().size());
  assertEquals(1,statsProvider.getRegistry().getTimers().size());
  assertNotNull(statsProvider.getStats());
  assertEquals(statsProvider.getRegistry().getMetrics().size(),getMetricMbeans().size());
  statsProvider.close();
  assertEquals(0,getMetricMbeans().size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noopMeter() throws Exception {
  assertInstanceOf(statsProvider.getTimer(Type.SESSION_READ_DURATION.name(),StatsOptions.TIME_SERIES_ONLY),SimpleStats.class);
  assertNotEquals(statsProvider.getMeter(Type.OBSERVATION_EVENT_COUNTER.name(),StatsOptions.TIME_SERIES_ONLY),NoopStats.INSTANCE);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timeSeriesIntegration() throws Exception {
  MeterStats meterStats=statsProvider.getMeter(Type.SESSION_COUNT.name(),StatsOptions.DEFAULT);
  meterStats.mark(5);
  assertEquals(5,statsProvider.getRepoStats().getCounter(Type.SESSION_COUNT).get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.name.NameValidatorTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEscaping(){
  assertEquals("abc",NameValidator.getPrintableName("abc"));
  assertEquals("\\t\\r\\n\\b\\f",NameValidator.getPrintableName("\t\r\n\b\f"));
  assertEquals("\\u00e0",NameValidator.getPrintableName("\u00e0"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.name.ReadWriteNamespaceRegistryTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMappings() throws Exception {
  final ContentSession session=createContentSession();
  final Root root=session.getLatestRoot();
  NamespaceRegistry r=new ReadWriteNamespaceRegistry(root){
    @Override protected Root getWriteRoot(){
      return session.getLatestRoot();
    }
    @Override protected void refresh(){
      root.refresh();
    }
  }
;
  assertEquals("",r.getURI(""));
  assertEquals("http://www.jcp.org/jcr/1.0",r.getURI("jcr"));
  assertEquals("http://www.jcp.org/jcr/nt/1.0",r.getURI("nt"));
  assertEquals("http://www.jcp.org/jcr/mix/1.0",r.getURI("mix"));
  assertEquals("http://www.w3.org/XML/1998/namespace",r.getURI("xml"));
  assertEquals("",r.getPrefix(""));
  assertEquals("jcr",r.getPrefix("http://www.jcp.org/jcr/1.0"));
  assertEquals("nt",r.getPrefix("http://www.jcp.org/jcr/nt/1.0"));
  assertEquals("mix",r.getPrefix("http://www.jcp.org/jcr/mix/1.0"));
  assertEquals("xml",r.getPrefix("http://www.w3.org/XML/1998/namespace"));
  r.registerNamespace("p","n");
  assertEquals(r.getURI("p"),"n");
  assertEquals(r.getPrefix("n"),"p");
  r.registerNamespace("p2","n2");
  assertEquals(r.getURI("p2"),"n2");
  assertEquals(r.getPrefix("n2"),"p2");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.nodetype.TypeEditorTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMandatoryPropertyWithBadRequiredType(){
  EditorHook hook=new EditorHook(new TypeEditorProvider());
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeState before=builder.getNodeState();
  NodeBuilder acl=builder.child(AccessControlConstants.REP_POLICY);
  acl.setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_ACL,Type.NAME);
  NodeBuilder ace=acl.child("first");
  ace.setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_GRANT_ACE,Type.NAME);
  ace.setProperty(AccessControlConstants.REP_PRINCIPAL_NAME,EveryonePrincipal.NAME);
  ace.setProperty(AccessControlConstants.REP_PRIVILEGES,ImmutableList.of(PrivilegeConstants.JCR_READ),Type.STRINGS);
  try {
    hook.processCommit(before,builder.getNodeState(),CommitInfo.EMPTY);
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(55,e.getCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.NodeObserverTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeNode(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("m").getChildNode("n").setProperty("p",42);
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertTrue(nodeObserver.deleted.isEmpty());
  assertEquals(ImmutableMap.of("/m/n",ImmutableSet.of("p")),nodeObserver.changed);
  assertEquals(ImmutableMap.of("/m/n",ImmutableMap.of("extra","42")),nodeObserver.properties);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteNode(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("m").getChildNode("n").getChildNode("o").remove();
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertEquals(ImmutableMap.of("/m/n/o",ImmutableSet.of("q")),nodeObserver.deleted);
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addNode(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("m").getChildNode("n").setChildNode("new").setProperty("p","3");
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertEquals(ImmutableMap.of("/m/n/new",ImmutableSet.of("p")),nodeObserver.added);
  assertTrue(nodeObserver.deleted.isEmpty());
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.filter.FilterBuilderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void anyShortcutsIncludeAll(){
  FilterBuilder builder=new FilterBuilder();
  Condition condition=builder.any(builder.path("path"),builder.includeAll(),builder.path("path"));
  assertEquals(ConstantFilter.INCLUDE_ALL,condition.createFilter(EMPTY_NODE,EMPTY_NODE));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyAllShortcuts(){
  FilterBuilder builder=new FilterBuilder();
  Condition condition=builder.all();
  assertEquals(ConstantFilter.INCLUDE_ALL,condition.createFilter(EMPTY_NODE,EMPTY_NODE));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyAnyShortcuts(){
  FilterBuilder builder=new FilterBuilder();
  Condition condition=builder.any();
  assertEquals(ConstantFilter.EXCLUDE_ALL,condition.createFilter(EMPTY_NODE,EMPTY_NODE));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void allShortcutsExcludeAll(){
  FilterBuilder builder=new FilterBuilder();
  Condition condition=builder.all(builder.path("path"),builder.excludeAll(),builder.path("path"));
  assertEquals(ConstantFilter.EXCLUDE_ALL,condition.createFilter(EMPTY_NODE,EMPTY_NODE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.filter.SelectorTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void selectDescendant(){
  Selector selector=new RelativePathSelector("/a/b/c",Selectors.PARENT);
  UniversalFilter filter=new UniversalFilter(root,root,selector,ALL);
  assertEquals(nodeC,selector.select(filter,null,null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CompactionAndCleanupIT </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyRetention() throws IOException, CommitFailedException {
  FileStore fileStore=new NonCachingFileStore(directory,1);
  try {
    final SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
    CompactionStrategy strategy=new CompactionStrategy(false,false,CLEAN_ALL,0,(byte)0){
      @Override public boolean compacted(      @Nonnull Callable<Boolean> setHead) throws Exception {
        return nodeStore.locked(setHead);
      }
    }
;
    strategy.setPersistCompactionMap(false);
    fileStore.setCompactionStrategy(strategy);
    NodeBuilder builder=nodeStore.getRoot().builder();
    builder.setChildNode("test").setProperty("property","value");
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    NodeState test=nodeStore.getRoot().getChildNode("test");
    SegmentId id=((SegmentNodeState)test).getRecordId().getSegmentId();
    assertTrue(fileStore.containsSegment(id));
    builder=nodeStore.getRoot().builder();
    addContent(builder.setChildNode("dump"));
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    assertTrue(fileStore.containsSegment(id));
    PropertyState property=test.getProperty("property");
    assertEquals("value",property.getValue(STRING));
    fileStore.flush();
    fileStore.compact();
    fileStore.cleanup();
    try {
      fileStore.readSegment(id);
      fail("Segment " + id + "should be gc'ed");
    }
 catch (    SegmentNotFoundException ignore) {
    }
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compactionNoBinaryClone() throws Exception {
  final int blobSize=5 * 1024 * 1024;
  final int dataNodes=10000;
  FileStore fileStore=FileStore.newFileStore(directory).withMaxFileSize(1).create();
  final SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
  CompactionStrategy custom=new CompactionStrategy(false,false,CLEAN_OLD,TimeUnit.HOURS.toMillis(1),(byte)0){
    @Override public boolean compacted(    @Nonnull Callable<Boolean> setHead) throws Exception {
      return nodeStore.locked(setHead);
    }
  }
;
  custom.setPersistCompactionMap(false);
  fileStore.setCompactionStrategy(custom);
  NodeBuilder extra=nodeStore.getRoot().builder();
  NodeBuilder content=extra.child("content");
  for (int i=0; i < dataNodes; i++) {
    NodeBuilder c=content.child("c" + i);
    for (int j=0; j < 1000; j++) {
      c.setProperty("p" + i,"v" + i);
    }
  }
  nodeStore.merge(extra,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final long dataSize=fileStore.size();
  log.debug("File store dataSize {}",byteCountToDisplaySize(dataSize));
  try {
    NodeBuilder builder=nodeStore.getRoot().builder();
    builder.setProperty("a1",createBlob(nodeStore,blobSize));
    builder.setProperty("b","foo");
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    log.debug("File store pre removal {}, expecting {}",byteCountToDisplaySize(fileStore.size()),byteCountToDisplaySize(blobSize + dataSize));
    assertEquals(mb(blobSize + dataSize),mb(fileStore.size()));
    builder=nodeStore.getRoot().builder();
    builder.removeProperty("a1");
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    log.debug("File store pre compaction {}, expecting {}",byteCountToDisplaySize(fileStore.size()),byteCountToDisplaySize(blobSize + dataSize));
    assertEquals(mb(blobSize + dataSize),mb(fileStore.size()));
    assertTrue(fileStore.maybeCompact(false));
    assertSize("post compaction",fileStore.size(),blobSize + dataSize,blobSize + 2 * dataSize);
    builder=nodeStore.getRoot().builder();
    builder.setProperty("a2",createBlob(nodeStore,blobSize));
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    assertSize("pre cleanup",fileStore.size(),2 * blobSize + dataSize,2 * blobSize + 2 * dataSize);
    assertTrue(fileStore.maybeCompact(false));
    fileStore.cleanup();
    assertSize("post cleanup",fileStore.size(),0,blobSize + 2 * dataSize);
    custom.setOlderThan(0);
    TimeUnit.MILLISECONDS.sleep(5);
    boolean needsCompaction=true;
    for (int i=0; i < 3 && needsCompaction; i++) {
      needsCompaction=fileStore.maybeCompact(false);
      fileStore.cleanup();
    }
    assertFalse(fileStore.maybeCompact(false));
    byte[] blob=ByteStreams.toByteArray(nodeStore.getRoot().getProperty("a2").getValue(Type.BINARY).getNewStream());
    assertEquals(blobSize,blob.length);
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CompactionMapTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkExistingKeys(){
  for (  Entry<RecordId,RecordId> reference : referenceMap.entrySet()) {
    assertEquals(reference.getValue(),compactionMap.get((reference.getKey())));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeSome(){
  Set<UUID> removedUUIDs=newHashSet();
  for (int k=0; k < 1 + rnd.nextInt(referenceMap.size()); k++) {
    RecordId key=get(referenceMap.keySet(),rnd.nextInt(referenceMap.size()));
    removedUUIDs.add(key.asUUID());
  }
  compactionMap.remove(removedUUIDs);
  for (  Entry<RecordId,RecordId> reference : referenceMap.entrySet()) {
    RecordId key=reference.getKey();
    if (removedUUIDs.contains(key.asUUID())) {
      assertNull(compactionMap.get(key));
    }
 else {
      assertEquals(reference.getValue(),compactionMap.get(key));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void removeGeneration(){
  compactionMap1.compress();
  compactionMap2.compress();
  compactionMap3.compress();
  assertArrayEquals(new long[]{10,10,10},compactionMap.getSegmentCounts());
  assertArrayEquals(new long[]{100,100,100},compactionMap.getRecordCounts());
  int expectedDepth=3;
  int expectedGeneration=3;
  long expectedSize=countUUIDs(referenceMap.keySet());
  assertEquals(expectedDepth,compactionMap.getDepth());
  assertEquals(expectedSize,sum(compactionMap.getSegmentCounts()));
  assertEquals(expectedGeneration,compactionMap.getGeneration());
  for (  Map<RecordId,RecordId> referenceMap : ImmutableList.of(referenceMap2,referenceMap1,referenceMap3)) {
    Set<UUID> removedUUIDs=newHashSet();
    for (    RecordId key : referenceMap.keySet()) {
      removedUUIDs.add(key.asUUID());
    }
    compactionMap.remove(removedUUIDs);
    expectedDepth--;
    CompactionMap consed=compactionMap.cons(compactionMap1);
    assertEquals(expectedDepth + 1,consed.getDepth());
    expectedSize-=removedUUIDs.size();
    assertEquals(expectedSize,sum(compactionMap.getSegmentCounts()));
    assertEquals(expectedGeneration + 1,consed.getGeneration());
  }
  CompactionMap consed=compactionMap.cons(createCompactionMap(false));
  assertEquals(1,consed.getDepth());
  assertEquals(0,sum(compactionMap.getSegmentCounts()));
  assertEquals(expectedGeneration + 1,consed.getGeneration());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CompactorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactor() throws Exception {
  NodeStore store=new SegmentNodeStore(segmentStore);
  init(store);
  Compactor compactor=new Compactor(segmentStore.getTracker());
  addTestContent(store,0);
  NodeState initial=store.getRoot();
  SegmentNodeState after=compactor.compact(initial,store.getRoot(),initial);
  Assert.assertEquals(store.getRoot(),after);
  addTestContent(store,1);
  after=compactor.compact(initial,store.getRoot(),initial);
  Assert.assertEquals(store.getRoot(),after);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.ExternalBlobIT </h4><pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNullBlobId() throws Exception {
  FileDataStore fds=createFileDataStore();
  DataStoreBlobStore dbs=new DataStoreBlobStore(fds);
  nodeStore=getNodeStore(dbs);
  NodeBuilder nb=nodeStore.getRoot().builder();
  NodeBuilder cb=nb.child("hello");
  cb.setProperty("blob1",createBlob(Segment.MEDIUM_LIMIT - 1));
  int noOfBlobs=4000;
  for (int i=0; i < noOfBlobs; i++) {
    cb.setProperty("blob" + i,createBlob(Segment.MEDIUM_LIMIT + 1));
  }
  cb.setProperty("anotherBlob2",createBlob(Segment.MEDIUM_LIMIT + 1));
  cb.setProperty("anotherBlob3",createBlob(Segment.MEDIUM_LIMIT + 1));
  nodeStore.merge(nb,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final List<String> refrences=Lists.newArrayList();
  store.getTracker().collectBlobReferences(new ReferenceCollector(){
    @Override public void addReference(    String reference,    String nodeId){
      assertNotNull(reference);
      refrences.add(reference);
    }
  }
);
  assertEquals(noOfBlobs + 2,refrences.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDataStoreBlob() throws Exception {
  FileDataStore fds=createFileDataStore();
  DataStoreBlobStore dbs=new DataStoreBlobStore(fds);
  nodeStore=getNodeStore(dbs);
  Blob b1=testCreateAndRead(createBlob(fds.getMinRecordLength() - 2));
  assertTrue(b1 instanceof SegmentBlob);
  assertNull(((SegmentBlob)b1).getBlobId());
  byte[] data2=new byte[Segment.MEDIUM_LIMIT + 1];
  new Random().nextBytes(data2);
  Blob b2=testCreateAndRead(nodeStore.createBlob(new ByteArrayInputStream(data2)));
  assertTrue(b2 instanceof SegmentBlob);
  assertNotNull(b2.getReference());
  assertEquals(b2.getContentIdentity(),((SegmentBlob)b2).getBlobId());
  InputStream is=dbs.getInputStream(((SegmentBlob)b2).getBlobId());
  assertNotNull(IOUtils.contentEquals(new ByteArrayInputStream(data2),is));
  is.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.PartialCompactionMapTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void single(){
  map=createCompactionMap();
  RecordId before=RecordId.fromString(getTracker(),"00000000-0000-0000-0000-000000000000.0000");
  RecordId after=RecordId.fromString(getTracker(),"11111111-1111-1111-1111-111111111111.1111");
  map.put(before,after);
  assertEquals(after,map.get(before));
  map.compress();
  assertEquals(after,map.get(before));
  assertEquals(1,map.getRecordCount());
  assertEquals(1,map.getSegmentCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void random(){
  int maxSegments=1000;
  int entriesPerSegment=10;
  reference=newHashMap();
  map=createCompactionMap();
  for (int k=0; k < 10; k++) {
    addRandomEntries(rnd.nextInt(maxSegments) + 1,rnd.nextInt(entriesPerSegment) + 1);
    if (!reference.isEmpty()) {
      removeRandomEntries(rnd.nextInt(reference.size()));
    }
    checkMap();
  }
  map.compress();
  assertEquals(reference.size(),map.getRecordCount());
  assertEquals(toUUID(reference.keySet()).size(),map.getSegmentCount());
  checkMap();
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void remove(){
  map=createCompactionMap();
  RecordId before1=RecordId.fromString(getTracker(),"00000000-0000-0000-0000-000000000000.0000");
  RecordId before2=RecordId.fromString(getTracker(),"00000000-0000-0000-0000-000000000000.1111");
  RecordId after1=RecordId.fromString(getTracker(),"11111111-1111-1111-1111-111111111111.0000");
  RecordId after2=RecordId.fromString(getTracker(),"11111111-1111-1111-1111-111111111111.1111");
  map.put(before1,after1);
  map.compress();
  map.put(before2,after2);
  assertEquals(after1,map.get(before1));
  assertEquals(after2,map.get(before2));
  map.remove(newHashSet(before1.asUUID()));
  assertNull(map.get(before1));
  assertNull(map.get(before2));
  assertEquals(0,map.getRecordCount());
  assertEquals(0,map.getSegmentCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.RecordIdMapTest </h4><pre class="type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmpty(){
  RecordIdMap map=new RecordIdMap();
  assertFalse(map.containsKey((short)0));
  assertNull(map.get((short)0));
  assertEquals(0,map.size());
  try {
    map.getKey(0);
    fail("Expected AIOBE");
  }
 catch (  ArrayIndexOutOfBoundsException ignored) {
  }
  try {
    map.getRecordId(0);
    fail("Expected AIOBE");
  }
 catch (  ArrayIndexOutOfBoundsException ignored) {
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecordIdMap() throws IOException {
  int maxSegments=1000;
  int maxEntriesPerSegment=10;
  int seed=new Random().nextInt();
  Random r=new Random(seed);
  SegmentTracker tracker=new MemoryStore().getTracker();
  RecordIdMap map=new RecordIdMap();
  Map<Short,RecordId> reference=newHashMap();
  int segments=r.nextInt(maxSegments);
  for (int i=0; i < segments; i++) {
    SegmentId id=tracker.newDataSegmentId();
    int n=r.nextInt(maxEntriesPerSegment);
    int offset=MAX_SEGMENT_SIZE;
    for (int j=0; j < n; j++) {
      offset=newValidOffset(r,(n - j) << RECORD_ALIGN_BITS,offset);
      RecordId record=new RecordId(id,offset);
      reference.put(encode(record.getOffset()),record);
    }
  }
  for (  Entry<Short,RecordId> entry : reference.entrySet()) {
    map.put(entry.getKey(),entry.getValue());
  }
  assertEquals("Failed with seed " + seed,reference.size(),map.size());
  for (  Entry<Short,RecordId> entry : reference.entrySet()) {
    short key=entry.getKey();
    assertTrue("Failed with seed " + seed,map.containsKey(key));
    RecordId expected=entry.getValue();
    RecordId actual=map.get(key);
    assertEquals("Failed with seed " + seed,expected,actual);
  }
  for (int k=0; k < map.size(); k++) {
    short key=map.getKey(k);
    RecordId expected=reference.get(key);
    RecordId actual=map.get(key);
    assertEquals("Failed with seed " + seed,expected,actual);
    assertEquals("Failed with seed " + seed,expected,map.getRecordId(k));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.RecordTest </h4><pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWorstCaseMap() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  Map<String,RecordId> map=newHashMap();
  char[] key=new char[2];
  for (int i=0; i <= MapRecord.BUCKETS_PER_LEVEL; i++) {
    key[0]=(char)('A' + i);
    key[1]=(char)('\u1000' - key[0] * 31);
    map.put(new String(key),blockId);
  }
  MapRecord bad=writer.writeMap(null,map);
  assertEquals(map.size(),bad.size());
  Iterator<MapEntry> iterator=bad.getEntries().iterator();
  for (int i=0; i < map.size(); i++) {
    assertTrue(iterator.hasNext());
    assertEquals('\u1000',iterator.next().getName().hashCode());
  }
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyNode() throws IOException {
  NodeState before=EMPTY_NODE;
  NodeState after=writer.writeNode(before);
  assertEquals(before,after);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMapRecord() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  MapRecord zero=writer.writeMap(null,ImmutableMap.<String,RecordId>of());
  MapRecord one=writer.writeMap(null,ImmutableMap.of("one",blockId));
  MapRecord two=writer.writeMap(null,ImmutableMap.of("one",blockId,"two",blockId));
  Map<String,RecordId> map=newHashMap();
  for (int i=0; i < 1000; i++) {
    map.put("key" + i,blockId);
  }
  MapRecord many=writer.writeMap(null,map);
  Iterator<MapEntry> iterator;
  assertEquals(0,zero.size());
  assertNull(zero.getEntry("one"));
  iterator=zero.getEntries().iterator();
  assertFalse(iterator.hasNext());
  assertEquals(1,one.size());
  assertEquals(blockId,one.getEntry("one").getValue());
  assertNull(one.getEntry("two"));
  iterator=one.getEntries().iterator();
  assertTrue(iterator.hasNext());
  assertEquals("one",iterator.next().getName());
  assertFalse(iterator.hasNext());
  assertEquals(2,two.size());
  assertEquals(blockId,two.getEntry("one").getValue());
  assertEquals(blockId,two.getEntry("two").getValue());
  assertNull(two.getEntry("three"));
  iterator=two.getEntries().iterator();
  assertTrue(iterator.hasNext());
  iterator.next();
  assertTrue(iterator.hasNext());
  iterator.next();
  assertFalse(iterator.hasNext());
  assertEquals(1000,many.size());
  iterator=many.getEntries().iterator();
  for (int i=0; i < 1000; i++) {
    assertTrue(iterator.hasNext());
    assertEquals(blockId,iterator.next().getValue());
    assertEquals(blockId,many.getEntry("key" + i).getValue());
  }
  assertFalse(iterator.hasNext());
  assertNull(many.getEntry("foo"));
  Map<String,RecordId> changes=newHashMap();
  changes.put("key0",null);
  changes.put("key1000",blockId);
  MapRecord modified=writer.writeMap(many,changes);
  assertEquals(1000,modified.size());
  iterator=modified.getEntries().iterator();
  for (int i=1; i <= 1000; i++) {
    assertTrue(iterator.hasNext());
    assertEquals(blockId,iterator.next().getValue());
    assertEquals(blockId,modified.getEntry("key" + i).getValue());
  }
  assertFalse(iterator.hasNext());
  assertNull(many.getEntry("foo"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMapRemoveNonExisting() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  Map<String,RecordId> changes=newHashMap();
  changes.put("one",null);
  MapRecord zero=writer.writeMap(null,changes);
  assertEquals(0,zero.size());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringRecord() throws IOException {
  RecordId empty=writer.writeString("");
  RecordId space=writer.writeString(" ");
  RecordId hello=writer.writeString("Hello, World!");
  StringBuilder builder=new StringBuilder();
  for (int i=0; i < 2 * Segment.MAX_SEGMENT_SIZE + 1000; i++) {
    builder.append((char)('0' + i % 10));
  }
  RecordId large=writer.writeString(builder.toString());
  Segment segment=large.getSegmentId().getSegment();
  assertEquals("",readString(empty));
  assertEquals(" ",readString(space));
  assertEquals("Hello, World!",readString(hello));
  assertEquals(builder.toString(),readString(large));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testManyMapDeletes() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  for (int i=0; i < 1000; i++) {
    builder.child("test" + i);
  }
  NodeState before=writer.writeNode(builder.getNodeState());
  assertEquals(builder.getNodeState(),before);
  builder=before.builder();
  for (int i=0; i < 900; i++) {
    builder.getChildNode("test" + i).remove();
  }
  NodeState after=writer.writeNode(builder.getNodeState());
  assertEquals(builder.getNodeState(),after);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeepNode() throws IOException {
  NodeBuilder root=EMPTY_NODE.builder();
  NodeBuilder builder=root;
  for (int i=0; i < 1000; i++) {
    builder=builder.child("test");
  }
  NodeState before=builder.getNodeState();
  NodeState after=writer.writeNode(before);
  assertEquals(before,after);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testBlockRecord() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  BlockRecord block=new BlockRecord(blockId,bytes.length);
  for (int n=1; n < bytes.length; n++) {
    for (int i=0; i + n <= bytes.length; i++) {
      Arrays.fill(bytes,i,i + n,(byte)'.');
      assertEquals(n,block.read(i,bytes,i,n));
      assertEquals(hello,new String(bytes,Charsets.UTF_8));
    }
  }
  byte[] large=new byte[bytes.length * 2];
  assertEquals(bytes.length,block.read(0,large,0,large.length));
  assertEquals(hello,new String(large,0,bytes.length,Charsets.UTF_8));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testListRecord() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  ListRecord one=writeList(1,blockId);
  ListRecord level1=writeList(LEVEL_SIZE,blockId);
  ListRecord level1p=writeList(LEVEL_SIZE + 1,blockId);
  ListRecord level2=writeList(LEVEL_SIZE * LEVEL_SIZE,blockId);
  ListRecord level2p=writeList(LEVEL_SIZE * LEVEL_SIZE + 1,blockId);
  assertEquals(1,one.size());
  assertEquals(blockId,one.getEntry(0));
  assertEquals(LEVEL_SIZE,level1.size());
  assertEquals(blockId,level1.getEntry(0));
  assertEquals(blockId,level1.getEntry(LEVEL_SIZE - 1));
  assertEquals(LEVEL_SIZE + 1,level1p.size());
  assertEquals(blockId,level1p.getEntry(0));
  assertEquals(blockId,level1p.getEntry(LEVEL_SIZE));
  assertEquals(LEVEL_SIZE * LEVEL_SIZE,level2.size());
  assertEquals(blockId,level2.getEntry(0));
  assertEquals(blockId,level2.getEntry(LEVEL_SIZE * LEVEL_SIZE - 1));
  assertEquals(LEVEL_SIZE * LEVEL_SIZE + 1,level2p.size());
  assertEquals(blockId,level2p.getEntry(0));
  assertEquals(blockId,level2p.getEntry(LEVEL_SIZE * LEVEL_SIZE));
  int count=0;
  for (  RecordId entry : level2p.getEntries()) {
    assertEquals(blockId,entry);
    assertEquals(blockId,level2p.getEntry(count));
    count++;
  }
  assertEquals(LEVEL_SIZE * LEVEL_SIZE + 1,count);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleNode() throws IOException {
  NodeState before=EMPTY_NODE.builder().setProperty("foo","abc").setProperty("bar",123).setProperty("baz",Math.PI).getNodeState();
  NodeState after=writer.writeNode(before);
  assertEquals(before,after);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentDataStoreBlobGCIT </h4><pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void consistencyCheckWithRenegadeDelete() throws Exception {
  DataStoreState state=setUp();
  Random rand=new Random(87);
  List<String> existing=Lists.newArrayList(state.blobsPresent);
  long count=blobStore.countDeleteChunks(ImmutableList.of(existing.get(rand.nextInt(existing.size()))),0);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(count,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void consistencyCheckInit() throws Exception {
  DataStoreState state=setUp();
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void consistencyCheckInlined() throws Exception {
  blobStore=new DataStoreBlobStore(DataStoreUtils.createFDS(new File(getWorkDir(),"datastore"),16516));
  DataStoreState state=setUp();
  addInlined();
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void consistencyCheckWithGc() throws Exception {
  DataStoreState state=setUp();
  Set<String> existingAfterGC=gcInternal(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcLongRunningBlobCollection() throws Exception {
  DataStoreState state=setUp();
  log.info("{} Blobs added {}",state.blobsAdded.size(),state.blobsAdded);
  log.info("{} Blobs should be present {}",state.blobsPresent.size(),state.blobsPresent);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  String repoId=null;
  if (SharedDataStoreUtils.isShared(store.getBlobStore())) {
    repoId=ClusterRepositoryInfo.createId(nodeStore);
    ((SharedDataStore)store.getBlobStore()).addMetadataRecord(new ByteArrayInputStream(new byte[0]),REPOSITORY.getNameFromId(repoId));
  }
  TestGarbageCollector gc=new TestGarbageCollector(new SegmentBlobReferenceRetriever(store.getTracker()),(GarbageCollectableBlobStore)store.getBlobStore(),executor,"./target",5,5000,repoId);
  gc.collectGarbage(false);
  Set<String> existingAfterGC=iterate();
  log.info("{} Blobs existing after gc {}",existingAfterGC.size(),existingAfterGC);
  assertTrue(Sets.difference(state.blobsPresent,existingAfterGC).isEmpty());
  assertEquals(gc.additionalBlobs,Sets.symmetricDifference(state.blobsPresent,existingAfterGC));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentGraphTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGCGraph() throws IOException {
  ReadOnlyStore store=new ReadOnlyStore(storeDir);
  try {
    Graph<String> gcGraph=SegmentGraph.parseGCGraph(store);
    assertEquals(gcGenerations,newHashSet(gcGraph.vertices()));
    Map<String,Set<String>> map=newHashMap();
    for (    Entry<String,Multiset<String>> entry : gcGraph.edges()) {
      map.put(entry.getKey(),entry.getValue().elementSet());
    }
    assertEquals(gcReferences,map);
  }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSegmentGraphWithFilter() throws IOException {
  ReadOnlyStore store=new ReadOnlyStore(storeDir);
  try {
    Predicate<UUID> filter=createRegExpFilter(".*testWriter.*",store.getTracker());
    Graph<UUID> segmentGraph=parseSegmentGraph(store,filter);
    assertEquals(filteredSegments,newHashSet(segmentGraph.vertices()));
    Map<UUID,Set<UUID>> map=newHashMap();
    for (    Entry<UUID,Multiset<UUID>> entry : segmentGraph.edges()) {
      map.put(entry.getKey(),entry.getValue().elementSet());
    }
    assertEquals(filteredReferences,map);
  }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSegmentGraph() throws IOException {
  ReadOnlyStore store=new ReadOnlyStore(storeDir);
  try {
    Graph<UUID> segmentGraph=parseSegmentGraph(store,Predicates.<UUID>alwaysTrue());
    assertEquals(segments,newHashSet(segmentGraph.vertices()));
    Map<UUID,Set<UUID>> map=newHashMap();
    for (    Entry<UUID,Multiset<UUID>> entry : segmentGraph.edges()) {
      map.put(entry.getKey(),entry.getValue().elementSet());
    }
    assertEquals(references,map);
  }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentIdTableTest </h4><pre class="type-9 type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-2752
 */
@Test public void endlessSearchLoop() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  for (int i=0; i < 1024; i++) {
    refs.add(tbl.getSegmentId(i,i % 64));
  }
  Callable<SegmentId> c=new Callable<SegmentId>(){
    @Override public SegmentId call() throws Exception {
      return tbl.getSegmentId(2,1);
    }
  }
;
  Future<SegmentId> f=Executors.newSingleThreadExecutor().submit(c);
  SegmentId s=null;
  try {
    s=f.get(5,TimeUnit.SECONDS);
  }
 catch (  Exception e) {
    Assert.fail(e.getMessage());
  }
  Assert.assertNotNull(s);
  Assert.assertEquals(2,s.getMostSignificantBits());
  Assert.assertEquals(1,s.getLeastSignificantBits());
}

</code></pre>

<br>
<pre class="type-13 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gc() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  int originalCount=1024;
  for (int i=0; i < originalCount; i++) {
    refs.add(tbl.getSegmentId(i,i % 128));
  }
  Assert.assertEquals(originalCount,tbl.getEntryCount());
  Assert.assertEquals(1,tbl.getMapRebuildCount());
  for (int i=0; i < refs.size() / 2; i++) {
    refs.remove(0);
  }
  for (int gcCalls=0; ; gcCalls++) {
    System.gc();
    for (    SegmentId id : refs) {
      SegmentId id2=tbl.getSegmentId(id.getMostSignificantBits(),id.getLeastSignificantBits());
      Assert.assertTrue(id2 == id);
    }
    Assert.assertEquals(1,tbl.getMapRebuildCount());
    for (int i=0; i < 10; i++) {
      tbl.getSegmentId(i,i);
    }
    if (tbl.getEntryCount() < originalCount) {
      break;
    }
 else     if (gcCalls > 10) {
      fail("No entries were garbage collected after 10 times System.gc()");
    }
  }
  Assert.assertEquals(2,tbl.getMapRebuildCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void justHashCollisions() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  int originalCount=1024;
  for (int i=0; i < originalCount; i++) {
    refs.add(tbl.getSegmentId(i,i % 128));
  }
  Assert.assertEquals(originalCount,tbl.getEntryCount());
  Assert.assertEquals(1,tbl.getMapRebuildCount());
  List<SegmentId> refs2=new ArrayList<SegmentId>();
  tbl.collectReferencedIds(refs2);
  Assert.assertEquals(refs.size(),refs2.size());
  Assert.assertEquals(originalCount,tbl.getEntryCount());
  Assert.assertEquals(1,tbl.getMapRebuildCount());
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void clearTable() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  int originalCount=8;
  for (int i=0; i < originalCount; i++) {
    refs.add(tbl.getSegmentId(i,i % 2));
  }
  Assert.assertEquals(originalCount,tbl.getEntryCount());
  Assert.assertEquals(0,tbl.getMapRebuildCount());
  tbl.clearSegmentIdTables(new CompactionStrategy(false,false,CleanupType.CLEAN_NONE,originalCount,(byte)0){
    @Override public boolean compacted(    @Nonnull Callable<Boolean> setHead) throws Exception {
      return true;
    }
    @Override public boolean canRemove(    SegmentId id){
      return id.getMostSignificantBits() < 4;
    }
  }
);
  Assert.assertEquals(4,tbl.getEntryCount());
  for (  SegmentId id : refs) {
    if (id.getMostSignificantBits() >= 4) {
      SegmentId id2=tbl.getSegmentId(id.getMostSignificantBits(),id.getLeastSignificantBits());
      List<SegmentId> list=tbl.getRawSegmentIdList();
      if (list.size() != new HashSet<SegmentId>(list).size()) {
        Collections.sort(list);
        fail("duplicate entry " + list.toString());
      }
      Assert.assertTrue(id == id2);
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void randomized() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  Random r=new Random(1);
  for (int i=0; i < 16 * 1024; i++) {
    refs.add(tbl.getSegmentId(r.nextLong(),r.nextLong()));
  }
  Assert.assertEquals(16 * 1024,tbl.getEntryCount());
  Assert.assertEquals(16 * 2048,tbl.getMapSize());
  Assert.assertEquals(5,tbl.getMapRebuildCount());
  r=new Random(1);
  for (int i=0; i < 16 * 1024; i++) {
    refs.add(tbl.getSegmentId(r.nextLong(),r.nextLong()));
    Assert.assertEquals(16 * 1024,tbl.getEntryCount());
    Assert.assertEquals(16 * 2048,tbl.getMapSize());
    Assert.assertEquals(5,tbl.getMapRebuildCount());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentParserTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void template() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setChildNode("n");
  builder.setProperty("p",1);
  builder.setProperty("jcr:primaryType","type",NAME);
  builder.setProperty("jcr:mixinTypes",ImmutableList.of("type1","type2"),NAMES);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  NodeInfo nodeInfo=new TestParser("template"){
    @Override protected void onTemplate(    RecordId parentId,    RecordId templateId){
      TemplateInfo info=parseTemplate(templateId);
      assertEquals(templateId,info.templateId);
      assertTrue(info.hasPrimaryType);
      assertTrue(info.hasMixinType);
      assertFalse(info.zeroChildNodes);
      assertFalse(info.manyChildNodes);
      assertEquals(2,info.mixinCount);
      assertEquals(1,info.propertyCount);
      assertEquals(20,info.size);
    }
    @Override protected void onString(    RecordId parentId,    RecordId stringId){
    }
    @Override protected void onNode(    RecordId parentId,    RecordId nodeId){
    }
    @Override protected void onProperty(    RecordId parentId,    RecordId propertyId,    PropertyTemplate template){
    }
    @Override protected void onList(    RecordId parentId,    RecordId listId,    int count){
      if (segmentVersion == V_10) {
        super.onList(parentId,listId,count);
      }
    }
  }
.parseNode(node.getRecordId());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nonEmptyList() throws IOException {
  int count=100000;
  Random rnd=new Random();
  List<RecordId> list=newArrayListWithCapacity(count);
  for (int k=0; k < count; k++) {
    list.add(newRecordId(store.getTracker(),rnd));
  }
  RecordId listId=writer.writeList(list);
  ListInfo listInfo=new TestParser("nonEmptyList"){
    @Override protected void onListBucket(    RecordId parentId,    RecordId listId,    int index,    int count,    int capacity){
      parseListBucket(listId,index,count,capacity);
    }
  }
.parseList(null,listId,count);
  assertEquals(listId,listInfo.listId);
  assertEquals(count,listInfo.count);
  assertEquals(301185,listInfo.size);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void node() throws IOException {
  final NodeBuilder builder=EMPTY_NODE.builder();
  builder.setChildNode("one");
  builder.setChildNode("two");
  builder.setProperty("three",42);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  NodeInfo info=new TestParser("node"){
    @Override protected void onNode(    RecordId parentId,    RecordId nodeId){
    }
    @Override protected void onTemplate(    RecordId parentId,    RecordId templateId){
    }
    @Override protected void onMap(    RecordId parentId,    RecordId mapId,    MapRecord map){
    }
    @Override protected void onProperty(    RecordId parentId,    RecordId propertyId,    PropertyTemplate template){
    }
    @Override protected void onList(    RecordId parentId,    RecordId listId,    int count){
      if (segmentVersion == V_10) {
        super.onList(parentId,listId,count);
      }
    }
  }
.parseNode(node.getRecordId());
  assertEquals(node.getRecordId(),info.nodeId);
  assertEquals(2,info.nodeCount);
  assertEquals(1,info.propertyCount);
  assertEquals(9,info.size);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void nonEmptyMap() throws IOException {
  Random rnd=new Random();
  MapRecord base=writer.writeMap(null,createMap(33,rnd));
  MapRecord map=writer.writeMap(base,createMap(1,rnd));
  final AtomicInteger size=new AtomicInteger();
  MapInfo mapInfo=new TestParser("nonEmptyMap"){
    @Override protected void onMapDiff(    RecordId parentId,    RecordId mapId,    MapRecord map){
      MapInfo mapInfo=parseMapDiff(mapId,map);
      assertEquals(mapId,mapInfo.mapId);
      size.addAndGet(mapInfo.size);
    }
    @Override protected void onMap(    RecordId parentId,    RecordId mapId,    MapRecord map){
      MapInfo mapInfo=parseMap(parentId,mapId,map);
      assertEquals(mapId,mapInfo.mapId);
      size.addAndGet(mapInfo.size);
    }
    @Override protected void onMapBranch(    RecordId parentId,    RecordId mapId,    MapRecord map){
      MapInfo mapInfo=parseMapBranch(mapId,map);
      assertEquals(mapId,mapInfo.mapId);
      size.addAndGet(mapInfo.size);
    }
    @Override protected void onMapLeaf(    RecordId parentId,    RecordId mapId,    MapRecord map){
      MapInfo mapInfo=parseMapLeaf(mapId,map);
      assertEquals(mapId,mapInfo.mapId);
      size.addAndGet(mapInfo.size);
    }
    @Override protected void onString(    RecordId parentId,    RecordId stringId){
    }
  }
.parseMap(null,map.getRecordId(),map);
  assertEquals(map.getRecordId(),mapInfo.mapId);
  assertEquals(-1,mapInfo.size);
  assertEquals(456,size.get());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shortString() throws IOException {
  RecordId stringId=writer.writeString("short");
  BlobInfo blobInfo=new TestParser("shortString").parseString(stringId);
  assertEquals(stringId,blobInfo.blobId);
  assertEquals(SMALL,blobInfo.blobType);
  assertEquals(6,blobInfo.size);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void mediumBlob() throws IOException {
  SegmentBlob blob=writer.writeBlob(createRandomBlob(SMALL_LIMIT));
  ValueInfo valueInfo=new TestParser("mediumBlob"){
    @Override protected void onBlob(    RecordId parentId,    RecordId blobId){
      BlobInfo blobInfo=parseBlob(blobId);
      assertEquals(blobId,blobInfo.blobId);
      assertEquals(MEDIUM,blobInfo.blobType);
      assertEquals(SMALL_LIMIT + 2,blobInfo.size);
    }
  }
.parseValue(null,blob.getRecordId(),BINARY);
  assertEquals(blob.getRecordId(),valueInfo.valueId);
  assertEquals(BINARY,valueInfo.type);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void longString() throws IOException {
  RecordId stringId=writer.writeString(repeat("s",MEDIUM_LIMIT));
  BlobInfo blobInfo=new TestParser("longString"){
    @Override protected void onList(    RecordId parentId,    RecordId listId,    int count){
    }
  }
.parseString(stringId);
  assertEquals(stringId,blobInfo.blobId);
  assertEquals(LONG,blobInfo.blobType);
  assertEquals(MEDIUM_LIMIT + 11,blobInfo.size);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyList(){
  RecordId listId=newRecordId(store.getTracker(),new Random());
  ListInfo listInfo=new TestParser("emptyList").parseList(null,listId,0);
  assertEquals(listId,listInfo.listId);
  assertEquals(0,listInfo.count);
  assertEquals(0,listInfo.size);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void longBlob() throws IOException {
  SegmentBlob blob=writer.writeBlob(createRandomBlob(MEDIUM_LIMIT));
  ValueInfo valueInfo=new TestParser("longBlob"){
    @Override protected void onBlob(    RecordId parentId,    RecordId blobId){
      BlobInfo blobInfo=parseBlob(blobId);
      assertEquals(blobId,blobInfo.blobId);
      assertEquals(LONG,blobInfo.blobType);
      assertEquals(MEDIUM_LIMIT + 11,blobInfo.size);
    }
    @Override protected void onList(    RecordId parentId,    RecordId listId,    int count){
    }
  }
.parseValue(null,blob.getRecordId(),BINARY);
  assertEquals(blob.getRecordId(),valueInfo.valueId);
  assertEquals(BINARY,valueInfo.type);
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void multiValueProperty() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("p",ImmutableList.of(1L,2L,3L,4L),LONGS);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  NodeInfo nodeInfo=new TestParser("multiValueProperty"){
    @Override protected void onProperty(    RecordId parentId,    RecordId propertyId,    PropertyTemplate template){
      PropertyInfo propertyInfo=parseProperty(parentId,propertyId,template);
      assertEquals(propertyId,propertyInfo.propertyId);
      assertEquals(4,propertyInfo.count);
      assertEquals(7,propertyInfo.size);
    }
    @Override protected void onTemplate(    RecordId parentId,    RecordId templateId){
    }
    @Override protected void onValue(    RecordId parentId,    RecordId valueId,    Type<?> type){
    }
    @Override protected void onList(    RecordId parentId,    RecordId listId,    int count){
    }
  }
.parseNode(node.getRecordId());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void mediumString() throws IOException {
  RecordId stringId=writer.writeString(repeat("s",SMALL_LIMIT));
  BlobInfo blobInfo=new TestParser("mediumString").parseString(stringId);
  assertEquals(stringId,blobInfo.blobId);
  assertEquals(MEDIUM,blobInfo.blobType);
  assertEquals(SMALL_LIMIT + 2,blobInfo.size);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyNode() throws IOException {
  SegmentNodeState node=writer.writeNode(EMPTY_NODE);
  NodeInfo info=new TestParser("emptyNode"){
    @Override protected void onTemplate(    RecordId parentId,    RecordId templateId){
    }
  }
.parseNode(node.getRecordId());
  assertEquals(node.getRecordId(),info.nodeId);
  assertEquals(0,info.nodeCount);
  assertEquals(0,info.propertyCount);
  assertEquals(3,info.size);
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void singleValueProperty() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("p",1);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  NodeInfo nodeInfo=new TestParser("singleValueProperty"){
    @Override protected void onProperty(    RecordId parentId,    RecordId propertyId,    PropertyTemplate template){
      PropertyInfo propertyInfo=parseProperty(parentId,propertyId,template);
      assertEquals(propertyId,propertyInfo.propertyId);
      assertEquals(-1,propertyInfo.count);
      assertEquals(0,propertyInfo.size);
    }
    @Override protected void onTemplate(    RecordId parentId,    RecordId templateId){
    }
    @Override protected void onValue(    RecordId parentId,    RecordId valueId,    Type<?> type){
    }
    @Override protected void onList(    RecordId parentId,    RecordId listId,    int count){
      if (segmentVersion == V_10) {
        super.onList(parentId,listId,count);
      }
    }
  }
.parseNode(node.getRecordId());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void smallBlob() throws IOException {
  SegmentBlob blob=writer.writeBlob(createRandomBlob(4));
  ValueInfo valueInfo=new TestParser("smallBlob"){
    @Override protected void onBlob(    RecordId parentId,    RecordId blobId){
      BlobInfo blobInfo=parseBlob(blobId);
      assertEquals(blobId,blobInfo.blobId);
      assertEquals(SMALL,blobInfo.blobType);
      assertEquals(5,blobInfo.size);
    }
  }
.parseValue(null,blob.getRecordId(),BINARY);
  assertEquals(blob.getRecordId(),valueInfo.valueId);
  assertEquals(BINARY,valueInfo.type);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyMap() throws IOException {
  Map<String,RecordId> empty=newHashMap();
  MapRecord map=writer.writeMap(null,empty);
  MapInfo mapInfo=new TestParser("emptyMap"){
    @Override protected void onMapLeaf(    RecordId parentId,    RecordId mapId,    MapRecord map){
    }
  }
.parseMap(null,map.getRecordId(),map);
  assertEquals(map.getRecordId(),mapInfo.mapId);
  assertEquals(-1,mapInfo.size);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void singleChildNode() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setChildNode("child");
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  NodeInfo info=new TestParser("singleChildNode"){
    @Override protected void onNode(    RecordId parentId,    RecordId nodeId){
    }
    @Override protected void onTemplate(    RecordId parentId,    RecordId templateId){
    }
  }
.parseNode(node.getRecordId());
  assertEquals(node.getRecordId(),info.nodeId);
  assertEquals(1,info.nodeCount);
  assertEquals(0,info.propertyCount);
  assertEquals(6,info.size);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentSizeTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFlatNodeUpdate() throws IOException {
  SegmentStore store=new MemoryStore();
  SegmentWriter writer=store.getTracker().getWriter();
  NodeBuilder builder=EMPTY_NODE.builder();
  for (int i=0; i < 1000; i++) {
    builder.child("child" + i);
  }
  SegmentNodeState state=writer.writeNode(builder.getNodeState());
  writer.flush();
  Segment segment=store.readSegment(state.getRecordId().getSegmentId());
  assertEquals(27584,segment.size());
  writer.flush();
  builder=state.builder();
  builder.child("child1000");
  state=writer.writeNode(builder.getNodeState());
  writer.flush();
  segment=store.readSegment(state.getRecordId().getSegmentId());
  assertEquals(560,segment.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDuplicateStrings() throws IOException {
  String string="More than just a few bytes of example content.";
  SegmentWriter writer=new MemoryStore().getTracker().getWriter();
  SegmentNodeBuilder builder=writer.writeNode(EMPTY_NODE).builder();
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(1,string),Type.STRINGS));
  RecordId id1=builder.getNodeState().getRecordId();
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(12,string),Type.STRINGS));
  RecordId id2=builder.getNodeState().getRecordId();
  assertEquals(16 + 12 * Segment.RECORD_ID_BYTES,id1.getOffset() - id2.getOffset());
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(100,string),Type.STRINGS));
  RecordId id3=builder.getNodeState().getRecordId();
  assertEquals(16 + 100 * Segment.RECORD_ID_BYTES,id2.getOffset() - id3.getOffset());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDuplicateDates() throws IOException {
  String now=ISO8601.format(Calendar.getInstance());
  SegmentWriter writer=new MemoryStore().getTracker().getWriter();
  SegmentNodeBuilder builder=writer.writeNode(EMPTY_NODE).builder();
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(1,now),Type.DATES));
  RecordId id1=builder.getNodeState().getRecordId();
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(12,now),Type.DATES));
  RecordId id2=builder.getNodeState().getRecordId();
  assertEquals(16 + 12 * Segment.RECORD_ID_BYTES,id1.getOffset() - id2.getOffset());
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(100,now),Type.DATES));
  RecordId id3=builder.getNodeState().getRecordId();
  assertEquals(16 + 100 * Segment.RECORD_ID_BYTES,id2.getOffset() - id3.getOffset());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentVersionTest </h4><pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compareOldRevision() throws Exception {
  FileStore fileStoreV10=new FileStore(directory,1){
    @SuppressWarnings("deprecation") @Override public SegmentVersion getVersion(){
      return SegmentVersion.V_10;
    }
  }
;
  try {
    NodeState content=addTestContent(fileStoreV10,"content").getChildNode("content");
    assertVersion(content,SegmentVersion.V_10);
    NodeBuilder builder=content.builder();
    builder.setChildNode("foo");
    content.compareAgainstBaseState(builder.getNodeState(),new NodeStateDiff(){
      @Override public boolean propertyAdded(      PropertyState after){
        fail();
        return false;
      }
      @Override public boolean propertyChanged(      PropertyState before,      PropertyState after){
        fail();
        return false;
      }
      @Override public boolean propertyDeleted(      PropertyState before){
        fail();
        return false;
      }
      @Override public boolean childNodeAdded(      String name,      NodeState after){
        fail();
        return false;
      }
      @Override public boolean childNodeChanged(      String name,      NodeState before,      NodeState after){
        fail();
        return false;
      }
      @Override public boolean childNodeDeleted(      String name,      NodeState before){
        assertEquals("foo",name);
        return false;
      }
    }
);
  }
  finally {
    fileStoreV10.close();
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void latestVersion(){
  assertEquals(V_11,LATEST_VERSION);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.StringCacheTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void clear(){
  final AtomicInteger counter=new AtomicInteger();
  Function<Integer,String> uniqueLoader=new Function<Integer,String>(){
    @Override @Nullable public String apply(    @Nullable Integer input){
      return "" + counter.incrementAndGet();
    }
  }
;
  StringCache c=new StringCache(0);
  assertEquals("1",c.getString(0,0,0,uniqueLoader));
  assertEquals("1",c.getString(0,0,0,uniqueLoader));
  c.clear();
  assertEquals("2",c.getString(0,0,0,uniqueLoader));
  assertEquals("2",c.getString(0,0,0,uniqueLoader));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void empty(){
  final AtomicInteger counter=new AtomicInteger();
  Function<Integer,String> loader=new Function<Integer,String>(){
    @Override @Nullable public String apply(    @Nullable Integer input){
      counter.incrementAndGet();
      return "" + input;
    }
  }
;
  StringCache c=new StringCache(0);
  for (int repeat=0; repeat < 10; repeat++) {
    for (int i=0; i < 1000; i++) {
      assertEquals("" + i,c.getString(i,i,i,loader));
    }
  }
  assertTrue("" + counter,counter.get() > 1000);
  assertTrue("" + counter,counter.get() < 5000);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void largeEntries(){
  final AtomicInteger counter=new AtomicInteger();
  final String large=new String(new char[1024]);
  Function<Integer,String> loader=new Function<Integer,String>(){
    @Override @Nullable public String apply(    @Nullable Integer input){
      counter.incrementAndGet();
      return large + input;
    }
  }
;
  StringCache c=new StringCache(1024);
  for (int repeat=0; repeat < 10; repeat++) {
    for (int i=0; i < 1000; i++) {
      assertEquals(large + i,c.getString(i,i,i,loader));
      assertEquals(large + 0,c.getString(0,0,0,loader));
    }
  }
  assertTrue("" + counter,counter.get() > 9000);
  assertTrue("" + counter,counter.get() < 10000);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void randomized(){
  ArrayList<Function<Integer,String>> loaderList=new ArrayList<Function<Integer,String>>();
  int segmentCount=10;
  for (int i=0; i < segmentCount; i++) {
    final int x=i;
    Function<Integer,String> loader=new Function<Integer,String>(){
      @Override @Nullable public String apply(      @Nullable Integer input){
        return "loader #" + x + " offset "+ input;
      }
    }
;
    loaderList.add(loader);
  }
  StringCache c=new StringCache(10);
  Random r=new Random(1);
  for (int i=0; i < 1000; i++) {
    int segment=r.nextInt(segmentCount);
    int offset=r.nextInt(10);
    Function<Integer,String> loader=loaderList.get(segment);
    String x=c.getString(segment,segment,offset,loader);
    assertEquals(loader.apply(offset),x);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.TemplateTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHashCode2() throws IOException {
  PropertyState primary=createProperty("primary","primary");
  PropertyState mixin=createProperty("mixin",new ArrayList<String>(),Type.STRINGS);
  PropertyTemplate[] properties=new PropertyTemplate[0];
  String childNode="c";
  Template t0=new Template(primary,null,properties,childNode);
  Template t1=new Template(primary,mixin,properties,childNode);
  assertNotEquals(t0.hashCode(),t1.hashCode());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquals() throws IOException {
  PropertyState primary=createProperty("primary","primary");
  PropertyState mixin=createProperty("mixin","mixin");
  PropertyTemplate p0=new PropertyTemplate(createProperty("p0","v0"));
  PropertyTemplate p1=new PropertyTemplate(createProperty("p1","v1"));
  PropertyTemplate[] pt0=new PropertyTemplate[]{p0,p1};
  PropertyTemplate[] pt1=new PropertyTemplate[]{p1,p0};
  String childNode="c";
  Template t0=new Template(primary,mixin,pt0,childNode);
  Template t1=new Template(primary,mixin,pt1,childNode);
  assertEquals(t0,t1);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHashCode() throws IOException {
  PropertyState primary=createProperty("primary","primary");
  PropertyState mixin=createProperty("mixin","mixin");
  PropertyTemplate[] properties=new PropertyTemplate[0];
  Template t0=new Template(primary,mixin,properties,"");
  Template t1=new Template(primary,mixin,properties,null);
  assertNotEquals(t0.hashCode(),t1.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.FileStoreIT </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompaction() throws IOException {
  int largeBinarySize=10 * 1024 * 1024;
  FileStore store=new FileStore(directory,1,false);
  SegmentWriter writer=store.getTracker().getWriter();
  SegmentNodeState base=store.getHead();
  SegmentNodeBuilder builder=base.builder();
  byte[] data=new byte[largeBinarySize];
  new Random().nextBytes(data);
  SegmentBlob blob=writer.writeStream(new ByteArrayInputStream(data));
  builder.setProperty("foo",blob);
  builder.getNodeState();
  builder.setProperty("foo","bar");
  SegmentNodeState head=builder.getNodeState();
  assertTrue(store.setHead(base,head));
  assertEquals("bar",store.getHead().getString("foo"));
  Compactor compactor=new Compactor(store.getTracker());
  SegmentNodeState compacted=compactor.compact(EMPTY_NODE,head,EMPTY_NODE);
  store.close();
  store=new FileStore(directory,1,false);
  head=store.getHead();
  assertTrue(store.size() > largeBinarySize);
  builder=head.builder();
  builder.setChildNode("old",head);
  builder.getNodeState();
  assertTrue(store.setHead(head,compacted));
  store.close();
  store=new FileStore(directory,1,false);
  assertTrue(store.size() > largeBinarySize);
  store.cleanup();
  assertTrue(store.size() > largeBinarySize);
  store.close();
  store=new FileStore(directory,1,false);
  head=store.getHead();
  assertTrue(store.size() > largeBinarySize);
  writer=new SegmentWriter(store,V_11,"");
  compactor=new Compactor(store.getTracker());
  compacted=compactor.compact(EMPTY_NODE,head,EMPTY_NODE);
  builder=head.builder();
  builder.setChildNode("old",head);
  builder.getNodeState();
  writer.flush();
  assertTrue(store.setHead(head,compacted));
  store.close();
  store=new FileStore(directory,1,false);
  assertTrue(store.size() > largeBinarySize);
  store.cleanup();
  assertTrue(store.size() < largeBinarySize);
  store.close();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecovery() throws IOException {
  FileStore store=new FileStore(directory,1,false);
  store.flush();
  RandomAccessFile data0=new RandomAccessFile(new File(directory,"data00000a.tar"),"r");
  long pos0=data0.length();
  SegmentNodeState base=store.getHead();
  SegmentNodeBuilder builder=base.builder();
  builder.setProperty("step","a");
  store.setHead(base,builder.getNodeState());
  store.flush();
  long pos1=data0.length();
  data0.close();
  base=store.getHead();
  builder=base.builder();
  builder.setProperty("step","b");
  store.setHead(base,builder.getNodeState());
  store.close();
  store=new FileStore(directory,1,false);
  assertEquals("b",store.getHead().getString("step"));
  store.close();
  RandomAccessFile file=new RandomAccessFile(new File(directory,"data00000a.tar"),"rw");
  file.setLength(pos1);
  file.close();
  store=new FileStore(directory,1,false);
  assertEquals("a",store.getHead().getString("step"));
  store.close();
  file=new RandomAccessFile(new File(directory,"data00000a.tar"),"rw");
  file.setLength(pos0);
  file.close();
  store=new FileStore(directory,1,false);
  assertFalse(store.getHead().hasProperty("step"));
  store.close();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nonBlockingROStore() throws IOException {
  FileStore store=new FileStore(directory,1,false);
  store.flush();
  SegmentNodeState base=store.getHead();
  SegmentNodeBuilder builder=base.builder();
  builder.setProperty("step","a");
  store.setHead(base,builder.getNodeState());
  store.flush();
  ReadOnlyStore ro=null;
  try {
    ro=new ReadOnlyStore(directory);
    assertEquals(store.getHead(),ro.getHead());
  }
  finally {
    if (ro != null) {
      ro.close();
    }
    store.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRearrangeOldData() throws IOException {
  new FileOutputStream(new File(directory,"data00000.tar")).close();
  new FileOutputStream(new File(directory,"data00010a.tar")).close();
  new FileOutputStream(new File(directory,"data00030.tar")).close();
  new FileOutputStream(new File(directory,"bulk00002.tar")).close();
  new FileOutputStream(new File(directory,"bulk00005a.tar")).close();
  Map<Integer,?> files=FileStore.collectFiles(directory);
  assertEquals(newArrayList(0,1,31,32,33),newArrayList(newTreeSet(files.keySet())));
  assertTrue(new File(directory,"data00000a.tar").isFile());
  assertTrue(new File(directory,"data00001a.tar").isFile());
  assertTrue(new File(directory,"data00031a.tar").isFile());
  assertTrue(new File(directory,"data00032a.tar").isFile());
  assertTrue(new File(directory,"data00033a.tar").isFile());
  files=FileStore.collectFiles(directory);
  assertEquals(newArrayList(0,1,31,32,33),newArrayList(newTreeSet(files.keySet())));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.FileStoreStatsTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void initCall() throws Exception {
  FileStoreStats stats=new FileStoreStats(statsProvider,fileStore,1000);
  assertEquals(1000,stats.getApproximateSize());
  stats.written(500);
  assertEquals(1500,stats.getApproximateSize());
  stats.reclaimed(250);
  assertEquals(1250,stats.getApproximateSize());
  assertEquals(1,stats.getTarFileCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void tarWriterIntegration() throws Exception {
  FileStoreStats stats=new FileStoreStats(statsProvider,fileStore,0);
  UUID id=UUID.randomUUID();
  long msb=id.getMostSignificantBits();
  long lsb=id.getLeastSignificantBits() & (-1 >>> 4);
  byte[] data="Hello, World!".getBytes(UTF_8);
  File file=segmentFolder.newFile();
  TarWriter writer=new TarWriter(file,stats);
  writer.writeEntry(msb,lsb,data,0,data.length);
  writer.close();
  assertEquals(stats.getApproximateSize(),file.length());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.JournalReaderTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleton() throws IOException {
  JournalReader journalReader=createJournalReader("one 1");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("one",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiple() throws IOException {
  JournalReader journalReader=createJournalReader("one 1\ntwo 2\nthree 3");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("three",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("two",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("one",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpaces() throws IOException {
  JournalReader journalReader=createJournalReader("\n \n  \n   ");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIgnoreInvalid() throws IOException {
  JournalReader journalReader=createJournalReader("one 1\ntwo 2\ninvalid\nthree 3");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("three",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("two",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("one",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.ReversedLinesFileReaderTestParamFile </h4><pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDataIntegrityWithBufferedReader() throws URISyntaxException, IOException {
  File testFileIso=createFile(data);
  reversedLinesFileReader=new ReversedLinesFileReader(testFileIso,buffSize,encoding);
  Stack<String> lineStack=new Stack<String>();
  bufferedReader=new BufferedReader(new InputStreamReader(new FileInputStream(testFileIso),encoding));
  String line;
  while ((line=bufferedReader.readLine()) != null) {
    lineStack.push(line);
  }
  while ((line=reversedLinesFileReader.readLine()) != null) {
    String lineFromBufferedReader=lineStack.pop();
    assertEquals(lineFromBufferedReader,line);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.TarFileTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWriteAndRead() throws IOException {
  UUID id=UUID.randomUUID();
  long msb=id.getMostSignificantBits();
  long lsb=id.getLeastSignificantBits() & (-1 >>> 4);
  byte[] data="Hello, World!".getBytes(UTF_8);
  TarWriter writer=new TarWriter(file);
  try {
    writer.writeEntry(msb,lsb,data,0,data.length);
    assertEquals(ByteBuffer.wrap(data),writer.readEntry(msb,lsb));
  }
  finally {
    writer.close();
  }
  assertEquals(4096,file.length());
  TarReader reader=TarReader.open(file,false);
  try {
    assertEquals(ByteBuffer.wrap(data),reader.readEntry(msb,lsb));
  }
  finally {
    reader.close();
  }
  reader=TarReader.open(file,false);
  try {
    assertEquals(ByteBuffer.wrap(data),reader.readEntry(msb,lsb));
  }
  finally {
    reader.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.TarWriterTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Regression test for OAK-2800
 */
@Test public void collectReferences() throws IOException {
  SegmentGraphBuilder graphBuilder=new SegmentGraphBuilder();
  Node c=graphBuilder.createNode("c");
  Node b=graphBuilder.createNode("b",c);
  Node a=graphBuilder.createNode("a",b);
  Node n=graphBuilder.createNode("n");
  Node z=graphBuilder.createNode("z");
  Node y=graphBuilder.createNode("y",z);
  assertEquals(singleton(b),a.getReferences());
  assertEquals(singleton(c),b.getReferences());
  assertTrue(c.getReferences().isEmpty());
  assertEquals(singleton(z),y.getReferences());
  assertTrue(z.getReferences().isEmpty());
  File tar=createTempFile(getClass().getName(),"tar");
  TarWriter tarWriter=new TarWriter(tar);
  try {
    y.write(tarWriter);
    b.write(tarWriter);
    a.write(tarWriter);
    n.write(tarWriter);
    Set<UUID> references=newHashSet();
    references.add(a.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(c + " must be in references as " + a+ " has an transitive reference to "+ c+ " through "+ b+ ", "+ a+ " must not be in references as "+ a+ " is in the TarWriter, "+ "no other elements must be in references.",singleton(c),toNodes(graphBuilder,references));
    references.clear();
    references.add(b.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(b + " must be in references as " + a+ " has a direct reference to "+ b+ ", "+ a+ " must not be in references as "+ a+ " is in the TarWriter, "+ "no other elements must be in references.",singleton(c),toNodes(graphBuilder,references));
    references.clear();
    references.add(y.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(z + " must be in references as " + y+ " has a direct reference to "+ z+ ", "+ y+ " must not be in references as "+ y+ " is in the TarWriter, "+ "no other elements must be in references.",singleton(z),toNodes(graphBuilder,references));
    references.clear();
    references.add(c.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(c + " must be in references as " + c+ " is not in the TarWriter, "+ "no other elements must be in references.",singleton(c),toNodes(graphBuilder,references));
    references.clear();
    references.add(z.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(z + " must be in references as " + z+ " is not in the TarWriter "+ "no other elements must be in references.",singleton(z),toNodes(graphBuilder,references));
    references.clear();
    references.add(n.getUUID());
    tarWriter.collectReferences(references);
    assertTrue("references must be empty as " + n + " has no references "+ "and "+ n+ " is in the TarWriter",references.isEmpty());
  }
  finally {
    tarWriter.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.migration.DepthFirstNodeIteratorTest </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPath(){
  Map<String,String> nameToPath=new HashMap<String,String>();
  nameToPath.put("countries","/countries");
  nameToPath.put("uk","/countries/uk");
  nameToPath.put("frognal","/countries/uk/cities/london/districts/frognal");
  nameToPath.put("paris","/countries/france/cities/paris");
  DepthFirstNodeIterator iterator=new DepthFirstNodeIterator(store.getRoot());
  while (iterator.hasNext()) {
    String expectedPath=nameToPath.remove(iterator.next().getName());
    if (expectedPath == null) {
      continue;
    }
    assertEquals(expectedPath,iterator.getPath());
  }
  assertTrue(nameToPath.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterate(){
  Map<String,String[]> subtrees=new HashMap<String,String[]>();
  subtrees.put("uk",new String[]{"cities","london","districts","frognal"});
  subtrees.put("germany",new String[]{});
  subtrees.put("france",new String[]{"cities","paris"});
  DepthFirstNodeIterator iterator=new DepthFirstNodeIterator(store.getRoot());
  assertTrue(iterator.hasNext());
  assertEquals("countries",iterator.next().getName());
  for (int i=0; i < 3; i++) {
    assertTrue(iterator.hasNext());
    String country=iterator.next().getName();
    for (    String node : subtrees.remove(country)) {
      assertTrue(iterator.hasNext());
      assertEquals(node,iterator.next().getName());
    }
  }
  assertFalse(iterator.hasNext());
  assertTrue(subtrees.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.DataStoreTestBase </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSync() throws Exception {
  final int mb=1 * 1024 * 1024;
  final int blobSize=5 * mb;
  FileStore primary=getPrimary();
  FileStore secondary=getSecondary();
  NodeStore store=new SegmentNodeStore(primary);
  final StandbyServer server=new StandbyServer(port,primary);
  server.start();
  byte[] data=addTestContent(store,"server",blobSize);
  primary.flush();
  StandbyClient cl=newStandbyClient(secondary);
  cl.run();
  try {
    assertEquals(primary.getHead(),secondary.getHead());
  }
  finally {
    server.close();
    cl.close();
  }
  assertTrue(primary.size() < mb);
  assertTrue(secondary.size() < mb);
  PropertyState ps=secondary.getHead().getChildNode("root").getChildNode("server").getProperty("testBlob");
  assertNotNull(ps);
  assertEquals(Type.BINARY.tag(),ps.getType().tag());
  Blob b=ps.getValue(Type.BINARY);
  assertEquals(blobSize,b.length());
  byte[] testData=new byte[blobSize];
  ByteStreams.readFully(b.getNewStream(),testData);
  assertArrayEquals(data,testData);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.FailoverMultipleClientsTestIT </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleClients() throws Exception {
  NodeStore store=new SegmentNodeStore(storeS);
  final StandbyServer server=new StandbyServer(port,storeS);
  server.start();
  SegmentTestUtils.addTestContent(store,"server");
  storeS.flush();
  StandbyClient cl1=newStandbyClient(storeC);
  StandbyClient cl2=newStandbyClient(storeC2);
  try {
    assertFalse("first client has invalid initial store!",storeS.getHead().equals(storeC.getHead()));
    assertFalse("second client has invalid initial store!",storeS.getHead().equals(storeC2.getHead()));
    assertEquals(storeC.getHead(),storeC2.getHead());
    cl1.run();
    cl2.run();
    assertEquals(storeS.getHead(),storeC.getHead());
    assertEquals(storeS.getHead(),storeC2.getHead());
    cl1.stop();
    SegmentTestUtils.addTestContent(store,"test");
    storeS.flush();
    cl1.run();
    cl2.run();
    assertEquals(storeS.getHead(),storeC2.getHead());
    assertFalse("first client updated in stopped state!",storeS.getHead().equals(storeC.getHead()));
    cl1.start();
    cl1.run();
    assertEquals(storeS.getHead(),storeC.getHead());
  }
  finally {
    server.close();
    cl1.close();
    cl2.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.FailoverSslTestIT </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFailoverSecure() throws Exception {
  NodeStore store=new SegmentNodeStore(storeS);
  final StandbyServer server=new StandbyServer(port,storeS,true);
  server.start();
  addTestContent(store,"server");
  storeS.flush();
  StandbyClient cl=newStandbyClient(storeC,port,true);
  cl.run();
  try {
    assertEquals(storeS.getHead(),storeC.getHead());
  }
  finally {
    server.close();
    cl.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.MBeanTest </h4><pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-8 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-2086") public void testClientAndServerEmptyConfig() throws Exception {
  final StandbyServer server=new StandbyServer(port,this.storeS);
  server.start();
  System.setProperty(StandbyClient.CLIENT_ID_PROPERTY_NAME,"Bar");
  final StandbyClient client=newStandbyClient(storeC);
  client.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(StandbyStatusMBean.JMX_NAME + ",id=*");
  ObjectName clientStatus=new ObjectName(client.getMBeanName());
  ObjectName serverStatus=new ObjectName(server.getMBeanName());
  try {
    Set<ObjectName> instances=jmxServer.queryNames(status,null);
    assertEquals(3,instances.size());
    ObjectName connectionStatus=null;
    for (    ObjectName s : instances) {
      if (!s.equals(clientStatus) && !s.equals(serverStatus))       connectionStatus=s;
    }
    assertNotNull(connectionStatus);
    assertTrue(jmxServer.isRegistered(clientStatus));
    assertTrue(jmxServer.isRegistered(serverStatus));
    assertTrue(jmxServer.isRegistered(connectionStatus));
    String m=jmxServer.getAttribute(clientStatus,"Mode").toString();
    if (!m.startsWith("client: "))     fail("unexpected mode " + m);
    assertEquals("master",jmxServer.getAttribute(serverStatus,"Mode"));
    assertEquals(true,jmxServer.getAttribute(serverStatus,"Running"));
    assertEquals(true,jmxServer.getAttribute(clientStatus,"Running"));
    assertEquals("0",jmxServer.getAttribute(clientStatus,"FailedRequests").toString());
    assertEquals("0",jmxServer.getAttribute(clientStatus,"SecondsSinceLastSuccess").toString());
    assertEquals("0",jmxServer.invoke(clientStatus,"calcFailedRequests",null,null).toString());
    assertEquals("0",jmxServer.invoke(clientStatus,"calcSecondsSinceLastSuccess",null,null).toString());
    Thread.sleep(1000);
    assertEquals("0",jmxServer.getAttribute(clientStatus,"FailedRequests").toString());
    assertEquals("1",jmxServer.getAttribute(clientStatus,"SecondsSinceLastSuccess").toString());
    assertEquals("0",jmxServer.invoke(clientStatus,"calcFailedRequests",null,null).toString());
    assertEquals("1",jmxServer.invoke(clientStatus,"calcSecondsSinceLastSuccess",null,null).toString());
    assertEquals(new Long(2),jmxServer.getAttribute(connectionStatus,"TransferredSegments"));
    assertEquals(new Long(128),jmxServer.getAttribute(connectionStatus,"TransferredSegmentBytes"));
    jmxServer.invoke(serverStatus,"stop",null,null);
    assertEquals(false,jmxServer.getAttribute(serverStatus,"Running"));
    m=jmxServer.getAttribute(serverStatus,"Status").toString();
    if (!m.equals(StandbyStatusMBean.STATUS_STOPPED) && !m.equals("channel unregistered"))     fail("unexpected Status" + m);
    jmxServer.invoke(serverStatus,"start",null,null);
    assertEquals(true,jmxServer.getAttribute(serverStatus,"Running"));
    assertEquals(true,jmxServer.getAttribute(clientStatus,"Running"));
    m=jmxServer.getAttribute(serverStatus,"Status").toString();
    if (!m.equals(StandbyStatusMBean.STATUS_STARTING) && !m.equals("channel unregistered"))     fail("unexpected Status" + m);
    jmxServer.invoke(clientStatus,"stop",null,null);
    assertEquals(true,jmxServer.getAttribute(serverStatus,"Running"));
    assertEquals(false,jmxServer.getAttribute(clientStatus,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(clientStatus,"Status"));
    jmxServer.invoke(clientStatus,"start",null,null);
    assertEquals(true,jmxServer.getAttribute(clientStatus,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_RUNNING,jmxServer.getAttribute(clientStatus,"Status"));
  }
  finally {
    client.close();
    server.close();
  }
  assertTrue(!jmxServer.isRegistered(clientStatus));
  assertTrue(!jmxServer.isRegistered(serverStatus));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testServerEmptyConfig() throws Exception {
  final StandbyServer server=new StandbyServer(this.port,this.storeS);
  server.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(StandbyStatusMBean.JMX_NAME + ",id=*");
  try {
    Set<ObjectName> instances=jmxServer.queryNames(status,null);
    assertEquals(1,instances.size());
    status=instances.toArray(new ObjectName[0])[0];
    assertEquals(new ObjectName(server.getMBeanName()),status);
    assertTrue(jmxServer.isRegistered(status));
    assertEquals("primary",jmxServer.getAttribute(status,"Mode"));
    String m=jmxServer.getAttribute(status,"Status").toString();
    if (!m.equals(StandbyStatusMBean.STATUS_STARTING) && !m.equals("channel unregistered"))     fail("unexpected Status " + m);
    assertEquals(StandbyStatusMBean.STATUS_STARTING,jmxServer.getAttribute(status,"Status"));
    assertEquals(true,jmxServer.getAttribute(status,"Running"));
    jmxServer.invoke(status,"stop",null,null);
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(status,"Status"));
    jmxServer.invoke(status,"start",null,null);
    assertEquals(true,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_RUNNING,jmxServer.getAttribute(status,"Status"));
  }
  finally {
    server.close();
  }
  assertTrue(!jmxServer.isRegistered(status));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClientEmptyConfigNoServer() throws Exception {
  final StandbyClient client=newStandbyClient(storeC);
  client.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(StandbyStatusMBean.JMX_NAME + ",id=*");
  try {
    Set<ObjectName> instances=jmxServer.queryNames(status,null);
    assertEquals(1,instances.size());
    status=instances.toArray(new ObjectName[0])[0];
    assertEquals(new ObjectName(client.getMBeanName()),status);
    assertTrue(jmxServer.isRegistered(status));
    String m=jmxServer.getAttribute(status,"Mode").toString();
    if (!m.startsWith("client: "))     fail("unexpected mode " + m);
    assertEquals("0",jmxServer.getAttribute(status,"FailedRequests").toString());
    assertEquals("-1",jmxServer.getAttribute(status,"SecondsSinceLastSuccess").toString());
    assertEquals(StandbyStatusMBean.STATUS_INITIALIZING,jmxServer.getAttribute(status,"Status"));
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    jmxServer.invoke(status,"stop",null,null);
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(status,"Status"));
    jmxServer.invoke(status,"start",null,null);
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(status,"Status"));
  }
  finally {
    client.close();
  }
  assertTrue(!jmxServer.isRegistered(status));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClientNoServer() throws Exception {
  System.setProperty(StandbyClient.CLIENT_ID_PROPERTY_NAME,"Foo");
  final StandbyClient client=newStandbyClient(storeC);
  client.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(client.getMBeanName());
  try {
    assertTrue(jmxServer.isRegistered(status));
    assertEquals("client: Foo",jmxServer.getAttribute(status,"Mode"));
    assertEquals("1",jmxServer.getAttribute(status,"FailedRequests").toString());
    assertEquals("-1",jmxServer.getAttribute(status,"SecondsSinceLastSuccess").toString());
    assertEquals("1",jmxServer.invoke(status,"calcFailedRequests",null,null).toString());
    assertEquals("-1",jmxServer.invoke(status,"calcSecondsSinceLastSuccess",null,null).toString());
  }
  finally {
    client.close();
  }
  assertTrue(!jmxServer.isRegistered(status));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.RecoverTestIT </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLocalChanges() throws Exception {
  NodeStore store=new SegmentNodeStore(storeC);
  addTestContent(store,"client");
  final StandbyServer server=new StandbyServer(port,storeS);
  server.start();
  store=new SegmentNodeStore(storeS);
  addTestContent(store,"server");
  storeS.flush();
  StandbyClient cl=newStandbyClient(storeC);
  try {
    assertFalse("stores are not expected to be equal",storeS.getHead().equals(storeC.getHead()));
    cl.run();
    assertEquals(storeS.getHead(),storeC.getHead());
  }
  finally {
    server.close();
    cl.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBrokenConnection() throws Exception {
  NodeStore store=new SegmentNodeStore(storeS);
  DebugSegmentStore s=new DebugSegmentStore(storeS);
  addTestContent(store,"server");
  storeS.flush();
  final StandbyServer server=new StandbyServer(port,s);
  s.createReadErrors=true;
  server.start();
  StandbyClient cl=newStandbyClient(storeC);
  cl.run();
  try {
    assertFalse("store are not expected to be equal",storeS.getHead().equals(storeC.getHead()));
    s.createReadErrors=false;
    cl.run();
    assertEquals(storeS.getHead(),storeC.getHead());
  }
  finally {
    server.close();
    cl.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.StandbyTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSync() throws Exception {
  final int mb=1 * 1024 * 1024;
  final int blobSize=5 * mb;
  FileStore primary=getPrimary();
  FileStore secondary=getSecondary();
  NodeStore store=new SegmentNodeStore(primary);
  final StandbyServer server=new StandbyServer(port,primary);
  server.start();
  byte[] data=addTestContent(store,"server",blobSize,150);
  primary.flush();
  StandbyClient cl=newStandbyClient(secondary);
  cl.run();
  try {
    assertEquals(primary.getHead(),secondary.getHead());
  }
  finally {
    server.close();
    cl.close();
  }
  assertTrue(primary.size() > blobSize);
  assertTrue(secondary.size() > blobSize);
  PropertyState ps=secondary.getHead().getChildNode("root").getChildNode("server").getProperty("testBlob");
  assertNotNull(ps);
  assertEquals(Type.BINARY.tag(),ps.getType().tag());
  Blob b=ps.getValue(Type.BINARY);
  assertEquals(blobSize,b.length());
  byte[] testData=new byte[blobSize];
  ByteStreams.readFully(b.getNewStream(),testData);
  assertArrayEquals(data,testData);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.StandbyTestIT </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-2430
 */
@Test public void testSyncLoop() throws Exception {
  final int blobSize=25 * 1024;
  final int dataNodes=5000;
  FileStore primary=getPrimary();
  FileStore secondary=getSecondary();
  NodeStore store=new SegmentNodeStore(primary);
  final StandbyServer server=new StandbyServer(port,primary);
  server.start();
  byte[] data=addTestContent(store,"server",blobSize,dataNodes);
  primary.flush();
  StandbyClient cl=newStandbyClient(secondary);
  try {
    for (int i=0; i < 5; i++) {
      String cp=store.checkpoint(Long.MAX_VALUE);
      primary.flush();
      cl.run();
      assertEquals(primary.getHead(),secondary.getHead());
      assertTrue(store.release(cp));
      cl.cleanup();
      assertTrue(secondary.size() > blobSize);
    }
  }
  finally {
    server.close();
    cl.close();
  }
  assertTrue(primary.size() > blobSize);
  assertTrue(secondary.size() > blobSize);
  long primaryFs=FileUtils.sizeOf(directoryS);
  long secondaryFs=FileUtils.sizeOf(directoryC);
  assertTrue(secondaryFs < primaryFs * 1.15);
  PropertyState ps=secondary.getHead().getChildNode("root").getChildNode("server").getProperty("testBlob");
  assertNotNull(ps);
  assertEquals(Type.BINARY.tag(),ps.getType().tag());
  Blob b=ps.getValue(Type.BINARY);
  assertEquals(blobSize,b.length());
  byte[] testData=new byte[blobSize];
  ByteStreams.readFully(b.getNewStream(),testData);
  assertArrayEquals(data,testData);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tika.CSVFileBinaryResourceProviderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetBinaries() throws Exception {
  StringBuilder sb=new StringBuilder();
  CSVPrinter p=new CSVPrinter(sb,CSVFileBinaryResourceProvider.FORMAT);
  p.printRecord("a",123,"text/plain",null,"/a");
  p.printRecord("a2",123,"text/plain",null,"/a/c");
  p.printRecord("b",null,"text/plain",null,"/b");
  p.printRecord(null,null,"text/plain",null,"/c");
  File dataFile=temporaryFolder.newFile();
  Files.write(sb,dataFile,Charsets.UTF_8);
  CSVFileBinaryResourceProvider provider=new CSVFileBinaryResourceProvider(dataFile,new MemoryBlobStore());
  Map<String,BinaryResource> binaries=provider.getBinaries("/").uniqueIndex(BinarySourceMapper.BY_BLOBID);
  assertEquals(3,binaries.size());
  assertEquals("a",binaries.get("a").getBlobId());
  assertEquals("/a",binaries.get("a").getPath());
  binaries=provider.getBinaries("/a").uniqueIndex(BinarySourceMapper.BY_BLOBID);
  assertEquals(1,binaries.size());
  provider.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tika.NodeStoreBinaryResourceProviderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void countBinaries() throws Exception {
  NodeBuilder builder=root.builder();
  createFileNode(builder,"a",new IdBlob("hello",null),"text/plain");
  createFileNode(builder,"b",new IdBlob("hello","id1"),"text/plain");
  createFileNode(builder.child("a2"),"c",new IdBlob("hello","id2"),"text/foo").setProperty(JcrConstants.JCR_ENCODING,"bar");
  NodeStore store=new MemoryNodeStore(builder.getNodeState());
  BlobStore blobStore=new MemoryBlobStore();
  NodeStoreBinaryResourceProvider extractor=new NodeStoreBinaryResourceProvider(store,blobStore);
  assertEquals(2,extractor.getBinaries("/").size());
  assertEquals(1,extractor.getBinaries("/a2").size());
  BinaryResource bs=extractor.getBinaries("/a2").first().get();
  assertEquals("text/foo",bs.getMimeType());
  assertEquals("bar",bs.getEncoding());
  assertEquals("id2",bs.getBlobId());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void csvGenerator() throws Exception {
  File csv=new File(temporaryFolder.getRoot(),"test.csv");
  BlobStore blobStore=new MemoryBlobStore();
  NodeBuilder builder=root.builder();
  createFileNode(builder,"a",blobOf("foo",blobStore),"text/plain");
  createFileNode(builder,"b",blobOf("hello",blobStore),"text/plain");
  NodeStore store=new MemoryNodeStore(builder.getNodeState());
  NodeStoreBinaryResourceProvider extractor=new NodeStoreBinaryResourceProvider(store,blobStore);
  CSVFileGenerator generator=new CSVFileGenerator(csv);
  generator.generate(extractor.getBinaries("/"));
  CSVFileBinaryResourceProvider csvbrp=new CSVFileBinaryResourceProvider(csv,blobStore);
  assertEquals(2,csvbrp.getBinaries("/").size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tika.TextExtractorTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void basicWorking() throws Exception {
  MapTextWriter writer=new MapTextWriter();
  TextExtractor extractor=new TextExtractor(writer);
  List<BinaryResource> binaries=asList(bin("hello","text/plain","a"),bin("foo","text/plain","b"));
  extractor.extract(binaries);
  extractor.close();
  assertEquals(2,writer.data.size());
  assertEquals("foo",writer.data.get("b").trim());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tree.TreeLocationTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNullLocation(){
  TreeLocation xyz=nullLocation.getChild("x").getChild("y").getChild("z");
  Assert.assertEquals("x/y/z",xyz.getPath());
  assertEquals("x/y",xyz.getParent().getPath());
  assertEquals("x",xyz.getParent().getParent().getPath());
  assertEquals(nullLocation,xyz.getParent().getParent().getParent());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testParentOfRoot(){
  TreeLocation rootLocation=TreeLocation.create(root);
  assertEquals(nullLocation,rootLocation.getParent());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getDeepLocation(){
  TreeLocation p=TreeLocation.create(root,"/z/1/2/p");
  assertNotNull(p.getProperty());
  assertEquals("/z/1/2/p",p.getPath());
  TreeLocation n=TreeLocation.create(root,"/z/1/2/3/4");
  assertNull(n.getTree());
  assertNull(n.getProperty());
  assertEquals("/z/1/2/3/4",n.getPath());
  TreeLocation two=n.getParent().getParent();
  assertNotNull(two.getTree());
  assertEquals("/z/1/2",two.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyLocation(){
  TreeLocation a=TreeLocation.create(root,"/a");
  assertNotNull(a.getProperty());
  TreeLocation abc=a.getChild("b").getChild("c");
  assertEquals("/a/b/c",abc.getPath());
  assertNull(abc.getProperty());
  TreeLocation ab=abc.getParent();
  assertEquals("/a/b",ab.getPath());
  assertNull(ab.getProperty());
  assertEquals(a.getProperty(),ab.getParent().getProperty());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNodeLocation(){
  TreeLocation x=TreeLocation.create(root,"/x");
  assertNotNull(x.getTree());
  TreeLocation xyz=x.getChild("y").getChild("z");
  assertEquals("/x/y/z",xyz.getPath());
  assertNull(xyz.getTree());
  TreeLocation xy=xyz.getParent();
  assertEquals("/x/y",xy.getPath());
  assertNull(xy.getTree());
  assertEquals(x.getTree(),xy.getParent().getTree());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tree.TreeTypeProviderTest </h4><pre class="type-12 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testGetTypeWithDefaultParentType(){
  for (  TypeTest test : tests) {
    TreeType typeIfParentDefault=typeProvider.getType(root.getTree(test.path),TreeType.DEFAULT);
    if (TreeType.DEFAULT == test.parentType) {
      assertEquals(test.path,test.type,typeIfParentDefault);
    }
 else {
      assertNotEquals(test.path,test.type,typeIfParentDefault);
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTypeForImmutableTreeWithParent(){
  Tree t=RootFactory.createReadOnlyRoot(root).getTree("/:hidden/testPath");
  assertEquals(TreeType.HIDDEN,typeProvider.getType(t,TreeType.HIDDEN));
  assertEquals(TreeType.HIDDEN,typeProvider.getType(t));
  assertEquals(TreeType.HIDDEN,typeProvider.getType(t,TreeType.DEFAULT));
  assertEquals(TreeType.HIDDEN,typeProvider.getType(t,TreeType.ACCESS_CONTROL));
  assertEquals(TreeType.HIDDEN,typeProvider.getType(t,TreeType.VERSION));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTypeForRootTree(){
  Tree t=root.getTree("/");
  assertEquals(TreeType.DEFAULT,typeProvider.getType(t));
  assertEquals(TreeType.DEFAULT,typeProvider.getType(t,TreeType.DEFAULT));
  assertEquals(TreeType.DEFAULT,typeProvider.getType(t,TreeType.HIDDEN));
  assertEquals(TreeType.DEFAULT,typeProvider.getType(t,TreeType.VERSION));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTypeWithParentType(){
  for (  TypeTest test : tests) {
    assertEquals(test.path,test.type,typeProvider.getType(root.getTree(test.path),test.parentType));
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTypeForImmutableTree(){
  for (  String path : new String[]{"/","/testPath"}) {
    Tree t=RootFactory.createReadOnlyRoot(root).getTree(path);
    assertEquals(TreeType.DEFAULT,typeProvider.getType(t));
    assertEquals(TreeType.DEFAULT,typeProvider.getType(t));
    assertEquals(TreeType.DEFAULT,typeProvider.getType(t,TreeType.DEFAULT));
    assertEquals(TreeType.DEFAULT,typeProvider.getType(t,TreeType.HIDDEN));
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetType(){
  for (  TypeTest test : tests) {
    assertEquals(test.path,test.type,typeProvider.getType(root.getTree(test.path)));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tree.impl.ImmutableTreeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProperties(){
  ImmutableTree orderable=immutable.getChild("orderable");
  List<String> propNames=Lists.newArrayList(TreeConstants.OAK_CHILD_ORDER,JcrConstants.JCR_PRIMARYTYPE);
  for (  PropertyState ps : orderable.getProperties()) {
    assertTrue(propNames.remove(ps.getName()));
  }
  assertEquals(2,orderable.getPropertyCount());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetName(){
  assertEquals("x",immutable.getChild("x").getName());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonExistingGetName(){
  assertEquals("nonExisting",immutable.getChild("nonExisting").getName());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRootGetName(){
  assertEquals("",immutable.getName());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHiddenGetName(){
  assertEquals(Text.getName(HIDDEN_PATH),getHiddenTree(immutable).getName());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPropertyCount(){
  ImmutableTree orderable=immutable.getChild("orderable");
  assertEquals(2,orderable.getPropertyCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPath(){
  assertEquals("/",immutable.getPath());
  immutable=immutable.getChild("x");
  assertEquals("/x",immutable.getPath());
  immutable=immutable.getChild("y");
  assertEquals("/x/y",immutable.getPath());
  immutable=immutable.getChild("z");
  assertEquals("/x/y/z",immutable.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetParent(){
  ImmutableTree child=immutable.getChild("x");
  assertNotNull(child.getParent());
  assertEquals("/",child.getParent().getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.value.BinaryBasedBlobTest </h4><pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getStreamWithError() throws IOException {
  Blob blob=new BinaryBasedBlob(new FailingBinary());
  assertEquals(-1,blob.length());
  InputStream ins=blob.getNewStream();
  try {
    ins.read();
    fail();
  }
 catch (  IOException ignored) {
  }
 finally {
    ins.close();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getStream() throws RepositoryException, IOException {
  byte[] bytes="just a test".getBytes();
  Binary binary=new TestBinary(bytes);
  Blob blob=new BinaryBasedBlob(binary);
  assertEquals(bytes.length,blob.length());
  InputStream expected=binary.getStream();
  InputStream actual=blob.getNewStream();
  try {
    for (int e=expected.read(); e != -1; e=expected.read()) {
      assertEquals(e,actual.read());
    }
    assertEquals(-1,actual.read());
  }
  finally {
    expected.close();
    actual.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.FilterTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void isNotNull() throws Exception {
  Filter f=createFilter("//*[@c]");
  assertEquals("[is not null]",f.getPropertyRestrictions("c").toString());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void localName() throws Exception {
  Filter f=createFilterSQL("select * from [nt:base] where localname() = 'resource'");
  assertEquals("[resource]",f.getPropertyRestrictions(":localname").toString());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void isNull() throws Exception {
  Filter f=createFilter("//*[not(@c)]");
  assertEquals("[is null]",f.getPropertyRestrictions("c").toString());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void name() throws Exception {
  Filter f=createFilter("//*[fn:name() = 'nt:resource']");
  assertEquals("[resource]",f.getPropertyRestrictions(":localname").toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.IteratorsTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void distinct(){
  assertEquals("",toString(FilterIterators.newDistinct(it(),settings)));
  assertEquals("1",toString(FilterIterators.newDistinct(it(1),settings)));
  assertEquals("1, 2",toString(FilterIterators.newDistinct(it(1,2),settings)));
  assertEquals("1, 2, 3",toString(FilterIterators.newDistinct(it(1,2,1,3,3,1),settings)));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void limit(){
  assertEquals("",toString(FilterIterators.newLimit(it(),0)));
  assertEquals("",toString(FilterIterators.newLimit(it(),1)));
  assertEquals("",toString(FilterIterators.newLimit(it(),10)));
  assertEquals("",toString(FilterIterators.newLimit(it(1),0)));
  assertEquals("1",toString(FilterIterators.newLimit(it(1),1)));
  assertEquals("1",toString(FilterIterators.newLimit(it(1),10)));
  assertEquals("",toString(FilterIterators.newLimit(it(1,2),0)));
  assertEquals("1",toString(FilterIterators.newLimit(it(1,2),1)));
  assertEquals("1, 2",toString(FilterIterators.newLimit(it(1,2),10)));
  assertEquals("1",toString(FilterIterators.newLimit(it(1,2,3),1)));
  assertEquals("1, 2",toString(FilterIterators.newLimit(it(1,2,3),2)));
  assertEquals("1, 2, 3",toString(FilterIterators.newLimit(it(1,2,3),3)));
  assertEquals("1, 2, 3",toString(FilterIterators.newLimit(it(1,2,3),4)));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void offset(){
  assertEquals("",toString(FilterIterators.newOffset(it(),0)));
  assertEquals("1",toString(FilterIterators.newOffset(it(1),0)));
  assertEquals("1, 2",toString(FilterIterators.newOffset(it(1,2),0)));
  assertEquals("",toString(FilterIterators.newOffset(it(),1)));
  assertEquals("",toString(FilterIterators.newOffset(it(1),1)));
  assertEquals("2",toString(FilterIterators.newOffset(it(1,2),1)));
  assertEquals("",toString(FilterIterators.newOffset(it(1,2),2)));
  assertEquals("",toString(FilterIterators.newOffset(it(1,2),3)));
  assertEquals("2, 3",toString(FilterIterators.newOffset(it(1,2,3),1)));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void combined(){
  assertEquals("3, 3, 2, 1",toString(FilterIterators.newCombinedFilter(it(3,3,2,1),false,Long.MAX_VALUE,0,null,settings)));
  assertEquals("3, 2, 1",toString(FilterIterators.newCombinedFilter(it(3,3,2,1),true,Long.MAX_VALUE,0,null,settings)));
  assertEquals("1, 2, 3, 3",toString(FilterIterators.newCombinedFilter(it(3,3,2,1),false,Long.MAX_VALUE,0,INT_COMP,settings)));
  assertEquals("1, 2, 3",toString(FilterIterators.newCombinedFilter(it(3,3,2,1),true,Long.MAX_VALUE,0,INT_COMP,settings)));
  assertEquals("3, 3",toString(FilterIterators.newCombinedFilter(it(3,3,2,1),false,2,0,null,settings)));
  assertEquals("3, 2, 1",toString(FilterIterators.newCombinedFilter(it(3,3,2,1),false,Long.MAX_VALUE,1,null,settings)));
  assertEquals("3, 2",toString(FilterIterators.newCombinedFilter(it(3,3,2,1),false,2,1,null,settings)));
  assertEquals("2, 1",toString(FilterIterators.newCombinedFilter(it(3,3,2,1),true,2,1,null,settings)));
  assertEquals("2, 3",toString(FilterIterators.newCombinedFilter(it(3,3,2,1),true,2,1,INT_COMP,settings)));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void sort(){
  assertEquals("",toString(FilterIterators.newSort(it(new Integer[]{}),INT_COMP,0,settings)));
  assertEquals("",toString(FilterIterators.newSort(it(1),INT_COMP,0,settings)));
  assertEquals("1",toString(FilterIterators.newSort(it(1),INT_COMP,1,settings)));
  assertEquals("1",toString(FilterIterators.newSort(it(1),INT_COMP,2,settings)));
  assertEquals("1",toString(FilterIterators.newSort(it(1,2),INT_COMP,1,settings)));
  assertEquals("1",toString(FilterIterators.newSort(it(2,1),INT_COMP,1,settings)));
  assertEquals("1, 2",toString(FilterIterators.newSort(it(1,2,3),INT_COMP,2,settings)));
  assertEquals("1, 2",toString(FilterIterators.newSort(it(3,2,1),INT_COMP,2,settings)));
  assertEquals("1, 1, 2",toString(FilterIterators.newSort(it(3,3,2,1,1),INT_COMP,3,settings)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.LargeQueryTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleOr() throws ParseException {
  StringBuilder buff=new StringBuilder("//*[");
  StringBuilder buff2=new StringBuilder("select [jcr:path], [jcr:score], * from [nt:base] as a where [x] in(");
  for (int i=0; i < 100000; i++) {
    if (i > 0) {
      buff.append(" or ");
      buff2.append(", ");
    }
    buff.append("@x=").append(i);
    buff2.append(i);
  }
  buff.append("]");
  buff2.append(")");
  String xpath=buff.toString();
  XPathToSQL2Converter conv=new XPathToSQL2Converter();
  String sql2=conv.convert(xpath);
  buff2.append(" /* xpath: ").append(xpath).append(" */");
  assertEquals(buff2.toString(),sql2);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCombinedOr() throws ParseException {
  StringBuilder buff=new StringBuilder("//*[");
  StringBuilder buff2=new StringBuilder("select [jcr:path], [jcr:score], * from [nt:base] as a where [x] in(");
  int step=111;
  for (int i=0; i < 5000; i++) {
    if (i % step == 2) {
      if (i > 0) {
        buff.append(" or ");
      }
      buff.append("@x>").append(i);
      buff2.append(") union select [jcr:path], [jcr:score], * from [nt:base] as a " + "where [x] > ").append(i);
      buff2.append(" union select [jcr:path], [jcr:score], * from [nt:base] as a " + "where [x] in(");
    }
 else {
      if (i > 0) {
        buff.append(" or ");
      }
      buff.append("@x=").append(i);
      if (i > 0 && i % step != 3) {
        buff2.append(", ");
      }
      buff2.append(i);
    }
  }
  buff.append("]");
  buff2.append(")");
  String xpath=buff.toString();
  XPathToSQL2Converter conv=new XPathToSQL2Converter();
  String sql2=conv.convert(xpath);
  buff2.append(" /* xpath: ").append(xpath).append(" */");
  assertEquals(buff2.toString(),sql2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.UnionQueryTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOrderLimitOffset() throws Exception {
  String left="SELECT [jcr:path] FROM [nt:base] AS a WHERE ISDESCENDANTNODE(a, '/UnionQueryTest')";
  String right="SELECT [jcr:path] FROM [nt:base] AS a WHERE ISDESCENDANTNODE(a, '/UnionQueryTest')";
  String order="ORDER BY [jcr:path]";
  String union=String.format("%s UNION %s %s",left,right,order);
  final int limit=3;
  final int offset=2;
  String[] expected={"/UnionQueryTest/a/b/c","/UnionQueryTest/a/b/c/d","/UnionQueryTest/a/b/c/d/e"};
  Result result=qe.executeQuery(union,QueryEngineImpl.SQL2,limit,offset,QueryEngine.NO_BINDINGS,QueryEngine.NO_MAPPINGS);
  List<ResultRow> rows=Lists.newArrayList(result.getRows());
  assertEquals(expected.length,rows.size());
  int i=0;
  for (  ResultRow rr : result.getRows()) {
    assertEquals(rr.getPath(),expected[i++]);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.UtilsTest </h4><pre class="type-13 type-9 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void saturatedAdd(){
  assertEquals(3,QueryImpl.saturatedAdd(1,2));
  assertEquals(Long.MAX_VALUE,QueryImpl.saturatedAdd(1,Long.MAX_VALUE));
  assertEquals(Long.MAX_VALUE,QueryImpl.saturatedAdd(Long.MAX_VALUE,1));
  assertEquals(Long.MAX_VALUE,QueryImpl.saturatedAdd(Long.MAX_VALUE,Long.MAX_VALUE));
  long[] test={Long.MIN_VALUE,Long.MIN_VALUE + 1,Long.MIN_VALUE + 10,-1000,-10,-1,0,1,3,10000,Long.MAX_VALUE - 20,Long.MAX_VALUE - 1,Long.MAX_VALUE};
  Random r=new Random(1);
  for (int i=0; i < 10000; i++) {
    long x=r.nextBoolean() ? test[r.nextInt(test.length)] : r.nextLong();
    long y=r.nextBoolean() ? test[r.nextInt(test.length)] : r.nextLong();
    long alt=altSaturatedAdd(x,y);
    long got=QueryImpl.saturatedAdd(x,y);
    assertEquals(x + "+" + y,alt,got);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.ast.FullTextTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void boost() throws ParseException {
  assertEquals("\"hello\"^2",convertPattern("hello^2"));
  assertEquals("\"hello world\"^2",convertPattern("\"hello world\"^2"));
  assertTrue(test("hello^2","hello"));
  assertTrue(test("\"hello\"^0.2","hello"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void escaped() throws ParseException {
  assertEquals("\"\\\"hello world\\\"\"",convertPattern("\"\\\"hello world\\\"\""));
  assertFalse(test("\\\"hello\\\"","hello"));
  assertTrue(test("\"hello\"","\"hello\""));
  assertTrue(test("\\\"hello\\\"","\"hello\""));
  assertFalse(test("\\-1 2 3","1 2 3"));
  assertTrue(test("\\-1 2 3","-1 2 3"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void quoted() throws ParseException {
  assertEquals("\"hello world\"",convertPattern("\"hello world\""));
  assertEquals("\"hello world\" \"world\"",convertPattern("\"hello world\" world"));
  assertTrue(test("\"hello world\"","hello world"));
  assertFalse(test("\"hello world\"","world hello"));
  assertTrue(test("\"hello-world\"","hello-world"));
  assertTrue(test("\"hello\\-world\"","hello-world"));
  assertTrue(test("\"hello \\\"world\\\"\"","hello \"world\""));
  assertTrue(test("\"hello world\" -hallo","hello world"));
  assertFalse(test("\"hello world\" -hallo","hallo hello world"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void and() throws ParseException {
  assertEquals("\"hello\" \"world\"",convertPattern("hello world"));
  assertEquals("\"hello\" \"world\"",convertPattern("hello  world"));
  assertEquals("\"hello\" \"world\"",convertPattern("hello   world"));
  assertEquals("\"hello\" \"world\"",convertPattern("hello \t  world"));
  assertEquals("\"hello\" \"or\" \"world\"",convertPattern("hello or world"));
  assertFalse(test("hello world","hello"));
  assertFalse(test("hello world","world"));
  assertTrue(test("hello world","world hello"));
  assertTrue(test("hello world ","hello world"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void not() throws ParseException {
  assertEquals("\"hello\" -\"world\"",convertPattern("hello -world"));
  assertTrue(test("hello -world","hello"));
  assertFalse(test("hello -world","hello world"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void or() throws ParseException {
  assertEquals("\"hello\" OR \"world\"",convertPattern("hello OR world"));
  assertTrue(test("hello OR world","hello"));
  assertTrue(test("hello OR world","world"));
  assertFalse(test("hello OR world","hi"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.ast.SimplifyTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void simplifyOr(){
  assertEquals(fooIsA,new OrImpl(fooIsA,fooIsA).simplify());
  assertEquals(fooInAB,new OrImpl(fooIsA,fooIsB).simplify());
  assertEquals(fooInBC,new OrImpl(fooIsB,fooIsC).simplify());
  assertEquals(fooInABC,new OrImpl(fooInAB,fooIsC).simplify());
  assertEquals(fooInABC,new OrImpl(fooIsA,fooInBC).simplify());
  assertEquals(fooInABC,new OrImpl(fooInAB,fooInBC).simplify());
  assertEquals(fooInABC,new OrImpl(fooIsA,fooInABC).simplify());
  assertEquals(fooInABC,new OrImpl(fooIsA,new OrImpl(fooIsB,fooIsC)).simplify());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void simplifyIn(){
  assertEquals(fooIsA,new InImpl(foo,Arrays.asList(A)).simplify());
  assertEquals(fooIsA,new InImpl(foo,Arrays.asList(A,A)).simplify());
  assertEquals(fooInAB,new InImpl(foo,Arrays.asList(A,A,B)).simplify());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.facet.FacetResultTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResult() throws Exception {
  QueryResult queryResult=mock(QueryResult.class);
  when(queryResult.getColumnNames()).thenReturn(new String[]{"rep:facet(text)","jcr:path","rep:facet(jcr:title)"});
  RowIterator rows=mock(RowIterator.class);
  when(rows.hasNext()).thenReturn(true);
  Row row=mock(Row.class);
  Value value=mock(Value.class);
  when(value.getString()).thenReturn("{}");
  when(row.getValue("rep:facet(text)")).thenReturn(value);
  Value value2=mock(Value.class);
  when(value2.getString()).thenReturn("{\"a\" : 2, \"b\" : 1}");
  when(row.getValue("rep:facet(jcr:title)")).thenReturn(value2);
  when(rows.nextRow()).thenReturn(row);
  when(queryResult.getRows()).thenReturn(rows);
  FacetResult facetResult=new FacetResult(queryResult);
  assertNotNull(facetResult.getDimensions());
  assertEquals(2,facetResult.getDimensions().size());
  assertTrue(facetResult.getDimensions().contains("text"));
  assertTrue(facetResult.getDimensions().contains("jcr:title"));
  assertNotNull(facetResult.getFacets("text"));
  assertTrue(facetResult.getFacets("text").isEmpty());
  assertNotNull(facetResult.getFacets("jcr:title"));
  assertEquals(2,facetResult.getFacets("jcr:title").size());
  assertEquals("a",facetResult.getFacets("jcr:title").get(0).getLabel());
  assertEquals(2,facetResult.getFacets("jcr:title").get(0).getCount(),0);
  assertEquals("b",facetResult.getFacets("jcr:title").get(1).getLabel());
  assertEquals(1,facetResult.getFacets("jcr:title").get(1).getCount(),0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.fulltext.SimpleExcerptProviderTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void simpleTest() throws Exception {
  assertEquals("<div><span><strong>fox</strong> is jumping</span></div>",highlight(sb("fox is jumping"),of("fox")));
  assertEquals("<div><span>fox is <strong>jumping</strong></span></div>",highlight(sb("fox is jumping"),of("jump*")));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void highlightWithWildCard() throws Exception {
  assertEquals("<div><span><strong>fox</strong> is jumping</span></div>",highlight(sb("fox is jumping"),of("fox *")));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void highlightIgnoreStar() throws Exception {
  assertEquals("<div><span>10 * 10</span></div>",highlight(sb("10 * 10"),of("fox *")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.index.AdvancedIndexTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void copy() throws Exception {
  Filter f=new FilterImpl(null,"SELECT * FROM [nt:file]",new QueryEngineSettings());
  IndexPlan.Builder b=new IndexPlan.Builder();
  IndexPlan plan1=b.setEstimatedEntryCount(10).setFilter(f).setDelayed(true).build();
  IndexPlan plan2=plan1.copy();
  plan2.setFilter(new FilterImpl(null,"SELECT * FROM [oak:Unstructured]",new QueryEngineSettings()));
  assertEquals(plan1.getEstimatedEntryCount(),10);
  assertEquals(plan2.getEstimatedEntryCount(),10);
  assertTrue(plan1.isDelayed());
  assertTrue(plan2.isDelayed());
  assertEquals(plan1.getFilter().getQueryStatement(),"SELECT * FROM [nt:file]");
  assertEquals(plan2.getFilter().getQueryStatement(),"SELECT * FROM [oak:Unstructured]");
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void builder(){
  IndexPlan.Builder b=new IndexPlan.Builder();
  IndexPlan plan=b.setEstimatedEntryCount(10).build();
  assertEquals(10,plan.getEstimatedEntryCount());
  b.setEstimatedEntryCount(20);
  assertEquals(10,plan.getEstimatedEntryCount());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void attribute() throws Exception {
  IndexPlan plan=new IndexPlan.Builder().setAttribute("foo","bar").build();
  assertEquals("bar",plan.getAttribute("foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.index.FilterTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void pathRestrictions() throws Exception {
  FilterImpl f=new FilterImpl();
  assertEquals("/",f.getPath());
  assertEquals(Filter.PathRestriction.NO_RESTRICTION,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test2",Filter.PathRestriction.ALL_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.ALL_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.DIRECT_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/y",Filter.PathRestriction.DIRECT_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  f.restrictPath("/test/x",Filter.PathRestriction.EXACT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.EXACT,f.getPathRestriction());
  f.restrictPath("/test/y",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test",Filter.PathRestriction.PARENT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.ALL_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x",Filter.PathRestriction.EXACT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.EXACT,f.getPathRestriction());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x/y",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  f.restrictPath("/",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/y",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test2",Filter.PathRestriction.ALL_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x",Filter.PathRestriction.EXACT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.EXACT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  f.restrictPath("/test/y",Filter.PathRestriction.DIRECT_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.PARENT);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test2",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyRestriction(){
  PropertyValue one=PropertyValues.newString("1");
  PropertyValue two=PropertyValues.newString("2");
  FilterImpl f=new FilterImpl();
  assertTrue(null == f.getPropertyRestriction("x"));
  f.restrictProperty("x",Operator.LESS_OR_EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[..2]]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[..2], [1..]])",f.toString());
  f.restrictProperty("x",Operator.LESS_OR_EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[..2], [1..]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[..2], [1..]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[..2], [1.., (1..]])",f.toString());
  f.restrictProperty("x",Operator.LESS_THAN,two);
  assertEquals("Filter(, path=*, property=[x=[..2], [1.., (1.., ..2)]])",f.toString());
  f.restrictProperty("x",Operator.EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[..2], [1.., (1.., ..2), 2]])",f.toString());
  f=new FilterImpl();
  f.restrictProperty("x",Operator.EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1]])",f.toString());
  f.restrictProperty("x",Operator.EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1, [1..]])",f.toString());
  f.restrictProperty("x",Operator.LESS_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1, [1.., ..1]]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[1, [1.., ..1], (1..]])",f.toString());
  f=new FilterImpl();
  f.restrictProperty("x",Operator.EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1]])",f.toString());
  f.restrictProperty("x",Operator.LESS_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[1, ..1)]])",f.toString());
  f=new FilterImpl();
  f.restrictProperty("x",Operator.NOT_EQUAL,null);
  assertEquals("Filter(, path=*, property=[x=[is not null]])",f.toString());
  f.restrictProperty("x",Operator.LESS_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[is not null, ..1)]])",f.toString());
  f.restrictProperty("x",Operator.EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[is not null, ..1), 2]])",f.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.index.TraversingIndexTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void traverse() throws Exception {
  NodeBuilder builder=EMPTY_NODE.builder();
  NodeBuilder parents=builder.child("parents");
  parents.child("p0").setProperty("id",0);
  parents.child("p1").setProperty("id",1);
  parents.child("p2").setProperty("id",2);
  NodeBuilder children=builder.child("children");
  children.child("c1").setProperty("p","1");
  children.child("c2").setProperty("p","1");
  children.child("c3").setProperty("p","2");
  children.child("c4").setProperty("p","3");
  NodeState root=builder.getNodeState();
  TraversingIndex t=new TraversingIndex();
  FilterImpl f=new FilterImpl();
  f.setPath("/");
  Cursor c=t.query(f,root);
  List<String> paths=new ArrayList<String>();
  while (c.hasNext()) {
    paths.add(c.next().getPath());
  }
  Collections.sort(paths);
  assertEquals(Arrays.asList("/","/children","/children/c1","/children/c2","/children/c3","/children/c4","/parents","/parents/p0","/parents/p1","/parents/p2"),paths);
  assertFalse(c.hasNext());
  assertFalse(c.hasNext());
  f.setPath("/nowhere");
  c=t.query(f,root);
  assertFalse(c.hasNext());
  assertFalse(c.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteResultTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.STRING).when(value).getType();
  doReturn("value").when(value).getValue(Type.STRING);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asText());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSelector(){
  ResultRow row=mock(ResultRow.class);
  doReturn("path").when(row).getPath("selector");
  assertEquals("path",createResult(row).getSelectorPath("selector"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiLongColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.LONGS).when(value).getType();
  doReturn(asList(4L,2L)).when(value).getValue(Type.LONGS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList(4L,2L),remoteValue.asMultiLong());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBinaryColumn(){
  Blob blob=mock(Blob.class);
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.BINARY).when(value).getType();
  doReturn(blob).when(value).getValue(Type.BINARY);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn("id").when(binaries).put(blob);
  ContentRemoteResult result=createResult(binaries,row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("id",remoteValue.asBinaryId());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiBooleanColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.BOOLEANS).when(value).getType();
  doReturn(asList(true,false)).when(value).getValue(Type.BOOLEANS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList(true,false),remoteValue.asMultiBoolean());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiPathColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.PATHS).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.PATHS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiPath());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiUriColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.URIS).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.URIS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiUri());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiDecimalColumn(){
  BigDecimal first=new BigDecimal(4);
  BigDecimal second=new BigDecimal(2);
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DECIMALS).when(value).getType();
  doReturn(asList(first,second)).when(value).getValue(Type.DECIMALS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList(first,second),remoteValue.asMultiDecimal());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiWeakReferenceColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.WEAKREFERENCES).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.WEAKREFERENCES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiWeakReference());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDecimalColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DECIMAL).when(value).getType();
  doReturn(BigDecimal.ONE).when(value).getValue(Type.DECIMAL);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(BigDecimal.ONE,remoteValue.asDecimal());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNameColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.NAME).when(value).getType();
  doReturn("value").when(value).getValue(Type.NAME);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asName());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiDoubleColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DOUBLES).when(value).getType();
  doReturn(asList(4.0,2.0)).when(value).getValue(Type.DOUBLES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList(4.0,2.0),remoteValue.asMultiDouble());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiReferenceColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.REFERENCES).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.REFERENCES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiReference());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLongColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.LONG).when(value).getType();
  doReturn(42L).when(value).getValue(Type.LONG);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(42L,remoteValue.asLong().longValue());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiStringColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.STRINGS).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.STRINGS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiText());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUriColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.URI).when(value).getType();
  doReturn("value").when(value).getValue(Type.URI);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asUri());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReferenceColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.REFERENCE).when(value).getType();
  doReturn("value").when(value).getValue(Type.REFERENCE);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asReference());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDoubleColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DOUBLE).when(value).getType();
  doReturn(4.2).when(value).getValue(Type.DOUBLE);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(4.2,remoteValue.asDouble().doubleValue(),1e-5);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBooleanColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.BOOLEAN).when(value).getType();
  doReturn(true).when(value).getValue(Type.BOOLEAN);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(true,remoteValue.asBoolean());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDateColumn(){
  Date now=new Date();
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DATE).when(value).getType();
  doReturn(toFormattedDate(now)).when(value).getValue(Type.DATE);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(now.getTime(),remoteValue.asDate().longValue());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiBinaryColumn(){
  Blob first=mock(Blob.class);
  Blob second=mock(Blob.class);
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn("first").when(binaries).put(first);
  doReturn("second").when(binaries).put(second);
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.BINARIES).when(value).getType();
  doReturn(asList(first,second)).when(value).getValue(Type.BINARIES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(binaries,row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("first","second"),remoteValue.asMultiBinaryId());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPathColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.PATH).when(value).getType();
  doReturn("value").when(value).getValue(Type.PATH);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asPath());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWeakReferenceColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.WEAKREFERENCE).when(value).getType();
  doReturn("value").when(value).getValue(Type.WEAKREFERENCE);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asWeakReference());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiNameColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.NAMES).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.NAMES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiName());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiDateColumn(){
  Date first=new Date(4);
  Date second=new Date(2);
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DATES).when(value).getType();
  doReturn(toFormattedDates(first,second)).when(value).getValue(Type.DATES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList(4L,2L),remoteValue.asMultiDate());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteResultsTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTotal(){
  Result result=mock(Result.class);
  doReturn(42L).when(result).getSize();
  assertEquals(42L,createContentRemoteResults(result).getTotal());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteSessionTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWriteBinary() throws Exception {
  Blob blob=mock(Blob.class);
  InputStream stream=mock(InputStream.class);
  Root root=mock(Root.class);
  doReturn(blob).when(root).createBlob(stream);
  ContentSession session=mock(ContentSession.class);
  doReturn(root).when(session).getLatestRoot();
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn("id").when(binaries).put(blob);
  ContentRemoteSession remoteSession=createSession(session,binaries);
  assertEquals("id",remoteSession.writeBinary(stream).asString());
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadBinaryIdAsString(){
  Blob blob=mock(Blob.class);
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn(blob).when(binaries).get("id");
  ContentRemoteSession remoteSession=createSession(binaries);
  assertEquals("id",remoteSession.readBinaryId("id").asString());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadRevisionAsString(){
  Root root=mock(Root.class);
  AuthInfo authInfo=mock(AuthInfo.class);
  ContentSession session=mock(ContentSession.class);
  doReturn(authInfo).when(session).getAuthInfo();
  ContentRemoteRevisions revisions=mock(ContentRemoteRevisions.class);
  doReturn(root).when(revisions).get(authInfo,"id");
  assertEquals("id",createSession(session,revisions).readRevision("id").asString());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadLastRevisionAsString(){
  Root root=mock(Root.class);
  AuthInfo authInfo=mock(AuthInfo.class);
  ContentSession session=mock(ContentSession.class);
  doReturn(authInfo).when(session).getAuthInfo();
  doReturn(root).when(session).getLatestRoot();
  ContentRemoteRevisions revisions=mock(ContentRemoteRevisions.class);
  doReturn("id").when(revisions).put(authInfo,root);
  assertEquals("id",createSession(session,revisions).readLastRevision().asString());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadBinaryLength() throws Exception {
  Blob blob=mock(Blob.class);
  doReturn(42L).when(blob).length();
  ContentRemoteBinaryId binaryId=mock(ContentRemoteBinaryId.class);
  doReturn(blob).when(binaryId).asBlob();
  assertEquals(42L,createSession().readBinaryLength(binaryId));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteTreeTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiBinaryIdProperty(){
  Blob blob=mock(Blob.class);
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BINARIES).when(property).getType();
  doReturn(singletonList(blob)).when(property).getValue(Type.BINARIES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn("id").when(binaries).put(blob);
  Map<String,RemoteValue> properties=createTree(tree,binaries).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiBinaryId());
  assertEquals("id",getOnlyElement(properties.get("name").asMultiBinaryId()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReferenceProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.REFERENCE).when(property).getType();
  doReturn("value").when(property).getValue(Type.REFERENCE);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isReference());
  assertEquals("value",properties.get("name").asReference());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiBinaryProperty(){
  InputStream stream=mock(InputStream.class);
  Blob blob=mock(Blob.class);
  doReturn(stream).when(blob).getNewStream();
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BINARIES).when(property).getType();
  doReturn(singletonList(blob)).when(property).getValue(Type.BINARIES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public long getBinaryThreshold(){
      return Long.MAX_VALUE;
    }
  }
);
  Map<String,RemoteValue> properties=remoteTree.getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiBinary());
  assertEquals(stream,getOnlyElement(properties.get("name").asMultiBinary()).get());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiDecimalProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DECIMALS).when(property).getType();
  doReturn(singletonList(BigDecimal.ONE)).when(property).getValue(Type.DECIMALS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiDecimal());
  assertEquals(BigDecimal.ONE,getOnlyElement(properties.get("name").asMultiDecimal()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetBinaryIdProperty(){
  Blob blob=mock(Blob.class);
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BINARY).when(property).getType();
  doReturn(blob).when(property).getValue(Type.BINARY);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn("id").when(binaries).put(blob);
  Map<String,RemoteValue> properties=createTree(tree,binaries).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isBinaryId());
  assertEquals("id",properties.get("name").asBinaryId());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiDoubleProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DOUBLES).when(property).getType();
  doReturn(singletonList(4.2)).when(property).getValue(Type.DOUBLES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiDouble());
  assertEquals(4.2,getOnlyElement(properties.get("name").asMultiDouble()),1e-9);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetBooleanProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BOOLEAN).when(property).getType();
  doReturn(true).when(property).getValue(Type.BOOLEAN);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isBoolean());
  assertEquals(true,properties.get("name").asBoolean());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoubleProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DOUBLE).when(property).getType();
  doReturn(4.2).when(property).getValue(Type.DOUBLE);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isDouble());
  assertEquals(4.2,properties.get("name").asDouble(),1e-9);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiBooleanProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BOOLEANS).when(property).getType();
  doReturn(singletonList(true)).when(property).getValue(Type.BOOLEANS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiBoolean());
  assertEquals(true,getOnlyElement(properties.get("name").asMultiBoolean()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWeakReferenceProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.WEAKREFERENCE).when(property).getType();
  doReturn("value").when(property).getValue(Type.WEAKREFERENCE);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isWeakReference());
  assertEquals("value",properties.get("name").asWeakReference());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiTextProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.STRINGS).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.STRINGS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiText());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiText()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTextProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.STRING).when(property).getType();
  doReturn("value").when(property).getValue(Type.STRING);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isText());
  assertEquals("value",properties.get("name").asText());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetBinaryProperty(){
  InputStream stream=mock(InputStream.class);
  Blob blob=mock(Blob.class);
  doReturn(stream).when(blob).getNewStream();
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BINARY).when(property).getType();
  doReturn(blob).when(property).getValue(Type.BINARY);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public long getBinaryThreshold(){
      return Long.MAX_VALUE;
    }
  }
);
  Map<String,RemoteValue> properties=remoteTree.getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isBinary());
  assertEquals(stream,properties.get("name").asBinary().get());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiNameProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.NAMES).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.NAMES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiName());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiName()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiUriProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.URIS).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.URIS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiUri());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiUri()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLongProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.LONG).when(property).getType();
  doReturn(42L).when(property).getValue(Type.LONG);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isLong());
  assertEquals(42L,properties.get("name").asLong().longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiLongProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.LONGS).when(property).getType();
  doReturn(singletonList(42L)).when(property).getValue(Type.LONGS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiLong());
  assertEquals(42L,getOnlyElement(properties.get("name").asMultiLong()).longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPathProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.PATH).when(property).getType();
  doReturn("value").when(property).getValue(Type.PATH);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isPath());
  assertEquals("value",properties.get("name").asPath());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiPathProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.PATHS).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.PATHS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiPath());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiPath()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiReferenceProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.REFERENCES).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.REFERENCES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiReference());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiReference()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetDateProperty(){
  Calendar calendar=Calendar.getInstance();
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DATE).when(property).getType();
  doReturn(ISO8601.format(calendar)).when(property).getValue(Type.DATE);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isDate());
  assertEquals(calendar.getTimeInMillis(),properties.get("name").asDate().longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNameProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.NAME).when(property).getType();
  doReturn("value").when(property).getValue(Type.NAME);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isName());
  assertEquals("value",properties.get("name").asName());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecimalProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DECIMAL).when(property).getType();
  doReturn(BigDecimal.ONE).when(property).getValue(Type.DECIMAL);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isDecimal());
  assertEquals(BigDecimal.ONE,properties.get("name").asDecimal());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiWeakReferenceProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.WEAKREFERENCES).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.WEAKREFERENCES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiWeakReference());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiWeakReference()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUriProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.URI).when(property).getType();
  doReturn("value").when(property).getValue(Type.URI);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isUri());
  assertEquals("value",properties.get("name").asUri());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiDateProperty(){
  Calendar calendar=Calendar.getInstance();
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DATES).when(property).getType();
  doReturn(singletonList(ISO8601.format(calendar))).when(property).getValue(Type.DATES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiDate());
  assertEquals(calendar.getTimeInMillis(),getOnlyElement(properties.get("name").asMultiDate()).longValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.http.handler.RemoteServerIT </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddMultiDecimalProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiDecimalProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadTreeAtRevisionWithInvalidRevision() throws Exception {
  assertEquals(410,get(resource("/revisions/any/tree/node")).basicAuth("admin","admin").asJson().getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWithWithNodeFilters() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree foo=node.addChild("foo");
  foo.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree bar=node.addChild("bar");
  bar.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree baz=node.addChild("baz");
  baz.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").queryString("children","ba*").queryString("children","-baz").asJson();
  assertEquals(200,response.getStatus());
  JSONObject body=response.getBody().getObject();
  assertFalse(body.getJSONObject("children").has("foo"));
  assertTrue(body.getJSONObject("children").has("bar"));
  assertFalse(body.getJSONObject("children").has("baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("first","second"),Type.REFERENCES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("references",property.getString("type"));
  assertEquals("first",property.getJSONArray("value").getString(0));
  assertEquals("second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddMultiDoubleProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiDoubleProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadTreeAtRevision() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  String revision=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getHeaders().getFirst("oak-revision");
  HttpResponse<JsonNode> response=get(resource("/revisions/{revision}/tree/node")).basicAuth("admin","admin").routeParam("revision",revision).asJson();
  assertEquals(200,response.getStatus());
  assertEquals(revision,response.getHeaders().getFirst("oak-revision"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeUriProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","http://acme.org",Type.URI);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("uri",property.getString("type"));
  assertEquals("http://acme.org",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiWeakReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("first","second"),Type.WEAKREFERENCES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("weakReferences",property.getString("type"));
  assertEquals("first",property.getJSONArray("value").getString(0));
  assertEquals("second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWithWithPropertyFilters() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("foo","foo",Type.STRING);
  node.setProperty("bar","bar",Type.STRING);
  node.setProperty("baz","baz",Type.STRING);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").queryString("properties","ba*").queryString("properties","-baz").asJson();
  assertEquals(200,response.getStatus());
  JSONObject body=response.getBody().getObject();
  assertFalse(body.getJSONObject("properties").has("foo"));
  assertTrue(body.getJSONObject("properties").has("bar"));
  assertFalse(body.getJSONObject("properties").has("baz"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddMultiNameProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiNameProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddMultiStringProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiStringProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinaryRangeOffsetOnly() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes = 3").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*3\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("7",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("3456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=9").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*9\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("1",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("9",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddReferenceProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeReferenceProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddNameProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeNameProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiBooleanProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(true,false),Type.BOOLEANS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("booleans",property.getString("type"));
  assertEquals(true,property.getJSONArray("value").getBoolean(0));
  assertEquals(false,property.getJSONArray("value").getBoolean(1));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSearchLastRevisionWithoutAuthentication() throws Exception {
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree")).queryString("query","select name from nt:unstructured as node where jcr:path like '/test/%'").queryString("language","sql").queryString("offset",0).queryString("limit",10).asJson();
  assertEquals(401,response.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiLongProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(4L,2L),Type.LONGS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("longs",property.getString("type"));
  assertEquals(4L,property.getJSONArray("value").getLong(0));
  assertEquals(2L,property.getJSONArray("value").getLong(1));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddStringProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeStringProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinaryMultipleRanges() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0,-1 , 2-2, 3-6").asString();
  assertEquals(206,binaryResponse.getStatus());
  String contentType=binaryResponse.getHeaders().getFirst("content-type");
  assertNotNull(contentType);
  Pattern multipartDelimiterPattern=Pattern.compile("^\\s*multipart/byteranges;\\s*boundary=(.+)");
  Matcher matcher=multipartDelimiterPattern.matcher(contentType);
  assertTrue(matcher.matches());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevision() throws Exception {
  HttpResponse<JsonNode> response=get(resource("/revisions/last")).basicAuth("admin","admin").asJson();
  assertEquals(200,response.getStatus());
  JSONObject payload=response.getBody().getObject();
  assertNotNull(payload.getString("revision"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeNameProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","value",Type.NAME);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("name",property.getString("type"));
  assertEquals("value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadBinaryInvalidRanges() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","elephant=0-9").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","this is not correct").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","0").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0-1000").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=9-8").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0, -1, 10000").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddNodeBinaryProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeBinaryProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadBinaryWithoutAuthentication() throws Exception {
  HttpResponse<String> response=get(resource("/binaries/any")).asString();
  assertEquals(401,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddDecimalProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeDecimalProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddMultiReferenceProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiReferenceProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiDecimalProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(BigDecimal.ZERO,BigDecimal.ONE),Type.DECIMALS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("decimals",property.getString("type"));
  assertEquals("0",property.getJSONArray("value").getString(0));
  assertEquals("1",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiStringProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("a","b"),Type.STRINGS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("strings",property.getString("type"));
  assertEquals("a",property.getJSONArray("value").getString(0));
  assertEquals("b",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSearchLastRevisionWithoutOffset() throws Exception {
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree")).basicAuth("admin","admin").queryString("query","select name from nt:unstructured as node where jcr:path like '/test/%'").queryString("language","sql").queryString("limit",10).asJson();
  assertEquals(400,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddMultiUriProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiUriProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreePathProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","/value",Type.PATH);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("path",property.getString("type"));
  assertEquals("/value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadBinary() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("test")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).asString();
  assertEquals(200,binaryResponse.getStatus());
  assertEquals("test",binaryResponse.getBody());
  assertEquals("4",binaryResponse.getHeaders().getFirst("content-length"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddWeakReferenceProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeWeakReferenceProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWithDepth() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree child=node.addChild("child");
  child.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree grandChild=child.addChild("grandChild");
  grandChild.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").queryString("depth",1).asJson();
  assertEquals(200,response.getStatus());
  JSONObject body=response.getBody().getObject();
  assertFalse(body.getJSONObject("children").isNull("child"));
  assertTrue(body.getJSONObject("children").getJSONObject("child").getJSONObject("children").isNull("grandChild"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddNodeDateProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeDateProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeLongProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",42L,Type.LONG);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("long",property.getString("type"));
  assertEquals(42L,property.getLong("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeStringProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","a",Type.STRING);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("string",property.getString("type"));
  assertEquals("a",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeDecimalProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",BigDecimal.ZERO,Type.DECIMAL);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("decimal",property.getString("type"));
  assertEquals("0",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWeakReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","value",Type.WEAKREFERENCE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("weakReference",property.getString("type"));
  assertEquals("value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddUriProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeUriProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiNameProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("first","second"),Type.NAMES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("names",property.getString("type"));
  assertEquals("first",property.getJSONArray("value").getString(0));
  assertEquals("second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiDateProperty() throws Exception {
  Calendar calendar=Calendar.getInstance();
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(asString(calendar),asString(calendar)),Type.DATES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("dates",property.getString("type"));
  assertEquals(calendar.getTimeInMillis(),property.getJSONArray("value").getLong(0));
  assertEquals(calendar.getTimeInMillis(),property.getJSONArray("value").getLong(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiBinaryProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",root.createBlob(asStream("a")),Type.BINARY);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("binaryId",property.getString("type"));
  assertFalse(property.getString("value").isEmpty());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSearchLastRevisionWithoutQuery() throws Exception {
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree")).basicAuth("admin","admin").queryString("language","sql").queryString("offset",0).queryString("limit",10).asJson();
  assertEquals(400,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddNodeMultiBinaryProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiBinaryProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadLastRevisionWithoutAuthentication() throws Exception {
  assertEquals(401,get(resource("/revisions/last")).asJson().getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddMultiPathProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiPathProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeBinaryProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(root.createBlob(asStream("a")),root.createBlob(asStream("b"))),Type.BINARIES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("binaryIds",property.getString("type"));
  assertFalse(property.getJSONArray("value").getString(0).isEmpty());
  assertFalse(property.getJSONArray("value").getString(1).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiDoubleProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(4.2,2.4),Type.DOUBLES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("doubles",property.getString("type"));
  assertEquals(4.2,property.getJSONArray("value").getDouble(0),1e-10);
  assertEquals(2.4,property.getJSONArray("value").getDouble(1),1e-10);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","value",Type.REFERENCE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("reference",property.getString("type"));
  assertEquals("value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddMultiLongProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiLongProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSearchLastRevision() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree test=root.getTree("/").addChild("test");
  test.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree n1=test.addChild("one");
  n1.setProperty("name","one",Type.STRING);
  n1.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree n2=test.addChild("two");
  n2.setProperty("name","two",Type.STRING);
  n2.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree")).basicAuth("admin","admin").queryString("query","select name from nt:unstructured as node where jcr:path like '/test/%'").queryString("language","sql").queryString("offset",0).queryString("limit",10).asJson();
  assertEquals(200,response.getStatus());
  JSONObject results=response.getBody().getObject();
  assertNotNull(results.getLong("total"));
  List<String> columns=getStringArray(results,"columns");
  assertTrue(columns.contains("name"));
  assertTrue(columns.contains("jcr:path"));
  List<String> selectors=getStringArray(results,"selectors");
  assertTrue(selectors.contains("node"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExistsBinary() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=head(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).asString();
  assertEquals(200,binaryResponse.getStatus());
  assertEquals("bytes",binaryResponse.getHeaders().getFirst("accept-ranges"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateBinary() throws Exception {
  HttpResponse<JsonNode> response=post(resource("/binaries")).basicAuth("admin","admin").body("body").asJson();
  assertEquals(201,response.getStatus());
  String binaryId=response.getBody().getObject().getString("binaryId");
  assertFalse(binaryId.isEmpty());
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).asString();
  assertEquals(200,binaryResponse.getStatus());
  assertEquals("body",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSearchLastRevisionWithoutLanguage() throws Exception {
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree")).basicAuth("admin","admin").queryString("query","select name from nt:unstructured as node where jcr:path like '/test/%'").queryString("offset",0).queryString("limit",10).asJson();
  assertEquals(400,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadBinaryWithInvalidId() throws Exception {
  HttpResponse<String> response=get(resource("/binaries/any")).basicAuth("admin","admin").asString();
  assertEquals(404,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadLastRevisionTree() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  assertEquals(200,response.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeBooleanProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",true,Type.BOOLEAN);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("boolean",property.getString("type"));
  assertEquals(true,property.getBoolean("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiPathProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("/first","/second"),Type.PATHS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("paths",property.getString("type"));
  assertEquals("/first",property.getJSONArray("value").getString(0));
  assertEquals("/second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddMultiWeakReferenceProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiWeakReferenceProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSearchLastRevisionWithoutLimit() throws Exception {
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree")).basicAuth("admin","admin").queryString("query","select name from nt:unstructured as node where jcr:path like '/test/%'").queryString("language","sql").queryString("offset",0).asJson();
  assertEquals(400,response.getStatus());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinaryRangeSuffix() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=-10").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=-3").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*7\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("3",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=-1").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*9\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("1",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("9",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddNodeMultiBooleanProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiBooleanProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddNodeBooleanProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeBooleanProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCreateBinaryWithoutAuthentication() throws Exception {
  assertEquals(401,post(resource("/binaries")).body("body").asJson().getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddLongProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeLongProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiUriProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("http://acme.org","http://acme.com"),Type.URIS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("uris",property.getString("type"));
  assertEquals("http://acme.org",property.getJSONArray("value").getString(0));
  assertEquals("http://acme.com",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddDoubleProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeDoubleProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExistsBinaryWithoutAuthentication() throws Exception {
  HttpResponse<String> response=head(resource("/binaries/any")).asString();
  assertEquals(401,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddPathProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodePathProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExistsBinaryWithInvalidId() throws Exception {
  HttpResponse<String> response=head(resource("/binaries/any")).basicAuth("admin","admin").asString();
  assertEquals(404,response.getStatus());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadLastRevisionTreeWithNotExistingTree() throws Exception {
  assertEquals(404,get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getStatus());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinarySingleRange() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0-9").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0-").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=3- 6").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*3\\s*\\-\\s*6\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("4",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("3456",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes= 9 - 9").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*9\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("1",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("9",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeDateProperty() throws Exception {
  Calendar calendar=Calendar.getInstance();
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asString(calendar),Type.DATE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("date",property.getString("type"));
  assertEquals(calendar.getTimeInMillis(),property.getLong("value"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadLastRevisionTreeWithoutAuthentication() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).asJson();
  assertEquals(401,response.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeDoubleProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",4.2,Type.DOUBLE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("double",property.getString("type"));
  assertEquals(4.2,property.getDouble("value"),1e-10);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPatchLastRevisionAddNodeMultiDateProperty() throws Exception {
  HttpResponse<JsonNode> response=patch(resource("/revisions/last/tree")).basicAuth("admin","admin").body(load("addNodeMultiDateProperty.json")).asJson();
  assertEquals(201,response.getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.run.BasicServerTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testServerOk() throws Exception {
  URL server=new URL("http://localhost:" + getPort());
  HttpURLConnection conn=(HttpURLConnection)server.openConnection();
  conn.setRequestProperty("Authorization","Basic " + Base64.encode("admin:admin"));
  assertEquals(200,conn.getResponseCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.GuestDefaultLoginModuleTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGuestLogin() throws Exception {
  ContentSession cs=login(new GuestCredentials());
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    String anonymousID=UserUtil.getAnonymousId(getUserConfiguration().getParameters());
    assertEquals(anonymousID,authInfo.getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNullLogin() throws Exception {
  ContentSession cs=login(null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    String anonymousID=UserUtil.getAnonymousId(getUserConfiguration().getParameters());
    assertEquals(anonymousID,authInfo.getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.Jackrabbit2ConfigurationTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNullLogin() throws Exception {
  ContentSession cs=login(null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    String anonymousID=UserUtil.getAnonymousId(getUserConfiguration().getParameters());
    assertEquals(anonymousID,authInfo.getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.L2_AuthInfoTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserAuthInfo() throws LoginException, RepositoryException, CommitFailedException {
  testUser=createTestUser(userManager);
  root.commit();
  contentSession=login(ExerciseUtility.getTestCredentials(testUser.getID()));
  AuthInfo authInfo=contentSession.getAuthInfo();
  String expectedId=null;
  assertEquals(expectedId,authInfo.getUserID());
  Set<Principal> expectedPrincipals=null;
  assertEquals(expectedPrincipals,authInfo.getPrincipals());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserAuthInfoWithGroupMembership() throws LoginException, RepositoryException, CommitFailedException {
  testUser=createTestUser(userManager);
  testGroup=createTestGroup(userManager);
  testGroup.addMember(testUser);
  root.commit();
  contentSession=login(getTestCredentials(testUser.getID()));
  AuthInfo authInfo=contentSession.getAuthInfo();
  Set<Principal> expectedPrincipals=null;
  assertEquals(expectedPrincipals,authInfo.getPrincipals());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGuestAuthInfo() throws LoginException, NoSuchWorkspaceException {
  contentSession=login(new GuestCredentials());
  AuthInfo authInfo=contentSession.getAuthInfo();
  String expectedId=null;
  assertEquals(expectedId,authInfo.getUserID());
  Set<Principal> expectedPrincipals=null;
  assertEquals(expectedPrincipals,authInfo.getPrincipals());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.L6_AnonymousIdTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAnonymousID() throws RepositoryException, LoginException {
  testSession=login(new GuestCredentials());
  String anonymousID=testSession.getAuthInfo().getUserID();
  String expectedID=null;
  assertEquals(expectedID,anonymousID);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDifferentAnonymousID() throws Exception {
  testSession=login(new GuestCredentials());
  String expectedId=null;
  assertEquals(expectedId,testSession.getAuthInfo().getUserID());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.TokenDefaultLoginModuleTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTokenAuthInfo() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
    sc.setAttribute(".token","");
    cs=login(sc);
    assertEquals("userid must be correct","admin",cs.getAuthInfo().getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testValidTokenCredentials() throws Exception {
  Root root=adminSession.getLatestRoot();
  TokenConfiguration tc=getSecurityProvider().getConfiguration(TokenConfiguration.class);
  TokenProvider tp=tc.getTokenProvider(root);
  SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
  TokenInfo info=tp.createToken(sc.getUserID(),Collections.<String,Object>emptyMap());
  ContentSession cs=login(new TokenCredentials(info.getToken()));
  try {
    assertEquals(sc.getUserID(),cs.getAuthInfo().getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.DefaultLdapLoginModuleTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Login with {@link javax.jcr.GuestCredentials} must succeed and result in
 * an guest session as the SUFFICIENT{@link org.apache.jackrabbit.oak.spi.security.authentication.LoginModuleImpl}handles the guest login (in contrast to the ExternalLoginModule).
 * @throws Exception
 */
@Test public void testGuestLogin() throws Exception {
  ContentSession cs=login(new GuestCredentials());
  assertEquals(UserConstants.DEFAULT_ANONYMOUS_ID,cs.getAuthInfo().getUserID());
  cs.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.GuestTokenDefaultLdapLoginModuleTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Null login must succeed and result in an guest session as the OPTIONAL{@link GuestLoginModule} adds {@link javax.jcr.GuestCredentials} to the
 * shared state.
 * @throws Exception
 */
@Test public void testNullLogin() throws Exception {
  ContentSession cs=login(null);
  assertEquals(UserConstants.DEFAULT_ANONYMOUS_ID,cs.getAuthInfo().getUserID());
  cs.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.LdapDefaultLoginModuleTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Login with {@link javax.jcr.GuestCredentials} must succeed and result in
 * an guest session as the SUFFICIENT{@link org.apache.jackrabbit.oak.spi.security.authentication.LoginModuleImpl}handles the guest login (in contrast to the ExternalLoginModule).
 * @throws Exception
 */
@Test public void testGuestLogin() throws Exception {
  ContentSession cs=login(new GuestCredentials());
  assertEquals(UserConstants.DEFAULT_ANONYMOUS_ID,cs.getAuthInfo().getUserID());
  cs.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.LdapLoginTestBase </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReLogin() throws Exception {
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(USER_ID,USER_PWD.toCharArray()));
    root.refresh();
    Authorizable user=userManager.getAuthorizable(USER_ID);
    assertNotNull(user);
    assertFalse(root.getTree(user.getPath()).hasProperty(UserConstants.REP_PASSWORD));
    cs.close();
    cs=login(new SimpleCredentials(USER_ID,USER_PWD.toCharArray()));
    root.refresh();
    assertEquals(USER_ID,cs.getAuthInfo().getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLoginSetsAuthInfo() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PWD.toCharArray());
    sc.setAttribute("attr","val");
    cs=login(sc);
    AuthInfo ai=cs.getAuthInfo();
    assertEquals(USER_ID,ai.getUserID());
    assertEquals("val",ai.getAttribute("attr"));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrincipalsFromAuthInfo() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PWD.toCharArray());
    sc.setAttribute("attr","val");
    cs=login(sc);
    AuthInfo ai=cs.getAuthInfo();
    root.refresh();
    PrincipalProvider pp=getSecurityProvider().getConfiguration(PrincipalConfiguration.class).getPrincipalProvider(root,NamePathMapper.DEFAULT);
    Set<? extends Principal> expected=pp.getPrincipals(USER_ID);
    assertEquals(3,expected.size());
    assertEquals(expected,ai.getPrincipals());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.LdapProviderTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetUserByUserId() throws Exception {
  ExternalUser user=idp.getUser(TEST_USER1_UID);
  assertNotNull("User 1 must exist",user);
  assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateValidateTrueFalse() throws Exception {
  providerConfig.getAdminPoolConfig().setMaxActive(2).setLookupOnValidate(true);
  providerConfig.getUserPoolConfig().setMaxActive(2).setLookupOnValidate(false);
  idp.close();
  idp=new LdapIdentityProvider(providerConfig);
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID,"pass".toCharArray());
  for (int i=0; i < 8; i++) {
    ExternalUser user=idp.authenticate(creds);
    assertNotNull("User 1 must authenticate (i=" + i + ")",user);
    assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
  }
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateValidateTrueTrue() throws Exception {
  providerConfig.getAdminPoolConfig().setMaxActive(2).setLookupOnValidate(true);
  providerConfig.getUserPoolConfig().setMaxActive(2).setLookupOnValidate(true);
  idp.close();
  idp=new LdapIdentityProvider(providerConfig);
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID,"pass".toCharArray());
  for (int i=0; i < 8; i++) {
    ExternalUser user=idp.authenticate(creds);
    assertNotNull("User 1 must authenticate (i=" + i + ")",user);
    assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateCaseInsensitive() throws Exception {
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID.toUpperCase(),"pass".toCharArray());
  ExternalUser user=idp.authenticate(creds);
  assertNotNull("User 1 must authenticate",user);
  assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateValidateFalseTrue() throws Exception {
  providerConfig.getAdminPoolConfig().setMaxActive(2).setLookupOnValidate(false);
  providerConfig.getUserPoolConfig().setMaxActive(2).setLookupOnValidate(true);
  idp.close();
  idp=new LdapIdentityProvider(providerConfig);
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID,"pass".toCharArray());
  for (int i=0; i < 8; i++) {
    ExternalUser user=idp.authenticate(creds);
    assertNotNull("User 1 must authenticate",user);
    assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplitDNIntermediatePath2() throws Exception {
  providerConfig.getUserConfig().setMakeDnPath(true);
  ExternalUser user=idp.getUser(TEST_USER5_UID);
  assertNotNull("User 5 must exist",user);
  assertEquals("Intermediate path must be the split dn",TEST_USER5_PATH,user.getIntermediatePath());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticate() throws Exception {
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID,"pass".toCharArray());
  ExternalUser user=idp.authenticate(creds);
  assertNotNull("User 1 must authenticate",user);
  assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateValidateFalseFalse() throws Exception {
  providerConfig.getAdminPoolConfig().setMaxActive(2).setLookupOnValidate(false);
  providerConfig.getUserPoolConfig().setMaxActive(2).setLookupOnValidate(false);
  idp.close();
  idp=new LdapIdentityProvider(providerConfig);
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID,"pass".toCharArray());
  for (int i=0; i < 8; i++) {
    ExternalUser user=idp.authenticate(creds);
    assertNotNull("User 1 must authenticate",user);
    assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetUserByRef() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_USER1_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("User instance",id instanceof ExternalUser);
  assertEquals("User ID",TEST_USER1_UID,id.getId());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetGroupByName() throws Exception {
  ExternalGroup group=idp.getGroup(TEST_GROUP1_NAME);
  assertNotNull("Group 1 must exist",group);
  assertEquals("Group Ref",TEST_GROUP1_DN,group.getExternalId().getId());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplitDNIntermediatePath() throws Exception {
  providerConfig.getUserConfig().setMakeDnPath(true);
  ExternalUser user=idp.getUser(TEST_USER1_UID);
  assertNotNull("User 1 must exist",user);
  assertEquals("Intermediate path must be the split dn",TEST_USER1_PATH,user.getIntermediatePath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetGroupByRef() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_GROUP1_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("Group instance",id instanceof ExternalGroup);
  assertEquals("Group Name",TEST_GROUP1_NAME,id.getId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.CompositeTokenConfigurationTest </h4><pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetDefault(){
  TokenConfigurationImpl tc=new TokenConfigurationImpl(getSecurityProvider());
  setDefault(tc);
  List<TokenConfiguration> configs=getConfigurations();
  assertNotNull(configs);
  assertEquals(1,configs.size());
  addConfiguration(tc);
  configs=getConfigurations();
  assertNotNull(configs);
  assertEquals(1,configs.size());
  addConfiguration(new TokenConfigurationImpl(getSecurityProvider()));
  configs=getConfigurations();
  assertNotNull(configs);
  assertEquals(2,configs.size());
}

</code></pre>

<br>
<pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddConfiguration(){
  TokenConfigurationImpl tc=new TokenConfigurationImpl(getSecurityProvider());
  addConfiguration(tc);
  List<TokenConfiguration> configs=getConfigurations();
  assertNotNull(configs);
  assertEquals(1,configs.size());
  addConfiguration(tc);
  configs=getConfigurations();
  assertNotNull(configs);
  assertEquals(2,configs.size());
  addConfiguration(new TokenConfigurationImpl(getSecurityProvider()));
  configs=getConfigurations();
  assertNotNull(configs);
  assertEquals(3,configs.size());
}

</code></pre>

<br>
<pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveConfiguration(){
  TokenConfiguration tc=new TokenConfigurationImpl(getSecurityProvider());
  addConfiguration(tc);
  List<TokenConfiguration> configs=getConfigurations();
  assertNotNull(configs);
  assertEquals(1,configs.size());
  removeConfiguration(tc);
  configs=getConfigurations();
  assertNotNull(configs);
  assertEquals(0,configs.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenAuthenticationTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetTokenInfoAfterAuthenticate() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  authentication.authenticate(new TokenCredentials(info.getToken()));
  TokenInfo info2=authentication.getTokenInfo();
  assertNotNull(info2);
  assertEquals(info.getUserId(),info2.getUserId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenConfigurationImplTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConfigOptions(){
  int exp=tc.getParameters().getConfigValue(TokenProvider.PARAM_TOKEN_EXPIRATION,DEFAULT_EXPIRATION);
  assertEquals(60,exp);
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConfigOptions2(){
  int exp=getConfig(TokenConfiguration.class).getParameters().getConfigValue(TokenProvider.PARAM_TOKEN_EXPIRATION,DEFAULT_EXPIRATION);
  assertEquals(60,exp);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenInfoTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAttributes(){
  Map<String,String> reserved=new HashMap<String,String>();
  reserved.put(TOKEN_ATTRIBUTE,"value");
  reserved.put(TOKEN_ATTRIBUTE_KEY,"value");
  reserved.put(TOKEN_ATTRIBUTE_EXPIRY,"value");
  Map<String,String> privateAttributes=new HashMap<String,String>();
  privateAttributes.put(".token_exp","value");
  privateAttributes.put(".tokenTest","value");
  privateAttributes.put(".token_something","value");
  Map<String,String> publicAttributes=new HashMap<String,String>();
  publicAttributes.put("any","value");
  publicAttributes.put("another","value");
  Map<String,String> attributes=new HashMap<String,String>();
  attributes.putAll(reserved);
  attributes.putAll(publicAttributes);
  attributes.putAll(privateAttributes);
  TokenInfo info=tokenProvider.createToken(userId,attributes);
  Map<String,String> pubAttr=info.getPublicAttributes();
  assertEquals("public attributes",publicAttributes.size(),pubAttr.size());
  for (  String key : publicAttributes.keySet()) {
    assertTrue("public attribute " + key + " not contained",pubAttr.containsKey(key));
    assertEquals("public attribute " + key,publicAttributes.get(key),pubAttr.get(key));
  }
  Map<String,String> privAttr=info.getPrivateAttributes();
  assertEquals("private attributes",privateAttributes.size(),privAttr.size());
  for (  String key : privateAttributes.keySet()) {
    assertTrue("private attribute " + key + " not contained",privAttr.containsKey(key));
    assertEquals("private attribute" + key,privateAttributes.get(key),privAttr.get(key));
  }
  for (  String key : reserved.keySet()) {
    assertFalse("reserved attribute " + key,privAttr.containsKey(key));
    assertFalse("reserved attribute " + key,pubAttr.containsKey(key));
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetUserId(){
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertEquals(userId,info.getUserId());
  info=tokenProvider.getTokenInfo(info.getToken());
  assertEquals(userId,info.getUserId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenLoginModuleTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testValidTokenCredentials() throws Exception {
  Root root=adminSession.getLatestRoot();
  TokenConfiguration tokenConfig=getSecurityProvider().getConfiguration(TokenConfiguration.class);
  TokenProvider tp=tokenConfig.getTokenProvider(root);
  SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
  TokenInfo info=tp.createToken(sc.getUserID(),Collections.<String,Object>emptyMap());
  ContentSession cs=login(new TokenCredentials(info.getToken()));
  try {
    assertEquals(sc.getUserID(),cs.getAuthInfo().getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenProviderImplTest </h4><pre class="type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTokenNode() throws Exception {
  Map<String,String> reserved=new HashMap<String,String>();
  reserved.put(TOKEN_ATTRIBUTE,"value");
  reserved.put(TOKEN_ATTRIBUTE_KEY,"value");
  reserved.put(TOKEN_ATTRIBUTE_EXPIRY,"value");
  Map<String,String> privateAttributes=new HashMap<String,String>();
  privateAttributes.put(".token_exp","value");
  privateAttributes.put(".tokenTest","value");
  privateAttributes.put(".token_something","value");
  Map<String,String> publicAttributes=new HashMap<String,String>();
  publicAttributes.put("any","value");
  publicAttributes.put("another","value");
  Map<String,String> attributes=new HashMap<String,String>();
  attributes.putAll(reserved);
  attributes.putAll(publicAttributes);
  attributes.putAll(privateAttributes);
  TokenInfo info=tokenProvider.createToken(userId,attributes);
  Tree tokenTree=getTokenTree(info);
  PropertyState prop=tokenTree.getProperty(TOKEN_ATTRIBUTE_KEY);
  assertNotNull(prop);
  assertEquals(Type.STRING,prop.getType());
  prop=tokenTree.getProperty(TOKEN_ATTRIBUTE_EXPIRY);
  assertNotNull(prop);
  assertEquals(Type.DATE,prop.getType());
  for (  String key : reserved.keySet()) {
    PropertyState p=tokenTree.getProperty(key);
    if (p != null) {
      assertFalse(reserved.get(key).equals(p.getValue(Type.STRING)));
    }
  }
  for (  String key : privateAttributes.keySet()) {
    assertEquals(privateAttributes.get(key),tokenTree.getProperty(key).getValue(Type.STRING));
  }
  for (  String key : publicAttributes.keySet()) {
    assertEquals(publicAttributes.get(key),tokenTree.getProperty(key).getValue(Type.STRING));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateTokenWithExpirationParam() throws Exception {
  SimpleCredentials sc=new SimpleCredentials(userId,new char[0]);
  sc.setAttribute(TokenProvider.PARAM_TOKEN_EXPIRATION,100000);
  TokenInfo info=tokenProvider.createToken(sc);
  assertTokenInfo(info,userId);
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenTree);
  assertTrue(tokenTree.exists());
  assertTrue(tokenTree.hasProperty(TokenProvider.PARAM_TOKEN_EXPIRATION));
  assertEquals(100000,tokenTree.getProperty(TokenProvider.PARAM_TOKEN_EXPIRATION).getValue(Type.LONG).longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-1985">OAK-1985</a>
 */
@Test public void testTokenValidationIsCaseInsensitive() throws Exception {
  Root root=adminSession.getLatestRoot();
  TokenConfiguration tokenConfig=getSecurityProvider().getConfiguration(TokenConfiguration.class);
  TokenProvider tp=tokenConfig.getTokenProvider(root);
  String userId=((SimpleCredentials)getAdminCredentials()).getUserID();
  TokenInfo info=tp.createToken(userId.toUpperCase(),Collections.<String,Object>emptyMap());
  assertTrue(info.matches(new TokenCredentials(info.getToken())));
  assertEquals(userId,info.getUserId());
  info=tp.getTokenInfo(info.getToken());
  assertTrue(info.matches(new TokenCredentials(info.getToken())));
  assertEquals(userId,info.getUserId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenValidatorTest </h4><pre class="type-9 type-5 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManuallyCreateToken() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenProvider.getTokenInfo(info.getToken()));
  NodeUtil tokensNode=new NodeUtil(tokenTree.getParent());
  try {
    createTokenTree(info,tokensNode,TOKEN_NT_NAME);
    tokenTree.remove();
    root.commit();
    fail("Manually creating a token node must fail.");
  }
 catch (  CommitFailedException e) {
    assertEquals(63,e.getCode());
  }
 finally {
    root.refresh();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateReservedKeyProperty2() throws Exception {
  NodeUtil node=new NodeUtil(root.getTree("/")).addChild("testNode",JcrConstants.NT_UNSTRUCTURED);
  try {
    node.setString(TOKEN_ATTRIBUTE_KEY,"anyValue");
    root.commit();
    fail("The reserved token key property must only be created by the TokenProvider.");
  }
 catch (  CommitFailedException e) {
    assertEquals(63,e.getCode());
  }
 finally {
    node.getTree().remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangingTokenKey() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  NodeUtil tokenTree=new NodeUtil(getTokenTree(info));
  try {
    tokenTree.setString(TOKEN_ATTRIBUTE_KEY,PasswordUtil.buildPasswordHash("anotherValue"));
    root.commit(CommitMarker.asCommitAttributes());
    fail("The token key must never be modified.");
  }
 catch (  CommitFailedException e) {
    assertEquals(61,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateTokenWithInvalidNodeType() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenProvider.getTokenInfo(info.getToken()));
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil node=new NodeUtil(userTree.getChild(TOKENS_NODE_NAME));
  Tree t=null;
  try {
    t=createTokenTree(info,node,JcrConstants.NT_UNSTRUCTURED);
    tokenTree.remove();
    root.commit(CommitMarker.asCommitAttributes());
    fail("The token node must be of type rep:Token.");
  }
 catch (  CommitFailedException e) {
    assertEquals(60,e.getCode());
  }
 finally {
    if (t != null) {
      t.remove();
      root.commit(CommitMarker.asCommitAttributes());
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTokensNodeAtInvalidPathBelowUser() throws Exception {
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil userNode=new NodeUtil(userTree);
  NodeUtil n=null;
  try {
    n=userNode.addChild("test",JcrConstants.NT_UNSTRUCTURED);
    n.addChild(TOKENS_NODE_NAME,TOKENS_NT_NAME);
    root.commit();
    fail("The token parent node must be located below the user home node.");
  }
 catch (  CommitFailedException e) {
    assertEquals(68,e.getCode());
  }
 finally {
    if (n != null) {
      n.getTree().remove();
      root.commit(CommitMarker.asCommitAttributes());
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTokensNodeBelowRoot() throws Exception {
  NodeUtil rootNode=new NodeUtil(root.getTree("/"));
  NodeUtil n=null;
  try {
    n=rootNode.addChild(TOKENS_NODE_NAME,TOKENS_NT_NAME);
    root.commit();
    fail("The token parent node must be located below the configured user root.");
  }
 catch (  CommitFailedException e) {
    assertEquals(64,e.getCode());
  }
 finally {
    if (n != null) {
      n.getTree().remove();
      root.commit(CommitMarker.asCommitAttributes());
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeTokenParentPrimaryType() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  try {
    Tree tokensTree=getTokenTree(info).getParent();
    tokensTree.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
    root.commit();
    fail("The primary type of the token parent must not be changed from rep:Unstructured to another type.");
  }
 catch (  CommitFailedException e) {
    assertEquals(69,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateTokenAtInvalidLocationBelowTestNode() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenProvider.getTokenInfo(info.getToken()));
  NodeUtil node=new NodeUtil(root.getTree("/")).addChild("testNode",JcrConstants.NT_UNSTRUCTURED);
  try {
    createTokenTree(info,node,TOKEN_NT_NAME);
    tokenTree.remove();
    root.commit(CommitMarker.asCommitAttributes());
    fail("Creating a new token not  at '/testNode' must fail.");
  }
 catch (  CommitFailedException e) {
    assertEquals(64,e.getCode());
  }
 finally {
    node.getTree().remove();
    root.commit(CommitMarker.asCommitAttributes());
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidTokenParentNode() throws Exception {
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil node=new NodeUtil(userTree).addChild("testNode",JcrConstants.NT_UNSTRUCTURED);
  try {
    node.addChild(TOKENS_NODE_NAME,JcrConstants.NT_UNSTRUCTURED);
    root.commit(CommitMarker.asCommitAttributes());
    fail("Creating a new token '" + node.getTree().getPath() + "' must fail.");
  }
 catch (  CommitFailedException e) {
    assertEquals(68,e.getCode());
  }
 finally {
    node.getTree().remove();
    root.commit(CommitMarker.asCommitAttributes());
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateTokenAtInvalidLocationInsideUser2() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenProvider.getTokenInfo(info.getToken()));
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil node=new NodeUtil(userTree).getOrAddChild(TOKENS_NODE_NAME,TOKENS_NT_NAME);
  try {
    node=node.addChild("invalid",JcrConstants.NT_UNSTRUCTURED);
    createTokenTree(info,node,TOKEN_NT_NAME);
    tokenTree.remove();
    root.commit(CommitMarker.asCommitAttributes());
    fail("Creating a new token '" + node.getTree().getPath() + "' must fail.");
  }
 catch (  CommitFailedException e) {
    assertEquals(65,e.getCode());
  }
 finally {
    node.getTree().remove();
    root.commit(CommitMarker.asCommitAttributes());
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateReservedKeyProperty() throws Exception {
  NodeUtil node=new NodeUtil(root.getTree("/")).addChild("testNode",JcrConstants.NT_UNSTRUCTURED);
  try {
    node.setString(TOKEN_ATTRIBUTE_KEY,"anyValue");
    root.commit(CommitMarker.asCommitAttributes());
    fail("The reserved token key property must not used with other node types.");
  }
 catch (  CommitFailedException e) {
    assertEquals(60,e.getCode());
  }
 finally {
    node.getTree().remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPlaintextTokenKey() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  NodeUtil tokenTree=new NodeUtil(getTokenTree(info));
  try {
    tokenTree.setString(TOKEN_ATTRIBUTE_KEY,"anotherValue");
    root.commit(CommitMarker.asCommitAttributes());
    fail("The token key must not be plaintext.");
  }
 catch (  CommitFailedException e) {
    assertEquals(66,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManuallyModifyExpirationDate() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  NodeUtil tokenTree=new NodeUtil(getTokenTree(info));
  try {
    tokenTree.setDate(TOKEN_ATTRIBUTE_EXPIRY,new Date().getTime());
    root.commit();
    fail("The token expiry must not manually be changed");
  }
 catch (  CommitFailedException e) {
    assertEquals(63,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateTokenAtInvalidLocationInsideUser() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenProvider.getTokenInfo(info.getToken()));
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil node=new NodeUtil(userTree).addChild("testNode",JcrConstants.NT_UNSTRUCTURED);
  try {
    createTokenTree(info,node,TOKEN_NT_NAME);
    tokenTree.remove();
    root.commit(CommitMarker.asCommitAttributes());
    fail("Creating a new token '" + node.getTree().getPath() + "' must fail.");
  }
 catch (  CommitFailedException e) {
    assertEquals(65,e.getCode());
  }
 finally {
    node.getTree().remove();
    root.commit(CommitMarker.asCommitAttributes());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.user.LoginModuleImplTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImpersonationWithAttributes() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PW.toCharArray());
    cs=login(sc);
    AuthInfo authInfo=cs.getAuthInfo();
    cs.close();
    cs=null;
    sc=new SimpleCredentials(USER_ID,new char[0]);
    sc.setAttribute("attr","value");
    ImpersonationCredentials ic=new ImpersonationCredentials(sc,authInfo);
    cs=login(ic);
    authInfo=cs.getAuthInfo();
    assertTrue(Arrays.asList(authInfo.getAttributeNames()).contains("attr"));
    assertEquals("value",authInfo.getAttribute("attr"));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSelfImpersonation() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PW.toCharArray());
    cs=login(sc);
    AuthInfo authInfo=cs.getAuthInfo();
    assertEquals(USER_ID,authInfo.getUserID());
    cs.close();
    sc=new SimpleCredentials(USER_ID,new char[0]);
    ImpersonationCredentials ic=new ImpersonationCredentials(sc,authInfo);
    cs=login(ic);
    authInfo=cs.getAuthInfo();
    assertEquals(USER_ID,authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserLoginIsCaseInsensitive2() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    cs=login(new SimpleCredentials(USER_ID_CASED,USER_PW.toCharArray()));
    AuthInfo authInfo=cs.getAuthInfo();
    assertEquals(USER_ID_CASED,authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGuestLogin() throws Exception {
  ContentSession cs=login(new GuestCredentials());
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    String anonymousID=UserUtil.getAnonymousId(getUserConfiguration().getParameters());
    assertEquals(anonymousID,authInfo.getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidImpersonation() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PW.toCharArray());
    cs=login(sc);
    AuthInfo authInfo=cs.getAuthInfo();
    assertEquals(USER_ID,authInfo.getUserID());
    cs.close();
    cs=null;
    ConfigurationParameters config=securityProvider.getConfiguration(UserConfiguration.class).getParameters();
    String adminId=UserUtil.getAdminId(config);
    sc=new SimpleCredentials(adminId,new char[0]);
    ImpersonationCredentials ic=new ImpersonationCredentials(sc,authInfo);
    try {
      cs=login(ic);
      fail("User 'test' should not be allowed to impersonate " + adminId);
    }
 catch (    LoginException e) {
    }
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoginWithAttributes() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PW.toCharArray());
    sc.setAttribute("attr","value");
    cs=login(sc);
    AuthInfo authInfo=cs.getAuthInfo();
    assertTrue(Arrays.asList(authInfo.getAttributeNames()).contains("attr"));
    assertEquals("value",authInfo.getAttribute("attr"));
    cs.close();
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserLogin() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    cs=login(new SimpleCredentials(USER_ID,USER_PW.toCharArray()));
    AuthInfo authInfo=cs.getAuthInfo();
    assertEquals(USER_ID,authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.ACLTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllowWriteDenyRemoveGroupEntries() throws Exception {
  Principal everyone=principalManager.getEveryone();
  Privilege[] grPriv=privilegesFromNames(REP_WRITE);
  Privilege[] dePriv=privilegesFromNames(JCR_REMOVE_CHILD_NODES);
  acl.addEntry(everyone,grPriv,true,Collections.<String,Value>emptyMap());
  acl.addEntry(everyone,dePriv,false,Collections.<String,Value>emptyMap());
  Set<Privilege> allows=new HashSet<Privilege>();
  Set<Privilege> denies=new HashSet<Privilege>();
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  for (  AccessControlEntry en : entries) {
    if (everyone.equals(en.getPrincipal()) && en instanceof JackrabbitAccessControlEntry) {
      JackrabbitAccessControlEntry ace=(JackrabbitAccessControlEntry)en;
      Privilege[] privs=ace.getPrivileges();
      if (ace.isAllow()) {
        allows.addAll(Arrays.asList(privs));
      }
 else {
        denies.addAll(Arrays.asList(privs));
      }
    }
  }
  Privilege[] expected=privilegesFromNames(JCR_ADD_CHILD_NODES,JCR_REMOVE_NODE,JCR_MODIFY_PROPERTIES,JCR_NODE_TYPE_MANAGEMENT);
  assertEquals(expected.length,allows.size());
  assertEquals(ImmutableSet.copyOf(expected),allows);
  assertEquals(1,denies.size());
  assertArrayEquals(privilegesFromNames(JCR_REMOVE_CHILD_NODES),denies.toArray(new Privilege[denies.size()]));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReorder() throws Exception {
  Privilege[] read=privilegesFromNames(JCR_READ,JCR_READ_ACCESS_CONTROL);
  Privilege[] write=privilegesFromNames(JCR_WRITE);
  AbstractAccessControlList acl=createEmptyACL();
  acl.addAccessControlEntry(testPrincipal,read);
  acl.addEntry(testPrincipal,write,false);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),write);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(3,entries.length);
  AccessControlEntry first=entries[0];
  AccessControlEntry second=entries[1];
  AccessControlEntry third=entries[2];
  acl.orderBefore(second,first);
  assertEquals(second,acl.getEntries().get(0));
  assertEquals(first,acl.getEntries().get(1));
  assertEquals(third,acl.getEntries().get(2));
  acl.orderBefore(third,first);
  assertEquals(second,acl.getEntries().get(0));
  assertEquals(third,acl.getEntries().get(1));
  assertEquals(first,acl.getEntries().get(2));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComplementaryEntry3() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  acl.addAccessControlEntry(testPrincipal,privilegesFromNames(JCR_WRITE));
  acl.addEntry(testPrincipal,readPriv,false);
  acl.addAccessControlEntry(testPrincipal,readPriv);
  List<? extends JackrabbitAccessControlEntry> entries=acl.getEntries();
  assertEquals(1,entries.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComplementaryGroupEntry() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Principal everyone=principalManager.getEveryone();
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(everyone,readPriv,true);
  acl.addEntry(testPrincipal,writePriv,false);
  acl.addEntry(everyone,writePriv,true);
  acl.addEntry(testPrincipal,readPriv,false);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(2,entries.length);
  JackrabbitAccessControlEntry first=(JackrabbitAccessControlEntry)entries[0];
  assertEquals(everyone,first.getPrincipal());
  JackrabbitAccessControlEntry second=(JackrabbitAccessControlEntry)entries[1];
  assertEquals(testPrincipal,second.getPrincipal());
  assertACE(second,false,privilegesFromNames(JCR_READ,JCR_WRITE));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetEntryForGroupPrincipal() throws Exception {
  Privilege[] privs=privilegesFromNames(JCR_READ);
  Group grPrincipal=(Group)principalManager.getEveryone();
  assertTrue(acl.addAccessControlEntry(grPrincipal,privs));
  assertTrue(acl.addEntry(grPrincipal,privs,false));
  assertEquals(1,acl.size());
  assertFalse(acl.getEntries().get(0).isAllow());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddEntriesWithCustomPrincipal() throws Exception {
  Principal oakPrincipal=new PrincipalImpl("anonymous");
  Principal principal=new Principal(){
    @Override public String getName(){
      return "anonymous";
    }
  }
;
  assertTrue(acl.addAccessControlEntry(oakPrincipal,privilegesFromNames(JCR_READ)));
  assertTrue(acl.addAccessControlEntry(principal,privilegesFromNames(JCR_READ_ACCESS_CONTROL)));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(principal,privilegesFromNames(JCR_READ),false));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertArrayEquals(privilegesFromNames(JCR_READ_ACCESS_CONTROL),acl.getAccessControlEntries()[0].getPrivileges());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUpdateGroupEntry() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Principal everyone=principalManager.getEveryone();
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(everyone,readPriv,true);
  acl.addEntry(testPrincipal,writePriv,false);
  acl.addEntry(everyone,writePriv,true);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(3,entries.length);
  JackrabbitAccessControlEntry princ2AllowEntry=(JackrabbitAccessControlEntry)entries[1];
  assertEquals(everyone,princ2AllowEntry.getPrincipal());
  assertACE(princ2AllowEntry,true,privilegesFromNames(JCR_READ,JCR_WRITE));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiplePrincipals() throws Exception {
  Principal everyone=principalManager.getEveryone();
  Privilege[] privs=privilegesFromNames(JCR_READ);
  acl.addAccessControlEntry(testPrincipal,privs);
  assertFalse(acl.addAccessControlEntry(testPrincipal,privs));
  assertTrue(acl.addAccessControlEntry(everyone,privs));
  assertTrue(acl.getAccessControlEntries().length == 2);
  assertEquals(everyone,acl.getAccessControlEntries()[1].getPrincipal());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMvRestrictions() throws Exception {
  ValueFactory vf=getValueFactory();
  Value[] vs=new Value[]{vf.createValue(JcrConstants.NT_FILE,PropertyType.NAME),vf.createValue(JcrConstants.NT_FOLDER,PropertyType.NAME)};
  Map<String,Value[]> mvRestrictions=Collections.singletonMap(REP_NT_NAMES,vs);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,vf.createValue("/.*"));
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,false,restrictions,mvRestrictions));
  assertFalse(acl.addEntry(testPrincipal,testPrivileges,false,restrictions,mvRestrictions));
  assertEquals(1,acl.getAccessControlEntries().length);
  JackrabbitAccessControlEntry ace=(JackrabbitAccessControlEntry)acl.getAccessControlEntries()[0];
  try {
    ace.getRestriction(REP_NT_NAMES);
    fail();
  }
 catch (  ValueFormatException e) {
  }
  Value[] vvs=ace.getRestrictions(REP_NT_NAMES);
  assertArrayEquals(vs,vvs);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComplementaryEntry() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ);
  acl.addEntry(testPrincipal,privileges,true);
  assertTrue(acl.addEntry(testPrincipal,privileges,false));
  assertEquals(1,acl.size());
  assertACE(acl.getEntries().get(0),false,privileges);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNewEntriesAppendedAtEnd() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(principalManager.getEveryone(),readPriv,true);
  acl.addEntry(testPrincipal,writePriv,false);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(3,entries.length);
  JackrabbitAccessControlEntry last=(JackrabbitAccessControlEntry)entries[2];
  assertEquals(testPrincipal,last.getPrincipal());
  assertACE(last,false,writePriv);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReorderToTheEnd() throws Exception {
  Privilege[] read=privilegesFromNames(JCR_READ,JCR_READ_ACCESS_CONTROL);
  Privilege[] write=privilegesFromNames(JCR_WRITE);
  AbstractAccessControlList acl=createEmptyACL();
  acl.addAccessControlEntry(testPrincipal,read);
  acl.addEntry(testPrincipal,write,false);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),write);
  List<? extends JackrabbitAccessControlEntry> entries=acl.getEntries();
  assertEquals(3,entries.size());
  AccessControlEntry first=entries.get(0);
  acl.orderBefore(first,null);
  List<? extends JackrabbitAccessControlEntry> entriesAfter=acl.getEntries();
  assertEquals(first,entriesAfter.get(2));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateAndComplementary() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Privilege[] acReadPriv=privilegesFromNames(JCR_READ_ACCESS_CONTROL);
  assertTrue(acl.addEntry(testPrincipal,readPriv,true));
  assertTrue(acl.addEntry(testPrincipal,writePriv,true));
  assertTrue(acl.addEntry(testPrincipal,acReadPriv,true));
  assertEquals(1,acl.size());
  assertTrue(acl.addEntry(testPrincipal,readPriv,false));
  assertEquals(2,acl.size());
  assertACE(acl.getEntries().get(0),true,privilegesFromNames(JCR_WRITE,JCR_READ_ACCESS_CONTROL));
  assertACE(acl.getEntries().get(1),false,readPriv);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestrictions() throws Exception {
  String[] names=acl.getRestrictionNames();
  assertNotNull(names);
  assertEquals(4,names.length);
  assertArrayEquals(new String[]{REP_GLOB,REP_NT_NAMES,REP_PREFIXES,REP_ITEM_NAMES},names);
  assertEquals(PropertyType.STRING,acl.getRestrictionType(names[0]));
  assertEquals(PropertyType.NAME,acl.getRestrictionType(names[1]));
  assertEquals(PropertyType.STRING,acl.getRestrictionType(names[2]));
  assertEquals(PropertyType.NAME,acl.getRestrictionType(names[3]));
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  assertTrue(acl.addAccessControlEntry(testPrincipal,writePriv));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertFalse(acl.addAccessControlEntry(testPrincipal,writePriv));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertFalse(acl.addEntry(testPrincipal,writePriv,true));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(testPrincipal,writePriv,false));
  assertEquals(1,acl.getAccessControlEntries().length);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,getValueFactory().createValue("/.*"));
  assertTrue(acl.addEntry(testPrincipal,writePriv,false,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertFalse(acl.addEntry(testPrincipal,writePriv,false,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(testPrincipal,writePriv,true,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.AccessControlManagerImplTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEffectiveModifiedPolicy() throws Exception {
  ACL acl=setupPolicy(testPath);
  AccessControlEntry[] aces=acl.getAccessControlEntries();
  root.commit();
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT));
  acMgr.setPolicy(testPath,acl);
  AccessControlPolicy[] policies=acMgr.getEffectivePolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] effectiveAces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertArrayEquals(aces,effectiveAces);
  assertFalse(Arrays.equals(effectiveAces,acl.getAccessControlEntries()));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedPrivileges() throws Exception {
  List<Privilege> allPrivileges=Arrays.asList(getPrivilegeManager(root).getRegisteredPrivileges());
  List<String> testPaths=new ArrayList<String>();
  testPaths.add(null);
  testPaths.add("/");
  testPaths.add("/jcr:system");
  testPaths.add(testPath);
  for (  String path : testPaths) {
    Privilege[] supported=acMgr.getSupportedPrivileges(path);
    assertNotNull(supported);
    assertEquals(allPrivileges.size(),supported.length);
    assertTrue(allPrivileges.containsAll(Arrays.asList(supported)));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesNodeNotAccessControlled() throws Exception {
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 Policy at testPath not accessible -> getEffectivePolicies
 * only returns the readable policy but doesn't fail.
 */
@Test public void testTestSessionGetEffectivePoliciesByPrincipal2() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  setupPolicy(testPath,privilegesFromNames(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  setupPolicy(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(Collections.singleton(getTestPrincipal()));
  assertNotNull(effective);
  assertEquals(1,effective.length);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetRepoPolicy() throws Exception {
  ACL acl=getApplicablePolicy(null);
  acl.addAccessControlEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT));
  acMgr.setPolicy(null,acl);
  root.commit();
  Root root2=adminSession.getLatestRoot();
  AccessControlPolicy[] policies=getAccessControlManager(root2).getPolicies((String)null);
  assertEquals(1,policies.length);
  assertArrayEquals(acl.getAccessControlEntries(),((ACL)policies[0]).getAccessControlEntries());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicyWritesAcContent() throws Exception {
  ACL acl=getApplicablePolicy(testPath);
  acl.addAccessControlEntry(testPrincipal,testPrivileges);
  acl.addEntry(EveryonePrincipal.getInstance(),testPrivileges,false,getGlobRestriction("*/something"));
  acMgr.setPolicy(testPath,acl);
  root.commit();
  Root root2=adminSession.getLatestRoot();
  Tree tree=root2.getTree(testPath);
  assertTrue(tree.hasChild(REP_POLICY));
  Tree policyTree=tree.getChild(REP_POLICY);
  assertEquals(NT_REP_ACL,TreeUtil.getPrimaryTypeName(policyTree));
  assertEquals(2,policyTree.getChildrenCount(3));
  Iterator<Tree> children=policyTree.getChildren().iterator();
  Tree ace=children.next();
  assertEquals(NT_REP_GRANT_ACE,TreeUtil.getPrimaryTypeName(ace));
  assertEquals(testPrincipal.getName(),TreeUtil.getString(ace,REP_PRINCIPAL_NAME));
  assertEquals(newHashSet(testPrivileges),newHashSet(privilegesFromNames(TreeUtil.getStrings(ace,REP_PRIVILEGES))));
  assertFalse(ace.hasChild(REP_RESTRICTIONS));
  Tree ace2=children.next();
  assertEquals(NT_REP_DENY_ACE,TreeUtil.getPrimaryTypeName(ace2));
  assertEquals(EveryonePrincipal.NAME,ace2.getProperty(REP_PRINCIPAL_NAME).getValue(Type.STRING));
  Privilege[] privs=privilegesFromNames(TreeUtil.getNames(ace2,REP_PRIVILEGES));
  assertEquals(newHashSet(testPrivileges),newHashSet(privs));
  assertTrue(ace2.hasChild(REP_RESTRICTIONS));
  Tree restr=ace2.getChild(REP_RESTRICTIONS);
  assertEquals("*/something",restr.getProperty(REP_GLOB).getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesAccessControlledNodePath() throws Exception {
  Privilege[] expected=privilegesFromNames(PrivilegeConstants.JCR_ALL);
  for (  String path : getAcContentPaths()) {
    assertArrayEquals(expected,acMgr.getPrivileges(path));
    assertArrayEquals(expected,acMgr.getPrivileges(path,getPrincipals(adminSession)));
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetRepoPrivileges() throws Exception {
  assertArrayEquals(privilegesFromNames(PrivilegeConstants.JCR_ALL),acMgr.getPrivileges(null));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePolicies() throws Exception {
  AccessControlPolicyIterator itr=acMgr.getApplicablePolicies(testPath);
  assertNotNull(itr);
  assertTrue(itr.hasNext());
  AccessControlPolicy policy=itr.nextAccessControlPolicy();
  assertNotNull(policy);
  assertTrue(policy instanceof ACL);
  ACL acl=(ACL)policy;
  assertTrue(acl.isEmpty());
  assertEquals(testPath,acl.getPath());
  assertFalse(itr.hasNext());
}

</code></pre>

<br>
<pre class="type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetPolicies() throws Exception {
  setupPolicy(testPath);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  PrincipalManager testPrincipalMgr=getPrincipalManager(testRoot);
  List<Principal> principals=ImmutableList.of(testPrincipal,EveryonePrincipal.getInstance());
  for (  Principal principal : principals) {
    if (testPrincipalMgr.hasPrincipal(principal.getName())) {
      AccessControlPolicy[] policies=testAcMgr.getPolicies(principal);
      assertNotNull(policies);
      assertEquals(0,policies.length);
    }
 else {
      assertEquals(0,testAcMgr.getPolicies(principal).length);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesByPrincipal2() throws Exception {
  setupPolicy(testPath);
  AccessControlPolicy[] applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(1,applicable.length);
  assertTrue(applicable[0] instanceof ACL);
  root.commit();
  applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(0,applicable.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 Policy at testPath not accessible -> getEffectivePolicies
 * only returns the readable policy but doesn't fail.
 */
@Test public void testTestSessionGetEffectivePoliciesByPrincipal3() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  setupPolicy(testPath,privilegesFromNames(PrivilegeConstants.JCR_READ));
  setupPolicy(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(Collections.singleton(getTestPrincipal()));
  assertNotNull(effective);
  assertEquals(1,effective.length);
}

</code></pre>

<br>
<pre class="type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEffectivePoliciesByPrincipal() throws Exception {
  Set<Set<Principal>> principalSets=new HashSet<Set<Principal>>();
  principalSets.add(Collections.singleton(getTestPrincipal()));
  principalSets.add(Collections.<Principal>singleton(EveryonePrincipal.getInstance()));
  principalSets.add(ImmutableSet.of(testPrincipal,EveryonePrincipal.getInstance()));
  for (  Set<Principal> principals : principalSets) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principals);
    assertNotNull(policies);
    assertEquals(0,policies.length);
  }
  setupPolicy(testPath);
  for (  Set<Principal> principals : principalSets) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principals);
    assertNotNull(policies);
    assertEquals(0,policies.length);
  }
  root.commit();
  for (  Set<Principal> principals : principalSets) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principals);
    assertNotNull(policies);
    if (principals.contains(getTestPrincipal())) {
      assertEquals(1,policies.length);
    }
 else {
      assertEquals(0,policies.length);
    }
  }
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  setupPolicy(childPath);
  for (  Set<Principal> principals : principalSets) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principals);
    assertNotNull(policies);
    if (principals.contains(getTestPrincipal())) {
      assertEquals(1,policies.length);
    }
 else {
      assertEquals(0,policies.length);
    }
  }
  root.commit();
  for (  Set<Principal> principals : principalSets) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principals);
    assertNotNull(policies);
    if (principals.contains(getTestPrincipal())) {
      assertEquals(2,policies.length);
    }
 else {
      assertEquals(0,policies.length);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetApplicablePoliciesInternalPrincipal() throws Exception {
  Principal unknown=getPrincipalManager(root).getPrincipal("unknown");
  int i=0;
  while (unknown != null) {
    unknown=getPrincipalManager(root).getPrincipal("unknown" + i);
  }
  unknown=new PrincipalImpl("unknown" + i);
  assertEquals(1,acMgr.getApplicablePolicies(unknown).length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetEffectivePoliciesByPrincipal() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  Privilege[] privs=privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  setupPolicy(testPath,privs);
  setupPolicy(childPath,privs);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(Collections.singleton(getTestPrincipal()));
  assertNotNull(effective);
  assertEquals(2,effective.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPolicies() throws Exception {
  AccessControlPolicy policy=getApplicablePolicy(testPath);
  acMgr.setPolicy(testPath,policy);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  assertTrue(acl.isEmpty());
  assertEquals(testPath,acl.getOakPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRepoPolicies() throws Exception {
  String path=null;
  AccessControlPolicy[] policies=acMgr.getPolicies(path);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  acMgr.setPolicy(null,acMgr.getApplicablePolicies(path).nextAccessControlPolicy());
  assertFalse(acMgr.getApplicablePolicies(path).hasNext());
  policies=acMgr.getPolicies(path);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  assertTrue(acl.isEmpty());
  assertNull(acl.getPath());
  assertNull(acl.getOakPath());
  assertFalse(acMgr.getApplicablePolicies(path).hasNext());
  acMgr.removePolicy(path,acl);
  assertEquals(0,acMgr.getPolicies(path).length);
  assertTrue(acMgr.getApplicablePolicies(path).hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesByPrincipal() throws Exception {
  List<Principal> principals=ImmutableList.of(testPrincipal,EveryonePrincipal.getInstance());
  for (  Principal principal : principals) {
    AccessControlPolicy[] applicable=acMgr.getApplicablePolicies(principal);
    assertNotNull(applicable);
    assertEquals(1,applicable.length);
    assertTrue(applicable[0] instanceof ACL);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveRepoPolicy() throws Exception {
  ACL acl=setupPolicy(null);
  acMgr.removePolicy(null,acl);
  assertEquals(0,acMgr.getPolicies((String)null).length);
  assertTrue(acMgr.getApplicablePolicies((String)null).hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedPrivilegesIncludingPathConversion() throws Exception {
  List<Privilege> allPrivileges=Arrays.asList(getPrivilegeManager(root).getRegisteredPrivileges());
  List<String> testPaths=new ArrayList<String>();
  testPaths.add('/' + TEST_LOCAL_PREFIX + ":testRoot");
  testPaths.add("/{" + TEST_URI + "}testRoot");
  NameMapper remapped=new LocalNameMapper(root,singletonMap(TEST_LOCAL_PREFIX,TEST_URI));
  AccessControlManager acMgr=getAccessControlManager(new NamePathMapperImpl(remapped));
  for (  String path : testPaths) {
    Privilege[] supported=acMgr.getSupportedPrivileges(path);
    assertNotNull(supported);
    assertEquals(allPrivileges.size(),supported.length);
    assertTrue(allPrivileges.containsAll(Arrays.asList(supported)));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedForPrivilegesAcContent() throws Exception {
  List<Privilege> allPrivileges=Arrays.asList(getPrivilegeManager(root).getRegisteredPrivileges());
  for (  String acPath : getAcContentPaths()) {
    Privilege[] supported=acMgr.getSupportedPrivileges(acPath);
    assertNotNull(supported);
    assertEquals(allPrivileges.size(),supported.length);
    assertTrue(allPrivileges.containsAll(Arrays.asList(supported)));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPrincipalPolicy() throws Exception {
  JackrabbitAccessControlPolicy[] applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(1,applicable.length);
  assertTrue(applicable[0] instanceof ACL);
  ACL acl=(ACL)applicable[0];
  Value pathValue=getValueFactory().createValue(testPath,PropertyType.PATH);
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,Collections.singletonMap(REP_NODE_PATH,pathValue)));
  acMgr.setPolicy(acl.getPath(),acl);
  root.commit();
  Root root2=adminSession.getLatestRoot();
  AccessControlPolicy[] policies=getAccessControlManager(root2).getPolicies(testPath);
  assertEquals(1,policies.length);
  assertEquals(1,((ACL)policies[0]).getAccessControlEntries().length);
  policies=getAccessControlManager(root2).getPolicies(testPrincipal);
  assertEquals(1,policies.length);
  assertArrayEquals(acl.getAccessControlEntries(),((ACL)policies[0]).getAccessControlEntries());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEffectivePoliciesNewPolicy() throws Exception {
  AccessControlPolicy[] policies=acMgr.getEffectivePolicies(testPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  setupPolicy(testPath);
  policies=acMgr.getEffectivePolicies(testPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  policies=acMgr.getEffectivePolicies(childPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  setupPolicy(childPath);
  policies=acMgr.getEffectivePolicies(childPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEffectivePolicies() throws Exception {
  AccessControlPolicy[] policies=acMgr.getEffectivePolicies(testPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  setupPolicy(testPath);
  root.commit();
  policies=acMgr.getEffectivePolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  policies=acMgr.getEffectivePolicies(childPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  setupPolicy(childPath);
  root.commit();
  policies=acMgr.getEffectivePolicies(childPath);
  assertNotNull(policies);
  assertEquals(2,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : only accessible policies are returned but not exception
 * is raised.
 */
@Test public void testTestSessionGetEffectivePoliciesByPrincipals2() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  Privilege[] privs=privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  JackrabbitAccessControlList acl=getApplicablePolicy(testPath);
  acl.addEntry(getTestPrincipal(),privs,false);
  acMgr.setPolicy(testPath,acl);
  setupPolicy(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  Set<Principal> principals=ImmutableSet.of(getTestPrincipal(),EveryonePrincipal.getInstance());
  AccessControlPolicy[] policies=testAcMgr.getEffectivePolicies(principals);
  assertNotNull(policies);
  assertEquals(1,policies.length);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrivilegeFromExpandedName() throws Exception {
  Privilege readPriv=getPrivilegeManager(root).getPrivilege(PrivilegeConstants.JCR_READ);
  assertEquals(readPriv,acMgr.privilegeFromName(Privilege.JCR_READ));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemovePrincipalPolicy2() throws Exception {
  setupPolicy(testPath);
  root.commit();
  AccessControlPolicy[] policies=acMgr.getPolicies(testPrincipal);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  acMgr.removePolicy(acl.getPath(),acl);
  policies=acMgr.getPolicies(testPath);
  assertEquals(0,policies.length);
  policies=acMgr.getPolicies(testPrincipal);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testTestSessionGetEffectivePolicies() throws Exception {
  Privilege[] privileges=privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  setupPolicy(testPath,privileges);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  AccessControlManager testAcMgr=getTestAccessControlManager();
  assertTrue(testAcMgr.hasPrivileges(testPath,privileges));
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(testPath);
  assertNotNull(effective);
  assertEquals(1,effective.length);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyExistingPolicy() throws Exception {
  ACL acl=getApplicablePolicy(testPath);
  assertTrue(acl.addAccessControlEntry(testPrincipal,testPrivileges));
  AccessControlEntry allowTest=acl.getAccessControlEntries()[0];
  acMgr.setPolicy(testPath,acl);
  root.commit();
  acl=(ACL)acMgr.getPolicies(testPath)[0];
  assertTrue(acl.addEntry(EveryonePrincipal.getInstance(),testPrivileges,false,getGlobRestriction("*/something")));
  AccessControlEntry[] aces=acl.getAccessControlEntries();
  assertEquals(2,aces.length);
  AccessControlEntry denyEveryone=aces[1];
  assertEquals(EveryonePrincipal.getInstance(),denyEveryone.getPrincipal());
  acl.orderBefore(denyEveryone,allowTest);
  acMgr.setPolicy(testPath,acl);
  root.commit();
  acl=(ACL)acMgr.getPolicies(testPath)[0];
  aces=acl.getAccessControlEntries();
  assertEquals(2,aces.length);
  assertEquals(denyEveryone,aces[0]);
  assertEquals(allowTest,aces[1]);
  Privilege[] readAc=new Privilege[]{acMgr.privilegeFromName(PrivilegeConstants.JCR_READ_ACCESS_CONTROL)};
  assertTrue(acl.addEntry(testPrincipal,readAc,false,Collections.<String,Value>emptyMap()));
  assertEquals(3,acl.size());
  AccessControlEntry denyTest=acl.getAccessControlEntries()[2];
  acl.orderBefore(denyTest,allowTest);
  acMgr.setPolicy(testPath,acl);
  acl=(ACL)acMgr.getPolicies(testPath)[0];
  aces=acl.getAccessControlEntries();
  assertEquals(3,aces.length);
  assertEquals(denyEveryone,aces[0]);
  assertEquals(denyTest,aces[1]);
  assertEquals(allowTest,aces[2]);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterSet() throws Exception {
  setupPolicy(testPath);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  assertFalse(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testTestSessionGetEffectivePolicies2() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  setupPolicy(testPath,privilegesFromNames(PrivilegeConstants.JCR_READ));
  setupPolicy(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  AccessControlManager testAcMgr=getTestAccessControlManager();
  assertTrue(testAcMgr.hasPrivileges(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL)));
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(childPath);
  assertNotNull(effective);
  assertEquals(1,effective.length);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPoliciesInternalPrincipal() throws Exception {
  Principal unknown=getPrincipalManager(root).getPrincipal("unknown");
  int i=0;
  while (unknown != null) {
    unknown=getPrincipalManager(root).getPrincipal("unknown" + i);
  }
  unknown=new PrincipalImpl("unknown" + i);
  assertEquals(0,acMgr.getPolicies(unknown).length);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEffectiveSorting() throws Exception {
  Set<Principal> principalSet=ImmutableSet.of(testPrincipal,EveryonePrincipal.getInstance());
  ACL nullPathPolicy=null;
  try {
    ACL policy=getApplicablePolicy(testPath);
    policy.addEntry(testPrincipal,testPrivileges,true,getGlobRestriction("*"));
    policy.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT),false);
    policy.addEntry(EveryonePrincipal.getInstance(),privilegesFromNames(PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT),false);
    acMgr.setPolicy(testPath,policy);
    NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
    String childPath=child.getTree().getPath();
    setupPolicy(childPath);
    nullPathPolicy=getApplicablePolicy(null);
    assertNotNull(nullPathPolicy);
    nullPathPolicy.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.REP_PRIVILEGE_MANAGEMENT),true);
    acMgr.setPolicy(null,nullPathPolicy);
    root.commit();
    AccessControlPolicy[] effectivePolicies=acMgr.getEffectivePolicies(principalSet);
    assertEquals(3,effectivePolicies.length);
    assertNull(((JackrabbitAccessControlPolicy)effectivePolicies[0]).getPath());
    assertEquals(testPath,((JackrabbitAccessControlPolicy)effectivePolicies[1]).getPath());
    assertEquals(childPath,((JackrabbitAccessControlPolicy)effectivePolicies[2]).getPath());
  }
  finally {
    if (nullPathPolicy != null) {
      acMgr.removePolicy(null,nullPathPolicy);
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesForPrincipalsAccessControlledNodePath() throws Exception {
  Set<Principal> testPrincipals=ImmutableSet.of(testPrincipal);
  Privilege[] expected=new Privilege[0];
  for (  String path : getAcContentPaths()) {
    assertArrayEquals(expected,acMgr.getPrivileges(path,testPrincipals));
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetPolicy() throws Exception {
  ACL acl=getApplicablePolicy(testPath);
  acl.addAccessControlEntry(testPrincipal,testPrivileges);
  acl.addEntry(EveryonePrincipal.getInstance(),testPrivileges,false,getGlobRestriction("*/something"));
  acMgr.setPolicy(testPath,acl);
  root.commit();
  Root root2=adminSession.getLatestRoot();
  AccessControlPolicy[] policies=getAccessControlManager(root2).getPolicies(testPath);
  assertEquals(1,policies.length);
  assertArrayEquals(acl.getAccessControlEntries(),((ACL)policies[0]).getAccessControlEntries());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoEffectiveDuplicateEntries() throws Exception {
  Set<Principal> principalSet=ImmutableSet.of(testPrincipal,EveryonePrincipal.getInstance());
  ACL policy=getApplicablePolicy(testPath);
  policy.addEntry(testPrincipal,testPrivileges,true,getGlobRestriction("*"));
  policy.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT),false);
  policy.addEntry(EveryonePrincipal.getInstance(),privilegesFromNames(PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT),false);
  assertEquals(3,policy.getAccessControlEntries().length);
  acMgr.setPolicy(testPath,policy);
  root.commit();
  AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principalSet);
  assertEquals(1,policies.length);
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  setupPolicy(childPath);
  root.commit();
  policies=acMgr.getEffectivePolicies(principalSet);
  assertEquals(2,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesByPrincipal() throws Exception {
  List<Principal> principals=ImmutableList.of(testPrincipal,EveryonePrincipal.getInstance());
  for (  Principal principal : principals) {
    AccessControlPolicy[] policies=acMgr.getPolicies(principal);
    assertNotNull(policies);
    assertEquals(0,policies.length);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemovePolicy() throws Exception {
  ACL acl=setupPolicy(testPath);
  acMgr.removePolicy(testPath,acl);
  assertEquals(0,acMgr.getPolicies(testPath).length);
  assertTrue(acMgr.getApplicablePolicies(testPath).hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEffectivePoliciesFiltering() throws Exception {
  ACL policy=getApplicablePolicy(testPath);
  policy.addEntry(testPrincipal,testPrivileges,true,getGlobRestriction("*"));
  policy.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT),false);
  policy.addEntry(EveryonePrincipal.getInstance(),privilegesFromNames(PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT),false);
  assertEquals(3,policy.getAccessControlEntries().length);
  acMgr.setPolicy(testPath,policy);
  root.commit();
  List<Principal> principals=ImmutableList.of(testPrincipal,new PrincipalImpl(testPrincipal.getName()),new Principal(){
    @Override public String getName(){
      return testPrincipal.getName();
    }
  }
);
  for (  Principal princ : principals) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(ImmutableSet.of(princ));
    assertEquals(1,policies.length);
    assertTrue(policies[0] instanceof AccessControlList);
    AccessControlList acl=(AccessControlList)policies[0];
    assertEquals(2,acl.getAccessControlEntries().length);
    for (    AccessControlEntry ace : acl.getAccessControlEntries()) {
      assertEquals(princ.getName(),ace.getPrincipal().getName());
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetEffectivePoliciesByPrincipals() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  Privilege[] privs=privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  setupPolicy(testPath,privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  JackrabbitAccessControlList acl=getApplicablePolicy(childPath);
  acl.addEntry(EveryonePrincipal.getInstance(),privs,true);
  acMgr.setPolicy(childPath,acl);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  Set<Principal> principals=ImmutableSet.of(getTestPrincipal(),EveryonePrincipal.getInstance());
  AccessControlPolicy[] policies=testAcMgr.getEffectivePolicies(principals);
  assertNotNull(policies);
  assertEquals(2,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrivilegeFromName() throws Exception {
  List<Privilege> allPrivileges=Arrays.asList(getPrivilegeManager(root).getRegisteredPrivileges());
  for (  Privilege privilege : allPrivileges) {
    Privilege p=acMgr.privilegeFromName(privilege.getName());
    assertEquals(privilege,p);
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetPrivileges() throws Exception {
  setupPolicy(testPath);
  root.commit();
  AccessControlManagerImpl testAcMgr=getTestAccessControlManager();
  Set<Principal> testPrincipals=getPrincipals(getTestRoot().getContentSession());
  assertArrayEquals(new Privilege[0],testAcMgr.getPrivileges(null));
  assertArrayEquals(new Privilege[0],testAcMgr.getPrivileges(null,testPrincipals));
  Privilege[] privs=testAcMgr.getPrivileges(testPath);
  assertEquals(ImmutableSet.copyOf(testPrivileges),ImmutableSet.copyOf(privs));
  privs=testAcMgr.getPrivileges(testPath,testPrincipals);
  assertEquals(ImmutableSet.copyOf(testPrivileges),ImmutableSet.copyOf(privs));
  try {
    testAcMgr.getPrivileges(testPath,getPrincipals(adminSession));
    fail("testSession doesn't have sufficient permission to read access control information at testPath");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPrincipalPolicy2() throws Exception {
  setupPolicy(testPath);
  root.commit();
  JackrabbitAccessControlPolicy[] policies=acMgr.getPolicies(testPrincipal);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  Map<String,Value> restrictions=new HashMap<String,Value>();
  restrictions.put(REP_NODE_PATH,getValueFactory().createValue(testPath,PropertyType.PATH));
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,restrictions));
  restrictions.putAll(getGlobRestriction("*"));
  assertFalse(acl.addEntry(testPrincipal,testPrivileges,true,restrictions));
  acMgr.setPolicy(acl.getPath(),acl);
  assertEquals(2,((ACL)acMgr.getPolicies(testPath)[0]).getAccessControlEntries().length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesByPrincipal2() throws Exception {
  setupPolicy(testPath);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPrincipal);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  root.commit();
  policies=acMgr.getPolicies(testPrincipal);
  assertNotNull(policies);
  assertEquals(1,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetApplicablePolicies() throws Exception {
  setupPolicy(testPath);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  List<Principal> principals=ImmutableList.of(testPrincipal,EveryonePrincipal.getInstance());
  for (  Principal principal : principals) {
    AccessControlPolicy[] applicable=testAcMgr.getApplicablePolicies(principal);
    assertNotNull(applicable);
    assertEquals(1,applicable.length);
    assertTrue(applicable[0] instanceof ACL);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterRemove() throws Exception {
  setupPolicy(testPath);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  acMgr.removePolicy(testPath,policies[0]);
  policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  assertTrue(acMgr.getApplicablePolicies(testPath).hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemovePrincipalPolicy() throws Exception {
  JackrabbitAccessControlPolicy[] applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(1,applicable.length);
  assertTrue(applicable[0] instanceof ACL);
  ACL acl=(ACL)applicable[0];
  Value pathValue=getValueFactory().createValue(testPath,PropertyType.PATH);
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,Collections.singletonMap(REP_NODE_PATH,pathValue)));
  acMgr.setPolicy(acl.getPath(),acl);
  root.commit();
  acMgr.removePolicy(acl.getPath(),acl);
  root.commit();
  assertEquals(0,acMgr.getPolicies(testPrincipal).length);
  assertEquals(0,acMgr.getPolicies(testPath).length);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesForPrincipals() throws Exception {
  Set<Principal> adminPrincipals=getPrincipals(adminSession);
  Privilege[] expected=privilegesFromNames(PrivilegeConstants.JCR_ALL);
  assertArrayEquals(expected,acMgr.getPrivileges("/",adminPrincipals));
  assertArrayEquals(expected,acMgr.getPrivileges(null,adminPrincipals));
  assertArrayEquals(expected,acMgr.getPrivileges(testPath,adminPrincipals));
  setupPolicy(testPath);
  root.commit();
  Set<Principal> testPrincipals=Collections.singleton(testPrincipal);
  assertArrayEquals(new Privilege[0],acMgr.getPrivileges(null,testPrincipals));
  assertArrayEquals(new Privilege[0],acMgr.getPrivileges("/",testPrincipals));
  assertEquals(ImmutableSet.copyOf(testPrivileges),ImmutableSet.copyOf(acMgr.getPrivileges(testPath,testPrincipals)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPolicyWithInvalidPrincipal() throws Exception {
  ACL policy=getApplicablePolicy(testPath);
  policy.addEntry(testPrincipal,testPrivileges,true,getGlobRestriction("*"));
  acMgr.setPolicy(testPath,policy);
  NodeUtil aclNode=new NodeUtil(root.getTree(testPath + '/' + REP_POLICY));
  NodeUtil aceNode=aclNode.addChild("testACE",NT_REP_DENY_ACE);
  aceNode.setString(REP_PRINCIPAL_NAME,"invalidPrincipal");
  aceNode.setNames(REP_PRIVILEGES,PrivilegeConstants.JCR_READ);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  ACL acl=(ACL)policies[0];
  List<String> principalNames=new ArrayList<String>();
  for (  AccessControlEntry ace : acl.getEntries()) {
    principalNames.add(ace.getPrincipal().getName());
  }
  assertTrue(principalNames.remove("invalidPrincipal"));
  assertTrue(principalNames.remove(testPrincipal.getName()));
  assertTrue(principalNames.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.AccessControlValidatorTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPolicyWithOutChildOrder() throws AccessDeniedException {
  NodeUtil testRoot=getTestRoot();
  testRoot.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_ACCESS_CONTROLLABLE);
  testRoot.addChild(REP_POLICY,NT_REP_ACL);
  try {
    root.commit();
    fail("Policy node with child node ordering");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals("OakAccessControl0004: Invalid policy node: Order of children is not stable.",e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeAccessControlManagerTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePolicies() throws Exception {
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies("/");
  while (it.hasNext()) {
    if (it.nextAccessControlPolicy() == TestPolicy.INSTANCE) {
      fail("TestPolicy should only be applicable at /test.");
    }
  }
  Set<AccessControlPolicy> applicable=ImmutableSet.copyOf(acMgr.getApplicablePolicies(TEST_PATH));
  assertEquals(2,applicable.size());
  assertTrue(applicable.contains(TestPolicy.INSTANCE));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedPrivileges() throws Exception {
  Set<Privilege> expected=ImmutableSet.copyOf(getPrivilegeManager(root).getRegisteredPrivileges());
  Set<Privilege> result=ImmutableSet.copyOf(acMgr.getSupportedPrivileges("/"));
  assertEquals(expected,result);
  result=Sets.newHashSet(acMgr.getSupportedPrivileges(TEST_PATH));
  assertTrue(result.containsAll(expected));
  assertTrue(result.contains(TestPrivilege.INSTANCE));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetEffectivePolicies() throws Exception {
  AccessControlPolicy[] effective=acMgr.getEffectivePolicies(TEST_PATH);
  assertEquals(0,effective.length);
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies(TEST_PATH);
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    acMgr.setPolicy(TEST_PATH,plc);
  }
  root.commit();
  assertEquals(2,acMgr.getEffectivePolicies(TEST_PATH).length);
  Tree child=root.getTree(TEST_PATH).addChild("child");
  child.setProperty(JcrConstants.JCR_PRIMARYTYPE,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  assertEquals(1,acMgr.getEffectivePolicies(child.getPath()).length);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetPolicyAtTestPath() throws Exception {
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies(TEST_PATH);
  int cnt=0;
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    acMgr.setPolicy(TEST_PATH,plc);
    cnt++;
  }
  assertEquals(2,cnt);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRemovePolicy() throws Exception {
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies(TEST_PATH);
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    acMgr.setPolicy(TEST_PATH,plc);
  }
  root.commit();
  acMgr.removePolicy(TEST_PATH,TestPolicy.INSTANCE);
  root.commit();
  assertEquals(1,acMgr.getPolicies(TEST_PATH).length);
  acMgr.removePolicy(TEST_PATH,acMgr.getPolicies(TEST_PATH)[0]);
  root.commit();
  assertEquals(0,acMgr.getPolicies(TEST_PATH).length);
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicyAtRoot() throws Exception {
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies("/");
  int cnt=0;
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    assertTrue(plc instanceof JackrabbitAccessControlList);
    acMgr.setPolicy("/",plc);
    cnt++;
  }
  assertEquals(1,cnt);
}

</code></pre>

<br>
<pre class="type-13 type-12 type-5 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPolicies() throws Exception {
  int len=0;
  AccessControlPolicy[] policies=acMgr.getPolicies(TEST_PATH);
  assertEquals(len,policies.length);
  acMgr.setPolicy(TEST_PATH,TestPolicy.INSTANCE);
  len++;
  policies=acMgr.getPolicies(TEST_PATH);
  assertEquals(len,policies.length);
  assertSame(TestPolicy.INSTANCE,policies[0]);
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies(TEST_PATH);
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    if (plc == TestPolicy.INSTANCE) {
      fail("TestPolicy should only be applicable at /test.");
    }
 else {
      acMgr.setPolicy(TEST_PATH,plc);
      len++;
      Set<AccessControlPolicy> policySet=ImmutableSet.copyOf(acMgr.getPolicies(TEST_PATH));
      assertEquals(len,policySet.size());
      assertTrue(policySet.contains(TestPolicy.INSTANCE));
      assertTrue(policySet.contains(plc));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderAllTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,true).put(TEST_A_B_C_PATH + "/nonexisting",true).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cpp.getTreePermission(tree,parentPermission);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivileges() throws Exception {
  for (  String p : defPrivileges.keySet()) {
    Set<String> expected=defPrivileges.get(p);
    Tree tree=root.getTree(p);
    assertEquals(p,expected,cpp.getPrivileges(tree));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepo() throws Exception {
  Set<String> privilegeNames=cpp.getPrivileges(null);
  assertEquals(ImmutableSet.of(JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT),privilegeNames);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,false).put(TEST_A_B_C_PATH + "/nonexisting",false).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cpp.getTreePermission(tree,parentPermission);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderCoverageTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivileges() throws Exception {
  for (  String p : NODE_PATHS) {
    assertEquals(ImmutableSet.of(REP_READ_NODES),cpp.getPrivileges(readOnlyRoot.getTree(p)));
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepo() throws Exception {
  assertEquals(ImmutableSet.of(JCR_NAMESPACE_MANAGEMENT),cpp.getPrivileges(null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderFullScopeTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesAdmin() throws Exception {
  Set<String> expected=ImmutableSet.of(REP_READ_NODES);
  for (  String path : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(path);
    assertEquals(expected,cppAdminUser.getPrivileges(tree));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivileges() throws Exception {
  PrivilegeBitsProvider pbp=new PrivilegeBitsProvider(readOnlyRoot);
  PrivilegeBits readNodes=pbp.getBits(REP_READ_NODES);
  Set<String> expected=ImmutableSet.of(REP_READ_NODES);
  for (  String path : defPrivileges.keySet()) {
    Set<String> defaultPrivs=defPrivileges.get(path);
    Tree tree=readOnlyRoot.getTree(path);
    Set<String> privNames=cppTestUser.getPrivileges(tree);
    if (pbp.getBits(defaultPrivs).includes(readNodes)) {
      assertEquals(expected,privNames);
    }
 else {
      assertTrue(privNames.isEmpty());
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,false).put(TEST_A_B_C_PATH + "/nonexisting",false).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepo() throws Exception {
  Set<String> expected=ImmutableSet.of(JCR_NAMESPACE_MANAGEMENT);
  assertEquals(expected,cppTestUser.getPrivileges(null));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepoAdmin() throws Exception {
  Set<String> expected=ImmutableSet.of(JCR_NAMESPACE_MANAGEMENT);
  assertEquals(expected,cppAdminUser.getPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGrantedActionAdmin() throws Exception {
  for (  String p : defActionsGranted.keySet()) {
    boolean expectedRead=readOnlyRoot.getTree(p).exists();
    assertEquals(p,expectedRead,cppAdminUser.isGranted(p,Session.ACTION_READ));
    assertFalse(p,cppAdminUser.isGranted(p,getActionString(ALL_ACTIONS)));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      if (Permissions.READ_NODE == toTest) {
        assertTrue(path,tp.isGranted(toTest));
      }
 else {
        boolean canRead=Permissions.includes(toTest,Permissions.READ_NODE);
        assertEquals(path,canRead,tp.isGranted(Permissions.READ_NODE));
        assertFalse(path,tp.isGranted(toTest));
      }
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  for (  String p : defActionsGranted.keySet()) {
    String[] actions=defActionsGranted.get(p);
    if (ImmutableList.copyOf(actions).contains(Session.ACTION_READ)) {
      TreeLocation tl=TreeLocation.create(readOnlyRoot,p);
      assertEquals(p,tl.getTree() != null,cppTestUser.isGranted(p,Session.ACTION_READ));
    }
 else {
      assertFalse(p,cppTestUser.isGranted(p,Session.ACTION_READ));
    }
    if (actions.length > 1) {
      assertFalse(p,cppTestUser.isGranted(p,getActionString(actions)));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      boolean granted=(toTest == Permissions.READ_NODE);
      assertEquals(path,granted,tp.isGranted(toTest,PROPERTY_STATE));
    }
    assertFalse(tp.isGranted(Permissions.READ_PROPERTY,PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGranted() throws Exception {
  for (  String p : defPermissions.keySet()) {
    long defaultPerms=defPermissions.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    if (Permissions.READ_NODE != defaultPerms) {
      assertFalse(p,cppTestUser.isGranted(tree,null,defaultPerms));
    }
    boolean expectedReadNode=Permissions.includes(defaultPerms,Permissions.READ_NODE);
    assertEquals(p,expectedReadNode,cppTestUser.isGranted(tree,null,Permissions.READ_NODE));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderNoScopeTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  for (  String p : defPrivileges.keySet()) {
    Set<String> expected=defPrivileges.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    String[] privNames=expected.toArray(new String[expected.size()]);
    assertTrue(p,cppTestUser.hasPrivileges(tree,privNames));
    assertEquals(p,defTestUser.hasPrivileges(tree,privNames),cppTestUser.hasPrivileges(tree,privNames));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionSize() throws Exception {
  Field tpField=CompositeTreePermission.class.getDeclaredField("treePermissions");
  tpField.setAccessible(true);
  Tree rootTree=readOnlyRoot.getTree(ROOT_PATH);
  NodeState ns=((ImmutableTree)rootTree).getNodeState();
  TreePermission tp=cppTestUser.getTreePermission(rootTree,TreePermission.EMPTY);
  assertEquals(2,((TreePermission[])tpField.get(tp)).length);
  List<String> childNames=ImmutableList.of("test","a","b","c","nonexisting");
  for (  String cName : childNames) {
    ns=ns.getChildNode(cName);
    tp=tp.getChildPermission(cName,ns);
    assertCompositeTreePermission(false,tp);
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,true).put(TEST_A_B_C_PATH + "/nonexisting",true).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  TreePermission parentPermission2=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    TreePermission tp2=defTestUser.getTreePermission(tree,parentPermission2);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead(PROPERTY_STATE));
    assertEquals(nodePath + "(default)",expectedResult,tp2.canRead(PROPERTY_STATE));
    parentPermission=tp;
    parentPermission2=tp2;
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepoAdmin() throws Exception {
  Set<String> expected=ImmutableSet.of(JCR_ALL);
  assertEquals(expected,cppAdminUser.getPrivileges(null));
  assertEquals(defAdminUser.getPrivileges(null),cppAdminUser.getPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivileges() throws Exception {
  for (  String p : defPrivileges.keySet()) {
    Set<String> expected=defPrivileges.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    assertEquals(p,expected,cppTestUser.getPrivileges(tree));
    assertEquals(p,defTestUser.getPrivileges(tree),cppTestUser.getPrivileges(tree));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepo() throws Exception {
  Set<String> expected=ImmutableSet.of(JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT);
  assertEquals(expected,cppTestUser.getPrivileges(null));
  assertEquals(defTestUser.getPrivileges(null),cppTestUser.getPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesAdmin() throws Exception {
  Set<String> expected=ImmutableSet.of(JCR_ALL);
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertEquals(p,expected,cppAdminUser.getPrivileges(tree));
    assertEquals(p,defAdminUser.getPrivileges(tree),cppAdminUser.getPrivileges(tree));
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,false).put(TEST_A_B_C_PATH + "/nonexisting",false).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  TreePermission parentPermission2=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    TreePermission tp2=defTestUser.getTreePermission(tree,parentPermission2);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead());
    assertEquals(nodePath + "(default)",expectedResult,tp2.canRead());
    parentPermission=tp;
    parentPermission2=tp2;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderScopeTest </h4><pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivileges() throws Exception {
  PrivilegeBitsProvider pbp=new PrivilegeBitsProvider(readOnlyRoot);
  for (  String path : defPrivileges.keySet()) {
    Tree tree=readOnlyRoot.getTree(path);
    Set<String> defaultPrivs=defPrivileges.get(path);
    Set<String> privNames=cppTestUser.getPrivileges(tree);
    if (testProvider.isSupported(path)) {
      PrivilegeBits expected=pbp.getBits(defaultPrivs).modifiable().diff(denied).unmodifiable();
      assertEquals(expected,pbp.getBits(privNames));
    }
 else {
      assertEquals(path,defaultPrivs,privNames);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepo() throws Exception {
  Set<String> expected=ImmutableSet.of(JCR_NODE_TYPE_DEFINITION_MANAGEMENT);
  assertEquals(expected,cppTestUser.getPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesAdmin() throws Exception {
  for (  String path : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(path);
    Set<String> privNames=cppAdminUser.getPrivileges(tree);
    if (testProvider.isSupported(path)) {
      PrivilegeBits expected=pbp.getBits(JCR_ALL).modifiable().diff(denied).unmodifiable();
      assertEquals(expected,pbp.getBits(privNames));
    }
 else {
      assertEquals(path,ImmutableSet.of(JCR_ALL),privNames);
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,true).put(TEST_A_B_C_PATH + "/nonexisting",true).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    assertEquals(nodePath,readMap.get(nodePath),tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  Set<String> denied=ImmutableSet.of(Session.ACTION_ADD_NODE,JackrabbitSession.ACTION_ADD_PROPERTY);
  for (  String p : defActionsGranted.keySet()) {
    String[] actions=defActionsGranted.get(p);
    if (testProvider.isSupported(p)) {
      Set<String> expected=Sets.newHashSet(actions);
      expected.removeAll(denied);
      boolean canSetProperty=TreeLocation.create(readOnlyRoot,p).getProperty() != null;
      if (!canSetProperty) {
        expected.remove(Session.ACTION_SET_PROPERTY);
      }
      assertTrue(p,cppTestUser.isGranted(p,getActionString(expected.toArray(new String[expected.size()]))));
      assertEquals(p,canSetProperty,cppTestUser.isGranted(p,Session.ACTION_SET_PROPERTY));
      assertFalse(p,cppTestUser.isGranted(p,Session.ACTION_ADD_NODE));
      assertFalse(p,cppTestUser.isGranted(p,JackrabbitSession.ACTION_ADD_PROPERTY));
    }
 else {
      assertTrue(p,cppTestUser.isGranted(p,getActionString(actions)));
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepoAdmin() throws Exception {
  PrivilegeBits expected=pbp.getBits(JCR_ALL).modifiable().diff(pbp.getBits(JCR_NAMESPACE_MANAGEMENT)).unmodifiable();
  assertEquals(expected,pbp.getBits(cppAdminUser.getPrivileges(null)));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,false).put(TEST_A_B_C_PATH + "/nonexisting",false).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeTreePermissionTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultipleToSingle(){
  TreePermission rootTp=createRootTreePermission(fullScopeProvider,new NoScopeProvider(root),new NoScopeProvider(root));
  assertCompositeTreePermission(true,rootTp);
  NodeState childState=rootTree.getChild("test").getNodeState();
  TreePermission testTp=rootTp.getChildPermission("test",childState);
  TreePermission expected=fullScopeProvider.getTreePermission(rootTree,TreePermission.EMPTY).getChildPermission("test",childState);
  assertEquals(expected.getClass(),testTp.getClass());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingle(){
  Class<? extends TreePermission> expected=fullScopeProvider.getTreePermission(rootTree,TreePermission.EMPTY).getClass();
  TreePermission rootTp=createRootTreePermission(fullScopeProvider);
  assertCompositeTreePermission(false,rootTp);
  assertEquals(expected,rootTp.getClass());
  TreePermission testTp=rootTp.getChildPermission("test",rootTree.getChild("test").getNodeState());
  assertEquals(expected,testTp.getClass());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.ChildOrderPropertyTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPropertyCount(){
  Tree a=root.getTree("/a");
  assertEquals(2,a.getPropertyCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.HiddenPropertyTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPropertyCount(){
  Tree a=root.getTree("/a");
  assertEquals(2,a.getPropertyCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.HiddenTreeTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetHiddenTree(){
  Tree hidden=parent.getChild(HIDDEN_NAME);
  assertNotNull(hidden);
  assertFalse(hidden.exists());
  assertEquals(0,hidden.getChildrenCount(1));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetHiddenChildrenCount(){
  assertEquals(0,parent.getChildrenCount(1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.JcrUUIDTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Removing the jcr:uuid property must fail due to constraint violations.
 */
@Test public void testRemoveJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ);
  try {
    Root testRoot=getTestRoot();
    Tree test=testRoot.getTree(referenceablePath);
    test.removeProperty(JCR_UUID);
    testRoot.commit();
    fail("Removing the jcr:uuid property of a referenceable node must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(22,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Creating a referenceable tree with an invalid jcr:uuid must fail.
 */
@Test public void testCreateInvalidJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_ADD_CHILD_NODES);
  try {
    Root testRoot=getTestRoot();
    testRoot.refresh();
    NodeUtil a=new NodeUtil(testRoot.getTree("/a"));
    NodeUtil test=a.addChild("referenceable2",NT_NAME);
    test.setString(JcrConstants.JCR_UUID,"not a uuid");
    testRoot.commit();
    fail("Creating a referenceable node with an invalid uuid must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(12,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Modifying the jcr:uuid property must fail due to constraint violations.
 */
@Test public void testModifyJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE);
  try {
    Root testRoot=getTestRoot();
    Tree test=testRoot.getTree(referenceablePath);
    test.setProperty(JCR_UUID,"anothervalue");
    testRoot.commit();
    fail("An attempt to change the jcr:uuid property must fail");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(12,e.getCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.TreeTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetChildrenCount() throws Exception {
  long cntRoot=root.getTree("/").getChildrenCount(Long.MAX_VALUE);
  long cntA=root.getTree("/a").getChildrenCount(Long.MAX_VALUE);
  assertEquals(cntRoot - 1,testRoot.getTree("/").getChildrenCount(Long.MAX_VALUE));
  assertEquals(cntA - 1,testRoot.getTree("/a").getChildrenCount(Long.MAX_VALUE));
  List<String> paths=ImmutableList.of("/a/b","/a/b/c");
  for (  String path : paths) {
    assertEquals(root.getTree(path).getChildrenCount(Long.MAX_VALUE),testRoot.getTree(path).getChildrenCount(Long.MAX_VALUE));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyStatus() throws Exception {
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_NODES);
  testRoot.refresh();
  Tree a=testRoot.getTree("/a");
  assertFalse(a.exists());
  PropertyState p=a.getProperty(JcrConstants.JCR_PRIMARYTYPE);
  assertNotNull(p);
  assertEquals(Tree.Status.UNCHANGED,a.getPropertyStatus(JcrConstants.JCR_PRIMARYTYPE));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPropertyCount() throws Exception {
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  testRoot.refresh();
  Tree a=testRoot.getTree("/a");
  assertEquals(0,a.getPropertyCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.ClusterPermissionsTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAclPropagation() throws Exception {
  Tree node=root1.getTree("/").addChild("testNode");
  node.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  User user1=userManager1.createUser("testUser","testUser");
  JackrabbitAccessControlList acl1=AccessControlUtils.getAccessControlList(aclMgr1,"/testNode");
  acl1.addEntry(user1.getPrincipal(),AccessControlUtils.privilegesFromNames(aclMgr1,"jcr:all"),true);
  aclMgr1.setPolicy("/testNode",acl1);
  root1.commit();
  syncClusterNodes();
  root2.refresh();
  JackrabbitAccessControlList acl2=AccessControlUtils.getAccessControlList(aclMgr2,"/testNode");
  AccessControlEntry[] aces=acl2.getAccessControlEntries();
  assertEquals(1,aces.length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionEntryProviderImplTest </h4><pre class="type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2465">OAK-2465</a>
 */
@Test public void testInitLongOverflow() throws Exception {
  MockPermissionStore store=new MockPermissionStore();
  PermissionEntryCache cache=new MockPermissionEntryCache();
  Set<String> principalNames=ImmutableSet.of(GROUP_LONG_MAX);
  PermissionEntryProviderImpl provider=new PermissionEntryProviderImpl(store,cache,principalNames,ConfigurationParameters.EMPTY);
  Field existingNamesField=provider.getClass().getDeclaredField("existingNames");
  existingNamesField.setAccessible(true);
  assertEquals(principalNames,existingNamesField.get(provider));
  assertNotSame(Iterators.emptyIterator(),provider.getEntryIterator(new EntryPredicate()));
}

</code></pre>

<br>
<pre class="type-9 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2465">OAK-2465</a>
 */
@Test public void testInitLongOverflow2() throws Exception {
  MockPermissionStore store=new MockPermissionStore();
  PermissionEntryCache cache=new MockPermissionEntryCache();
  Set<String> principalNames=ImmutableSet.of(GROUP_LONG_MAX_MINUS_10,GROUP_50);
  PermissionEntryProviderImpl provider=new PermissionEntryProviderImpl(store,cache,principalNames,ConfigurationParameters.EMPTY);
  Set<String> existingNames=getExistingNames(provider);
  assertEquals(principalNames,existingNames);
  assertNotSame(Iterators.emptyIterator(),provider.getEntryIterator(new EntryPredicate()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2465">OAK-2465</a>
 */
@Test public void testExistingNamesAndLongOverFlow() throws Exception {
  MockPermissionStore store=new MockPermissionStore();
  PermissionEntryCache cache=new MockPermissionEntryCache();
  Set<String> principalNames=Sets.newHashSet(GROUP_LONG_MAX_MINUS_10,GROUP_50,"noEntries");
  PermissionEntryProviderImpl provider=new PermissionEntryProviderImpl(store,cache,principalNames,ConfigurationParameters.EMPTY);
  Set<String> existingNames=getExistingNames(provider);
  assertFalse(principalNames.equals(existingNames));
  assertEquals(2,existingNames.size());
  principalNames.remove("noEntries");
  assertEquals(principalNames,existingNames);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionHookTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImplicitAceRemoval() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,testPath);
  acl.addAccessControlEntry(getTestPrincipal(),privilegesFromNames(JCR_READ,REP_WRITE));
  acMgr.setPolicy(testPath,acl);
  acl=AccessControlUtils.getAccessControlList(acMgr,childPath);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),privilegesFromNames(JCR_READ));
  acMgr.setPolicy(childPath,acl);
  root.commit();
  assertTrue(root.getTree(childPath + "/rep:policy").exists());
  Tree principalRoot=getPrincipalRoot(EveryonePrincipal.NAME);
  assertEquals(4,cntEntries(principalRoot));
  ContentSession testSession=createTestSession();
  Root testRoot=testSession.getLatestRoot();
  assertTrue(testRoot.getTree(childPath).exists());
  assertFalse(testRoot.getTree(childPath + "/rep:policy").exists());
  testRoot.getTree(childPath).remove();
  testRoot.commit();
  testSession.close();
  root.refresh();
  assertFalse(root.getTree(testPath).hasChild("childNode"));
  assertFalse(root.getTree(childPath + "/rep:policy").exists());
  principalRoot=getPrincipalRoot(EveryonePrincipal.NAME);
  assertEquals(2,cntEntries(principalRoot));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyRestrictions() throws Exception {
  Tree testAce=root.getTree(testPath + "/rep:policy").getChildren().iterator().next();
  assertEquals(testPrincipalName,testAce.getProperty(REP_PRINCIPAL_NAME).getValue(Type.STRING));
  NodeUtil node=new NodeUtil(testAce);
  NodeUtil restrictions=node.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS);
  restrictions.setString(REP_GLOB,"*");
  String restrictionsPath=restrictions.getTree().getPath();
  root.commit();
  Tree principalRoot=getPrincipalRoot(testPrincipalName);
  assertEquals(2,cntEntries(principalRoot));
  Tree parent=principalRoot.getChildren().iterator().next();
  assertEquals("*",parent.getChildren().iterator().next().getProperty(REP_GLOB).getValue(Type.STRING));
  Tree restrictionsNode=root.getTree(restrictionsPath);
  restrictionsNode.setProperty(REP_GLOB,"/*/jcr:content/*");
  root.commit();
  principalRoot=getPrincipalRoot(testPrincipalName);
  assertEquals(2,cntEntries(principalRoot));
  parent=principalRoot.getChildren().iterator().next();
  assertEquals("/*/jcr:content/*",parent.getChildren().iterator().next().getProperty(REP_GLOB).getValue(Type.STRING));
  root.getTree(restrictionsPath).remove();
  root.commit();
  principalRoot=getPrincipalRoot(testPrincipalName);
  assertEquals(2,cntEntries(principalRoot));
  parent=principalRoot.getChildren().iterator().next();
  assertNull(parent.getChildren().iterator().next().getProperty(REP_GLOB));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2015">OAK-2015</a>
 */
@Test public void testDynamicJcrAll() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,childPath);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),privilegesFromNames(JCR_ALL));
  acMgr.setPolicy(childPath,acl);
  root.commit();
  Tree allEntry=getEntry(EveryonePrincipal.NAME,childPath,0);
  assertTrue(allEntry.exists());
  PropertyState ps=allEntry.getProperty(PermissionConstants.REP_PRIVILEGE_BITS);
  assertEquals(1,ps.count());
  assertEquals(PermissionStore.DYNAMIC_ALL_BITS,ps.getValue(Type.LONG,0).longValue());
  Set<Principal> principalSet=ImmutableSet.<Principal>of(EveryonePrincipal.getInstance());
  PermissionProvider permissionProvider=getConfig(AuthorizationConfiguration.class).getPermissionProvider(root,root.getContentSession().getWorkspaceName(),principalSet);
  Tree childTree=root.getTree(childPath);
  assertTrue(permissionProvider.hasPrivileges(childTree,PrivilegeConstants.JCR_ALL));
  assertTrue(permissionProvider.getPrivileges(childTree).contains(PrivilegeConstants.JCR_ALL));
  long diff=Permissions.diff(Permissions.ALL,Permissions.REMOVE_NODE | Permissions.ADD_NODE);
  assertFalse(permissionProvider.isGranted(childTree,null,Permissions.REMOVE_NODE));
  assertFalse(permissionProvider.isGranted(childTree,null,Permissions.ADD_NODE));
  assertTrue(permissionProvider.isGranted(childTree,null,diff));
  acl=AccessControlUtils.getAccessControlList(acMgr,childPath);
  for (  AccessControlEntry ace : acl.getAccessControlEntries()) {
    if (EveryonePrincipal.NAME.equals(ace.getPrincipal().getName())) {
      acl.removeAccessControlEntry(ace);
    }
  }
  acMgr.setPolicy(childPath,acl);
  root.commit();
  Tree everyoneRoot=getPrincipalRoot(EveryonePrincipal.NAME);
  Tree parent=everyoneRoot.getChild(PermissionUtil.getEntryName(childPath));
  if (parent.exists()) {
    assertFalse(parent.getChild("0").exists());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionProviderImplTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesForReadPaths() throws Exception {
  ContentSession testSession=createTestSession();
  try {
    PermissionProvider pp=createPermissionProvider(testSession);
    for (    String path : READ_PATHS) {
      Tree tree=root.getTree(path);
      assertEquals(Collections.singleton(PrivilegeConstants.JCR_READ),pp.getPrivileges(tree));
    }
    assertEquals(Collections.<String>emptySet(),pp.getPrivileges(null));
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionValidatorTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryTypeToPolicyNode() throws Exception {
  testRootNode.getChild("child").addChild(AccessControlConstants.REP_POLICY,NT_UNSTRUCTURED);
  root.commit();
  grant(TEST_ROOT_PATH,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL,PrivilegeConstants.REP_WRITE);
  ContentSession testSession=createTestSession();
  try {
    Root testRoot=testSession.getLatestRoot();
    Tree testChild=testRoot.getTree(TEST_CHILD_PATH);
    testChild.setProperty(PropertyStates.createProperty(JcrConstants.JCR_MIXINTYPES,ImmutableList.of(AccessControlConstants.MIX_REP_ACCESS_CONTROLLABLE),Type.NAMES));
    Tree testPolicy=testChild.getChild(AccessControlConstants.REP_POLICY);
    testPolicy.setOrderableChildren(true);
    testPolicy.setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_ACL,Type.NAME);
    testRoot.commit();
    fail("Turning a false policy node into access control content requires the ability to write AC content.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
    assertEquals(0,e.getCode());
  }
 finally {
    testSession.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.RestrictionProviderImplTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPatternFromRestrictions() throws Exception {
  Map<PropertyState,RestrictionPattern> map=newHashMap();
  map.put(PropertyStates.createProperty(REP_GLOB,"/*/jcr:content"),GlobPattern.create("/testPath","/*/jcr:content"));
  List<String> ntNames=ImmutableList.of(JcrConstants.NT_FOLDER,JcrConstants.NT_LINKEDFILE);
  map.put(PropertyStates.createProperty(REP_NT_NAMES,ntNames,Type.NAMES),new NodeTypePattern(ntNames));
  List<String> prefixes=ImmutableList.of("rep","jcr");
  map.put(PropertyStates.createProperty(REP_PREFIXES,prefixes,Type.STRINGS),new PrefixPattern(prefixes));
  List<String> itemNames=ImmutableList.of("abc","jcr:primaryType");
  map.put(PropertyStates.createProperty(REP_ITEM_NAMES,itemNames,Type.NAMES),new ItemNamePattern(itemNames));
  NodeUtil tree=new NodeUtil(root.getTree("/")).getOrAddTree("testPath",JcrConstants.NT_UNSTRUCTURED);
  Tree restrictions=tree.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS).getTree();
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
    RestrictionPattern pattern=provider.getPattern("/testPath",provider.readRestrictions("/testPath",tree.getTree()));
    assertEquals(entry.getValue(),pattern);
    restrictions.removeProperty(entry.getKey().getName());
  }
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
  }
  RestrictionPattern pattern=provider.getPattern("/testPath",provider.readRestrictions("/testPath",tree.getTree()));
  assertTrue(pattern instanceof CompositePattern);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestrictionPattern() throws Exception {
  Map<PropertyState,RestrictionPattern> map=newHashMap();
  map.put(PropertyStates.createProperty(REP_GLOB,"/*/jcr:content"),GlobPattern.create("/testPath","/*/jcr:content"));
  List<String> ntNames=ImmutableList.of(JcrConstants.NT_FOLDER,JcrConstants.NT_LINKEDFILE);
  map.put(PropertyStates.createProperty(REP_NT_NAMES,ntNames,Type.NAMES),new NodeTypePattern(ntNames));
  NodeUtil tree=new NodeUtil(root.getTree("/")).getOrAddTree("testPath",JcrConstants.NT_UNSTRUCTURED);
  Tree restrictions=tree.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS).getTree();
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
    RestrictionPattern pattern=provider.getPattern("/testPath",restrictions);
    assertEquals(entry.getValue(),pattern);
    restrictions.removeProperty(entry.getKey().getName());
  }
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
  }
  RestrictionPattern pattern=provider.getPattern("/testPath",restrictions);
  assertTrue(pattern instanceof CompositePattern);
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedDefinitions(){
  assertTrue(provider.getSupportedRestrictions(null).isEmpty());
  Set<RestrictionDefinition> defs=provider.getSupportedRestrictions("/testPath");
  assertNotNull(defs);
  assertEquals(4,defs.size());
  for (  RestrictionDefinition def : defs) {
    if (REP_GLOB.equals(def.getName())) {
      assertEquals(Type.STRING,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else     if (REP_NT_NAMES.equals(def.getName())) {
      assertEquals(Type.NAMES,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else     if (REP_PREFIXES.equals(def.getName())) {
      assertEquals(Type.STRINGS,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else     if (REP_ITEM_NAMES.equals(def.getName())) {
      assertEquals(Type.NAMES,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else {
      fail("unexpected restriction " + def.getName());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.internal.SecurityProviderRegistrationTest </h4><pre class="type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthorizationRanking() throws Exception {
  Field f=registration.getClass().getDeclaredField("authorizationConfiguration");
  f.setAccessible(true);
  AuthorizationConfiguration testAc=new TestAuthorizationConfiguration();
  registration.bindAuthorizationConfiguration(testAc,ConfigurationParameters.EMPTY);
  AuthorizationConfigurationImpl ac=new AuthorizationConfigurationImpl();
  ac.setParameters(ConfigurationParameters.of(CompositeConfiguration.PARAM_RANKING,500));
  registration.bindAuthorizationConfiguration(ac,PROPS);
  AuthorizationConfiguration testAc2=new TestAuthorizationConfiguration();
  Map<String,Object> props=ImmutableMap.<String,Object>of(Constants.SERVICE_RANKING,new Integer(100));
  registration.bindAuthorizationConfiguration(testAc2,props);
  CompositeAuthorizationConfiguration cac=(CompositeAuthorizationConfiguration)f.get(registration);
  List<AuthorizationConfiguration> list=cac.getConfigurations();
  assertEquals(3,list.size());
  assertSame(ac,list.get(0));
  assertSame(testAc2,list.get(1));
  assertSame(testAc,list.get(2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.L3_BuiltInPrivilegesTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAggregation() throws RepositoryException {
  PrivilegeManager privilegeManager=getPrivilegeManager(root);
  Map<String,Set<Privilege>> expectedResults=ImmutableMap.of();
  Iterable<Privilege> aggregated=Iterables.<Privilege>filter(ImmutableList.<Privilege>copyOf(privilegeManager.getRegisteredPrivileges()),new Predicate<Privilege>(){
    @Override public boolean apply(    @Nullable Privilege input){
      return input != null && input.isAggregate();
    }
  }
);
  for (  Privilege aggrPrivilege : aggregated) {
    Set<Privilege> expected=expectedResults.get(aggrPrivilege.getName());
    assertEquals(expected,ImmutableSet.copyOf(aggrPrivilege.getDeclaredAggregatePrivileges()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.L4_CustomPrivilegeTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCustomPrivilege(){
  Set<String> expected=null;
  assertEqualPrivileges(expected,customAggrPriv.getDeclaredAggregatePrivileges());
  expected=null;
  assertEqualPrivileges(expected,customAggrPriv.getAggregatePrivileges());
  Boolean expectedIsAbstract=null;
  assertEquals(expectedIsAbstract.booleanValue(),customAggrPriv.isAbstract());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.L5_PrivilegeContentTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrivilegeDefinition() throws RepositoryException {
  Tree repWriteTree=PrivilegeUtil.getPrivilegesTree(root).getChild(PrivilegeConstants.REP_WRITE);
  PrivilegeDefinition def=PrivilegeUtil.readDefinition(repWriteTree);
  String expectedName=null;
  assertEquals(expectedName,def.getName());
  boolean isAbstract=false;
  assertEquals(isAbstract,def.isAbstract());
  Set<String> expectedAggregates=null;
  assertEquals(expectedAggregates,def.getDeclaredAggregateNames());
  Privilege repWritePrivilege=getPrivilegeManager(root).getPrivilege(PrivilegeConstants.REP_WRITE);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrivilegeRoot(){
  Tree privilegesRoot=root.getTree(PrivilegeConstants.PRIVILEGES_PATH);
  String name=null;
  assertEquals(name,privilegesRoot.getName());
  String primaryType=null;
  assertEquals(primaryType,TreeUtil.getPrimaryTypeName(privilegesRoot));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.PrivilegeDefinitionWriterTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteDefinition() throws Exception {
  PrivilegeDefinitionWriter writer=new PrivilegeDefinitionWriter(root);
  writer.writeDefinition(new ImmutablePrivilegeDefinition("tmp",true,asList(JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL)));
  Tree privRoot=root.getTree(PRIVILEGES_PATH);
  assertTrue(privRoot.hasChild("tmp"));
  Tree tmpTree=privRoot.getChild("tmp");
  assertTrue(TreeUtil.getBoolean(tmpTree,REP_IS_ABSTRACT));
  assertArrayEquals(new String[]{JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL},Iterables.toArray(TreeUtil.getStrings(tmpTree,REP_AGGREGATES),String.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.PrivilegeValidatorTest </h4><pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBitsConflict(){
  try {
    Tree privTree=createPrivilegeTree();
    bitsProvider.getBits(JCR_READ).writeTo(privTree);
    root.commit();
    fail("Conflicting privilege bits property must be detected.");
  }
 catch (  CommitFailedException e) {
    assertEquals("OakConstraint0049: PrivilegeBits already in used.",e.getMessage());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNextNotUpdated(){
  try {
    Tree privTree=createPrivilegeTree();
    PrivilegeBits.getInstance(privilegesTree).writeTo(privTree);
    root.commit();
    fail("Outdated rep:next property must be detected.");
  }
 catch (  CommitFailedException e) {
    assertEquals("OakConstraint0043: Next bits not updated",e.getMessage());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingularAggregation(){
  try {
    Tree privTree=createPrivilegeTree();
    privTree.setProperty(PropertyStates.createProperty(REP_AGGREGATES,Collections.singletonList(JCR_READ),Type.NAMES));
    PrivilegeBits.getInstance(bitsProvider.getBits(JCR_READ)).writeTo(privTree);
    root.commit();
    fail("Aggregation of a single privilege is invalid.");
  }
 catch (  CommitFailedException e) {
    assertEquals("OakConstraint0050: Singular aggregation is equivalent to existing privilege.",e.getMessage());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBitsConflictWithAggregation(){
  try {
    Tree privTree=createPrivilegeTree();
    privTree.setProperty(PropertyStates.createProperty(REP_AGGREGATES,ImmutableList.of(JCR_READ,JCR_MODIFY_PROPERTIES),Type.NAMES));
    setPrivilegeBits(privTree,REP_BITS,340);
    root.commit();
    fail("Privilege bits don't match the aggregation.");
  }
 catch (  CommitFailedException e) {
    assertEquals("OakConstraint0053: Invalid privilege bits for aggregated privilege definition.",e.getMessage());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAggregatesIncludesJcrAll() throws Exception {
  try {
    Tree privTree=createPrivilegeTree();
    privTree.setProperty(PropertyStates.createProperty(REP_AGGREGATES,ImmutableList.of(JCR_ALL,JCR_READ,JCR_WRITE),Type.NAMES));
    PrivilegeBits.getInstance(bitsProvider.getBits(JCR_ALL,JCR_READ,JCR_WRITE)).writeTo(privTree);
    root.commit();
    fail("Aggregation containing jcr:all is invalid.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(53,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeNext(){
  try {
    setPrivilegeBits(bitsProvider.getPrivilegesTree(),REP_NEXT,1);
    root.commit();
    fail("Outdated rep:next property must be detected.");
  }
 catch (  CommitFailedException e) {
    assertEquals("OakConstraint0043: Next bits not updated",e.getMessage());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2413">OAK-2413</a>
 */
@Test public void testChildNodeChangedWithChanges() throws CommitFailedException {
  NodeBuilder nb=EmptyNodeState.EMPTY_NODE.builder();
  nb.setProperty(JcrConstants.JCR_PRIMARYTYPE,NT_REP_PRIVILEGE,Type.NAME);
  NodeState privilegeDefinition=nb.getNodeState();
  assertTrue(NT_REP_PRIVILEGE.equals(NodeStateUtils.getPrimaryTypeName(privilegeDefinition)));
  PrivilegeValidator pv=new PrivilegeValidator(root,root);
  try {
    pv.childNodeChanged("test",privilegeDefinition,EmptyNodeState.EMPTY_NODE);
  }
 catch (  CommitFailedException e) {
    assertEquals(41,e.getCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AbstractAddMembersByIdTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAlreadyMember() throws Exception {
  testGroup.addMember(getTestUser());
  testGroup.addMember(memberGroup);
  Set<String> failed=testGroup.addMembers(getTestUser().getID(),memberGroup.getID());
  assertEquals(2,failed.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSameId() throws Exception {
  Set<String> failed=testGroup.addMembers(testGroup.getID());
  assertEquals(1,failed.size());
  assertTrue(failed.contains(testGroup.getID()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwice() throws Exception {
  Set<String> failed=testGroup.addMembers(memberGroup.getID(),memberGroup.getID());
  assertTrue(failed.isEmpty());
  assertTrue(testGroup.isDeclaredMember(memberGroup));
  Iterable<String> memberIds=getMemberIds(testGroup);
  assertEquals(1,Iterables.size(memberIds));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCyclicMembership() throws Exception {
  memberGroup.addMember(testGroup);
  root.commit();
  Set<String> failed=testGroup.addMembers(memberGroup.getID());
  assertTrue(failed.isEmpty());
  try {
    root.commit();
    fail("cyclic group membership must be detected upon commit");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(31,e.getCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AbstractRemoveMembersByIdTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSameId() throws Exception {
  Set<String> failed=testGroup.removeMembers(testGroup.getID());
  assertEquals(1,failed.size());
  assertTrue(failed.contains(testGroup.getID()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AddMembersByIdBestEffortTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCyclicWithoutAccess() throws Exception {
  memberGroup.addMember(testGroup);
  root.commit();
  try {
    Set<String> failed=addExistingMemberWithoutAccess();
    fail("CommitFailedException expected");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(31,e.getCode());
  }
 finally {
    root.refresh();
    assertFalse(testGroup.isMember(memberGroup));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AddMembersByIdIgnoreTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExistingMemberWithoutAccess() throws Exception {
  Set<String> failed=addExistingMemberWithoutAccess();
  assertEquals(ImmutableSet.of(memberGroup.getID()),failed);
  root.refresh();
  assertFalse(testGroup.isMember(memberGroup));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonExistingMember() throws Exception {
  Set<String> failed=addNonExistingMember();
  assertEquals(ImmutableSet.copyOf(NON_EXISTING_IDS),failed);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AuthorizableImplTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testEqualAuthorizables() throws Exception {
  Authorizable user=userMgr.getAuthorizable(testUser.getID());
  Authorizable group=userMgr.getAuthorizable(testGroup.getID());
  Map<Authorizable,Authorizable> equalAuthorizables=new HashMap<Authorizable,Authorizable>();
  equalAuthorizables.put(testUser,testUser);
  equalAuthorizables.put(testGroup,testGroup);
  equalAuthorizables.put(user,user);
  equalAuthorizables.put(group,group);
  equalAuthorizables.put(testUser,user);
  equalAuthorizables.put(testGroup,group);
  for (  Map.Entry entry : equalAuthorizables.entrySet()) {
    assertEquals(entry.getKey(),entry.getValue());
    assertEquals(entry.getValue(),entry.getKey());
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testHashCode() throws Exception {
  Authorizable user=userMgr.getAuthorizable(testUser.getID());
  Authorizable group=userMgr.getAuthorizable(testGroup.getID());
  Map<Authorizable,Authorizable> sameHashCode=new HashMap<Authorizable,Authorizable>();
  sameHashCode.put(testUser,testUser);
  sameHashCode.put(testGroup,testGroup);
  sameHashCode.put(user,user);
  sameHashCode.put(group,group);
  sameHashCode.put(testUser,user);
  sameHashCode.put(testGroup,group);
  for (  Map.Entry entry : sameHashCode.entrySet()) {
    assertEquals(entry.getKey().hashCode(),entry.getValue().hashCode());
  }
  UserManager otherUserManager=getUserConfiguration().getUserManager(root,getNamePathMapper());
  user=otherUserManager.getAuthorizable(testUser.getID());
  group=otherUserManager.getAuthorizable(testGroup.getID());
  Map<Authorizable,Authorizable> notSameHashCode=new HashMap<Authorizable,Authorizable>();
  notSameHashCode.put(testUser,testGroup);
  notSameHashCode.put(user,group);
  notSameHashCode.put(testUser,user);
  notSameHashCode.put(testGroup,group);
  for (  Map.Entry entry : notSameHashCode.entrySet()) {
    assertFalse(entry.getKey().hashCode() == entry.getValue().hashCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.CacheValidatorProviderTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheBelowProfile() throws Exception {
  try {
    NodeUtil node=new NodeUtil(getAuthorizableTree(getTestUser()));
    NodeUtil child=node.addChild("profile",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    child.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE).setLong(CacheConstants.REP_EXPIRATION,23);
    root.commit(CacheValidatorProvider.asCommitAttributes());
    fail("Creating rep:cache node below a user or group must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyCache() throws Exception {
  List<PropertyState> props=new ArrayList();
  props.add(PropertyStates.createProperty(CacheConstants.REP_EXPIRATION,25));
  props.add(PropertyStates.createProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES,EveryonePrincipal.NAME));
  props.add(PropertyStates.createProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME));
  props.add(PropertyStates.createProperty("residualProp","anyvalue"));
  Tree cache=getCache(getTestUser());
  for (  PropertyState prop : props) {
    try {
      cache.setProperty(prop);
      root.commit(CacheValidatorProvider.asCommitAttributes());
      fail("Modifying rep:cache node below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheByName() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      node.addChild(CacheConstants.REP_CACHE,JcrConstants.NT_UNSTRUCTURED);
      root.commit();
      fail("Creating rep:cache node below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheWithCommitInfo() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      NodeUtil cache=node.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE);
      cache.setLong(CacheConstants.REP_EXPIRATION,1);
      root.commit(CacheValidatorProvider.asCommitAttributes());
      fail("Creating rep:cache node below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryType() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      NodeUtil cache=node.addChild("childNode",JcrConstants.NT_UNSTRUCTURED);
      root.commit();
      cache.setName(JcrConstants.JCR_PRIMARYTYPE,CacheConstants.NT_REP_CACHE);
      cache.setLong(CacheConstants.REP_EXPIRATION,1);
      root.commit();
      fail("Changing primary type of residual node below an user/group to rep:Cache must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheBelowPersistedProfile() throws Exception {
  try {
    NodeUtil node=new NodeUtil(getAuthorizableTree(getTestUser()));
    NodeUtil child=node.addChild("profile",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    root.commit();
    child.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE).setLong(CacheConstants.REP_EXPIRATION,23);
    root.commit(CacheValidatorProvider.asCommitAttributes());
    fail("Creating rep:cache node below a user or group must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheOutsideOfAuthorizable() throws Exception {
  NodeUtil n=new NodeUtil(root.getTree("/"));
  try {
    NodeUtil child=n.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE);
    child.setLong(CacheConstants.REP_EXPIRATION,1);
    root.commit();
    fail("Using rep:cache/rep:Cache outside a user or group must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
    Tree c=n.getTree().getChild(CacheConstants.REP_CACHE);
    if (c.exists()) {
      c.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNestedCache() throws Exception {
  NodeUtil cache=new NodeUtil(getCache(getTestUser()));
  try {
    NodeUtil c=cache.getOrAddChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE);
    c.setLong(CacheConstants.REP_EXPIRATION,223);
    root.commit(CacheValidatorProvider.asCommitAttributes());
    fail("Creating nested cache must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheByNodeType() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      NodeUtil cache=node.addChild("childNode",CacheConstants.NT_REP_CACHE);
      cache.setLong(CacheConstants.REP_EXPIRATION,1);
      root.commit();
      fail("Creating node with nt rep:Cache below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.EveryoneGroupTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrincipal() throws Exception {
  assertEquals(EveryonePrincipal.getInstance(),everyoneGroup.getPrincipal());
  assertEquals(EveryonePrincipal.NAME,everyoneGroup.getPrincipal().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.IntermediatePathTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRelativePaths() throws Exception {
  new NodeUtil(root.getTree("/")).addChild("testNode",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  List<String> invalidPaths=ImmutableList.of("..","../..","../../..","../../../testNode","a/b/../../../c");
  for (  String relPath : invalidPaths) {
    try {
      Authorizable authorizable=createAuthorizable(false,relPath);
      root.commit();
      fail("Invalid path " + relPath + " outside of configured scope.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(28,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbsolutePathsWithInvalidParentElements() throws Exception {
  try {
    String invalidPath=UserConstants.DEFAULT_GROUP_PATH + "/../a";
    Authorizable authorizable=createAuthorizable(true,invalidPath);
    assertTrue(authorizable.getPath().startsWith(PathUtils.getAncestorPath(UserConstants.DEFAULT_GROUP_PATH,1) + "/a"));
    root.commit();
    fail("Invalid path " + invalidPath + " outside of configured scope.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(28,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCurrentRelativePath() throws Exception {
  Authorizable authorizable=createAuthorizable(false,".");
  assertEquals(UserConstants.DEFAULT_USER_PATH,PathUtils.getAncestorPath(authorizable.getPath(),1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L13_SystemUserTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUserNode() throws RepositoryException {
  Tree systemUserTree=root.getTree(systemUser.getPath());
  assertTrue(systemUserTree.exists());
  String expectedPrimaryTypeName=null;
  assertEquals(expectedPrimaryTypeName,TreeUtil.getPrimaryTypeName(systemUserTree));
  String expectedId=null;
  assertEquals(expectedId,TreeUtil.getString(systemUserTree,UserConstants.REP_AUTHORIZABLE_ID));
  String expectedPw=null;
  assertEquals(expectedPw,TreeUtil.getString(systemUserTree,UserConstants.REP_PASSWORD));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetCredentials() throws RepositoryException {
  Credentials creds=systemUser.getCredentials();
  Credentials expected=null;
  assertEquals(expected,creds);
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUser() throws RepositoryException {
  UserManager userMgr=getUserManager(root);
  Authorizable authorizable=userMgr.getAuthorizable(systemUser.getID());
  Boolean isGroup=null;
  assertEquals(isGroup.booleanValue(),authorizable.isGroup());
  Boolean isAdmin=null;
  assertEquals(isAdmin.booleanValue(),systemUser.isAdmin());
  Class cls=null;
  Authorizable sUser=userMgr.getAuthorizable(systemUser.getID(),cls);
  Iterator<Group> memberOf=sUser.memberOf();
  Set<Group> expectedGroups=null;
  while (memberOf.hasNext()) {
    assertTrue(expectedGroups.remove(memberOf.next()));
  }
  assertTrue(expectedGroups.isEmpty());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetPassword() throws RepositoryException, CommitFailedException {
  systemUser.changePassword(ExerciseUtility.TEST_PW);
  Tree systemUserTree=root.getTree(systemUser.getPath());
  String expectedPw=null;
  assertEquals(expectedPw,TreeUtil.getString(systemUserTree,UserConstants.REP_PASSWORD));
  systemUserTree.setProperty(UserConstants.REP_PASSWORD,"anotherPw");
  root.commit();
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUserPrincipal() throws RepositoryException {
  Authorizable authorizable=getUserManager(root).getAuthorizable(systemUser.getID());
  Principal principal=authorizable.getPrincipal();
  PrincipalManager principalManager=getPrincipalManager(root);
  PrincipalIterator pIter=principalManager.getGroupMembership(principal);
  int expectedSize=-1;
  assertEquals(expectedSize,pIter.getSize());
  List<Principal> expectedGroupPrincipals=null;
  while (pIter.hasNext()) {
    Principal group=pIter.nextPrincipal();
    assertTrue(expectedGroupPrincipals.remove(group));
  }
  assertTrue(expectedGroupPrincipals.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L14_AuthorizableNodeNameTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAuthorizableNodeName() throws RepositoryException {
  testUser=userManager.createUser("test/:User",null);
  String nodeName=Text.getName(testUser.getPath());
  String expectedNodeName=null;
  assertEquals(expectedNodeName,nodeName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L16_RepositoryWithoutUserManagement </h4><pre class="type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLogin() throws LoginException, NoSuchWorkspaceException {
  String expectedId=null;
  Credentials creds=null;
  ContentSession s=login(creds);
  AuthInfo authInfo=s.getAuthInfo();
  assertNotSame(AuthInfo.EMPTY,authInfo);
  assertEquals(expectedId,authInfo.getUserID());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L3_UserVsPrincipalTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCreateWithReverse() throws RepositoryException, CommitFailedException {
  User user2=null;
  try {
    user2=getUserManager(root).createUser(testPrincipal.getName(),ExerciseUtility.TEST_PW,new PrincipalImpl(testId),null);
    root.commit();
    Boolean expectedEquals=null;
    assertEquals(expectedEquals.booleanValue(),testUser.equals(user2));
  }
  finally {
    if (user2 != null) {
      user2.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLookup() throws RepositoryException {
  Map<String,Object[]> resultMap=ImmutableMap.of(testId,new Object[]{null,null,null},testPrincipal.getName(),new Object[]{null,null,null},testGroupId,new Object[]{null,null},testGroupPrincipal.getName(),new Object[]{null,null});
  for (  String key : resultMap.keySet()) {
    Object[] result=resultMap.get(key);
    Principal expectedP=(Principal)result[0];
    Principal principal=principalManager.getPrincipal(key);
    assertEquals(expectedP,principal);
    Principal p=new PrincipalImpl(key);
    Authorizable a=getUserManager(root).getAuthorizable(p);
    if (a != null) {
      assertEquals(expectedP,a.getPrincipal());
    }
    Authorizable expectedA=(Authorizable)result[1];
    a=getUserManager(root).getAuthorizable(key);
    assertEquals(expectedA,a);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L4_AuthorizableIdTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIdWithManualCreation() throws RepositoryException, CommitFailedException {
  Tree userTree=root.getTree(testUser.getPath());
  Tree authorizableFolder=userTree.getParent();
  try {
    String id=TreeUtil.getString(userTree,UserConstants.REP_AUTHORIZABLE_ID);
    Tree anotherUser=authorizableFolder.addChild("nodeName");
    anotherUser.setProperty(userTree.getProperty(JcrConstants.JCR_PRIMARYTYPE));
    anotherUser.setProperty(userTree.getProperty(JcrConstants.JCR_UUID));
    anotherUser.setProperty(UserConstants.REP_PRINCIPAL_NAME,TreeUtil.getString(userTree,UserConstants.REP_PRINCIPAL_NAME));
    anotherUser.setProperty(UserConstants.REP_AUTHORIZABLE_ID,id);
    root.commit();
    User another=getUserManager(root).getAuthorizable(id,User.class);
    assertEquals(id,another.getID());
    assertFalse(another.equals(testUser));
  }
  finally {
    root.refresh();
    Tree t=authorizableFolder.getChild("nodeName");
    if (t.exists()) {
      t.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetByID() throws RepositoryException {
  UserManager uMgr=getUserManager(root);
  Group g=uMgr.getAuthorizable(testUser.getID(),Group.class);
  assertEquals(g,uMgr.getAuthorizable(testGroup.getID()));
  assertEquals(g,uMgr.getAuthorizable(testGroup.getPrincipal().getName()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L8_MembershipTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddRemoveMembers() throws RepositoryException, CommitFailedException {
  root.commit();
  assertTrue(group.isDeclaredMember(user));
  assertFalse(group2.isDeclaredMember(user));
  assertFalse(group3.isDeclaredMember(user));
  assertTrue(group2.isMember(user));
  assertTrue(group3.isMember(user));
  Boolean isDeclaredMember=null;
  assertEquals(isDeclaredMember,group.isDeclaredMember(group2));
  isDeclaredMember=null;
  assertEquals(isDeclaredMember,group3.isDeclaredMember(group));
  Boolean isMember=null;
  assertEquals(isMember,group.isMember(group2));
  isMember=null;
  assertEquals(isMember,group3.isMember(group));
  root.commit();
  assertFalse(group.isMember(user));
  assertTrue(group.isMember(group2));
  assertTrue(group3.isMember(group2));
  assertTrue(group3.isMember(group));
  assertTrue(group3.isMember(user));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.MembershipProviderTest </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManyMemberships() throws Exception {
  Set<String> memberships=new HashSet<String>();
  User usr=createUser();
  for (int i=0; i < NUM_GROUPS; i++) {
    Group grp=createGroup();
    grp.addMember(usr);
    memberships.add(grp.getID());
  }
  root.commit();
  Iterator<Group> iter=usr.declaredMemberOf();
  while (iter.hasNext()) {
    Group group=iter.next();
    Assert.assertTrue(memberships.remove(group.getID()));
  }
  assertEquals(0,memberships.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManyMembers() throws Exception {
  Set<String> members=new HashSet<String>();
  Group grp=createGroup();
  for (int i=0; i < NUM_USERS; i++) {
    User usr=createUser();
    grp.addMember(usr);
    members.add(usr.getID());
  }
  root.commit();
  checkMembers(grp,members);
  Tree tree=root.getTree(grp.getPath());
  assertEquals("rep:members property must have correct number of references",SIZE_TH,tree.getProperty(UserConstants.REP_MEMBERS).count());
  Tree membersList=tree.getChild(UserConstants.REP_MEMBERS_LIST);
  assertTrue("rep:memberList must exist",membersList.exists());
  assertEquals("rep:memberList must have correct primary type.",UserConstants.NT_REP_MEMBER_REFERENCES_LIST,membersList.getProperty(JcrConstants.JCR_PRIMARYTYPE).getValue(Type.STRING));
  assertEquals("rep:memberList must have correct number of child nodes.",(NUM_USERS / SIZE_TH) - 1,membersList.getChildrenCount(Long.MAX_VALUE));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNestedMembers() throws Exception {
  Set<String> members=new HashSet<String>();
  Set<String> declaredMembers=new HashSet<String>();
  Group grp=createGroup();
  for (int i=0; i < 10; i++) {
    Group g1=createGroup();
    grp.addMember(g1);
    members.add(g1.getID());
    declaredMembers.add(g1.getID());
    for (int j=0; j < 10; j++) {
      Group g2=createGroup();
      g1.addMember(g2);
      members.add(g2.getID());
      for (int k=0; k < 10; k++) {
        User usr=createUser();
        g2.addMember(usr);
        members.add(usr.getID());
      }
    }
  }
  root.commit();
  checkMembers(grp,members);
  Iterator<Authorizable> iter=grp.getDeclaredMembers();
  while (iter.hasNext()) {
    Authorizable member=iter.next();
    Assert.assertTrue(declaredMembers.remove(member.getID()));
  }
  assertEquals(0,declaredMembers.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveMembers() throws Exception {
  Set<String> members=new HashSet<String>();
  String[] users=new String[NUM_USERS];
  Group grp=createGroup();
  for (int i=0; i < NUM_USERS; i++) {
    User usr=createUser();
    grp.addMember(usr);
    members.add(usr.getID());
    users[i]=usr.getID();
  }
  root.commit();
  for (int i=0; i < SIZE_TH; i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.remove(users[i]);
    grp.removeMember(auth);
  }
  root.commit();
  checkMembers(grp,members);
  Tree tree=root.getTree(grp.getPath());
  assertNull("rep:members property not exist",tree.getProperty(UserConstants.REP_MEMBERS));
  for (int i=0; i < SIZE_TH / 2; i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.add(users[i]);
    grp.addMember(auth);
  }
  root.commit();
  assertEquals("rep:members property must have correct number of references",SIZE_TH / 2,tree.getProperty(UserConstants.REP_MEMBERS).count());
  checkMembers(grp,members);
  for (int i=2 * SIZE_TH; i < (3 * SIZE_TH); i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.remove(users[i]);
    grp.removeMember(auth);
  }
  root.commit();
  checkMembers(grp,members);
  Tree membersList=tree.getChild(UserConstants.REP_MEMBERS_LIST);
  assertFalse("the first overflow node must not exist",membersList.getChild("1").exists());
  for (int i=2 * SIZE_TH; i < (3 * SIZE_TH); i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.add(users[i]);
    grp.addMember(auth);
  }
  root.commit();
  checkMembers(grp,members);
  membersList=tree.getChild(UserConstants.REP_MEMBERS_LIST);
  assertTrue("the first overflow node must not exist",membersList.getChild("1").exists());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNestedMemberships() throws Exception {
  Set<String> memberships=new HashSet<String>();
  User user=createUser();
  Group grp=createGroup();
  memberships.add(grp.getID());
  for (int i=0; i < 10; i++) {
    Group g1=createGroup();
    grp.addMember(g1);
    memberships.add(g1.getID());
    for (int j=0; j < 10; j++) {
      Group g2=createGroup();
      g1.addMember(g2);
      memberships.add(g2.getID());
      g2.addMember(user);
    }
  }
  root.commit();
  Iterator<Group> iter=user.memberOf();
  while (iter.hasNext()) {
    Group group=iter.next();
    Assert.assertTrue(memberships.remove(group.getID()));
  }
  assertEquals(0,memberships.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordExpiryHistoryTest </h4><pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticatePasswordExpiredAndSame() throws Exception {
  User user=getTestUser();
  Authentication a=new UserAuthentication(getUserConfiguration(),root,userId);
  root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).setProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED,0);
  root.commit();
  try {
    a.authenticate(new SimpleCredentials(userId,userId.toCharArray()));
    fail("Credentials should be expired");
  }
 catch (  CredentialExpiredException e) {
    SimpleCredentials pwChangeCreds=new SimpleCredentials(userId,userId.toCharArray());
    try {
      pwChangeCreds.setAttribute(UserConstants.CREDENTIALS_ATTRIBUTE_NEWPASSWORD,user.getID());
      a.authenticate(pwChangeCreds);
      fail("User password changed in spite of enabled pw history");
    }
 catch (    CredentialExpiredException c) {
      Object attr=pwChangeCreds.getAttribute(PasswordHistoryException.class.getSimpleName());
      assertEquals("credentials should contain pw change failure reason","New password is identical to the current password.",attr);
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticatePasswordExpiredAndInHistory() throws Exception {
  User user=getTestUser();
  user.changePassword("pw12345678");
  Authentication a=new UserAuthentication(getUserConfiguration(),root,userId);
  root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).setProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED,0);
  root.commit();
  try {
    a.authenticate(new SimpleCredentials(userId,"pw12345678".toCharArray()));
    fail("Credentials should be expired");
  }
 catch (  CredentialExpiredException e) {
    SimpleCredentials pwChangeCreds=new SimpleCredentials(userId,"pw12345678".toCharArray());
    try {
      pwChangeCreds.setAttribute(UserConstants.CREDENTIALS_ATTRIBUTE_NEWPASSWORD,user.getID());
      a.authenticate(pwChangeCreds);
      fail("User password changed in spite of enabled pw history");
    }
 catch (    CredentialExpiredException c) {
      Object attr=pwChangeCreds.getAttribute(PasswordHistoryException.class.getSimpleName());
      assertEquals("credentials should contain pw change failure reason","New password was found in password history.",attr);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordExpiryTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUser() throws Exception {
  String newUserId="newuser" + UUID.randomUUID();
  User user=null;
  try {
    user=getUserManager(root).createUser(newUserId,newUserId);
    root.commit();
    Tree pwdTree=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD);
    assertTrue(pwdTree.exists());
    assertTrue(TreeUtil.isNodeType(pwdTree,UserConstants.NT_REP_PASSWORD,root.getTree(NodeTypeConstants.NODE_TYPES_PATH)));
    ReadOnlyNodeTypeManager ntMgr=ReadOnlyNodeTypeManager.getInstance(root,getNamePathMapper());
    assertTrue(ntMgr.getDefinition(pwdTree.getParent(),pwdTree).isProtected());
    PropertyState property=pwdTree.getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
    assertNotNull(property);
    assertEquals(Type.LONG,property.getType());
    assertTrue(property.getValue(Type.LONG,0) > 0);
    assertFalse(user.hasProperty(UserConstants.REP_PWD + "/" + UserConstants.REP_PASSWORD_LAST_MODIFIED));
  }
  finally {
    if (user != null) {
      user.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordHistoryTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEnabledPasswordHistory() throws Exception {
  PasswordHistory history=new PasswordHistory(CONFIG);
  assertTrue(isEnabled(history));
  assertEquals(10,getMaxSize(history).longValue());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHistoryUpperLimit() throws Exception {
  PasswordHistory history=new PasswordHistory(ConfigurationParameters.of(PARAM_PASSWORD_HISTORY_SIZE,Integer.MAX_VALUE));
  assertTrue(isEnabled(history));
  assertEquals(1000,getMaxSize(history).longValue());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHistoryMaxSize() throws Exception {
  User user=getTestUser();
  for (  String pw : PASSWORDS) {
    user.changePassword(pw);
    root.commit();
  }
  assertEquals(10,getHistory(user).size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testCheckPasswordHistory() throws Exception {
  Tree userTree=root.getTree(getTestUser().getPath());
  PasswordHistory history=new PasswordHistory(CONFIG);
  assertTrue(isEnabled(history));
  assertEquals(10,getMaxSize(history).longValue());
  history.updatePasswordHistory(userTree,getTestUser().getID());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigurationChange() throws Exception {
  User user=getTestUser();
  Tree userTree=root.getTree(user.getPath());
  PasswordHistory history=new PasswordHistory(CONFIG);
  for (  String pw : PASSWORDS) {
    assertTrue(history.updatePasswordHistory(userTree,pw));
  }
  assertEquals(10,getHistory(user).size());
  history=new PasswordHistory(ConfigurationParameters.of(PARAM_PASSWORD_HISTORY_SIZE,5));
  List<String> oldPwds=getHistory(user);
  assertEquals(10,oldPwds.size());
  Iterables.skip(oldPwds,6);
  history.updatePasswordHistory(userTree,oldPwds.iterator().next());
  assertEquals(5,getHistory(user).size());
  history=new PasswordHistory(CONFIG);
  history.updatePasswordHistory(userTree,"newPwd");
  assertEquals(6,getHistory(user).size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHistoryWithSinglePasswordChange() throws Exception {
  User user=getTestUser();
  String oldPassword=TreeUtil.getString(root.getTree(user.getPath()),REP_PASSWORD);
  user.changePassword("newPwd");
  root.commit();
  assertTrue(root.getTree(user.getPath()).hasChild(REP_PWD));
  Tree pwTree=root.getTree(user.getPath()).getChild(REP_PWD);
  assertTrue(pwTree.hasProperty(REP_PWD_HISTORY));
  List<String> history=getHistory(user);
  assertEquals(1,history.size());
  assertEquals(oldPassword,history.iterator().next());
  String currentPw=TreeUtil.getString(root.getTree(user.getPath()),REP_PASSWORD);
  assertNotSame(currentPw,oldPassword);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEnableDisable() throws Exception {
  User user=getTestUser();
  Tree userTree=root.getTree(user.getPath());
  PasswordHistory history=new PasswordHistory(CONFIG);
  for (  String pw : PASSWORDS) {
    assertTrue(history.updatePasswordHistory(userTree,pw));
  }
  assertEquals(10,getHistory(user).size());
  history=new PasswordHistory(ConfigurationParameters.EMPTY);
  history.updatePasswordHistory(userTree,PASSWORDS[8]);
  assertEquals(10,getHistory(user).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.RandomAuthorizableNodeNameTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGenerateNodeName(){
  String nodeName=nameGenerator.generateNodeName(id);
  assertFalse("id".equals(nodeName));
  assertEquals(RandomAuthorizableNodeName.DEFAULT_LENGTH,nodeName.length());
  assertFalse(nodeName.equals(nameGenerator.generateNodeName(id)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.RemoveMembersByIdBestEffortTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonExistingMember() throws Exception {
  Set<String> failed=removeNonExistingMember();
  assertEquals(ImmutableSet.copyOf(NON_EXISTING_IDS),failed);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.RemoveMembersByIdIgnoreTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonExistingMember() throws Exception {
  Set<String> failed=removeNonExistingMember();
  assertEquals(ImmutableSet.copyOf(NON_EXISTING_IDS),failed);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingAccessMember() throws Exception {
  Set<String> failed=removeExistingMemberWithoutAccess();
  assertEquals(ImmutableSet.of(memberGroup.getID()),failed);
  root.refresh();
  assertTrue(testGroup.isMember(memberGroup));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.ResetExpiredPasswordTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeWithNonStringAttribute() throws Exception {
  try {
    authenticate(userId,new Long(1));
    fail("Authentication with non-string attribute should fail.");
  }
 catch (  CredentialExpiredException e) {
  }
 finally {
    Tree userTree=root.getTree(getTestUser().getPath());
    assertTrue(PasswordUtil.isSame(userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING),userId));
    assertEquals(0,userTree.getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getValue(Type.LONG).longValue());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeWithWrongPw() throws Exception {
  try {
    authenticate("wrongPw","newPw");
    fail("Authentication with wrong expired password should fail and should not reset pw.");
  }
 catch (  LoginException e) {
  }
 finally {
    Tree userTree=root.getTree(getTestUser().getPath());
    assertTrue(PasswordUtil.isSame(userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING),userId));
    assertEquals(0,userTree.getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getValue(Type.LONG).longValue());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.SystemUserImplTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCredentials() throws Exception {
  user=createUser(null);
  Credentials creds=user.getCredentials();
  assertTrue(creds instanceof UserIdCredentials);
  UserIdCredentials impl=(UserIdCredentials)creds;
  assertEquals(uid,impl.getUserId());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUserTree() throws Exception {
  user=createUser(null);
  Tree t=root.getTree(user.getPath());
  assertFalse(t.hasProperty(UserConstants.REP_PASSWORD));
  assertEquals(UserConstants.NT_REP_SYSTEM_USER,TreeUtil.getPrimaryTypeName(t));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserConfigurationImplTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidators(){
  UserConfigurationImpl configuration=new UserConfigurationImpl(getSecurityProvider());
  List<? extends ValidatorProvider> validators=configuration.getValidators(adminSession.getWorkspaceName(),Collections.<Principal>emptySet(),new MoveTracker());
  assertEquals(2,validators.size());
  List<String> clNames=Lists.newArrayList(UserValidatorProvider.class.getName(),CacheValidatorProvider.class.getName());
  for (  ValidatorProvider vp : validators) {
    clNames.remove(vp.getClass().getName());
  }
  assertTrue(clNames.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserImplTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCredentialsUserWithoutPassword() throws Exception {
  user=userMgr.createUser(uid,null);
  root.commit();
  Credentials creds=user.getCredentials();
  assertTrue(creds instanceof UserIdCredentials);
  assertEquals(uid,((UserIdCredentials)creds).getUserId());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCredentials() throws Exception {
  user=userMgr.createUser(uid,uid);
  root.commit();
  Credentials creds=user.getCredentials();
  assertTrue(creds instanceof CredentialsImpl);
  CredentialsImpl cImpl=(CredentialsImpl)creds;
  assertEquals(uid,cImpl.getUserId());
  assertTrue(PasswordUtil.isSame(cImpl.getPasswordHash(),uid));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserInitializerTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnonymous() throws Exception {
  Authorizable a=userMgr.getAuthorizable(UserUtil.getAnonymousId(config));
  assertFalse(a.isGroup());
  User anonymous=(User)a;
  assertFalse(anonymous.isAdmin());
  assertFalse(anonymous.getPrincipal() instanceof AdminPrincipal);
  assertTrue(anonymous.getPrincipal() instanceof TreeBasedPrincipal);
  assertEquals(anonymous.getID(),anonymous.getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserIndexDefinitions() throws Exception {
  Tree oakIndex=root.getTree('/' + IndexConstants.INDEX_DEFINITIONS_NAME);
  assertTrue(oakIndex.exists());
  Tree id=oakIndex.getChild("authorizableId");
  assertIndexDefinition(id,UserConstants.REP_AUTHORIZABLE_ID,true);
  Tree princName=oakIndex.getChild("principalName");
  assertIndexDefinition(princName,UserConstants.REP_PRINCIPAL_NAME,true);
  Iterable<String> declaringNtNames=TreeUtil.getStrings(princName,IndexConstants.DECLARING_NODE_TYPES);
  assertArrayEquals(new String[]{UserConstants.NT_REP_AUTHORIZABLE},Iterables.toArray(declaringNtNames,String.class));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdminUser() throws Exception {
  Authorizable a=userMgr.getAuthorizable(UserUtil.getAdminId(config));
  assertFalse(a.isGroup());
  User admin=(User)a;
  assertTrue(admin.isAdmin());
  assertTrue(admin.getPrincipal() instanceof AdminPrincipal);
  assertTrue(admin.getPrincipal() instanceof TreeBasedPrincipal);
  assertEquals(admin.getID(),admin.getPrincipal().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserManagerImplTest </h4><pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPassword() throws Exception {
  User user=userMgr.createUser(testUserId,"pw");
  root.commit();
  List<String> pwds=new ArrayList<String>();
  pwds.add("pw");
  pwds.add("");
  pwds.add("{sha1}pw");
  Tree userTree=root.getTree(user.getPath());
  for (  String pw : pwds) {
    userMgr.setPassword(userTree,testUserId,pw,true);
    String pwHash=userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING);
    assertNotNull(pwHash);
    assertTrue(PasswordUtil.isSame(pwHash,pw));
  }
  for (  String pw : pwds) {
    userMgr.setPassword(userTree,testUserId,pw,false);
    String pwHash=userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING);
    assertNotNull(pwHash);
    if (!pw.startsWith("{")) {
      assertTrue(PasswordUtil.isSame(pwHash,pw));
    }
 else {
      assertFalse(PasswordUtil.isSame(pwHash,pw));
      assertEquals(pw,pwHash);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserPrincipalProviderWithCacheTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLongOverflow() throws Exception {
  long[] maxCache=new long[]{Long.MAX_VALUE,Long.MAX_VALUE - 1,Long.MAX_VALUE - 10000};
  Root systemRoot=getSystemSession().getLatestRoot();
  for (  long exp : maxCache) {
    changeUserConfiguration(ConfigurationParameters.of(UserPrincipalProvider.PARAM_CACHE_EXPIRATION,exp));
    PrincipalProvider pp=createPrincipalProvider(systemRoot);
    pp.getPrincipals(userId);
    Tree userTree=systemRoot.getTree(getTestUser().getPath());
    Tree cache=userTree.getChild(CacheConstants.REP_CACHE);
    assertTrue(cache.exists());
    PropertyState propertyState=cache.getProperty(CacheConstants.REP_EXPIRATION);
    assertNotNull(propertyState);
    assertEquals(Long.MAX_VALUE,propertyState.getValue(Type.LONG).longValue());
    cache.remove();
    systemRoot.commit();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMembershipChange() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  UserManager uMgr=getUserManager(root);
  Group gr=uMgr.getAuthorizable(groupId,Group.class);
  assertTrue(gr.removeMember(uMgr.getAuthorizable(userId)));
  root.commit();
  systemRoot.refresh();
  Set<? extends Principal> principalsAgain=pp.getPrincipals(userId);
  assertEquals(principals,principalsAgain);
  changeUserConfiguration(ConfigurationParameters.EMPTY);
  pp=createPrincipalProvider(systemRoot);
  assertPrincipals(pp.getPrincipals(userId),EveryonePrincipal.getInstance(),getTestUser().getPrincipal());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetGroupMembershipPopulatesCache() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getGroupMembership(getTestUser().getPrincipal());
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal());
  root.refresh();
  Tree principalCache=getCacheTree(root);
  assertTrue(principalCache.exists());
  assertEquals(CacheConstants.NT_REP_CACHE,TreeUtil.getPrimaryTypeName(principalCache));
  assertNotNull(principalCache.getProperty(CacheConstants.REP_EXPIRATION));
  PropertyState ps=principalCache.getProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES);
  assertNotNull(ps);
  String val=ps.getValue(Type.STRING);
  assertEquals(testGroup.getPrincipal().getName(),val);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGroupPrincipals() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Iterable<? extends Principal> principals=Iterables.filter(pp.getPrincipals(userId),new GroupPredicate());
  for (  Principal p : principals) {
    String className=p.getClass().getName();
    assertEquals("org.apache.jackrabbit.oak.security.user.UserPrincipalProvider$GroupPrincipal",className);
  }
  Principal testPrincipal=getTestUser().getPrincipal();
  Iterable<? extends Principal> principalsAgain=Iterables.filter(pp.getPrincipals(userId),new GroupPredicate());
  for (  Principal p : principalsAgain) {
    String className=p.getClass().getName();
    assertEquals("org.apache.jackrabbit.oak.security.user.UserPrincipalProvider$CachedGroupPrincipal",className);
    assertTrue(p instanceof TreeBasedPrincipal);
    assertEquals(testGroup.getPath(),((TreeBasedPrincipal)p).getPath());
    java.security.acl.Group principalGroup=(java.security.acl.Group)p;
    assertTrue(principalGroup.isMember(testPrincipal));
    Enumeration<? extends Principal> members=principalGroup.members();
    assertTrue(members.hasMoreElements());
    assertEquals(testPrincipal,members.nextElement());
    assertEquals(testGroup2.getPrincipal(),members.nextElement());
    assertFalse(members.hasMoreElements());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPrincipalManagerGetGroupMembershipPopulatesCache() throws Exception {
  PrincipalManager principalManager=getPrincipalManager(systemRoot);
  PrincipalIterator principalIterator=principalManager.getGroupMembership(getTestUser().getPrincipal());
  assertPrincipals(ImmutableSet.copyOf(principalIterator),EveryonePrincipal.getInstance(),testGroup.getPrincipal());
  root.refresh();
  Tree principalCache=getCacheTree(root);
  assertTrue(principalCache.exists());
  assertEquals(CacheConstants.NT_REP_CACHE,TreeUtil.getPrimaryTypeName(principalCache));
  assertNotNull(principalCache.getProperty(CacheConstants.REP_EXPIRATION));
  PropertyState ps=principalCache.getProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES);
  assertNotNull(ps);
  String val=ps.getValue(Type.STRING);
  assertEquals(testGroup.getPrincipal().getName(),val);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipalsPopulatesCache() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal(),getTestUser().getPrincipal());
  root.refresh();
  Tree principalCache=getCacheTree(root);
  assertTrue(principalCache.exists());
  assertEquals(CacheConstants.NT_REP_CACHE,TreeUtil.getPrimaryTypeName(principalCache));
  assertNotNull(principalCache.getProperty(CacheConstants.REP_EXPIRATION));
  PropertyState ps=principalCache.getProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES);
  assertNotNull(ps);
  String val=ps.getValue(Type.STRING);
  assertEquals(testGroup.getPrincipal().getName(),val);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCacheUpdate() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  assertTrue(getCacheTree(systemRoot).exists());
  UserManager uMgr=getUserConfiguration().getUserManager(systemRoot,namePathMapper);
  Group gr=uMgr.getAuthorizable(groupId,Group.class);
  assertTrue(gr.removeMember(uMgr.getAuthorizable(userId)));
  systemRoot.commit();
  Tree cache=getCacheTree(systemRoot);
  cache.setProperty(CacheConstants.REP_EXPIRATION,2);
  systemRoot.commit(CacheValidatorProvider.asCommitAttributes());
  pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principalsAgain=pp.getPrincipals(userId);
  assertFalse(principals.equals(principalsAgain));
  assertPrincipals(principalsAgain,EveryonePrincipal.getInstance(),getTestUser().getPrincipal());
  cache=getCacheTree(systemRoot);
  assertNotSame(2,new NodeUtil(cache).getLong(CacheConstants.REP_EXPIRATION,2));
  assertEquals("",TreeUtil.getString(cache,CacheConstants.REP_GROUP_PRINCIPAL_NAMES));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCachedPrincipalsGroupRemoved() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Iterable<? extends Principal> principals=Iterables.filter(pp.getPrincipals(userId),new GroupPredicate());
  for (  Principal p : principals) {
    String className=p.getClass().getName();
    assertEquals("org.apache.jackrabbit.oak.security.user.UserPrincipalProvider$GroupPrincipal",className);
  }
  testGroup.remove();
  root.commit();
  systemRoot.refresh();
  Iterable<? extends Principal> principalsAgain=Iterables.filter(pp.getPrincipals(userId),new GroupPredicate());
  for (  Principal p : principalsAgain) {
    String className=p.getClass().getName();
    assertEquals("org.apache.jackrabbit.oak.security.user.UserPrincipalProvider$CachedGroupPrincipal",className);
    assertTrue(p instanceof TreeBasedPrincipal);
    assertNull(((TreeBasedPrincipal)p).getPath());
    java.security.acl.Group principalGroup=(java.security.acl.Group)p;
    assertFalse(principalGroup.isMember(getTestUser().getPrincipal()));
    Enumeration<? extends Principal> members=principalGroup.members();
    assertFalse(members.hasMoreElements());
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExtractPrincipalsFromCache() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal(),getTestUser().getPrincipal());
  Set<? extends Principal> principalsAgain=pp.getPrincipals(userId);
  assertEquals(principals,principalsAgain);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserProviderTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroup() throws RepositoryException {
  UserProvider up=createUserProvider();
  Tree groupTree=up.createGroup("group1",null);
  assertNotNull(groupTree);
  assertTrue(Text.isDescendant(defaultGroupPath,groupTree.getPath()));
  int level=defaultConfig.getConfigValue(UserConstants.PARAM_DEFAULT_DEPTH,UserConstants.DEFAULT_DEPTH) + 1;
  assertEquals(defaultGroupPath,Text.getRelativeParent(groupTree.getPath(),level));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserWithPath() throws Exception {
  UserProvider up=createUserProvider(1);
  Tree userTree=up.createUser("nadine","a/b/c");
  assertNotNull(userTree);
  assertTrue(Text.isDescendant(customUserPath,userTree.getPath()));
  String userPath=customUserPath + "/a/b/c/nadine";
  assertEquals(userPath,userTree.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthorizableByPath() throws Exception {
  UserProvider up=createUserProvider();
  Tree user=up.createUser("shams",null);
  Tree a=up.getAuthorizableByPath(user.getPath());
  assertNotNull(a);
  assertEquals(user.getPath(),a.getPath());
  Tree group=up.createGroup("devs",null);
  a=up.getAuthorizableByPath(group.getPath());
  assertNotNull(a);
  assertEquals(group.getPath(),a.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroupWithPath() throws Exception {
  UserProvider up=createUserProvider(4);
  Tree group=up.createGroup("authors","a/b/c");
  assertNotNull(group);
  assertTrue(Text.isDescendant(customGroupPath,group.getPath()));
  String groupPath=customGroupPath + "/a/b/c/authors";
  assertEquals(groupPath,group.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIllegalChars() throws Exception {
  UserProvider userProvider=createUserProvider();
  Map<String,String> m=new HashMap<String,String>();
  m.put("z[x]","/z/" + Text.escapeIllegalJcrChars("z[") + '/'+ Text.escapeIllegalJcrChars("z[x]"));
  m.put("z*x","/z/" + Text.escapeIllegalJcrChars("z*") + '/'+ Text.escapeIllegalJcrChars("z*x"));
  m.put("z/x","/z/" + Text.escapeIllegalJcrChars("z/") + '/'+ Text.escapeIllegalJcrChars("z/x"));
  m.put("%\r|",'/' + Text.escapeIllegalJcrChars("%") + '/'+ Text.escapeIllegalJcrChars("%\r")+ '/'+ Text.escapeIllegalJcrChars("%\r|"));
  for (  String uid : m.keySet()) {
    Tree user=userProvider.createUser(uid,null);
    root.commit();
    assertEquals(defaultUserPath + m.get(uid),user.getPath());
    assertEquals(uid,UserUtil.getAuthorizableId(user));
    Tree ath=userProvider.getAuthorizable(uid);
    assertNotNull("Tree with id " + uid + " must exist.",ath);
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCreateWithCustomDepth() throws Exception {
  UserProvider userProvider=createUserProvider(3);
  Tree userTree=userProvider.createUser("b",null);
  assertEquals(customUserPath + "/b/bb/bbb/b",userTree.getPath());
  Map<String,String> m=new HashMap<String,String>();
  m.put("bb","/b/bb/bbb/bb");
  m.put("bbb","/b/bb/bbb/bbb");
  m.put("bbbb","/b/bb/bbb/bbbb");
  m.put("bL","/b/bL/bLL/bL");
  m.put("bLbh","/b/bL/bLb/bLbh");
  m.put("b_Lb","/b/b_/b_L/b_Lb");
  m.put("basiL","/b/ba/bas/basiL");
  for (  String uid : m.keySet()) {
    userTree=userProvider.createUser(uid,null);
    assertEquals(customUserPath + m.get(uid),userTree.getPath());
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthorizable() throws Exception {
  UserProvider up=createUserProvider();
  String userID="hannah";
  String groupID="cLevel";
  Tree user=up.createUser(userID,null);
  Tree group=up.createGroup(groupID,null);
  root.commit();
  Tree a=up.getAuthorizable(userID);
  assertNotNull(a);
  assertEquals(user.getPath(),a.getPath());
  a=up.getAuthorizable(groupID);
  assertNotNull(a);
  assertEquals(group.getPath(),a.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAuthorizableId() throws Exception {
  UserProvider up=createUserProvider();
  String userID="Amanda";
  Tree user=up.createUser(userID,null);
  assertEquals(userID,UserUtil.getAuthorizableId(user));
  String groupID="visitors";
  Tree group=up.createGroup(groupID,null);
  assertEquals(groupID,UserUtil.getAuthorizableId(group));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCollisions() throws Exception {
  ConfigurationParameters config=ConfigurationParameters.of(UserConstants.PARAM_AUTHORIZABLE_NODE_NAME,new AuthorizableNodeName(){
    @Nonnull @Override public String generateNodeName(    @Nonnull String authorizableId){
      return "aaa";
    }
  }
);
  UserProvider up=new UserProvider(root,config);
  try {
    Tree u1=up.createUser("a",null);
    assertEquals("aaa",u1.getName());
    Tree u2=up.createUser("b",null);
    assertEquals("aaa1",u2.getName());
    Tree u3=up.createUser("c",null);
    assertEquals("aaa2",u3.getName());
    Tree u4=up.createUser("d",null);
    assertEquals("aaa3",u4.getName());
  }
  finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUser() throws Exception {
  UserProvider up=createUserProvider();
  Tree userTree=up.createUser("user1",null);
  assertNotNull(userTree);
  assertTrue(Text.isDescendant(defaultUserPath,userTree.getPath()));
  int level=defaultConfig.getConfigValue(UserConstants.PARAM_DEFAULT_DEPTH,UserConstants.DEFAULT_DEPTH) + 1;
  assertEquals(defaultUserPath,Text.getRelativeParent(userTree.getPath(),level));
  userTree=up.createUser("b",null);
  assertEquals(defaultUserPath + "/b/bb/b",userTree.getPath());
  Map<String,String> m=new HashMap<String,String>();
  m.put("bb","/b/bb/bb");
  m.put("bbb","/b/bb/bbb");
  m.put("bbbb","/b/bb/bbbb");
  m.put("bh","/b/bh/bh");
  m.put("bHbh","/b/bH/bHbh");
  m.put("b_Hb","/b/b_/b_Hb");
  m.put("basim","/b/ba/basim");
  for (  String uid : m.keySet()) {
    userTree=up.createUser(uid,null);
    assertEquals(defaultUserPath + m.get(uid),userTree.getPath());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserValidatorTest </h4><pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateNestedUser() throws Exception {
  Tree userTree=root.getTree(getTestUser().getPath());
  NodeUtil userNode=new NodeUtil(userTree);
  NodeUtil profile=userNode.addChild("profile",JcrConstants.NT_UNSTRUCTURED);
  NodeUtil nested=profile.addChild("nested",UserConstants.NT_REP_USER);
  nested.setString(UserConstants.REP_PRINCIPAL_NAME,"nested");
  nested.setString(UserConstants.REP_AUTHORIZABLE_ID,"nested");
  nested.setString(JcrConstants.JCR_UUID,IdentifierManager.generateUUID("nested"));
  try {
    root.commit();
    fail("Creating nested users must be detected.");
  }
 catch (  CommitFailedException e) {
    assertEquals(29,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateNestedUser2Steps() throws Exception {
  Tree userTree=root.getTree(getTestUser().getPath());
  NodeUtil userNode=new NodeUtil(userTree);
  NodeUtil profile=userNode.addChild("profile",JcrConstants.NT_UNSTRUCTURED);
  NodeUtil nested=profile.addChild("nested",JcrConstants.NT_UNSTRUCTURED);
  nested.setString(UserConstants.REP_PRINCIPAL_NAME,"nested");
  nested.setString(UserConstants.REP_AUTHORIZABLE_ID,"nested");
  nested.setString(JcrConstants.JCR_UUID,IdentifierManager.generateUUID("nested"));
  root.commit();
  try {
    nested.setName(JcrConstants.JCR_PRIMARYTYPE,UserConstants.NT_REP_USER);
    root.commit();
    fail("Creating nested users must be detected.");
  }
 catch (  CommitFailedException e) {
    assertEquals(29,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.query.UserQueryManagerTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testFindNodesExact() throws Exception {
  Value vs=valueFactory.createValue("value \\, containing backslash");
  user.setProperty(propertyName,vs);
  root.commit();
  try {
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value \\, containing backslash",AuthorizableType.USER,true);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindNodesNonExactWithApostrophe() throws Exception {
  Value vs=valueFactory.createValue("value ' with apostrophe");
  try {
    user.setProperty(propertyName,vs);
    root.commit();
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value ' with apostrophe",AuthorizableType.USER,false);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindNodesExactWithApostrophe() throws Exception {
  Value vs=valueFactory.createValue("value ' with apostrophe");
  try {
    user.setProperty(propertyName,vs);
    root.commit();
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value ' with apostrophe",AuthorizableType.USER,true);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindNodesNonExact() throws Exception {
  Value vs=valueFactory.createValue("value \\, containing backslash");
  user.setProperty(propertyName,vs);
  root.commit();
  try {
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value \\, containing backslash",AuthorizableType.USER,false);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.AbstractBlobStoreTest </h4><pre class="type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void uploadCallback() throws Exception {
  assumeTrue(supportsStatsCollection());
  TestCollector collector=new TestCollector();
  setupCollector(collector);
  int size=10 * 1024;
  store.writeBlob(randomStream(42,size));
  assertCollectedSize(collector.size,size);
  assertEquals(1,collector.uploadCount);
}

</code></pre>

<br>
<pre class="type-13 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteFile() throws Exception {
  store.setBlockSize(1024 * 1024);
  byte[] data=new byte[4 * 1024 * 1024];
  Random r=new Random(0);
  r.nextBytes(data);
  String tempFileName="target/temp/test";
  File tempFile=new File(tempFileName);
  tempFile.getParentFile().mkdirs();
  OutputStream out=new FileOutputStream(tempFile,false);
  out.write(data);
  out.close();
  String s=store.writeBlob(tempFileName);
  assertEquals(data.length,store.getBlobLength(s));
  byte[] buff=new byte[1];
  for (int i=0; i < data.length; i+=1024) {
    store.readBlob(s,i,buff,0,1);
    assertEquals(data[i],buff[0]);
  }
  try {
    store.writeBlob(tempFileName + "_wrong");
    fail();
  }
 catch (  Exception e) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCombinedIdentifier() throws Exception {
  String id=store.writeBlob(new ByteArrayInputStream(new byte[2]));
  assertEquals(2,store.getBlobLength(id));
  String combinedId=id + id;
  assertEquals(4,store.getBlobLength(combinedId));
  doTestRead(new byte[4],4,combinedId);
}

</code></pre>

<br>
<pre class="type-6 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void downloadCallback() throws Exception {
  assumeTrue(supportsStatsCollection());
  TestCollector collector=new TestCollector();
  setupCollector(collector);
  int size=10 * 1024;
  String id=store.writeBlob(randomStream(42,size));
  store.clearCache();
  collector.reset();
  InputStream is=store.getInputStream(id);
  CountingOutputStream cos=new CountingOutputStream(new NullOutputStream());
  IOUtils.copy(is,cos);
  is.close();
  assertEquals(size,cos.getCount());
  assertCollectedSize(collector.size,size);
  assertEquals(1,collector.downloadCount);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteCount() throws Exception {
  Set<String> ids=createArtifacts();
  long count=store.countDeleteChunks(Lists.newArrayList(ids),0);
  Iterator<String> iter=store.getAllChunkIds(0);
  Set<String> ret=Sets.newHashSet();
  while (iter.hasNext()) {
    ret.add(iter.next());
  }
  assertTrue(ret.toString(),ret.isEmpty());
  assertEquals(ids.size(),count);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyIdentifier() throws Exception {
  byte[] data=new byte[1];
  assertEquals(-1,store.readBlob("",0,data,0,1));
  assertEquals(0,store.getBlobLength(""));
}

</code></pre>

<br>
<pre class="type-6 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReference() throws Exception {
  assumeThat(store,instanceOf(AbstractBlobStore.class));
  AbstractBlobStore abs=(AbstractBlobStore)store;
  Random r=new Random();
  byte[] key=new byte[256];
  r.nextBytes(key);
  abs.setReferenceKey(key);
  byte[] data=new byte[1000];
  r.nextBytes(data);
  String blobId=store.writeBlob(new ByteArrayInputStream(data));
  String reference=store.getReference(blobId);
  String blobId2=store.getBlobId(reference);
  assertEquals(blobId,blobId2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.ConcurrentBlobTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("OAK-1599") @Test public void test() throws Exception {
  final AtomicInteger id=new AtomicInteger();
  Concurrent.run("blob",new Concurrent.Task(){
    @Override public void call() throws Exception {
      int i=id.getAndIncrement();
      ByteArrayOutputStream out=new ByteArrayOutputStream();
      IOUtils.writeLong(out,i);
      out.write(EMPTY);
      byte[] data=out.toByteArray();
      String id=store.writeBlob(new ByteArrayInputStream(data));
      Assert.assertEquals(58,store.getBlobLength(id));
      byte[] test=out.toByteArray();
      Assert.assertEquals(8,store.readBlob(id,0,test,0,8));
      Assert.assertTrue(Arrays.equals(data,test));
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.split.SplitBlobStoreTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadByte() throws IOException {
  byte[] expected=new byte[LENGTH];
  byte[] actual=new byte[LENGTH];
  for (  String id : oldBlobIds) {
    oldBlobStore.readBlob(id,0,expected,0,LENGTH);
    splitBlobStore.readBlob(id,0,actual,0,LENGTH);
    assertArrayEquals(expected,actual);
  }
  for (  String id : newBlobIds) {
    newBlobStore.readBlob(id,0,expected,0,LENGTH);
    splitBlobStore.readBlob(id,0,actual,0,LENGTH);
    assertArrayEquals(expected,actual);
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReferences() throws IOException {
  for (  String id : oldBlobIds) {
    String reference=splitBlobStore.getReference(id);
    assertEquals(id,splitBlobStore.getBlobId(reference));
  }
  for (  String id : newBlobIds) {
    String reference=splitBlobStore.getReference(id);
    assertEquals(id,splitBlobStore.getBlobId(reference));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLength() throws IOException {
  for (  String id : oldBlobIds) {
    assertEquals(LENGTH,splitBlobStore.getBlobLength(id));
  }
  for (  String id : newBlobIds) {
    assertEquals(LENGTH,newBlobStore.getBlobLength(id));
    assertEquals(LENGTH,splitBlobStore.getBlobLength(id));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.stats.StatsCollectingStreamsTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void downloadCallback() throws Exception {
  NullInputStream in=new NullInputStream(1042);
  TestCollector stats=new TestCollector();
  InputStream wrappedStream=StatsCollectingStreams.wrap(stats,"foo",in);
  assertEquals(0,stats.callbackCount);
  CountingOutputStream cos=new CountingOutputStream(new NullOutputStream());
  IOUtils.copy(wrappedStream,cos);
  assertEquals(1042,cos.getCount());
  assertEquals(0,stats.callbackCount);
  wrappedStream.close();
  assertEquals(1042,stats.size);
  assertEquals(1,stats.downloadCompletedCount);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.commit.MoveTrackerTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 1.   >/a:/b >/c:/d     =  >/c:/d >/a:b
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 222
 */
@Test public void test1(){
  MoveTracker mt=new MoveTracker();
  mt.addMove("/a","/b");
  mt.addMove("/c","/d");
  assertEquals("/a",mt.getSourcePath("/b"));
  assertEquals("/c",mt.getSourcePath("/d"));
  assertEquals("/b",mt.getDestPath("/a"));
  assertEquals("/d",mt.getDestPath("/c"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIndependantMoves(){
  Map<String,String> m=ImmutableMap.of("/a/b/c","/d/e/f","/aa/bb/cc","/aa/f/cc");
  MoveTracker mt=new MoveTracker();
  for (  String src : m.keySet()) {
    String dest=m.get(src);
    mt.addMove(src,dest);
  }
  for (  String src : m.keySet()) {
    String dest=m.get(src);
    assertEquals(src,mt.getSourcePath(dest));
    assertEquals(dest,mt.getDestPath(src));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 14.  >/a:/b >/c:/b/d   =  >/c:/a/d >/a:/b
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 240
 */
@Test public void test14(){
  MoveTracker mt5=new MoveTracker();
  mt5.addMove("/a","/b");
  mt5.addMove("/c","/b/d");
  assertEquals("/a",mt5.getSourcePath("/b"));
  assertEquals("/c",mt5.getSourcePath("/b/d"));
  assertEquals("/b",mt5.getDestPath("/a"));
  assertEquals("/b/d",mt5.getDestPath("/c"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 11.  >/a:/b >/b:/c     =  >/a:/c
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 236
 */
@Test public void test11(){
  MoveTracker mt=new MoveTracker();
  mt.addMove("/a","/b");
  mt.addMove("/b","/c");
  assertEquals("/a",mt.getSourcePath("/c"));
  assertEquals("/c",mt.getDestPath("/a"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 7.   >/a:/b >/c:/a        does not commute
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 231
 */
@Test public void test7(){
  MoveTracker mt3=new MoveTracker();
  mt3.addMove("/a","/b");
  mt3.addMove("/c","/a");
  assertEquals("/a",mt3.getSourcePath("/b"));
  assertEquals("/c",mt3.getSourcePath("/a"));
  assertEquals("/b",mt3.getDestPath("/a"));
  assertEquals("/a",mt3.getDestPath("/c"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * 12.  >/a:/b/c >/b:/d   =  >/b:/d >/a:/d/c
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 237
 */
@Test @Ignore("Known Limitation of OAK-710") public void test12(){
  MoveTracker mt4=new MoveTracker();
  mt4.addMove("/a","/b/c");
  mt4.addMove("/b","/d");
  assertEquals("/a",mt4.getSourcePath("/d/c"));
  assertEquals("/b",mt4.getSourcePath("/d"));
  assertEquals("/d/c",mt4.getDestPath("/a"));
  assertEquals("/d",mt4.getDestPath("/b"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingleMove(){
  Map<String,String> moves=ImmutableMap.of("/a/b/c","/d/e/f","/aa/bb/cc","/aa/f/cc");
  for (  String src : moves.keySet()) {
    MoveTracker mt=new MoveTracker();
    String dest=moves.get(src);
    mt.addMove(src,dest);
    assertEquals(src,mt.getSourcePath(dest));
    assertEquals(dest,mt.getDestPath(src));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 10.  >/a:/b >/b/c:/d   =  >/a/c:/d >/a:/b
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 234
 */
@Test public void test10(){
  MoveTracker mt=new MoveTracker();
  mt.addMove("/a","/b");
  mt.addMove("/b/c","/d");
  assertEquals("/a",mt.getSourcePath("/b"));
  assertEquals("/a/c",mt.getSourcePath("/d"));
  assertEquals("/b",mt.getDestPath("/a"));
  assertEquals("/d",mt.getDestPath("/a/c"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 4.   >/a/b:/c >/a:/d   =  >/a:/d >/d/b:/c
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 225
 */
@Test public void test4(){
  MoveTracker mt1=new MoveTracker();
  mt1.addMove("/a/b","/c");
  mt1.addMove("/a","/d");
  assertEquals("/a/b",mt1.getSourcePath("/c"));
  assertEquals("/a",mt1.getSourcePath("/d"));
  assertEquals("/c",mt1.getDestPath("/a/b"));
  assertEquals("/d",mt1.getDestPath("/a"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 4.   >/a/b:/c >/a:/c/d    does not commute  (q < s)
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 226
 */
@Test public void test4a(){
  MoveTracker mt2=new MoveTracker();
  mt2.addMove("/a/b","/c");
  mt2.addMove("/a","/c/d");
  assertEquals("/a/b",mt2.getSourcePath("/c"));
  assertEquals("/a",mt2.getSourcePath("/c/d"));
  assertEquals("/c",mt2.getDestPath("/a/b"));
  assertEquals("/c/d",mt2.getDestPath("/a"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 14.  >/a/b:/b >/a:/b/d    does not commute  (p > r)
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 241
 */
@Test public void test14a(){
  MoveTracker mt6=new MoveTracker();
  mt6.addMove("/a/b","/b");
  mt6.addMove("/a","/b/d");
  assertEquals("/a/b",mt6.getSourcePath("/b"));
  assertEquals("/a",mt6.getSourcePath("/b/d"));
  assertEquals("/b",mt6.getDestPath("/a/b"));
  assertEquals("/b/d",mt6.getDestPath("/a"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.commit.SubtreeValidatorTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSubtreeValidator() throws CommitFailedException {
  Validator delegate=new FailingValidator();
  Validator validator=new SubtreeValidator(delegate,"one","two");
  assertNull(validator.childNodeAdded("zero",EMPTY_NODE));
  assertNull(validator.childNodeChanged("two",EMPTY_NODE,EMPTY_NODE));
  assertNull(validator.childNodeDeleted("foo",EMPTY_NODE));
  assertNotNull(validator.childNodeAdded("one",EMPTY_NODE));
  assertNotNull(validator.childNodeChanged("one",EMPTY_NODE,EMPTY_NODE));
  assertNotNull(validator.childNodeDeleted("one",EMPTY_NODE));
  validator=validator.childNodeChanged("one",EMPTY_NODE,EMPTY_NODE);
  assertNull(validator.childNodeAdded("zero",EMPTY_NODE));
  assertNull(validator.childNodeChanged("one",EMPTY_NODE,EMPTY_NODE));
  assertNull(validator.childNodeDeleted("foo",EMPTY_NODE));
  assertEquals(delegate,validator.childNodeAdded("two",EMPTY_NODE));
  assertEquals(delegate,validator.childNodeChanged("two",EMPTY_NODE,EMPTY_NODE));
  assertEquals(delegate,validator.childNodeDeleted("two",EMPTY_NODE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.query.CursorsTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void intersectionCursor(){
  QueryEngineSettings s=new QueryEngineSettings();
  Cursor a=new SimpleCursor("1:","/b","/c","/e","/e","/c");
  Cursor b=new SimpleCursor("2:","/a","/c","/d","/b","/c");
  Cursor c=Cursors.newIntersectionCursor(a,b,s);
  assertEquals("1:/b, 1:/c",list(c));
  assertFalse(c.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.query.PropertyStateValueTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compareDates(){
  Calendar d1, d2;
  PropertyValue v1, v2;
  d1=newCal(null);
  d2=newCal(d1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null);
  d2=newCal(d1,GMT,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null);
  d2=newCal(d1,GMT,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
  d1=newCal(null,PST,0);
  d2=newCal(d1,PST,0);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null,PST,0);
  d2=newCal(d1,PST,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null,PST,0);
  d2=newCal(d1,PST,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
  d1=newCal(null);
  d2=newCal(d1,CET,0);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null);
  d2=newCal(d1,CET,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null);
  d2=newCal(d1,CET,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
  d1=newCal(null);
  d2=newCal(d1,PST,0);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null);
  d2=newCal(d1,PST,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null);
  d2=newCal(d1,PST,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.CompositeConfigurationTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetDefaultConfig(){
  SecurityConfiguration sc=new SecurityConfiguration.Default();
  compositeConfiguration.setDefaultConfig(sc);
  List<SecurityConfiguration> configurations=compositeConfiguration.getConfigurations();
  assertFalse(configurations.isEmpty());
  assertEquals(1,configurations.size());
  assertEquals(sc,configurations.iterator().next());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRemoveConfiguration(){
  SecurityConfiguration def=new SecurityConfiguration.Default();
  compositeConfiguration.setDefaultConfig(def);
  SecurityConfiguration sc=new SecurityConfiguration.Default();
  compositeConfiguration.addConfiguration(sc);
  compositeConfiguration.removeConfiguration(def);
  List<SecurityConfiguration> configurations=compositeConfiguration.getConfigurations();
  assertEquals(1,configurations.size());
  assertEquals(sc,configurations.iterator().next());
  compositeConfiguration.removeConfiguration(sc);
  configurations=compositeConfiguration.getConfigurations();
  assertEquals(1,configurations.size());
  assertEquals(def,configurations.iterator().next());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-19 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetContext() throws Exception {
  Class cls=Class.forName(CompositeConfiguration.class.getName() + "$CompositeContext");
  Field def=cls.getDeclaredField("defaultCtx");
  def.setAccessible(true);
  Field delegatees=cls.getDeclaredField("delegatees");
  delegatees.setAccessible(true);
  Context ctx=compositeConfiguration.getContext();
  assertSame(cls,ctx.getClass());
  assertNull(delegatees.get(ctx));
  assertSame(Context.DEFAULT,def.get(ctx));
  SecurityConfiguration sc=new TestConfiguration();
  compositeConfiguration.setDefaultConfig(sc);
  ctx=compositeConfiguration.getContext();
  assertNull(delegatees.get(ctx));
  assertSame(sc.getContext(),def.get(ctx));
  assertSame(cls,ctx.getClass());
  compositeConfiguration.addConfiguration(sc);
  ctx=compositeConfiguration.getContext();
  assertNotSame(sc.getContext(),ctx);
  assertEquals(1,((Context[])delegatees.get(ctx)).length);
  SecurityConfiguration defConfig=new SecurityConfiguration.Default();
  compositeConfiguration.addConfiguration(defConfig);
  assertEquals(1,((Context[])delegatees.get(compositeConfiguration.getContext())).length);
  compositeConfiguration.addConfiguration(sc);
  assertEquals(1,((Context[])delegatees.get(compositeConfiguration.getContext())).length);
  SecurityConfiguration sc2=new TestConfiguration();
  compositeConfiguration.addConfiguration(sc2);
  assertEquals(2,((Context[])delegatees.get(compositeConfiguration.getContext())).length);
  compositeConfiguration.removeConfiguration(sc2);
  assertEquals(1,((Context[])delegatees.get(compositeConfiguration.getContext())).length);
  compositeConfiguration.removeConfiguration(sc);
  compositeConfiguration.removeConfiguration(sc);
  compositeConfiguration.removeConfiguration(defConfig);
  assertNull(delegatees.get(compositeConfiguration.getContext()));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetName(){
  assertEquals(NAME,compositeConfiguration.getName());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddConfiguration(){
  compositeConfiguration.addConfiguration(new SecurityConfiguration.Default());
  compositeConfiguration.addConfiguration(new SecurityConfiguration.Default());
  List<SecurityConfiguration> configurations=getConfigurations();
  assertFalse(configurations.isEmpty());
  assertEquals(2,configurations.size());
  SecurityConfiguration def=new SecurityConfiguration.Default();
  compositeConfiguration.setDefaultConfig(def);
  configurations=getConfigurations();
  assertEquals(2,configurations.size());
  assertFalse(configurations.contains(def));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.ConfigurationParametersTest </h4><pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDurationParser(){
  assertNull(ConfigurationParameters.Milliseconds.of(""));
  assertNull(ConfigurationParameters.Milliseconds.of(null));
  assertEquals(1,ConfigurationParameters.Milliseconds.of("1").value);
  assertEquals(1,ConfigurationParameters.Milliseconds.of("1ms").value);
  assertEquals(1,ConfigurationParameters.Milliseconds.of("  1ms").value);
  assertEquals(1,ConfigurationParameters.Milliseconds.of("  1ms   ").value);
  assertEquals(1,ConfigurationParameters.Milliseconds.of("  1ms  foobar").value);
  assertEquals(1000,ConfigurationParameters.Milliseconds.of("1s").value);
  assertEquals(1500,ConfigurationParameters.Milliseconds.of("1.5s").value);
  assertEquals(1500,ConfigurationParameters.Milliseconds.of("1s 500ms").value);
  assertEquals(60 * 1000,ConfigurationParameters.Milliseconds.of("1m").value);
  assertEquals(90 * 1000,ConfigurationParameters.Milliseconds.of("1m30s").value);
  assertEquals(60 * 60 * 1000 + 90 * 1000,ConfigurationParameters.Milliseconds.of("1h1m30s").value);
  assertEquals(36 * 60 * 60* 1000 + 60 * 60 * 1000 + 90 * 1000,ConfigurationParameters.Milliseconds.of("1.5d1h1m30s").value);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConversion2(){
  TestObject testObject=new TestObject("t");
  Integer int1000=1000;
  Map<String,Object> m=new HashMap<String,Object>();
  m.put("TEST",testObject);
  m.put("String","1000");
  m.put("Int2",1000);
  m.put("Int3",1000);
  ConfigurationParameters options=ConfigurationParameters.of(m);
  assertNotNull(options.getConfigValue("TEST",null,null));
  assertNotNull(options.getConfigValue("TEST",null,TestObject.class));
  assertEquals(testObject,options.getConfigValue("TEST",null,null));
  assertEquals(testObject,options.getConfigValue("TEST",null,TestObject.class));
  assertEquals(testObject,options.getConfigValue("TEST",testObject,null));
  assertEquals(testObject,options.getConfigValue("TEST",testObject,TestObject.class));
  assertEquals("t",options.getConfigValue("TEST","defaultString",null));
  assertEquals("t",options.getConfigValue("TEST","defaultString",String.class));
  assertEquals("1000",options.getConfigValue("String",null,null));
  assertEquals("1000",options.getConfigValue("String",null,String.class));
  assertEquals(int1000,options.getConfigValue("String",10,null));
  assertEquals(int1000,options.getConfigValue("String",10,Integer.class));
  assertEquals(new Long(1000),options.getConfigValue("String",10l,null));
  assertEquals(new Long(1000),options.getConfigValue("String",10l,Long.class));
  assertEquals("1000",options.getConfigValue("String","10",null));
  assertEquals("1000",options.getConfigValue("String","10",String.class));
  assertEquals(int1000,options.getConfigValue("Int2",null,null));
  assertEquals(int1000,options.getConfigValue("Int2",10,null));
  assertEquals("1000",options.getConfigValue("Int2","1000",null));
  assertEquals(1000,options.getConfigValue("Int3",null,null));
  assertEquals(int1000,options.getConfigValue("Int3",10,null));
  assertEquals("1000",options.getConfigValue("Int3","1000",null));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultValue(){
  TestObject obj=new TestObject("t");
  Integer int1000=1000;
  ConfigurationParameters options=ConfigurationParameters.EMPTY;
  assertEquals(obj,options.getConfigValue("missing",obj));
  assertEquals(int1000,options.getConfigValue("missing",int1000));
  assertNull(options.getConfigValue("missing",null,null));
  assertNull(options.getConfigValue("missing",null,String.class));
  assertEquals(obj,options.getConfigValue("missing",obj,null));
  assertEquals(obj,options.getConfigValue("missing",obj,TestObject.class));
  assertEquals(int1000,options.getConfigValue("missing",int1000,Integer.class));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetConfigValue(){
  Map<String,String> map=new HashMap<String,String>();
  map.put("o1","v");
  ConfigurationParameters options=ConfigurationParameters.of(map);
  assertEquals("v",options.getConfigValue("o1","v2"));
  assertEquals("v2",options.getConfigValue("missing","v2"));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConversionToSet(){
  String[] stringArray=new String[]{"a","b"};
  Set<String> stringSet=ImmutableSet.copyOf(stringArray);
  TestObject[] testObjectArray=new TestObject[]{new TestObject("a"),new TestObject("b")};
  Set<TestObject> testObjectSet=ImmutableSet.copyOf(testObjectArray);
  Map<Object,Set> configValues=new HashMap<Object,Set>();
  configValues.put("a",ImmutableSet.of("a"));
  configValues.put(stringArray,stringSet);
  configValues.put(stringSet,stringSet);
  configValues.put(testObjectArray,testObjectSet);
  configValues.put(testObjectSet,testObjectSet);
  configValues.put(new String[0],Collections.<String>emptySet());
  configValues.put(new HashSet(),Collections.emptySet());
  configValues.put(ImmutableSet.of(),Collections.emptySet());
  configValues.put(new ArrayList(),Collections.emptySet());
  configValues.put(ConfigurationParameters.EMPTY,Collections.<String>emptySet());
  Set<String> defaultStrings=ImmutableSet.of("abc","def","ghi");
  Set<TestObject> defaultObjects=ImmutableSet.of(new TestObject("abc"),new TestObject("def"));
  for (  Object value : configValues.keySet()) {
    ConfigurationParameters config;
    if (value instanceof ConfigurationParameters) {
      config=ConfigurationParameters.of((ConfigurationParameters)value);
    }
 else {
      config=ConfigurationParameters.of("key",value);
    }
    Set expected=configValues.get(value);
    assertEquals(expected,config.getConfigValue("key",Collections.emptySet()));
    assertEquals(expected,config.getConfigValue("key",Collections.<String>emptySet()));
    assertEquals(expected,config.getConfigValue("key",ImmutableSet.of()));
    assertEquals(expected,config.getConfigValue("key",Collections.emptySet(),Set.class));
    assertEquals(expected,config.getConfigValue("key",Collections.<String>emptySet(),Set.class));
    assertEquals(expected,config.getConfigValue("key",ImmutableSet.of(),Set.class));
    if (!config.containsKey("key")) {
      assertEquals(defaultStrings,config.getConfigValue("key",defaultStrings,Set.class));
      assertEquals(defaultObjects,config.getConfigValue("key",defaultObjects,Set.class));
      assertEquals(null,config.getConfigValue("key",null,Set.class));
      assertEquals(defaultStrings,config.getConfigValue("key",defaultStrings));
      assertEquals(defaultObjects,config.getConfigValue("key",defaultObjects));
    }
 else {
      assertEquals(expected,config.getConfigValue("key",defaultStrings,Set.class));
      assertEquals(expected,config.getConfigValue("key",defaultObjects,Set.class));
      assertEquals(expected,config.getConfigValue("key",null,Set.class));
      assertEquals(expected,config.getConfigValue("key",defaultStrings));
      assertEquals(expected,config.getConfigValue("key",defaultObjects));
    }
    assertEquals(defaultStrings,config.getConfigValue("nonexisting",defaultStrings));
    assertEquals(defaultStrings,config.getConfigValue("nonexisting",defaultStrings,Set.class));
    assertEquals(defaultObjects,config.getConfigValue("nonexisting",defaultObjects));
    assertEquals(defaultObjects,config.getConfigValue("nonexisting",defaultObjects,Set.class));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConversion(){
  TestObject testObject=new TestObject("t");
  Integer int1000=1000;
  Map<String,Object> m=new HashMap<String,Object>();
  m.put("TEST",testObject);
  m.put("String","1000");
  m.put("Int2",1000);
  m.put("Int3",1000);
  m.put("time0","1s");
  m.put("time1",1000);
  ConfigurationParameters options=ConfigurationParameters.of(m);
  assertEquals(testObject,options.getConfigValue("TEST",testObject));
  assertEquals("t",options.getConfigValue("TEST","defaultString"));
  assertTrue(1000 == options.getConfigValue("String",10,int.class));
  assertTrue(1000 == options.getConfigValue("String",10));
  assertEquals(int1000,options.getConfigValue("String",10));
  assertEquals(new Long(1000),options.getConfigValue("String",10l));
  assertEquals("1000",options.getConfigValue("String","10"));
  assertEquals(int1000,options.getConfigValue("Int2",10));
  assertEquals("1000",options.getConfigValue("Int2","1000"));
  assertEquals(int1000,options.getConfigValue("Int3",10));
  assertEquals("1000",options.getConfigValue("Int3","1000"));
  assertEquals(ConfigurationParameters.Milliseconds.of(1000),options.getConfigValue("time0",ConfigurationParameters.Milliseconds.NULL));
  assertEquals(ConfigurationParameters.Milliseconds.of(1000),options.getConfigValue("time1",ConfigurationParameters.Milliseconds.NULL));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConversionToStringArray(){
  String[] stringArray=new String[]{"a","b"};
  Set<String> stringSet=ImmutableSet.copyOf(stringArray);
  TestObject[] testObjectArray=new TestObject[]{new TestObject("a"),new TestObject("b")};
  Set<TestObject> testObjectSet=ImmutableSet.copyOf(testObjectArray);
  String[] defaultStrings=new String[]{"abc","def","ghi"};
  Map<Object,Object[]> configValues=new HashMap<Object,Object[]>();
  configValues.put("a",new String[]{"a"});
  configValues.put(stringArray,stringArray);
  configValues.put(stringSet,stringArray);
  configValues.put(testObjectArray,stringArray);
  configValues.put(testObjectSet,stringArray);
  configValues.put(new String[0],new String[0]);
  configValues.put(new HashSet(),new String[0]);
  configValues.put(ImmutableSet.of(),new String[0]);
  configValues.put(new ArrayList(),new String[0]);
  configValues.put(ConfigurationParameters.EMPTY,new String[0]);
  for (  Object value : configValues.keySet()) {
    ConfigurationParameters config;
    if (value instanceof ConfigurationParameters) {
      config=ConfigurationParameters.of((ConfigurationParameters)value);
    }
 else {
      config=ConfigurationParameters.of("key",value);
    }
    Object[] expected=configValues.get(value);
    assertArrayEquals(expected,config.getConfigValue("key",new String[0]));
    assertArrayEquals(expected,config.getConfigValue("key",new String[0],String[].class));
    if (!config.containsKey("key")) {
      assertArrayEquals(defaultStrings,config.getConfigValue("key",defaultStrings,String[].class));
      assertArrayEquals(null,config.getConfigValue("key",null,String[].class));
      assertArrayEquals(defaultStrings,config.getConfigValue("key",defaultStrings));
    }
 else {
      assertArrayEquals(expected,config.getConfigValue("key",defaultStrings,String[].class));
      assertArrayEquals(expected,config.getConfigValue("key",null,String[].class));
      assertArrayEquals(expected,config.getConfigValue("key",defaultStrings));
    }
    assertArrayEquals(defaultStrings,config.getConfigValue("nonexisting",defaultStrings));
    assertArrayEquals(defaultStrings,config.getConfigValue("nonexisting",defaultStrings,String[].class));
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testArrayDefaultValue(){
  TestObject[] testArray=new TestObject[]{new TestObject("t")};
  TestObject[] result=ConfigurationParameters.EMPTY.getConfigValue("test",new TestObject[0]);
  assertNotNull(result);
  assertEquals(0,result.length);
  assertArrayEquals(testArray,ConfigurationParameters.EMPTY.getConfigValue("test",testArray));
  ConfigurationParameters options=ConfigurationParameters.of("test",testArray);
  assertArrayEquals(testArray,options.getConfigValue("test",new TestObject[]{new TestObject("s")}));
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCollectionAsArray() throws Exception {
  String[] testArray={"t"};
  ConfigurationParameters options=ConfigurationParameters.of("test",Arrays.asList(testArray));
  assertArrayEquals(testArray,options.getConfigValue("test",null,String[].class));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreation(){
  ConfigurationParameters params=ConfigurationParameters.of(ConfigurationParameters.EMPTY,null,ConfigurationParameters.of("a","a"));
  assertFalse(params.isEmpty());
  assertEquals(1,params.size());
  assertTrue(params.contains("a"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNullableConfigValue(){
  Map<String,String> map=new HashMap<String,String>();
  map.put("o1","v");
  ConfigurationParameters options=ConfigurationParameters.of(map);
  assertEquals("v",options.getConfigValue("o1",null,null));
  assertEquals("v",options.getConfigValue("o1",null,String.class));
  assertEquals("v",options.getConfigValue("o1","v2",null));
  assertEquals("v",options.getConfigValue("o1","v2",String.class));
  assertEquals("v2",options.getConfigValue("missing","v2",null));
  assertEquals("v2",options.getConfigValue("missing","v2",String.class));
  assertNull(options.getConfigValue("missing",null,null));
  assertNull(options.getConfigValue("missing",null,TestObject.class));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testArrayDefaultValue2(){
  TestObject[] testArray=new TestObject[]{new TestObject("t")};
  TestObject[] result=ConfigurationParameters.EMPTY.getConfigValue("test",new TestObject[0],null);
  assertNotNull(result);
  assertEquals(0,result.length);
  assertArrayEquals(testArray,ConfigurationParameters.EMPTY.getConfigValue("test",testArray,null));
  assertArrayEquals(testArray,ConfigurationParameters.EMPTY.getConfigValue("test",testArray,TestObject[].class));
  ConfigurationParameters options=ConfigurationParameters.of("test",testArray);
  assertArrayEquals(testArray,(TestObject[])options.getConfigValue("test",null,null));
  assertArrayEquals(testArray,options.getConfigValue("test",null,TestObject[].class));
  assertArrayEquals(testArray,options.getConfigValue("test",new TestObject[]{new TestObject("s")},null));
  assertArrayEquals(testArray,options.getConfigValue("test",new TestObject[]{new TestObject("s")},TestObject[].class));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNullValue(){
  ConfigurationParameters options=ConfigurationParameters.of(Collections.singletonMap("test",null));
  assertNull(options.getConfigValue("test",null));
  assertEquals("value",options.getConfigValue("test","value"));
  TestObject to=new TestObject("t");
  assertEquals(to,options.getConfigValue("test",to));
  assertFalse(options.getConfigValue("test",false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.AbstractLoginModuleTest </h4><pre class="type-9 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSharedLoginName(){
  Map<String,String> sharedState=new HashMap<String,String>();
  sharedState.put(AbstractLoginModule.SHARED_KEY_LOGIN_NAME,"test");
  AbstractLoginModule lm=initLoginModule(TestCredentials.class,sharedState);
  assertEquals("test",lm.getSharedLoginName());
  sharedState.clear();
  lm=initLoginModule(TestCredentials.class,sharedState);
  assertNull(lm.getSharedLoginName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.PreAuthTest </h4><pre class="type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidSubjectWithCredentials() throws Exception {
  Set<SimpleCredentials> publicCreds=Collections.singleton(new SimpleCredentials("testUserId",new char[0]));
  final Subject subject=new Subject(false,principals,publicCreds,Collections.emptySet());
  ContentSession cs=Subject.doAsPrivileged(subject,new PrivilegedAction<ContentSession>(){
    @Override public ContentSession run(){
      try {
        return login(null);
      }
 catch (      Exception e) {
        return null;
      }
    }
  }
,null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    assertNotSame(AuthInfo.EMPTY,authInfo);
    assertEquals(principals,authInfo.getPrincipals());
    assertEquals("testUserId",authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-19 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidSubject() throws Exception {
  final Subject subject=new Subject(true,principals,Collections.emptySet(),Collections.emptySet());
  ContentSession cs=Subject.doAsPrivileged(subject,new PrivilegedAction<ContentSession>(){
    @Override public ContentSession run(){
      try {
        return login(null);
      }
 catch (      Exception e) {
        return null;
      }
    }
  }
,null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    assertNotSame(AuthInfo.EMPTY,authInfo);
    assertEquals(principals,authInfo.getPrincipals());
    assertNull(authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidReadSubjectWithCredentials() throws Exception {
  Set<SimpleCredentials> publicCreds=Collections.singleton(new SimpleCredentials("testUserId",new char[0]));
  final Subject subject=new Subject(true,principals,publicCreds,Collections.emptySet());
  ContentSession cs=Subject.doAsPrivileged(subject,new PrivilegedAction<ContentSession>(){
    @Override public ContentSession run(){
      try {
        return login(null);
      }
 catch (      Exception e) {
        return null;
      }
    }
  }
,null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    assertNotSame(AuthInfo.EMPTY,authInfo);
    assertEquals(principals,authInfo.getPrincipals());
    assertEquals("testUserId",authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemSubject() throws Exception {
  ContentSession cs=Subject.doAsPrivileged(SystemSubject.INSTANCE,new PrivilegedAction<ContentSession>(){
    @Override public ContentSession run(){
      try {
        return login(null);
      }
 catch (      Exception e) {
        return null;
      }
    }
  }
,null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    assertNotSame(AuthInfo.EMPTY,authInfo);
    assertEquals(SystemSubject.INSTANCE.getPrincipals(),authInfo.getPrincipals());
    assertEquals(null,authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.DefaultSyncHandlerTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindExternalIdentity() throws Exception {
  login(new SimpleCredentials(userId,new char[0])).close();
  root.refresh();
  UserManager userManager=getUserManager(root);
  SyncHandler mgr=syncManager.getSyncHandler("default");
  SyncedIdentity id=mgr.findIdentity(userManager,userId);
  assertNotNull("known authorizable should exist",id);
  assertEquals("external user should have correct external ref.idp",idp.getName(),id.getExternalIdRef().getProviderName());
  assertEquals("external user should have correct external ref.id",userId,id.getExternalIdRef().getId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.ExternalIdentityRefTest </h4><pre class="type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProviderName(){
  assertNull(refNullProvider.getProviderName());
  assertNull(refEmptyProvider.getProviderName());
  assertEquals(PROVIDER_NAME,ref.getProviderName());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetString(){
  String s=refNullProvider.getString();
  assertNotNull(s);
  assertFalse(USERID.equals(s));
  assertEquals("user%25id",s);
  s=refEmptyProvider.getString();
  assertNotNull(s);
  assertFalse(USERID.equals(s));
  assertEquals("user%25id",s);
  s=ref.getString();
  assertNotNull(s);
  assertEquals("user%25id;provider%3bName",s);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetId(){
  assertEquals(USERID,refNullProvider.getId());
  assertEquals(USERID,refEmptyProvider.getId());
  assertEquals(USERID,ref.getId());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFromString(){
  ExternalIdentityRef r=ExternalIdentityRef.fromString(refNullProvider.getString());
  assertEquals(refNullProvider,r);
  assertEquals(USERID,r.getId());
  assertEquals(refNullProvider.getString(),r.getString());
  assertNull(r.getProviderName());
  r=ExternalIdentityRef.fromString(refEmptyProvider.getString());
  assertEquals(refEmptyProvider,r);
  assertEquals(USERID,r.getId());
  assertEquals(refEmptyProvider.getString(),r.getString());
  assertNull(r.getProviderName());
  r=ExternalIdentityRef.fromString(ref.getString());
  assertEquals(ref,r);
  assertEquals(USERID,r.getId());
  assertEquals(PROVIDER_NAME,r.getProviderName());
  assertEquals(ref.getString(),r.getString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.ExternalLoginModuleFactoryTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUser() throws Exception {
  setUpJaasFactoryWithInjection();
  UserManager userManager=getUserManager(root);
  ContentSession cs=null;
  try {
    assertNull(userManager.getAuthorizable(userId));
    cs=login(new SimpleCredentials(userId,new char[0]));
    root.refresh();
    Authorizable a=userManager.getAuthorizable(userId);
    assertNotNull(a);
    ExternalUser user=idp.getUser(userId);
    for (    String prop : user.getProperties().keySet()) {
      assertTrue(a.hasProperty(prop));
    }
    assertEquals(TEST_CONSTANT_PROPERTY_VALUE,a.getProperty(TEST_CONSTANT_PROPERTY_NAME)[0].getString());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.ExternalLoginModuleTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUserCaseInsensitive() throws Exception {
  UserManager userManager=getUserManager(root);
  ContentSession cs=null;
  try {
    assertNull(userManager.getAuthorizable(userId));
    cs=login(new SimpleCredentials(userId.toUpperCase(),new char[0]));
    root.refresh();
    Authorizable a=userManager.getAuthorizable(userId);
    assertNotNull(a);
    ExternalUser user=idp.getUser(userId);
    for (    String prop : user.getProperties().keySet()) {
      assertTrue(a.hasProperty(prop));
    }
    assertEquals(TEST_CONSTANT_PROPERTY_VALUE,a.getProperty(TEST_CONSTANT_PROPERTY_NAME)[0].getString());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUser() throws Exception {
  UserManager userManager=getUserManager(root);
  ContentSession cs=null;
  try {
    assertNull(userManager.getAuthorizable(userId));
    cs=login(new SimpleCredentials(userId,new char[0]));
    root.refresh();
    Authorizable a=userManager.getAuthorizable(userId);
    assertNotNull(a);
    ExternalUser user=idp.getUser(userId);
    for (    String prop : user.getProperties().keySet()) {
      assertTrue(a.hasProperty(prop));
    }
    assertEquals(TEST_CONSTANT_PROPERTY_VALUE,a.getProperty(TEST_CONSTANT_PROPERTY_NAME)[0].getString());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.basic.DefaultSyncContextTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSyncUserById() throws Exception {
  ExternalIdentity externalId=idp.listUsers().next();
  SyncResult result=syncCtx.sync(externalId.getId());
  assertEquals(SyncResult.Status.NO_SUCH_AUTHORIZABLE,result.getStatus());
  syncCtx.sync(externalId);
  syncCtx.setForceUserSync(true);
  result=syncCtx.sync(externalId.getId());
  assertEquals(SyncResult.Status.UPDATE,result.getStatus());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSyncGroupById() throws Exception {
  ExternalIdentity externalId=idp.listGroups().next();
  SyncResult result=syncCtx.sync(externalId.getId());
  assertEquals(SyncResult.Status.NO_SUCH_AUTHORIZABLE,result.getStatus());
  syncCtx.sync(externalId);
  syncCtx.setForceGroupSync(true);
  result=syncCtx.sync(externalId.getId());
  assertEquals(SyncResult.Status.UPDATE,result.getStatus());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSyncByForeignId2() throws Exception {
  User u=getTestUser();
  setExternalID(u,"differentIDP");
  SyncResult result=syncCtx.sync(u.getID());
  assertEquals(SyncResult.Status.FOREIGN,result.getStatus());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSyncAutoMembershipListsNonExistingGroup() throws Exception {
  config.user().setAutoMembership("nonExistingGroup");
  SyncResult result=syncCtx.sync(idp.listUsers().next());
  assertEquals(SyncResult.Status.ADD,result.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncAutoMembership() throws Exception {
  Group gr=createTestGroup();
  config.user().setAutoMembership(gr.getID());
  SyncResult result=syncCtx.sync(idp.listUsers().next());
  assertEquals(SyncResult.Status.ADD,result.getStatus());
  Authorizable a=getUserManager(root).getAuthorizable(result.getIdentity().getId());
  assertTrue(gr.isDeclaredMember(a));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncRemovedGroupWithMembers() throws Exception {
  Group gr=createTestGroup();
  gr.addMember(getTestUser());
  String groupId=gr.getID();
  setExternalID(gr,idp.getName());
  syncCtx.setKeepMissing(true);
  SyncResult result=syncCtx.sync(groupId);
  assertEquals(SyncResult.Status.NOP,result.getStatus());
  assertNotNull(getUserManager(root).getAuthorizable(groupId));
  syncCtx.setKeepMissing(false);
  result=syncCtx.sync(groupId);
  assertEquals(SyncResult.Status.NOP,result.getStatus());
  assertNotNull(getUserManager(root).getAuthorizable(groupId));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLostMembershipDifferentIDP() throws Exception {
  Group gr=createTestGroup();
  setExternalID(gr,"differentIDP");
  SyncResult result=syncCtx.sync(idp.listUsers().next());
  User user=getUserManager(root).getAuthorizable(result.getIdentity().getId(),User.class);
  gr.addMember(user);
  root.commit();
  syncCtx.setForceUserSync(true);
  config.user().setMembershipExpirationTime(-1);
  config.user().setMembershipNestingDepth(1);
  assertEquals(SyncResult.Status.UPDATE,syncCtx.sync(user.getID()).getStatus());
  assertTrue(gr.isDeclaredMember(user));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncExternalUser() throws Exception {
  ExternalUser user=idp.listUsers().next();
  assertNotNull(user);
  SyncResult result=syncCtx.sync(user);
  assertEquals(SyncResult.Status.ADD,result.getStatus());
  result=syncCtx.sync(user);
  assertEquals(SyncResult.Status.NOP,result.getStatus());
  syncCtx.setForceUserSync(true);
  result=syncCtx.sync(user);
  assertEquals(SyncResult.Status.UPDATE,result.getStatus());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncRemovedUserById() throws Exception {
  User u=getUserManager(root).createUser("test" + UUID.randomUUID(),null);
  String userId=u.getID();
  authorizableIds.add(userId);
  setExternalID(u,idp.getName());
  syncCtx.setKeepMissing(true);
  SyncResult result=syncCtx.sync(userId);
  assertEquals(SyncResult.Status.MISSING,result.getStatus());
  assertNotNull(getUserManager(root).getAuthorizable(userId));
  syncCtx.setKeepMissing(false);
  result=syncCtx.sync(userId);
  assertEquals(SyncResult.Status.DELETE,result.getStatus());
  assertNull(getUserManager(root).getAuthorizable(userId));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLostMembership() throws Exception {
  Group gr=createTestGroup();
  setExternalID(gr,idp.getName());
  SyncResult result=syncCtx.sync(idp.listUsers().next());
  User user=getUserManager(root).getAuthorizable(result.getIdentity().getId(),User.class);
  gr.addMember(user);
  root.commit();
  syncCtx.setForceUserSync(true);
  config.user().setMembershipExpirationTime(-1);
  config.user().setMembershipNestingDepth(-1);
  syncCtx.sync(user.getID()).getStatus();
  assertTrue(gr.isDeclaredMember(user));
  config.user().setMembershipNestingDepth(1);
  assertEquals(SyncResult.Status.UPDATE,syncCtx.sync(user.getID()).getStatus());
  assertFalse(gr.isDeclaredMember(user));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncRemovedGroupById() throws Exception {
  Group gr=createTestGroup();
  String groupId=gr.getID();
  setExternalID(gr,idp.getName());
  syncCtx.setKeepMissing(true);
  SyncResult result=syncCtx.sync(groupId);
  assertEquals(SyncResult.Status.MISSING,result.getStatus());
  assertNotNull(getUserManager(root).getAuthorizable(groupId));
  syncCtx.setKeepMissing(false);
  result=syncCtx.sync(groupId);
  assertEquals(SyncResult.Status.DELETE,result.getStatus());
  assertNull(getUserManager(root).getAuthorizable(groupId));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncExternalGroup() throws Exception {
  ExternalGroup gr=idp.listGroups().next();
  assertNotNull(gr);
  SyncResult result=syncCtx.sync(gr);
  assertEquals(SyncResult.Status.ADD,result.getStatus());
  result=syncCtx.sync(gr);
  assertEquals(SyncResult.Status.NOP,result.getStatus());
  syncCtx.setForceGroupSync(true);
  result=syncCtx.sync(gr);
  assertEquals(SyncResult.Status.UPDATE,result.getStatus());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSyncByForeignId() throws Exception {
  SyncResult result=syncCtx.sync(getTestUser().getID());
  assertEquals(SyncResult.Status.FOREIGN,result.getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.impl.jmx.SyncMBeanImplTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetIDPName(){
  assertEquals(idp.getName(),syncMBean.getIDPName());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetSyncHandlerName(){
  assertEquals(SYNC_NAME,syncMBean.getSyncHandlerName());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidSyncHandlerName(){
  SyncMBeanImpl syncMBean=new SyncMBeanImpl(REPOSITORY,syncMgr,"invalid",idpMgr,idp.getName());
  assertEquals("invalid",syncMBean.getSyncHandlerName());
  try {
    syncMBean.syncAllExternalUsers();
    fail("syncAllExternalUsers with invalid SyncHandlerName must fail");
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidIDPName(){
  SyncMBeanImpl syncMBean=new SyncMBeanImpl(REPOSITORY,syncMgr,SYNC_NAME,idpMgr,"invalid");
  assertEquals("invalid",syncMBean.getIDPName());
  try {
    syncMBean.syncAllExternalUsers();
    fail("syncAllExternalUsers with invalid IDP name must fail");
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.accesscontrol.ACETest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAggregatePrivileges() throws Exception {
  ACE ace=createEntry(PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.REP_READ_PROPERTIES);
  assertEquals(getBitsProvider().getBits(PrivilegeConstants.JCR_READ),ace.getPrivilegeBits());
  assertArrayEquals(privilegesFromNames(PrivilegeConstants.JCR_READ),ace.getPrivileges());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @since OAK 1.0: support for multi-value restrictions
 */
@Test public void testGetRestrictionForMultiValued2() throws Exception {
  Restriction singleNameRestr=createRestriction(AccessControlConstants.REP_NT_NAMES,new Value[]{nameValue});
  ACE ace=createEntry(ImmutableSet.of(singleNameRestr));
  Value val=ace.getRestriction(AccessControlConstants.REP_NT_NAMES);
  assertEquals(nameValue,val);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivileges() throws RepositoryException {
  ACE entry=createEntry(new String[]{PrivilegeConstants.JCR_READ},true);
  Privilege[] privs=entry.getPrivileges();
  assertNotNull(privs);
  assertEquals(1,privs.length);
  assertEquals(privs[0],acMgr.privilegeFromName(PrivilegeConstants.JCR_READ));
  entry=createEntry(new String[]{PrivilegeConstants.REP_WRITE},true);
  privs=entry.getPrivileges();
  assertNotNull(privs);
  assertEquals(1,privs.length);
  assertEquals(privs[0],acMgr.privilegeFromName(PrivilegeConstants.REP_WRITE));
  entry=createEntry(new String[]{PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES},true);
  privs=entry.getPrivileges();
  assertNotNull(privs);
  assertEquals(2,privs.length);
  Privilege[] expected=AccessControlUtils.privilegesFromNames(acMgr,PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES);
  assertEquals(ImmutableSet.copyOf(expected),ImmutableSet.copyOf(privs));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquals2() throws RepositoryException {
  ACE ace=createEntry(PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_READ);
  ACE ace2=createEntry(PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_READ);
  assertEquals(ace,ace2);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegeBits() throws RepositoryException {
  ACE entry=createEntry(new String[]{PrivilegeConstants.JCR_READ},true);
  PrivilegeBits bits=entry.getPrivilegeBits();
  assertNotNull(bits);
  assertEquals(bits,getBitsProvider().getBits(PrivilegeConstants.JCR_READ));
  entry=createEntry(new String[]{PrivilegeConstants.REP_WRITE},true);
  bits=entry.getPrivilegeBits();
  assertNotNull(bits);
  assertEquals(bits,getBitsProvider().getBits(PrivilegeConstants.REP_WRITE));
  entry=createEntry(new String[]{PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES},true);
  bits=entry.getPrivilegeBits();
  assertNotNull(bits);
  PrivilegeBits expected=getBitsProvider().getBits(PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES);
  assertEquals(expected,bits);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @since oak 1.0 ACE doesn't validate privileges.
 */
@Test public void testUnknownPrivilege() throws Exception {
  Privilege invalidPriv=new Privilege(){
    public String getName(){
      return "";
    }
    public boolean isAbstract(){
      return false;
    }
    public boolean isAggregate(){
      return false;
    }
    public Privilege[] getDeclaredAggregatePrivileges(){
      return new Privilege[0];
    }
    public Privilege[] getAggregatePrivileges(){
      return new Privilege[0];
    }
  }
;
  Privilege[] privs=new Privilege[]{invalidPriv,acMgr.privilegeFromName(PrivilegeConstants.JCR_READ)};
  ACE entry=createEntry(testPrincipal,privs,true);
  assertEquals(getBitsProvider().getBits(PrivilegeConstants.JCR_READ),entry.getPrivilegeBits());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0: support for multi-value restrictions
 */
@Test public void testGetRestrictionsForSingleValue() throws Exception {
  Restriction globRestr=createRestriction(AccessControlConstants.REP_GLOB,globValue);
  ACE ace=createEntry(ImmutableSet.of(globRestr));
  Value[] vs=ace.getRestrictions(AccessControlConstants.REP_GLOB);
  assertNotNull(vs);
  assertArrayEquals(new Value[]{globValue},vs);
}

</code></pre>

<br>
<pre class="type-9 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestrictionNames() throws Exception {
  String[] restrictionNames=createEntry(Collections.<Restriction>emptySet()).getRestrictionNames();
  assertNotNull(restrictionNames);
  assertEquals(0,restrictionNames.length);
  Restriction globRestr=createRestriction(AccessControlConstants.REP_GLOB,globValue);
  Restriction nameRestr=createRestriction(AccessControlConstants.REP_NT_NAMES,nameValues);
  restrictionNames=createEntry(ImmutableSet.of(globRestr)).getRestrictionNames();
  assertEquals(1,restrictionNames.length);
  restrictionNames=createEntry(ImmutableSet.of(globRestr,nameRestr)).getRestrictionNames();
  assertEquals(2,restrictionNames.length);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestrictionForSingleValued() throws Exception {
  Restriction globRestr=createRestriction(AccessControlConstants.REP_GLOB,globValue);
  ACE ace=createEntry(ImmutableSet.of(globRestr));
  Value val=ace.getRestriction(AccessControlConstants.REP_GLOB);
  assertNotNull(val);
  assertEquals(globValue,val);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRedundantPrivileges() throws Exception {
  ACE ace=createEntry(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ);
  assertEquals(getBitsProvider().getBits(PrivilegeConstants.JCR_READ),ace.getPrivilegeBits());
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHashCode() throws RepositoryException {
  JackrabbitAccessControlEntry ace=createEntry(PrivilegeConstants.JCR_ALL);
  Privilege[] declaredAllPrivs=acMgr.privilegeFromName(PrivilegeConstants.JCR_ALL).getDeclaredAggregatePrivileges();
  Privilege[] aggregateAllPrivs=acMgr.privilegeFromName(PrivilegeConstants.JCR_ALL).getAggregatePrivileges();
  List<Privilege> l=Lists.newArrayList(aggregateAllPrivs);
  l.add(l.remove(0));
  Privilege[] reordered=l.toArray(new Privilege[l.size()]);
  Map<AccessControlEntry,AccessControlEntry> equivalent=new HashMap<AccessControlEntry,AccessControlEntry>();
  equivalent.put(ace,createEntry(PrivilegeConstants.JCR_ALL));
  equivalent.put(ace,createEntry(PrivilegeConstants.JCR_ALL,PrivilegeConstants.JCR_ALL));
  equivalent.put(ace,createEntry(testPrincipal,declaredAllPrivs,true));
  equivalent.put(ace,createEntry(testPrincipal,aggregateAllPrivs,true));
  equivalent.put(ace,createEntry(testPrincipal,reordered,true));
  equivalent.put(createEntry(testPrincipal,declaredAllPrivs,true),createEntry(testPrincipal,reordered,true));
  equivalent.put(createEntry(testPrincipal,declaredAllPrivs,true),createEntry(testPrincipal,aggregateAllPrivs,true));
  for (  AccessControlEntry entry : equivalent.keySet()) {
    AccessControlEntry eqv=equivalent.get(entry);
    assertEquals(entry.hashCode(),eqv.hashCode());
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquals() throws RepositoryException {
  Map<AccessControlEntry,AccessControlEntry> equalAces=new HashMap<AccessControlEntry,AccessControlEntry>();
  ACE ace=createEntry(PrivilegeConstants.JCR_ALL);
  equalAces.put(ace,createEntry(PrivilegeConstants.JCR_ALL));
  Privilege[] declaredAllPrivs=acMgr.privilegeFromName(PrivilegeConstants.JCR_ALL).getDeclaredAggregatePrivileges();
  equalAces.put(ace,createEntry(testPrincipal,declaredAllPrivs,true));
  Privilege[] aggregateAllPrivs=acMgr.privilegeFromName(PrivilegeConstants.JCR_ALL).getAggregatePrivileges();
  equalAces.put(ace,createEntry(testPrincipal,aggregateAllPrivs,true));
  List<Privilege> reordered=new ArrayList<Privilege>(Arrays.asList(aggregateAllPrivs));
  reordered.add(reordered.remove(0));
  equalAces.put(createEntry(testPrincipal,reordered.toArray(new Privilege[reordered.size()]),true),createEntry(testPrincipal,aggregateAllPrivs,true));
  equalAces.put(createEntry(testPrincipal,declaredAllPrivs,true),createEntry(testPrincipal,aggregateAllPrivs,true));
  for (  AccessControlEntry entry : equalAces.keySet()) {
    assertEquals(entry,equalAces.get(entry));
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @since OAK 1.0: support for multi-value restrictions
 */
@Test public void testGetRestrictionsForMultiValued2() throws Exception {
  Restriction singleNameRestr=createRestriction(AccessControlConstants.REP_NT_NAMES,new Value[]{nameValue});
  ACE ace=createEntry(ImmutableSet.of(singleNameRestr));
  Value[] vs=ace.getRestrictions(AccessControlConstants.REP_NT_NAMES);
  assertEquals(1,vs.length);
  assertEquals(nameValue,vs[0]);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @since OAK 1.0: support for multi-value restrictions
 */
@Test public void testGetRestrictionsForMultiValued() throws Exception {
  Restriction nameRestr=createRestriction(AccessControlConstants.REP_NT_NAMES,nameValues);
  ACE ace=createEntry(ImmutableSet.of(nameRestr));
  Value[] vs=ace.getRestrictions(AccessControlConstants.REP_NT_NAMES);
  assertEquals(2,vs.length);
  assertArrayEquals(nameValues,vs);
}

</code></pre>

<br>
<pre class="type-6 type-19 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipal() throws RepositoryException {
  ACE tmpl=createEntry(new String[]{PrivilegeConstants.JCR_READ},true);
  assertNotNull(tmpl.getPrincipal());
  assertEquals(testPrincipal.getName(),tmpl.getPrincipal().getName());
  assertSame(testPrincipal,tmpl.getPrincipal());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.accesscontrol.AbstractAccessControlListTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyAcl() throws RepositoryException {
  AbstractAccessControlList acl=createEmptyACL();
  assertNotNull(acl.getAccessControlEntries());
  assertNotNull(acl.getEntries());
  assertTrue(acl.getAccessControlEntries().length == 0);
  assertEquals(acl.getAccessControlEntries().length,acl.getEntries().size());
  assertEquals(0,acl.size());
  assertTrue(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetOakPath(){
  NamePathMapper npMapper=new NamePathMapperImpl(new LocalNameMapper(singletonMap("oak","http://jackrabbit.apache.org"),singletonMap("jcr","http://jackrabbit.apache.org")));
  Map<String,String> paths=new HashMap<String,String>();
  paths.put(null,null);
  paths.put(getTestPath(),getTestPath());
  paths.put("/","/");
  String oakPath="/oak:testPath";
  String jcrPath="/jcr:testPath";
  paths.put(jcrPath,oakPath);
  jcrPath="/{http://jackrabbit.apache.org}testPath";
  paths.put(jcrPath,oakPath);
  for (  String path : paths.keySet()) {
    AbstractAccessControlList acl=createACL(path,Collections.<ACE>emptyList(),npMapper);
    assertEquals(paths.get(path),acl.getOakPath());
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetRestrictionTypeForUnknownName() throws RepositoryException {
  AbstractAccessControlList acl=createEmptyACL();
  assertEquals(PropertyType.UNDEFINED,acl.getRestrictionType("unknownRestrictionName"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSize() throws RepositoryException {
  AbstractAccessControlList acl=createACL(createTestEntries());
  assertEquals(3,acl.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEntries() throws RepositoryException {
  List<ACE> aces=createTestEntries();
  AbstractAccessControlList acl=createACL(aces);
  assertNotNull(acl.getEntries());
  assertNotNull(acl.getAccessControlEntries());
  assertEquals(aces.size(),acl.getEntries().size());
  assertEquals(aces.size(),acl.getAccessControlEntries().length);
  assertTrue(acl.getEntries().containsAll(aces));
  assertTrue(Arrays.asList(acl.getAccessControlEntries()).containsAll(aces));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestrictionType() throws RepositoryException {
  AbstractAccessControlList acl=createEmptyACL();
  for (  RestrictionDefinition def : getRestrictionProvider().getSupportedRestrictions(getTestPath())) {
    int reqType=acl.getRestrictionType(namePathMapper.getJcrName(def.getName()));
    assertTrue(reqType > PropertyType.UNDEFINED);
    assertEquals(def.getRequiredType().tag(),reqType);
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPath(){
  NameMapper nameMapper=new GlobalNameMapper(Collections.singletonMap("jr","http://jackrabbit.apache.org"));
  NamePathMapper npMapper=new NamePathMapperImpl(nameMapper);
  Map<String,String> paths=new HashMap<String,String>();
  paths.put(null,null);
  paths.put(getTestPath(),getTestPath());
  paths.put("/","/");
  paths.put("/jr:testPath","/jr:testPath");
  paths.put("/{http://jackrabbit.apache.org}testPath","/jr:testPath");
  for (  String path : paths.keySet()) {
    AbstractAccessControlList acl=createACL(path,Collections.<ACE>emptyList(),npMapper);
    assertEquals(paths.get(path),acl.getPath());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.accesscontrol.ImmutableACLTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEqualsForEmpty() throws Exception {
  JackrabbitAccessControlList acl=createEmptyACL();
  assertEquals(acl,createEmptyACL());
  ACE entry=createEntry(testPrincipal,testPrivileges,true);
  assertFalse(acl.equals(createACL(entry)));
  assertFalse(acl.equals(new TestACL(getTestPath(),getRestrictionProvider(),Collections.<JackrabbitAccessControlEntry>emptyList())));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquals() throws Exception {
  RestrictionProvider rp=getRestrictionProvider();
  ACE ace1=createEntry(testPrincipal,false,null,PrivilegeConstants.JCR_VERSION_MANAGEMENT);
  ACE ace2=createEntry(testPrincipal,testPrivileges,true);
  ACE ace2b=createEntry(testPrincipal,getAggregatedPrivileges(testPrivileges),true);
  JackrabbitAccessControlList acl=createACL(ace1,ace2);
  JackrabbitAccessControlList repoAcl=createACL((String)null,ace1,ace2);
  assertEquals(acl,createACL(ace1,ace2));
  assertEquals(acl,createACL(ace1,ace2b));
  assertEquals(repoAcl,createACL((String)null,ace1,ace2b));
  assertFalse(acl.equals(createACL(ace2,ace1)));
  assertFalse(acl.equals(repoAcl));
  assertFalse(acl.equals(createEmptyACL()));
  assertFalse(acl.equals(createACL("/anotherPath",ace1,ace2)));
  assertFalse(acl.equals(new TestACL("/anotherPath",rp,ace1,ace2)));
  assertFalse(acl.equals(new TestACL("/anotherPath",rp,ace1,ace2)));
  assertFalse(acl.equals(new TestACL("/anotherPath",rp)));
  assertFalse(acl.equals(new TestACL(getTestPath(),rp,ace1,ace2)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyIsImmutable() throws Exception {
  JackrabbitAccessControlList acl=createEmptyACL();
  assertTrue(acl.isEmpty());
  assertEquals(0,acl.size());
  assertEquals(getTestPath(),acl.getPath());
  assertImmutable(acl);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImmutable() throws Exception {
  List<ACE> entries=new ArrayList<ACE>();
  entries.add(createEntry(testPrincipal,testPrivileges,true));
  entries.add(createEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT),false));
  JackrabbitAccessControlList acl=createACL(entries);
  assertFalse(acl.isEmpty());
  assertEquals(2,acl.size());
  assertEquals(getTestPath(),acl.getPath());
  assertImmutable(acl);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.AccessControlTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCombinedSetup() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/content");
  acl.addAccessControlEntry(getTestGroupPrincipal(),AccessControlUtils.privilegesFromNames(acMgr,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  acMgr.setPolicy(acl.getPath(),acl);
  root.commit();
  PermissionProvider combined=getConfig(AuthorizationConfiguration.class).getPermissionProvider(root,root.getContentSession().getWorkspaceName(),ImmutableSet.of(getTestGroupPrincipal()));
  for (  String acPath : acPaths) {
    boolean canReadAc=Text.isDescendantOrEqual("/content",acPath);
    Tree acTree=root.getTree(acPath);
    assertEquals(canReadAc,combined.hasPrivileges(acTree,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
    assertEquals(canReadAc,combined.getPrivileges(acTree).contains(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
    assertEquals(canReadAc,combined.isGranted(acPath,JackrabbitSession.ACTION_READ_ACCESS_CONTROL));
    assertEquals(canReadAc,combined.isGranted(acTree,null,Permissions.READ_ACCESS_CONTROL));
    Tree t=root.getTree("/");
    TreePermission tp=combined.getTreePermission(t,TreePermission.EMPTY);
    for (    String name : PathUtils.elements(acPath)) {
      t=t.getChild(name);
      tp=combined.getTreePermission(t,tp);
    }
    assertEquals(canReadAc,tp.canRead());
    assertEquals(canReadAc,tp.isGranted(Permissions.READ_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSupportedPermissions(){
  for (  String acPath : acPaths) {
    assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(root.getTree(acPath),null,Permissions.READ));
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSupportedPermissionsLocation(){
  for (  String acPath : acPaths) {
    assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(TreeLocation.create(root,acPath),Permissions.READ));
  }
}

</code></pre>

<br>
<pre class="type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermission(){
  for (  String acPath : acPaths) {
    Tree t=root.getTree("/");
    TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
    for (    String name : PathUtils.elements(acPath)) {
      t=t.getChild(name);
      tp=pp.getTreePermission(t,tp);
    }
    assertSame(TreePermission.NO_RECOURSE,tp);
    assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(tp,null,Permissions.READ));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugAccessControlManagerTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetEffectivePoliciesUnsupportedPath() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getEffectivePolicies(UNSUPPORTED_PATH);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetEffectivePoliciesNullPath() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getEffectivePolicies((String)null);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPolicies() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPoliciesNullPath() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies((String)null);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPoliciesUnsupportedPath() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(UNSUPPORTED_PATH);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicy() throws Exception {
  CugPolicy cug=getApplicableCug(SUPPORTED_PATH);
  cug.addPrincipals(EveryonePrincipal.getInstance());
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,cug);
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  assertEquals(1,policies.length);
  AccessControlPolicy policy=policies[0];
  assertTrue(policy instanceof CugPolicyImpl);
  Set<Principal> principals=((CugPolicy)policy).getPrincipals();
  assertEquals(1,principals.size());
  assertEquals(EveryonePrincipal.getInstance(),principals.iterator().next());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicyPersisted() throws Exception {
  CugPolicy cug=getApplicableCug(SUPPORTED_PATH);
  cug.addPrincipals(EveryonePrincipal.getInstance());
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,cug);
  root.commit();
  Tree tree=root.getTree(SUPPORTED_PATH);
  assertTrue(TreeUtil.isNodeType(tree,CugConstants.MIX_REP_CUG_MIXIN,root.getTree(NodeTypeConstants.NODE_TYPES_PATH)));
  Tree cugTree=tree.getChild(CugConstants.REP_CUG_POLICY);
  assertTrue(cugTree.exists());
  assertEquals(CugConstants.NT_REP_CUG_POLICY,TreeUtil.getPrimaryTypeName(cugTree));
  PropertyState prop=cugTree.getProperty(CugConstants.REP_PRINCIPAL_NAMES);
  assertNotNull(prop);
  assertTrue(prop.isArray());
  assertEquals(Type.STRINGS,prop.getType());
  assertEquals(1,prop.count());
  assertEquals(EveryonePrincipal.NAME,prop.getValue(Type.STRING,0));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEffectivePoliciesByPrincipal() throws Exception {
  AccessControlPolicy[] applicable=cugAccessControlManager.getEffectivePolicies(ImmutableSet.<Principal>of(EveryonePrincipal.getInstance()));
  assertNotNull(applicable);
  assertEquals(0,applicable.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesByPrincipal() throws Exception {
  AccessControlPolicy[] applicable=cugAccessControlManager.getApplicablePolicies(EveryonePrincipal.getInstance());
  assertNotNull(applicable);
  assertEquals(0,applicable.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetEffectivePolicies() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getEffectivePolicies(SUPPORTED_PATH);
  assertEquals(0,policies.length);
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,createCug(SUPPORTED_PATH));
  root.commit();
  policies=cugAccessControlManager.getEffectivePolicies(SUPPORTED_PATH);
  assertEquals(1,policies.length);
  AccessControlPolicy[] effectiveOnChild=cugAccessControlManager.getEffectivePolicies(SUPPORTED_PATH + "/subtree");
  assertEquals(1,policies.length);
  assertEquals(policies.length,effectiveOnChild.length);
  assertEquals(((JackrabbitAccessControlPolicy)policies[0]).getPath(),((JackrabbitAccessControlPolicy)effectiveOnChild[0]).getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRemovePolicy() throws Exception {
  CugPolicy cug=getApplicableCug(SUPPORTED_PATH);
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,cug);
  cugAccessControlManager.removePolicy(SUPPORTED_PATH,cugAccessControlManager.getPolicies(SUPPORTED_PATH)[0]);
  assertArrayEquals(new AccessControlPolicy[0],cugAccessControlManager.getPolicies(SUPPORTED_PATH));
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetSupportedPrivileges() throws Exception {
  Privilege[] readPrivs=privilegesFromNames(PrivilegeConstants.JCR_READ);
  Map<String,Privilege[]> pathMap=ImmutableMap.of(SUPPORTED_PATH,readPrivs,SUPPORTED_PATH + "/subtree",readPrivs,UNSUPPORTED_PATH,new Privilege[0],NodeTypeConstants.NODE_TYPES_PATH,new Privilege[0]);
  for (  String path : pathMap.keySet()) {
    Privilege[] expected=pathMap.get(path);
    assertArrayEquals(expected,cugAccessControlManager.getSupportedPrivileges(path));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetEffectivePoliciesNotEnabled() throws Exception {
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,createCug(SUPPORTED_PATH));
  root.commit();
  ConfigurationParameters config=ConfigurationParameters.of(AuthorizationConfiguration.NAME,ConfigurationParameters.of(CugConstants.PARAM_CUG_SUPPORTED_PATHS,SUPPORTED_PATHS,CugConstants.PARAM_CUG_ENABLED,false));
  CugAccessControlManager acMgr=new CugAccessControlManager(root,NamePathMapper.DEFAULT,new CugSecurityProvider(config));
  AccessControlPolicy[] policies=acMgr.getEffectivePolicies(SUPPORTED_PATH);
  assertEquals(0,policies.length);
  AccessControlPolicy[] effectiveOnChild=acMgr.getEffectivePolicies(SUPPORTED_PATH + "/subtree");
  assertEquals(0,policies.length);
  assertEquals(policies.length,effectiveOnChild.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterSet() throws Exception {
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,getApplicableCug(SUPPORTED_PATH));
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof CugPolicyImpl);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterManualCreation() throws Exception {
  NodeUtil n=new NodeUtil(root.getTree(SUPPORTED_PATH));
  NodeUtil cug=n.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof CugPolicy);
  CugPolicy cugPolicy=(CugPolicy)policies[0];
  assertTrue(cugPolicy.getPrincipals().isEmpty());
  cug.setStrings(REP_PRINCIPAL_NAMES,"unknownPrincipalName",EveryonePrincipal.NAME);
  policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  cugPolicy=(CugPolicy)policies[0];
  assertEquals(2,cugPolicy.getPrincipals().size());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesByPrincipal() throws Exception {
  AccessControlPolicy[] applicable=cugAccessControlManager.getPolicies(EveryonePrincipal.getInstance());
  assertNotNull(applicable);
  assertEquals(0,applicable.length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugConfigurationTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetName(){
  assertEquals(AuthorizationConfiguration.NAME,createConfiguration(ConfigurationParameters.EMPTY).getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugEvaluationTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegesTestGroupEveryone() throws Exception {
  Set<String> r_w_rac=ImmutableSet.of(PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal,EveryonePrincipal.getInstance());
  assertEquals(r_w_rac,pp.getPrivileges(content));
  assertEquals(r_w_rac,pp.getPrivileges(a));
  assertEquals(r_w_rac,pp.getPrivileges(c));
  assertTrue(pp.getPrivileges(content2).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegesTestUserEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  Set<String> r=ImmutableSet.of(PrivilegeConstants.JCR_READ);
  assertEquals(r,pp.getPrivileges(content));
  assertEquals(r,pp.getPrivileges(c));
  assertTrue(pp.getPrivileges(a).isEmpty());
  assertTrue(pp.getPrivileges(content2).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegesTestGroup() throws Exception {
  Set<String> w_rac=ImmutableSet.of(PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  Set<String> r_w_rac=ImmutableSet.of(PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal);
  assertEquals(r_w_rac,pp.getPrivileges(content));
  assertEquals(r_w_rac,pp.getPrivileges(a));
  assertEquals(w_rac,pp.getPrivileges(c));
  assertTrue(pp.getPrivileges(content2).isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugImportBaseTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCugValidPrincipalsNoMixin() throws Exception {
  testGroup=((JackrabbitSession)adminSession).getUserManager().createGroup(new PrincipalImpl(TEST_GROUP_PRINCIPAL_NAME));
  adminSession.save();
  doImport(getTargetPath(),XML_CUG_POLICY);
  try {
    adminSession.save();
    fail();
  }
 catch (  AccessControlException e) {
    Throwable cause=e.getCause();
    assertTrue(cause instanceof CommitFailedException);
    assertTrue(((CommitFailedException)cause).isAccessControlViolation());
    assertEquals(22,((CommitFailedException)cause).getCode());
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCugWithEmptyPrincipalNames() throws Exception {
  String xmlCugPolicyEmptyPrincipals="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"rep:cugPolicy\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "<sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:CugPolicy</sv:value></sv:property>"+ "<sv:property sv:name=\"rep:principalNames\" sv:type=\"String\" sv:multiple=\"true\"></sv:property>"+ "</sv:node>";
  getTargetNode().addMixin(CugConstants.MIX_REP_CUG_MIXIN);
  doImport(getTargetPath(),xmlCugPolicyEmptyPrincipals);
  getImportSession().save();
  String propPath=getTargetPath() + "/" + CugConstants.REP_CUG_POLICY+ "/"+ CugConstants.REP_PRINCIPAL_NAMES;
  assertTrue(getImportSession().propertyExists(propPath));
  assertArrayEquals(new Value[0],getImportSession().getProperty(propPath).getValues());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugPermissionProviderTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see PermissionProvider#getPrivileges(org.apache.jackrabbit.oak.api.Tree)
 */
@Test public void testGetPrivilegesAtCug2(){
  PermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH),testGroupPrincipal);
  Set<String> expected=ImmutableSet.of(PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.REP_READ_PROPERTIES);
  assertEquals(expected,pp.getPrivileges(root.getTree("/content/a")));
  assertEquals(expected,pp.getPrivileges(root.getTree("/content/aa/bb")));
  assertTrue(pp.getPrivileges(root.getTree("/content/a/b/c")).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see PermissionProvider#getPrivileges(org.apache.jackrabbit.oak.api.Tree)
 */
@Test public void testGetPrivilegesAtCug(){
  Set<String> expected=ImmutableSet.of(PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.REP_READ_PROPERTIES);
  for (  String p : READABLE_PATHS) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertEquals(expected,cugPermProvider.getPrivileges(tree));
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPermissions(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.api.PropertyState,long)
 */
@Test public void testSupportedPermissionsByNullTree(){
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.READ));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.READ_NODE));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.READ_PROPERTY));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.ALL));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.WRITE));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.ADD_NODE | Permissions.REMOVE));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPermissions(org.apache.jackrabbit.oak.spi.security.authorization.permission.TreePermission,org.apache.jackrabbit.oak.api.PropertyState,long)
 */
@Test public void testSupportedPermissionsByTreePermission(){
  TreePermission rootTp=cugPermProvider.getTreePermission(root.getTree("/"),TreePermission.EMPTY);
  Map<TreePermission,Boolean> tpMap=new HashMap<TreePermission,Boolean>();
  TreePermission contentTp=cugPermProvider.getTreePermission(root.getTree(SUPPORTED_PATH),rootTp);
  tpMap.put(contentTp,false);
  TreePermission aTp=cugPermProvider.getTreePermission(root.getTree("/content/a"),contentTp);
  tpMap.put(aTp,true);
  tpMap.put(cugPermProvider.getTreePermission(root.getTree("/content/a/rep:cugPolicy"),aTp),true);
  TreePermission bTp=cugPermProvider.getTreePermission(root.getTree("/content/a/b"),aTp);
  tpMap.put(bTp,true);
  tpMap.put(cugPermProvider.getTreePermission(root.getTree("/content/a/b/c"),bTp),true);
  TreePermission aaTp=cugPermProvider.getTreePermission(root.getTree("/content/aa"),contentTp);
  tpMap.put(aaTp,false);
  TreePermission bbTp=cugPermProvider.getTreePermission(root.getTree("/content/aa/bb"),aaTp);
  tpMap.put(cugPermProvider.getTreePermission(root.getTree("/content/aa/bb/cc"),bbTp),true);
  tpMap.put(cugPermProvider.getTreePermission(root.getTree("/jcr:system"),rootTp),false);
  tpMap.put(rootTp,false);
  tpMap.put(cugPermProvider.getTreePermission(root.getTree(UNSUPPORTED_PATH),rootTp),false);
  for (  TreePermission tp : tpMap.keySet()) {
    boolean isInCug=tpMap.get(tp);
    if (isInCug) {
      assertEquals(Permissions.READ,cugPermProvider.supportedPermissions(tp,null,Permissions.READ));
      assertEquals(Permissions.READ_NODE,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_NODE));
      assertEquals(Permissions.READ_PROPERTY,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_PROPERTY));
      assertEquals(Permissions.READ,cugPermProvider.supportedPermissions(tp,null,Permissions.ALL));
      assertEquals(Permissions.READ_NODE,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
 else {
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.READ));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_NODE));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_PROPERTY));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.ALL));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
    assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.ADD_NODE | Permissions.REMOVE));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPermissions(org.apache.jackrabbit.oak.plugins.tree.TreeLocation,long)
 */
@Test public void testSupportedPermissionsByLocation(){
  for (  String path : PATH_INCUG_MAP.keySet()) {
    boolean isInCug=PATH_INCUG_MAP.get(path);
    TreeLocation location=TreeLocation.create(root,path);
    if (isInCug) {
      assertEquals(path,Permissions.READ,cugPermProvider.supportedPermissions(location,Permissions.READ));
      assertEquals(path,Permissions.READ_NODE,cugPermProvider.supportedPermissions(location,Permissions.READ_NODE));
      assertEquals(path,Permissions.READ_PROPERTY,cugPermProvider.supportedPermissions(location,Permissions.READ_PROPERTY));
      assertEquals(path,Permissions.READ,cugPermProvider.supportedPermissions(location,Permissions.ALL));
      assertEquals(path,Permissions.READ_NODE,cugPermProvider.supportedPermissions(location,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
 else {
      assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.READ));
      assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.READ_NODE));
      assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.READ_PROPERTY));
      assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.ALL));
      assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
    assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.READ_ACCESS_CONTROL));
    assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.MODIFY_ACCESS_CONTROL));
    assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.ADD_NODE));
    assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.WRITE));
    assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(TreeLocation.create(root,"/path/to/no-existing/tree"),Permissions.READ));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPermissions(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.api.PropertyState,long)
 */
@Test public void testSupportedPermissionsByTree(){
  for (  String path : PATH_INCUG_MAP.keySet()) {
    boolean isInCug=PATH_INCUG_MAP.get(path);
    Tree tree=root.getTree(path);
    if (isInCug) {
      assertEquals(Permissions.READ,cugPermProvider.supportedPermissions(tree,null,Permissions.READ));
      assertEquals(Permissions.READ_NODE,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_NODE));
      assertEquals(Permissions.READ_PROPERTY,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_PROPERTY));
      assertEquals(Permissions.READ,cugPermProvider.supportedPermissions(tree,null,Permissions.ALL));
      assertEquals(Permissions.READ_NODE,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
 else {
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.READ));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_NODE));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_PROPERTY));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.ALL));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
    assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.WRITE));
    assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.ADD_NODE | Permissions.REMOVE));
    assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugPolicyImplTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPath(){
  CugPolicy empty=createEmptyCugPolicy();
  assertEquals(path,empty.getPath());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipals(){
  CugPolicyImpl cug=createCugPolicy(principals);
  Set<Principal> principalSet=cug.getPrincipals();
  assertFalse(principalSet.isEmpty());
  assertEquals(principals,principalSet);
  assertNotSame(principals,principalSet);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPathWithRemapping(){
  String oakPath="/oak:testPath";
  NamePathMapper mapper=new NamePathMapperImpl(new LocalNameMapper(root,ImmutableMap.of("quercus","http://jackrabbit.apache.org/oak/ns/1.0")));
  CugPolicy empty=new CugPolicyImpl(oakPath,mapper,principalManager,ImportBehavior.ABORT);
  assertEquals("/quercus:testPath",empty.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddInvalidPrincipalsBestEffort() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.BESTEFFORT,principals);
  assertTrue(cug.addPrincipals(EveryonePrincipal.getInstance(),new PrincipalImpl("unknown")));
  Set<Principal> principalSet=cug.getPrincipals();
  assertEquals(3,principalSet.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipalNames(){
  CugPolicyImpl cug=createCugPolicy(principals);
  Iterator<String> it=cug.getPrincipalNames().iterator();
  assertTrue(it.hasNext());
  assertEquals("test",it.next());
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddContainedPrincipal() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.BESTEFFORT,principals);
  assertFalse(cug.addPrincipals(new PrincipalImpl("test")));
  assertEquals(principals,cug.getPrincipals());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddInvalidPrincipalsIgnore() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.IGNORE,principals);
  assertTrue(cug.addPrincipals(new PrincipalImpl("unknown"),EveryonePrincipal.getInstance()));
  Set<Principal> principalSet=cug.getPrincipals();
  assertEquals(2,principalSet.size());
  assertFalse(principalSet.contains(new PrincipalImpl("unknown")));
  assertFalse(principalSet.contains(new PrincipalImpl("")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugValidatorTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingMixin() throws Exception {
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  try {
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(22,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidPrimaryType() throws Exception {
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  try {
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(21,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCugPolicyWithDifferentName() throws Exception {
  node.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_CUG_MIXIN);
  NodeUtil cug=node.addChild("anotherName",NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  try {
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(23,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryType(){
  try {
    node.setName(JcrConstants.JCR_PRIMARYTYPE,NT_REP_CUG_POLICY);
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(20,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryTypeOfCug() throws Exception {
  node.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_CUG_MIXIN);
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  root.commit();
  try {
    cug.setName(JcrConstants.JCR_PRIMARYTYPE,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(21,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveMixin() throws Exception {
  node.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_CUG_MIXIN);
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  root.commit();
  try {
    node.removeProperty(JcrConstants.JCR_MIXINTYPES);
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(22,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.HiddenTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSupportedPermissions(){
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(hiddenTree,null,Permissions.READ));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSupportedPermissionsLocation(){
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(TreeLocation.create(hiddenTree),Permissions.READ));
}

</code></pre>

<br>
<pre class="type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermission(){
  Tree t=readOnlyRoot.getTree("/");
  TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
  for (  String name : PathUtils.elements(hiddenTree.getPath())) {
    assertCugPermission(tp,true);
    t=t.getChild(name);
    tp=pp.getTreePermission(t,tp);
  }
  assertSame(TreePermission.NO_RECOURSE,tp);
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(tp,null,Permissions.READ));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.NestedCugHookTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToString(){
  assertEquals("NestedCugHook",new NestedCugHook().toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.NoCugTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSupportedPermissionsTreeLocation(){
  for (  String p : PATHS) {
    assertEquals(p,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(TreeLocation.create(root.getTree(p)),Permissions.READ));
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSupportedPermissions(){
  for (  String p : PATHS) {
    assertEquals(p,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(root.getTree(p),null,Permissions.READ));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.SupportedPathsTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIncludes(){
  SupportedPaths supportedPaths=new SupportedPaths(ImmutableSet.of("/content"));
  Map<String,Boolean> pathMap=new HashMap<String,Boolean>();
  pathMap.put("/content",true);
  pathMap.put("/content/a",true);
  pathMap.put("/content/a/rep:cugPolicy",true);
  pathMap.put("/content/a/b",true);
  pathMap.put("/content/a/b/c/jcr:primaryType",true);
  pathMap.put("/content/aa",true);
  pathMap.put("/content/aa/bb/cc",true);
  pathMap.put("/jcr:system",false);
  pathMap.put("/",false);
  pathMap.put("/testRoot",false);
  pathMap.put("/some/other/path",false);
  for (  String path : pathMap.keySet()) {
    boolean expected=pathMap.get(path);
    assertEquals(path,expected,supportedPaths.includes(path));
    assertEquals(path,expected,supportedPaths.includes(path + '/'));
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMayContainCug(){
  SupportedPaths supportedPaths=new SupportedPaths(ImmutableSet.of("/content/a"));
  Map<String,Boolean> pathMap=new HashMap<String,Boolean>();
  pathMap.put("/",true);
  pathMap.put("/content",true);
  pathMap.put("/jcr:system",false);
  pathMap.put("/testRoot",false);
  pathMap.put("/some/other/path",false);
  pathMap.put("/content/a",false);
  pathMap.put("/content/a/b",false);
  for (  String path : pathMap.keySet()) {
    boolean expected=pathMap.get(path);
    assertEquals(path,expected,supportedPaths.mayContainCug(path));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.TopLevelPathTest </h4><pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMayContainWithCug() throws Exception {
  String cugPath=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree().getPath();
  createCug(cugPath,EveryonePrincipal.getInstance());
  root.commit();
  Root readOnlyRoot=RootFactory.createReadOnlyRoot(root);
  TopLevelPaths tlp=new TopLevelPaths(readOnlyRoot);
  for (  String p : PATHS) {
    assertEquals(p,Text.isDescendantOrEqual(p,cugPath),tlp.contains(p));
  }
  assertTrue(tlp.contains(Text.getAbsoluteParent(SUPPORTED_PATH3,0)));
  assertTrue(tlp.contains(cugPath));
  CugPermissionProvider cugPermProvider=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2,SUPPORTED_PATH3),getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  Tree t=readOnlyRoot.getTree(ROOT_PATH);
  TreePermission rootTp=cugPermProvider.getTreePermission(t,TreePermission.EMPTY);
  assertTrue(rootTp instanceof EmptyCugTreePermission);
  TreePermission tp=rootTp;
  for (  String segm : PathUtils.elements(cugPath)) {
    t=t.getChild(segm);
    tp=cugPermProvider.getTreePermission(t,tp);
    assertCugPermission(tp,Text.isDescendantOrEqual(SUPPORTED_PATH3,t.getPath()));
  }
  for (  String p : new String[]{SUPPORTED_PATH,SUPPORTED_PATH2,UNSUPPORTED_PATH}) {
    tp=getTreePermission(readOnlyRoot,p,cugPermProvider);
    assertSame(p,TreePermission.NO_RECOURSE,tp);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.VersionTest </h4><pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermissionVersionable() throws Exception {
  Tree versionable=root.getTree("/content/a");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2),EveryonePrincipal.getInstance());
  Tree t=root.getTree("/");
  TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
  String path=PathUtils.concat(vh.getPath(),"1.0",JCR_FROZENNODE,"b/c");
  for (  String segm : PathUtils.elements(path)) {
    t=t.getChild(segm);
    tp=pp.getTreePermission(t,tp);
    if (JCR_SYSTEM.equals(segm) || ReadOnlyVersionManager.isVersionStoreTree(t)) {
      assertTrue(t.getPath(),tp instanceof EmptyCugTreePermission);
    }
 else {
      assertTrue(t.getPath(),tp instanceof CugTreePermission);
      assertEquals(t.getPath(),"c".equals(segm),tp.canRead());
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadVersionContent() throws Exception {
  IdentifierManager idMgr=new IdentifierManager(testRoot);
  ReadOnlyVersionManager vMgr=ReadOnlyVersionManager.getInstance(testRoot,NamePathMapper.DEFAULT);
  for (  String path : readAccess) {
    Tree t=testRoot.getTree(path);
    assertTrue(path,t.exists());
    PropertyState ps=t.getProperty(JCR_VERSIONHISTORY);
    assertNotNull(ps);
    String vhUUID=ps.getValue(Type.STRING);
    assertEquals(vhUUID,ps.getValue(Type.STRING));
    Tree versionHistory=vMgr.getVersionHistory(t);
    assertNotNull(versionHistory);
    assertTrue(versionHistory.exists());
    assertTrue(versionHistory.getChild(JCR_ROOTVERSION).exists());
    assertFalse(versionHistory.getParent().exists());
    Tree vhTree=testRoot.getTree(versionHistory.getPath());
    assertTrue(vhTree.exists());
    String vhPath=idMgr.resolveUUID(vhUUID);
    assertNotNull(vhPath);
    assertEquals(versionHistory.getPath(),vhPath);
    assertTrue(testRoot.getTree(vhPath).exists());
    assertTrue(testRoot.getTree(vhPath + '/' + JCR_ROOTVERSION).exists());
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testVersionableWithUnsupportedType() throws Exception {
  Tree versionable=root.getTree("/content");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  Tree frozen=vh.getChild("1.0").getChild(JCR_FROZENNODE).getChild("a").getChild("b").getChild("c");
  Tree invalidFrozen=frozen.addChild(REP_CUG_POLICY);
  invalidFrozen.setProperty(JCR_PRIMARYTYPE,NT_REP_CUG_POLICY);
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  TreePermission tp=getTreePermission(root,PathUtils.concat(vh.getPath(),"1.0",JCR_FROZENNODE,"a/b/c"),pp);
  TreePermission tpForUnsupportedType=pp.getTreePermission(invalidFrozen,TreeType.VERSION,tp);
  assertEquals(TreePermission.NO_RECOURSE,tpForUnsupportedType);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVersionableRemoved2() throws Exception {
  Tree versionable=root.getTree("/content/a");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  assertFalse(testRoot.getTree(vh.getPath()).exists());
  versionable.remove();
  root.commit();
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(vh,null,Permissions.READ));
  assertFalse(pp.isGranted(vh,null,Permissions.READ));
  testRoot.refresh();
  assertTrue(testRoot.getTree(vh.getPath()).exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVersionableRemoved() throws Exception {
  Tree versionable=addVersionContent("/content/a/b/c");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  assertTrue(testRoot.getTree(vh.getPath()).exists());
  versionable.remove();
  root.commit();
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  assertEquals(Permissions.READ,pp.supportedPermissions(vh,null,Permissions.READ));
  assertFalse(pp.isGranted(vh,null,Permissions.READ));
  testRoot.refresh();
  assertFalse(testRoot.getTree(vh.getPath()).exists());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSupportedPermissions() throws Exception {
  Tree versionable=addVersionContent("/content/a/b/c");
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  Tree versionStorage=root.getTree(VersionConstants.VERSION_STORE_PATH);
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(versionStorage,null,Permissions.READ));
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(versionStorage.getParent(),null,Permissions.READ));
  Tree vh=versionManager.getVersionHistory(versionable);
  assertEquals(Permissions.READ,pp.supportedPermissions(vh,null,Permissions.READ));
  vh=versionManager.getVersionHistory(root.getTree("/content2"));
  assertEquals(Permissions.READ,pp.supportedPermissions(vh,null,Permissions.READ));
  vh=versionManager.getVersionHistory(root.getTree(UNSUPPORTED_PATH));
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(vh,null,Permissions.READ));
  vh=versionManager.getVersionHistory(root.getTree(SUPPORTED_PATH));
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(vh,null,Permissions.READ));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.permission.PermissionsTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPermissionsFromActions(){
  TreeLocation tl=TreeLocation.create(root.getTree("/"));
  Map<String,Long> map=ImmutableMap.of(Session.ACTION_READ,Permissions.READ_NODE,Session.ACTION_READ + "," + Session.ACTION_REMOVE,Permissions.READ_NODE | Permissions.REMOVE_NODE);
  for (  Map.Entry<String,Long> entry : map.entrySet()) {
    assertEquals(entry.getValue().longValue(),Permissions.getPermissions(entry.getKey(),tl,false));
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPermissionsFromJackrabbitActions(){
  TreeLocation tl=TreeLocation.create(root.getTree("/"));
  Map<String,Long> map=new HashMap<String,Long>();
  map.put(Session.ACTION_ADD_NODE,Permissions.ADD_NODE);
  map.put(JackrabbitSession.ACTION_ADD_PROPERTY,Permissions.ADD_PROPERTY);
  map.put(JackrabbitSession.ACTION_MODIFY_PROPERTY,Permissions.MODIFY_PROPERTY);
  map.put(JackrabbitSession.ACTION_REMOVE_PROPERTY,Permissions.REMOVE_PROPERTY);
  map.put(JackrabbitSession.ACTION_REMOVE_NODE,Permissions.REMOVE_NODE);
  map.put(JackrabbitSession.ACTION_NODE_TYPE_MANAGEMENT,Permissions.NODE_TYPE_MANAGEMENT);
  map.put(JackrabbitSession.ACTION_LOCKING,Permissions.LOCK_MANAGEMENT);
  map.put(JackrabbitSession.ACTION_VERSIONING,Permissions.VERSION_MANAGEMENT);
  map.put(JackrabbitSession.ACTION_READ_ACCESS_CONTROL,Permissions.READ_ACCESS_CONTROL);
  map.put(JackrabbitSession.ACTION_MODIFY_ACCESS_CONTROL,Permissions.MODIFY_ACCESS_CONTROL);
  map.put(JackrabbitSession.ACTION_USER_MANAGEMENT,Permissions.USER_MANAGEMENT);
  for (  Map.Entry<String,Long> entry : map.entrySet()) {
    assertEquals(entry.getValue().longValue(),Permissions.getPermissions(entry.getKey(),tl,false));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testActionSetProperty(){
  TreeLocation treeLocation=TreeLocation.create(root.getTree("/"));
  assertNull(treeLocation.getProperty());
  assertEquals(Permissions.ADD_PROPERTY,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,treeLocation,false));
  assertEquals(Permissions.MODIFY_ACCESS_CONTROL,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,treeLocation,true));
  TreeLocation nonExistingTree=TreeLocation.create(root.getTree("/nonExisting"));
  assertNull(nonExistingTree.getProperty());
  assertEquals(Permissions.ADD_PROPERTY,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,nonExistingTree,false));
  assertEquals(Permissions.MODIFY_ACCESS_CONTROL,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,nonExistingTree,true));
  TreeLocation nonExistingProp=TreeLocation.create(root,"/nonExisting");
  assertNull(nonExistingProp.getProperty());
  assertEquals(Permissions.ADD_PROPERTY,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,nonExistingProp,false));
  assertEquals(Permissions.MODIFY_ACCESS_CONTROL,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,nonExistingProp,true));
  TreeLocation existingProp=TreeLocation.create(root,"/jcr:primaryType");
  assertNotNull(existingProp.getProperty());
  assertEquals(Permissions.MODIFY_PROPERTY,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,existingProp,false));
  assertEquals(Permissions.MODIFY_ACCESS_CONTROL,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,existingProp,true));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPermissionsOnAccessControlledNode(){
  TreeLocation tl=TreeLocation.create(root.getTree("/rep:policy"));
  Map<String,Long> map=new HashMap<String,Long>();
  map.put(Session.ACTION_READ,Permissions.READ_ACCESS_CONTROL);
  map.put(Session.ACTION_ADD_NODE,Permissions.MODIFY_ACCESS_CONTROL);
  map.put(Session.ACTION_REMOVE,Permissions.MODIFY_ACCESS_CONTROL);
  map.put(Session.ACTION_SET_PROPERTY,Permissions.MODIFY_ACCESS_CONTROL);
  map.put(JackrabbitSession.ACTION_ADD_PROPERTY,Permissions.MODIFY_ACCESS_CONTROL);
  map.put(JackrabbitSession.ACTION_MODIFY_PROPERTY,Permissions.MODIFY_ACCESS_CONTROL);
  map.put(JackrabbitSession.ACTION_REMOVE_PROPERTY,Permissions.MODIFY_ACCESS_CONTROL);
  map.put(JackrabbitSession.ACTION_REMOVE_NODE,Permissions.MODIFY_ACCESS_CONTROL);
  map.put(JackrabbitSession.ACTION_READ_ACCESS_CONTROL,Permissions.READ_ACCESS_CONTROL);
  map.put(JackrabbitSession.ACTION_MODIFY_ACCESS_CONTROL,Permissions.MODIFY_ACCESS_CONTROL);
  map.put(JackrabbitSession.ACTION_LOCKING,Permissions.LOCK_MANAGEMENT);
  map.put(JackrabbitSession.ACTION_VERSIONING,Permissions.VERSION_MANAGEMENT);
  map.put(JackrabbitSession.ACTION_USER_MANAGEMENT,Permissions.USER_MANAGEMENT);
  for (  Map.Entry<String,Long> entry : map.entrySet()) {
    assertEquals(entry.getKey(),entry.getValue().longValue(),Permissions.getPermissions(entry.getKey(),tl,true));
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPermissionsFromPermissionNameActions(){
  TreeLocation tl=TreeLocation.create(root.getTree("/"));
  long permissions=Permissions.NODE_TYPE_MANAGEMENT | Permissions.LOCK_MANAGEMENT | Permissions.VERSION_MANAGEMENT;
  Set<String> names=Permissions.getNames(permissions);
  String jcrActions=Text.implode(names.toArray(new String[names.size()]),",");
  assertEquals(permissions,Permissions.getPermissions(jcrActions,tl,false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.AbstractRestrictionProviderTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteRestrictions() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_GLOB,globValue);
  Tree aceTree=getAceTree();
  restrictionProvider.writeRestrictions(testPath,aceTree,ImmutableSet.<Restriction>of(r));
  assertTrue(aceTree.hasChild(REP_RESTRICTIONS));
  Tree restr=aceTree.getChild(REP_RESTRICTIONS);
  assertEquals(r.getProperty(),restr.getProperty(REP_GLOB));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateMvRestriction() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,valueFactory.createValue("nt:folder",PropertyType.NAME),valueFactory.createValue("nt:file",PropertyType.NAME));
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  PropertyState ps=r.getProperty();
  assertTrue(ps.isArray());
  assertEquals(Type.NAMES,ps.getType());
  List<Value> vs=ValueFactoryImpl.createValues(ps,namePathMapper);
  assertArrayEquals(nameValues,vs.toArray(new Value[vs.size()]));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateMvRestriction3() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,nameValue);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  assertTrue(r.getProperty().isArray());
  assertEquals(Type.NAMES,r.getProperty().getType());
  List<Value> vs=ValueFactoryImpl.createValues(r.getProperty(),namePathMapper);
  assertArrayEquals(new Value[]{nameValue},vs.toArray(new Value[vs.size()]));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadRestrictions() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_GLOB,globValue);
  Tree aceTree=getAceTree(r);
  Set<Restriction> restrictions=restrictionProvider.readRestrictions(testPath,aceTree);
  assertEquals(1,restrictions.size());
  assertTrue(restrictions.contains(r));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateMvRestriction2() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,nameValues);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  PropertyState ps=r.getProperty();
  assertTrue(ps.isArray());
  assertEquals(Type.NAMES,ps.getType());
  List<Value> vs=ValueFactoryImpl.createValues(ps,namePathMapper);
  assertArrayEquals(nameValues,vs.toArray(new Value[vs.size()]));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateEmptyMvRestriction() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  assertTrue(r.getProperty().isArray());
  assertEquals(Type.NAMES,r.getProperty().getType());
  List<Value> vs=ValueFactoryImpl.createValues(r.getProperty(),namePathMapper);
  assertNotNull(vs);
  assertEquals(0,vs.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateRestriction() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_GLOB,globValue);
  assertNotNull(r);
  assertEquals(REP_GLOB,r.getDefinition().getName());
  assertEquals(globValue.getString(),r.getProperty().getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedRestrictions() throws Exception {
  Set<RestrictionDefinition> defs=restrictionProvider.getSupportedRestrictions(testPath);
  assertNotNull(defs);
  assertEquals(supported.size(),defs.size());
  for (  RestrictionDefinition def : supported.values()) {
    assertTrue(defs.contains(def));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateEmptyMvRestriction2() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,new Value[0]);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  assertTrue(r.getProperty().isArray());
  assertEquals(Type.NAMES,r.getProperty().getType());
  List<Value> vs=ValueFactoryImpl.createValues(r.getProperty(),namePathMapper);
  assertNotNull(vs);
  assertEquals(0,vs.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteInvalidRestrictions() throws Exception {
  PropertyState ps=PropertyStates.createProperty(REP_GLOB,valueFactory.createValue(false));
  Tree aceTree=getAceTree();
  restrictionProvider.writeRestrictions(testPath,aceTree,ImmutableSet.<Restriction>of(new RestrictionImpl(ps,false)));
  assertTrue(aceTree.hasChild(REP_RESTRICTIONS));
  Tree restr=aceTree.getChild(REP_RESTRICTIONS);
  assertEquals(ps,restr.getProperty(REP_GLOB));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.CompositeRestrictionProviderTest </h4><pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNewInstance(){
  RestrictionProvider crp=CompositeRestrictionProvider.newInstance(ImmutableSet.of(rp1,rp2));
  RestrictionProvider crp2=CompositeRestrictionProvider.newInstance(rp1,rp2);
  assertEquals(crp.getSupportedRestrictions("/testPath"),crp2.getSupportedRestrictions("/testPath"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedRestrictions(){
  String[] paths=new String[]{null,"/testPath"};
  for (  String path : paths) {
    Set<RestrictionDefinition> defs=provider.getSupportedRestrictions(path);
    int expectedSize=rp1.getSupportedRestrictions(path).size() + rp2.getSupportedRestrictions(path).size();
    assertEquals(expectedSize,defs.size());
    assertTrue(defs.containsAll(rp1.getSupportedRestrictions(path)));
    assertTrue(defs.containsAll(rp2.getSupportedRestrictions(path)));
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadRestrictions() throws Exception {
  NodeUtil aceNode=new NodeUtil(root.getTree("/")).addChild("test",NT_REP_GRANT_ACE);
  aceNode.setBoolean("boolean",true);
  aceNode.setValues("longs",new Value[]{vf.createValue(10),vf.createValue(290)});
  aceNode.setString(REP_GLOB,"*");
  aceNode.setNames(REP_NT_NAMES);
  aceNode.setString("invalid","val");
  aceNode.setStrings("invalid2","val1","val2","val3");
  Set<Restriction> restrictions=provider.readRestrictions("/test",aceNode.getTree());
  assertEquals(4,restrictions.size());
  for (  Restriction r : restrictions) {
    String name=r.getDefinition().getName();
    if (!supported.contains(name)) {
      fail("read unsupported restriction");
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.RestrictionDefinitionImplTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetRequiredType(){
  assertEquals(Type.NAME,definition.getRequiredType());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquals(){
  assertEquals(definition,new RestrictionDefinitionImpl(name,Type.NAME,true));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetName(){
  assertEquals(name,definition.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.RestrictionImplTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquals(){
  assertEquals(restriction,new RestrictionImpl(createProperty(name,value),true));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetName(){
  assertEquals(name,restriction.getDefinition().getName());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetRequiredType(){
  assertEquals(Type.NAME,restriction.getDefinition().getRequiredType());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.principal.AbstractPrincipalProviderTest </h4><pre class="type-9 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindEveryone(){
  assertNotNull(principalProvider.getPrincipal(EveryonePrincipal.NAME));
  Map<Integer,Boolean> tests=new HashMap<Integer,Boolean>();
  tests.put(PrincipalManager.SEARCH_TYPE_ALL,Boolean.TRUE);
  tests.put(PrincipalManager.SEARCH_TYPE_GROUP,Boolean.TRUE);
  tests.put(PrincipalManager.SEARCH_TYPE_NOT_GROUP,Boolean.FALSE);
  for (  Integer searchType : tests.keySet()) {
    boolean found=false;
    Iterator<? extends Principal> it=principalProvider.findPrincipals(EveryonePrincipal.NAME,searchType);
    while (it.hasNext()) {
      Principal p=it.next();
      if (p.getName().equals(EveryonePrincipal.NAME)) {
        found=true;
      }
    }
    Boolean expected=tests.get(searchType);
    assertEquals(expected,found);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.principal.EveryonePrincipalTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquals(){
  assertEquals(everyone,EveryonePrincipal.getInstance());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetName(){
  assertEquals(EveryonePrincipal.NAME,everyone.getName());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEqualsOtherJackrabbitGroup(){
  Principal someotherEveryone=new OtherEveryoneGroup();
  assertEquals(everyone,someotherEveryone);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.principal.PrincipalImplTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetName(){
  assertEquals("name",principal.getName());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquals(){
  List<Principal> principals=new ArrayList<Principal>();
  principals.add(new PrincipalImpl("name"));
  principals.add(new TestPrincipal("name"));
  principals.add(new JackrabbitPrincipal(){
    @Override public String getName(){
      return "name";
    }
  }
);
  for (  Principal p : principals) {
    assertEquals(principal,p);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.privilege.PrivilegeBitsProviderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAggregation() throws RepositoryException {
  PrivilegeBits writeBits=bitsProvider.getBits(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,JCR_MODIFY_PROPERTIES);
  Set<String> names=bitsProvider.getPrivilegeNames(writeBits);
  assertEquals(1,names.size());
  assertEquals(JCR_WRITE,names.iterator().next());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegeNames() throws RepositoryException {
  PrivilegeBits bits=bitsProvider.getBits(JCR_READ_ACCESS_CONTROL);
  Set<String> names=bitsProvider.getPrivilegeNames(bits);
  assertEquals(1,names.size());
  assertEquals(JCR_READ_ACCESS_CONTROL,names.iterator().next());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegesTree(){
  assertNotNull(bitsProvider.getPrivilegesTree());
  assertEquals(PRIVILEGES_PATH,bitsProvider.getPrivilegesTree().getPath());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetBitsFromInvalidPrivilege(){
  assertEquals(PrivilegeBits.EMPTY,bitsProvider.getBits("invalid1","invalid2"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetBitsFromEmpty(){
  assertEquals(PrivilegeBits.EMPTY,bitsProvider.getBits());
  assertEquals(PrivilegeBits.EMPTY,bitsProvider.getBits(new String[0]));
  assertEquals(PrivilegeBits.EMPTY,bitsProvider.getBits(""));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAll(){
  PrivilegeBits all=bitsProvider.getBits(JCR_ALL);
  assertFalse(all.isEmpty());
  assertEquals(Collections.singleton(JCR_ALL),bitsProvider.getPrivilegeNames(all));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllAggregation() throws Exception {
  PrivilegeBits all=bitsProvider.getBits(JCR_ALL);
  PrivilegeManager pMgr=getSecurityProvider().getConfiguration(PrivilegeConfiguration.class).getPrivilegeManager(root,NamePathMapper.DEFAULT);
  Iterable<Privilege> declaredAggr=Arrays.asList(pMgr.getPrivilege(JCR_ALL).getDeclaredAggregatePrivileges());
  String[] allAggregates=Iterables.toArray(Iterables.transform(declaredAggr,new Function<Privilege,String>(){
    @Override public String apply(    @Nullable Privilege privilege){
      return checkNotNull(privilege).getName();
    }
  }
),String.class);
  PrivilegeBits all2=bitsProvider.getBits(allAggregates);
  assertEquals(all,all2);
  assertEquals(Collections.singleton(JCR_ALL),bitsProvider.getPrivilegeNames(all2));
  PrivilegeBits bits=PrivilegeBits.getInstance();
  for (  String name : allAggregates) {
    bits.add(bitsProvider.getBits(name));
  }
  assertEquals(all,bits.unmodifiable());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRedundantAggregation() throws RepositoryException {
  PrivilegeBits writeBits=bitsProvider.getBits(REP_WRITE);
  Set<String> names=bitsProvider.getPrivilegeNames(writeBits);
  assertEquals(1,names.size());
  assertEquals(REP_WRITE,names.iterator().next());
  writeBits=bitsProvider.getBits(REP_WRITE,JCR_WRITE);
  names=bitsProvider.getPrivilegeNames(writeBits);
  assertEquals(1,names.size());
  assertEquals(REP_WRITE,names.iterator().next());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAggregatedNames() throws Exception {
  assertFalse(bitsProvider.getAggregatedPrivilegeNames().iterator().hasNext());
  assertFalse(bitsProvider.getAggregatedPrivilegeNames("unknown").iterator().hasNext());
  for (  String nonAggregate : PrivilegeConstants.NON_AGGREGATE_PRIVILEGES) {
    assertEquals(Collections.singleton(nonAggregate),bitsProvider.getAggregatedPrivilegeNames(nonAggregate));
  }
  Map<String[],Set<String>> testMap=Maps.newHashMap();
  testMap.put(new String[]{JCR_READ},ImmutableSet.of(REP_READ_NODES,REP_READ_PROPERTIES));
  testMap.put(new String[]{JCR_MODIFY_PROPERTIES},ImmutableSet.of(REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES));
  testMap.put(new String[]{JCR_WRITE},ImmutableSet.of(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES));
  testMap.put(new String[]{REP_WRITE},ImmutableSet.of(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES,JCR_NODE_TYPE_MANAGEMENT));
  testMap.put(new String[]{JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL},ImmutableSet.of(JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL));
  testMap.put(new String[]{JCR_READ,JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL},ImmutableSet.of(REP_READ_NODES,REP_READ_PROPERTIES,JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL));
  testMap.put(new String[]{JCR_ALL},NON_AGGREGATE_PRIVILEGES);
  testMap.put(new String[]{JCR_READ,JCR_WRITE,JCR_ALL},NON_AGGREGATE_PRIVILEGES);
  for (  String[] prvNames : testMap.keySet()) {
    Set<String> expected=testMap.get(prvNames);
    assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(prvNames)));
    assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(prvNames)));
  }
  PrivilegeManager pMgr=getPrivilegeManager(root);
  pMgr.registerPrivilege("test1",true,null);
  assertEquals(ImmutableSet.of("test1"),ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames("test1")));
  Set<String> expected=Sets.newHashSet(NON_AGGREGATE_PRIVILEGES);
  expected.add("test1");
  assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(JCR_ALL)));
  assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(JCR_ALL)));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnknownAggregation() throws RepositoryException {
  PrivilegeBits bits=bitsProvider.getBits(REP_WRITE,JCR_LIFECYCLE_MANAGEMENT);
  Set<String> names=bitsProvider.getPrivilegeNames(bits);
  assertEquals(2,names.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetBits(){
  PrivilegeBits bits=bitsProvider.getBits(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES);
  assertFalse(bits.isEmpty());
  PrivilegeBits mod=PrivilegeBits.getInstance(bitsProvider.getBits(JCR_ADD_CHILD_NODES)).add(bitsProvider.getBits(JCR_REMOVE_CHILD_NODES));
  assertEquals(bits,mod.unmodifiable());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.privilege.PrivilegeBitsTest </h4><pre class="type-13 type-9 type-5 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNextBits(){
  assertSame(PrivilegeBits.EMPTY,PrivilegeBits.EMPTY.nextBits());
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  long l=getLongValue(pb);
  while (l < Long.MAX_VALUE / 2) {
    l=l << 1;
    pb=pb.nextBits();
    assertEquals(l,getLongValue(pb));
  }
  for (int i=0; i < 10; i++) {
    PrivilegeBits nxt=pb.nextBits();
    assertEquals(nxt,pb.nextBits());
    assertFalse(pb.equals(nxt));
    pb=nxt;
  }
  pb=READ_NODES_PRIVILEGE_BITS;
  for (int i=0; i < 100; i++) {
    PrivilegeBits modifiable=PrivilegeBits.getInstance(pb);
    try {
      modifiable.nextBits();
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    pb=pb.nextBits();
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetInstanceFromTree(){
  Tree privRoot=root.getTree(PRIVILEGES_PATH);
  try {
    Tree tmp=privRoot.addChild("tmpPrivilege");
    PrivilegeBits tmpBits=PrivilegeBits.getInstance(privRoot.getProperty(REP_NEXT));
    tmpBits.writeTo(tmp);
    Map<Tree,PrivilegeBits> treeToBits=new HashMap<Tree,PrivilegeBits>();
    treeToBits.put(privRoot.getChild(JCR_READ),PrivilegeBits.BUILT_IN.get(JCR_READ));
    treeToBits.put(tmp,tmpBits);
    treeToBits.put(privRoot,tmpBits);
    for (    Tree tree : treeToBits.keySet()) {
      assertEquals(treeToBits.get(tree),PrivilegeBits.getInstance(tree));
    }
  }
  finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdd(){
  try {
    PrivilegeBits.EMPTY.add(PrivilegeBits.EMPTY);
    fail("UnsupportedOperation expected");
  }
 catch (  UnsupportedOperationException e) {
  }
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance(pb);
  for (int i=0; i < 100; i++) {
    try {
      pb.add(PrivilegeBits.EMPTY);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    try {
      pb.add(mod);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    PrivilegeBits nxt=pb.nextBits();
    try {
      pb.add(nxt);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    long before=getLongValue(mod);
    long nxtLong=getLongValue(nxt);
    mod.add(nxt);
    if (getLongValue(nxt) != 0) {
      assertEquals(before | nxtLong,getLongValue(mod));
    }
    assertTrue(mod.includes(nxt));
    PrivilegeBits tmp=PrivilegeBits.getInstance(pb);
    assertTrue(tmp.includes(pb));
    assertFalse(tmp.includes(nxt));
    if (READ_NODES_PRIVILEGE_BITS.equals(pb)) {
      assertTrue(tmp.includes(PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_NODES)));
    }
 else {
      assertFalse(tmp.includes(PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_NODES)));
    }
    tmp.add(nxt);
    assertTrue(tmp.includes(pb) && tmp.includes(nxt));
    if (READ_NODES_PRIVILEGE_BITS.equals(pb)) {
      assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    }
 else {
      assertFalse(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    }
    tmp.add(READ_NODES_PRIVILEGE_BITS);
    assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    pb=nxt;
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnmodifiable(){
  assertSame(PrivilegeBits.EMPTY,PrivilegeBits.EMPTY.unmodifiable());
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance(pb);
  for (int i=0; i < 100; i++) {
    PrivilegeBits nxt=pb.nextBits();
    assertSame(nxt,nxt.unmodifiable());
    assertEquals(nxt,nxt.unmodifiable());
    mod.add(nxt);
    assertNotSame(mod,mod.unmodifiable());
    pb=nxt;
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLongValue(){
  assertEquals(NO_PRIVILEGE,getLongValue(PrivilegeBits.EMPTY));
  for (  long l : LONGS) {
    PrivilegeBits bits=PrivilegeBits.getInstance(createPropertyState(l));
    assertEquals(l,getLongValue(bits));
  }
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  long l=getLongValue(pb);
  while (l < Long.MAX_VALUE / 2) {
    l=l << 1;
    pb=pb.nextBits();
    assertEquals(l,getLongValue(pb));
  }
  for (int i=0; i < 10; i++) {
    pb=pb.nextBits();
    assertEquals(0,getLongValue(pb));
  }
  pb=READ_NODES_PRIVILEGE_BITS;
  for (int i=0; i < 100; i++) {
    PrivilegeBits modifiable=PrivilegeBits.getInstance(pb);
    assertEquals(getLongValue(pb),getLongValue(modifiable));
    pb=pb.nextBits();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRetainSimple(){
  PrivilegeBits pb=PrivilegeBits.getInstance(READ_NODES_PRIVILEGE_BITS);
  assertEquals(pb,pb.retain(pb));
  assertEquals(pb,pb.retain(READ_NODES_PRIVILEGE_BITS));
  pb=PrivilegeBits.getInstance(READ_NODES_PRIVILEGE_BITS);
  pb.retain(PrivilegeBits.getInstance());
  assertTrue(pb.isEmpty());
  pb=PrivilegeBits.getInstance(READ_NODES_PRIVILEGE_BITS);
  pb.retain(PrivilegeBits.EMPTY);
  assertTrue(pb.isEmpty());
  PrivilegeBits write=PrivilegeBits.BUILT_IN.get(PrivilegeBits.REP_WRITE);
  pb=PrivilegeBits.getInstance().add(write);
  assertEquals(pb,pb.retain(pb));
  assertEquals(pb,pb.retain(write));
  pb.retain(READ_NODES_PRIVILEGE_BITS);
  assertTrue(pb.isEmpty());
  pb.add(READ_NODES_PRIVILEGE_BITS).add(write);
  pb.retain(write);
  assertEquivalent(write,pb);
  assertFalse(pb.includes(READ_NODES_PRIVILEGE_BITS));
  PrivilegeBits lock=PrivilegeBits.BUILT_IN.get(PrivilegeBits.JCR_LOCK_MANAGEMENT);
  PrivilegeBits lw=PrivilegeBits.getInstance(write,lock);
  pb.add(READ_NODES_PRIVILEGE_BITS).add(write).add(lock);
  pb.retain(lw);
  assertEquivalent(lw,pb);
  assertFalse(pb.includes(READ_NODES_PRIVILEGE_BITS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.user.action.AccessControlActionTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAdministrativePrincipals() throws Exception {
  UserManager userMgr=getUserManager(root);
  Group gr=null;
  try {
    gr=userMgr.createGroup("administrativePrincipalName");
    root.commit();
    AccessControlManager acMgr=getAccessControlManager(root);
    AccessControlPolicy[] policies=acMgr.getPolicies(gr.getPath());
    assertEquals(0,policies.length);
  }
  finally {
    root.refresh();
    if (gr != null) {
      gr.remove();
    }
    root.commit();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.user.action.PasswordValidationActionTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testActionIsCalled() throws Exception {
  testUser=getUserManager(root).createUser("testUser","testUser12345");
  root.commit();
  assertEquals(1,testAction.onCreateCalled);
  testUser.changePassword("pW12345678");
  assertEquals(1,testAction.onPasswordChangeCalled);
  testUser.changePassword("pW1234567890","pW12345678");
  assertEquals(2,testAction.onPasswordChangeCalled);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.user.util.PasswordUtilTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPBKDF2WithHmacSHA1() throws Exception {
  String algo="PBKDF2WithHmacSHA1";
  String pw="pass\0word";
  int iterations=4096;
  String hash=PasswordUtil.buildPasswordHash(pw,algo,5,iterations);
  assertTrue(hash.startsWith("{PBKDF2WithHmacSHA1}"));
  int cntOctets=hash.substring(hash.lastIndexOf('-') + 1).length() / 2;
  assertEquals(16,cntOctets);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.AbstractRebaseDiffTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void addExistingNode(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setChildNode("n");
  headBuilder.setChildNode("m").setChildNode("m1");
  headBuilder.getChildNode("m").setProperty("a",1);
  headBuilder.getChildNode("m").setProperty("p",1);
  headBuilder.getChildNode("m").setChildNode("mm").setChildNode("mm1");
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setChildNode("n");
  branchBuilder.setChildNode("m").setChildNode("m2");
  branchBuilder.getChildNode("m").setProperty("a",1);
  branchBuilder.getChildNode("m").setProperty("q",1);
  branchBuilder.getChildNode("m").setChildNode("mm").setChildNode("mm2");
  NodeState branch=branchBuilder.getNodeState();
  NodeBuilder builder=head.builder();
  RebaseDiff rebaseDiff=new RebaseDiff(builder);
  branch.compareAgainstBaseState(base,rebaseDiff);
  NodeBuilder expectedBuilder=base.builder();
  expectedBuilder.setChildNode("n");
  expectedBuilder.setChildNode("n");
  expectedBuilder.setChildNode("m").setChildNode("m1");
  expectedBuilder.getChildNode("m").setChildNode("m2");
  expectedBuilder.getChildNode("m").setProperty("a",1);
  expectedBuilder.getChildNode("m").setProperty("p",1);
  expectedBuilder.getChildNode("m").setProperty("q",1);
  expectedBuilder.getChildNode("m").setChildNode("mm").setChildNode("mm1");
  expectedBuilder.getChildNode("m").getChildNode("mm").setChildNode("mm2");
  assertEquals(expectedBuilder.getNodeState(),builder.getNodeState());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteDeletedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.removeProperty("x");
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.removeProperty("x");
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteDeletedProperty(    NodeBuilder builder,    PropertyState before){
      assertEquals(createProperty("x",1),before);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeDeletedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.removeProperty("x");
  headBuilder.removeProperty("y");
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setProperty("x",1);
  branchBuilder.setProperty("y",0);
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void changeDeletedProperty(    NodeBuilder builder,    PropertyState after){
      assertEquals(createProperty("y",0),after);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addExistingProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setProperty("p",1);
  headBuilder.setProperty("p",1);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setProperty("p",1);
  branchBuilder.setProperty("p",0);
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void addExistingProperty(    NodeBuilder builder,    PropertyState before,    PropertyState after){
      assertEquals(createProperty("p",0),after);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addExistingNodeWithConflict(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setChildNode("n");
  headBuilder.setChildNode("m").setChildNode("m1");
  headBuilder.getChildNode("m").setProperty("p",1);
  headBuilder.getChildNode("m").setChildNode("mm").setChildNode("mmm").setProperty("pp",1);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setChildNode("n");
  branchBuilder.setChildNode("m").setChildNode("m2");
  branchBuilder.getChildNode("m").setProperty("q",1);
  branchBuilder.getChildNode("m").setChildNode("mm").setChildNode("mmm").setProperty("pp",2);
  NodeState branch=branchBuilder.getNodeState();
  NodeBuilder builder=head.builder();
class ConflictResolver extends RebaseDiff {
    private final ConflictResolver parent;
    private ConflictResolver(    NodeBuilder builder){
      this(null,builder);
    }
    public ConflictResolver(    ConflictResolver parent,    NodeBuilder builder){
      super(builder);
      this.parent=parent;
    }
    @Override protected void resolve(){
      if (parent == null) {
        super.resolve();
      }
 else {
        parent.resolve();
      }
    }
    @Override protected AbstractRebaseDiff createDiff(    NodeBuilder builder,    String name){
      return new ConflictResolver(this,builder.getChildNode(name));
    }
    @Override protected void addExistingProperty(    NodeBuilder builder,    PropertyState before,    PropertyState after){
      assertEquals(createProperty("pp",1),before);
      assertEquals(createProperty("pp",2),after);
      resolve();
    }
  }
  RebaseDiff rebaseDiff=new ConflictResolver(builder);
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeChangedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setProperty("x",11);
  headBuilder.setProperty("y",22);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setProperty("x",11);
  branchBuilder.setProperty("y",0);
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void changeChangedProperty(    NodeBuilder builder,    PropertyState before,    PropertyState after){
      assertEquals(createProperty("y",0),after);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteDeletedNode(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.getChildNode("a").remove();
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.getChildNode("a").remove();
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteDeletedNode(    NodeBuilder builder,    String name,    NodeState before){
      assertEquals("a",name);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeDeletedNode(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.getChildNode("a").remove();
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.getChildNode("a").setChildNode("aa");
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void changeDeletedNode(    NodeBuilder builder,    String name,    NodeState after){
      assertEquals("a",name);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteChangedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setProperty("x",11);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.removeProperty("x");
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteChangedProperty(    NodeBuilder builder,    PropertyState before){
      assertEquals(createProperty("x",1),before);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteChangedNode(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.getChildNode("a").setChildNode("aa");
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.getChildNode("a").remove();
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteChangedNode(    NodeBuilder builder,    String name,    NodeState before){
      assertEquals("a",name);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.CheckpointTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkpoint() throws CommitFailedException {
  String cp=store.checkpoint(Long.MAX_VALUE);
  NodeBuilder builder=store.getRoot().builder();
  builder.setChildNode("new");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertFalse(root.equals(store.getRoot()));
  assertEquals(root,store.retrieve(cp));
  assertTrue(store.release(cp));
  assertNull(store.retrieve(cp));
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkpointInfo() throws CommitFailedException {
  ImmutableMap<String,String> props=ImmutableMap.of("one","1","two","2","three","2");
  String cp=store.checkpoint(Long.MAX_VALUE,props);
  assertEquals(props,store.checkpointInfo(cp));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.LargeNodeStateTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetChildNodeCount(){
  assertEquals(N + 1,state.getChildNodeCount(N + 2));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetChildNodeEntries(){
  long count=0;
  for (  ChildNodeEntry entry : state.getChildNodeEntries()) {
    count++;
  }
  assertEquals(N + 1,count);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.NodeBuilderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void rebaseInvariant(){
  NodeBuilder root=store.getRoot().builder();
  NodeBuilder added=root.setChildNode("added");
  NodeState base=root.getBaseState();
  store.rebase(root);
  assertEquals(base,root.getBaseState());
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void rebase() throws CommitFailedException {
  NodeBuilder root=store.getRoot().builder();
  modify(store);
  store.rebase(root);
  assertEquals(store.getRoot(),root.getBaseState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.NodeStateTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetChildNodeEntries(){
  List<String> names=new ArrayList<String>();
  for (  ChildNodeEntry entry : state.getChildNodeEntries()) {
    names.add(entry.getName());
  }
  Collections.sort(names);
  assertEquals(Arrays.asList("x","y","z"),names);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetChildNodeCount(){
  assertEquals(3,state.getChildNodeCount(4));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProperty(){
  assertEquals("a",state.getProperty("a").getName());
  assertEquals(1,(long)state.getProperty("a").getValue(LONG));
  assertEquals("b",state.getProperty("b").getName());
  assertEquals(2,(long)state.getProperty("b").getValue(LONG));
  assertEquals("c",state.getProperty("c").getName());
  assertEquals(3,(long)state.getProperty("c").getValue(LONG));
  assertNull(state.getProperty("x"));
  assertFalse(state.hasProperty("x"));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetProperties(){
  List<String> names=new ArrayList<String>();
  List<Long> values=new ArrayList<Long>();
  for (  PropertyState property : state.getProperties()) {
    names.add(property.getName());
    values.add(property.getValue(LONG));
  }
  Collections.sort(names);
  Collections.sort(values);
  assertEquals(Arrays.asList("a","b","c"),names);
  assertEquals(Arrays.asList(1L,2L,3L),values);
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPropertyCount(){
  assertEquals(3,state.getPropertyCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.NodeStoreTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void beforeCommitHook() throws CommitFailedException {
  NodeState root=store.getRoot();
  NodeBuilder rootBuilder=root.builder();
  NodeBuilder testBuilder=rootBuilder.child("test");
  NodeBuilder newNodeBuilder=testBuilder.child("newNode");
  newNodeBuilder.setProperty("n",42);
  testBuilder.getChildNode("a").remove();
  store.merge(rootBuilder,new CommitHook(){
    @Nonnull @Override public NodeState processCommit(    NodeState before,    NodeState after,    CommitInfo info){
      NodeBuilder rootBuilder=after.builder();
      NodeBuilder testBuilder=rootBuilder.child("test");
      testBuilder.child("fromHook");
      return rootBuilder.getNodeState();
    }
  }
,CommitInfo.EMPTY);
  NodeState test=store.getRoot().getChildNode("test");
  assertTrue(test.getChildNode("newNode").exists());
  assertTrue(test.getChildNode("fromHook").exists());
  assertFalse(test.getChildNode("a").exists());
  assertEquals(42,(long)test.getChildNode("newNode").getProperty("n").getValue(LONG));
  assertEquals(test,store.getRoot().getChildNode("test"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-16 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void afterCommitHook() throws CommitFailedException, InterruptedException {
  assumeTrue(store instanceof Observable);
  final AtomicReference<NodeState> observedRoot=new AtomicReference<NodeState>(null);
  final CountDownLatch latch=new CountDownLatch(2);
  ((Observable)store).addObserver(new Observer(){
    @Override public void contentChanged(    @Nonnull NodeState root,    @Nullable CommitInfo info){
      if (root.getChildNode("test").hasChildNode("newNode")) {
        observedRoot.set(checkNotNull(root));
        latch.countDown();
      }
    }
  }
);
  NodeState root=store.getRoot();
  NodeBuilder rootBuilder=root.builder();
  NodeBuilder testBuilder=rootBuilder.child("test");
  NodeBuilder newNodeBuilder=testBuilder.child("newNode");
  newNodeBuilder.setProperty("n",42);
  testBuilder.getChildNode("a").remove();
  store.merge(rootBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeState newRoot=store.getRoot();
  latch.await(2,TimeUnit.SECONDS);
  NodeState after=observedRoot.get();
  assertNotNull(after);
  assertTrue(after.getChildNode("test").getChildNode("newNode").exists());
  assertFalse(after.getChildNode("test").getChildNode("a").exists());
  assertEquals(42,(long)after.getChildNode("test").getChildNode("newNode").getProperty("n").getValue(LONG));
  assertEquals(newRoot,after);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void manyChildNodes() throws CommitFailedException {
  NodeBuilder root=store.getRoot().builder();
  NodeBuilder parent=root.child("parent");
  for (int i=0; i <= 100; i++) {
    parent.child("child-" + i);
  }
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeState base=store.getRoot();
  root=base.builder();
  parent=root.child("parent");
  parent.child("child-new");
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Diff diff=new Diff();
  store.getRoot().compareAgainstBaseState(base,diff);
  assertEquals(0,diff.removed.size());
  assertEquals(1,diff.added.size());
  assertEquals("child-new",diff.added.get(0));
  base=store.getRoot();
  root=base.builder();
  parent=root.getChildNode("parent");
  parent.getChildNode("child-new").moveTo(parent,"child-moved");
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  diff=new Diff();
  store.getRoot().compareAgainstBaseState(base,diff);
  assertEquals(1,diff.removed.size());
  assertEquals("child-new",diff.removed.get(0));
  assertEquals(1,diff.added.size());
  assertEquals("child-moved",diff.added.get(0));
  base=store.getRoot();
  root=base.builder();
  parent=root.child("parent");
  parent.child("child-moved").setProperty("foo","value");
  parent.child("child-moved").setProperty(new MultiStringPropertyState("bar",Arrays.asList("value")));
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  diff=new Diff();
  store.getRoot().compareAgainstBaseState(base,diff);
  assertEquals(0,diff.removed.size());
  assertEquals(0,diff.added.size());
  assertEquals(2,diff.addedProperties.size());
  assertTrue(diff.addedProperties.contains("foo"));
  assertTrue(diff.addedProperties.contains("bar"));
  base=store.getRoot();
  root=base.builder();
  parent=root.child("parent");
  parent.setProperty("foo","value");
  parent.setProperty(new MultiStringPropertyState("bar",Arrays.asList("value")));
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  diff=new Diff();
  store.getRoot().compareAgainstBaseState(base,diff);
  assertEquals(0,diff.removed.size());
  assertEquals(0,diff.added.size());
  assertEquals(2,diff.addedProperties.size());
  assertTrue(diff.addedProperties.contains("foo"));
  assertTrue(diff.addedProperties.contains("bar"));
  base=store.getRoot();
  root=base.builder();
  parent=root.child("parent");
  parent.getChildNode("child-moved").remove();
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  diff=new Diff();
  store.getRoot().compareAgainstBaseState(base,diff);
  assertEquals(1,diff.removed.size());
  assertEquals(0,diff.added.size());
  assertEquals("child-moved",diff.removed.get(0));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getRoot(){
  assertEquals(root,store.getRoot());
  assertEquals(root.getChildNode("test"),store.getRoot().getChildNode("test"));
  assertEquals(root.getChildNode("test").getChildNode("x"),store.getRoot().getChildNode("test").getChildNode("x"));
  assertEquals(root.getChildNode("test").getChildNode("any"),store.getRoot().getChildNode("test").getChildNode("any"));
  assertEquals(root.getChildNode("test").getProperty("a"),store.getRoot().getChildNode("test").getProperty("a"));
  assertEquals(root.getChildNode("test").getProperty("any"),store.getRoot().getChildNode("test").getProperty("any"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpleMerge() throws CommitFailedException {
  NodeBuilder rootBuilder=store.getRoot().builder();
  NodeBuilder testBuilder=rootBuilder.child("test");
  NodeBuilder newNodeBuilder=testBuilder.child("newNode");
  testBuilder.getChildNode("x").remove();
  newNodeBuilder.setProperty("n",42);
  NodeState testState=rootBuilder.getNodeState().getChildNode("test");
  assertTrue(testState.getChildNode("newNode").exists());
  assertFalse(testState.getChildNode("x").exists());
  assertEquals(42,(long)testState.getChildNode("newNode").getProperty("n").getValue(LONG));
  testState=store.getRoot().getChildNode("test");
  assertFalse(testState.getChildNode("newNode").exists());
  assertTrue(testState.getChildNode("x").exists());
  store.merge(rootBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  testState=store.getRoot().getChildNode("test");
  assertTrue(testState.getChildNode("newNode").exists());
  assertFalse(testState.getChildNode("x").exists());
  assertEquals(42,(long)testState.getChildNode("newNode").getProperty("n").getValue(LONG));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.stats.DefaultStatisticsProviderTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timer() throws Exception {
  TimerStats timerStats=statsProvider.getTimer("test",StatsOptions.DEFAULT);
  assertNotNull(timerStats);
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(TimeUnit.SECONDS.toMillis(100),statsImpl(statsProvider).getCounter("test",false).get());
  assertTrue(getRegisteredTimeSeries(statsProvider).contains("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void meter() throws Exception {
  MeterStats meterStats=statsProvider.getMeter("test",StatsOptions.DEFAULT);
  assertNotNull(meterStats);
  meterStats.mark();
  assertEquals(1,statsImpl(statsProvider).getCounter("test",true).get());
  assertTrue(getRegisteredTimeSeries(statsProvider).contains("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void counter() throws Exception {
  CounterStats counterStats=statsProvider.getCounterStats("test",StatsOptions.DEFAULT);
  assertNotNull(counterStats);
  counterStats.inc();
  assertEquals(1,statsImpl(statsProvider).getCounter("test",false).get());
  assertTrue(getRegisteredTimeSeries(statsProvider).contains("test"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicSetup() throws Exception {
  assertNotNull(statsProvider.getStats());
  CounterStats stats=statsProvider.getCounterStats(RepositoryStatistics.Type.SESSION_COUNT.name(),StatsOptions.DEFAULT);
  stats.inc();
  assertEquals(1,statsImpl(statsProvider).getCounter(RepositoryStatistics.Type.SESSION_COUNT).get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.stats.SimpleStatsTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void usageTest() throws Exception {
  AtomicLong counter=new AtomicLong();
  SimpleStats stats=new SimpleStats(counter,SimpleStats.Type.COUNTER);
  stats.mark();
  assertEquals(1,counter.get());
  assertEquals(1,stats.getCount());
  stats.inc();
  assertEquals(2,counter.get());
  stats.dec();
  assertEquals(1,counter.get());
  stats.inc(7);
  assertEquals(8,counter.get());
  stats.dec(7);
  assertEquals(1,counter.get());
  stats.mark(2);
  assertEquals(3,counter.get());
  counter.set(0);
  stats.update(100,TimeUnit.SECONDS);
  assertEquals(TimeUnit.MILLISECONDS.convert(100,TimeUnit.SECONDS),counter.get());
  counter.set(0);
  TimerStats.Context context=stats.time();
  long delta=context.stop();
  TimeUnit.MILLISECONDS.sleep(42);
  assertEquals(TimeUnit.NANOSECONDS.toMillis(delta),counter.get());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noopTest() throws Exception {
  NoopStats noop=NoopStats.INSTANCE;
  assertEquals(0,noop.getCount());
  noop.mark();
  assertEquals(0,noop.getCount());
  noop.mark(10);
  assertEquals(0,noop.getCount());
  noop.dec();
  assertEquals(0,noop.getCount());
  noop.inc();
  assertEquals(0,noop.getCount());
  noop.inc(5);
  assertEquals(0,noop.getCount());
  noop.dec(7);
  assertEquals(0,noop.getCount());
  noop.update(100,TimeUnit.SECONDS);
  assertEquals(0,noop.getCount());
  TimerStats.Context context=noop.time();
  assertEquals(0,context.stop());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void meterResetAndCount() throws Exception {
  AtomicLong counter=new AtomicLong();
  MeterStats stats=new SimpleStats(counter,SimpleStats.Type.METER);
  stats.mark();
  assertEquals(1,stats.getCount());
  stats.mark();
  assertEquals(2,stats.getCount());
  stats.mark(5);
  assertEquals(7,stats.getCount());
  counter.set(0);
  assertEquals(7,stats.getCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noopRepoStatsTest() throws Exception {
  RepositoryStatistics stats=StatisticsProvider.NOOP.getStats();
  assertNotNull(stats);
  assertNotNull(stats.getTimeSeries("foo",false));
  assertNotNull(stats.getTimeSeries(RepositoryStatistics.Type.QUERY_COUNT));
  TimeSeries ts=stats.getTimeSeries("foo",false);
  assertNotNull(ts.getValuePerHour());
  assertNotNull(ts.getValuePerMinute());
  assertNotNull(ts.getValuePerSecond());
  assertNotNull(ts.getValuePerWeek());
  assertEquals(0,ts.getMissingValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.stats.StatisticManagerTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timeSeriesOnly() throws Exception {
  Whiteboard wb=new DefaultWhiteboard();
  final Map<String,StatsOptions> optionsPassed=Maps.newHashMap();
  wb.register(StatisticsProvider.class,new DummyStatsProvider(){
    @Override public MeterStats getMeter(    String name,    StatsOptions options){
      optionsPassed.put(name,options);
      return super.getMeter(name,options);
    }
  }
,null);
  StatisticManager mgr=new StatisticManager(wb,executorService);
  mgr.getMeter(Type.SESSION_READ_COUNTER);
  assertEquals(StatsOptions.TIME_SERIES_ONLY,optionsPassed.get(Type.SESSION_READ_COUNTER.name()));
  mgr.getMeter(Type.SESSION_WRITE_COUNTER);
  assertEquals(StatsOptions.DEFAULT,optionsPassed.get(Type.SESSION_WRITE_COUNTER.name()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.CopyNodeTypesUpgradeTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void customNodeTypesAreRegistered() throws RepositoryException {
  final JackrabbitSession adminSession=createAdminSession();
  final NodeTypeManager nodeTypeManager=adminSession.getWorkspace().getNodeTypeManager();
  final NodeType testFolderNodeType=nodeTypeManager.getNodeType("test:Folder");
  final NodeDefinition[] cnd=testFolderNodeType.getChildNodeDefinitions();
  final PropertyDefinition[] pd=testFolderNodeType.getPropertyDefinitions();
  assertEquals("More than one child node definition",1,cnd.length);
  assertEquals("Incorrect default primary type","test:Folder",cnd[0].getDefaultPrimaryTypeName());
  assertEquals("More than two property definitions",4,pd.length);
  adminSession.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.LongNameTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void longNameShouldBeSkipped() throws RepositoryException, IOException {
  DocumentNodeStore nodeStore=new DocumentMK.Builder().getNodeStore();
  try {
    upgrade(nodeStore,true);
    NodeState parent=getParent(nodeStore.getRoot());
    Assert.assertTrue(parent.hasChildNode(NOT_TOO_LONG_NAME));
    Assert.assertEquals(1,parent.getChildNodeCount(10));
  }
  finally {
    nodeStore.dispose();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.PrivilegeUpgradeTest </h4><pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void verifyCustomPrivilegeBits() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    Node privilegeRoot=session.getNode(PrivilegeConstants.PRIVILEGES_PATH);
    Node testPrivilegeNode=privilegeRoot.getNode("test:privilege");
    long l=getLong(testPrivilegeNode);
    PrivilegeBits pb=readBits(testPrivilegeNode,PrivilegeConstants.REP_BITS);
    Node testPrivilege2Node=privilegeRoot.getNode("test:privilege2");
    long l2=getLong(testPrivilege2Node);
    PrivilegeBits pb2=readBits(testPrivilege2Node,PrivilegeConstants.REP_BITS);
    PrivilegeBits nextExpected;
    if (l < l2) {
      assertEquals(PrivilegeBits.NEXT_AFTER_BUILT_INS,pb);
      assertEquals(pb.nextBits(),pb2);
      nextExpected=pb2.nextBits();
    }
 else {
      assertEquals(PrivilegeBits.NEXT_AFTER_BUILT_INS,pb2);
      assertEquals(pb2.nextBits(),pb);
      nextExpected=pb.nextBits();
    }
    PrivilegeBits nextBits=readBits(privilegeRoot,PrivilegeConstants.REP_NEXT);
    assertEquals(nextExpected,nextBits);
    Node testAggregateNode=privilegeRoot.getNode("test:aggregate");
    PrivilegeBits aggrPb=readBits(testAggregateNode,PrivilegeConstants.REP_BITS);
    PrivilegeBits expected=PrivilegeBits.getInstance(PrivilegeBits.BUILT_IN.get(PrivilegeConstants.JCR_READ),pb).unmodifiable();
    assertEquals(expected,aggrPb);
    Node testAggregate2Node=privilegeRoot.getNode("test:aggregate2");
    PrivilegeBits aggr2Pb=readBits(testAggregate2Node,PrivilegeConstants.REP_BITS);
    PrivilegeBits expected2=PrivilegeBits.getInstance(aggrPb,pb2).unmodifiable();
    assertEquals(expected2,aggr2Pb);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyCustomPrivileges() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    JackrabbitWorkspace workspace=(JackrabbitWorkspace)session.getWorkspace();
    PrivilegeManager manager=workspace.getPrivilegeManager();
    Privilege privilege=manager.getPrivilege("test:privilege");
    assertNotNull(privilege);
    assertFalse(privilege.isAbstract());
    assertFalse(privilege.isAggregate());
    assertEquals(0,privilege.getDeclaredAggregatePrivileges().length);
    Privilege privilege2=manager.getPrivilege("test:privilege2");
    assertNotNull(privilege2);
    assertTrue(privilege2.isAbstract());
    assertFalse(privilege2.isAggregate());
    assertEquals(0,privilege.getDeclaredAggregatePrivileges().length);
    Privilege aggregate=manager.getPrivilege("test:aggregate");
    assertNotNull(aggregate);
    assertFalse(aggregate.isAbstract());
    assertTrue(aggregate.isAggregate());
    List<Privilege> agg=ImmutableList.copyOf(aggregate.getDeclaredAggregatePrivileges());
    assertEquals(2,agg.size());
    assertTrue(agg.contains(privilege));
    assertTrue(agg.contains(manager.getPrivilege(JCR_READ)));
    Privilege aggregate2=manager.getPrivilege("test:aggregate2");
    assertNotNull(aggregate2);
    assertTrue(aggregate2.isAbstract());
    assertTrue(aggregate2.isAggregate());
    List<Privilege> agg2=ImmutableList.copyOf(aggregate2.getDeclaredAggregatePrivileges());
    assertEquals(2,agg2.size());
    assertTrue(agg2.contains(aggregate));
    assertTrue(agg2.contains(privilege2));
    Privilege jcrAll=manager.getPrivilege("jcr:all");
    List<Privilege> privileges=asList(jcrAll.getAggregatePrivileges());
    assertTrue(privileges.contains(privilege));
    assertTrue(privileges.contains(privilege2));
    assertTrue(privileges.contains(aggregate));
    assertTrue(privileges.contains(aggregate2));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.RepositoryGroupMemberUpgradeTest </h4><pre class="type-13 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyGroupNodeTypes() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    UserManager userMgr=session.getUserManager();
    for (int i=0; i < getNumGroups(); i++) {
      Group grp=(Group)userMgr.getAuthorizable(TEST_GROUP_PREFIX + i);
      assertNotNull(grp);
      Node grpNode=session.getNode(grp.getPath());
      NodeType nt=grpNode.getPrimaryNodeType();
      assertEquals("Migrated group needs to be rep:Group",UserConstants.NT_REP_GROUP,nt.getName());
      assertTrue("Migrated group needs to be new node type",nt.isNodeType(UserConstants.NT_REP_MEMBER_REFERENCES));
    }
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyMemberOf() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    UserManager userMgr=session.getUserManager();
    for (int i=0; i < getNumUsers(); i++) {
      User user=(User)userMgr.getAuthorizable(TEST_USER_PREFIX + i);
      assertNotNull(user);
      Set<String> groups=new HashSet<String>();
      for (int j=0; j < getNumGroups(); j++) {
        groups.add(TEST_GROUP_PREFIX + j);
      }
      Iterator<Group> groupIterator=user.declaredMemberOf();
      while (groupIterator.hasNext()) {
        Group grp=groupIterator.next();
        assertTrue("user must be member of group " + grp.getID(),groups.remove(grp.getID()));
      }
      assertEquals("user " + user.getID() + " must be member of all groups",0,groups.size());
    }
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyMembers() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    UserManager userMgr=session.getUserManager();
    for (int i=0; i < getNumGroups(); i++) {
      Group grp=(Group)userMgr.getAuthorizable(TEST_GROUP_PREFIX + i);
      assertNotNull(grp);
      Set<String> testUsers=new HashSet<String>();
      for (int j=0; j < getNumUsers(); j++) {
        testUsers.add(TEST_USER_PREFIX + j);
      }
      Iterator<Authorizable> declaredMembers=grp.getDeclaredMembers();
      while (declaredMembers.hasNext()) {
        Authorizable auth=declaredMembers.next();
        assertTrue("group must have member " + auth.getID(),testUsers.remove(auth.getID()));
      }
      assertEquals("group must have all members",0,testUsers.size());
    }
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.RepositorySidegradeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyVersionHistory() throws RepositoryException {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/versionable"));
    Node versionable=session.getNode("/versionable");
    assertTrue(versionable.hasNode("child"));
    Node child=versionable.getNode("child");
    assertTrue(child.hasNode("child2"));
    Node child2=child.getNode("child2");
    assertFalse(versionable.isCheckedOut());
    assertTrue(versionable.hasProperty(JCR_UUID));
    assertFalse(child.isCheckedOut());
    assertTrue(child.hasProperty(JCR_UUID));
    assertFalse(child2.isCheckedOut());
    assertFalse(child2.hasProperty(JCR_UUID));
    VersionManager manager=session.getWorkspace().getVersionManager();
    Version version=manager.getBaseVersion("/versionable");
    Node frozen=version.getFrozenNode();
    assertEquals(versionable.getPrimaryNodeType().getName(),frozen.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertEquals(versionable.getMixinNodeTypes()[0].getName(),frozen.getProperty(JCR_FROZENMIXINTYPES).getValues()[0].getString());
    assertEquals(versionable.getIdentifier(),frozen.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild=frozen.getNode("child");
    assertEquals(child.getPrimaryNodeType().getName(),frozenChild.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child.getIdentifier(),frozenChild.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild2=frozenChild.getNode("child2");
    assertEquals(child2.getPrimaryNodeType().getName(),frozenChild2.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild2.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child2.getIdentifier(),frozenChild2.getProperty(JCR_FROZENUUID).getString());
    VersionHistory history=manager.getVersionHistory("/versionable");
    assertTrue(history.isNodeType("rep:VersionablePaths"));
    Property versionablePath=history.getProperty("default");
    assertEquals("/versionable",versionablePath.getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyGenericProperties() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.BOOLEAN,properties.getProperty("boolean").getType());
    assertEquals(true,properties.getProperty("boolean").getBoolean());
    assertEquals(PropertyType.BINARY,properties.getProperty("binary").getType());
    Binary binary=properties.getProperty("binary").getBinary();
    try {
      InputStream stream=binary.getStream();
      try {
        for (        byte aBINARY : BINARY) {
          assertEquals(aBINARY,(byte)stream.read());
        }
        assertEquals(-1,stream.read());
      }
  finally {
        stream.close();
      }
    }
  finally {
      binary.dispose();
    }
    assertEquals(PropertyType.DATE,properties.getProperty("date").getType());
    assertEquals(DATE.getTimeInMillis(),properties.getProperty("date").getDate().getTimeInMillis());
    assertEquals(PropertyType.DECIMAL,properties.getProperty("decimal").getType());
    assertEquals(new BigDecimal(123),properties.getProperty("decimal").getDecimal());
    assertEquals(PropertyType.DOUBLE,properties.getProperty("double").getType());
    assertEquals(Math.PI,properties.getProperty("double").getDouble());
    assertEquals(PropertyType.LONG,properties.getProperty("long").getType());
    assertEquals(9876543210L,properties.getProperty("long").getLong());
    assertEquals(PropertyType.STRING,properties.getProperty("string").getType());
    assertEquals("test",properties.getProperty("string").getString());
    assertEquals(PropertyType.STRING,properties.getProperty("multiple").getType());
    Value[] values=properties.getProperty("multiple").getValues();
    assertEquals(3,values.length);
    assertEquals("a",values[0].getString());
    assertEquals("b",values[1].getString());
    assertEquals("c",values[2].getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyReferencePropertiesContent() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/referenceable"));
    String testNodeIdentifier=session.getNode("/referenceable").getIdentifier();
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.REFERENCE,properties.getProperty("reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("reference").getString());
    assertEquals("/referenceable",properties.getProperty("reference").getNode().getPath());
    PropertyIterator refs=session.getNode("/referenceable").getReferences();
    assertTrue(refs.hasNext());
    assertEquals(properties.getPath() + "/reference",refs.nextProperty().getPath());
    assertFalse(refs.hasNext());
    PropertyIterator refs2=session.getNode("/versionable").getReferences();
    assertTrue(refs2.hasNext());
    assertEquals(properties.getPath() + "/mv_reference",refs2.nextProperty().getPath());
    assertFalse(refs2.hasNext());
    assertEquals(PropertyType.WEAKREFERENCE,properties.getProperty("weak_reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("weak_reference").getString());
    assertEquals("/referenceable",properties.getProperty("weak_reference").getNode().getPath());
    PropertyIterator weakRefs=session.getNode("/referenceable").getWeakReferences();
    assertTrue(weakRefs.hasNext());
    assertEquals(properties.getPath() + "/weak_reference",weakRefs.nextProperty().getPath());
    assertFalse(weakRefs.hasNext());
    PropertyIterator weakRefs2=session.getNode("/versionable").getWeakReferences();
    assertTrue(weakRefs2.hasNext());
    assertEquals(properties.getPath() + "/mv_weak_reference",weakRefs2.nextProperty().getPath());
    assertFalse(weakRefs2.hasNext());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyCustomNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    assertTrue(manager.hasNodeType("test:unstructured"));
    NodeType type=manager.getNodeType("test:unstructured");
    assertFalse(type.isMixin());
    assertTrue(type.isNodeType("nt:unstructured"));
    boolean foundDefaultString=false;
    boolean foundDefaultPath=false;
    for (    PropertyDefinition pDef : type.getPropertyDefinitions()) {
      if ("defaultString".equals(pDef.getName())) {
        assertEquals(PropertyType.STRING,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("stringValue",pDef.getDefaultValues()[0].getString());
        foundDefaultString=true;
      }
 else       if ("defaultPath".equals(pDef.getName())) {
        assertEquals(PropertyType.PATH,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("/jcr:path/nt:value",pDef.getDefaultValues()[0].getString());
        foundDefaultPath=true;
      }
    }
    assertTrue("Expected property definition with name \"defaultString\"",foundDefaultString);
    assertTrue("Expected property definition with name \"defaultPath\"",foundDefaultPath);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void verifyNameSpaces() throws Exception {
  Session session=createAdminSession();
  try {
    assertEquals("http://www.example.org/",session.getNamespaceURI("test"));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.RepositoryUpgradeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyVersionHistory() throws RepositoryException {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/versionable"));
    Node versionable=session.getNode("/versionable");
    assertTrue(versionable.hasNode("child"));
    Node child=versionable.getNode("child");
    assertTrue(child.hasNode("child2"));
    Node child2=child.getNode("child2");
    assertFalse(versionable.isCheckedOut());
    assertTrue(versionable.hasProperty(JCR_UUID));
    assertFalse(child.isCheckedOut());
    assertTrue(child.hasProperty(JCR_UUID));
    assertFalse(child2.isCheckedOut());
    assertFalse(child2.hasProperty(JCR_UUID));
    VersionManager manager=session.getWorkspace().getVersionManager();
    Version version=manager.getBaseVersion("/versionable");
    Node frozen=version.getFrozenNode();
    assertEquals(versionable.getPrimaryNodeType().getName(),frozen.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertEquals(versionable.getMixinNodeTypes()[0].getName(),frozen.getProperty(JCR_FROZENMIXINTYPES).getValues()[0].getString());
    assertEquals(versionable.getIdentifier(),frozen.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild=frozen.getNode("child");
    assertEquals(child.getPrimaryNodeType().getName(),frozenChild.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child.getIdentifier(),frozenChild.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild2=frozenChild.getNode("child2");
    assertEquals(child2.getPrimaryNodeType().getName(),frozenChild2.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild2.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child2.getIdentifier(),frozenChild2.getProperty(JCR_FROZENUUID).getString());
    VersionHistory history=manager.getVersionHistory("/versionable");
    assertTrue(history.isNodeType("rep:VersionablePaths"));
    Property versionablePath=history.getProperty("default");
    assertEquals("/versionable",versionablePath.getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyCustomNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    assertTrue(manager.hasNodeType("test:unstructured"));
    NodeType type=manager.getNodeType("test:unstructured");
    assertFalse(type.isMixin());
    assertTrue(type.isNodeType("nt:unstructured"));
    boolean foundDefaultString=false;
    boolean foundDefaultPath=false;
    for (    PropertyDefinition pDef : type.getPropertyDefinitions()) {
      if ("defaultString".equals(pDef.getName())) {
        assertEquals(PropertyType.STRING,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("stringValue",pDef.getDefaultValues()[0].getString());
        foundDefaultString=true;
      }
 else       if ("defaultPath".equals(pDef.getName())) {
        assertEquals(PropertyType.PATH,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("/jcr:path/nt:value",pDef.getDefaultValues()[0].getString());
        foundDefaultPath=true;
      }
    }
    assertTrue("Expected property definition with name \"defaultString\"",foundDefaultString);
    assertTrue("Expected property definition with name \"defaultPath\"",foundDefaultPath);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void verifyNameSpaces() throws Exception {
  Session session=createAdminSession();
  try {
    assertEquals("http://www.example.org/",session.getNamespaceURI("test"));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyGenericProperties() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.BOOLEAN,properties.getProperty("boolean").getType());
    assertEquals(true,properties.getProperty("boolean").getBoolean());
    assertEquals(PropertyType.BINARY,properties.getProperty("binary").getType());
    Binary binary=properties.getProperty("binary").getBinary();
    try {
      InputStream stream=binary.getStream();
      try {
        for (        byte aBINARY : BINARY) {
          assertEquals(aBINARY,(byte)stream.read());
        }
        assertEquals(-1,stream.read());
      }
  finally {
        stream.close();
      }
    }
  finally {
      binary.dispose();
    }
    assertEquals(PropertyType.DATE,properties.getProperty("date").getType());
    assertEquals(DATE.getTimeInMillis(),properties.getProperty("date").getDate().getTimeInMillis());
    assertEquals(PropertyType.DECIMAL,properties.getProperty("decimal").getType());
    assertEquals(new BigDecimal(123),properties.getProperty("decimal").getDecimal());
    assertEquals(PropertyType.DOUBLE,properties.getProperty("double").getType());
    assertEquals(Math.PI,properties.getProperty("double").getDouble());
    assertEquals(PropertyType.LONG,properties.getProperty("long").getType());
    assertEquals(9876543210L,properties.getProperty("long").getLong());
    assertEquals(PropertyType.STRING,properties.getProperty("string").getType());
    assertEquals("test",properties.getProperty("string").getString());
    assertEquals(PropertyType.STRING,properties.getProperty("multiple").getType());
    Value[] values=properties.getProperty("multiple").getValues();
    assertEquals(3,values.length);
    assertEquals("a",values[0].getString());
    assertEquals("b",values[1].getString());
    assertEquals("c",values[2].getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyReferencePropertiesContent() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/referenceable"));
    String testNodeIdentifier=session.getNode("/referenceable").getIdentifier();
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.REFERENCE,properties.getProperty("reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("reference").getString());
    assertEquals("/referenceable",properties.getProperty("reference").getNode().getPath());
    PropertyIterator refs=session.getNode("/referenceable").getReferences();
    assertTrue(refs.hasNext());
    assertEquals(properties.getPath() + "/reference",refs.nextProperty().getPath());
    assertFalse(refs.hasNext());
    PropertyIterator refs2=session.getNode("/versionable").getReferences();
    assertTrue(refs2.hasNext());
    assertEquals(properties.getPath() + "/mv_reference",refs2.nextProperty().getPath());
    assertFalse(refs2.hasNext());
    assertEquals(PropertyType.WEAKREFERENCE,properties.getProperty("weak_reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("weak_reference").getString());
    assertEquals("/referenceable",properties.getProperty("weak_reference").getNode().getPath());
    PropertyIterator weakRefs=session.getNode("/referenceable").getWeakReferences();
    assertTrue(weakRefs.hasNext());
    assertEquals(properties.getPath() + "/weak_reference",weakRefs.nextProperty().getPath());
    assertFalse(weakRefs.hasNext());
    PropertyIterator weakRefs2=session.getNode("/versionable").getWeakReferences();
    assertTrue(weakRefs2.hasNext());
    assertEquals(properties.getPath() + "/mv_weak_reference",weakRefs2.nextProperty().getPath());
    assertFalse(weakRefs2.hasNext());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.blob.LengthCachingDataStoreTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void delegateRecordTest() throws Exception {
  FileDataStore ds=new FileDataStore();
  byte[] data=bytes(ds.getMinRecordLength() + 10);
  ds.init(tempFolder.getRoot().getAbsolutePath());
  DataRecord dr=ds.addRecord(new ByteArrayInputStream(data));
  File mappingFile=new File(tempFolder.getRoot(),"mapping.txt");
  String text=String.format("%s|%s",data.length,dr.getIdentifier().toString());
  Files.write(text,mappingFile,Charset.defaultCharset());
  LengthCachingDataStore fds=new LengthCachingDataStore();
  fds.setDelegateClass(FileDataStore.class.getName());
  fds.setMappingFilePath(mappingFile.getAbsolutePath());
  fds.init(tempFolder.getRoot().getAbsolutePath());
  DataRecord dr2=fds.getRecordIfStored(dr.getIdentifier());
  assertEquals(dr,dr2);
  assertEquals(dr.getLength(),dr2.getLength());
  assertTrue(ByteStreams.equal(supplier(dr),supplier(dr2)));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void referenceHandling() throws Exception {
  int minSize=new FileDataStore().getMinRecordLength();
  LengthCachingDataStore fds=new LengthCachingDataStore();
  fds.setDelegateClass(FileDataStore.class.getName());
  fds.init(tempFolder.newFolder().getAbsolutePath());
  fds.setReadOnly(false);
  DataRecord dr1=fds.addRecord(byteStream(minSize + 10));
  assertNotNull(fds.getRecordFromReference(dr1.getReference()));
  assertEquals(dr1.getIdentifier(),fds.getRecordFromReference(dr1.getReference()).getIdentifier());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void configDelegate() throws Exception {
  Properties p=new Properties();
  p.setProperty("minRecordLength","4972");
  File configFile=tempFolder.newFile();
  FileOutputStream fos=new FileOutputStream(configFile);
  p.store(fos,null);
  fos.close();
  LengthCachingDataStore fds=new LengthCachingDataStore();
  fds.setDelegateClass(FileDataStore.class.getName());
  fds.setDelegateConfigFilePath(configFile.getAbsolutePath());
  fds.init(tempFolder.getRoot().getAbsolutePath());
  assertEquals(4972,fds.getMinRecordLength());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mappingFileData() throws Exception {
  File root=tempFolder.getRoot();
  File mappingFile=new File(root,"mapping.txt");
  String text="1000|foo\n2000|bar";
  Files.write(text,mappingFile,Charset.defaultCharset());
  LengthCachingDataStore fds=new LengthCachingDataStore();
  fds.setDelegateClass(FileDataStore.class.getName());
  fds.setMappingFilePath(mappingFile.getAbsolutePath());
  fds.init(tempFolder.getRoot().getAbsolutePath());
  DataRecord dr=fds.getRecord(new DataIdentifier("foo"));
  assertNotNull(dr);
  assertEquals(1000,dr.getLength());
  assertEquals(2000,fds.getRecord(new DataIdentifier("bar")).getLength());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void writeBackNewEntries() throws Exception {
  FileDataStore fds1=new FileDataStore();
  File fds1Dir=tempFolder.newFolder();
  int minSize=fds1.getMinRecordLength();
  fds1.init(fds1Dir.getAbsolutePath());
  DataRecord dr1=fds1.addRecord(byteStream(minSize + 10));
  DataRecord dr2=fds1.addRecord(byteStream(minSize + 100));
  LengthCachingDataStore fds2=new LengthCachingDataStore();
  fds2.setDelegateClass(FileDataStore.class.getName());
  fds2.init(fds1Dir.getAbsolutePath());
  fds2.getRecord(new DataIdentifier(dr1.getIdentifier().toString()));
  fds2.getRecord(new DataIdentifier(dr2.getIdentifier().toString()));
  File mappingFile=fds2.getMappingFile();
  fds2.close();
  LengthCachingDataStore fds3=new LengthCachingDataStore();
  fds3.setDelegateClass(FileDataStore.class.getName());
  fds3.setMappingFilePath(mappingFile.getAbsolutePath());
  fds3.init(tempFolder.newFolder().getAbsolutePath());
  fds3.setReadOnly(false);
  assertEquals(dr1.getLength(),fds3.getRecord(dr1.getIdentifier()).getLength());
  assertEquals(dr2.getLength(),fds3.getRecord(dr2.getIdentifier()).getLength());
  DataRecord dr3=fds3.addRecord(byteStream(minSize + 200));
  fds3.close();
  LengthCachingDataStore fds4=new LengthCachingDataStore();
  fds4.setDelegateClass(FileDataStore.class.getName());
  fds4.setMappingFilePath(mappingFile.getAbsolutePath());
  fds4.init(tempFolder.newFolder().getAbsolutePath());
  assertEquals(dr3.getLength(),fds4.getRecord(dr3.getIdentifier()).getLength());
  assertEquals(dr2.getLength(),fds4.getRecord(dr2.getIdentifier()).getLength());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.cli.blob.StripConfigValueTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStripPrefixQuotesAndWhitespaces(){
  assertEquals("123aaa",stripValue("B\"123aaa\"   "));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStripQuotes(){
  assertEquals("123aaa",stripValue("\"123aaa\""));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStripPrefixAndQuotes(){
  assertEquals("123aaa",stripValue("B\"123aaa\""));
}

</code></pre>

<br>
<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoStrip(){
  assertEquals("123aaa",stripValue("123aaa"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.nodestate.FilteringNodeStateTest </h4><pre class="type-9 type-7 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldDecorateAncestorOfExcludedDescendants(){
  final NodeState foo=getNodeState(rootNodeState,"/content/foo");
  final NodeState decorated=wrap("/content/foo",foo,of("/content"),of("/content/foo/de"));
  assertNotSame("foo should not be identical to decorated",foo,decorated);
  assertMissing(decorated,"de");
  assertExists(decorated,"en");
  assertFalse("child nodes \"de\" should not be equal",getNodeState(foo,"de").equals(getNodeState(decorated,"de")));
  final NodeState en=getNodeState(decorated,"en");
  assertEquals("child nodes \"en\" should be equal",getNodeState(foo,"en"),en);
  assertTrue("child node \"en\" should not be decorated",!(en instanceof FilteringNodeState));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldHaveCorrectChildOrderProperty() throws CommitFailedException {
  final NodeState content=rootNodeState.getChildNode("content");
  final NodeState decorated=wrap("/content",content,null,of("/content/foo"));
  assertTrue(decorated.hasProperty(OAK_CHILD_ORDER));
{
    final PropertyState childOrder=decorated.getProperty(OAK_CHILD_ORDER);
    final Iterable<String> values=childOrder.getValue(Type.STRINGS);
    assertEquals(newArrayList("football"),newArrayList(values));
  }
{
    final Predicate<PropertyState> isChildOrderProperty=new Predicate<PropertyState>(){
      @Override public boolean apply(      PropertyState propertyState){
        return OAK_CHILD_ORDER.equals(propertyState.getName());
      }
    }
;
    final PropertyState childOrder=Iterables.find(decorated.getProperties(),isChildOrderProperty);
    final Iterable<String> values=childOrder.getValue(Type.STRINGS);
    assertEquals(newArrayList("football"),newArrayList(values));
  }
}

</code></pre>

<br>
<pre class="type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldDelegatePropertyCount(){
  final NodeState decorated=wrap("/",rootNodeState,null,of("/content/foo/de"));
  assertEquals(1,getNodeState(decorated,"/content").getPropertyCount());
  assertEquals(0,getNodeState(decorated,"/content/foo").getPropertyCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.util.ApproximateCounterTest </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void keepAboveZero(){
  assertEquals(1234,ApproximateCounter.adjustOffset(-1234,-100,10));
}

</code></pre>

<br>
<pre class="type-13 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void highResolutionAdjust(){
  for (int i=0; i < 10; i++) {
    assertEquals(123,ApproximateCounter.adjustOffset(i,123,1));
  }
}

</code></pre>

<br>
<pre class="type-13 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void veryHighResolution(){
  for (int i=-100; i < 100; i++) {
    assertEquals(i,ApproximateCounter.calculateOffset(i,-1));
    assertEquals(i,ApproximateCounter.calculateOffset(i,0));
    assertEquals(i,ApproximateCounter.calculateOffset(i,1));
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
