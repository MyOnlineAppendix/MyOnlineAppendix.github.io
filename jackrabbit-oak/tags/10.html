<h3><span class=" glyphicon glyphicon-tag"/>&nbspExecutionTester</h3><kbd>Executes methods or other tests from the same test unit</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.jackrabbit.oak.api.ContentSessionTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void throwOnClosedTree() throws LoginException, NoSuchWorkspaceException, IOException {
  ContentSession session=repository.login(null,null);
  Root root=session.getLatestRoot();
  Tree tree=root.getTree("/");
  session.close();
  tree.getChild("any");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void throwOnClosedSession() throws LoginException, NoSuchWorkspaceException, IOException {
  ContentSession session=repository.login(null,null);
  session.close();
  session.getLatestRoot();
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void throwOnClosedRoot() throws LoginException, NoSuchWorkspaceException, IOException {
  ContentSession session=repository.login(null,null);
  Root root=session.getLatestRoot();
  session.close();
  root.getTree("/");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.api.RootTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void moveOrderableNodes() throws Exception {
  ContentSession s=repository.login(null,null);
  try {
    Root r=s.getLatestRoot();
    Tree t=r.getTree("/");
    Tree c=t.addChild("c");
    c.addChild("node1").orderBefore(null);
    c.addChild("node2");
    t.addChild("node3");
    r.commit();
    r.move("/node3","/c/node3");
    assertSequence(c.getChildren(),"node1","node2","node3");
    r.commit();
    assertSequence(c.getChildren(),"node1","node2","node3");
  }
  finally {
    s.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.api.TreeTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentOrderBeforeAllRemoved() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/").addChild("c");
    t1.addChild("node1").orderBefore(null);
    t1.addChild("node2");
    t1.addChild("node3");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/c");
      t1.remove();
      r1.getTree("/").addChild("c");
      r1.commit();
      assertSequence(t1.getChildren());
      t2.getChild("node3").orderBefore("node1");
      r2.commit();
      assertSequence(t2.getChildren());
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentOrderBeforeWithRemove() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/");
    t1.addChild("node1");
    t1.addChild("node2");
    t1.addChild("node3");
    t1.addChild("node4");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/");
      t1.getChild("node2").orderBefore("node1");
      t1.getChild("node3").orderBefore(null);
      t1.getChild("node4").remove();
      r1.commit();
      assertSequence(t1.getChildren(),"node2","node1","node3");
      t2.getChild("node3").orderBefore("node1");
      r2.commit();
      assertSequence(t2.getChildren(),"node2","node1","node3");
      t2.getChild("node3").orderBefore("node1");
      r2.commit();
      assertSequence(t2.getChildren(),"node2","node3","node1");
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentOrderBefore() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/");
    t1.addChild("node1");
    t1.addChild("node2");
    t1.addChild("node3");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/");
      t1.getChild("node2").orderBefore("node1");
      t1.getChild("node3").orderBefore(null);
      r1.commit();
      assertSequence(t1.getChildren(),"node2","node1","node3");
      t2.getChild("node3").orderBefore("node1");
      t2.getChild("node2").orderBefore(null);
      r2.commit();
      assertSequence(t2.getChildren(),"node2","node1","node3");
      t2.getChild("node3").orderBefore("node1");
      t2.getChild("node2").orderBefore(null);
      r2.commit();
      assertSequence(t2.getChildren(),"node3","node1","node2");
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentAddChildMakeOrderable() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/");
    t1.addChild("node1");
    t1.addChild("node2");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/");
      t1=r1.getTree("/");
      t1.addChild("node3").orderBefore(null);
      r1.commit();
      List<String> names=Lists.newArrayList();
      for (      Tree t : r1.getTree("/").getChildren()) {
        names.add(t.getName());
      }
      t2.addChild("node4").orderBefore(null);
      r2.commit();
      names.add("node4");
      t1=s1.getLatestRoot().getTree("/");
      assertSequence(t1.getChildren(),names.toArray(new String[names.size()]));
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentAddChildOrderable() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/");
    t1.addChild("node1").orderBefore(null);
    t1.addChild("node2");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/");
      t1=r1.getTree("/");
      t1.addChild("node3");
      r1.commit();
      t2.addChild("node4");
      r2.commit();
      t1=s1.getLatestRoot().getTree("/");
      assertSequence(t1.getChildren(),"node1","node2","node3","node4");
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentOrderBeforeRemoved() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/");
    t1.addChild("node1");
    t1.addChild("node2");
    t1.addChild("node3");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/");
      t1.getChild("node2").orderBefore("node1");
      t1.getChild("node3").remove();
      r1.commit();
      assertSequence(t1.getChildren(),"node2","node1");
      t2.getChild("node3").orderBefore("node1");
      r2.commit();
      assertSequence(t2.getChildren(),"node2","node1");
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentOrderBeforeWithRemoveOtherSession() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/");
    t1.addChild("node1").orderBefore(null);
    t1.addChild("node2");
    t1.addChild("node3");
    t1.addChild("node4");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/");
      t1.getChild("node2").orderBefore("node1");
      t1.getChild("node3").orderBefore(null);
      r1.commit();
      assertSequence(t1.getChildren(),"node2","node1","node4","node3");
      t2.getChild("node3").orderBefore("node1");
      t2.getChild("node4").remove();
      r2.commit();
      assertSequence(t2.getChildren(),"node2","node1","node3");
      t2.getChild("node3").orderBefore("node1");
      r2.commit();
      assertSequence(t2.getChildren(),"node2","node3","node1");
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentOrderBeforeWithAdd() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/");
    t1.addChild("node1");
    t1.addChild("node2");
    t1.addChild("node3");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/");
      t1.getChild("node2").orderBefore("node1");
      t1.getChild("node3").orderBefore(null);
      t1.addChild("node4");
      r1.commit();
      assertSequence(t1.getChildren(),"node2","node1","node3","node4");
      t2.getChild("node3").orderBefore("node1");
      r2.commit();
      assertSequence(t2.getChildren(),"node2","node1","node3","node4");
      t2.getChild("node3").orderBefore("node1");
      r2.commit();
      assertSequence(t2.getChildren(),"node2","node3","node1","node4");
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentOrderBeforeTargetRemoved() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/");
    t1.addChild("node1").orderBefore(null);
    t1.addChild("node2");
    t1.addChild("node3");
    t1.addChild("node4");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/");
      t1.getChild("node2").orderBefore("node1");
      t1.getChild("node3").remove();
      r1.commit();
      assertSequence(t1.getChildren(),"node2","node1","node4");
      t2.getChild("node4").orderBefore("node3");
      r2.commit();
      assertSequence(t2.getChildren(),"node2","node1","node4");
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.api.TypeComparisonTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void compareTypes(){
  Type[] types=new Type[]{Type.BINARIES,Type.BINARY,Type.BOOLEANS,Type.BOOLEAN,Type.DATES,Type.DATE,Type.DECIMALS,Type.DECIMAL,Type.DOUBLES,Type.DOUBLE,Type.LONGS,Type.LONG,Type.NAMES,Type.NAME,Type.PATHS,Type.PATH,Type.REFERENCES,Type.REFERENCE,Type.STRINGS,Type.STRING,Type.UNDEFINEDS,Type.UNDEFINED,Type.URIS,Type.URI,Type.WEAKREFERENCES,Type.WEAKREFERENCE};
  Arrays.sort(types);
  for (int i=0; i < types.length; i++) {
    for (int j=0; j < types.length; j++) {
      if (i < j) {
        assertTypeLessThan(types[i],types[j]);
      }
      if (j < i) {
        assertTypeLessThan(types[j],types[i]);
      }
      if (i == j) {
        assertTypeEqual(types[i],types[j]);
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.api.TypePreconditionTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testArrayTypeOnMultiValueType(){
  multi.getArrayType();
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testBaseTypeOnSingleValueType(){
  single.getBaseType();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.cache.CacheTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPruneStack(){
  CacheLIRS<Integer,Integer> test=createCache(5);
  for (int i=0; i < 7; i++) {
    test.put(i,i * 10);
  }
  verify(test,"mem: 5 stack: 6 5 4 3 2 1 cold: 6 non-resident: 5 0");
  test.getUnchecked(4);
  test.getUnchecked(3);
  test.getUnchecked(2);
  verify(test,"mem: 5 stack: 2 3 4 6 5 1 cold: 6 non-resident: 5 0");
  test.remove(1);
  verify(test,"mem: 4 stack: 2 3 4 6 cold: non-resident: 5 0");
  test.put(0,0);
  test.put(1,10);
  verify(test,"mem: 5 stack: 1 0 2 3 4 cold: 1 non-resident: 6 5");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRandomSmallCache(){
  Random r=new Random(1);
  for (int i=0; i < 10000; i++) {
    int j=0;
    StringBuilder buff=new StringBuilder();
    CacheLIRS<Integer,Integer> test=createCache(1 + r.nextInt(10));
    for (; j < 30; j++) {
      int key=r.nextInt(5);
switch (r.nextInt(3)) {
case 0:
        int memory=r.nextInt(5) + 1;
      buff.append("add ").append(key).append(' ').append(memory).append('\n');
    test.put(key,j,memory);
  break;
case 1:
buff.append("remove ").append(key).append('\n');
test.invalidate(key);
break;
case 2:
buff.append("get ").append(key).append('\n');
test.getIfPresent(key);
}
}
}
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLimitNonResident(){
  CacheLIRS<Integer,Integer> test=createCache(4);
  for (int i=0; i < 20; i++) {
    test.put(i,10 * i);
  }
  verify(test,"mem: 4 stack: 19 18 17 16 3 2 1 cold: 19 non-resident: 18 17 16");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.cache.ConcurrentPerformanceTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testPerformance() throws Exception {
  System.out.println("warmup...");
  testPerformance(2,2,false);
  testPerformance(2,2,true);
  testPerformance(2,2,false);
  testPerformance(2,2,true);
  System.out.println("test");
  for (int concurrencyLevel=1; concurrencyLevel <= 128; concurrencyLevel*=4) {
    for (int threadCount=1; threadCount <= 128; threadCount*=4) {
      testPerformance(threadCount,concurrencyLevel,false);
    }
  }
  for (int concurrencyLevel=1; concurrencyLevel <= 128; concurrencyLevel*=4) {
    for (int threadCount=1; threadCount <= 128; threadCount*=4) {
      testPerformance(threadCount,concurrencyLevel,true);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.cache.ConcurrentTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRandomOperations() throws Exception {
  Random r=new Random(1);
  final CacheLIRS<Integer,Integer> cache=new CacheLIRS.Builder<Integer,Integer>().maximumWeight(100).averageWeight(10).build();
  final Exception[] ex=new Exception[1];
  int size=3;
  Thread[] threads=new Thread[size];
  final AtomicBoolean stop=new AtomicBoolean();
  for (int i=0; i < size; i++) {
    Thread t=new Thread(){
      @Override public void run(){
        while (!stop.get()) {
          try {
            cache.cleanUp();
            cache.containsKey(1);
            cache.containsValue(2);
            cache.entrySet();
            cache.getMaxMemory();
            cache.getIfPresent(3);
            cache.getAverageMemory();
            cache.getMemory(4);
            cache.getUsedMemory();
            cache.invalidate(5);
            cache.invalidateAll();
            cache.isEmpty();
            cache.keySet();
            cache.peek(6);
            cache.put(7,8);
            cache.refresh(9);
            cache.remove(10);
            cache.setAverageMemory(11);
            cache.setMaxMemory(12);
            cache.size();
            cache.stats();
            ConcurrentMap<Integer,Integer> map=cache.asMap();
            map.size();
            map.isEmpty();
            map.containsKey(1);
            map.containsValue(1);
            map.get(11);
            map.put(12,10);
            map.remove(13);
            map.clear();
            map.keySet();
            map.values();
            map.entrySet();
            map.putIfAbsent(14,10);
            map.remove(15);
            map.remove(16,10);
            map.replace(17,10,100);
            map.replace(18,10);
            cache.get(19);
            cache.getUnchecked(1);
          }
 catch (          Exception e) {
            ex[0]=e;
          }
        }
      }
    }
;
    t.start();
    threads[i]=t;
  }
  try {
    long start=System.currentTimeMillis();
    while (System.currentTimeMillis() < start + 1000) {
      for (int i=0; i < 100000 && ex[0] == null; i++) {
        cache.put(r.nextInt(10),r.nextInt(10000));
      }
    }
  }
  finally {
    stop.set(true);
    for (    Thread t : threads) {
      t.join();
    }
  }
  if (ex[0] != null) {
    throw ex[0];
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.PropertiesUtilTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testPopulateAndValidate(){
  Map<String,Object> props=new HashMap<String,Object>();
  props.put("something","foo");
  TestBeanA bean=new TestBeanA();
  PropertiesUtil.populate(bean,props,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.concurrent.ExecutorCloserTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nullExecutor() throws Exception {
  new ExecutorCloser(null).close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.sort.EscapeUtilsTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void invalidUnEscape2() throws Exception {
  EscapeUtils.unescapeLineBreaks("abc\\k\\n");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEscapeUnEscape() throws Exception {
  assertEscape("ab\nc\r");
  assertEscape("a\\z");
  assertEscape("a\\\\z\nc");
  assertEscape("some text with multi \nbyte \r田中 characters\\.");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void invalidUnEscape() throws Exception {
  EscapeUtils.unescapeLineBreaks("abc\\");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.sort.ExternalSortTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEmptyFiles() throws Exception {
  File f1=File.createTempFile("tmp","unit");
  File f2=File.createTempFile("tmp","unit");
  ExternalSort.mergeSortedFiles(ExternalSort.sortInBatch(f1),f2);
  if (f2.length() != 0) {
    throw new RuntimeException("empty files should end up emtpy");
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Sample case to sort csv file.
 * @throws Exception
 */
@Test public void testCSVSorting() throws Exception {
  testCSVSortingWithParams(false);
  testCSVSortingWithParams(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCSVKeyValueSorting() throws Exception {
  testCSVSortKeyValue(false);
  testCSVSortKeyValue(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.RootFuzzIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void fuzzTest() throws Exception {
  for (  Operation op : operations(OP_COUNT)) {
    log.info("{}",op);
    op.apply(root1);
    op.apply(root2);
    checkEqual(root1.getTree("/"),root2.getTree("/"));
    root1.commit();
    checkEqual(root1.getTree("/"),root2.getTree("/"));
    if (op instanceof Save) {
      root2.commit();
      checkEqual(root1.getTree("/"),root2.getTree("/"));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.RootTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void rebaseWithAddProperty() throws CommitFailedException {
  Root root1=session.getLatestRoot();
  Root root2=session.getLatestRoot();
  checkEqual(root1.getTree("/"),root2.getTree("/"));
  root2.getTree("/").addChild("one").addChild("two").addChild("three").setProperty("p1","V1");
  root2.commit();
  root1.getTree("/").setProperty("new",42);
  root1.rebase();
  root2.getTree("/").setProperty("new",42);
  checkEqual(root1.getTree("/"),(root2.getTree("/")));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void rebaseWithRemoveProperty() throws CommitFailedException {
  Root root1=session.getLatestRoot();
  Root root2=session.getLatestRoot();
  checkEqual(root1.getTree("/"),root2.getTree("/"));
  root2.getTree("/").addChild("one").addChild("two").addChild("three").setProperty("p1","V1");
  root2.commit();
  root1.getTree("/").removeProperty("a");
  root1.rebase();
  root2.getTree("/").removeProperty("a");
  checkEqual(root1.getTree("/"),(root2.getTree("/")));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void rebase() throws CommitFailedException {
  Root root1=session.getLatestRoot();
  Root root2=session.getLatestRoot();
  checkEqual(root1.getTree("/"),root2.getTree("/"));
  root2.getTree("/").addChild("one").addChild("two").addChild("three").setProperty("p1","V1");
  root2.commit();
  root1.rebase();
  checkEqual(root1.getTree("/"),(root2.getTree("/")));
  Tree one=root2.getTree("/one");
  one.getChild("two").remove();
  one.addChild("four");
  root2.commit();
  root1.rebase();
  checkEqual(root1.getTree("/"),(root2.getTree("/")));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void rebaseWithSetProperty() throws CommitFailedException {
  Root root1=session.getLatestRoot();
  Root root2=session.getLatestRoot();
  checkEqual(root1.getTree("/"),root2.getTree("/"));
  root2.getTree("/").addChild("one").addChild("two").addChild("three").setProperty("p1","V1");
  root2.commit();
  root1.getTree("/").setProperty("a",42);
  root1.rebase();
  root2.getTree("/").setProperty("a",42);
  checkEqual(root1.getTree("/"),(root2.getTree("/")));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void rebaseWithAddNode() throws CommitFailedException {
  Root root1=session.getLatestRoot();
  Root root2=session.getLatestRoot();
  checkEqual(root1.getTree("/"),root2.getTree("/"));
  root2.getTree("/").addChild("one").addChild("two").addChild("three").setProperty("p1","V1");
  root2.commit();
  root1.getTree("/").addChild("child");
  root1.rebase();
  root2.getTree("/").addChild("child");
  checkEqual(root1.getTree("/"),(root2.getTree("/")));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oak962() throws CommitFailedException {
  Root root=session.getLatestRoot();
  Tree r=root.getTree("/").addChild("root");
  r.addChild("N3");
  r.addChild("N6");
  r.getChild("N6").addChild("N7");
  root.commit();
  root.move("/root/N6/N7","/root/N3/N12");
  r.getChild("N3").getChild("N12").remove();
  r.getChild("N6").remove();
  root.commit();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void rebaseWithMove() throws CommitFailedException {
  Root root1=session.getLatestRoot();
  Root root2=session.getLatestRoot();
  checkEqual(root1.getTree("/"),root2.getTree("/"));
  root2.getTree("/").addChild("one").addChild("two").addChild("three").setProperty("p1","V1");
  root2.commit();
  root1.move("/x","/y/x-moved");
  root1.rebase();
  root2.move("/x","/y/x-moved");
  checkEqual(root1.getTree("/"),(root2.getTree("/")));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void rebaseWithRemoveNode() throws CommitFailedException {
  Root root1=session.getLatestRoot();
  Root root2=session.getLatestRoot();
  checkEqual(root1.getTree("/"),root2.getTree("/"));
  root2.getTree("/").addChild("one").addChild("two").addChild("three").setProperty("p1","V1");
  root2.commit();
  root1.getTree("/").getChild("x").remove();
  root1.rebase();
  root2.getTree("/").getChild("x").remove();
  checkEqual(root1.getTree("/"),(root2.getTree("/")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AtomicCounterTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void incrementNonRootNode() throws RepositoryException {
  Session session=getAdminSession();
  try {
    Node counter=session.getRootNode().addNode("foo").addNode("bar").addNode("counter");
    counter.addMixin(MIX_ATOMIC_COUNTER);
    session.save();
    assertCounter(counter,0);
    counter.setProperty(PROP_INCREMENT,1L);
    session.save();
    assertCounter(counter,1);
    counter.setProperty(PROP_INCREMENT,1L);
    session.save();
    assertCounter(counter,2);
    counter.setProperty(PROP_INCREMENT,-2L);
    session.save();
    assertCounter(counter,0);
    counter.setProperty(PROP_INCREMENT,5L);
    session.save();
    assertCounter(counter,5);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.CRUDTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void nodeType() throws RepositoryException {
  Session s=getAdminSession();
  s.getRootNode().addNode("a","nt:folder").addNode("b");
  s.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.CompatibilityIssuesTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Type checks are deferred to the Session#save call instead of the
 * Node#addNode method like in Jackrabbit2.
 * <p>Stacktrace in JR2:</p>
 * <pre>{@codejavax.jcr.nodetype.ConstraintViolationException: No child node definition for fail found in node /f1362578560413
 * at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1276)
 * at org.apache.jackrabbit.core.session.AddNodeOperation.perform(AddNodeOperation.java:111)
 * at org.apache.jackrabbit.core.session.AddNodeOperation.perform(AddNodeOperation.java:1)
 * at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:216)
 * at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91)
 * at org.apache.jackrabbit.core.NodeImpl.addNodeWithUuid(NodeImpl.java:1814)
 * at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1774)}<pre>
 * <p>Stacktrace in Oak:</p>
 * <pre>{@codejavax.jcr.nodetype.ConstraintViolationException
 * at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 * at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
 * at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
 * at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
 * at org.apache.jackrabbit.oak.api.CommitFailedException.throwRepositoryException(CommitFailedException.java:57)
 * at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.save(SessionDelegate.java:258)
 * at org.apache.jackrabbit.oak.jcr.session.SessionImpl.save(SessionImpl.java:277)
 * ...
 * Caused by: org.apache.jackrabbit.oak.api.CommitFailedException: Cannot add node 'f1362578685631' at /
 * at org.apache.jackrabbit.oak.plugins.nodetype.TypeValidator.childNodeAdded(TypeValidator.java:128)
 * at org.apache.jackrabbit.oak.spi.commit.CompositeValidator.childNodeAdded(CompositeValidator.java:68)
 * at org.apache.jackrabbit.oak.spi.commit.ValidatingHook$ValidatorDiff.childNodeAdded(ValidatingHook.java:159)
 * at org.apache.jackrabbit.oak.core.RootImpl.commit(RootImpl.java:250)
 * at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.save(SessionDelegate.java:255)
 * ...
 * Caused by: javax.jcr.nodetype.ConstraintViolationException: Node 'jcr:content' in 'nt:file' is mandatory
 * at org.apache.jackrabbit.oak.plugins.nodetype.EffectiveNodeTypeImpl.checkMandatoryItems(EffectiveNodeTypeImpl.java:288)
 * at org.apache.jackrabbit.oak.plugins.nodetype.TypeValidator.childNodeAdded(TypeValidator.java:125)
 * ...}<pre>
 */
@Test(expected=ConstraintViolationException.class) public void typeChecksOnSave() throws RepositoryException {
  Session session=getAdminSession();
  Node f=session.getNode("/").addNode("f" + System.currentTimeMillis(),"nt:file");
  f.addNode("fail","nt:unstructured");
  session.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void move() throws RepositoryException {
  Session session=getAdminSession();
  Node node=session.getNode("/");
  node.addNode("source").addNode("node");
  node.addNode("target");
  session.save();
  session.refresh(true);
  Node sourceNode=session.getNode("/source/node");
  session.move("/source/node","/target/moved");
  try {
    sourceNode.getPath();
  }
 catch (  InvalidItemStateException expected) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConcurrentAddNodesClusterIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addNodesConcurrent() throws Exception {
  for (int i=0; i < NUM_CLUSTER_NODES; i++) {
    DocumentMK mk=new DocumentMK.Builder().setMongoDB(createConnection().getDB()).setClusterId(i + 1).open();
    mks.add(mk);
  }
  Map<String,Exception> exceptions=Collections.synchronizedMap(new HashMap<String,Exception>());
  for (int i=0; i < mks.size(); i++) {
    DocumentMK mk=mks.get(i);
    Repository repo=new Jcr(mk.getNodeStore()).createRepository();
    repos.add(repo);
    workers.add(new Thread(new Worker(repo,exceptions),"Worker-" + (i + 1)));
  }
  for (  Thread t : workers) {
    t.start();
  }
  for (  Thread t : workers) {
    t.join();
  }
  for (  Map.Entry<String,Exception> entry : exceptions.entrySet()) {
    throw entry.getValue();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addNodes2() throws Exception {
  for (int i=0; i < 3; i++) {
    DocumentMK mk=new DocumentMK.Builder().setMongoDB(createConnection().getDB()).setAsyncDelay(0).setClusterId(i + 1).open();
    mks.add(mk);
  }
  final DocumentMK mk1=mks.get(0);
  final DocumentMK mk2=mks.get(1);
  final DocumentMK mk3=mks.get(2);
  Repository r1=new Jcr(mk1.getNodeStore()).createRepository();
  repos.add(r1);
  Repository r2=new Jcr(mk2.getNodeStore()).createRepository();
  repos.add(r2);
  Repository r3=new Jcr(mk3.getNodeStore()).createRepository();
  repos.add(r3);
  Session s1=r1.login(new SimpleCredentials("admin","admin".toCharArray()));
  Session s2=r2.login(new SimpleCredentials("admin","admin".toCharArray()));
  Session s3=r3.login(new SimpleCredentials("admin","admin".toCharArray()));
  ensureIndex(s1.getRootNode(),PROP_NAME);
  runBackgroundOps(mk1);
  runBackgroundOps(mk2);
  runBackgroundOps(mk3);
  Node root2=s2.getRootNode().addNode("testroot-Worker-2","nt:unstructured");
  createNodes(root2,"testnode0");
  s2.save();
  createNodes(root2,"testnode1");
  runBackgroundOps(mk1);
  runBackgroundOps(mk3);
  runBackgroundOps(mk2);
  Node root3=s3.getRootNode().addNode("testroot-Worker-3","nt:unstructured");
  createNodes(root3,"testnode0");
  s2.save();
  createNodes(root2,"testnode2");
  runBackgroundOps(mk1);
  runBackgroundOps(mk3);
  runBackgroundOps(mk2);
  s3.save();
  createNodes(root3,"testnode1");
  Node root1=s1.getRootNode().addNode("testroot-Worker-1","nt:unstructured");
  createNodes(root1,"testnode0");
  s2.save();
  createNodes(root2,"testnode3");
  runBackgroundOps(mk1);
  runBackgroundOps(mk3);
  runBackgroundOps(mk2);
  s1.save();
  createNodes(root1,"testnode1");
  s3.save();
  createNodes(root3,"testnode2");
  runBackgroundOps(mk1);
  s1.save();
  s1.logout();
  s2.logout();
  s3.logout();
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("OAK-1807") @Test public void addNodesConcurrent2() throws Exception {
  final Thread mainThread=Thread.currentThread();
  for (int i=0; i < NUM_CLUSTER_NODES; i++) {
    DocumentMK mk=new DocumentMK.Builder().setMongoDB(createConnection().getDB()).setClusterId(i + 1).open();
    mks.add(mk);
  }
  final Map<String,Exception> exceptions=Collections.synchronizedMap(new HashMap<String,Exception>());
  final CountDownLatch latch=new CountDownLatch(1);
  final AtomicBoolean stop=new AtomicBoolean();
  final UncaughtExceptionHandler ueh=new UncaughtExceptionHandler(){
    @Override public void uncaughtException(    Thread t,    Throwable e){
      RuntimeException r=new RuntimeException("Exception in thread " + t.getName(),e);
      r.printStackTrace();
    }
  }
;
  for (int i=0; i < mks.size(); i++) {
    DocumentMK mk=mks.get(i);
    final Repository repo=new Jcr(mk.getNodeStore()).createRepository();
    repos.add(repo);
    for (int w=0; w <= WORKER_COUNT; w++) {
      final String name="Worker-" + (i + 1) + "-"+ (w + 1);
      final Runnable r=new Runnable(){
        final Session session=createAdminSession(repo);
        int count=0;
        @Override public void run(){
          try {
            Uninterruptibles.awaitUninterruptibly(latch);
            session.refresh(false);
            Node node=session.getRootNode().addNode(name + count++,"oak:Unstructured");
            for (int j=0; j < NODE_COUNT && !stop.get(); j++) {
              node.addNode("node" + j);
              session.save();
            }
          }
 catch (          RepositoryException e) {
            RuntimeException r=new RuntimeException("Exception in thread " + name,e);
            r.printStackTrace();
            exceptions.put(Thread.currentThread().getName(),r);
            stop.set(true);
            mainThread.interrupt();
          }
 finally {
            session.logout();
          }
        }
      }
;
      Runnable runnable=r;
      if (w == WORKER_COUNT) {
        runnable=new Runnable(){
          @Override public void run(){
            while (!stop.get()) {
              r.run();
            }
          }
        }
;
      }
      Thread t=new Thread(runnable);
      t.setName(name);
      t.setUncaughtExceptionHandler(ueh);
      workers.add(t);
    }
  }
  for (  Thread t : workers) {
    t.start();
  }
  latch.countDown();
  TimeUnit.MINUTES.sleep(10);
  stop.set(true);
  for (  Thread t : workers) {
    t.join();
  }
  for (  Map.Entry<String,Exception> entry : exceptions.entrySet()) {
    throw entry.getValue();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addNodes() throws Exception {
  for (int i=0; i < 2; i++) {
    DocumentMK mk=new DocumentMK.Builder().setMongoDB(createConnection().getDB()).setClusterId(i + 1).open();
    mks.add(mk);
  }
  final DocumentMK mk1=mks.get(0);
  final DocumentMK mk2=mks.get(1);
  Repository r1=new Jcr(mk1.getNodeStore()).createRepository();
  repos.add(r1);
  Repository r2=new Jcr(mk2.getNodeStore()).createRepository();
  repos.add(r2);
  Session s1=r1.login(new SimpleCredentials("admin","admin".toCharArray()));
  Session s2=r2.login(new SimpleCredentials("admin","admin".toCharArray()));
  ensureIndex(s1.getRootNode(),PROP_NAME);
  ensureIndex(s2.getRootNode(),PROP_NAME);
  Map<String,Exception> exceptions=Collections.synchronizedMap(new HashMap<String,Exception>());
  createNodes(s1,"testroot-1",1,1,exceptions);
  createNodes(s2,"testroot-2",1,1,exceptions);
  for (  Map.Entry<String,Exception> entry : exceptions.entrySet()) {
    throw entry.getValue();
  }
  s1.logout();
  s2.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConcurrentFileOperationsTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void interleavingOperations1() throws Exception {
  Node folder1=testRootNode.addNode("folder1","nt:unstructured");
  Node folder2=testRootNode.addNode("folder2","nt:unstructured");
  Node file1=addFile(session.getNode(folder1.getPath()),"file1.tmp");
  Node file2=addFile(session.getNode(folder2.getPath()),"file2.tmp");
  session.save();
  Session s1=createAdminSession();
  Session s2=createAdminSession();
  try {
    rename(s1.getNode(file1.getPath()),"file1.bin");
    rename(s2.getNode(file2.getPath()),"file2.bin");
    s1.save();
    s2.save();
  }
  finally {
    s1.logout();
    s2.logout();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Multiple threads create and rename files.
 */
@Test public void concurrent() throws Exception {
  List<Session> sessions=new ArrayList<Session>();
  for (int i=0; i < NUM_WRITERS; i++) {
    sessions.add(createAdminSession());
    testRootNode.addNode("session-" + i,"nt:unstructured");
  }
  addFile(testRootNode,"dummy");
  session.save();
  final Map<String,Exception> exceptions=Collections.synchronizedMap(new HashMap<String,Exception>());
  List<Thread> writers=new ArrayList<Thread>();
  for (int i=0; i < sessions.size(); i++) {
    final Session s=sessions.get(i);
    final String path=testRootNode.getPath() + "/session-" + i;
    writers.add(new Thread(new Runnable(){
      @Override public void run(){
        try {
          s.refresh(false);
          Node n=s.getNode(path);
          for (int i=0; i < 10; i++) {
            String tmpFile="file-" + i + ".tmp";
            addFile(n,tmpFile);
            s.save();
            String srcPath=n.getPath() + "/" + tmpFile;
            String destPath=n.getPath() + "/file-" + i+ ".bin";
            s.move(srcPath,destPath);
            s.save();
          }
        }
 catch (        RepositoryException e) {
          exceptions.put(path,new Exception(dumpTree(s,path),e));
        }
      }
    }
));
  }
  for (  Thread t : writers) {
    t.start();
  }
  for (  Thread t : writers) {
    t.join();
  }
  for (  Session s : sessions) {
    s.logout();
  }
  for (  Map.Entry<String,Exception> entry : exceptions.entrySet()) {
    log.info("Worker (" + entry.getKey() + ") failed with exception: "+ entry.getValue().toString());
    throw entry.getValue();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConcurrentIndexUpdateIT </h4><pre class="type-17 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void updates() throws Exception {
  Node n=getAdminSession().getRootNode();
  for (  String name : PathUtils.elements(TEST_PATH)) {
    n=n.addNode(name,"oak:Unstructured");
  }
  getAdminSession().save();
  final List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  List<AtomicLong> counters=Lists.newArrayList();
  List<Thread> writers=Lists.newArrayList();
  for (int i=0; i < NUM_WRITERS; i++) {
    final int id=i;
    final AtomicLong counter=new AtomicLong();
    counters.add(counter);
    writers.add(new Thread(new Runnable(){
      @Override public void run(){
        try {
          Session s=createAdminSession();
          try {
            runTest(s.getNode(TEST_PATH),id,counter);
          }
  finally {
            s.logout();
          }
        }
 catch (        Exception e) {
          exceptions.add(e);
        }
      }
    }
));
  }
  for (  Thread t : writers) {
    t.start();
  }
  while (anyRunning(writers)) {
    List<Long> before=currentValues(counters);
    Thread.sleep(1000);
    List<Long> after=currentValues(counters);
    System.out.println(diff(after,before));
  }
  for (  Exception e : exceptions) {
    throw e;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConcurrentReadIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentNodeIteration() throws RepositoryException, InterruptedException, ExecutionException {
  final Session session=createAdminSession();
  try {
    final Node testRoot=session.getRootNode().addNode("test-root");
    for (int k=0; k < 50; k++) {
      testRoot.addNode("n" + k);
    }
    session.save();
    ListeningExecutorService executorService=MoreExecutors.listeningDecorator(Executors.newCachedThreadPool());
    List<ListenableFuture<?>> futures=Lists.newArrayList();
    for (int k=0; k < 20; k++) {
      futures.add(executorService.submit(new Callable<Void>(){
        @Override public Void call() throws Exception {
          for (int k=0; k < 10000; k++) {
            session.refresh(false);
            NodeIterator children=testRoot.getNodes();
            children.hasNext();
          }
          return null;
        }
      }
));
    }
    Futures.allAsList(futures).get();
    executorService.shutdown();
    executorService.awaitTermination(1,TimeUnit.DAYS);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentPropertyIteration() throws RepositoryException, InterruptedException, ExecutionException {
  final Session session=createAdminSession();
  try {
    final Node testRoot=session.getRootNode().addNode("test-root");
    for (int k=0; k < 50; k++) {
      testRoot.setProperty("p" + k,k);
    }
    session.save();
    ListeningExecutorService executorService=MoreExecutors.listeningDecorator(Executors.newCachedThreadPool());
    List<ListenableFuture<?>> futures=Lists.newArrayList();
    for (int k=0; k < 20; k++) {
      futures.add(executorService.submit(new Callable<Void>(){
        @Override public Void call() throws Exception {
          for (int k=0; k < 100000; k++) {
            session.refresh(false);
            PropertyIterator properties=testRoot.getProperties();
            properties.hasNext();
          }
          return null;
        }
      }
));
    }
    Futures.allAsList(futures).get();
    executorService.shutdown();
    executorService.awaitTermination(1,TimeUnit.DAYS);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ItemSaveTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void noChangesAtAll() throws RepositoryException {
  foo.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void saveOnChangedProperty() throws RepositoryException {
  prop0.setValue("changed");
  prop0.save();
  prop1.setValue("changed");
  prop1.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void saveOnRoot() throws RepositoryException {
  root.addNode("child");
  root.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void saveContainsAllChanges() throws RepositoryException {
  foo.addNode("child");
  foo.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.LargeOperationIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assert that large commits scale linearly wrt. to the number of changed items.
 * @throws RepositoryException
 * @throws InterruptedException
 */
@Test public void largeCommit() throws RepositoryException, InterruptedException {
  final Node n=session.getRootNode().addNode("large-commit","oak:Unstructured");
  final ContentGenerator contentGenerator=new ContentGenerator();
  ArrayList<Double> executionTimes=Lists.newArrayList();
  for (  int scale : scales) {
    ScalabilityTest test=new ScalabilityTest(scale){
      @Override void before(      int scale) throws RepositoryException {
        contentGenerator.addNodes(n,scale);
      }
      @Override void run(      int scale) throws RepositoryException {
        session.save();
      }
    }
;
    double t=test.run();
    executionTimes.add(t);
    LOG.info("Committing {} node took {} ns/node",scale,t);
  }
  assertOnLgn("large commit",scales,executionTimes,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assert adding siblings scales linearly with the number of already existing siblings.
 * @throws RepositoryException
 * @throws InterruptedException
 */
@Test public void manySiblings() throws RepositoryException, InterruptedException {
  final Node n=session.getRootNode().addNode("many-siblings","oak:Unstructured");
  ArrayList<Double> executionTimes=Lists.newArrayList();
  for (  int scale : scales) {
    ScalabilityTest test=new ScalabilityTest(scale){
      @Override void before(      int scale) throws RepositoryException {
        Node s=n.addNode("s" + scale);
        for (int k=0; k < scale; k++) {
          s.addNode("s" + k);
        }
      }
      @Override void run(      int scale) throws RepositoryException {
        Node s=n.getNode("s" + scale);
        for (int k=0; k < 100; k++) {
          s.addNode("t" + k);
        }
        session.save();
      }
    }
;
    double t=test.run();
    executionTimes.add(t);
    LOG.info("Adding 100 siblings next to {} siblings took {} ns/node",scale,t);
  }
  boolean knownIssue=fixture.getClass() == DocumentMongoFixture.class;
  assertOnLgn("many siblings",scales,executionTimes,knownIssue);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void largeRemove() throws RepositoryException, InterruptedException {
  final Node n=session.getRootNode().addNode("large-remove","oak:Unstructured");
  final ContentGenerator contentGenerator=new ContentGenerator(1000);
  ArrayList<Double> executionTimes=Lists.newArrayList();
  for (  int scale : scales) {
    ScalabilityTest test=new ScalabilityTest(scale){
      @Override void before(      int scale) throws RepositoryException {
        Node s=n.addNode("s" + scale);
        contentGenerator.addNodes(s,scale);
      }
      @Override void run(      int scale) throws RepositoryException {
        session.getNode("/large-remove/s" + scale).remove();
        session.save();
      }
    }
;
    double t=test.run();
    executionTimes.add(t);
    LOG.info("Removing {} node took {} ns/node",scale,t);
  }
  boolean knownIssue=fixture.getClass() == DocumentMongoFixture.class;
  assertOnLgn("large remove",scales,executionTimes,knownIssue);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void slowListener() throws RepositoryException, ExecutionException, InterruptedException {
  Node n=session.getRootNode().addNode("slow-events","oak:Unstructured");
  final DelayedEventHandling delayedEventHandling=new DelayedEventHandling(n,100,10);
  Future<Void> result=delayedEventHandling.start();
  try {
    ArrayList<Double> executionTimes=Lists.newArrayList();
    for (    int scale : scales) {
      ScalabilityTest test=new ScalabilityTest(scale){
        @Override void run(        int scale) throws InterruptedException {
          delayedEventHandling.waitForNodes(scale);
        }
      }
;
      double t=test.run();
      executionTimes.add(t);
      LOG.info("Adding {} nodes took {} ns/node",scale,t);
    }
    boolean knownIssue=fixture.getClass() == DocumentMongoFixture.class;
    assertOnLgn("slow listeners",scales,executionTimes,knownIssue);
  }
  finally {
    delayedEventHandling.stop();
    result.get();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assert copy scales linearly with the number of items copied
 * @throws RepositoryException
 * @throws InterruptedException
 */
@Test public void largeCopy() throws RepositoryException, InterruptedException {
  final Node n=session.getRootNode().addNode("large-copy","oak:Unstructured");
  final ContentGenerator contentGenerator=new ContentGenerator(1000);
  ArrayList<Double> executionTimes=Lists.newArrayList();
  for (  int scale : scales) {
    ScalabilityTest test=new ScalabilityTest(scale){
      @Override void before(      int scale) throws RepositoryException {
        Node s=n.addNode("s" + scale);
        contentGenerator.addNodes(s,scale);
      }
      @Override void run(      int scale) throws RepositoryException {
        session.getWorkspace().copy("/large-copy/s" + scale,"/large-copy/t" + scale);
      }
    }
;
    double t=test.run();
    executionTimes.add(t);
    LOG.info("Copying {} node took {} ns/node",scale,t);
  }
  boolean knownIssue=fixture.getClass() == DocumentMongoFixture.class;
  assertOnLgn("large copy",scales,executionTimes,knownIssue);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assert move scales linearly with the number of items copied
 * @throws RepositoryException
 * @throws InterruptedException
 */
@Test public void largeMove() throws RepositoryException, InterruptedException {
  final Node n=session.getRootNode().addNode("large-move","oak:Unstructured");
  final ContentGenerator contentGenerator=new ContentGenerator(1000);
  ArrayList<Double> executionTimes=Lists.newArrayList();
  for (  int scale : scales) {
    ScalabilityTest test=new ScalabilityTest(scale){
      @Override void before(      int scale) throws RepositoryException {
        Node s=n.addNode("s" + scale);
        contentGenerator.addNodes(s,scale);
      }
      @Override void run(      int scale) throws RepositoryException {
        session.getWorkspace().move("/large-move/s" + scale,"/large-move/t" + scale);
      }
    }
;
    double t=test.run();
    executionTimes.add(t);
    LOG.info("Moving {} node took {} ns/node",scale,t);
  }
  boolean knownIssue=fixture.getClass() == DocumentMongoFixture.class;
  assertOnLgn("large move",scales,executionTimes,knownIssue);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assert processing of pending observation events scales linearly with the
 * number of pending events.
 * @throws RepositoryException
 * @throws InterruptedException
 */
@Test public void largeNumberOfPendingEvents() throws RepositoryException, InterruptedException {
  final Node n=session.getRootNode().addNode("pending-events","oak:Unstructured");
  final ContentGenerator contentGenerator=new ContentGenerator(1000);
  ArrayList<Double> executionTimes=Lists.newArrayList();
  for (  int scale : scales) {
    final Observer observer=new Observer(scale,100);
    try {
      ScalabilityTest test=new ScalabilityTest(scale){
        @Override void before(        int scale) throws RepositoryException {
          contentGenerator.addNodes(n,scale);
        }
        @Override void run(        int scale) throws InterruptedException {
          observer.waitForEvents(scale);
        }
      }
;
      double t=test.run();
      executionTimes.add(t);
      LOG.info("{} pending events took {} ns/event to process",scale,t);
    }
  finally {
      try {
        observer.dispose();
      }
 catch (      Exception ignore) {
      }
    }
  }
  boolean knownIssue=fixture.getClass() == DocumentMongoFixture.class;
  assertOnLgn("large number of pending events",scales,executionTimes,knownIssue);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.NamePathTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSquareBracketsInName() throws RepositoryException {
  List<String> names=ImmutableList.of("jcr:content[1]","content[1]","jcr:conten[t]","conten[t]","jcr:con[]ent","jcr[]:content","con[]ent","jcr:con[t]ent","jc[t]r:content","con[t]ent","jcr:con]ent","jc]r:content","con]ent","jcr:con[ent","jc[r:content","con[ent");
  testNames(names);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVerticalLineInPath() throws Exception {
  List<String> paths=ImmutableList.of("/jcr:con|ent","/jcr:|ontent","/jcr:conten|","/|ontent","/conten|","/con|ent");
  testPaths(paths);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testColonInName() throws RepositoryException {
  List<String> names=ImmutableList.of("jcr:con:ent");
  testNames(names);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWhitespaceInPath() throws Exception {
  List<String> paths=ImmutableList.of("/content ","/ content","/content\t","/\tcontent","/jcr:con\tent","con\tent");
  testPaths(paths);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAsteriskInName() throws RepositoryException {
  List<String> names=ImmutableList.of("jcr:con*ent","jcr:*ontent","jcr:conten*","con*ent","*ontent","conten*");
  testNames(names);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVerticalLineInName() throws Exception {
  List<String> names=ImmutableList.of("jcr:con|ent","jcr:|ontent","jcr:conten|","con|ent","|ontent","conten|");
  testNames(names);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSlashInName() throws RepositoryException {
  List<String> names=ImmutableList.of("/jcr:content","/content","jcr:con/ent","jc/r:content","con/ent");
  testNames(names);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSlashInPath() throws RepositoryException {
  List<String> paths=ImmutableList.of("//jcr:content","//content");
  testPaths(paths);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSpaceInNames() throws RepositoryException {
  Node n=session.getRootNode().addNode("c o n t e n t");
  session.getNode(n.getPath());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSquareBracketsInPath() throws RepositoryException {
  List<String> paths=ImmutableList.of("//jcr:content","/jcr:con]ent","/con]ent");
  testPaths(paths);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testColonInPath() throws RepositoryException {
  List<String> paths=ImmutableList.of("/jcr:con:ent");
  testPaths(paths);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAsteriskInPath() throws RepositoryException {
  List<String> paths=ImmutableList.of("/jcr:con*ent","/jcr:*ontent","/jcr:conten*","/con*ent","/*ontent","/conten*");
  testPaths(paths);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWhitespaceInName() throws Exception {
  List<String> names=ImmutableList.of("jcr:content ","content "," content","jcr:content\t","content\t","\tcontent","con\tent");
  testNames(names);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.OrderableNodesTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void orderSameNode() throws Exception {
  Session session=getAdminSession();
  Node n=session.getRootNode().addNode("test","nt:unstructured");
  Node a=n.addNode("a");
  n.orderBefore("a","a");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void orderableFolder() throws Exception {
  new TestContentLoader().loadTestContent(getAdminSession());
  doTest("test:orderableFolder");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleOrdering() throws RepositoryException {
  doTest("nt:unstructured");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.PackageImportIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImport() throws RepositoryException {
  long start=System.currentTimeMillis();
  long until=start + DURATION;
  long total=0;
  while (System.currentTimeMillis() < until) {
    start=System.currentTimeMillis();
    String cname=String.format("fld-%x",start);
    Node container=testNode.addNode(cname,JcrConstants.NT_FOLDER);
    for (int i=0; i < BATCHSIZE; i++) {
      Node f=container.addNode("f" + i,JcrConstants.NT_FILE);
      if (!NOTREFERENCEABLE) {
        f.addMixin(JcrConstants.MIX_REFERENCEABLE);
      }
      Node c=f.addNode(JcrConstants.JCR_CONTENT,JcrConstants.NT_UNSTRUCTURED);
      c.setProperty("foo","bar");
    }
    testNode.getSession().save();
    long elapsed=System.currentTimeMillis() - start;
    LOG.info("Saved {} nodes ({}) in {}ms ({})",BATCHSIZE,NOTREFERENCEABLE ? "not referenceable" : "referenceable",elapsed,super.fixture);
    total+=BATCHSIZE;
  }
  LOG.info("A total of {} nodes were saved ({}).",total,super.fixture);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.RepositoryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addSmallBinaryProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  InputStream is=new NumberStream(1234);
  Binary bin=getAdminSession().getValueFactory().createBinary(is);
  addProperty(parentNode,"bigBinary",getAdminSession().getValueFactory().createValue(bin));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RepositoryException.class) public void moveToDescendant() throws RepositoryException {
  Session session=getAdminSession();
  Node node=getNode(TEST_PATH);
  Node source=node.addNode("s");
  session.save();
  session.refresh(true);
  session.move(TEST_PATH + "/s",TEST_PATH + "/s/t");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addDateProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"date",getAdminSession().getValueFactory().createValue(Calendar.getInstance()));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addWeakReferenceProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  Node referee=getAdminSession().getNode("/foo");
  referee.addMixin("mix:referenceable");
  getAdminSession().save();
  addProperty(parentNode,"weak reference",getAdminSession().getValueFactory().createValue(referee,true));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addNameProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"name",getAdminSession().getValueFactory().createValue("jcr:something\"",PropertyType.NAME));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=PathNotFoundException.class) public void getPropertyDotDot() throws RepositoryException {
  Node node=getNode("/foo");
  node.getProperty("..");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addLongProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"long",getAdminSession().getValueFactory().createValue(42L));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addDecimalProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"decimal",getAdminSession().getValueFactory().createValue(BigDecimal.valueOf(21)));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addPathProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"path",getAdminSession().getValueFactory().createValue("/jcr:foo/bar\"",PropertyType.PATH));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetDefinitionWithSNS() throws RepositoryException, IOException {
  Session session=getAdminSession();
  Node node=session.getNode("/jcr:system/jcr:nodeTypes/nt:file");
  for (  Node child : getChildNodes(node,"jcr:childNodeDefinition")) {
    NodeDefinition definition=child.getDefinition();
    definition.getDefaultPrimaryType();
    definition.getRequiredPrimaryTypes();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oak962() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode().addNode("root");
  root.addNode("N3");
  root.addNode("N6").addNode("N7");
  session.save();
  session.move("/root/N6/N7","/root/N3/N12");
  root.getNode("N3").getNode("N12").remove();
  root.getNode("N6").remove();
  session.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addURIProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"uri",getAdminSession().getValueFactory().createValue("http://www.day.com/",PropertyType.URI));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ItemExistsException.class) public void testAddNodeDot() throws RepositoryException {
  Node node=getNode("/foo");
  node.addNode("..");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addNodeWithNodeType() throws RepositoryException {
  Session session=getAdminSession();
  Node node=getNode(TEST_PATH);
  node.addNode("new","nt:folder");
  session.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addReferenceProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  Node referee=getAdminSession().getNode("/foo");
  referee.addMixin("mix:referenceable");
  getAdminSession().save();
  addProperty(parentNode,"reference",getAdminSession().getValueFactory().createValue(referee));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addAlienBinaryProperty() throws RepositoryException, IOException {
  Session session=getAdminSession();
  QValue qValue=QValueFactoryImpl.getInstance().create("binaryValue".getBytes());
  Value value=new QValueValue(qValue,new DefaultNamePathResolver(session));
  getNode(TEST_PATH).setProperty("binary",value);
  session.save();
  Value valueAgain=getNode(TEST_PATH).getProperty("binary").getValue();
  assertEqualStream(value.getBinary().getStream(),valueAgain.getBinary().getStream());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addBooleanProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"boolean",getAdminSession().getValueFactory().createValue(true));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NoSuchWorkspaceException.class) public void loginInvalidWorkspace() throws RepositoryException {
  Repository repository=getRepository();
  repository.login(new GuestCredentials(),"invalid");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=PathNotFoundException.class) public void getPropertyDot() throws RepositoryException {
  Node node=getNode("/foo");
  node.getProperty(".");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RepositoryException.class) public void getNodeAbsolutePath() throws RepositoryException {
  Node root=getNode("/");
  root.getNode("/foo");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addDoubleProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"double",getAdminSession().getValueFactory().createValue(42.2D));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void manyTransientChanges() throws RepositoryException {
  Session session=getAdminSession();
  Node test=session.getRootNode().getNode(TEST_NODE);
  Node foo=test.addNode("foo");
  session.save();
  test.setProperty("p","value");
  for (int i=0; i < 76; i++) {
    test.addNode("n" + i);
  }
  Node t=foo.addNode("test");
  t.setProperty("prop","value");
  session.getNode(TEST_PATH + "/foo/test").setProperty("prop","value");
  session.save();
  session.logout();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addBigBinaryProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  InputStream is=new NumberStream(123456);
  Binary bin=getAdminSession().getValueFactory().createBinary(is);
  addProperty(parentNode,"bigBinary",getAdminSession().getValueFactory().createValue(bin));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=PathNotFoundException.class) public void getNonExistingNode() throws RepositoryException {
  getNode("/qoo");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addBinaryProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  InputStream is=new ByteArrayInputStream("foo\"".getBytes());
  Binary bin=getAdminSession().getValueFactory().createBinary(is);
  addProperty(parentNode,"binary",getAdminSession().getValueFactory().createValue(bin));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addStringProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"string",getAdminSession().getValueFactory().createValue("string value"));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ItemExistsException.class) public void testAddNodeDotDot() throws RepositoryException {
  Node node=getNode("/foo");
  node.addNode(".");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.cluster.FailoverTest </h4><pre class="type-17 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unused") public void test() throws Exception {
  if (s1 == null) {
    return;
  }
  if (s1.getRootNode().hasNode("test")) {
    s1.getRootNode().getNode("test").remove();
  }
  for (int i=0; i < 100; i++) {
    String nodeName="test" + i;
    System.out.println("testing with " + nodeName);
    s1.getRootNode().addNode(nodeName);
    s1.save();
    for (    int x : seconds(5)) {
      s2.refresh(false);
      if (s2.getRootNode().hasNode(nodeName)) {
        break;
      }
    }
    s2.getRootNode().getNode(nodeName).remove();
    s2.save();
    for (    int x : seconds(5)) {
      s1.refresh(false);
      if (!s1.getRootNode().hasNode(nodeName)) {
        break;
      }
    }
    s1.getRootNode().addNode(nodeName);
    s1.save();
    for (    int x : seconds(5)) {
      s2.refresh(false);
      if (s2.getRootNode().hasNode(nodeName)) {
        break;
      }
    }
    s2.getRootNode().getNode(nodeName).remove();
    s2.save();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.cluster.SimpleTestIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("unused") @Test public void test() throws Exception {
  if (s1 == null) {
    return;
  }
  if (s1.getRootNode().hasNode("test")) {
    s1.getRootNode().getNode("test").remove();
  }
  s1.getRootNode().addNode("test");
  s1.save();
  for (  int x : seconds(5)) {
    s2.refresh(false);
    if (s2.getRootNode().hasNode("test")) {
      break;
    }
  }
  s2.getRootNode().getNode("test").remove();
  s2.save();
  for (  int x : seconds(5)) {
    s1.refresh(false);
    if (!s1.getRootNode().hasNode("test")) {
      break;
    }
  }
  s1.getRootNode().addNode("test");
  s1.save();
  for (  int x : seconds(5)) {
    s2.refresh(false);
    if (s2.getRootNode().hasNode("test")) {
      break;
    }
  }
  s2.getRootNode().getNode("test").remove();
  s2.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.nodetype.NodeDefinitionTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetRequiredPrimaryTypes2() throws RepositoryException {
  for (  String path : paths) {
    Node n=superuser.getNode(path);
    for (    NodeDefinition nd : getAggregatedNodeDefinitions(n)) {
      nd.getRequiredPrimaryTypes();
    }
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetRequiredPrimaryTypes() throws RepositoryException {
  for (  String path : paths) {
    Node n=superuser.getNode(path);
    NodeDefinition def=n.getDefinition();
    def.getRequiredPrimaryTypes();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.nodetype.NodeTypeTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void trivialUpdates() throws Exception {
  String[] types=new String[]{"trivial1","trivial2"};
  ArrayList<NodeTypeTemplate> ntt=new ArrayList<NodeTypeTemplate>();
  Session session=getAdminSession();
  NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
  for (  String t : types) {
    NodeTypeTemplate nt=manager.createNodeTypeTemplate();
    nt.setName(t);
    ntt.add(nt);
  }
  manager.registerNodeTypes(ntt.toArray(new NodeTypeTemplate[0]),false);
  ntt=new ArrayList<NodeTypeTemplate>();
  for (  String t : types) {
    NodeTypeDefinition ntd=manager.getNodeType(t);
    PropertyDefinitionTemplate opt=manager.createPropertyDefinitionTemplate();
    opt.setMandatory(false);
    opt.setName("optional");
    opt.setRequiredType(PropertyType.STRING);
    PropertyDefinitionTemplate opts=manager.createPropertyDefinitionTemplate();
    opts.setMandatory(false);
    opts.setMultiple(true);
    opts.setName("optionals");
    opts.setRequiredType(PropertyType.STRING);
    NodeTypeTemplate nt=manager.createNodeTypeTemplate(ntd);
    List pdt=nt.getPropertyDefinitionTemplates();
    pdt.add(opt);
    pdt.add(opts);
    ntt.add(nt);
  }
  manager.registerNodeTypes(ntt.toArray(new NodeTypeTemplate[0]),true);
  ntt=new ArrayList<NodeTypeTemplate>();
  for (  String t : types) {
    NodeTypeDefinition ntd=manager.getNodeType(t);
    PropertyDefinitionTemplate opt=manager.createPropertyDefinitionTemplate();
    opt.setMandatory("trivial2".equals(t));
    opt.setName("optional");
    opt.setRequiredType(PropertyType.STRING);
    PropertyDefinitionTemplate opts=manager.createPropertyDefinitionTemplate();
    opts.setMandatory("trivial2".equals(t));
    opts.setMultiple(true);
    opts.setName("optionals");
    opts.setRequiredType(PropertyType.STRING);
    NodeTypeTemplate nt=manager.createNodeTypeTemplate(ntd);
    List pdt=nt.getPropertyDefinitionTemplates();
    pdt.add(opt);
    pdt.add(opts);
    ntt.add(nt);
  }
  manager.registerNodeTypes(ntt.toArray(new NodeTypeTemplate[0]),true);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void illegalAddNodeWithProps() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  ValueFactory vf=session.getValueFactory();
  Node n=root.addNode("q1","nt:query");
  n.setProperty("jcr:statement",vf.createValue("statement"));
  n.setProperty("jcr:language",vf.createValue("language"));
  Node n2=n.addNode("q2","nt:query");
  n2.setProperty("jcr:statement",vf.createValue("statement"));
  n2.setProperty("jcr:language",vf.createValue("language"));
  session.save();
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Add a node to a node type that does not accept child nodes
 * See OAK-479
 */
@Test(expected=ConstraintViolationException.class) public void illegalAddNode() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  root.addNode("q1","nt:query").addNode("q2","nt:query");
  session.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.MultiSessionQueryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConcurrent() throws Exception {
  final Exception[] ex=new Exception[1];
  Thread[] threads=new Thread[THREAD_COUNT];
  for (int i=0; i < THREAD_COUNT; i++) {
    final Session s=createAdminSession();
    final String node="node" + i;
    Thread t=new Thread(){
      @Override public void run(){
        try {
          doTest(s,node);
        }
 catch (        Exception e) {
          ex[0]=e;
        }
      }
    }
;
    threads[i]=t;
  }
  for (  Thread t : threads) {
    t.start();
  }
  Thread.sleep(100);
  for (  Thread t : threads) {
    t.join();
  }
  if (ex[0] != null) {
    throw ex[0];
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.random.RandomizedReadTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReadAcl() throws Exception {
  for (int j=0; j < 1; j++) {
    Random r=new Random(j);
    int operations=1000;
    int depthToApply;
    int index;
    boolean allow;
    int principalIndex;
    for (int i=0; i < operations; i++) {
      allow=r.nextBoolean();
      depthToApply=r.nextInt(depth);
      principalIndex=r.nextInt(ids.length);
      if (depthToApply > 0) {
        index=r.nextInt(depthToApply + 1);
        String path=getPath(depthToApply,index);
        setupPermissions(principalIndex,path,allow,PrivilegeConstants.JCR_READ);
        check();
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.AbstractAutoCreatedPropertyTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReplaceNode4() throws Exception {
  allow(path,privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_REMOVE_NODE,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_NODE_TYPE_MANAGEMENT}));
  testSession.removeItem(targetNode.getPath());
  Node newNode=testSession.getNode(childNPath).addNode(targetNode.getName(),targetNode.getPrimaryNodeType().getName());
  newNode.addMixin(getMixinName());
  testSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.AbstractMoveTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMove3() throws Exception {
  allow(path,privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_NODE_TYPE_MANAGEMENT}));
  allow(childNPath,privilegesFromName(Privilege.JCR_REMOVE_NODE));
  move(childNPath,destPath);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDifferentDestParent() throws Exception {
  allow(path,privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES));
  allow(siblingPath,privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_NODE_TYPE_MANAGEMENT}));
  allow(childNPath,privilegesFromName(Privilege.JCR_REMOVE_NODE));
  move(childNPath,siblingDestPath);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.AccessControlManagementTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclReferingToRemovedPrincipal() throws Exception {
  JackrabbitAccessControlList acl=allow(path,repWritePrivileges);
  String acPath=acl.getPath();
  testUser.remove();
  superuser.save();
  testUser=null;
  Session s=getHelper().getSuperuserSession();
  try {
    AccessControlManager acMgr=getAccessControlManager(s);
    acMgr.getPolicies(acPath);
  }
  finally {
    s.logout();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test if a new applicable policy can be applied within a
 * sub-tree where AC-modification is allowed.
 * @see <a href="https://issues.apache.org/jira/browse/JCR-2869">JCR-2869</a>
 */
@Test public void testSetNewPolicy() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{REP_WRITE,Privilege.JCR_READ_ACCESS_CONTROL,Privilege.JCR_MODIFY_ACCESS_CONTROL});
  allow(path,privileges);
  AccessControlPolicyIterator it=testAcMgr.getApplicablePolicies(childNPath);
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    testAcMgr.setPolicy(childNPath,plc);
    testSession.save();
    testAcMgr.removePolicy(childNPath,plc);
    testSession.save();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.CopyTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2810">OAK-2810</a>
 */
@Test public void testCopyFromProtectedParentSource() throws Exception {
  allow(childNPath,privilegesFromName(PrivilegeConstants.JCR_ALL));
  Node sourceNode=null;
  NodeIterator nodeIterator=superuser.getNode(childNPath).getNode(AccessControlConstants.REP_POLICY).getNodes();
  while (nodeIterator.hasNext()) {
    Node n=nodeIterator.nextNode();
    if (n.getDefinition().isProtected()) {
      sourceNode=n;
      break;
    }
  }
  if (sourceNode == null || !sourceNode.getParent().getDefinition().isProtected()) {
    throw new NotExecutableException("No protected parent found");
  }
  try {
    superuser.getWorkspace().copy(sourceNode.getPath(),destPath);
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ImportBesteffortTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddEntry() throws RepositoryException {
  Principal unknown=new Principal(){
    @Override public String getName(){
      return "anotherUnknown";
    }
  }
;
  AccessControlUtils.addAccessControlEntry(adminSession,target.getPath(),unknown,new String[]{Privilege.JCR_READ},true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.JackrabbitAccessControlListTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-1348">OAK-1348</a>
 */
@Test public void testAddEntryWithCustomPrincipalImpl() throws Exception {
  Principal custom=new Principal(){
    public String getName(){
      return testPrincipal.getName();
    }
  }
;
  acl.addEntry(testPrincipal,testPrivileges,true);
  acl.addEntry(custom,testPrivileges,false);
  acMgr.setPolicy(acl.getPath(),acl);
  superuser.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.MiscTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2024">OAK-2024</a>
 */
@Test public void testTraverseIndex() throws Exception {
  Session session=getAdminSession();
  AccessControlUtils.denyAllToEveryone(session,"/oak:index");
  session.save();
  Node index=session.getNode("/oak:index");
  traverse(index);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.MultipleMoveTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("Known Limitation of OAK-710") @Test public void testMoveDestParent2() throws Exception {
  allow(testRootNode.getPath(),privilegesFromNames(new String[]{Privilege.JCR_REMOVE_NODE,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_NODE_TYPE_MANAGEMENT}));
  move(childNPath,siblingDestPath);
  move(siblingPath,path + "/parentMove");
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveSubTreeBack2() throws Exception {
  allow(testRootNode.getPath(),privilegesFromNames(new String[]{Privilege.JCR_REMOVE_NODE,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_NODE_TYPE_MANAGEMENT}));
  move(childNPath,siblingDestPath);
  move(siblingDestPath + '/' + nodeName3,path + "/subtreeBack");
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("Known Limitation of OAK-710") @Test public void testMoveDestParent4() throws Exception {
  allow(testRootNode.getPath(),privilegesFromNames(new String[]{Privilege.JCR_REMOVE_NODE,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_NODE_TYPE_MANAGEMENT}));
  move(childNPath,siblingDestPath);
  move(siblingPath,childNPath);
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("Known Limitation of OAK-710") @Test public void testMoveSubTreeBack4() throws Exception {
  allow(testRootNode.getPath(),privilegesFromNames(new String[]{Privilege.JCR_REMOVE_NODE,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_NODE_TYPE_MANAGEMENT}));
  move(childNPath,siblingDestPath);
  move(siblingDestPath + '/' + nodeName3,childNPath);
  testSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.NamespaceManagementTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testModifyNamespaceWithPrivilege() throws Exception {
  modify(null,PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT.toString(),true);
  assertHasRepoPrivilege(PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT,true);
  modify(null,PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT.toString(),false);
  assertHasRepoPrivilege(PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRegisterNamespaceWithPrivilege() throws Exception {
  modify(null,PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT.toString(),true);
  try {
    Workspace testWsp=testSession.getWorkspace();
    testWsp.getNamespaceRegistry().registerNamespace(getNewNamespacePrefix(testWsp),getNewNamespaceURI(testWsp));
  }
  finally {
    modify(null,PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT.toString(),false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.NodeTypeDefinitionManagementTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRegisterNodeTypeWithPrivilege() throws Exception {
  modify(null,JCR_NODE_TYPE_DEFINITION_MANAGEMENT.toString(),true);
  try {
    Workspace testWsp=testSession.getWorkspace();
    NodeTypeManager ntm=testWsp.getNodeTypeManager();
    NodeTypeTemplate ntd=ntm.createNodeTypeTemplate();
    ntd.setName("testRegisterNodeTypeWithPrivilege");
    ntd.setMixin(true);
    ntm.registerNodeType(ntd,true);
    NodeTypeTemplate[] ntds=new NodeTypeTemplate[2];
    ntds[0]=ntd;
    ntds[1]=ntm.createNodeTypeTemplate();
    ntds[1].setName("anotherRegisterNodeTypeWithPrivilege");
    ntds[1].setDeclaredSuperTypeNames(new String[]{"nt:file"});
    ntm.registerNodeTypes(ntds,true);
  }
  finally {
    modify(null,JCR_NODE_TYPE_DEFINITION_MANAGEMENT.toString(),false);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testModifyNodeTypeWithPrivilege() throws Exception {
  modify(null,JCR_NODE_TYPE_DEFINITION_MANAGEMENT.toString(),true);
  assertHasRepoPrivilege(JCR_NODE_TYPE_DEFINITION_MANAGEMENT,true);
  modify(null,JCR_NODE_TYPE_DEFINITION_MANAGEMENT.toString(),false);
  assertHasRepoPrivilege(JCR_NODE_TYPE_DEFINITION_MANAGEMENT,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.NodeTypeManagementTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveMixin() throws Exception {
  ((Node)superuser.getItem(childNode.getPath())).addMixin(mixinName);
  superuser.save();
  testSession.refresh(false);
  modify(childNode.getPath(),Privilege.JCR_NODE_TYPE_MANAGEMENT,true);
  childNode.removeMixin(mixinName);
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetPrimaryType() throws Exception {
  Node child=(Node)superuser.getItem(childNode.getPath());
  String ntName=child.getPrimaryNodeType().getName();
  String changedNtName="nt:folder";
  child.setPrimaryType(changedNtName);
  testSession.save();
  modify(childNode.getPath(),Privilege.JCR_NODE_TYPE_MANAGEMENT,true);
  childNode.setPrimaryType(ntName);
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddMixin() throws Exception {
  modify(childNode.getPath(),Privilege.JCR_NODE_TYPE_MANAGEMENT,true);
  childNode.addMixin(mixinName);
  testSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.PrivilegeManagementTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRegisterPrivilegeWithPrivilege() throws Exception {
  modify(null,PrivilegeConstants.REP_PRIVILEGE_MANAGEMENT,true);
  try {
    Workspace testWsp=testSession.getWorkspace();
    ((JackrabbitWorkspace)testWsp).getPrivilegeManager().registerPrivilege(getNewPrivilegeName(testWsp),false,new String[0]);
  }
  finally {
    modify(null,PrivilegeConstants.REP_PRIVILEGE_MANAGEMENT,false);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testModifyPrivilegeMgtPrivilege() throws Exception {
  modify(null,PrivilegeConstants.REP_PRIVILEGE_MANAGEMENT,true);
  assertHasRepoPrivilege(PrivilegeConstants.REP_PRIVILEGE_MANAGEMENT,true);
  modify(null,PrivilegeConstants.REP_PRIVILEGE_MANAGEMENT,false);
  assertHasRepoPrivilege(PrivilegeConstants.REP_PRIVILEGE_MANAGEMENT,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-878">OAK-878 :
     * IllegalArgumentException while adding/removing permission to user/group</a>
 */
@Test public void testImplicitReorder() throws Exception {
  allow(path,testUser.getPrincipal(),readPrivileges);
  assertEntry(0,true);
  allow(path,getTestGroup().getPrincipal(),readPrivileges);
  assertEntry(0,true);
  deny(path,testUser.getPrincipal(),readPrivileges);
  assertEntry(1,false);
  deny(path,getTestGroup().getPrincipal(),readPrivileges);
  assertEntry(0,false);
  allow(path,testUser.getPrincipal(),readPrivileges);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetItem() throws Exception {
  deny(path,readPrivileges);
  allow(childNPath,readPrivileges);
  testSession.getItem(childNPath);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNonExistingItem() throws Exception {
  String rootPath=testSession.getRootNode().getPath();
  assertReadOnly(rootPath);
  testSession.checkPermission(rootPath + "nonExistingItem",Session.ACTION_READ);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadVersionContentTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionHistoryGetIdentifier() throws Exception {
  VersionHistory testVh=testSession.getNode(versionablePath).getVersionHistory();
  testVh.getIdentifier();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionHistoryGetVersionableIdentifier() throws Exception {
  VersionHistory testVh=testSession.getNode(versionablePath).getVersionHistory();
  testVh.getVersionableIdentifier();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetBaseVersion() throws Exception {
  Version base=testSession.getNode(versionablePath).getBaseVersion();
  Version base2=testSession.getWorkspace().getVersionManager().getBaseVersion(versionablePath);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetAllLinearVersions() throws Exception {
  Node testNode=testSession.getNode(versionablePath);
  VersionHistory vh=testNode.getVersionHistory();
  VersionIterator versionIterator=vh.getAllLinearVersions();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetVersionHistory() throws Exception {
  Node testNode=testSession.getNode(versionablePath);
  VersionHistory vh=testNode.getVersionHistory();
  VersionHistory vh2=testSession.getWorkspace().getVersionManager().getVersionHistory(versionablePath);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetAllVersions() throws Exception {
  Node testNode=testSession.getNode(versionablePath);
  VersionHistory vh=testNode.getVersionHistory();
  VersionIterator versionIterator=vh.getAllVersions();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionHistoryGetUUID() throws Exception {
  VersionHistory testVh=testSession.getNode(versionablePath).getVersionHistory();
  testVh.getUUID();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionHistoryGetVersionableUUID() throws Exception {
  VersionHistory testVh=testSession.getNode(versionablePath).getVersionHistory();
  testVh.getVersionableUUID();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.RenameTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since OAK 1.0 : Renaming a node requires the same permission as moving it
 * around. This behavior differs from Jackrabbit 2.x where renaming just
 * required the ability to change the child collection of the parent.
 */
@Test public void testRename3() throws Exception {
  allow(path,privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_NODE_TYPE_MANAGEMENT,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_REMOVE_NODE}));
  Node child=testSession.getNode(childNPath);
  ((JackrabbitNode)child).rename("rename");
  testSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.SessionMoveTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveAndAddAtSourceParent3() throws Exception {
  allow(path,privilegesFromNames(new String[]{Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_ADD_CHILD_NODES}));
  allow(childNPath,privilegesFromName(Privilege.JCR_REMOVE_NODE));
  allow(siblingPath,privilegesFromNames(new String[]{PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_NODE_TYPE_MANAGEMENT}));
  testSession.move(childNPath,siblingDestPath);
  Node sourceParent=testSession.getNode(path);
  sourceParent.addNode(nodeName4);
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveAndAddPropertyAtSource2() throws Exception {
  setupMovePermissions();
  allow(childNPath,privilegesFromName(PrivilegeConstants.REP_ADD_PROPERTIES));
  testSession.move(nodePath3,siblingDestPath);
  Node n=testSession.getNode(childNPath);
  Property p=n.setProperty("newProp","val");
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Moving and removing the moved node at destination should be treated like
 * a simple removal at the original position.
 */
@Test public void testMoveAndRemoveDestination() throws Exception {
  allow(path,privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES));
  allow(childNPath,privilegesFromName(Privilege.JCR_REMOVE_NODE));
  testSession.move(nodePath3,siblingDestPath);
  Node destNode=testSession.getNode(siblingDestPath);
  destNode.remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveAndModifyProperty3() throws Exception {
  setupMovePermissions();
  allow(childNPath,privilegesFromName(PrivilegeConstants.REP_ALTER_PROPERTIES));
  testSession.move(nodePath3,siblingDestPath);
  Node destNode=testSession.getNode(siblingDestPath);
  destNode.setProperty("movedProp","modified");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveAndRemoveProperty2() throws Exception {
  allow(path,privilegesFromNames(new String[]{Privilege.JCR_REMOVE_NODE,Privilege.JCR_REMOVE_CHILD_NODES,PrivilegeConstants.REP_REMOVE_PROPERTIES}));
  allow(siblingPath,privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_NODE_TYPE_MANAGEMENT}));
  testSession.move(nodePath3,siblingDestPath);
  Node destNode=testSession.getNode(siblingDestPath);
  destNode.getProperty("movedProp").remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveAndAddSubTree2() throws Exception {
  allow(path,privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES));
  allow(childNPath,privilegesFromName(Privilege.JCR_REMOVE_NODE));
  allow(siblingPath,privilegesFromNames(new String[]{PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_NODE_TYPE_MANAGEMENT}));
  allow(nodePath3,privilegesFromName(Privilege.JCR_ADD_CHILD_NODES));
  testSession.move(childNPath,siblingDestPath);
  Node moved=testSession.getNode(siblingDestPath);
  Node child=moved.getNode(nodeName3);
  child.addNode(nodeName4);
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveAndRemoveSubTree3() throws Exception {
  allow(path,privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES));
  allow(childNPath,privilegesFromName(Privilege.JCR_REMOVE_NODE));
  allow(siblingPath,privilegesFromNames(new String[]{PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_NODE_TYPE_MANAGEMENT}));
  testSession.move(childNPath,siblingDestPath);
  Node moved=testSession.getNode(siblingDestPath);
  Node child=moved.getNode(nodeName3);
  child.remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveAndAddSubTree3() throws Exception {
  allow(path,privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES));
  allow(childNPath,privilegesFromNames(new String[]{Privilege.JCR_REMOVE_NODE,Privilege.JCR_ADD_CHILD_NODES}));
  allow(siblingPath,privilegesFromNames(new String[]{PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_NODE_TYPE_MANAGEMENT}));
  testSession.move(childNPath,siblingDestPath);
  Node moved=testSession.getNode(siblingDestPath);
  Node child=moved.getNode(nodeName3);
  child.addNode(nodeName4);
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveAndAddProperty2() throws Exception {
  setupMovePermissions();
  allow(childNPath,privilegesFromName(PrivilegeConstants.REP_ADD_PROPERTIES));
  testSession.move(nodePath3,siblingDestPath);
  Node destNode=testSession.getNode(siblingDestPath);
  Property p=destNode.setProperty("newProp","val");
  testSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.UserManagementTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateWithIntermediateReadDeny() throws Exception {
  String path=UserConstants.DEFAULT_GROUP_PATH + "/a/b/c";
  Node groupRoot=JcrUtils.getOrCreateByPath(path,UserConstants.NT_REP_AUTHORIZABLE_FOLDER,superuser);
  superuser.save();
  try {
    deny(UserConstants.DEFAULT_GROUP_PATH,privilegesFromName(Privilege.JCR_READ));
    Privilege[] privs=privilegesFromNames(new String[]{Privilege.JCR_READ,PrivilegeConstants.REP_USER_MANAGEMENT,PrivilegeConstants.REP_WRITE});
    allow(path,privs);
    Group gr=getUserManager(testSession).createGroup(groupId,new PrincipalImpl(groupId),"a/b/c");
    testSession.save();
  }
  finally {
    superuser.refresh(false);
    superuser.getNode(UserConstants.DEFAULT_GROUP_PATH + "/a").remove();
    JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,UserConstants.DEFAULT_GROUP_PATH);
    if (acl != null) {
      acMgr.removePolicy(UserConstants.DEFAULT_GROUP_PATH,acl);
    }
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateGroup2() throws Exception {
  UserManager testUserMgr=getUserManager(testSession);
  Privilege[] privs=privilegesFromNames(new String[]{PrivilegeConstants.REP_USER_MANAGEMENT,PrivilegeConstants.REP_WRITE});
  allow("/",privs);
  Group gr=testUserMgr.createGroup(groupId);
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChangeUserProperties() throws Exception {
  createUser(userId);
  modify("/",PrivilegeConstants.JCR_MODIFY_PROPERTIES,true);
  UserManager testUserMgr=getUserManager(testSession);
  Authorizable a=testUserMgr.getAuthorizable(userId);
  a.setProperty("someProp",testSession.getValueFactory().createValue("value"));
  testSession.save();
  a.setProperty("someProperty",testSession.getValueFactory().createValue("modified"));
  testSession.save();
  a.removeProperty("someProperty");
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateGroup() throws Exception {
  UserManager testUserMgr=getUserManager(testSession);
  modify("/",PrivilegeConstants.REP_USER_MANAGEMENT,true);
  Group gr=testUserMgr.createGroup(groupId);
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDisableUser() throws Exception {
  createUser(userId);
  modify("/",PrivilegeConstants.REP_USER_MANAGEMENT,true);
  UserManager testUserMgr=getUserManager(testSession);
  User user=(User)testUserMgr.getAuthorizable(userId);
  user.disable("disabled!");
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChangePassword() throws Exception {
  createUser(userId);
  modify("/",PrivilegeConstants.REP_USER_MANAGEMENT,true);
  UserManager testUserMgr=getUserManager(testSession);
  User user=(User)testUserMgr.getAuthorizable(userId);
  user.changePassword("pw2");
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateUser2() throws Exception {
  UserManager testUserMgr=getUserManager(testSession);
  Privilege[] privs=privilegesFromNames(new String[]{PrivilegeConstants.REP_USER_MANAGEMENT,PrivilegeConstants.REP_WRITE});
  allow("/",privs);
  testUserMgr.createUser(userId,"pw");
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveUser() throws Exception {
  createUser(userId);
  modify("/",PrivilegeConstants.REP_USER_MANAGEMENT,true);
  UserManager testUserMgr=getUserManager(testSession);
  Authorizable a=testUserMgr.getAuthorizable(userId);
  a.remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateUser() throws Exception {
  UserManager testUserMgr=getUserManager(testSession);
  modify("/",PrivilegeConstants.REP_USER_MANAGEMENT,true);
  testUserMgr.createUser(userId,"pw");
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateWithIntermediateReadDeny2() throws Exception {
  String path=UserConstants.DEFAULT_GROUP_PATH + "/a";
  JcrUtils.getOrCreateByPath(path,UserConstants.NT_REP_AUTHORIZABLE_FOLDER,superuser);
  superuser.save();
  try {
    deny(UserConstants.DEFAULT_GROUP_PATH,privilegesFromName(Privilege.JCR_READ));
    Privilege[] privs=privilegesFromNames(new String[]{Privilege.JCR_READ,PrivilegeConstants.REP_USER_MANAGEMENT,PrivilegeConstants.REP_WRITE});
    allow(path,privs);
    Group gr=getUserManager(testSession).createGroup(groupId,new PrincipalImpl(groupId),"a/b/c");
    testSession.save();
  }
  finally {
    superuser.refresh(false);
    superuser.getNode(UserConstants.DEFAULT_GROUP_PATH + "/a").remove();
    JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,UserConstants.DEFAULT_GROUP_PATH);
    if (acl != null) {
      acMgr.removePolicy(UserConstants.DEFAULT_GROUP_PATH,acl);
    }
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveUser2() throws Exception {
  createUser(userId);
  Privilege[] privs=privilegesFromNames(new String[]{PrivilegeConstants.REP_USER_MANAGEMENT,PrivilegeConstants.REP_WRITE});
  allow("/",privs);
  UserManager testUserMgr=getUserManager(testSession);
  Authorizable a=testUserMgr.getAuthorizable(userId);
  a.remove();
  testSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.VersionManagementTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since oak
 */
@Test public void testAddVersionLabel() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  allow(n.getPath(),versionPrivileges);
  Node testNode=testSession.getNode(n.getPath());
  Version v=testNode.checkin();
  testNode.checkout();
  Version v2=testNode.checkin();
  testNode.checkout();
  VersionHistory history=testNode.getVersionHistory();
  history.addVersionLabel(v.getName(),"testLabel",false);
  history.addVersionLabel(v2.getName(),"testLabel",true);
  VersionManager vMgr=testSession.getWorkspace().getVersionManager();
  history=vMgr.getVersionHistory(testNode.getPath());
  history.addVersionLabel(v.getName(),"testLabel",true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddNewVersionableNode() throws Exception {
  modify(path,REP_WRITE,true);
  modify(path,Privilege.JCR_VERSION_MANAGEMENT,true);
  Node testNode=testSession.getNode(path);
  Node newNode=testNode.addNode("versionable");
  newNode.addMixin("mix:versionable");
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since oak (DIFF: jr required jcr:versionManagement privilege on the version store)
 */
@Test public void testRemoveVersion() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  Node trn=testSession.getNode(path);
  modify(trn.getPath(),Privilege.JCR_VERSION_MANAGEMENT,true);
  Node testNode=trn.getNode(n.getName());
  Version v=testNode.checkin();
  testNode.checkout();
  testNode.checkin();
  testNode.getVersionHistory().removeVersion(v.getName());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddMixVersionable2() throws Exception {
  modify(path,REP_WRITE,true);
  modify(path,Privilege.JCR_NODE_TYPE_MANAGEMENT,true);
  modify(path,Privilege.JCR_VERSION_MANAGEMENT,true);
  Node n=createVersionableNode(testSession.getNode(path));
  n.checkin();
  n.checkout();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCheckInCheckoutLocked() throws Exception {
  LockManager lockManager=superuser.getWorkspace().getLockManager();
  VersionManager versionManager=superuser.getWorkspace().getVersionManager();
  Node n=createVersionableNode(superuser.getNode(path));
  n.addMixin(mixLockable);
  superuser.save();
  String nodePath=n.getPath();
  lockManager.lock(nodePath,true,false,0,superuser.getUserID());
  versionManager.checkin(nodePath);
  versionManager.checkout(nodePath);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since oak
 */
@Test public void testRemoveVersionLabel() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  allow(n.getPath(),versionPrivileges);
  Node testNode=testSession.getNode(n.getPath());
  Version v=testNode.checkin();
  testNode.checkout();
  Version v2=testNode.checkin();
  testNode.checkout();
  VersionHistory history=testNode.getVersionHistory();
  history.addVersionLabel(v.getName(),"testLabel",false);
  history.addVersionLabel(v2.getName(),"testLabel",true);
  VersionManager vMgr=testSession.getWorkspace().getVersionManager();
  history=vMgr.getVersionHistory(testNode.getPath());
  history.removeVersionLabel("testLabel");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.WritePropertyTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveProperty2() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{"rep:removeProperties"});
  allow(path,privileges);
  superuser.getNode(path).setProperty("newProperty","value");
  superuser.save();
  testSession.refresh(false);
  testSession.getNode(path).setProperty("newProperty",(String)null);
  testSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.WriteTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-3517">OAK-3517</a>
 */
@Test public void testAddNodeWithRelativePath() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_NODE_TYPE_MANAGEMENT});
  allow(childNPath,EveryonePrincipal.getInstance(),privileges);
  Node testNode=testSession.getNode(path);
  String relPath=testSession.getNode(childNPath).getName() + "/newChild";
  testNode.addNode(relPath,JcrConstants.NT_UNSTRUCTURED);
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReorder3() throws Exception {
  Node n=testSession.getNode(path);
  allow(path,privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_NODE_TYPE_MANAGEMENT}));
  n.orderBefore(Text.getName(childNPath2),Text.getName(childNPath));
  testSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteOnParentWithNoReadePriv() throws Exception {
  Node a=superuser.getNode(path).addNode("a");
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(a.getPath(),testUser.getPrincipal(),readPrivileges);
  superuser.save();
  testSession.getNode(path).addNode("a");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/JCR-3131">JCR-3131</a>
 */
@Test public void testEmptySaveNoRootAccess() throws Exception {
  testSession.save();
  try {
    JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/");
    acl.addEntry(testUser.getPrincipal(),readPrivileges,false);
    acMgr.setPolicy(acl.getPath(),acl);
    superuser.save();
    testSession.save();
  }
  finally {
    JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/");
    acl.addEntry(testUser.getPrincipal(),readPrivileges,true);
    acMgr.setPolicy(acl.getPath(),acl);
    superuser.save();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.principal.PrincipalManagerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGroupMembership(){
  testMembership(PrincipalManager.SEARCH_TYPE_NOT_GROUP);
  testMembership(PrincipalManager.SEARCH_TYPE_GROUP);
  testMembership(PrincipalManager.SEARCH_TYPE_ALL);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.privilege.PrivilegeManagerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetPrivilege() throws RepositoryException {
  Set<String> aggregatedPrivilegeNames=ImmutableSet.of("jcr:read","jcr:modifyProperties","jcr:write","rep:write","jcr:all");
  for (  Privilege priv : privilegeManager.getRegisteredPrivileges()) {
    String privName=priv.getName();
    boolean isAggregate=aggregatedPrivilegeNames.contains(privName);
    assertPrivilege(priv,privName,isAggregate,false);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetPrivilegesFromInvalidName2() throws RepositoryException {
  String nonExistingPrivilegeName="{http://www.nonexisting.com/1.0}nonexisting";
  try {
    privilegeManager.getPrivilege(nonExistingPrivilegeName);
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.AuthorizablePropertyTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiValuedToSingle() throws Exception {
  UserManager uMgr=getUserManager(superuser);
  try {
    Value v=superuser.getValueFactory().createValue("anyValue");
    Value[] vs=new Value[]{v,v};
    user.setProperty("someProp",vs);
    if (!uMgr.isAutoSave()) {
      superuser.save();
    }
    user.setProperty("someProp",v);
    if (!uMgr.isAutoSave()) {
      superuser.save();
    }
  }
  finally {
    if (user.removeProperty("someProp") && !uMgr.isAutoSave()) {
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleToMultiValued() throws Exception {
  UserManager uMgr=getUserManager(superuser);
  try {
    Value v=superuser.getValueFactory().createValue("anyValue");
    user.setProperty("someProp",v);
    if (!uMgr.isAutoSave()) {
      superuser.save();
    }
    Value[] vs=new Value[]{v,v};
    user.setProperty("someProp",vs);
    if (!uMgr.isAutoSave()) {
      superuser.save();
    }
  }
  finally {
    if (user.removeProperty("someProp") && !uMgr.isAutoSave()) {
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProtectedUserProperties() throws NotExecutableException, RepositoryException {
  Node n=getNode(user,superuser);
  if (n.hasProperty(UserConstants.REP_PASSWORD)) {
    checkProtected(n.getProperty(UserConstants.REP_PASSWORD));
  }
  if (n.hasProperty(UserConstants.REP_PRINCIPAL_NAME)) {
    checkProtected(n.getProperty(UserConstants.REP_PRINCIPAL_NAME));
  }
  if (n.hasProperty(UserConstants.REP_IMPERSONATORS)) {
    checkProtected(n.getProperty(UserConstants.REP_IMPERSONATORS));
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProtectedGroupProperties() throws NotExecutableException, RepositoryException {
  Node n=getNode(group,superuser);
  if (n.hasProperty(UserConstants.REP_PRINCIPAL_NAME)) {
    checkProtected(n.getProperty(UserConstants.REP_PRINCIPAL_NAME));
  }
  if (n.hasProperty(UserConstants.REP_MEMBERS)) {
    checkProtected(n.getProperty(UserConstants.REP_MEMBERS));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.CreateUserTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateUserWithEmptyPassword() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  User user=createUser(p.getName(),"");
  createdUsers.add(user);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveUserToOtherGroup() throws Exception {
  User user1=userMgr.createUser(createUserId(),"p");
  User user2=userMgr.createUser(createUserId(),"p");
  Group grp1=userMgr.createGroup(createGroupId());
  Group grp2=userMgr.createGroup(createGroupId());
  grp1.addMember(user1);
  grp1.addMember(user2);
  superuser.save();
  checkDeclaredMembers(grp1,user1.getID(),user2.getID());
  checkDeclaredMembers(grp2);
  checkDeclaredMemberOf(user1,grp1.getID());
  checkDeclaredMemberOf(user2,grp1.getID());
  grp1.removeMember(user1);
  superuser.save();
  checkDeclaredMembers(grp1,user2.getID());
  checkDeclaredMembers(grp2);
  checkDeclaredMemberOf(user1);
  checkDeclaredMemberOf(user2,grp1.getID());
  grp2.addMember(user1);
  superuser.save();
  checkDeclaredMembers(grp1,user2.getID());
  checkDeclaredMembers(grp2,user1.getID());
  checkDeclaredMemberOf(user1,grp2.getID());
  checkDeclaredMemberOf(user2,grp1.getID());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetMembersAgainstMemberOf() throws NotExecutableException, RepositoryException {
  Iterator<Authorizable> it=group.getMembers();
  while (it.hasNext()) {
    Authorizable auth=it.next();
    assertTrueMemberOfContainsGroup(auth.memberOf(),group);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetDeclaredMembersAgainstDeclaredMemberOf() throws NotExecutableException, RepositoryException {
  Iterator<Authorizable> it=group.getDeclaredMembers();
  while (it.hasNext()) {
    Authorizable auth=it.next();
    assertTrueMemberOfContainsGroup(auth.declaredMemberOf(),group);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.RemappingTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetProperty() throws Exception {
  for (  String relPath : mappedPaths) {
    authorizable.setProperty(relPath,nameValue);
    authorizable.setProperty(relPath,new Value[]{nameValue});
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveProperty() throws Exception {
  for (  String relPath : mappedPaths) {
    authorizable.removeProperty(relPath);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.SystemUserImportTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImportUuidCollisionRemoveExisting() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"r\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>4b43b0ae-e356-34cd-95b9-10189b3dc231</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  getImportSession().save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Same as {@link #testImportUuidCollisionRemoveExisting} with the single
 * difference that the initial import is saved before being overwritten.
 * @throws Exception
 */
@Test public void testImportUuidCollisionRemoveExisting2() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"r\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>4b43b0ae-e356-34cd-95b9-10189b3dc231</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  getImportSession().save();
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  getImportSession().save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportBestEffortTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImportUuidCollisionRemoveExisting() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  getImportSession().save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Same as {@link #testImportUuidCollisionRemoveExisting} with the single
 * difference that the initial import is saved before being overwritten.
 */
@Test public void testImportUuidCollisionRemoveExisting2() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  getImportSession().save();
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  getImportSession().save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Same as {@link #testImportUuidCollisionRemoveExisting} with the single
 * difference that the initial import is saved before being overwritten.
 * @throws Exception
 */
@Test public void testImportUuidCollisionRemoveExisting2() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"r\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>4b43b0ae-e356-34cd-95b9-10189b3dc231</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  s.save();
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  s.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImportUuidCollisionRemoveExisting() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"r\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>4b43b0ae-e356-34cd-95b9-10189b3dc231</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  getImportSession().save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserManagerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testCreateUserWithoutPassword() throws Exception {
  try {
    User u=userMgr.createUser(createUserId(),null);
  }
  finally {
    superuser.refresh(false);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNewUserCanLogin() throws RepositoryException, NotExecutableException {
  String uid=createUserId();
  User u=null;
  Session s=null;
  try {
    u=userMgr.createUser(uid,"pw");
    superuser.save();
    Credentials creds=new SimpleCredentials(uid,"pw".toCharArray());
    s=superuser.getRepository().login(creds);
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
    if (s != null) {
      s.logout();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserQueryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAny() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
    }
  }
);
  assertSameElements(result,authorizables.iterator());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFindInEveryoneGroup() throws RepositoryException {
  Authorizable everyone=userMgr.getAuthorizable(EveryonePrincipal.NAME);
  boolean doRemove=false;
  try {
    if (everyone == null) {
      everyone=userMgr.createGroup(EveryonePrincipal.NAME);
      superuser.save();
      doRemove=true;
    }
    Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
      public <T>void build(      QueryBuilder<T> builder){
        builder.setScope(EveryonePrincipal.NAME,true);
      }
    }
);
    Iterator<Authorizable> members=((Group)everyone).getDeclaredMembers();
    assertSameElements(result,members);
  }
  finally {
    if (doRemove) {
      everyone.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSelector() throws RepositoryException {
  List<Class<? extends Authorizable>> selectors=new ArrayList<Class<? extends Authorizable>>();
  selectors.add(Authorizable.class);
  selectors.add(Group.class);
  selectors.add(User.class);
  for (  final Class<? extends Authorizable> s : selectors) {
    Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
      public <T>void build(      QueryBuilder<T> builder){
        builder.setSelector(s);
      }
    }
);
    if (User.class.isAssignableFrom(s)) {
      assertSameElements(result,users.iterator());
    }
 else     if (Group.class.isAssignableFrom(s)) {
      assertSameElements(result,groups.iterator());
    }
 else {
      assertSameElements(result,authorizables.iterator());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLoginAfterChangePassword2() throws RepositoryException, NotExecutableException {
  try {
    user.changePassword("changed",testPw);
    superuser.save();
    Session s=getHelper().getRepository().login(new SimpleCredentials(user.getID(),"changed".toCharArray()));
    s.logout();
  }
  finally {
    user.changePassword(testPw);
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLoginAfterChangePassword() throws RepositoryException {
  user.changePassword("changed");
  superuser.save();
  Session s=getHelper().getRepository().login(new SimpleCredentials(user.getID(),"changed".toCharArray()));
  s.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.version.VersionablePathNodeStoreTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVersionablePaths() throws Exception {
  for (char i='a'; i <= 'z'; i++) {
    versionablePaths("" + i);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.management.ManagementOperationTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void statusToCompositeDataConversion(){
  checkConversion(Status.unavailable(42,"forty two"));
  checkConversion(Status.none(43,"forty three"));
  checkConversion(Status.initiated(44,"forty four"));
  checkConversion(Status.running(45,"forty five"));
  checkConversion(Status.succeeded(46,"forty six"));
  checkConversion(Status.failed(47,"forty seven"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.namepath.NamePathMapperImplTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvalidOakPaths(){
  getJcrPath("//");
  getJcrPath("/foo//");
  getJcrPath("/..//");
  getJcrPath("/..");
  getJcrPath("/foo/../..");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.osgi.OSGiIT </h4><pre class="type-17 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeStore(){
  System.out.println(store);
  System.out.println(store.getRoot());
}

</code></pre>

<br>
<pre class="type-16 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void listBundles(){
  assumeTrue(!buildBotTrunkLinux());
  for (  Bundle bundle : context.getBundles()) {
    System.out.println(bundle);
  }
}

</code></pre>

<br>
<pre class="type-17 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void listServices() throws InvalidSyntaxException {
  for (  ServiceReference reference : context.getAllServiceReferences(null,null)) {
    System.out.println(reference);
  }
}

</code></pre>

<br>
<pre class="type-17 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRepository() throws RepositoryException {
  System.out.println(repository);
  System.out.println(repository.getDescriptor(Repository.REP_NAME_DESC));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.osgi.OsgiUtilTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NullPointerException.class) public void testFrameworkLookupWithNullName(){
  lookup(mock(BundleContext.class),null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NullPointerException.class) public void testComponentLookupWithNullName(){
  lookup(mock(ComponentContext.class),null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NullPointerException.class) public void testComponentLookupWithNullContext(){
  lookup((ComponentContext)null,"name");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NullPointerException.class) public void testFrameworkLookupWithNullContext(){
  lookup((BundleContext)null,"name");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.atomic.AtomicCounterEditorTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * simulates the update from multiple oak instances
 * @throws CommitFailedException 
 */
@Test public void multipleNodeUpdates() throws CommitFailedException {
  NodeBuilder builder;
  NodeState before, after;
  builder=EMPTY_NODE.builder();
  before=builder.getNodeState();
  builder=setMixin(builder);
  builder=incrementBy(builder,INCREMENT_BY_1);
  after=builder.getNodeState();
  builder=HOOK_1_SYNC.processCommit(before,after,EMPTY).builder();
  assertCounterNodeState(builder,ImmutableSet.of(PREFIX_PROP_COUNTER + "1",PREFIX_PROP_REVISION + "1"),1);
  before=builder.getNodeState();
  builder=incrementBy(builder,INCREMENT_BY_1);
  after=builder.getNodeState();
  builder=HOOK_2_SYNC.processCommit(before,after,EMPTY).builder();
  assertCounterNodeState(builder,ImmutableSet.of(PREFIX_PROP_COUNTER + "1",PREFIX_PROP_COUNTER + "2",PREFIX_PROP_REVISION + "1",PREFIX_PROP_REVISION + "2"),2);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void notCluster() throws CommitFailedException {
  NodeBuilder builder;
  NodeState before, after;
  builder=EMPTY_NODE.builder();
  before=builder.getNodeState();
  builder=setMixin(builder);
  builder=incrementBy(builder,INCREMENT_BY_1);
  after=builder.getNodeState();
  builder=HOOK_NO_CLUSTER.processCommit(before,after,EMPTY).builder();
  assertCounterNodeState(builder,ImmutableSet.of(PREFIX_PROP_COUNTER,PREFIX_PROP_REVISION),1);
  before=builder.getNodeState();
  builder=incrementBy(builder,INCREMENT_BY_2);
  after=builder.getNodeState();
  builder=HOOK_NO_CLUSTER.processCommit(before,after,EMPTY).builder();
  assertCounterNodeState(builder,ImmutableSet.of(PREFIX_PROP_COUNTER,PREFIX_PROP_REVISION),3);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void consolidate() throws CommitFailedException {
  NodeBuilder builder;
  Editor editor;
  builder=EMPTY_NODE.builder();
  builder=setMixin(builder);
  editor=new AtomicCounterEditor(builder,null,null,null,null);
  editor.propertyAdded(INCREMENT_BY_1);
  assertTotalCountersValue(builder.getProperties(),1);
  editor.propertyAdded(INCREMENT_BY_1);
  assertTotalCountersValue(builder.getProperties(),2);
  AtomicCounterEditor.consolidateCount(builder);
  assertCounterNodeState(builder,ImmutableSet.of(PREFIX_PROP_COUNTER,PREFIX_PROP_REVISION),2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.backup.FileStoreBackupTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBackup() throws Exception {
  FileStore source=newFileStore(src).withMaxFileSize(8).create();
  NodeStore store=newSegmentNodeStore(source).create();
  init(store);
  FileStoreBackup.backup(store,destination);
  compare(source,destination);
  addTestContent(store);
  FileStoreBackup.backup(store,destination);
  compare(source,destination);
  source.close();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestore() throws Exception {
  FileStore source=newFileStore(src).withMaxFileSize(8).create();
  NodeStore store=newSegmentNodeStore(source).create();
  init(store);
  FileStoreBackup.backup(store,destination);
  addTestContent(store);
  source.close();
  FileStoreRestore.restore(destination,src);
  source=newFileStore(src).withMaxFileSize(8).create();
  compare(source,destination);
  source.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.FileLineDifferenceIteratorTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRandomized() throws Exception {
  Random r=new Random(0);
  for (int i=0; i < 10000; i++) {
    TreeSet<String> marked=new TreeSet<String>();
    TreeSet<String> all=new TreeSet<String>();
    TreeSet<String> diff=new TreeSet<String>();
    int size=r.nextInt(5);
    for (int a=0; a < size; a++) {
      marked.add("" + r.nextInt(10));
    }
    size=r.nextInt(5);
    for (int a=0; a < size; a++) {
      all.add("" + r.nextInt(10));
    }
    diff.addAll(all);
    diff.removeAll(marked);
    String m=marked.toString().replaceAll("[ \\[\\]]","");
    String a=all.toString().replaceAll("[ \\[\\]]","");
    assertDiff(m,a,new ArrayList<String>(diff));
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDiffWithExtraEntriesInMarked() throws IOException {
  assertDiff("a,b","a,b,c, e, h",asList("c","e","h"));
  assertDiff("a,b,d,e","a,b,c",asList("c"));
  assertDiff("a,b,d,e,f","a,b,c,f",asList("c"));
  assertDiff("a,b,d,e,f","a,b,c,f, h",asList("c","h"));
  assertDiff("3,7","2,3,5,9",asList("2","5","9"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleDiff() throws Exception {
  assertDiff("a,b","a,b,c",asList("c"));
  assertDiff("a,b","",Collections.<String>emptyList());
  assertDiff("","",Collections.<String>emptyList());
  assertDiff("","a",asList("a"));
  assertDiff("","a, b",asList("a","b"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMarkedDiffWithExtraEntriesInMarked() throws IOException {
  assertReverseDiff("a,b,c,e,h","a,b,c",asList("e","h"));
  assertReverseDiff("a,b,d,e","a,b,c",asList("d","e"));
  assertReverseDiff("a,b,d","a,b,d",Collections.<String>emptyList());
  assertReverseDiff("a,0xb,d,e,f","a,d",asList("0xb","e","f"));
  assertReverseDiff("a,0xb,d,e,f","a,d,e,f,g",asList("0xb"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoDiff() throws Exception {
  assertDiff("a,b,c","a,b,c",Collections.<String>emptyList());
  assertDiff("a,b,c,d,f","a,b,f",Collections.<String>emptyList());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.migration.AbstractMigratorTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void blobsCanBeReadAfterSwitchingBlobStore() throws IOException, CommitFailedException {
  migrator.migrate();
  closeNodeStore();
  nodeStore=createNodeStore(newBlobStore,repository);
  NodeState root=nodeStore.getRoot();
  for (int i=1; i <= 3; i++) {
    assertPropertyExists(root.getChildNode("node" + i).getProperty("prop"));
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void blobsExistsOnTheNewBlobStore() throws IOException, CommitFailedException {
  migrator.migrate();
  NodeState root=nodeStore.getRoot();
  for (int i=1; i <= 3; i++) {
    assertPropertyOnTheNewStore(root.getChildNode("node" + i).getProperty("prop"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BackgroundWriteTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void limitMultiUpdate(){
  DocumentMK mk=new DocumentMK.Builder().setDocumentStore(new TestStore()).setAsyncDelay(0).open();
  List<String> paths=new ArrayList<String>();
  StringBuilder sb=new StringBuilder();
  for (int i=0; paths.size() < UnsavedModifications.BACKGROUND_MULTI_UPDATE_LIMIT * 2; i++) {
    String child="node-" + i;
    sb.append("+\"").append(child).append("\":{}");
    paths.add("/" + child);
    for (int j=0; j < 1000; j++) {
      String p=child + "/node-" + j;
      paths.add("/" + p);
      sb.append("+\"").append(p).append("\":{}");
    }
  }
  mk.commit("/",sb.toString(),null,null);
  mk.runBackgroundOperations();
  Revision r=mk.getNodeStore().newRevision();
  UnsavedModifications pending=mk.getNodeStore().getPendingModifications();
  pending.put("/",r);
  for (  String p : paths) {
    pending.put(p,r);
  }
  mk.runBackgroundOperations();
  mk.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BasicDocumentStoreTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMaxIdNonAscii(){
  testMaxId(false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testServerTimeDiff() throws Exception {
  UpdateOp up=new UpdateOp("0:/",true);
  up.set("_id","0:/");
  super.ds.create(Collection.NODES,Collections.singletonList(up));
  removeMe.add("0:/");
  long td=super.ds.determineServerTimeDifferenceMillis();
  LOG.info("Server time difference on " + super.dsname + ": "+ td+ "ms");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteNonExisting(){
  String id=this.getClass().getName() + ".testDeleteNonExisting-" + UUID.randomUUID();
  ds.remove(Collection.NODES,id);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BlobThroughPutTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void performBenchMark() throws UnknownHostException, InterruptedException {
  MongoClient local=new MongoClient(new DBAddress(localServer));
  MongoClient remote=new MongoClient(new DBAddress(remoteServer));
  run(local,false,false);
  run(local,true,false);
  run(remote,false,true);
  run(remote,true,true);
  dumpResult();
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void performBenchMark_WriteConcern() throws UnknownHostException, InterruptedException {
  Mongo mongo=new Mongo(new DBAddress(remoteServer));
  final DB db=mongo.getDB(TEST_DB1);
  final DBCollection nodes=db.getCollection("nodes");
  final DBCollection blobs=db.getCollection("blobs");
  int readers=0;
  int writers=2;
  for (  WriteConcern wc : namedConcerns.keySet()) {
    prepareDB(nodes,blobs);
    final Benchmark b=new Benchmark(nodes,blobs);
    Result r=b.run(readers,writers,true,wc);
    results.add(r);
  }
  prepareDB(nodes,blobs);
  dumpResult();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterConflictTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void suspendUntilVisibleWithBranch() throws Exception {
  suspendUntilVisible(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void suspendUntilVisible() throws Exception {
  suspendUntilVisible(false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mixedConflictAndCollision() throws Exception {
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("test");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  AtomicLong counter=new AtomicLong();
  final List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  List<Thread> writers=Lists.newArrayList();
  writers.add(new Thread(new Writer(exceptions,ns1,counter)));
  writers.add(new Thread(new Writer(exceptions,ns1,counter)));
  for (  Thread t : writers) {
    t.start();
  }
  for (int i=0; i < 10; i++) {
    NodeBuilder b21=ns2.getRoot().builder();
    b21.child("test").setProperty("q",1);
    merge(ns2,b21);
  }
  for (  Thread t : writers) {
    t.join(10000);
  }
  for (  Exception e : exceptions) {
    throw e;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void openCloseOpen(){
  MemoryDocumentStore ds=new MemoryDocumentStore();
  MemoryBlobStore bs=new MemoryBlobStore();
  DocumentMK mk1=createMK(1,0,ds,bs);
  mk1.commit("/","+\"a\": {}",null,null);
  mk1.commit("/","-\"a\"",null,null);
  mk1.runBackgroundOperations();
  DocumentMK mk2=createMK(2,0,ds,bs);
  mk2.commit("/","+\"a\": {}",null,null);
  mk2.commit("/","-\"a\"",null,null);
  mk2.runBackgroundOperations();
  DocumentMK mk3=createMK(3,0,ds,bs);
  mk3.commit("/","+\"a\": {}",null,null);
  mk3.commit("/","-\"a\"",null,null);
  mk3.runBackgroundOperations();
  DocumentMK mk4=createMK(4,0,ds,bs);
  mk4.commit("/","+\"a\": {}",null,null);
  mk4.runBackgroundOperations();
  DocumentMK mk5=createMK(5,0,ds,bs);
  mk5.commit("/","-\"a\"",null,null);
  mk5.commit("/","+\"a\": {}",null,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CommitQueueTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentCommits2() throws Exception {
  final CommitQueue queue=new CommitQueue(DummyRevisionContext.INSTANCE);
  final CommitQueue.Callback c=new CommitQueue.Callback(){
    private Revision before=Revision.newRevision(1);
    @Override public void headOfQueue(    @Nonnull Revision r){
      LOG.debug("seen: {}",r);
      if (r.compareRevisionTime(before) < 0) {
        exceptions.add(new Exception("Inconsistent revision sequence. Before: " + before + ", after: "+ r));
      }
      before=r;
    }
  }
;
  List<Thread> writers=new ArrayList<Thread>();
  for (int i=0; i < NUM_WRITERS; i++) {
    final Random random=new Random(i);
    writers.add(new Thread(new Runnable(){
      @Override public void run(){
        try {
          for (int i=0; i < COMMITS_PER_WRITER; i++) {
            Revision r=queue.createRevision();
            try {
              Thread.sleep(0,random.nextInt(1000));
            }
 catch (            InterruptedException e) {
            }
            if (random.nextInt(5) == 0) {
              queue.canceled(r);
            }
 else {
              queue.done(r,c);
            }
          }
        }
 catch (        Exception e) {
          exceptions.add(e);
        }
      }
    }
));
  }
  for (  Thread t : writers) {
    t.start();
  }
  for (  Thread t : writers) {
    t.join();
  }
  assertNoExceptions();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentCommits() throws Exception {
  final DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  AtomicBoolean running=new AtomicBoolean(true);
  Closeable observer=store.addObserver(new Observer(){
    private RevisionVector before=new RevisionVector(new Revision(0,0,store.getClusterId()));
    @Override public void contentChanged(    @Nonnull NodeState root,    @Nullable CommitInfo info){
      DocumentNodeState after=(DocumentNodeState)root;
      RevisionVector r=after.getRevision();
      LOG.debug("seen: {}",r);
      if (r.compareTo(before) < 0) {
        exceptions.add(new Exception("Inconsistent revision sequence. Before: " + before + ", after: "+ r));
      }
      before=r;
    }
  }
);
  List<Thread> writers=new ArrayList<Thread>();
  for (int i=0; i < NUM_WRITERS; i++) {
    final Random random=new Random(i);
    writers.add(new Thread(new Runnable(){
      @Override public void run(){
        try {
          for (int i=0; i < COMMITS_PER_WRITER; i++) {
            Commit commit=store.newCommit(null,null);
            try {
              Thread.sleep(0,random.nextInt(1000));
            }
 catch (            InterruptedException e) {
            }
            if (random.nextInt(5) == 0) {
              store.canceled(commit);
            }
 else {
              boolean isBranch=random.nextInt(5) == 0;
              store.done(commit,isBranch,null);
            }
          }
        }
 catch (        Exception e) {
          exceptions.add(e);
        }
      }
    }
));
  }
  for (  Thread t : writers) {
    t.start();
  }
  for (  Thread t : writers) {
    t.join();
  }
  running.set(false);
  observer.close();
  store.dispose();
  assertNoExceptions();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CommitTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void detectConflict() throws Exception {
  DocumentNodeStore ns=builderProvider.newBuilder().getNodeStore();
  NodeBuilder b=ns.getRoot().builder();
  b.child("foo");
  b.child("bar");
  ns.merge(b,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  b=ns.getRoot().builder();
  b.child("foo").remove();
  ns.merge(b,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Commit c=ns.newCommit(ns.getHeadRevision(),null);
  try {
    c.addNode(new DocumentNodeState(ns,"/foo/baz",new RevisionVector(c.getRevision())));
    UpdateOp op=c.getUpdateOperationForNode("/bar");
    op.setMapEntry("p",c.getRevision(),"v");
    try {
      c.apply();
      ns.done(c,false,null);
    }
 catch (    DocumentStoreException e) {
    }
  }
  finally {
    ns.canceled(c);
  }
  b=ns.getRoot().builder();
  b.child("foo");
  ns.merge(b,EmptyHook.INSTANCE,CommitInfo.EMPTY);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ConcurrentConflictTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("Enable to run concurrentUpdates() in a loop") @Test public void concurrentUpdates_Loop() throws Exception {
  for (int i=0; i < 1000; i++) {
    System.out.println("test " + i);
    concurrentUpdates(false);
    disposeDocumentMK();
    initDocumentMK();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentUpdates() throws Exception {
  concurrentUpdates(false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentUpdatesWithBranch() throws Exception {
  concurrentUpdates(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ConcurrentPropertyUpdateTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentUpdates() throws Exception {
  final DocumentNodeStore store=mk.getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").setProperty("prop",System.currentTimeMillis());
  store.merge(builder,HOOK,CommitInfo.EMPTY);
  List<Callable> tasks=Lists.newArrayList();
  for (int i=0; i < NUM_THREADS; i++) {
    tasks.add(new Callable(){
      @Override public Object call() throws Exception {
        for (int i=0; i < 100; i++) {
          try {
            NodeBuilder builder=store.getRoot().builder();
            builder.getChildNode("test").setProperty("prop",Math.random());
            store.merge(builder,HOOK,CommitInfo.EMPTY);
          }
 catch (          CommitFailedException e) {
            RepositoryException ex=e.asRepositoryException();
            if (!(ex instanceof InvalidItemStateException)) {
              throw e;
            }
          }
        }
        return null;
      }
    }
);
  }
  List<Future> results=service.invokeAll(tasks);
  for (  Future r : results) {
    r.get();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ConcurrentUpdatesTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test() throws Exception {
  final List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  List<Thread> writers=new ArrayList<Thread>();
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < NUM_WRITERS; i++) {
    final String nodeName="test-" + i;
    sb.append("+\"").append(nodeName).append("\":{}");
    writers.add(new Thread(new Runnable(){
      @Override public void run(){
        try {
          for (int i=0; i < NUM_OPS; i++) {
            mk.commit("/" + nodeName,"^\"prop\":" + i,null,null);
          }
        }
 catch (        Exception e) {
          exceptions.add(e);
        }
      }
    }
));
  }
  mk.commit("/",sb.toString(),null,null);
  long time=System.currentTimeMillis();
  for (  Thread t : writers) {
    t.start();
  }
  for (  Thread t : writers) {
    t.join();
  }
  time=System.currentTimeMillis() - time;
  for (  Exception e : exceptions) {
    throw e;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ConflictTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nonConflictingRemovePropertyWithBranch2(){
  String rev=mk.commit("/","+\"foo\":{\"prop1\":\"value\", \"prop2\":\"value\"}",null,null);
  String branchRev=mk.branch(rev);
  mk.commit("/foo","^\"prop2\":null",rev,null);
  branchRev=mk.commit("/foo","^\"prop1\":\"bar\"",branchRev,null);
  mk.merge(branchRev,null);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nonConflictingRemovePropertyWithBranch1(){
  String rev=mk.commit("/","+\"foo\":{\"prop1\":\"value\", \"prop2\":\"value\"}",null,null);
  String branchRev=mk.branch(rev);
  branchRev=mk.commit("/foo","^\"prop1\":\"bar\"",branchRev,null);
  mk.commit("/foo","^\"prop2\":null",rev,null);
  mk.merge(branchRev,null);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nonConflictingAddPropertyWithBranch1(){
  String rev=mk.commit("/","+\"foo\":{\"prop1\":\"value\"}",null,null);
  String branchRev=mk.branch(rev);
  branchRev=mk.commit("/foo","^\"prop1\":\"bar\"",branchRev,null);
  mk.commit("/foo","^\"prop2\":\"baz\"",rev,null);
  mk.merge(branchRev,null);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nonConflictingAddPropertyWithBranch2(){
  String rev=mk.commit("/","+\"foo\":{\"prop1\":\"value\"}",null,null);
  String branchRev=mk.branch(rev);
  mk.commit("/foo","^\"prop2\":\"baz\"",rev,null);
  branchRev=mk.commit("/foo","^\"prop1\":\"bar\"",branchRev,null);
  mk.merge(branchRev,null);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nonConflictingAddProperty(){
  String rev=mk.commit("/","+\"foo\":{\"prop1\":\"value\"}",null,null);
  mk.commit("/foo","^\"prop1\":\"bar\"",rev,null);
  mk.commit("/foo","^\"prop2\":\"baz\"",rev,null);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nonConflictingRemoveProperty(){
  String rev=mk.commit("/","+\"foo\":{\"prop1\":\"value\", \"prop2\":\"value\"}",null,null);
  mk.commit("/foo","^\"prop1\":\"bar\"",rev,null);
  mk.commit("/foo","^\"prop2\":null",rev,null);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nonConflictingChangeProperty(){
  String rev=mk.commit("/","+\"foo\":{\"prop1\":\"value\", \"prop2\":\"value\"}",null,null);
  mk.commit("/foo","^\"prop1\":\"bar\"",rev,null);
  mk.commit("/foo","^\"prop2\":\"baz\"",rev,null);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nonConflictingChangePropertyWithBranch2(){
  String rev=mk.commit("/","+\"foo\":{\"prop1\":\"value\", \"prop2\":\"value\"}",null,null);
  String branchRev=mk.branch(rev);
  mk.commit("/foo","^\"prop2\":\"baz\"",rev,null);
  branchRev=mk.commit("/foo","^\"prop1\":\"bar\"",branchRev,null);
  mk.merge(branchRev,null);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nonConflictingChangePropertyWithBranch1(){
  String rev=mk.commit("/","+\"foo\":{\"prop1\":\"value\", \"prop2\":\"value\"}",null,null);
  String branchRev=mk.branch(rev);
  branchRev=mk.commit("/foo","^\"prop1\":\"bar\"",branchRev,null);
  mk.commit("/foo","^\"prop2\":\"baz\"",rev,null);
  mk.merge(branchRev,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentDiscoveryLiteServiceTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoNodesWithCleanShutdown() throws Exception {
  final SimplifiedInstance s1=createInstance();
  final SimplifiedInstance s2=createInstance();
  final ViewExpectation expectation1=new ViewExpectation(s1);
  final ViewExpectation expectation2=new ViewExpectation(s2);
  expectation1.setActiveIds(s1.ns.getClusterId(),s2.ns.getClusterId());
  expectation2.setActiveIds(s1.ns.getClusterId(),s2.ns.getClusterId());
  waitFor(expectation1,2000,"first should see both as active");
  waitFor(expectation2,2000,"second should see both as active");
  s2.shutdown();
  final ViewExpectation expectation1AfterShutdown=new ViewExpectation(s1);
  expectation1AfterShutdown.setActiveIds(s1.ns.getClusterId());
  expectation1AfterShutdown.setInactiveIds(s2.ns.getClusterId());
  waitFor(expectation1AfterShutdown,2000,"first should only see itself after shutdown");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testActivateDeactivate() throws Exception {
  DocumentMK mk1=createMK(1,0);
  DocumentDiscoveryLiteService discoveryLite=new DocumentDiscoveryLiteService();
  PrivateAccessor.setField(discoveryLite,"nodeStore",mk1.nodeStore);
  BundleContext bc=mock(BundleContext.class);
  ComponentContext c=mock(ComponentContext.class);
  when(c.getBundleContext()).thenReturn(bc);
  discoveryLite.activate(c);
  verify(c,times(0)).disableComponent(DocumentDiscoveryLiteService.COMPONENT_NAME);
  discoveryLite.deactivate();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoNodesWithCrashAndLongduringRecoveryAndBacklog() throws Throwable {
  doTestTwoNodesWithCrashAndLongduringDeactivation(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoNodesWithCrash() throws Throwable {
  final SimplifiedInstance s1=createInstance();
  final SimplifiedInstance s2=createInstance();
  final ViewExpectation expectation1=new ViewExpectation(s1);
  final ViewExpectation expectation2=new ViewExpectation(s2);
  expectation1.setActiveIds(s1.ns.getClusterId(),s2.ns.getClusterId());
  expectation2.setActiveIds(s1.ns.getClusterId(),s2.ns.getClusterId());
  waitFor(expectation1,2000,"first should see both as active");
  waitFor(expectation2,2000,"second should see both as active");
  s2.crash();
  final ViewExpectation expectation1AfterShutdown=new ViewExpectation(s1);
  expectation1AfterShutdown.setActiveIds(s1.ns.getClusterId());
  expectation1AfterShutdown.setInactiveIds(s2.ns.getClusterId());
  waitFor(expectation1AfterShutdown,2000,"first should only see itself after shutdown");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoNodesWithCrashAndLongduringRecovery() throws Throwable {
  doTestTwoNodesWithCrashAndLongduringDeactivation(false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOneNode() throws Exception {
  final SimplifiedInstance s1=createInstance();
  final ViewExpectation expectation=new ViewExpectation(s1);
  expectation.setActiveIds(s1.ns.getClusterId());
  waitFor(expectation,2000,"see myself as active");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKBranchMergeTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oneBranchAddedChildren2(){
  addNodes(null,"/trunk","/trunk/child1");
  assertNodesExist(null,"/trunk","/trunk/child1");
  String branchRev=mk.branch(null);
  branchRev=addNodes(branchRev,"/trunk/child1/child2");
  assertNodesExist(branchRev,"/trunk","/trunk/child1");
  assertNodesExist(branchRev,"/trunk/child1/child2");
  assertNodesNotExist(null,"/trunk/child1/child2");
  addNodes(null,"/trunk/child3");
  assertNodesExist(null,"/trunk/child3");
  assertNodesNotExist(branchRev,"/trunk/child3");
  mk.merge(branchRev,"");
  assertNodesExist(null,"/trunk","/trunk/child1","/trunk/child1/child2","/trunk/child3");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oneBranchAddedChildren3(){
  addNodes(null,"/root","/root/child1");
  assertNodesExist(null,"/root","/root/child1");
  String branchRev=mk.branch(null);
  addNodes(null,"/root/child2");
  assertNodesExist(null,"/root","/root/child1","/root/child2");
  assertNodesExist(branchRev,"/root","/root/child1");
  assertNodesNotExist(branchRev,"/root/child2");
  branchRev=addNodes(branchRev,"/root/child1/child3","/root/child4");
  assertNodesExist(branchRev,"/root","/root/child1","/root/child1/child3","/root/child4");
  assertNodesNotExist(branchRev,"/root/child2");
  assertNodesExist(null,"/root","/root/child1","/root/child2");
  assertNodesNotExist(null,"/root/child1/child3","/root/child4");
  mk.merge(branchRev,"");
  assertNodesExist(null,"/root","/root/child1","/root/child2","/root/child1/child3","/root/child4");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void twoBranchesAddedChildren1(){
  addNodes(null,"/trunk","/trunk/child1");
  assertNodesExist(null,"/trunk","/trunk/child1");
  String branchRev1=mk.branch(null);
  String branchRev2=mk.branch(null);
  branchRev1=addNodes(branchRev1,"/branch1","/branch1/child1");
  branchRev2=addNodes(branchRev2,"/branch2","/branch2/child2");
  assertNodesExist(branchRev1,"/trunk","/trunk/child1");
  assertNodesExist(branchRev2,"/trunk","/trunk/child1");
  assertNodesExist(branchRev1,"/branch1/child1");
  assertNodesNotExist(branchRev1,"/branch2/child2");
  assertNodesExist(branchRev2,"/branch2/child2");
  assertNodesNotExist(branchRev2,"/branch1/child1");
  assertNodesNotExist(null,"/branch1/child1","/branch2/child2");
  addNodes(null,"/trunk/child2");
  assertNodesExist(null,"/trunk/child2");
  assertNodesNotExist(branchRev1,"/trunk/child2");
  assertNodesNotExist(branchRev2,"/trunk/child2");
  mk.merge(branchRev1,"");
  assertNodesExist(null,"/trunk","/branch1","/branch1/child1");
  assertNodesNotExist(null,"/branch2","/branch2/child2");
  mk.merge(branchRev2,"");
  assertNodesExist(null,"/trunk","/branch1","/branch1/child1","/branch2","/branch2/child2");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oneBranchRemovedChildren(){
  addNodes(null,"/trunk","/trunk/child1");
  assertNodesExist(null,"/trunk","/trunk/child1");
  String branchRev=mk.branch(null);
  branchRev=removeNodes(branchRev,"/trunk/child1");
  assertNodesExist(branchRev,"/trunk");
  assertNodesNotExist(branchRev,"/trunk/child1");
  assertNodesExist(null,"/trunk","/trunk/child1");
  mk.merge(branchRev,"");
  assertNodesExist(null,"/trunk");
  assertNodesNotExist(null,"/trunk/child1");
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void movesInBranch(){
  String rev=mk.commit("/","+\"a\":{\"b\":{}}",null,null);
  String branchRev=mk.branch(rev);
  branchRev=mk.commit("/",">\"a\":\"x\"^\"x/b/p\":1>\"x\":\"a\"",branchRev,null);
  rev=mk.merge(branchRev,null);
  assertNodesExist(rev,"/a","/a/b");
  assertPropExists(rev,"/a/b","p");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oneBranchAddedChildrenAndAddedProperties(){
  addNodes(null,"/trunk","/trunk/child1");
  setProp(null,"/trunk/child1/prop1","value1");
  setProp(null,"/trunk/child1/prop2","value2");
  assertNodesExist(null,"/trunk","/trunk/child1");
  assertPropExists(null,"/trunk/child1","prop1");
  assertPropExists(null,"/trunk/child1","prop2");
  String branchRev=mk.branch(null);
  branchRev=addNodes(branchRev,"/branch1","/branch1/child1");
  branchRev=setProp(branchRev,"/branch1/child1/prop1","value1");
  branchRev=setProp(branchRev,"/branch1/child1/prop2","value2");
  assertNodesExist(branchRev,"/trunk","/trunk/child1");
  assertPropExists(branchRev,"/trunk/child1","prop1");
  assertPropExists(branchRev,"/trunk/child1","prop2");
  assertNodesExist(branchRev,"/branch1","/branch1/child1");
  assertPropExists(branchRev,"/branch1/child1","prop1");
  assertPropExists(branchRev,"/branch1/child1","prop2");
  assertNodesNotExist(null,"/branch1","/branch1/child1");
  assertPropNotExists(null,"/branch1/child1","prop1");
  assertPropNotExists(null,"/branch1/child1","prop2");
  mk.merge(branchRev,"");
  assertNodesExist(null,"/trunk","/trunk/child1");
  assertPropExists(null,"/trunk/child1","prop1");
  assertPropExists(null,"/trunk/child1","prop2");
  assertNodesExist(null,"/branch1","/branch1/child1");
  assertPropExists(null,"/branch1/child1","prop1");
  assertPropExists(null,"/branch1/child1","prop2");
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void oneBranchAddedChildrenWithConflict(){
  addNodes(null,"/trunk","/trunk/child1");
  assertNodesExist(null,"/trunk","/trunk/child1");
  String branchRev=mk.branch(null);
  branchRev=removeNodes(branchRev,"/trunk/child1");
  assertNodesExist(branchRev,"/trunk");
  assertNodesNotExist(branchRev,"/trunk/child1");
  addNodes(null,"/trunk/child1/child2");
  assertNodesExist(null,"/trunk","/trunk/child1","/trunk/child1/child2");
  mk.merge(branchRev,"");
  assertNodesExist(null,"/trunk");
  assertNodesNotExist(null,"/trunk/child1","/trunk/child1/child2");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oneBranchChangedProperties(){
  addNodes(null,"/trunk","/trunk/child1");
  setProp(null,"/trunk/child1/prop1","value1");
  setProp(null,"/trunk/child1/prop2","value2");
  assertNodesExist(null,"/trunk","/trunk/child1");
  assertPropExists(null,"/trunk/child1","prop1");
  assertPropExists(null,"/trunk/child1","prop2");
  String branchRev=mk.branch(null);
  branchRev=setProp(branchRev,"/trunk/child1/prop1","value1a");
  branchRev=setProp(branchRev,"/trunk/child1/prop2",null);
  branchRev=setProp(branchRev,"/trunk/child1/prop3","value3");
  assertPropValue(branchRev,"/trunk/child1","prop1","value1a");
  assertPropNotExists(branchRev,"/trunk/child1","prop2");
  assertPropValue(branchRev,"/trunk/child1","prop3","value3");
  assertPropValue(null,"/trunk/child1","prop1","value1");
  assertPropExists(null,"/trunk/child1","prop2");
  assertPropNotExists(null,"/trunk/child1","prop3");
  mk.merge(branchRev,"");
  assertPropValue(null,"/trunk/child1","prop1","value1a");
  assertPropNotExists(null,"/trunk/child1","prop2");
  assertPropValue(null,"/trunk/child1","prop3","value3");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oneBranchAddedSubChildren(){
  addNodes(null,"/trunk","/trunk/child1","/trunk/child1/child2","/trunk/child1/child2/child3");
  assertNodesExist(null,"/trunk","/trunk/child1","/trunk/child1/child2","/trunk/child1/child2/child3");
  String branchRev=mk.branch(null);
  branchRev=addNodes(branchRev,"/branch1","/branch1/child1","/branch1/child1/child2","/branch1/child1/child2/child3");
  assertNodesExist(branchRev,"/trunk","/trunk/child1","/trunk/child1/child2","/trunk/child1/child2/child3");
  assertNodesExist(branchRev,"/branch1","/branch1/child1","/branch1/child1/child2","/branch1/child1/child2/child3");
  assertNodesNotExist(null,"/branch1","/branch1/child1","/branch1/child1/child2","/branch1/child1/child2/child3");
  addNodes(null,"/trunk/child1/child2/child3/child4","/trunk/child5");
  assertNodesExist(null,"/trunk/child1/child2/child3/child4","/trunk/child5");
  assertNodesNotExist(branchRev,"/trunk/child1/child2/child3/child4","/trunk/child5");
  mk.merge(branchRev,"");
  assertNodesExist(null,"/trunk","/trunk/child1","/trunk/child1/child2","/trunk/child1/child2/child3","/trunk/child1/child2/child3/child4");
  assertNodesExist(null,"/branch1","/branch1/child1","/branch1/child1/child2","/branch1/child1/child2/child3");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentNonConflictingMerges() throws Exception {
  int numThreads=10;
  mk.commit("/","+\"test\":{}",null,null);
  List<Thread> workers=new ArrayList<Thread>();
  final List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  for (int i=0; i < numThreads; i++) {
    final String path="/test/t" + i;
    mk.commit("","+\"" + path + "\":{}",null,null);
    workers.add(new Thread(new Runnable(){
      @Override public void run(){
        try {
          for (int i=0; i < 50; i++) {
            String branchRev=mk.branch(null);
            branchRev=mk.commit(path,"+\"node" + i + "\":{}",branchRev,null);
            mk.merge(branchRev,null);
          }
        }
 catch (        DocumentStoreException e) {
          exceptions.add(e);
        }
      }
    }
));
  }
  for (  Thread t : workers) {
    t.start();
  }
  for (  Thread t : workers) {
    t.join();
  }
  if (!exceptions.isEmpty()) {
    throw exceptions.get(0);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oneBranchAddedChildren1(){
  addNodes(null,"/trunk","/trunk/child1");
  assertNodesExist(null,"/trunk","/trunk/child1");
  String branchRev=mk.branch(null);
  branchRev=addNodes(branchRev,"/branch1","/branch1/child1");
  assertNodesExist(branchRev,"/trunk","/trunk/child1");
  assertNodesExist(branchRev,"/branch1","/branch1/child1");
  assertNodesNotExist(null,"/branch1","/branch1/child1");
  addNodes(null,"/trunk/child2");
  assertNodesExist(null,"/trunk/child2");
  assertNodesNotExist(branchRev,"/trunk/child2");
  mk.merge(branchRev,"");
  assertNodesExist(null,"/trunk","/trunk/child1","/trunk/child2","/branch1","/branch1/child1");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oneBranchRemovedRoot(){
  addNodes(null,"/trunk","/trunk/child1");
  assertNodesExist(null,"/trunk","/trunk/child1");
  String branchRev=mk.branch(null);
  branchRev=removeNodes(branchRev,"/trunk");
  assertNodesNotExist(branchRev,"/trunk","/trunk/child1");
  assertNodesExist(null,"/trunk","/trunk/child1");
  mk.merge(branchRev,"");
  assertNodesNotExist(null,"/trunk","/trunk/child1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKBranchTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void branchIsolation1() throws Exception {
  String filter="{\"properties\":[\"*\",\":hash\",\":id\"]}";
  String baseRev=mk.commit("/","+\"test\":{\"node\":{}}",null,null);
  String branchRev=mk.branch(baseRev);
  String branchRev1=mk.commit("/test/node","+\"branch-node\":{}",branchRev,null);
  mk.commit("/test/node","+\"trunk-node\":{}",null,null);
  String branchRev2=mk.commit("/","+\"other\":{}",branchRev1,null);
  String json=mk.getNodes("/test",branchRev2,0,0,1000,filter);
  JSONObject test=parseJSONObject(json);
  String id=resolveValue(test,":id").toString();
  String revision=id.split("@")[1];
  assertNodesExist(revision,"/test/node/branch-node");
  assertNodesNotExist(revision,"/test/node/trunk-node");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKCommitAddTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-461") public void commitTime() throws Exception {
  boolean debug=false;
  final Stopwatch watch=new Stopwatch();
  for (int i=0; i < 1000; i++) {
    watch.start();
    String diff="+\"a" + i + "\" : {} +\"b"+ i+ "\" : {} +\"c"+ i+ "\" : {}";
    if (debug) {
      System.out.println("Committing: " + diff);
    }
    mk.commit("/",diff,null,null);
    watch.stop();
    if (debug) {
      System.out.println("Committed in " + watch.elapsed(TimeUnit.MILLISECONDS) + "ms");
    }
  }
  if (debug) {
    System.out.println("Final Result:" + watch);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void existingNodesMerged() throws Exception {
  String rev=mk.commit("/","+\"a\" : {}",null,null);
  mk.commit("/","+\"a/b\" : {}",null,null);
  mk.commit("/","^\"a/key1\" : \"value1\"",null,null);
  mk.commit("/","^\"a/key2\" : \"value2\"",rev,null);
  String nodes=mk.getNodes("/",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,":childNodeCount",1L);
  nodes=mk.getNodes("/a",null,0,0,-1,null);
  obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"key1","value1");
  assertPropertyValue(obj,"key2","value2");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addSingleNode() throws Exception {
  mk.commit("/","+\"a\" : {}",null,null);
  String nodes=mk.getNodes("/",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,":childNodeCount",1L);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void setMultipleProperties() throws Exception {
  mk.commit("/","+\"a\" : {} ^\"a/key1\" : \"value1\"",null,null);
  mk.commit("/","^\"a/key2\" : 2",null,null);
  mk.commit("/","^\"a/key3\" : false",null,null);
  mk.commit("/","^\"a/key4\" : 0.25",null,null);
  String nodes=mk.getNodes("/",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,":childNodeCount",1L);
  nodes=mk.getNodes("/a",null,0,0,-1,null);
  obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"key1","value1");
  assertPropertyValue(obj,"key2",2L);
  assertPropertyValue(obj,"key3",false);
  assertPropertyValue(obj,"key4",0.25);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void setPropertyIllegalKey() throws Exception {
  mk.commit("/","+\"a\" : {}",null,null);
  mk.commit("/","^\"a/_id\" : \"value\"",null,null);
  String nodes=mk.getNodes("/a",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"_id","value");
  mk.commit("/","^\"a/ke.y1\" : \"value\"",null,null);
  nodes=mk.getNodes("/a",null,0,0,-1,null);
  obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"ke.y1","value");
  mk.commit("/","^\"a/ke.y.1\" : \"value\"",null,null);
  nodes=mk.getNodes("/a",null,0,0,-1,null);
  obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"ke.y.1","value");
  mk.commit("/","^\"a/$key1\" : \"value\"",null,null);
  nodes=mk.getNodes("/a",null,0,0,-1,null);
  obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"$key1","value");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void setSingleProperty() throws Exception {
  mk.commit("/","+\"a\" : {} ^\"a/key1\" : \"value1\"",null,null);
  String nodes=mk.getNodes("/",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,":childNodeCount",1L);
  nodes=mk.getNodes("/a",null,0,0,-1,null);
  obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"key1","value1");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addNodeWithParanthesis() throws Exception {
  mk.commit("/","+\"Test({0})\" : {}",null,null);
  String nodes=mk.getNodes("/Test({0})",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,":childNodeCount",0L);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKCommitCopyTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void removePropertyAndCopy(){
  mk.commit("/","+\"a\":{ \"b\" : { \"key1\" : \"value1\" } }",null,null);
  mk.commit("/","^\"a/b/key1\": null\n" + "*\"a\":\"c\"",null,null);
  String nodes=mk.getNodes("/",null,1,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyNotExists(obj,"a/b/key1");
  assertPropertyNotExists(obj,"c/b/key1");
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void modifyParentRemovePropertyAndCopy(){
  mk.commit("/","+\"a\":{ \"key1\" : \"value1\"}",null,null);
  mk.commit("/","+\"b\" : {}\n" + "^\"a/key1\" : null\n" + "*\"a\":\"c\"",null,null);
  String nodes=mk.getNodes("/",null,1,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyNotExists(obj,"a/key1");
  assertPropertyNotExists(obj,"c/key1");
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void setNestedPropertyAndCopy(){
  mk.commit("/","+\"a\":{ \"b\" : {} }",null,null);
  mk.commit("/","^\"a/b/key1\": \"value1\"\n" + "*\"a\":\"c\"",null,null);
  String nodes=mk.getNodes("/",null,2,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"a/b/key1","value1");
  assertPropertyValue(obj,"c/b/key1","value1");
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void modifyParentAddPropertyAndCopy(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","+\"b\" : {}\n" + "^\"a/key1\": \"value1\"\n" + "*\"a\":\"c\"",null,null);
  String nodes=mk.getNodes("/",null,1,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"a/key1","value1");
  assertPropertyValue(obj,"c/key1","value1");
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void removeNestedPropertyAndCopy(){
  mk.commit("/","+\"a\":{ \"key1\" : \"value1\"}",null,null);
  mk.commit("/","^\"a/key1\" : null\n" + "*\"a\":\"c\"",null,null);
  String nodes=mk.getNodes("/",null,1,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyNotExists(obj,"a/key1");
  assertPropertyNotExists(obj,"c/key1");
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void setPropertyAndCopy(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","^\"a/key1\": \"value1\"\n" + "*\"a\":\"c\"",null,null);
  String nodes=mk.getNodes("/",null,1,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"a/key1","value1");
  assertPropertyValue(obj,"c/key1","value1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKCommitMoveTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void moveAndMoveBack(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/",">\"a\":\"x\">\"x\":\"a\"",null,null);
  assertNodesExist(null,"/a");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void moveAndMoveBackWithAddedChildren(){
  mk.commit("/","+\"a\":{\"b\":{}}",null,null);
  mk.commit("/",">\"a\":\"x\"+\"x/c\":{}>\"x\":\"a\"",null,null);
  assertNodesExist(null,"/a","/a/b","/a/c");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void moveAndMoveBackWithSetProperties(){
  mk.commit("/","+\"a\":{\"b\":{}}",null,null);
  mk.commit("/",">\"a\":\"x\"^\"x/p\":1>\"x\":\"a\"",null,null);
  assertNodesExist(null,"/a","/a/b");
  assertPropExists(null,"/a","p");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void moveAndMoveBackWithChildren(){
  mk.commit("/","+\"a\":{\"b\":{}}",null,null);
  mk.commit("/",">\"a\":\"x\">\"x\":\"a\"",null,null);
  assertNodesExist(null,"/a","/a/b");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKCommitRemoveTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void removeSingleNode() throws Exception {
  mk.commit("/","+\"a\" : {}",null,null);
  assertNodesExist(null,"/a");
  mk.commit("/","-\"a\"",null,null);
  assertNodesNotExist(null,"/a");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKDiffTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void diffManyChildrenOnBranch(){
  diffManyChildren(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void diffManyChildren(){
  diffManyChildren(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKGetNodesTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void depthZero() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  scenario.create();
  JSONObject root=parseJSONObject(mk.getNodes("/",null,0,0,-1,null));
  assertPropertyValue(root,":childNodeCount",1L);
  JSONObject a=resolveObjectValue(root,"a");
  assertPropertyNotExists(a,"int");
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void depthNegative() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  scenario.create();
  JSONObject root=parseJSONObject(mk.getNodes("/",null,-1,0,-1,null));
  assertPropertyValue(root,":childNodeCount",1L);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void afterDelete() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  scenario.create();
  JSONObject root=parseJSONObject(mk.getNodes("/",null,0,0,-1,null));
  assertPropertyValue(root,":childNodeCount",1L);
  JSONObject a=parseJSONObject(mk.getNodes("/a",null,0,0,-1,null));
  assertPropertyValue(a,":childNodeCount",2L);
  scenario.deleteA();
  root=parseJSONObject(mk.getNodes("/",null,0,0,-1,null));
  assertPropertyValue(root,":childNodeCount",0L);
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void depthLimitless() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  scenario.create();
  JSONObject root=parseJSONObject(mk.getNodes("/",null,-1,0,-1,null));
  assertPropertyValue(root,":childNodeCount",1L);
  JSONObject a=resolveObjectValue(root,"a");
  assertPropertyValue(a,":childNodeCount",2L);
  assertPropertyValue(a,"int",1L);
  JSONObject b=resolveObjectValue(a,"b");
  assertPropertyValue(b,"string","foo");
  JSONObject c=resolveObjectValue(a,"c");
  assertPropertyValue(c,"bool",true);
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void depthOne() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  scenario.create();
  JSONObject root=parseJSONObject(mk.getNodes("/",null,1,0,-1,null));
  assertPropertyValue(root,":childNodeCount",1L);
  JSONObject a=resolveObjectValue(root,"a");
  assertPropertyValue(a,":childNodeCount",2L);
  assertPropertyValue(a,"int",1L);
  JSONObject b=resolveObjectValue(a,"b");
  assertPropertyNotExists(b,"string");
  JSONObject c=resolveObjectValue(a,"c");
  assertPropertyNotExists(c,"bool");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKResetTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void resetToBaseOfBranch(){
  addNodes(null,"/foo");
  String b0=mk.branch(null);
  String b1=addNodes(b0,"/foo/bar");
  String b2=mk.reset(b1,b0);
  mk.merge(b2,null);
  assertNodesNotExist(null,"/foo/bar");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void resetBranch(){
  String branch=mk.branch(null);
  branch=addNodes(branch,"/foo");
  String head=addNodes(branch,"/bar");
  assertNodesExist(head,"/bar");
  head=mk.reset(head,branch);
  assertNodesNotExist(head,"/bar");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentNodeStoreIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void updateAbsentDocument() throws Exception {
  String id=Utils.getIdFromPath("/test");
  ds.find(NODES,id);
  UpdateOp updateOp=new UpdateOp(id,false);
  updateOp.setMapEntry("foo",Revision.newRevision(1),"bar");
  ds.update(NODES,Collections.singletonList(id),updateOp);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentNodeStoreTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mergeDeleteDeleteNonEmptyInternalDocShouldFail() throws Exception {
  final DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  store.setEnableConcurrentAddRemove(true);
  NodeBuilder builder=store.getRoot().builder();
  builder.child(":a").setProperty("foo","bar");
  builder.child(":b");
  merge(store,builder);
  SingleInstanceConflictUtility.generateConflict(store,new String[]{":1"},new String[]{":a"},new String[]{":2"},new String[]{":b"},new String[]{":3"},new String[]{":a",":b"},false,"Delete-delete merge conflicts for non-empty internal docs should fail");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mergeDeleteDeleteNormalDocShouldFail() throws Exception {
  final DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  store.setEnableConcurrentAddRemove(true);
  NodeBuilder builder=store.getRoot().builder();
  builder.child("a");
  builder.child("b");
  merge(store,builder);
  SingleInstanceConflictUtility.generateConflict(store,new String[]{":1"},new String[]{"a"},new String[]{":2"},new String[]{"b"},new String[]{":3"},new String[]{"a","b"},false,"Delete-delete merge conflicts for normal docs should fail");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mergeDeleteChangedInternalDocShouldFail() throws Exception {
  final DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  store.setEnableConcurrentAddRemove(true);
  NodeBuilder builder=store.getRoot().builder();
  builder.child(":a");
  builder.child(":b");
  merge(store,builder);
  SingleInstanceConflictUtility.generateConflict(store,new String[]{":1",":a"},new String[]{},true,new String[]{":2",":b"},new String[]{},true,new String[]{":3"},new String[]{":a",":b"},false,false,"Delete changed merge conflicts for internal docs should fail");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mergeChangeDeletedInternalDocShouldFail() throws Exception {
  final DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  store.setEnableConcurrentAddRemove(true);
  NodeBuilder builder=store.getRoot().builder();
  builder.child(":a");
  builder.child(":b");
  merge(store,builder);
  SingleInstanceConflictUtility.generateConflict(store,new String[]{":1"},new String[]{":a"},false,new String[]{":2"},new String[]{":b"},false,new String[]{":3",":a",":b"},new String[]{},true,false,"Change deleted merge conflicts for internal docs should fail");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mergeDeleteDeleteEmptyInternalDoc() throws Exception {
  final DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  store.setEnableConcurrentAddRemove(true);
  NodeBuilder builder=store.getRoot().builder();
  builder.child(":a");
  builder.child(":b");
  merge(store,builder);
  SingleInstanceConflictUtility.generateConflict(store,new String[]{":1"},new String[]{":a"},new String[]{":2"},new String[]{":b"},new String[]{":3"},new String[]{":a",":b"},true,"Delete-delete merge conflicts for internal docs should be resolved");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mergeAddAddNormalDocShouldFail() throws Exception {
  final DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  store.setEnableConcurrentAddRemove(true);
  SingleInstanceConflictUtility.generateConflict(store,new String[]{":1","a"},new String[]{},new String[]{":2","b"},new String[]{},new String[]{":3","a","b"},new String[]{},false,"Add-add merge conflicts for normal docs should fail");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mergeAddAddNonEmptyInternalDocShouldFail() throws Exception {
  final DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  store.setEnableConcurrentAddRemove(true);
  SingleInstanceConflictUtility.generateConflict(store,new String[]{":1",":a"},new String[]{},true,new String[]{":2",":b"},new String[]{},true,new String[]{":3",":a",":b"},new String[]{},false,false,"Add-add merge conflicts for non empty internal docs should fail");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void getNewestRevision() throws Exception {
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(1).getNodeStore();
  ns1.getRoot();
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(2).getNodeStore();
  ns2.getRoot();
  NodeBuilder b1=ns1.getRoot().builder();
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    b1.setProperty("p",String.valueOf(i));
    ns1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  ns1.runBackgroundOperations();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.setProperty("q","value");
  ns2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void slowRebase() throws Exception {
  final int NUM_NODES=DocumentRootBuilder.UPDATE_LIMIT / 2;
  final int NUM_PROPS=10;
  final int REBASE_COUNT=5;
  final DocumentNodeStore ns=builderProvider.newBuilder().getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  for (int i=0; i < NUM_NODES / 2; i++) {
    NodeBuilder c=deepTree(builder.child("n" + i),5);
    for (int j=0; j < NUM_PROPS; j++) {
      c.setProperty("p" + j,"value");
    }
  }
  merge(ns,builder);
  builder=ns.getRoot().builder();
  int[] rebaseCounts={2,3,1,8,3};
  for (int r=0; r < REBASE_COUNT; r++) {
    for (int i=0; i < NUM_NODES / 2; i++) {
      NodeBuilder c=deepTree(builder.child("n" + i),5);
      for (int j=0; j < NUM_PROPS; j++) {
        c.setProperty("q" + r + ""+ j,"value");
      }
    }
    for (int k=0; k < rebaseCounts[r]; k++) {
      doSomeChange(ns);
      ns.rebase(builder);
    }
  }
  LOG.info("Starting the final merge {}",new Date());
  merge(ns,builder);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mergeAddAddEmptyInternalDoc() throws Exception {
  final DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  store.setEnableConcurrentAddRemove(true);
  SingleInstanceConflictUtility.generateConflict(store,new String[]{":1",":a"},new String[]{},new String[]{":2",":b"},new String[]{},new String[]{":3",":a",":b"},new String[]{},true,"Add-add merge conflicts for internal docs should be resolvable");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentSplitTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cascadingSplitLongPath(){
  String p="/";
  while (!Utils.isLongPath(p)) {
    p=PathUtils.concat(p,"long-path-element");
  }
  cascadingSplit(p);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cascadingSplit(){
  cascadingSplit("/test/node");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void splitPreviousDocument(){
  NodeDocument doc=new NodeDocument(mk.getDocumentStore());
  doc.put(NodeDocument.ID,Utils.getIdFromPath("/test"));
  doc.put(NodeDocument.SD_TYPE,NodeDocument.SplitDocType.DEFAULT.type);
  RevisionVector head=mk.getNodeStore().getHeadRevision();
  SplitOperations.forDocument(doc,DummyRevisionContext.INSTANCE,head,NUM_REVS_THRESHOLD);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentStorePerformanceTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreatePerfSmall(){
  createPerf(16,1);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPerfReadBigDocCached(){
  perfReadBigDoc(true,this.getClass().getName() + ".testReadBigDocCached");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreatePerfSmallBatch(){
  createPerf(16,64);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConcurrentUpdatePerf2DS() throws InterruptedException {
  String id=this.getClass().getName() + ".testConcurrentUpdatePerf1DS";
  concurrentUpdatePerf(id,2);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConcurrentUpdatePerf1DS() throws InterruptedException {
  String id=this.getClass().getName() + ".testConcurrentUpdatePerf1DS";
  concurrentUpdatePerf(id,1);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPerfCollectionPaging(){
  testPerfCollectionPaging(this.getClass().getName() + ".testPerfCollectionPaging",false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreatePerfSmallBatch2(){
  createPerf(16,256);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPerfCollectionPagingUnCached(){
  testPerfCollectionPaging(this.getClass().getName() + ".testPerfCollectionPagingUnCached",true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreatePerfBig(){
  createPerf(32 * 1024,1);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpdatePerfSmall(){
  updatePerf(16,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpdatePerfBig(){
  updatePerf(32 * 1024,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPerfReadBigDocAfterInvalidate(){
  perfReadBigDoc(false,this.getClass().getName() + ".testReadBigDocAfterInvalidate");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpdatePerfSmallGrowing(){
  updatePerf(16,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentStoreStatsIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void findAndModify() throws Exception {
  String id=testName.getMethodName();
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  ds.create(Collection.NODES,singletonList(up));
  removeMe.add(id);
  DocumentStoreStatsCollector coll=mock(DocumentStoreStatsCollector.class);
  configureStatsCollector(coll);
  up=new UpdateOp(id,true);
  up.set("_id",id);
  up.max("_modified",122L);
  ds.findAndUpdate(Collection.NODES,up);
  verify(coll).doneFindAndModify(anyLong(),eq(Collection.NODES),eq(id),eq(false),eq(true),anyInt());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void findCached_Uncached() throws Exception {
  String id=testName.getMethodName();
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  ds.create(Collection.NODES,singletonList(up));
  removeMe.add(id);
  ds.find(Collection.NODES,id);
  verify(stats).doneFindCached(eq(Collection.NODES),eq(id));
  ds.invalidateCache();
  ds.find(Collection.NODES,id);
  verify(stats).doneFindUncached(anyLong(),eq(Collection.NODES),eq(id),eq(true),eq(false));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void update() throws Exception {
  String id=testName.getMethodName();
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  ds.create(Collection.NODES,singletonList(up));
  removeMe.add(id);
  List<String> toupdate=new ArrayList<String>();
  toupdate.add(id + "-" + UUID.randomUUID());
  toupdate.add(id);
  UpdateOp up2=new UpdateOp(id,false);
  up2.set("foo","bar");
  ds.update(Collection.NODES,toupdate,up2);
  verify(stats).doneUpdate(anyLong(),eq(Collection.NODES),eq(2));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void create() throws Exception {
  String id=testName.getMethodName();
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  ds.create(Collection.NODES,singletonList(up));
  removeMe.add(id);
  verify(stats).doneCreate(anyLong(),eq(Collection.NODES),eq(singletonList(id)),eq(true));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.InitializerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInitializerMongoAfterInitialContent() throws CommitFailedException {
  NodeBuilder builder=mk.getNodeStore().getRoot().builder();
  new InitialContent().initialize(builder);
  mk.getNodeStore().merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  SecurityProviderImpl provider=new SecurityProviderImpl(ConfigurationParameters.of(ImmutableMap.of(UserConfiguration.NAME,ConfigurationParameters.of(ImmutableMap.of("anonymousId","anonymous","adminId","admin","usersPath","/home/users","groupsPath","/home/groups","defaultDepth","1")))));
  provider.getConfiguration(UserConfiguration.class).getWorkspaceInitializer().initialize(builder,"default");
  builder.getNodeState();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInitializerMongo() throws CommitFailedException {
  NodeBuilder builder=mk.getNodeStore().getRoot().builder();
  new InitialContent().initialize(builder);
  SecurityProviderImpl provider=new SecurityProviderImpl(ConfigurationParameters.of(ImmutableMap.of(UserConfiguration.NAME,ConfigurationParameters.of(ImmutableMap.of("anonymousId","anonymous","adminId","admin","usersPath","/home/users","groupsPath","/home/groups","defaultDepth","1")))));
  provider.getConfiguration(UserConfiguration.class).getWorkspaceInitializer().initialize(builder,"default");
  builder.getNodeState();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.IsolationTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void phantomReadOnBranch(){
  String base=mk.commit("/","+\"test\":{}",null,null);
  String branchRev1=mk.branch(base);
  String branchRev2=mk.branch(base);
  branchRev1=mk.commit("/test","+\"node1\":{}",branchRev1,null);
  branchRev2=mk.commit("/test","+\"node2\":{}",branchRev2,null);
  String r=mk.commit("/test","+\"node3\":{}",null,null);
  assertNodesNotExist(branchRev1,"/test/node3");
  branchRev1=mk.rebase(branchRev1,r);
  assertNodesExist(branchRev1,"/test/node1","/test/node3");
  assertNodesNotExist(branchRev1,"/test/node2");
  mk.merge(branchRev2,null);
  assertNodesExist(branchRev1,"/test/node1","/test/node3");
  assertNodesNotExist(branchRev1,"/test/node2");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void phantomReadOnTrunk(){
  String base=mk.commit("/","+\"test\":{}",null,null);
  String branchRev1=mk.branch(base);
  branchRev1=mk.commit("/test","+\"node1\":{}",branchRev1,null);
  String rev=mk.commit("/test","+\"node2\":{}",null,null);
  assertNodesNotExist(rev,"/test/node1");
  mk.merge(branchRev1,null);
  assertNodesNotExist(rev,"/test/node1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.JournalEntryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void useParentDiff() throws Exception {
  DiffCache cache=new MemoryDiffCache(new DocumentMK.Builder());
  RevisionVector from=new RevisionVector(new Revision(1,0,1));
  RevisionVector to=new RevisionVector(new Revision(2,0,1));
  RevisionVector unjournalled=new RevisionVector(new Revision(3,0,1));
  DiffCache.Entry entry=cache.newEntry(from,to,false);
  entry.append("/a/b","^\"c1\":{}^\"c2\":{}");
  entry.done();
  validateCacheUsage(cache,from,to,"/a/b/c3",true);
  validateCacheUsage(cache,from,to,"/a/b/c4/e/f/g",true);
  validateCacheUsage(cache,from,to,"/a/b/c1",false);
  validateCacheUsage(cache,from,to,"/a/b/c2/d",false);
  validateCacheUsage(cache,from,to,"/c",false);
  List<String> paths=Lists.newArrayList("/content/changed","/content/changed1/child1");
  StringSort sort=JournalEntry.newSorter();
  add(sort,paths);
  sort.sort();
  JournalEntry.applyTo(sort,cache,from,to);
  validateCacheUsage(cache,from,to,"/topUnchanged",true);
  validateCacheUsage(cache,from,to,"/content/changed/unchangedLeaf",true);
  validateCacheUsage(cache,from,to,"/content/changed1/child2",true);
  validateCacheUsage(cache,from,unjournalled,"/unjournalledPath",false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.JournalTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Inspired by LastRevRecoveryTest.testRecover() - simplified and extended with journal related asserts 
 */
@Test public void lastRevRecoveryJournalTestWithConcurrency() throws Exception {
  doLastRevRecoveryJournalTest(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Inspired by LastRevRecoveryTest.testRecover() - simplified and extended with journal related asserts 
 */
@Test public void lastRevRecoveryJournalTest() throws Exception {
  doLastRevRecoveryJournalTest(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LargeTreeOperationTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void setLargeSubtreeOnRoot() throws CommitFailedException {
  setLargeSubtree(new String[0]);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void setLargeSubtree() throws CommitFailedException {
  setLargeSubtree("child");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LastRevRecoveryRandomizedIT </h4><pre class="type-17 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void randomized() throws Exception {
  for (int i=0; i < 1000; i++) {
    boolean success=false;
    try {
switch (random.nextInt(10)) {
case 0:
case 1:
case 2:
        addNode();
      break;
case 3:
    addLeafNode();
  break;
case 4:
removeNode();
break;
case 5:
case 6:
setProperty();
break;
case 7:
merge();
break;
case 8:
purge();
break;
case 9:
bgOp();
break;
}
checkStore();
success=true;
}
  finally {
if (!success) {
int num=0;
for (String line : ops) {
System.out.println(num++ + ": " + line);
}
}
}
}
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LastRevTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void lastRev() throws Exception {
  DocumentNodeStore store=new DocumentMK.Builder().setAsyncDelay(0).getNodeStore();
  DocumentStore docStore=store.getDocumentStore();
  NodeBuilder root=store.getRoot().builder();
  for (int i=0; i < 10; i++) {
    NodeBuilder child=root.child("child-" + i);
    for (int j=0; j < 10; j++) {
      child.child("test-" + j);
    }
  }
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store.runBackgroundOperations();
  for (int i=0; i < 10; i++) {
    String parentPath="/child-" + i;
    assertLastRevSize(docStore,parentPath,0);
    for (int j=0; j < 10; j++) {
      String path=parentPath + "/test-" + j;
      assertLastRevSize(docStore,path,0);
    }
  }
  store.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MeasureMemory </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithoutProperties() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call(){
      DocumentNodeState n=generateNode(0);
      return new Object[]{n,n.getMemory() + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void revisionsKey() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call(){
      RevisionsKey k=new RevisionsKey(new RevisionVector(Revision.newRevision(0)),new RevisionVector(Revision.newRevision(0)));
      return new Object[]{k,k.getMemory() + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void revisionVector() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call() throws Exception {
      RevisionVector rv=new RevisionVector(Revision.newRevision(0),Revision.newRevision(1),Revision.newRevision(2),Revision.newRevision(3));
      return new Object[]{rv,rv.getMemory() + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeChildManyChildren() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call(){
      Children n=generateNodeChild(100);
      return new Object[]{n,n.getMemory() + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithBinaryProperty() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call(){
      DocumentNodeState n=generateNodeWithBinaryProperties(3);
      return new Object[]{n,n.getMemory() + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void node() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call(){
      DocumentNodeState n=generateNode(5);
      return new Object[]{n,n.getMemory() + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void overhead() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call(){
      return new Object[]{"",OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void revisionVectorSingle() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call() throws Exception {
      RevisionVector rv=new RevisionVector(Revision.newRevision(0));
      return new Object[]{rv,rv.getMemory() + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void basicObjectWithoutProperties() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call(){
      BasicDBObject n=generateBasicObject(0);
      return new Object[]{n,Utils.estimateMemoryUsage(n) + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeChild() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call(){
      Children n=generateNodeChild(5);
      return new Object[]{n,n.getMemory() + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void revision() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call() throws Exception {
      Revision r=Revision.newRevision(0);
      return new Object[]{r,r.getMemory() + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeChildWithoutChildren() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call(){
      Children n=generateNodeChild(0);
      return new Object[]{n,n.getMemory() + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void basicObject() throws Exception {
  measureMemory(new Callable<Object[]>(){
    @Override public Object[] call(){
      BasicDBObject n=generateBasicObject(15);
      return new Object[]{n,Utils.estimateMemoryUsage(n) + OVERHEAD};
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MergeRetryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for OAK-1198
 */
@Test public void retryInMemory() throws Exception {
  MemoryDocumentStore ds=new MemoryDocumentStore();
  MemoryBlobStore bs=new MemoryBlobStore();
  DocumentNodeStore ns1=createMK(1,1000,ds,bs);
  DocumentNodeStore ns2=createMK(2,1000,ds,bs);
  try {
    NodeBuilder builder1=ns1.getRoot().builder();
    builder1.child("bar");
    NodeBuilder builder2=ns2.getRoot().builder();
    builder2.child("qux");
    ns1.merge(builder1,HOOK,CommitInfo.EMPTY);
    ns2.merge(builder2,HOOK,CommitInfo.EMPTY);
  }
  finally {
    ns1.dispose();
    ns2.dispose();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for OAK-1202
 */
@Test public void retryPersisted() throws Exception {
  MemoryDocumentStore ds=new MemoryDocumentStore();
  MemoryBlobStore bs=new MemoryBlobStore();
  DocumentNodeStore ns1=createMK(1,1000,ds,bs);
  DocumentNodeStore ns2=createMK(2,1000,ds,bs);
  try {
    NodeBuilder builder1=ns1.getRoot().builder();
    createTree(builder1.child("bar"),2);
    NodeBuilder builder2=ns2.getRoot().builder();
    createTree(builder2.child("qux"),2);
    ns1.merge(builder1,HOOK,CommitInfo.EMPTY);
    ns2.merge(builder2,HOOK,CommitInfo.EMPTY);
  }
  finally {
    ns1.dispose();
    ns2.dispose();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoDbTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void updateDocument(){
  DB db=MongoUtils.getConnection().getDB();
  MongoUtils.dropCollections(db);
  DBCollection nodes=db.getCollection(Collection.NODES.toString());
  DBObject index=new BasicDBObject();
  index.put("_mod",-1L);
  index.put("_id",1L);
  DBObject options=new BasicDBObject();
  nodes.createIndex(index,options);
  long time;
  time=System.currentTimeMillis();
  int nodeCount=4500;
  String parent="/parent/node/abc";
  DBObject[] inserts=new DBObject[nodeCount];
  for (int i=0; i < nodeCount; i++) {
    BasicDBObject doc=new BasicDBObject();
    inserts[i]=doc;
    doc.put("_id",parent + "/node" + i);
    doc.put("_mod",0);
    doc.put("_counter",0);
    doc.put("x",10);
  }
  nodes.insert(inserts,WriteConcern.SAFE);
  time=System.currentTimeMillis() - time;
  System.out.println("insert: " + time);
  time=System.currentTimeMillis();
  for (int i=0; i < nodeCount; i++) {
    QueryBuilder queryBuilder=QueryBuilder.start(Document.ID).is(parent + "/node" + i);
    DBObject fields=new BasicDBObject();
    fields.put("_id",1);
    DBObject query=queryBuilder.get();
    BasicDBObject setUpdates=new BasicDBObject();
    BasicDBObject incUpdates=new BasicDBObject();
    BasicDBObject unsetUpdates=new BasicDBObject();
    setUpdates.append("_mod",i);
    incUpdates.append("_counter",1);
    unsetUpdates.append("x","1");
    BasicDBObject update=new BasicDBObject();
    if (!setUpdates.isEmpty()) {
      update.append("$set",setUpdates);
    }
    if (!incUpdates.isEmpty()) {
      update.append("$inc",incUpdates);
    }
    if (!unsetUpdates.isEmpty()) {
      update.append("$unset",unsetUpdates);
    }
    nodes.findAndModify(query,fields,null,false,update,false,true);
  }
  time=System.currentTimeMillis() - time;
  System.out.println("update: " + time);
  time=System.currentTimeMillis();
  db.getMongo().close();
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void manyChildNodes(){
  DB db=MongoUtils.getConnection().getDB();
  MongoUtils.dropCollections(db);
  DBCollection nodes=db.getCollection(Collection.NODES.toString());
  DBObject index=new BasicDBObject();
  index.put("_mod",-1L);
  index.put("_id",1L);
  DBObject options=new BasicDBObject();
  nodes.createIndex(index,options);
  int children=1000000;
  int perInsert=1000;
  int group=0;
  String parent="/parent/node/abc";
  for (int i=0; i < children; ) {
    DBObject[] inserts=new DBObject[perInsert];
    group++;
    for (int j=0; j < perInsert; j++, i++) {
      BasicDBObject doc=new BasicDBObject();
      inserts[j]=doc;
      doc.put("_id",parent + "/node" + i);
      doc.put("_mod",group);
    }
    nodes.insert(inserts,WriteConcern.SAFE);
    log("inserted " + i + "/"+ children);
  }
  QueryBuilder queryBuilder=QueryBuilder.start("_mod");
  queryBuilder.greaterThanEquals(group - 1);
  queryBuilder.and("_id").greaterThan(parent + "/");
  queryBuilder.and("_id").lessThanEquals(parent + "0");
  DBObject query=queryBuilder.get();
  BasicDBObject keys=new BasicDBObject();
  keys.put("_id",1);
  DBCursor cursor=nodes.find(query,keys);
  int count=0;
  log("Query plan: " + cursor.explain());
  long time=System.currentTimeMillis();
  while (cursor.hasNext()) {
    DBObject obj=cursor.next();
    obj.get("_id");
    count++;
  }
  time=System.currentTimeMillis() - time;
  log("Time: " + time + " ms");
  log("Count: " + count);
  db.getMongo().close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoDocumentStoreIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentLoop() throws Exception {
  long end=System.currentTimeMillis() + TimeUnit.SECONDS.toMillis(5);
  while (System.currentTimeMillis() < end) {
    concurrent();
    tearDownConnection();
    setUpConnection();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoDocumentStoreTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void batchInsert() throws Exception {
  doInsert(NODE_COUNT,true);
  doInsert(NODE_COUNT,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addLotsOfNodes() throws Exception {
  char[] nPrefix=new char[]{'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'};
  int nNodes=NODE_COUNT;
  for (int nThreads=1; nThreads < 32; nThreads=nThreads * 2) {
    DocumentStore docStore=openDocumentStore();
    dropCollections();
    log("Adding and updating " + nNodes + " nodes in each "+ nThreads+ " threads");
    long start=System.currentTimeMillis();
    ExecutorService executor=Executors.newFixedThreadPool(nThreads);
    for (int j=0; j < nThreads; j++) {
      executor.submit(new AddAndUpdateNodesTask(docStore,"node" + nPrefix[j],nNodes));
    }
    executor.shutdown();
    executor.awaitTermination(1,TimeUnit.MINUTES);
    long end=System.currentTimeMillis();
    log("Done: " + (end - start) + "ms");
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void batchAdd() throws Exception {
  DocumentStore docStore=openDocumentStore();
  Revision r1=new Revision(0,0,0);
  int nUpdates=10;
  List<UpdateOp> updateOps=new ArrayList<UpdateOp>();
  for (int i=0; i < nUpdates; i++) {
    String path="/node" + i;
    UpdateOp updateOp=new UpdateOp(path,true);
    updateOp.set(Document.ID,"/node" + i);
    updateOp.setMapEntry("property1",r1,"value1");
    updateOp.increment("property2",1);
    updateOp.set("property3","value3");
    updateOps.add(updateOp);
  }
  docStore.create(Collection.NODES,updateOps);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MultiDocumentStoreTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void concurrentUpdate() throws Exception {
  String id=Utils.getIdFromPath("/foo");
  ds1.remove(Collection.NODES,id);
  ds2.invalidateCache();
  removeMe.add(id);
  UpdateOp op=new UpdateOp(id,true);
  op.set(Document.ID,id);
  ds1.create(Collection.NODES,Collections.singletonList(op));
  List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  List<Thread> threads=Lists.newArrayList();
  threads.add(new Thread(new Updater(ds1,id,exceptions)));
  threads.add(new Thread(new Updater(ds2,id,exceptions)));
  Reader r=new Reader(id,exceptions,ds1,ds2);
  Thread reader=new Thread(r);
  for (  Thread t : threads) {
    t.start();
  }
  reader.start();
  for (  Thread t : threads) {
    t.join();
  }
  r.terminate();
  reader.join();
  for (  Exception e : exceptions) {
    throw e;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.NodeDocumentTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void splitCollisions() throws Exception {
  MemoryDocumentStore docStore=new MemoryDocumentStore();
  String id=Utils.getPathFromId("/");
  NodeDocument doc=new NodeDocument(docStore);
  doc.put(Document.ID,id);
  UpdateOp op=new UpdateOp(id,false);
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD + 1; i++) {
    Revision r=Revision.newRevision(1);
    NodeDocument.setRevision(op,r,"c");
    NodeDocument.addCollision(op,r,Revision.newRevision(1));
  }
  UpdateUtils.applyChanges(doc,op);
  RevisionVector head=DummyRevisionContext.INSTANCE.getHeadRevision();
  doc.split(DummyRevisionContext.INSTANCE,head);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.NodeStoreDiffTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void diffWithConflict() throws Exception {
  createNodes("/var/a","/var/b/b1");
  createNodes("/fake/b");
  createNodes("/fake/c");
  NodeBuilder b1=ns.getRoot().builder();
  createNodes(b1,"/var/a/a1");
  NodeBuilder b2=ns.getRoot().builder();
  b2.child("var").child("b").child("b1").remove();
  merge(b2);
  ns.merge(b1,new CompositeHook(new ConflictHook(new AnnotatingConflictHandler()),new EditorHook(new ConflictValidatorProvider())),CommitInfo.EMPTY);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RevisionVectorTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void exceptionOnGetBranchRevision(){
  RevisionVector rv=new RevisionVector();
  rv.getBranchRevision();
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void asBranchRevision1(){
  new RevisionVector().asBranchRevision(1);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void asBranchRevision2(){
  new RevisionVector(new Revision(1,0,1)).asBranchRevision(2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ValueMapTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mergeSorted1() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  Revision r1=new Revision(1,0,1);
  Revision r2=new Revision(2,0,1);
  Revision r3=new Revision(3,0,1);
  Revision r4=new Revision(4,0,1);
  Revision r5=new Revision(5,0,1);
  Revision r6=new Revision(6,0,1);
  Revision r7=new Revision(7,0,1);
  Range range1=new Range(r7,r5,0);
  Range range2=new Range(r4,r1,0);
  String prevId1=Utils.getPreviousIdFor("/",range1.high,0);
  UpdateOp prevOp1=new UpdateOp(prevId1,true);
  prevOp1.set(Document.ID,prevId1);
  NodeDocument.setRevision(prevOp1,r5,"c");
  NodeDocument.setRevision(prevOp1,r7,"c");
  String prevId2=Utils.getPreviousIdFor("/",range2.high,0);
  UpdateOp prevOp2=new UpdateOp(prevId2,true);
  prevOp1.set(Document.ID,prevId2);
  NodeDocument.setRevision(prevOp2,r1,"c");
  NodeDocument.setRevision(prevOp2,r2,"c");
  NodeDocument.setRevision(prevOp2,r4,"c");
  String rootId=Utils.getIdFromPath("/");
  UpdateOp op=new UpdateOp(rootId,true);
  op.set(Document.ID,rootId);
  NodeDocument.setRevision(op,r3,"c");
  NodeDocument.setRevision(op,r6,"c");
  NodeDocument.setPrevious(op,range1);
  NodeDocument.setPrevious(op,range2);
  store.create(NODES,Lists.newArrayList(op,prevOp1,prevOp2));
  NodeDocument doc=store.find(NODES,rootId);
  Iterators.size(doc.getValueMap(NodeDocument.REVISIONS).entrySet().iterator());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mergeSorted() throws Exception {
  DocumentNodeStore store=new DocumentMK.Builder().setAsyncDelay(0).getNodeStore();
  DocumentStore docStore=store.getDocumentStore();
  String id=Utils.getIdFromPath("/");
  List<NodeBuilder> branches=Lists.newArrayList();
  int i=0;
  while (docStore.find(NODES,id).getPreviousRanges().size() < 2) {
    i++;
    NodeBuilder builder=store.getRoot().builder();
    builder.child("foo").setProperty("prop",i);
    builder.child("bar").setProperty("prop",i);
    if (i % 7 == 0) {
      int numRevs=docStore.find(NODES,id).getLocalRevisions().size();
      NodeBuilder child=builder.child("node" + i);
      int p=0;
      while (numRevs == docStore.find(NODES,id).getLocalRevisions().size()) {
        child.setProperty("prop",p++);
      }
      branches.add(builder);
    }
 else {
      store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    }
    store.runBackgroundOperations();
  }
  NodeDocument doc=docStore.find(NODES,id);
  Iterators.size(doc.getValueMap(NodeDocument.REVISIONS).entrySet().iterator());
  store.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.VersionGarbageCollectorIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void gcSplitDocs() throws Exception {
  gcSplitDocsInternal("foo");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void gcLongPathSplitDocs() throws Exception {
  gcSplitDocsInternal(Strings.repeat("sub",120));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.blob.DocumentMKGetLengthGridFSTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void medium() throws Exception {
  getLength(1024 * 1024);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void large() throws Exception {
  getLength(20 * 1024 * 1024);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void small() throws Exception {
  getLength(1024);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.blob.DocumentMKGetLengthTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void medium() throws Exception {
  getLength(1024 * 1024);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void large() throws Exception {
  getLength(20 * 1024 * 1024);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void small() throws Exception {
  getLength(1024);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.blob.DocumentMKReadGridFSTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void medium() throws Exception {
  read(1024 * 1024);
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void large() throws Exception {
  read(20 * 1024 * 1024);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void small() throws Exception {
  read(1024);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.blob.DocumentMKReadTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void medium() throws Exception {
  read(1024 * 1024,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void small() throws Exception {
  read(1024,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void large() throws Exception {
  read(20 * 1024 * 1024,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.blob.DocumentMKWriteGridFSTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void large() throws Exception {
  write(20 * 1024 * 1024);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void medium() throws Exception {
  write(1024 * 1024);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void small() throws Exception {
  write(1024);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.blob.DocumentMKWriteTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void medium() throws Exception {
  write(1024 * 1024);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void small() throws Exception {
  write(1024);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void large() throws Exception {
  write(20 * 1024 * 1024);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.blob.RDBBlobStoreTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResilienceMissingMetaEntry() throws Exception {
  int test=1024 * 1024;
  byte[] data=new byte[test];
  Random r=new Random(0);
  r.nextBytes(data);
  byte[] digest=getDigest(data);
  RDBBlobStoreFriend.storeBlock(blobStore,digest,0,data);
  byte[] data2=RDBBlobStoreFriend.readBlockFromBackend(blobStore,digest);
  if (!Arrays.equals(data,data2)) {
    throw new Exception("data mismatch");
  }
  RDBBlobStoreFriend.killMetaEntry(blobStore,digest);
  RDBBlobStoreFriend.storeBlock(blobStore,digest,0,data);
  byte[] data3=RDBBlobStoreFriend.readBlockFromBackend(blobStore,digest);
  if (!Arrays.equals(data,data3)) {
    throw new Exception("data mismatch");
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteManyBlobs() throws Exception {
  int count=3000;
  List<String> toDelete=new ArrayList<String>();
  for (int i=0; i < count; i++) {
    byte[] data=new byte[256];
    Random r=new Random(0);
    r.nextBytes(data);
    byte[] digest=getDigest(data);
    RDBBlobStoreFriend.storeBlock(blobStore,digest,0,data);
    byte[] data2=RDBBlobStoreFriend.readBlockFromBackend(blobStore,digest);
    if (!Arrays.equals(data,data2)) {
      throw new Exception("data mismatch for length " + data.length);
    }
    String id=StringUtils.convertBytesToHex(digest);
    toDelete.add(id);
  }
  RDBBlobStoreFriend.deleteChunks(blobStore,toDelete,System.currentTimeMillis() + 1000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.impl.DocumentMKConcurrentAddTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Creates NB_THREADS microkernels, each committing two nodes (one parent,
 * one child) in its own thread. The nodes being committed by separate
 * threads do not overlap / conflict.
 * @throws Exception
 */
@Test public void testConcurrentAdd() throws Exception {
  List<Callable<String>> cs=new LinkedList<Callable<String>>();
  for (int i=0; i < NB_THREADS; i++) {
    final DocumentMK mk=createMicroKernel(super.mk.getNodeStore().getClusterId() + 1 + i);
    mks.add(mk);
    final List<String> stmts=new LinkedList<String>();
    stmts.add("+\"node" + i + "\":{}");
    stmts.add("+\"node" + i + "/child\":{}");
    Callable<String> c=new Callable<String>(){
      @Override public String call() throws Exception {
        String r=null;
        for (        String stmt : stmts) {
          r=mk.commit("/",stmt,null,"msg");
        }
        return r;
      }
    }
;
    cs.add(c);
  }
  ExecutorService executor=Executors.newFixedThreadPool(NB_THREADS);
  List<Future<String>> fs=new LinkedList<Future<String>>();
  for (  Callable<String> c : cs) {
    fs.add(executor.submit(c));
  }
  executor.shutdown();
  executor.awaitTermination(10,TimeUnit.SECONDS);
  for (  Future<String> f : fs) {
    f.get();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.impl.DocumentMKLimitsTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
/** 
 * This test currently fails due to 1000 char limit in property sizes in
 * MongoDB which affects path property. It also slows down as the test
 * progresses.
 */
@Test @Ignore public void pathLimit(){
  String path="/";
  String baseNodeName="testingtestingtesting";
  int numberOfCommits=100;
  String jsonDiff;
  String message;
  for (int i=0; i < numberOfCommits; i++) {
    jsonDiff="+\"" + baseNodeName + i+ "\" : {}";
    message="Add node n" + i;
    mk.commit(path,jsonDiff,null,message);
    if (!PathUtils.denotesRoot(path)) {
      path+="/";
    }
    path+=baseNodeName + i;
  }
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
/** 
 * This currently fails due to 16MB DBObject size limitation from Mongo
 * database.
 */
@Test @Ignore public void overMaxBSONLimit(){
  String path="/";
  String baseNodeName="N";
  StringBuilder jsonDiff=new StringBuilder();
  String message;
  char[] chars=new char[1024 * 1024];
  Arrays.fill(chars,'0');
  String content=new String(chars);
  for (int i=0; i < 16; i++) {
    jsonDiff.append("+\"" + baseNodeName + i+ "\" : {\"key\":\""+ content+ "\"}\n");
  }
  String diff=jsonDiff.toString();
  message="Commit diff size " + diff.getBytes().length;
  System.out.println(message);
  mk.commit(path,diff,null,message);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.impl.command.ConcurrentWriteMultipleMkMongoTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testLarge() throws Exception {
  doTest(10000);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSmall() throws Exception {
  doTest(1000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.locks.NodeDocumentLocksTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBulkAcquireNonConflicting() throws InterruptedException {
  testBulkAcquire(false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBulkAcquireConflicting() throws InterruptedException {
  testBulkAcquire(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.CacheConsistencyIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void evictWhileUpdateLoop() throws Throwable {
  for (int i=0; i < 10; i++) {
    runTest();
    tearDownConnection();
    setUpConnection();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.JournalIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void largeCleanupTest() throws Exception {
  doLargeCleanupTest(0,100);
  doLargeCleanupTest(200,1000);
  doLargeCleanupTest(2000,10000);
  doLargeCleanupTest(20000,30000);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheInvalidationTest() throws Exception {
  final DocumentNodeStore ns1=createMK(1,0).getNodeStore();
  final DocumentNodeStore ns2=createMK(2,0).getNodeStore();
  LOG.info("cache size 1: " + getCacheElementCount(ns1.getDocumentStore()));
  invalidateDocChildrenCache(ns1);
  ns1.getDocumentStore().invalidateCache();
{
    DocumentStore s=ns1.getDocumentStore();
    LOG.info("m.size=" + getCacheElementCount(s));
  }
  LOG.info("cache size 2: " + getCacheElementCount(ns1.getDocumentStore()));
  final List<String> paths=createRandomPaths(1,5000000,1000);
  int i=0;
  for (  String path : paths) {
    if (i++ % 100 == 0) {
      LOG.info("at " + i);
    }
    getOrCreate(ns1,path,false);
  }
  final List<String> paths2=createRandomPaths(20,2345,100);
  getOrCreate(ns1,paths2,false);
  ns1.runBackgroundOperations();
  for (  String path : paths) {
    assertDocCache(ns1,true,path);
  }
{
    DocumentStore s=ns1.getDocumentStore();
    LOG.info("m.size=" + getCacheElementCount(s));
  }
  LOG.info("cache size 2: " + getCacheElementCount(ns1.getDocumentStore()));
  long time=System.currentTimeMillis();
  for (int j=0; j < 100; j++) {
    long now=System.currentTimeMillis();
    LOG.info("loop " + j + ", "+ (now - time)+ "ms");
    time=now;
    final Set<String> electedPaths=choose(paths2,random.nextInt(30));
{
      final long t1=System.currentTimeMillis();
      ns2.runBackgroundOperations();
      final long t2=System.currentTimeMillis();
      LOG.info("ns2 background took " + (t2 - t1) + "ms");
      for (      String electedPath : electedPaths) {
        setProperty(ns2,electedPath,"p","ns2" + System.currentTimeMillis(),false);
      }
      final long t3=System.currentTimeMillis();
      LOG.info("setting props " + (t3 - t2) + "ms");
      ns2.runBackgroundOperations();
      final long t4=System.currentTimeMillis();
      LOG.info("ns2 background took2 " + (t4 - t3) + "ms");
    }
    for (    String electedPath : electedPaths) {
      assertDocCache(ns1,true,electedPath);
    }
    ns1.runBackgroundOperations();
    for (    String electedPath : electedPaths) {
      assertDocCache(ns1,false,electedPath);
    }
    for (    String electedPath : electedPaths) {
      getOrCreate(ns1,electedPath,false);
      assertDocCache(ns1,true,electedPath);
    }
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void simpleCacheInvalidationTest() throws Exception {
  final DocumentNodeStore ns1=createMK(1,0).getNodeStore();
  final DocumentNodeStore ns2=createMK(2,0).getNodeStore();
  invalidateDocChildrenCache(ns1);
  ns1.getDocumentStore().invalidateCache();
  getOrCreate(ns1,"/child",true);
  assertDocCache(ns1,true,"/child");
{
    ns2.runBackgroundOperations();
    setProperty(ns2,"/child","p","ns2" + System.currentTimeMillis(),true);
  }
  assertDocCache(ns1,true,"/child");
  ns1.runBackgroundOperations();
  assertDocCache(ns1,false,"/child");
  getOrCreate(ns1,"/child",false);
  assertDocCache(ns1,true,"/child");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.MongoConnectionTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sufficientWriteConcern() throws Exception {
  sufficientWriteConcernReplicaSet(WriteConcern.ACKNOWLEDGED,false);
  sufficientWriteConcernReplicaSet(WriteConcern.JOURNALED,false);
  sufficientWriteConcernReplicaSet(WriteConcern.MAJORITY,true);
  sufficientWriteConcernReplicaSet(WriteConcern.FSYNC_SAFE,false);
  sufficientWriteConcernReplicaSet(WriteConcern.FSYNCED,false);
  sufficientWriteConcernReplicaSet(WriteConcern.JOURNAL_SAFE,false);
  sufficientWriteConcernReplicaSet(WriteConcern.NORMAL,false);
  sufficientWriteConcernReplicaSet(WriteConcern.REPLICA_ACKNOWLEDGED,true);
  sufficientWriteConcernReplicaSet(WriteConcern.REPLICAS_SAFE,true);
  sufficientWriteConcernReplicaSet(WriteConcern.SAFE,false);
  sufficientWriteConcernReplicaSet(WriteConcern.UNACKNOWLEDGED,false);
  sufficientWriteConcernSingleNode(WriteConcern.ACKNOWLEDGED,true);
  sufficientWriteConcernSingleNode(WriteConcern.JOURNALED,true);
  sufficientWriteConcernSingleNode(WriteConcern.MAJORITY,true);
  sufficientWriteConcernSingleNode(WriteConcern.FSYNC_SAFE,true);
  sufficientWriteConcernSingleNode(WriteConcern.FSYNCED,true);
  sufficientWriteConcernSingleNode(WriteConcern.JOURNAL_SAFE,true);
  sufficientWriteConcernSingleNode(WriteConcern.NORMAL,false);
  sufficientWriteConcernSingleNode(WriteConcern.REPLICA_ACKNOWLEDGED,true);
  sufficientWriteConcernSingleNode(WriteConcern.REPLICAS_SAFE,true);
  sufficientWriteConcernSingleNode(WriteConcern.SAFE,true);
  sufficientWriteConcernSingleNode(WriteConcern.UNACKNOWLEDGED,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.MongoUtilsTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void checkArguments(){
  MongoConnection c=connectionFactory.getConnection();
  DBCollection collection=c.getDB().getCollection("test");
  MongoUtils.createIndex(collection,new String[]{"foo","bar"},new boolean[]{true},false,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.persistentCache.BroadcastTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-2843") public void broadcastEncryptedUDP() throws Exception {
  try {
    broadcast("udp:group FF78:230::1234;key test;port 9876;sendTo localhost;aes",50);
  }
 catch (  AssertionError e) {
    try {
      broadcast("udp:group 228.6.7.9;key test;port 9876;aes",50);
    }
 catch (    AssertionError e2) {
      throwBoth(e,e2);
    }
  }
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("OAK-3887") @Test public void broadcastTCP() throws Exception {
  broadcast("tcp:sendTo localhost;key 123",90);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void broadcastInMemory() throws Exception {
  broadcast("inMemory",100);
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-2843") public void broadcastUDP() throws Exception {
  try {
    broadcast("udp:sendTo localhost",50);
  }
 catch (  AssertionError e) {
    try {
      broadcast("udp:group 228.6.7.9",50);
    }
 catch (    AssertionError e2) {
      throwBoth(e,e2);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.persistentCache.CacheTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test() throws Exception {
  FileUtils.deleteDirectory(new File("target/cacheTest"));
  PersistentCache cache=new PersistentCache("target/cacheTest,size=1,-compress");
  try {
    MemoryBlobStore mem=new MemoryBlobStore();
    mem.setBlockSizeMin(100);
    BlobStore b=cache.wrapBlobStore(mem);
    Random r=new Random();
    for (int i=0; i < 10000; i++) {
      byte[] data=new byte[100];
      r.nextBytes(data);
      String id=b.writeBlob(new ByteArrayInputStream(data));
      b.readBlob(id,0,new byte[1],0,1);
    }
  }
  finally {
    cache.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBCacheConsistencyIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void evictWhileUpdateLoop() throws Throwable {
  for (int i=0; i < 10; i++) {
    runTest();
    tearDownConnection();
    setUpConnection();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBDocumentSerializerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvalidJson(){
  RDBJSONSupport json=new RDBJSONSupport(false);
  String tests[]=new String[]{"x","\"","{a:1}","[false,]"};
  for (  String test : tests) {
    try {
      json.parse(test);
    }
 catch (    IllegalArgumentException expected) {
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBDocumentStorePerformanceTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPerfUpdateAppendString() throws SQLException, UnsupportedEncodingException {
  internalTestPerfUpdateLimit("testPerfUpdateAppendString","raw row update (append string)",3);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPerfUpdateLimitStringBlob() throws SQLException, UnsupportedEncodingException {
  internalTestPerfUpdateLimit("testPerfUpdateLimitStringBlob","raw row update (set long/string/blob)",2);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPerfUpdateGrowingDoc() throws SQLException, UnsupportedEncodingException {
  internalTestPerfUpdateLimit("testPerfUpdateGrowingDoc","raw row update (string + blob)",4);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPerfUpdateLimit() throws SQLException, UnsupportedEncodingException {
  internalTestPerfUpdateLimit("testPerfUpdateLimit","raw row update (set long)",0);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPerfUpdateLimitString() throws SQLException, UnsupportedEncodingException {
  internalTestPerfUpdateLimit("testPerfUpdateLimitString","raw row update (set long/string)",1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.util.MergeSortedIteratorsTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * See OAK-1233 and OAK-1479
 */
@Test(expected=IllegalStateException.class) public void testData(){
  List<Iterator<Revision>> iterators=prepareData();
  final Iterator<Iterator<Revision>> it=iterators.iterator();
  final Comparator<Revision> comp=StableRevisionComparator.REVERSE;
  MergeSortedIterators<Revision> sort=new MergeSortedIterators<Revision>(comp){
    @Override public Iterator<Revision> nextIterator(){
      return it.hasNext() ? it.next() : null;
    }
  }
;
  while (sort.hasNext()) {
    sort.next();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.util.TimingDocumentStoreWrapperTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void createOrUpdate(){
  DocumentStore store=new TimingDocumentStoreWrapper(new MemoryDocumentStore());
  UpdateOp op=new UpdateOp("foo",true);
  op.set(Document.ID,"foo");
  store.createOrUpdate(Collection.NODES,Collections.singletonList(op));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.util.UtilsTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("Performance test") @Test public void performance_getPreviousIdFor(){
  Revision r=new Revision(System.currentTimeMillis(),0,0);
  String path="/some/test/path/foo";
  for (int i=0; i < 1 * 1000 * 1000; i++) {
    Utils.getPreviousIdFor(path,r,0);
  }
  long time=System.currentTimeMillis();
  for (int i=0; i < 10 * 1000 * 1000; i++) {
    Utils.getPreviousIdFor(path,r,0);
  }
  time=System.currentTimeMillis() - time;
  System.out.println(time);
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("Performance test") @Test public void performance_revisionToString(){
  Revision r=new Revision(System.currentTimeMillis(),0,0);
  for (int i=0; i < 1 * 1000 * 1000; i++) {
    r.toString();
  }
  long time=System.currentTimeMillis();
  for (int i=0; i < 30 * 1000 * 1000; i++) {
    r.toString();
  }
  time=System.currentTimeMillis() - time;
  System.out.println(time);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdateLeaseTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostPrepareReindexLeaseExpired() throws Exception {
  final long lease=50;
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void postPrepare(){
      executed.set(true);
      try {
        TimeUnit.MILLISECONDS.sleep(lease * 3);
      }
 catch (      InterruptedException e) {
      }
      assertRunOk(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunKo(new SpecialAsyncIndexUpdate(name,store,provider,l1).setLeaseTimeOut(lease));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreClose() throws Exception {
  new AsyncIndexUpdate(name,store,provider).run();
  testContent(store);
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void preClose(){
      executed.set(true);
      assertRunKo(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunOk(new SpecialAsyncIndexUpdate(name,store,provider,l1));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreIndexUpdateReindex() throws Exception {
  testContent(store);
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void preIndexUpdate(){
      executed.set(true);
      assertRunKo(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunOk(new SpecialAsyncIndexUpdate(name,store,provider,l1));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostIndexUpdate() throws Exception {
  new AsyncIndexUpdate(name,store,provider).run();
  testContent(store);
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void postIndexUpdate(){
      executed.set(true);
      assertRunKo(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunOk(new SpecialAsyncIndexUpdate(name,store,provider,l1));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostIndexUpdateReindex() throws Exception {
  testContent(store);
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void postIndexUpdate(){
      executed.set(true);
      assertRunKo(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunOk(new SpecialAsyncIndexUpdate(name,store,provider,l1));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostIndexUpdateLeaseExpired() throws Exception {
  new AsyncIndexUpdate(name,store,provider).run();
  testContent(store);
  final long lease=50;
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void postIndexUpdate(){
      executed.set(true);
      try {
        TimeUnit.MILLISECONDS.sleep(lease * 3);
      }
 catch (      InterruptedException e) {
      }
      assertRunOk(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunKo(new SpecialAsyncIndexUpdate(name,store,provider,l1).setLeaseTimeOut(lease));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreIndexUpdate() throws Exception {
  new AsyncIndexUpdate(name,store,provider).run();
  testContent(store);
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void preIndexUpdate(){
      executed.set(true);
      assertRunKo(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunOk(new SpecialAsyncIndexUpdate(name,store,provider,l1));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreIndexUpdateReindexLeaseExpired() throws Exception {
  final long lease=50;
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void preIndexUpdate(){
      executed.set(true);
      try {
        TimeUnit.MILLISECONDS.sleep(lease * 3);
      }
 catch (      InterruptedException e) {
      }
      assertRunOk(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunKo(new SpecialAsyncIndexUpdate(name,store,provider,l1).setLeaseTimeOut(lease));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostPrepare(){
  new AsyncIndexUpdate(name,store,provider).run();
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void postPrepare(){
      executed.set(true);
      assertRunKo(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunOk(new SpecialAsyncIndexUpdate(name,store,provider,l1));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPrePrepareRexindex() throws Exception {
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void prePrepare(){
      executed.set(true);
      assertRunOk(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunOk(new SpecialAsyncIndexUpdate(name,store,provider,l1));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostPrepareLeaseExpired() throws Exception {
  new AsyncIndexUpdate(name,store,provider).run();
  final long lease=50;
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void postPrepare(){
      executed.set(true);
      try {
        TimeUnit.MILLISECONDS.sleep(lease * 3);
      }
 catch (      InterruptedException e) {
      }
      assertRunOk(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunKo(new SpecialAsyncIndexUpdate(name,store,provider,l1).setLeaseTimeOut(lease));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostIndexUpdateReindexLeaseExpired() throws Exception {
  final long lease=50;
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void postIndexUpdate(){
      executed.set(true);
      try {
        TimeUnit.MILLISECONDS.sleep(lease * 3);
      }
 catch (      InterruptedException e) {
      }
      assertRunOk(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunKo(new SpecialAsyncIndexUpdate(name,store,provider,l1).setLeaseTimeOut(lease));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreIndexUpdateLeaseExpired() throws Exception {
  new AsyncIndexUpdate(name,store,provider).run();
  testContent(store);
  final long lease=50;
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void preIndexUpdate(){
      executed.set(true);
      try {
        TimeUnit.MILLISECONDS.sleep(lease * 3);
      }
 catch (      InterruptedException e) {
      }
      assertRunOk(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunKo(new SpecialAsyncIndexUpdate(name,store,provider,l1).setLeaseTimeOut(lease));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPrePrepare() throws Exception {
  new AsyncIndexUpdate(name,store,provider).run();
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void prePrepare(){
      executed.set(true);
      assertRunOk(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunKo(new SpecialAsyncIndexUpdate(name,store,provider,l1));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostPrepareReindex(){
  final IndexStatusListener l1=new IndexStatusListener(){
    @Override protected void postPrepare(){
      executed.set(true);
      assertRunKo(new AsyncIndexUpdate(name,store,provider));
    }
  }
;
  assertRunOk(new SpecialAsyncIndexUpdate(name,store,provider,l1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdateTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * OAK-1959, stale ref to checkpoint thorws the indexer into a reindexing
 * loop
 */
@Test public void recoverFromMissingCpRef() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  new AsyncIndexUpdate("async",store,provider).run();
  checkPathExists(store.getRoot(),INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME,"abc","testRoot");
  builder=store.getRoot().builder();
  builder.child(AsyncIndexUpdate.ASYNC).setProperty("async","faulty");
  builder.child("testAnother").setProperty("foo","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  new AsyncIndexUpdate("async",store,provider).run();
  checkPathExists(store.getRoot(),INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME,"def","testAnother");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void failOnConflict() throws Exception {
  final Map<Thread,Semaphore> locks=Maps.newIdentityHashMap();
  NodeStore store=new MemoryNodeStore(){
    @Nonnull @Override public NodeState merge(    @Nonnull NodeBuilder builder,    @Nonnull CommitHook commitHook,    @Nullable CommitInfo info) throws CommitFailedException {
      Semaphore s=locks.get(Thread.currentThread());
      if (s != null) {
        s.acquireUninterruptibly();
      }
      return super.merge(builder,commitHook,info);
    }
  }
;
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",false,ImmutableSet.of("foo"),null,TYPE,Collections.singletonMap(ASYNC_PROPERTY_NAME,"async"));
  builder.child("test").setProperty("foo","a");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  builder=store.getRoot().builder();
  builder.child("test").setProperty("foo","b");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      async.run();
    }
  }
);
  Semaphore s=new Semaphore(0);
  locks.put(t,s);
  t.start();
  builder=store.getRoot().builder();
  builder.setChildNode("dummy").setProperty("foo","bar");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  while (!s.hasQueuedThreads()) {
    Thread.yield();
  }
  builder=store.getRoot().builder();
  builder.getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("foo").getChildNode(":index").child("a").remove();
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  s.release(100);
  t.join();
  builder=store.getRoot().builder();
  assertNoConflictMarker(builder);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.IndexUpdateTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIndexDefinitions() throws Exception {
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"existing",true,false,ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  NodeBuilder other=builder.child("test").child("other");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  createIndexDefinition(other.child(INDEX_DEFINITIONS_NAME),"index2",true,false,ImmutableSet.of("foo"),null);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"existing",INDEX_CONTENT_NODE_NAME);
  checkPathExists(indexed,"test","other",INDEX_DEFINITIONS_NAME,"index2",INDEX_CONTENT_NODE_NAME);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexAugmentorFactoryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void compositeIndexProvider(){
  final String typeA="type:A";
  final String typeB="type:B";
  final String typeC="type:C";
  final String typeD="type:D";
  context.registerInjectActivateService(indexAugmentorFactory);
  new IdentifiableIndexFiledProvider("1",Sets.newHashSet(typeA,typeB));
  new IdentifiableIndexFiledProvider("2",Sets.newHashSet(typeC));
  new IdentifiableIndexFiledProvider("3",Sets.newHashSet(typeA,typeB));
  IndexFieldProvider unreg=new IdentifiableIndexFiledProvider("4",Sets.newHashSet(typeD));
  indexAugmentorFactory.unbindIndexFieldProvider(unreg);
  validateComposedFields(typeA,"1","3");
  validateComposedFields(typeC,"2");
  validateComposedFields(typeD);
  MockOsgi.deactivate(indexAugmentorFactory,context.bundleContext(),Collections.EMPTY_MAP);
  validateDeactivatedService();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void compositeQueryTermsProvider(){
  final String typeA="type:A";
  final String typeB="type:B";
  final String typeC="type:C";
  final String typeD="type:D";
  final String typeE="type:E";
  context.registerInjectActivateService(indexAugmentorFactory);
  new IdentifiableQueryTermsProvider("1",Sets.newHashSet(typeA,typeB));
  new IdentifiableQueryTermsProvider("2",Sets.newHashSet(typeC));
  new IdentifiableQueryTermsProvider("3",Sets.newHashSet(typeA,typeB));
  new IdentifiableQueryTermsProvider(null,Sets.newHashSet(typeE));
  FulltextQueryTermsProvider unreg=new IdentifiableQueryTermsProvider("4",Sets.newHashSet(typeD));
  indexAugmentorFactory.unbindFulltextQueryTermsProvider(unreg);
  validateComposedQueryTerms(typeA,"1","3");
  validateComposedQueryTerms(typeC,"2");
  validateComposedQueryTerms(typeD);
  validateComposedQueryTerms(typeE);
  MockOsgi.deactivate(indexAugmentorFactory,context.bundleContext(),Collections.EMPTY_MAP);
  validateDeactivatedService();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexCopierTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void deletedOnlyFilesForOlderVersion() throws Exception {
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote1=new RAMDirectory();
  byte[] t1=writeFile(remote1,"t1");
  Directory local1=copier.wrapForRead("/foo",defn,remote1);
  readAndAssert(local1,"t1",t1);
  Directory remote2=new RAMDirectory();
  byte[] t2=writeFile(remote2,"t2");
  Directory local2=copier.wrapForRead("/foo",defn,remote2);
  readAndAssert(local2,"t2",t2);
  local1.close();
  readAndAssert(local2,"t2",t2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexDefinitionTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void nullCheckEnabledWithRegex() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child(TestUtil.NT_TEST);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.PROP_NULL_CHECK_ENABLED,true);
  root=registerTestNodeType(builder).getNodeState();
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void nullCheckEnabledWithNtBase() throws Exception {
  builder.child(PROP_NODE).child("foo").setProperty(LuceneIndexConstants.PROP_NULL_CHECK_ENABLED,true);
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneBlobCacheTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLuceneBlobCached() throws Exception {
  Directory dir=createDir(builder,false);
  assertWrites(dir,IndexDefinition.DEFAULT_BLOB_SIZE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexAggregationTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDifferentNodes() throws Exception {
  Tree folder=root.getTree("/").addChild("myFolder");
  folder.setProperty(JCR_PRIMARYTYPE,NT_FOLDER,Type.NAME);
  Tree file=folder.addChild("myFile");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE,Type.NAME);
  file.setProperty("jcr:title","title");
  file.setProperty("jcr:description","description");
  Tree resource=file.addChild(JCR_CONTENT);
  resource.setProperty(JCR_PRIMARYTYPE,"nt:resource",Type.NAME);
  resource.setProperty("jcr:lastModified",Calendar.getInstance());
  resource.setProperty("jcr:encoding","UTF-8");
  resource.setProperty("jcr:mimeType","text/plain");
  resource.setProperty(binaryProperty(JCR_DATA,"the quick brown fox jumps over the lazy dog."));
  root.commit();
  assertQuery("//element(*, nt:file)[jcr:contains(., 'dog')]","xpath",ImmutableList.of("/myFolder/myFile"));
  assertQuery("//element(*, nt:file)[jcr:contains(., 'title')]","xpath",ImmutableList.of("/myFolder/myFile"));
  assertQuery("//element(*, nt:file)[jcr:contains(., 'dog') and jcr:contains(., 'title')]","xpath",ImmutableList.of("/myFolder/myFile"));
  assertQuery("//*[(jcr:contains(., 'dog') or jcr:contains(jcr:content, 'dog') )]","xpath",ImmutableList.of("/myFolder","/myFolder/myFile","/myFolder/myFile/jcr:content"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChildNodeWithOr() throws Exception {
  Tree file=root.getTree("/").addChild("myFile");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE,Type.NAME);
  Tree resource=file.addChild(JCR_CONTENT);
  resource.setProperty(JCR_PRIMARYTYPE,"nt:resource",Type.NAME);
  resource.setProperty("jcr:lastModified",Calendar.getInstance());
  resource.setProperty("jcr:encoding","UTF-8");
  resource.setProperty("jcr:mimeType","text/plain");
  resource.setProperty(binaryProperty(JCR_DATA,"the quick brown fox jumps over the lazy dog."));
  resource.setProperty("jcr:title","title");
  resource.setProperty("jcr:description","description");
  root.commit();
  String matchContentSimple="//element(*, nt:file)[(jcr:contains(jcr:content, 'dog'))]";
  assertQuery(matchContentSimple,"xpath",ImmutableList.of("/myFile"));
  String matchContent=" //element(*, nt:file)[(jcr:contains(jcr:content, 'dog') or jcr:contains(jcr:content/@jcr:title, 'invalid') or jcr:contains(jcr:content/@jcr:description, 'invalid'))]";
  assertQuery(matchContent,"xpath",ImmutableList.of("/myFile"));
  String matchTitle=" //element(*, nt:file)[(jcr:contains(jcr:content, 'invalid') or jcr:contains(jcr:content/@jcr:title, 'title') or jcr:contains(jcr:content/@jcr:description, 'invalid'))]";
  assertQuery(matchTitle,"xpath",ImmutableList.of("/myFile"));
  String matchDesc=" //element(*, nt:file)[(jcr:contains(jcr:content, 'invalid') or jcr:contains(jcr:content/@jcr:title, 'invalid') or jcr:contains(jcr:content/@jcr:description, 'description'))]";
  assertQuery(matchDesc,"xpath",ImmutableList.of("/myFile"));
  String matchNone=" //element(*, nt:file)[(jcr:contains(jcr:content, 'invalid') or jcr:contains(jcr:content/@jcr:title, 'invalid') or jcr:contains(jcr:content/@jcr:description, 'invalid'))]";
  assertQuery(matchNone,"xpath",new ArrayList<String>());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreventDoubleAggregation() throws Exception {
  Tree file=root.getTree("/").addChild("myFile");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE,Type.NAME);
  file.setProperty("jcr:title","fox");
  Tree resource=file.addChild(JCR_CONTENT);
  resource.setProperty(JCR_PRIMARYTYPE,"nt:resource",Type.NAME);
  resource.setProperty("jcr:lastModified",Calendar.getInstance());
  resource.setProperty("jcr:encoding","UTF-8");
  resource.setProperty("jcr:mimeType","text/plain");
  resource.setProperty(binaryProperty(JCR_DATA,"the quick brown fox jumps over the lazy dog."));
  root.commit();
  String matchChildSimple="//element(*, nt:file)[( jcr:contains(., 'fox') )]";
  assertQuery(matchChildSimple,"xpath",ImmutableList.of("/myFile"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oak3371AggregateV2() throws CommitFailedException {
  oak3371();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeTypesDeep() throws Exception {
  Tree folder=root.getTree("/").addChild("myFolder");
  folder.setProperty(JCR_PRIMARYTYPE,NT_FOLDER,Type.NAME);
  Tree folder2=folder.addChild("subfolder");
  folder2.setProperty(JCR_PRIMARYTYPE,"nt:unstructured",Type.NAME);
  Tree folder3=folder2.addChild("subsubfolder");
  folder3.setProperty(JCR_PRIMARYTYPE,"nt:unstructured",Type.NAME);
  file(folder3,"file");
  root.commit();
  String xpath="//element(*, nt:folder)[jcr:contains(., 'dog')]";
  assertQuery(xpath,"xpath",ImmutableList.of("/myFolder"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChildNodeProperty2() throws Exception {
  Tree file=root.getTree("/").addChild("myFile");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE,Type.NAME);
  Tree resource=file.addChild(JCR_CONTENT);
  resource.setProperty(JCR_PRIMARYTYPE,"nt:resource",Type.NAME);
  resource.setProperty(binaryProperty(JCR_DATA,"the quick brown fox jumps over the lazy dog."));
  resource.setProperty("jcr:title","title");
  resource.setProperty("jcr:description","description");
  Tree file2=root.getTree("/").addChild("myFile2");
  file2.setProperty(JCR_PRIMARYTYPE,NT_FILE,Type.NAME);
  Tree resource2=file2.addChild(JCR_CONTENT);
  resource2.setProperty(JCR_PRIMARYTYPE,"nt:resource",Type.NAME);
  resource2.setProperty(binaryProperty(JCR_DATA,"the quick brown fox jumps over the lazy dog."));
  resource2.setProperty("jcr:title","other");
  resource.setProperty("jcr:description","title");
  root.commit();
  String matchChildSimple="//*[( jcr:contains(jcr:content/@jcr:title, 'title') )]";
  assertQuery(matchChildSimple,"xpath",ImmutableList.of("/myFile"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeTypes() throws Exception {
  Tree folder=root.getTree("/").addChild("myFolder");
  folder.setProperty(JCR_PRIMARYTYPE,NT_FOLDER,Type.NAME);
  Tree file=folder.addChild("myFile");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE,Type.NAME);
  file.setProperty("jcr:title","title");
  file.setProperty("jcr:description","description");
  Tree resource=file.addChild(JCR_CONTENT);
  resource.setProperty(JCR_PRIMARYTYPE,"nt:resource",Type.NAME);
  resource.setProperty("jcr:lastModified",Calendar.getInstance());
  resource.setProperty("jcr:encoding","UTF-8");
  resource.setProperty("jcr:mimeType","text/plain");
  resource.setProperty(binaryProperty(JCR_DATA,"the quick brown fox jumps over the lazy dog."));
  root.commit();
  String matchContentSimple="//*[( jcr:contains(., 'dog') and @jcr:primaryType = 'nt:file' )]";
  assertQuery(matchContentSimple,"xpath",ImmutableList.of("/myFolder/myFile"));
  String matchContentDouble="//*[( jcr:contains(., 'dog') and (@jcr:primaryType = 'nt:file' or @jcr:primaryType = 'nt:folder') )]";
  assertQuery(matchContentDouble,"xpath",ImmutableList.of("/myFolder","/myFolder/myFile"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * simple index aggregation from jcr:content to nt:file
 */
@Test public void testNtFileAggregate() throws Exception {
  String sqlBase="SELECT * FROM [nt:file] as f WHERE";
  String sqlCat=sqlBase + " CONTAINS (f.*, 'cat')";
  String sqlDog=sqlBase + " CONTAINS (f.*, 'dog')";
  Tree file=root.getTree("/").addChild("myFile");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE,Type.NAME);
  Tree resource=file.addChild(JCR_CONTENT);
  resource.setProperty(JCR_PRIMARYTYPE,"nt:resource",Type.NAME);
  resource.setProperty("jcr:lastModified",Calendar.getInstance());
  resource.setProperty("jcr:encoding","UTF-8");
  resource.setProperty("jcr:mimeType","text/plain");
  resource.setProperty(binaryProperty(JCR_DATA,"the quick brown fox jumps over the lazy dog."));
  root.commit();
  assertQuery(sqlDog,ImmutableList.of("/myFile"));
  root.getTree("/").getChild("myFile").getChild(JCR_CONTENT).setProperty(binaryProperty(JCR_DATA,"the quick brown fox jumps over the lazy cat."));
  root.commit();
  assertQuery(sqlDog,new ArrayList<String>());
  assertQuery(sqlCat,ImmutableList.of("/myFile"));
  root.getTree("/").getChild("myFile").getChild(JCR_CONTENT).remove();
  Tree unstrContent=root.getTree("/").getChild("myFile").addChild(JCR_CONTENT);
  unstrContent.setProperty(JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  Tree foo=unstrContent.addChild("foo");
  foo.setProperty(JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  foo.setProperty("text","the quick brown fox jumps over the lazy dog.");
  root.commit();
  assertQuery(sqlDog,ImmutableList.of("/myFile"));
  assertQuery(sqlCat,new ArrayList<String>());
  root.getTree("/").getChild("myFile").getChild(JCR_CONTENT).getChild("foo").remove();
  root.commit();
  assertQuery(sqlDog,new ArrayList<String>());
  assertQuery(sqlCat,new ArrayList<String>());
  root.getTree("/").getChild("myFile").getChild(JCR_CONTENT).remove();
  resource=root.getTree("/").getChild("myFile").addChild(JCR_CONTENT);
  resource.setProperty(JCR_PRIMARYTYPE,"nt:resource",Type.NAME);
  resource.setProperty("jcr:lastModified",Calendar.getInstance());
  resource.setProperty("jcr:encoding","UTF-8");
  resource.setProperty("jcr:mimeType","text/plain");
  resource.setProperty(binaryProperty(JCR_DATA,"the quick brown fox jumps over the lazy cat."));
  root.commit();
  assertQuery(sqlDog,new ArrayList<String>());
  assertQuery(sqlCat,ImmutableList.of("/myFile"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChildNodeProperty() throws Exception {
  Tree file=root.getTree("/").addChild("myFile");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE,Type.NAME);
  Tree resource=file.addChild(JCR_CONTENT);
  resource.setProperty(JCR_PRIMARYTYPE,"nt:resource",Type.NAME);
  resource.setProperty("jcr:lastModified",Calendar.getInstance());
  resource.setProperty("jcr:encoding","UTF-8");
  resource.setProperty("jcr:mimeType","text/plain");
  resource.setProperty(binaryProperty(JCR_DATA,"the quick brown fox jumps over the lazy dog."));
  resource.setProperty("jcr:title","title");
  resource.setProperty("jcr:description","description");
  root.commit();
  String matchChildSimple="//*[( jcr:contains(@jcr:title, 'title') )]";
  assertQuery(matchChildSimple,"xpath",ImmutableList.of("/myFile/jcr:content"));
  String matchChildWithStar="//*[( jcr:contains(., 'dog') and jcr:contains(@jcr:title, 'title') )]";
  assertQuery(matchChildWithStar,"xpath",ImmutableList.of("/myFile/jcr:content"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChildNodeWithOrComposite() throws Exception {
  Tree folder=root.getTree("/").addChild("myFolder");
  folder.setProperty(JCR_PRIMARYTYPE,NT_FOLDER,Type.NAME);
  Tree file=folder.addChild("myFile");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE,Type.NAME);
  file.setProperty("jcr:title","title");
  file.setProperty("jcr:description","description");
  Tree resource=file.addChild(JCR_CONTENT);
  resource.setProperty(JCR_PRIMARYTYPE,"nt:resource",Type.NAME);
  resource.setProperty("jcr:lastModified",Calendar.getInstance());
  resource.setProperty("jcr:encoding","UTF-8");
  resource.setProperty("jcr:mimeType","text/plain");
  resource.setProperty(binaryProperty(JCR_DATA,"the quick brown fox jumps over the lazy dog."));
  root.commit();
  String matchContentSimple="//element(*, nt:folder)[(jcr:contains(myFile, 'dog'))]";
  assertQuery(matchContentSimple,"xpath",ImmutableList.of("/myFolder"));
  String matchContent=" //element(*, nt:folder)[(jcr:contains(myFile, 'dog') or jcr:contains(myFile/@jcr:title, 'invalid') or jcr:contains(myFile/@jcr:description, 'invalid'))]";
  assertQuery(matchContent,"xpath",ImmutableList.of("/myFolder"));
  String matchTitle=" //element(*, nt:folder)[(jcr:contains(myFile, 'invalid') or jcr:contains(myFile/@jcr:title, 'title') or jcr:contains(myFile/@jcr:description, 'invalid'))]";
  assertQuery(matchTitle,"xpath",ImmutableList.of("/myFolder"));
  String matchDesc=" //element(*, nt:folder)[(jcr:contains(myFile, 'invalid') or jcr:contains(myFile/@jcr:title, 'invalid') or jcr:contains(myFile/@jcr:description, 'description'))]";
  assertQuery(matchDesc,"xpath",ImmutableList.of("/myFolder"));
  String matchNone=" //element(*, nt:folder)[(jcr:contains(myFile, 'invalid') or jcr:contains(myFile/@jcr:title, 'invalid') or jcr:contains(myFile/@jcr:description, 'invalid'))]";
  assertQuery(matchNone,"xpath",new ArrayList<String>());
  String matchOnlyTitleOr=" //element(*, nt:folder)[(jcr:contains(myFile/@jcr:title, 'title') or jcr:contains(myFile/@jcr:title, 'unknown') )]";
  assertQuery(matchOnlyTitleOr,"xpath",ImmutableList.of("/myFolder"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexAggregationTest2 </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oak2249() throws Exception {
  setTraversalEnabled(false);
  final String statement="//element(*, test:Asset)[ " + "( " + "jcr:contains(., 'summer') "+ "or "+ "jcr:content/metadata/@tags = 'namespace:season/summer' "+ ") and "+ "jcr:contains(jcr:content/metadata/@format, 'image') "+ "]";
  Tree content=root.getTree("/").addChild("content");
  List<String> expected=newArrayList();
  Tree metadata=createAssetStructure(content,"tagged");
  metadata.setProperty("tags",of("namespace:season/summer"),STRINGS);
  metadata.setProperty("format","image/jpeg",STRING);
  expected.add("/content/tagged");
  metadata=createAssetStructure(content,"titled");
  metadata.setProperty("title","Lorem summer ipsum",STRING);
  metadata.setProperty("format","image/jpeg",STRING);
  expected.add("/content/titled");
  metadata=createAssetStructure(content,"summer-node");
  metadata.setProperty("format","image/jpeg",STRING);
  expected.add("/content/summer-node");
  metadata=createAssetStructure(content,"winter-node");
  metadata.setProperty("tags",of("namespace:season/winter"),STRINGS);
  metadata.setProperty("title","Lorem winter ipsum",STRING);
  metadata.setProperty("format","image/jpeg",STRING);
  root.commit();
  assertQuery(statement,"xpath",expected);
  setTraversalEnabled(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void indexSingleRelativeNode() throws Exception {
  setTraversalEnabled(false);
  final String statement="//element(*, test:Asset)[ " + "jcr:contains(firstLevelChild, 'summer') ]";
  List<String> expected=newArrayList();
  Tree content=root.getTree("/").addChild("content");
  Tree page=content.addChild("pages");
  page.setProperty(JCR_PRIMARYTYPE,NT_TEST_ASSET,NAME);
  Tree child=page.addChild("firstLevelChild");
  child.setProperty("tag","summer is here",STRING);
  root.commit();
  expected.add("/content/pages");
  assertQuery(statement,"xpath",expected);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oak2226() throws Exception {
  setTraversalEnabled(false);
  final String statement="/jcr:root/content//element(*, test:Asset)[" + "(jcr:contains(., 'mountain')) " + "and (jcr:contains(jcr:content/metadata/@format, 'image'))]";
  Tree content=root.getTree("/").addChild("content");
  List<String> expected=Lists.newArrayList();
  Tree node=content.addChild("node");
  node.setProperty(JCR_PRIMARYTYPE,NT_TEST_ASSET,NAME);
  expected.add(node.getPath());
  node=node.addChild("jcr:content");
  node.setProperty(JCR_PRIMARYTYPE,NT_TEST_ASSETCONTENT,NAME);
  node=node.addChild("metadata");
  node.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,NAME);
  node.setProperty("title","Lorem mountain ipsum",STRING);
  node.setProperty("format","image/jpeg",STRING);
  node=content.addChild("mountain-node");
  node.setProperty(JCR_PRIMARYTYPE,NT_TEST_ASSET,NAME);
  expected.add(node.getPath());
  node=node.addChild("jcr:content");
  node.setProperty(JCR_PRIMARYTYPE,NT_TEST_ASSETCONTENT,NAME);
  node=node.addChild("metadata");
  node.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,NAME);
  node.setProperty("format","image/jpeg",STRING);
  root.commit();
  assertQuery(statement,"xpath",expected);
  setTraversalEnabled(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void indexRelativeNode() throws Exception {
  setTraversalEnabled(false);
  final String statement="//element(*, test:Asset)[ " + "jcr:contains(., 'summer') " + "and jcr:contains(jcr:content/renditions/original, 'fox')"+ "and jcr:contains(jcr:content/metadata/@format, 'image') "+ "]";
  Tree content=root.getTree("/").addChild("content");
  List<String> expected=newArrayList();
  Tree metadata=createAssetStructure(content,"tagged");
  metadata.setProperty("tags",of("namespace:season/summer"),STRINGS);
  metadata.setProperty("format","image/jpeg",STRING);
  Tree original=metadata.getParent().addChild("renditions").addChild("original");
  original.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_FILE);
  original.addChild("jcr:content").setProperty(PropertyStates.createProperty("jcr:data","fox jumps".getBytes()));
  expected.add("/content/tagged");
  root.commit();
  assertQuery(statement,"xpath",expected);
  Tree originalContent=TreeUtil.getTree(root.getTree("/"),"/content/tagged/jcr:content/renditions/original/jcr:content");
  originalContent.setProperty(PropertyStates.createProperty("jcr:data","kiwi jumps".getBytes()));
  root.commit();
  assertQuery(statement,"xpath",Collections.<String>emptyList());
  setTraversalEnabled(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexAugmentTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nullBehavior() throws Exception {
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  TestUtil.enableForFullText(props,"foo");
  root.commit();
  Tree rootTree=root.getTree("/").addChild("test");
  int testIndex=1;
  checkSimpleBehavior(rootTree,testIndex++);
  factory.fulltextQueryTermsProvider=new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      return null;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return FulltextQueryTermsProvider.DEFAULT.getSupportedTypes();
    }
  }
;
  checkSimpleBehavior(rootTree,testIndex++);
  factory.fulltextQueryTermsProvider=new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      return null;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  checkSimpleBehavior(rootTree,testIndex++);
  factory.fulltextQueryTermsProvider=new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      return new TermQuery(new Term("bar","baz"));
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  checkSimpleBehavior(rootTree,testIndex++);
  factory.fulltextQueryTermsProvider=null;
  factory.indexFieldProvider=IndexFieldProvider.DEFAULT;
  checkSimpleBehavior(rootTree,testIndex++);
  factory.indexFieldProvider=new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      return IndexFieldProvider.DEFAULT.getAugmentedFields(path,document,indexDefinition);
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  checkSimpleBehavior(rootTree,testIndex++);
  factory.fulltextQueryTermsProvider=null;
  factory.indexFieldProvider=new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      List<Field> fields=Lists.newArrayList();
      fields.add(new StringField("bar","baz",Field.Store.NO));
      return fields;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  checkSimpleBehavior(rootTree,testIndex++);
  factory.registerQueryTermsProvider(new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      return null;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
);
  factory.useSuperBehavior=true;
  checkSimpleBehavior(rootTree,testIndex++);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexExclusionQueryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void ignoreByName() throws Exception {
  final List<String> expected=of("/content/two");
  Tree content=root.getTree("/").addChild("content");
  Tree one=content.addChild("one");
  one.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED);
  one.setProperty("jcr:title","abc");
  one.setProperty(NOT_IN,"azerty");
  Tree two=content.addChild("two");
  two.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED);
  two.setProperty("jcr:title","abc");
  two.setProperty(NOT_IN,"querty");
  root.commit();
  String query="/jcr:root/content//*[jcr:contains(., 'abc' )" + " and (@" + NOT_IN + " = 'querty') ]";
  assertQuery(query,"xpath",expected);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void ignoreByType() throws Exception {
  Tree content=root.getTree("/").addChild("content");
  Tree one=content.addChild("one");
  one.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED);
  one.setProperty(JCR_LASTMODIFIED,"2013-04-01T09:58:03.231Z",DATE);
  one.setProperty("jcr:title","abc");
  Tree two=content.addChild("two");
  two.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED);
  two.setProperty(JCR_LASTMODIFIED,"2014-04-01T09:58:03.231Z",DATE);
  two.setProperty("jcr:title","abc");
  root.commit();
  String query="/jcr:root/content//*[jcr:contains(., 'abc' )" + " and (@" + JCR_LASTMODIFIED + " > xs:dateTime('2014-04-01T08:58:03.231Z')) ]";
  assertQuery(query,"xpath",of("/content/two"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexQueryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void containsPathStrictNum() throws Exception {
  root.getTree("/").addChild("matchOnPath1234");
  root.getTree("/").addChild("match_on_path1234");
  root.commit();
  StringBuffer stmt=new StringBuffer();
  stmt.append("//*[jcr:contains(., 'match')]");
  assertQuery(stmt.toString(),"xpath",ImmutableList.of("/match_on_path1234"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oak3371() throws Exception {
  setTraversalEnabled(false);
  Tree t, t1;
  t=root.getTree("/");
  t=child(t,"test",NT_UNSTRUCTURED);
  t1=child(t,"a",NT_UNSTRUCTURED);
  t1.setProperty("foo","bar");
  t1=child(t,"b",NT_UNSTRUCTURED);
  t1.setProperty("foo","cat");
  t1=child(t,"c",NT_UNSTRUCTURED);
  t1=child(t,"d",NT_UNSTRUCTURED);
  t1.setProperty("foo","bar cat");
  root.commit();
  assertQuery("SELECT * FROM [nt:unstructured] WHERE ISDESCENDANTNODE('/test') AND CONTAINS(foo, 'bar')",of("/test/a","/test/d"));
  assertQuery("SELECT * FROM [nt:unstructured] WHERE ISDESCENDANTNODE('/test') AND NOT CONTAINS(foo, 'bar')",of("/test/b","/test/c"));
  assertQuery("SELECT * FROM [nt:unstructured] WHERE ISDESCENDANTNODE('/test') AND CONTAINS(foo, 'bar cat')",of("/test/d"));
  assertQuery("SELECT * FROM [nt:unstructured] WHERE ISDESCENDANTNODE('/test') AND NOT CONTAINS(foo, 'bar cat')",of("/test/c"));
  setTraversalEnabled(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void contains() throws Exception {
  String h="Hello" + System.currentTimeMillis();
  String w="World" + System.currentTimeMillis();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("name",asList(h,w),STRINGS);
  test.addChild("b").setProperty("name",h);
  root.commit();
  StringBuffer stmt=new StringBuffer();
  stmt.append("/jcr:root//*[jcr:contains(., '").append(h);
  stmt.append("')]");
  assertQuery(stmt.toString(),"xpath",ImmutableList.of("/test/a","/test/b"));
  stmt=new StringBuffer();
  stmt.append("/jcr:root//*[jcr:contains(., '").append(w);
  stmt.append("')]");
  assertQuery(stmt.toString(),"xpath",ImmutableList.of("/test/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void containsPath() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("name","/parent/child/node");
  root.commit();
  StringBuffer stmt=new StringBuffer();
  stmt.append("//*[jcr:contains(., '/parent/child')]");
  assertQuery(stmt.toString(),"xpath",ImmutableList.of("/test/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void containsPathNum() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  Tree a=test.addChild("a");
  a.setProperty("name","/segment1/segment2/segment3");
  root.commit();
  StringBuffer stmt=new StringBuffer();
  stmt.append("//*[jcr:contains(., '/segment1/segment2')]");
  assertQuery(stmt.toString(),"xpath",ImmutableList.of("/test/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql1() throws Exception {
  test("sql1.txt");
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("OAK-2424") @Test public void multiPhraseQuery() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("dc:format","type:application/pdf");
  test.addChild("b").setProperty("dc:format","progress");
  root.commit();
  assertQuery("/jcr:root//*[jcr:contains(@dc:format, 'pro*')]","xpath",ImmutableList.of("/test/b"));
  assertQuery("/jcr:root//*[jcr:contains(@dc:format, 'type:appli*')]","xpath",ImmutableList.of("/test/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * OAK-1208 property existence constraints break queries
 */
@Test public void testOAK1208() throws Exception {
  Tree t=root.getTree("/").addChild("containsWithMultipleOr");
  Tree one=t.addChild("one");
  one.setProperty("p","dam/smartcollection");
  one.setProperty("t","media");
  Tree two=t.addChild("two");
  two.setProperty("p","dam/collection");
  two.setProperty("t","media");
  Tree three=t.addChild("three");
  three.setProperty("p","dam/hits");
  three.setProperty("t","media");
  root.commit();
  StringBuffer stmt=new StringBuffer();
  stmt.append("//*[jcr:contains(., 'media') and (@p = 'dam/smartcollection' or @p = 'dam/collection') ]");
  assertQuery(stmt.toString(),"xpath",ImmutableList.of(one.getPath(),two.getPath()));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiValuedPropUpdate() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  String child="child";
  String mulValuedProp="prop";
  test.addChild(child).setProperty(mulValuedProp,of("foo","bar"),Type.STRINGS);
  root.commit();
  assertQuery("/jcr:root//*[jcr:contains(@" + mulValuedProp + ", 'foo')]","xpath",of("/test/" + child));
  test.getChild(child).setProperty(mulValuedProp,new ArrayList<String>(),Type.STRINGS);
  root.commit();
  assertQuery("/jcr:root//*[jcr:contains(@" + mulValuedProp + ", 'foo')]","xpath",new ArrayList<String>());
  test.getChild(child).setProperty(mulValuedProp,of("bar"),Type.STRINGS);
  root.commit();
  assertQuery("/jcr:root//*[jcr:contains(@" + mulValuedProp + ", 'foo')]","xpath",new ArrayList<String>());
  test.getChild(child).removeProperty(mulValuedProp);
  root.commit();
  assertQuery("/jcr:root//*[jcr:contains(@" + mulValuedProp + ", 'foo')]","xpath",new ArrayList<String>());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql2() throws Exception {
  test("sql2.txt");
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("OAK-2424") @Test public void containsDash() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("name","hello-wor");
  test.addChild("b").setProperty("name","hello-world");
  test.addChild("c").setProperty("name","hello");
  root.commit();
  assertQuery("/jcr:root//*[jcr:contains(., 'hello-wor*')]","xpath",ImmutableList.of("/test/a","/test/b"));
  assertQuery("/jcr:root//*[jcr:contains(., '*hello-wor*')]","xpath",ImmutableList.of("/test/a","/test/b"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void containsPathStrict() throws Exception {
  root.getTree("/").addChild("matchOnPath");
  root.getTree("/").addChild("match_on_path");
  root.commit();
  StringBuffer stmt=new StringBuffer();
  stmt.append("//*[jcr:contains(., 'match')]");
  assertQuery(stmt.toString(),"xpath",ImmutableList.of("/match_on_path"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql2FullText() throws Exception {
  test("sql2-fulltext.txt");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenizeCN() throws Exception {
  Tree t=root.getTree("/").addChild("containsCN");
  Tree one=t.addChild("one");
  one.setProperty("t","美女衬衫");
  root.commit();
  assertQuery("//*[jcr:contains(., '美女')]","xpath",ImmutableList.of(one.getPath()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexSuggestionTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuggestQueryAnalyzed() throws Exception {
  final String nodeType="nt:unstructured";
  final String indexPropName="description";
  final String indexPropValue="this is just a sample text which should get some response in suggestions";
  final String suggestQueryText="sa";
  checkSuggestions(nodeType,indexPropName,indexPropValue,true,true,suggestQueryText,true,true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuggestQueryInfix() throws Exception {
  final String nodeType="nt:unstructured";
  final String indexPropName="description";
  final String indexPropValue="this is just a sample text which should get some response in suggestions";
  final String suggestQueryText="sa";
  checkSuggestions(nodeType,indexPropName,indexPropValue,true,true,suggestQueryText,true,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuggestQueryFromMoreGeneralNodeType() throws Exception {
  final String indexNodeType="nt:base";
  final String queryNodeType="oak:Unstructured";
  final String indexPropName="description";
  final String indexPropValue="this is just a sample text which should get some response in suggestions";
  final String suggestQueryText="th";
  final boolean shouldSuggest=false;
  checkSuggestions(indexNodeType,queryNodeType,indexPropName,indexPropValue,true,false,suggestQueryText,shouldSuggest,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleSuggestions() throws Exception {
  final String nodeType="oak:Unstructured";
  final String indexPropName="description";
  final String indexPropValue="this is just a sample text which should get some response in suggestions";
  final String suggestQueryText="th";
  final boolean shouldSuggest=true;
  checkSuggestions(nodeType,indexPropName,indexPropValue,true,false,suggestQueryText,shouldSuggest,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuggestQuery() throws Exception {
  final String nodeType="nt:unstructured";
  final String indexPropName="description";
  final String indexPropValue="this is just a sample text which should get some response in suggestions";
  final String suggestQueryText="th";
  final boolean shouldSuggest=true;
  checkSuggestions(nodeType,indexPropName,indexPropValue,false,false,suggestQueryText,shouldSuggest,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuggestQueryOnNonNtBase() throws Exception {
  final String nodeType="oak:Unstructured";
  final String indexPropName="description";
  final String indexPropValue="this is just a sample text which should get some response in suggestions";
  final String suggestQueryText="th";
  final boolean shouldSuggest=true;
  checkSuggestions(nodeType,indexPropName,indexPropValue,true,false,suggestQueryText,shouldSuggest,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuggestQueryWithUserAccess() throws Exception {
  final String nodeType="nt:unstructured";
  final String indexPropName="description";
  final String indexPropValue="this is just a sample text which should get some response in suggestions";
  final String suggestQueryText="th";
  final boolean shouldSuggest=true;
  checkSuggestions(nodeType,indexPropName,indexPropValue,false,true,suggestQueryText,shouldSuggest,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPathRestrictions() throws Exception {
  NodeBuilder idx=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",ImmutableSet.of("foo"),null);
  idx.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  builder.child("a").setProperty("foo","bar");
  builder.child("a1").setProperty("foo","bar");
  builder.child("a").child("b").setProperty("foo","bar");
  builder.child("a").child("b").child("c").setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createTestFilter();
  filter.restrictPath("/",Filter.PathRestriction.EXACT);
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/"));
  filter=createTestFilter();
  filter.restrictPath("/",Filter.PathRestriction.DIRECT_CHILDREN);
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/a","/a1"));
  filter=createTestFilter();
  filter.restrictPath("/a",Filter.PathRestriction.DIRECT_CHILDREN);
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/a/b"));
  filter=createTestFilter();
  filter.restrictPath("/a",Filter.PathRestriction.ALL_CHILDREN);
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/a/b","/a/b/c"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void luceneWithCopyOnReadDir() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo","foo2"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  File indexRootDir=new File(getIndexDir());
  IndexTracker tracker=new IndexTracker(new IndexCopier(sameThreadExecutor(),indexRootDir));
  tracker.update(indexed);
  assertQuery(tracker,indexed,"foo","bar");
  builder=indexed.builder();
  builder.setProperty("foo2","bar2");
  indexed=HOOK.processCommit(indexed,builder.getNodeState(),CommitInfo.EMPTY);
  tracker.update(indexed);
  assertQuery(tracker,indexed,"foo2","bar2");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPropertyNonExistence() throws Exception {
  root=TestUtil.registerTestNodeType(builder).getNodeState();
  NodeBuilder index=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",ImmutableSet.of("foo"),null);
  NodeBuilder rules=index.child(INDEX_RULES);
  NodeBuilder propNode=rules.child(NT_TEST).child(LuceneIndexConstants.PROP_NODE);
  NodeBuilder fooProp=propNode.child("foo");
  fooProp.setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  fooProp.setProperty(LuceneIndexConstants.PROP_NULL_CHECK_ENABLED,true);
  NodeState before=builder.getNodeState();
  createNodeWithType(builder,"a",NT_TEST).setProperty("foo","bar");
  createNodeWithType(builder,"b",NT_TEST).setProperty("foo","bar");
  createNodeWithType(builder,"c",NT_TEST);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_TEST);
  filter.restrictProperty("foo",Operator.EQUAL,null);
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/c"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void analyzerWithStopWords() throws Exception {
  NodeBuilder nb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  TestUtil.useV2(nb);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","fox jumping");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter("nt:base");
  filter.setFullTextConstraint(new FullTextTerm(null,"fox jumping",false,false,null));
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/"));
  filter.setFullTextConstraint(new FullTextTerm(null,"fox was jumping",false,false,null));
  assertFilter(filter,queryIndex,indexed,Collections.<String>emptyList());
  NodeBuilder anlnb=nb.child(ANALYZERS).child(ANL_DEFAULT);
  anlnb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"whitespace");
  anlnb.child(ANL_FILTERS).child("stop");
  nb.setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  before=after;
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  queryIndex=new LucenePropertyIndex(tracker);
  filter.setFullTextConstraint(new FullTextTerm(null,"fox jumping",false,false,null));
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/"));
  filter.setFullTextConstraint(new FullTextTerm(null,"fox was jumping",false,false,null));
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void luceneWithFSDirectory() throws Exception {
  NodeStore nodeStore=new SegmentNodeStore();
  final IndexTracker tracker=new IndexTracker();
  ((Observable)nodeStore).addObserver(new Observer(){
    @Override public void contentChanged(    @Nonnull NodeState root,    @Nullable CommitInfo info){
      tracker.update(root);
    }
  }
);
  builder=nodeStore.getRoot().builder();
  builder.setChildNode(JCR_SYSTEM,INITIAL_CONTENT.getChildNode(JCR_SYSTEM));
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder idxb=newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo","foo2"),null);
  idxb.setProperty(PERSISTENCE_NAME,PERSISTENCE_FILE);
  idxb.setProperty(PERSISTENCE_PATH,getIndexDir());
  nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  builder=nodeStore.getRoot().builder();
  builder.setProperty("foo","bar");
  NodeState indexed=nodeStore.merge(builder,HOOK,CommitInfo.EMPTY);
  assertQuery(tracker,indexed,"foo","bar");
  builder=nodeStore.getRoot().builder();
  builder.setProperty("foo2","bar2");
  indexed=nodeStore.merge(builder,HOOK,CommitInfo.EMPTY);
  assertQuery(tracker,indexed,"foo2","bar2");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRelativePropertyNonExistence() throws Exception {
  root=TestUtil.registerTestNodeType(builder).getNodeState();
  NodeBuilder index=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",ImmutableSet.of("foo"),null);
  NodeBuilder rules=index.child(INDEX_RULES);
  NodeBuilder propNode=rules.child(NT_TEST).child(LuceneIndexConstants.PROP_NODE);
  propNode.child("bar").setProperty(LuceneIndexConstants.PROP_NAME,"jcr:content/bar").setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true).setProperty(LuceneIndexConstants.PROP_NULL_CHECK_ENABLED,true);
  NodeState before=builder.getNodeState();
  NodeBuilder a1=createNodeWithType(builder,"a1",NT_TEST);
  a1.child("jcr:content").setProperty("bar","foo");
  NodeBuilder b1=createNodeWithType(builder,"b1",NT_TEST);
  b1.child("jcr:content");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_TEST);
  filter.restrictProperty("jcr:content/bar",Operator.EQUAL,null);
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/b1"));
  builder.child("b1").child("jcr:content").setProperty("bar","foo");
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  filter=createFilter(NT_TEST);
  filter.restrictProperty("jcr:content/bar",Operator.EQUAL,null);
  assertFilter(filter,queryIndex,indexed,Collections.<String>emptyList());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void customScoreQuery() throws Exception {
  NodeBuilder nb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  TestUtil.useV2(nb);
  nb.setProperty(LuceneIndexConstants.PROP_SCORER_PROVIDER,"testScorer");
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty("jcr:createdBy","bar bar");
  builder.child("b").setProperty("jcr:createdBy","foo bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  SimpleScorerFactory factory=new SimpleScorerFactory();
  ScorerProvider provider=new ScorerProvider(){
    String scorerName="testScorer";
    @Override public String getName(){
      return scorerName;
    }
    @Override public CustomScoreQuery createCustomScoreQuery(    Query query){
      return new ModifiedCustomScoreQuery(query);
    }
class ModifiedCustomScoreQuery extends CustomScoreQuery {
      private Query query;
      public ModifiedCustomScoreQuery(      Query query){
        super(query);
        this.query=query;
      }
      @Override public CustomScoreProvider getCustomScoreProvider(      AtomicReaderContext context){
        return new CustomScoreProvider(context){
          public float customScore(          int doc,          float subQueryScore,          float valSrcScore){
            AtomicReader atomicReader=context.reader();
            try {
              Document document=atomicReader.document(doc);
              String fieldValue=document.get("full:jcr:createdBy");
              if (fieldValue != null && fieldValue.contains("foo")) {
                valSrcScore*=2.0;
              }
            }
 catch (            IOException e) {
              return subQueryScore * valSrcScore;
            }
            return subQueryScore * valSrcScore;
          }
        }
;
      }
    }
  }
;
  factory.providers.put(provider.getName(),provider);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker,factory);
  FilterImpl filter=createFilter(NT_BASE);
  filter.setFullTextConstraint(new FullTextTerm(null,"bar",false,false,null));
  assertFilter(filter,queryIndex,indexed,asList("/b","/a"),true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPropertyExistence() throws Exception {
  root=TestUtil.registerTestNodeType(builder).getNodeState();
  NodeBuilder index=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",ImmutableSet.of("foo"),null);
  NodeBuilder rules=index.child(INDEX_RULES);
  NodeBuilder propNode=rules.child(NT_TEST).child(LuceneIndexConstants.PROP_NODE);
  NodeBuilder fooProp=propNode.child("foo");
  fooProp.setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  fooProp.setProperty(LuceneIndexConstants.PROP_NOT_NULL_CHECK_ENABLED,true);
  NodeState before=builder.getNodeState();
  createNodeWithType(builder,"a",NT_TEST).setProperty("foo","bar");
  createNodeWithType(builder,"b",NT_TEST).setProperty("foo","bar");
  createNodeWithType(builder,"c",NT_TEST);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_TEST);
  filter.restrictProperty("foo",Operator.NOT_EQUAL,null);
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/a","/b"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeNameIndex() throws Exception {
  NodeBuilder index=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",ImmutableSet.of("foo"),null);
  NodeBuilder rules=index.child(INDEX_RULES);
  NodeBuilder ruleNode=rules.child(NT_FILE);
  ruleNode.setProperty(LuceneIndexConstants.INDEX_NODE_NAME,true);
  NodeState before=builder.getNodeState();
  createNodeWithType(builder,"foo",NT_FILE);
  createNodeWithType(builder,"camelCase",NT_FILE);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_FILE);
  filter.restrictProperty(QueryConstants.RESTRICTION_LOCAL_NAME,Operator.EQUAL,PropertyValues.newString("foo"));
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/foo"));
  filter=createFilter(NT_FILE);
  filter.restrictProperty(QueryConstants.RESTRICTION_LOCAL_NAME,Operator.LIKE,PropertyValues.newString("camelCase"));
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/camelCase"));
  filter=createFilter(NT_FILE);
  filter.restrictProperty(QueryConstants.RESTRICTION_LOCAL_NAME,Operator.LIKE,PropertyValues.newString("camel%"));
  assertFilter(filter,queryIndex,indexed,ImmutableList.of("/camelCase"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LucenePropertyIndexTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void lucenPropertyBooleanComplexOrQueries() throws Exception {
  fulltextBooleanComplexOrQueries(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void fulltextSearchWithCustomAnalyzer() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  Tree anl=idx.addChild(LuceneIndexConstants.ANALYZERS).addChild(LuceneIndexConstants.ANL_DEFAULT);
  anl.addChild(LuceneIndexConstants.ANL_TOKENIZER).setProperty(LuceneIndexConstants.ANL_NAME,"whitespace");
  anl.addChild(LuceneIndexConstants.ANL_FILTERS).addChild("stop");
  Tree test=root.getTree("/").addChild("test");
  test.setProperty("foo","fox jumping");
  root.commit();
  assertQuery("select * from [nt:base] where CONTAINS(*, 'fox was jumping')",asList("/test"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void relativePropertyAndCursor() throws Exception {
  Tree idx=createIndex("test1",of("propa","propb"));
  TestUtil.useV2(idx);
  idx.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,true);
  Tree propNode=idx.addChild(PROP_NODE);
  Tree propA=propNode.addChild("propa");
  propA.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_STRING);
  propA.setProperty(LuceneIndexConstants.FIELD_BOOST,2.0);
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  root.commit();
  for (int i=0; i < LucenePropertyIndex.LUCENE_QUERY_BATCH_SIZE; i++) {
    test.addChild("a" + i).addChild("doNotInclude").setProperty("propa","foo");
  }
  test.addChild("b").addChild("jcr:content").setProperty("propb","foo");
  root.commit();
  String queryString="/jcr:root//element(*, nt:base)[jcr:contains(jcr:content, 'foo' )]";
  assertQuery(queryString,"xpath",asList("/test/b"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortQueriesWithLong() throws Exception {
  Tree idx=createIndex("test1",of("foo","bar"));
  Tree propIdx=idx.addChild(PROP_NODE).addChild("foo");
  propIdx.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_LONG);
  root.commit();
  assertSortedLong();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortQueriesWithStringIgnoredMulti_OrderedProps() throws Exception {
  Tree idx=createIndex("test1",of("foo","bar"));
  idx.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("bar"),STRINGS));
  idx.setProperty(createProperty(ORDERED_PROP_NAMES,of("foo"),STRINGS));
  idx.addChild(PROP_NODE).addChild("foo");
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  List<String> values=createStrings(NUMBER_OF_NODES);
  List<Tuple> tuples=Lists.newArrayListWithCapacity(values.size());
  for (int i=0; i < values.size(); i++) {
    Tree child=test.addChild("n" + i);
    child.setProperty("foo",values.get(i));
    child.setProperty("bar","baz");
    tuples.add(new Tuple(values.get(i),child.getPath()));
  }
  Tree child=test.addChild("a");
  child.setProperty("foo",of("w","z"),Type.STRINGS);
  child.setProperty("bar","baz");
  root.commit();
  assertOrderedQuery("select [jcr:path] from [nt:base] where [bar] = 'baz' order by [foo]",Lists.newArrayList(Iterables.concat(Lists.newArrayList("/test/a"),getSortedPaths(tuples,OrderDirection.ASC))));
  assertOrderedQuery("select [jcr:path] from [nt:base] where [bar] = 'baz' order by [foo] DESC",Lists.newArrayList(Iterables.concat(getSortedPaths(tuples,OrderDirection.DESC),Lists.newArrayList("/test/a"))));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortQueriesWithString_OrderedProps() throws Exception {
  Tree idx=createIndex("test1",of("foo","bar"));
  idx.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("bar"),STRINGS));
  idx.setProperty(createProperty(ORDERED_PROP_NAMES,of("foo"),STRINGS));
  idx.addChild(PROP_NODE).addChild("foo");
  root.commit();
  assertSortedString();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortQueriesWithStringAndLong() throws Exception {
  Tree idx=createIndex("test1",of("foo","bar","baz"));
  Tree propIdx=idx.addChild(PROP_NODE).addChild("baz");
  propIdx.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_LONG);
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  int firstPropSize=5;
  List<String> values=createStrings(firstPropSize);
  List<Long> longValues=createLongs(NUMBER_OF_NODES);
  List<Tuple2> tuples=Lists.newArrayListWithCapacity(values.size());
  Random r=new Random();
  for (int i=0; i < values.size(); i++) {
    String val=values.get(r.nextInt(firstPropSize));
    Tree child=test.addChild("n" + i);
    child.setProperty("foo",val);
    child.setProperty("baz",longValues.get(i));
    child.setProperty("bar","baz");
    tuples.add(new Tuple2(val,longValues.get(i),child.getPath()));
  }
  root.commit();
  assertOrderedQuery("select [jcr:path] from [nt:base] where [bar] = 'baz' order by [foo] asc, [baz] desc",getSortedPaths(tuples));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void unionSortQueries() throws Exception {
  Tree idx=createIndex("test1",of("propa","propb","propc","propd"));
  idx.setProperty(createProperty(ORDERED_PROP_NAMES,of("propd"),STRINGS));
  useV2(idx);
  Tree test=root.getTree("/").addChild("test");
  root.commit();
  int seed=-3;
  for (int i=0; i < 5; i++) {
    Tree a=test.addChild("a" + i);
    a.setProperty("propa","a" + i);
    seed+=3;
    a.setProperty("propd",seed);
  }
  seed=-2;
  for (int i=0; i < 5; i++) {
    Tree a=test.addChild("b" + i);
    a.setProperty("propb","b" + i);
    seed+=3;
    a.setProperty("propd",seed);
  }
  seed=-1;
  for (int i=0; i < 5; i++) {
    Tree a=test.addChild("c" + i);
    a.setProperty("propc","c" + i);
    seed+=3;
    a.setProperty("propd",seed);
  }
  root.commit();
  assertQuery("/jcr:root//element(*, nt:base)[(@propa = 'a4' or @propb = 'b3')] order by @propd",XPATH,asList("/test/b3","/test/a4"));
  assertQuery("/jcr:root//element(*, nt:base)[(@propa = 'a3' or @propb = 'b0' or @propc = 'c2')] order by @propd",XPATH,asList("/test/b0","/test/c2","/test/a3"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void luceneBooleanComplexOrQueries() throws Exception {
  fulltextBooleanComplexOrQueries(false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nativeQueries() throws Exception {
  Tree idx=createIndex("test1",of("propa","propb"));
  idx.addChild(PROP_NODE).addChild("propa");
  idx.setProperty(LuceneIndexConstants.FUNC_NAME,"foo");
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("propa","humpty");
  test.addChild("b").setProperty("propa","dumpty");
  test.addChild("c").setProperty("propa","humpy");
  root.commit();
  assertQuery("select [jcr:path] from [nt:base] where native('foo', 'propa:(humpty OR dumpty)')",asList("/test/a","/test/b"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void orderByScore() throws Exception {
  Tree idx=createIndex("test1",of("propa"));
  idx.addChild(PROP_NODE).addChild("propa");
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("propa","a");
  root.commit();
  assertQuery("select [jcr:path] from [nt:base] where propa is not null order by [jcr:score]",asList("/test/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortQueriesWithDateStringMixed_OrderedProps() throws Exception {
  Tree idx=createIndex("test1",of("foo","bar"));
  idx.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("bar"),STRINGS));
  idx.setProperty(createProperty(ORDERED_PROP_NAMES,of("foo"),STRINGS));
  Tree propIdx=idx.addChild(PROP_NODE).addChild("foo");
  propIdx.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  List<Calendar> values=createDates(NUMBER_OF_NODES);
  List<Tuple> tuples=Lists.newArrayListWithCapacity(values.size());
  for (int i=0; i < values.size(); i++) {
    Tree child=test.addChild("n" + i);
    child.setProperty("bar","baz");
    if (i != 0) {
      child.setProperty("foo",values.get(i));
      tuples.add(new Tuple(values.get(i),child.getPath()));
    }
 else {
      child.setProperty("foo",String.valueOf(values.get(i).getTimeInMillis()));
    }
  }
  root.commit();
  assertOrderedQuery("select [jcr:path] from [nt:base] where [bar] = 'baz' order by [foo]",Lists.newArrayList(Iterables.concat(Lists.newArrayList("/test/n0"),getSortedPaths(tuples,OrderDirection.ASC))));
  assertOrderedQuery("select [jcr:path] from [nt:base] where [bar] = 'baz' order by [foo] DESC",Lists.newArrayList(Iterables.concat(getSortedPaths(tuples,OrderDirection.DESC),Lists.newArrayList("/test/n0"))));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void propertyExistenceQuery() throws Exception {
  Tree idx=createIndex("test1",of("propa","propb"));
  idx.addChild(PROP_NODE).addChild("propa");
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("propa","a");
  test.addChild("b").setProperty("propa","c");
  test.addChild("c").setProperty("propb","e");
  root.commit();
  assertQuery("select [jcr:path] from [nt:base] where propa is not null",asList("/test/a","/test/b"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void indexTimeFieldBoost() throws Exception {
  Tree idx=createIndex("test1",of("propa","propb","propc"));
  idx.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,true);
  Tree propNode=idx.addChild(PROP_NODE);
  Tree propA=propNode.addChild("propa");
  propA.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_STRING);
  propA.setProperty(LuceneIndexConstants.FIELD_BOOST,2.0);
  Tree propB=propNode.addChild("propb");
  propB.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_STRING);
  propB.setProperty(LuceneIndexConstants.FIELD_BOOST,1.0);
  Tree propC=propNode.addChild("propc");
  propC.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_STRING);
  propC.setProperty(LuceneIndexConstants.FIELD_BOOST,4.0);
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  root.commit();
  test.addChild("a").setProperty("propa","foo");
  test.addChild("b").setProperty("propb","foo");
  test.addChild("c").setProperty("propc","foo");
  root.commit();
  String queryString="//* [jcr:contains(., 'foo' )]";
  assertOrderedQuery(queryString,asList("/test/c","/test/a","/test/b"),XPATH,true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWithRelativeProperty() throws Exception {
  Tree parent=root.getTree("/");
  Tree idx=createIndex(parent,"test1",of("b/propa","propb"));
  root.commit();
  Tree test=parent.addChild("test2");
  test.addChild("a").addChild("b").setProperty("propa","a");
  root.commit();
  assertQuery("select [jcr:path] from [nt:base] as s where [b/propa] = 'a'",asList("/test2/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void maxExtractLengthCheck() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  Tree test=root.getTree("/").addChild("test");
  createFileNode(test,"text","red brown fox was jumping","text/plain");
  root.commit();
  assertQuery("select * from [nt:base] where CONTAINS(*, 'jumping')",asList("/test/text/jcr:content"));
  assertQuery("select * from [nt:base] where CONTAINS(*, 'red')",asList("/test/text/jcr:content"));
  idx=root.getTree("/oak:index/test");
  idx.addChild(TIKA).setProperty(LuceneIndexConstants.TIKA_MAX_EXTRACT_LENGTH,15);
  idx.setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  root.commit();
  assertQuery("select * from [nt:base] where CONTAINS(*, 'jumping')",Collections.<String>emptyList());
  assertQuery("select * from [nt:base] where CONTAINS(*, 'red')",asList("/test/text/jcr:content"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void luceneAndExclude() throws Exception {
  Tree indexDefn=createTestIndexNode(root.getTree("/"),LuceneIndexConstants.TYPE_LUCENE);
  Tree r=root.getTree("/").addChild("test");
  Tree n=r.addChild("node1");
  n.setProperty("title","test text");
  n.setProperty("mytext","the quick brown fox jumps over the lazy dog.");
  n=r.addChild("node2");
  n.setProperty("title","other text");
  n.setProperty("mytext","the quick brown fox jumps over the lazy dog.");
  root.commit();
  String sql="SELECT * FROM [nt:base] WHERE [jcr:path] LIKE \'" + r.getPath() + "/%\'"+ " AND CONTAINS(*, \'text \'\'fox jumps\'\' -other\')";
  assertQuery(sql,asList("/test/node1"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void binaryNotIndexedWhenNotSupportedMimeType() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  Tree test=root.getTree("/").addChild("test");
  String path=createFileNode(test,"text","red brown fox was jumping","text/plain").getPath();
  root.commit();
  assertQuery("select * from [nt:base] where CONTAINS(*, 'jumping')",asList("/test/text/jcr:content"));
  root.getTree(path).setProperty(JcrConstants.JCR_MIMETYPE,"foo/bar");
  root.commit();
  assertQuery("select * from [nt:base] where CONTAINS(*, 'jumping')",Collections.<String>emptyList());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void rangeQueriesWithDouble() throws Exception {
  Tree idx=createIndex("test1",of("propa","propb"));
  Tree propIdx=idx.addChild(PROP_NODE).addChild("propa");
  propIdx.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DOUBLE);
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("propa",10.1);
  test.addChild("b").setProperty("propa",20.4);
  test.addChild("c").setProperty("propa",30.7);
  test.addChild("c").setProperty("propb","foo");
  test.addChild("d").setProperty("propb","foo");
  root.commit();
  assertQuery("select [jcr:path] from [nt:base] where [propa] >= 20.3",asList("/test/b","/test/c"));
  assertQuery("select [jcr:path] from [nt:base] where [propa] = 20.4",asList("/test/b"));
  assertQuery("select [jcr:path] from [nt:base] where [propa] <= 20.5",asList("/test/b","/test/a"));
  assertQuery("select [jcr:path] from [nt:base] where [propa] < 20.4",asList("/test/a"));
  assertQuery("select [jcr:path] from [nt:base] where [propa] > 10.5 and [propa] < 30",asList("/test/b"));
  assertQuery("select [jcr:path] from [nt:base] where propa is not null",asList("/test/a","/test/b","/test/c"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void indexDefinitionBelowRoot2() throws Exception {
  Tree parent=root.getTree("/").addChild("test");
  Tree idx=createIndex(parent,"test1",of("propa","propb"));
  idx.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  idx.addChild(PROP_NODE).addChild("propa");
  root.commit();
  Tree test=parent.addChild("test2").addChild("test3");
  test.addChild("a").setProperty("propa","a");
  root.commit();
  assertQuery("select [jcr:path] from [nt:base] as s where ISDESCENDANTNODE(s, '/test/test2') and propa = 'a'",asList("/test/test2/test3/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortQueriesWithDate() throws Exception {
  Tree idx=createIndex("test1",of("foo","bar"));
  Tree propIdx=idx.addChild(PROP_NODE).addChild("foo");
  propIdx.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  root.commit();
  assertSortedDate();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void customTikaConfig() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  Tree test=root.getTree("/").addChild("test");
  createFileNode(test,"text","fox is jumping","text/plain");
  createFileNode(test,"xml","<?xml version=\"1.0\" encoding=\"UTF-8\"?><msg>sky is blue</msg>","application/xml");
  root.commit();
  assertQuery("select * from [nt:base] where CONTAINS(*, 'fox ')",asList("/test/text/jcr:content"));
  assertQuery("select * from [nt:base] where CONTAINS(*, 'sky ')",asList("/test/xml/jcr:content"));
  idx=root.getTree("/oak:index/test");
  String tikaConfig="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<properties>\n" + "  <detectors>\n"+ "    <detector class=\"org.apache.tika.detect.DefaultDetector\"/>\n"+ "  </detectors>\n"+ "  <parsers>\n"+ "    <parser class=\"org.apache.tika.parser.DefaultParser\"/>\n"+ "    <parser class=\"org.apache.tika.parser.EmptyParser\">\n"+ "      <mime>application/xml</mime>\n"+ "    </parser>\n"+ "  </parsers>\n"+ "</properties>";
  idx.addChild(LuceneIndexConstants.TIKA).addChild(LuceneIndexConstants.TIKA_CONFIG).addChild(JCR_CONTENT).setProperty(JCR_DATA,tikaConfig.getBytes());
  idx.setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  root.commit();
  assertQuery("select * from [nt:base] where CONTAINS(*, 'fox ')",asList("/test/text/jcr:content"));
  assertQuery("select * from [nt:base] where CONTAINS(*, 'sky ')",Collections.<String>emptyList());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void maxFieldLengthCheck() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  Tree test=root.getTree("/").addChild("test");
  test.setProperty("text","red brown fox was jumping");
  root.commit();
  assertQuery("select * from [nt:base] where CONTAINS(*, 'jumping')",asList("/test"));
  idx=root.getTree("/oak:index/test");
  idx.setProperty(LuceneIndexConstants.MAX_FIELD_LENGTH,2);
  idx.setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  root.commit();
  assertQuery("select * from [nt:base] where CONTAINS(*, 'jumping')",Collections.<String>emptyList());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void likeQueriesWithString() throws Exception {
  Tree idx=createIndex("test1",of("propa","propb"));
  idx.addChild(PROP_NODE).addChild("propa");
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("propa","humpty");
  test.addChild("b").setProperty("propa","dumpty");
  test.addChild("c").setProperty("propa","humpy");
  root.commit();
  assertQuery("select [jcr:path] from [nt:base] where propa like 'hum%'",asList("/test/a","/test/c"));
  assertQuery("select [jcr:path] from [nt:base] where propa like '%ty'",asList("/test/a","/test/b"));
  assertQuery("select [jcr:path] from [nt:base] where propa like '%ump%'",asList("/test/a","/test/b","/test/c"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortQueriesWithDouble() throws Exception {
  Tree idx=createIndex("test1",of("foo","bar"));
  Tree propIdx=idx.addChild(PROP_NODE).addChild("foo");
  propIdx.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DOUBLE);
  root.commit();
  assertSortedDouble();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void fulltextQueryWithSpecialChars() throws Exception {
  Tree idx=createIndex("test1",of("propa","propb"));
  Tree props=TestUtil.newRulePropTree(idx,"nt:base");
  Tree prop1=props.addChild(TestUtil.unique("prop"));
  prop1.setProperty(LuceneIndexConstants.PROP_NAME,"tag");
  prop1.setProperty(LuceneIndexConstants.PROP_ANALYZED,true);
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  test.setProperty("tag","stockphotography:business/business_abstract");
  Tree test2=root.getTree("/").addChild("test2");
  test2.setProperty("tag","foo!");
  root.commit();
  String propabQuery="select * from [nt:base] where CONTAINS(tag, " + "'stockphotography:business/business_abstract')";
  assertPlanAndQuery(propabQuery,"lucene:test1(/oak:index/test1)",asList("/test"));
  String query2="select * from [nt:base] where CONTAINS(tag, 'foo!')";
  assertPlanAndQuery(query2,"lucene:test1(/oak:index/test1)",asList("/test2"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortQueriesWithString() throws Exception {
  Tree idx=createIndex("test1",of("foo","bar"));
  idx.addChild(PROP_NODE).addChild("foo");
  root.commit();
  assertSortedString();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void indexTimeFieldBoostAndRelativeProperty() throws Exception {
  Tree index=root.getTree("/");
  Tree indexDefn=createTestIndexNode(index,LuceneIndexConstants.TYPE_LUCENE);
  useV2(indexDefn);
  addPropertyDefn(indexDefn,"jcr:content/metadata/title",4.0);
  addPropertyDefn(indexDefn,"jcr:content/metadata/title2",2.0);
  addPropertyDefn(indexDefn,"propa",1.0);
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  usc(test,"a").setProperty("propa","foo foo foo");
  usc(test,"b").addChild("jcr:content").addChild("metadata").setProperty("title","foo");
  usc(test,"c").addChild("jcr:content").addChild("metadata").setProperty("title2","foo");
  root.commit();
  String queryString="//element(*, oak:Unstructured)[jcr:contains(., 'foo' )]";
  assertOrderedQuery(queryString,asList("/test/b","/test/c","/test/a"),XPATH,true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void indexDefinitionBelowRoot() throws Exception {
  Tree parent=root.getTree("/").addChild("test");
  Tree idx=createIndex(parent,"test1",of("propa","propb"));
  idx.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  idx.addChild(PROP_NODE).addChild("propa");
  root.commit();
  Tree test=parent.addChild("test2");
  test.addChild("a").setProperty("propa","a");
  root.commit();
  assertQuery("select [jcr:path] from [nt:base] as s where ISDESCENDANTNODE(s, '/test') and propa = 'a'",asList("/test/test2/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void rangeQueriesWithDate() throws Exception {
  Tree idx=createIndex("test1",of("propa","propb"));
  Tree propIdx=idx.addChild(PROP_NODE).addChild("propa");
  propIdx.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("propa",createCal("14/02/2014"));
  test.addChild("b").setProperty("propa",createCal("14/03/2014"));
  test.addChild("c").setProperty("propa",createCal("14/04/2014"));
  test.addChild("c").setProperty("propb","foo");
  test.addChild("d").setProperty("propb","foo");
  root.commit();
  assertQuery("select [jcr:path] from [nt:base] where [propa] >= " + dt("15/02/2014"),asList("/test/b","/test/c"));
  assertQuery("select [jcr:path] from [nt:base] where [propa] <=" + dt("15/03/2014"),asList("/test/b","/test/a"));
  assertQuery("select [jcr:path] from [nt:base] where [propa] < " + dt("14/03/2014"),asList("/test/a"));
  assertQuery("select [jcr:path] from [nt:base] where [propa] > " + dt("15/02/2014") + " and [propa] < "+ dt("13/04/2014"),asList("/test/b"));
  assertQuery("select [jcr:path] from [nt:base] where propa is not null",asList("/test/a","/test/b","/test/c"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortQueriesWithLong_OrderedProps() throws Exception {
  Tree idx=createIndex("test1",of("foo","bar"));
  idx.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("bar"),STRINGS));
  idx.setProperty(createProperty(ORDERED_PROP_NAMES,of("foo"),STRINGS));
  Tree propIdx=idx.addChild(PROP_NODE).addChild("foo");
  propIdx.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_LONG);
  root.commit();
  assertSortedLong();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortQueriesWithDouble_OrderedProps() throws Exception {
  Tree idx=createIndex("test1",of("foo","bar"));
  idx.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("bar"),STRINGS));
  idx.setProperty(createProperty(ORDERED_PROP_NAMES,of("foo"),STRINGS));
  Tree propIdx=idx.addChild(PROP_NODE).addChild("foo");
  propIdx.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DOUBLE);
  root.commit();
  assertSortedDouble();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortQueriesWithDate_OrderedProps() throws Exception {
  Tree idx=createIndex("test1",of("foo","bar"));
  idx.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("bar"),STRINGS));
  idx.setProperty(createProperty(ORDERED_PROP_NAMES,of("foo"),STRINGS));
  Tree propIdx=idx.addChild(PROP_NODE).addChild("foo");
  propIdx.setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  root.commit();
  assertSortedDate();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void binaryNotIndexedWhenMimeTypeNull() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  Tree test=root.getTree("/").addChild("test");
  String path=createFileNode(test,"text","red brown fox was jumping","text/plain").getPath();
  root.commit();
  assertQuery("select * from [nt:base] where CONTAINS(*, 'jumping')",asList("/test/text/jcr:content"));
  root.getTree(path).removeProperty(JcrConstants.JCR_MIMETYPE);
  root.commit();
  assertQuery("select * from [nt:base] where CONTAINS(*, 'jumping')",Collections.<String>emptyList());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void rangeQueriesWithString() throws Exception {
  Tree idx=createIndex("test1",of("propa","propb"));
  idx.addChild(PROP_NODE).addChild("propa");
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("propa","a");
  test.addChild("b").setProperty("propa","b is b");
  test.addChild("c").setProperty("propa","c");
  test.addChild("c").setProperty("propb","e");
  test.addChild("d").setProperty("propb","f");
  test.addChild("e").setProperty("propb","g");
  root.commit();
  assertQuery("select [jcr:path] from [nt:base] where propa = 'a'",asList("/test/a"));
  assertQuery("select [jcr:path] from [nt:base] where propa = 'b is b'",asList("/test/b"));
  assertQuery("select [jcr:path] from [nt:base] where propa in ('a', 'c')",asList("/test/a","/test/c"));
  assertQuery("select [jcr:path] from [nt:base] where [propb] >= 'f'",asList("/test/d","/test/e"));
  assertQuery("select [jcr:path] from [nt:base] where [propb] <= 'f'",asList("/test/c","/test/d"));
  assertQuery("select [jcr:path] from [nt:base] where [propb] > 'e'",asList("/test/d","/test/e"));
  assertQuery("select [jcr:path] from [nt:base] where [propb] < 'g'",asList("/test/c","/test/d"));
  assertQuery("select [jcr:path] from [nt:base] where propa is not null",asList("/test/a","/test/b","/test/c"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.OakDirectoryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCloseOnClonedIndexInputs() throws Exception {
  Directory dir=createDir(builder,false);
  NodeBuilder file=builder.child(INDEX_DATA_CHILD_NAME).child("test.txt");
  int dataSize=1024;
  List<? super Blob> blobs=new ArrayList<Blob>(dataSize);
  for (int i=0; i < dataSize; i++) {
    blobs.add(new ArrayBasedBlob(new byte[0]));
  }
  file.setProperty(PropertyStates.createProperty("jcr:data",blobs,Type.BINARIES));
  IndexInput input=dir.openInput("test.txt",IOContext.DEFAULT);
  IndexInput clone1=input.clone();
  IndexInput clone2=input.clone();
  input.close();
  assertClosed(input);
  assertClosed(clone1);
  assertClosed(clone2);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void writes_CustomBlobSize() throws Exception {
  builder.setProperty(LuceneIndexConstants.BLOB_SIZE,300);
  Directory dir=createDir(builder,false);
  assertWrites(dir,300);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void writes_DefaultSetup() throws Exception {
  Directory dir=createDir(builder,false);
  assertWrites(dir,IndexDefinition.DEFAULT_BLOB_SIZE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCloseOnOriginalIndexInput() throws Exception {
  Directory dir=createDir(builder,false);
  NodeBuilder file=builder.child(INDEX_DATA_CHILD_NAME).child("test.txt");
  int dataSize=1024;
  List<? super Blob> blobs=new ArrayList<Blob>(dataSize);
  for (int i=0; i < dataSize; i++) {
    blobs.add(new ArrayBasedBlob(new byte[0]));
  }
  file.setProperty(PropertyStates.createProperty("jcr:data",blobs,Type.BINARIES));
  IndexInput input=dir.openInput("test.txt",IOContext.DEFAULT);
  input.close();
  assertClosed(input);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.nodetype.NodeTypeIndexQueryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void query() throws Exception {
  setTraversalEnabled(false);
  Tree t=root.getTree("/");
  child(t,"a","nt:unstructured");
  child(t,"b","nt:unstructured");
  child(t,"c","nt:folder");
  child(t,"d","nt:folder");
  mixLanguage(t,"e");
  mixLanguage(t,"f");
  NodeUtil n=new NodeUtil(root.getTree("/oak:index"));
  createIndexDefinition(n,"nodetype",false,new String[]{JCR_PRIMARYTYPE,JCR_MIXINTYPES},new String[]{"nt:folder","mix:language"});
  root.commit();
  assertQuery("select [jcr:path] from [nt:unstructured] ",new ArrayList<String>());
  assertQuery("select [jcr:path] from [nt:folder] ",of("/c","/d"));
  assertQuery("select [jcr:path] from [mix:language] ",of("/e","/f"));
  setTraversalEnabled(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.MultiPropertyOrTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void unionSortQueries() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  root.commit();
  int seed=-3;
  for (int i=0; i < 5; i++) {
    Tree a=test.addChild("a" + i);
    a.setProperty("x","a" + i);
    seed+=3;
    a.setProperty("w",seed);
  }
  seed=-2;
  for (int i=0; i < 5; i++) {
    Tree a=test.addChild("b" + i);
    a.setProperty("y","b" + i);
    seed+=3;
    a.setProperty("w",seed);
  }
  seed=-1;
  for (int i=0; i < 5; i++) {
    Tree a=test.addChild("c" + i);
    a.setProperty("z","c" + i);
    seed+=3;
    a.setProperty("w",seed);
  }
  root.commit();
  assertQuery("/jcr:root//element(*, nt:base)[(@x = 'a4' or @y = 'b3')] order by @w",XPATH,asList("/test/b3","/test/a4"));
  assertQuery("/jcr:root//element(*, nt:base)[(@x = 'a3' or @y = 'b0' or @z = 'c2')] order by @w",XPATH,asList("/test/b0","/test/c2","/test/a3"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.MultipleIndicesTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void query() throws Exception {
  Tree t=root.getTree("/");
  t.setProperty("pid","foo");
  t.addChild("a").setProperty("pid","foo");
  t.addChild("b").setProperty("pid","bar");
  t.addChild("c").setProperty("pid","foo");
  t.addChild("d").setProperty("cid","foo");
  Tree content=t.addChild("content");
  content.addChild("x").setProperty("pid","foo");
  content.addChild("y").setProperty("pid","baz");
  content.addChild("z").setProperty("pid","bar");
  root.commit();
  setTraversalEnabled(false);
  assertQuery("select [jcr:path] from [nt:base] where [cid] = 'foo'",new ArrayList<String>());
  assertQuery("select [jcr:path] from [nt:base] where [pid] = 'foo'",ImmutableList.of("/","/a","/c","/content/x"));
  assertQuery("select [jcr:path] from [nt:base] where [pid] = 'bar'",ImmutableList.of("/b","/content/z"));
  assertQuery("select [jcr:path] from [nt:base] where [pid] = 'baz'",ImmutableList.of("/content/y"));
  setTraversalEnabled(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for OAK-841
 */
@Test public void emptyStringValue() throws CommitFailedException {
  Tree t=root.getTree("/");
  t.addChild("node-1").setProperty("pid","value");
  root.commit();
  t=root.getTree("/");
  t.addChild("node-2").setProperty("pid","");
  root.commit();
  t=root.getTree("/");
  t.addChild("node-3").setProperty("pid",":");
  root.commit();
  setTraversalEnabled(false);
  assertQuery("select [jcr:path] from [nt:base] where [pid] = 'value'",ImmutableList.of("/node-1"));
  assertQuery("select [jcr:path] from [nt:base] where [pid] = ''",ImmutableList.of("/node-2"));
  assertQuery("select [jcr:path] from [nt:base] where [pid] = ':'",ImmutableList.of("/node-3"));
  setTraversalEnabled(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.PropertyIndexQueryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void xpath() throws Exception {
  test("xpath.txt");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql2Measure() throws Exception {
  test("sql2_measure.txt");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql2() throws Exception {
  test("sql2.txt");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nativeQuery() throws Exception {
  test("sql2_native.txt");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql2Index() throws Exception {
  test("sql2_index.txt");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql1() throws Exception {
  test("sql1.txt");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.PropertyIndexTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpdateUnique() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"fooIndex",true,true,ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState done=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  builder=done.builder();
  builder.child("a").setProperty("foo","abc");
  after=builder.getNodeState();
  done=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  done=HOOK.processCommit(done,after,CommitInfo.EMPTY);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUniqueByTypeOK() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"fooIndex",true,true,ImmutableSet.of("foo"),ImmutableSet.of("typeFoo"));
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty(JCR_PRIMARYTYPE,"typeFoo",Type.NAME).setProperty("foo","abc");
  builder.child("b").setProperty(JCR_PRIMARYTYPE,"typeBar",Type.NAME).setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  HOOK.processCommit(before,after,CommitInfo.EMPTY);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void testUniqueByTypeKO() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"fooIndex",true,true,ImmutableSet.of("foo"),ImmutableSet.of("typeFoo"));
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty(JCR_PRIMARYTYPE,"typeFoo",Type.NAME).setProperty("foo","abc");
  builder.child("b").setProperty(JCR_PRIMARYTYPE,"typeFoo",Type.NAME).setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  HOOK.processCommit(before,after,CommitInfo.EMPTY);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void testUnique() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"fooIndex",true,true,ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty("foo","abc");
  builder.child("b").setProperty("foo",Arrays.asList("abc","def"),Type.STRINGS);
  NodeState after=builder.getNodeState();
  HOOK.processCommit(before,after,CommitInfo.EMPTY);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUniqueByTypeDelete() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"fooIndex",true,true,ImmutableSet.of("foo"),ImmutableSet.of("typeFoo"));
  builder.child("a").setProperty(JCR_PRIMARYTYPE,"typeFoo",Type.NAME).setProperty("foo","abc");
  builder.child("b").setProperty(JCR_PRIMARYTYPE,"typeBar",Type.NAME).setProperty("foo","abc");
  NodeState before=builder.getNodeState();
  builder.getChildNode("b").remove();
  NodeState after=builder.getNodeState();
  HOOK.processCommit(before,after,CommitInfo.EMPTY);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.SinglePropertyIndexQueryTests </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oak2146() throws Exception {
  final String statement="//*[ " + "(@" + INDEXED_PROPERTY + " = 'a' or @"+ INDEXED_PROPERTY+ " = 'c') "+ "and "+ "(@"+ INDEXED_PROPERTY+ " = 'b' or @"+ INDEXED_PROPERTY+ " = 'd')]";
  List<String> expected=newArrayList();
  Tree content=root.getTree("/").addChild("content");
  Tree node=content.addChild("node1");
  node.setProperty(INDEXED_PROPERTY,of("a","b"),STRINGS);
  expected.add(node.getPath());
  node=content.addChild("node2");
  node.setProperty(INDEXED_PROPERTY,of("c","d"),STRINGS);
  expected.add(node.getPath());
  node=content.addChild("node3");
  node.setProperty(INDEXED_PROPERTY,of("a","x"),STRINGS);
  node=content.addChild("node4");
  node.setProperty(INDEXED_PROPERTY,of("c","x"),STRINGS);
  root.commit();
  assertQuery(statement,"xpath",expected);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.configuration.DefaultAnalyzersConfigurationTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAllChildrenPathMatchingOnRootNode() throws Exception {
  String nodePath="/";
  String descendantPath=nodePath + "jcr:a/jcr:b";
  assertAnalyzesTo(allChildrenPathIndexingAnalyzer,descendantPath,new String[]{"/jcr:a","/","/jcr:a/jcr:b"});
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParentPathIndexingTokenization() throws Exception {
  try {
    TokenStream ts=parentPathIndexingAnalyzer.tokenStream("text",new StringReader("/a/b"));
    assertTokenStreamContents(ts,new String[]{"/a/b"});
  }
  finally {
    parentPathIndexingAnalyzer.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDirectChildrenPathIndexingTokenization() throws Exception {
  try {
    TokenStream ts=directChildrenPathIndexingAnalyzer.tokenStream("text",new StringReader("/jcr:a/b/jcr:c"));
    assertTokenStreamContents(ts,new String[]{"/jcr:a/b"});
    ts=directChildrenPathIndexingAnalyzer.tokenStream("text",new StringReader("/jcr:a"));
    assertTokenStreamContents(ts,new String[]{"/"});
    ts=directChildrenPathIndexingAnalyzer.tokenStream("text",new StringReader("/"));
    assertTokenStreamContents(ts,new String[]{});
  }
  finally {
    directChildrenPathIndexingAnalyzer.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAllChildrenIndexingTokenization() throws Exception {
  try {
    TokenStream ts=allChildrenPathIndexingAnalyzer.tokenStream("text",new StringReader("/jcr:a/jcr:b/c/jcr:d"));
    assertTokenStreamContents(ts,new String[]{"/jcr:a","/","/jcr:a/jcr:b","/jcr:a/jcr:b/c","/jcr:a/jcr:b/c/jcr:d"});
  }
  finally {
    allChildrenPathIndexingAnalyzer.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testExactPathIndexingTokenizationAndSearch() throws Exception {
  try {
    TokenStream ts=exactPathAnalyzer.tokenStream("text",new StringReader("/jcr:a/jcr:b/c"));
    assertTokenStreamContents(ts,new String[]{"/jcr:a/jcr:b/c"});
  }
  finally {
    exactPathAnalyzer.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAllChildrenPathMatching() throws Exception {
  String nodePath="/jcr:a/jcr:b/c";
  String descendantPath=nodePath + "/d/jcr:e";
  assertAnalyzesTo(allChildrenPathIndexingAnalyzer,descendantPath,new String[]{"/jcr:a","/","/jcr:a/jcr:b","/jcr:a/jcr:b/c","/jcr:a/jcr:b/c/d","/jcr:a/jcr:b/c/d/jcr:e"});
  assertAnalyzesTo(allChildrenPathSearchingAnalyzer,nodePath,new String[]{nodePath});
  assertAnalyzesTo(allChildrenPathSearchingAnalyzer,"/jcr:a",new String[]{"/jcr:a"});
  assertAnalyzesTo(allChildrenPathSearchingAnalyzer,"/jcr:a/b",new String[]{"/jcr:a/b"});
  assertAnalyzesTo(allChildrenPathSearchingAnalyzer,"/a/b/c",new String[]{"/a/b/c"});
  assertAnalyzesTo(allChildrenPathSearchingAnalyzer,"/a/b/c/d",new String[]{"/a/b/c/d"});
  assertAnalyzesTo(allChildrenPathSearchingAnalyzer,"/a/b/c/d/jcr:e",new String[]{"/a/b/c/d/jcr:e"});
  assertAnalyzesTo(allChildrenPathSearchingAnalyzer,"/",new String[]{"/"});
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParentPathMatching() throws Exception {
  String parentPath="/a/b";
  String nodePath=parentPath + "/jcr:c";
  assertAnalyzesTo(parentPathIndexingAnalyzer,parentPath,new String[]{parentPath});
  assertAnalyzesTo(parentPathSearchingAnalyzer,nodePath,new String[]{parentPath});
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParentPathSearchingTokenization() throws Exception {
  try {
    TokenStream ts=parentPathSearchingAnalyzer.tokenStream("text",new StringReader("/jcr:a/b/jcr:c"));
    assertTokenStreamContents(ts,new String[]{"/jcr:a/b"});
  }
  finally {
    parentPathSearchingAnalyzer.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDirectChildrenPathMatching() throws Exception {
  String nodePath="/a/b/c";
  String childPath=nodePath + "/d";
  assertAnalyzesTo(directChildrenPathIndexingAnalyzer,childPath,new String[]{nodePath});
  assertAnalyzesTo(directChildrenPathSearchingAnalyzer,nodePath,new String[]{nodePath});
  nodePath="/";
  childPath=nodePath + "/jcr:a";
  assertAnalyzesTo(directChildrenPathIndexingAnalyzer,childPath,new String[]{nodePath});
  assertAnalyzesTo(directChildrenPathSearchingAnalyzer,nodePath,new String[]{nodePath});
  String childPath1="/test/jcr:resource";
  String childPath2="/test/resource";
  nodePath="/test";
  assertAnalyzesTo(directChildrenPathIndexingAnalyzer,childPath1,new String[]{nodePath});
  assertAnalyzesTo(directChildrenPathIndexingAnalyzer,childPath2,new String[]{nodePath});
  assertAnalyzesTo(directChildrenPathSearchingAnalyzer,nodePath,new String[]{nodePath});
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAllChildrenSearchingTokenization() throws Exception {
  try {
    TokenStream ts=allChildrenPathSearchingAnalyzer.tokenStream("text",new StringReader("/jcr:a/jcr:b/jcr:c"));
    assertTokenStreamContents(ts,new String[]{"/jcr:a/jcr:b/jcr:c"});
  }
  finally {
    allChildrenPathSearchingAnalyzer.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDirectChildrenPathSearchingTokenization() throws Exception {
  try {
    TokenStream ts=directChildrenPathSearchingAnalyzer.tokenStream("text",new StringReader("/jcr:a/jcr:b"));
    assertTokenStreamContents(ts,new String[]{"/jcr:a/jcr:b"});
  }
  finally {
    directChildrenPathSearchingAnalyzer.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.configuration.nodestate.OakSolrNodeStateConfigurationTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNonExistingPath() throws Exception {
  NodeState idxDef=store.getRoot().getChildNode("oak:index").getChildNode("a");
  try {
    new OakSolrNodeStateConfiguration(idxDef);
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.LMSEstimatorTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpdate() throws Exception {
  LMSEstimator lmsEstimator=new LMSEstimator();
  Filter filter=mock(Filter.class);
  SolrDocumentList docs=mock(SolrDocumentList.class);
  lmsEstimator.update(filter,docs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.SolrIndexQueryTestIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql2FullText() throws Exception {
  test("sql2-fulltext.txt");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * OAK-1208 property existence constraints break queries
 */
@Test public void testOAK1208() throws Exception {
  Tree t=root.getTree("/").addChild("containsWithMultipleOr");
  Tree one=t.addChild("one");
  one.setProperty("p","dam/smartcollection");
  one.setProperty("t","media");
  Tree two=t.addChild("two");
  two.setProperty("p","dam/collection");
  two.setProperty("t","media");
  Tree three=t.addChild("three");
  three.setProperty("p","dam/hits");
  three.setProperty("t","media");
  root.commit();
  assertQuery("//*[jcr:contains(., 'media') and (@p = 'dam/smartcollection' or @p = 'dam/collection') ]","xpath",ImmutableList.of(one.getPath(),two.getPath()));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void contains() throws Exception {
  String h="Hello" + System.currentTimeMillis();
  String w="World" + System.currentTimeMillis();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("name",asList(h,w),STRINGS);
  test.addChild("b").setProperty("name",h);
  root.commit();
  StringBuffer stmt=new StringBuffer();
  stmt.append("/jcr:root//*[jcr:contains(., '").append(h);
  stmt.append("')]");
  assertQuery(stmt.toString(),"xpath",ImmutableList.of("/test/a","/test/b"));
  stmt=new StringBuffer();
  stmt.append("/jcr:root//*[jcr:contains(., '").append(w);
  stmt.append("')]");
  assertQuery(stmt.toString(),"xpath",ImmutableList.of("/test/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenizeCN() throws Exception {
  Tree t=root.getTree("/").addChild("containsCN");
  Tree one=t.addChild("one");
  one.setProperty("t","美女衬衫");
  root.commit();
  assertQuery("//*[jcr:contains(., '美女')]","xpath",ImmutableList.of(one.getPath()));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void multiPhraseQuery() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("dc:format","type:application/pdf");
  root.commit();
  assertQuery("/jcr:root//*[jcr:contains(@dc:format, 'type:appli*')]","xpath",ImmutableList.of("/test/a"));
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-420") public void sql2Measure() throws Exception {
  test("sql2_measure.txt");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void containsPathNum() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  Tree a=test.addChild("a");
  a.setProperty("name","/segment1/segment2/segment3");
  root.commit();
  assertQuery("//*[jcr:contains(., '/segment1/segment2')]","xpath",ImmutableList.of("/test/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void containsPath() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("name","/parent/child/node");
  root.commit();
  assertQuery("//*[jcr:contains(., '/parent/child')]","xpath",ImmutableList.of("/test/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql2() throws Exception {
  test("sql2.txt");
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore("depends on chosen text_general tokenizer") public void containsDash() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("name","hello-wor");
  test.addChild("b").setProperty("name","hello-world");
  test.addChild("c").setProperty("name","hello");
  root.commit();
  assertQuery("/jcr:root//*[jcr:contains(., 'hello-wor*')]","xpath",ImmutableList.of("/test/a","/test/b"));
  assertQuery("/jcr:root//*[jcr:contains(., '*hello-wor*')]","xpath",ImmutableList.of("/test/a","/test/b"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql1() throws Exception {
  test("sql1.txt");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nativeSolr() throws Exception {
  test("native_solr.txt");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.SolrQueryEngineIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testExactPathFiltering() throws Exception {
  Root root=createRoot();
  Tree tree=root.getTree("/");
  tree.addChild("somenode");
  tree.addChild("someothernode");
  root.commit();
  QueryIndex index=new SolrQueryIndex("solr",server,configuration);
  FilterImpl filter=new FilterImpl(mock(SelectorImpl.class),"",new QueryEngineSettings());
  filter.restrictPath("/somenode",Filter.PathRestriction.EXACT);
  Cursor cursor=index.query(filter,store.getRoot());
  assertCursor(cursor,"/somenode");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPropertyFiltering() throws Exception {
  Root root=createRoot();
  Tree tree=root.getTree("/");
  tree.addChild("somenode").setProperty("foo","bar");
  tree.addChild("someothernode").setProperty("foo","bard");
  tree.addChild("anotherone").setProperty("foo","a fool's bar");
  root.commit();
  QueryIndex index=new SolrQueryIndex("solr",server,configuration);
  FilterImpl filter=new FilterImpl(mock(SelectorImpl.class),"",new QueryEngineSettings());
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  Cursor cursor=index.query(filter,store.getRoot());
  assertCursor(cursor,"/somenode","/anotherone");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPrimaryTypeFiltering() throws Exception {
  Root root=createRoot();
  Tree tree=root.getTree("/");
  tree.addChild("asamplenode").setProperty("jcr:primaryType","nt:unstructured");
  tree.addChild("afoldernode").setProperty("jcr:primaryType","nt:folder");
  tree.addChild("anothersamplenode").setProperty("jcr:primaryType","nt:unstructured");
  root.commit();
  QueryIndex index=new SolrQueryIndex("solr",server,configuration);
  SelectorImpl selector=mock(SelectorImpl.class);
  Set<String> primaryTypes=new HashSet<String>();
  primaryTypes.add("nt:folder");
  when(selector.getPrimaryTypes()).thenReturn(primaryTypes);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:folder]",new QueryEngineSettings());
  Cursor cursor=index.query(filter,store.getRoot());
  assertCursor(cursor,"/afoldernode");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAllChildrenPathFiltering() throws Exception {
  Root root=createRoot();
  Tree tree=root.getTree("/");
  Tree parent=tree.addChild("somenode");
  parent.addChild("child1");
  Tree child2=parent.addChild("child2");
  child2.addChild("descendant");
  Tree someothernode=tree.addChild("someothernode");
  someothernode.addChild("someotherchild");
  root.commit();
  QueryIndex index=new SolrQueryIndex("solr",server,configuration);
  FilterImpl filter=new FilterImpl(mock(SelectorImpl.class),"",new QueryEngineSettings());
  filter.restrictPath("/somenode",Filter.PathRestriction.ALL_CHILDREN);
  Cursor cursor=index.query(filter,store.getRoot());
  assertCursor(cursor,"/somenode","/somenode/child1","/somenode/child2","/somenode/child2/descendant");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDirectChildrenPathFiltering() throws Exception {
  Root root=createRoot();
  Tree tree=root.getTree("/");
  Tree parent=tree.addChild("somenode");
  parent.addChild("child1");
  Tree child2=parent.addChild("child2");
  child2.addChild("descendant");
  Tree someothernode=tree.addChild("someothernode");
  someothernode.addChild("someotherchild");
  root.commit();
  QueryIndex index=new SolrQueryIndex("solr",server,configuration);
  FilterImpl filter=new FilterImpl(mock(SelectorImpl.class),"",new QueryEngineSettings());
  filter.restrictPath("/somenode",Filter.PathRestriction.DIRECT_CHILDREN);
  Cursor cursor=index.query(filter,store.getRoot());
  assertCursor(cursor,"/somenode/child1","/somenode/child2");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.memory.PropertyBuilderTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NumberFormatException.class) public void testAssignFromStringNumberFormatException(){
  PropertyState source=StringPropertyState.stringProperty("foo","bar");
  PropertyBuilder builder=PropertyBuilder.scalar(Type.LONG);
  builder.assignFrom(source);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.metric.MetricStatisticsProviderTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void statsOptions_TimeSeriesOnly() throws Exception {
  assertInstanceOf(statsProvider.getTimer("fooTimer",StatsOptions.TIME_SERIES_ONLY),SimpleStats.class);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void statsOptions_Default() throws Exception {
  assertInstanceOf(statsProvider.getTimer("fooTimer",StatsOptions.DEFAULT),CompositeStats.class);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void statsOptions_MetricOnly() throws Exception {
  assertInstanceOf(statsProvider.getTimer("fooTimer",StatsOptions.METRICS_ONLY),TimerImpl.class);
  assertInstanceOf(statsProvider.getCounterStats("fooCounter",StatsOptions.METRICS_ONLY),CounterImpl.class);
  assertInstanceOf(statsProvider.getMeter("fooMeter",StatsOptions.METRICS_ONLY),MeterImpl.class);
  assertInstanceOf(statsProvider.getHistogram("fooHisto",StatsOptions.METRICS_ONLY),HistogramImpl.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.name.NameValidatorTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidName() throws CommitFailedException {
  validator.childNodeAdded("name",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEmptyPrefix() throws CommitFailedException {
  validator.childNodeAdded(":name",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void testInvalidPrefix() throws CommitFailedException {
  validator.childNodeAdded("invalid:name",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void testInvalidIndexInName() throws CommitFailedException {
  validator.childNodeAdded("name[x]",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidPrefix() throws CommitFailedException {
  validator.childNodeAdded("valid:name",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void testParentPath() throws CommitFailedException {
  validator.childNodeAdded("..",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleted() throws CommitFailedException {
  validator.childNodeDeleted(".",EMPTY_NODE);
  validator.childNodeDeleted("..",EMPTY_NODE);
  validator.childNodeDeleted("valid:name",EMPTY_NODE);
  validator.childNodeDeleted("invalid:name",EMPTY_NODE);
  validator.childNodeDeleted("invalid/name",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void testLeadingWhitespace() throws CommitFailedException {
  validator.childNodeAdded(" name",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void testCurrentPath() throws CommitFailedException {
  validator.childNodeAdded(".",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void testTrailingWhitespace() throws CommitFailedException {
  validator.childNodeAdded("name ",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void testSlashName() throws CommitFailedException {
  validator.childNodeAdded("invalid/name",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void testNameWithLineBreaks() throws Exception {
  validator.childNodeAdded("name\tx",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void testOnlyWhitespace() throws CommitFailedException {
  validator.childNodeAdded(" ",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidIndexInName() throws CommitFailedException {
  validator.childNodeAdded("name[1]",EMPTY_NODE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.nodetype.TypeEditorTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void removeMandatoryProperty() throws CommitFailedException {
  EffectiveType effective=createControl().createMock(EffectiveType.class);
  expect(effective.isMandatoryProperty("mandatory")).andReturn(true);
  replay(effective);
  TypeEditor editor=new TypeEditor(effective);
  editor.propertyDeleted(PropertyStates.createProperty("mandatory",""));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void removeNonMandatoryChildNode() throws CommitFailedException {
  EffectiveType effective=createControl().createMock(EffectiveType.class);
  expect(effective.isMandatoryChildNode("mandatory")).andReturn(false);
  replay(effective);
  TypeEditor editor=new TypeEditor(effective);
  editor.childNodeDeleted("mandatory",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void requiredTypeIsUndefined() throws CommitFailedException {
  EditorHook hook=new EditorHook(new TypeEditorProvider());
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeState before=builder.getNodeState();
  builder.setProperty("any","title");
  NodeState after=builder.getNodeState();
  hook.processCommit(before,after,CommitInfo.EMPTY);
  builder.setProperty("any",134.34,Type.DOUBLE);
  hook.processCommit(after,builder.getNodeState(),CommitInfo.EMPTY);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void removeMandatoryChildNode() throws CommitFailedException {
  EffectiveType effective=createControl().createMock(EffectiveType.class);
  expect(effective.isMandatoryChildNode("mandatory")).andReturn(true);
  replay(effective);
  TypeEditor editor=new TypeEditor(effective);
  editor.childNodeDeleted("mandatory",EMPTY_NODE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void ignoreHidden() throws CommitFailedException {
  EditorHook hook=new EditorHook(new TypeEditorProvider());
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeState before=builder.getNodeState();
  builder.child(":hidden");
  NodeState after=builder.getNodeState();
  hook.processCommit(before,after,CommitInfo.EMPTY);
  before=after;
  builder.child(":hidden").setProperty("prop","value");
  after=builder.getNodeState();
  hook.processCommit(before,after,CommitInfo.EMPTY);
  before=after;
  builder.getChildNode(":hidden").remove();
  after=builder.getNodeState();
  hook.processCommit(before,after,CommitInfo.EMPTY);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void removeNonMandatoryProperty() throws CommitFailedException {
  EffectiveType effective=createControl().createMock(EffectiveType.class);
  expect(effective.isMandatoryProperty("mandatory")).andReturn(false);
  replay(effective);
  TypeEditor editor=new TypeEditor(effective);
  editor.propertyDeleted(PropertyStates.createProperty("mandatory",""));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.CommitRateLimiterTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ExecutionException.class) public void delayCommitsWithInterrupt() throws InterruptedException, ExecutionException, TimeoutException {
  limiter.setDelay(10000);
  Thread t=new Thread(commit);
  t.start();
  t.interrupt();
  commit.get(1,TimeUnit.SECONDS);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CommitFailedException.class) public void blockCommits() throws CommitFailedException {
  limiter.blockCommits();
  limiter.processCommit(EMPTY_NODE,AFTER,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CheckpointTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCheckpoint() throws CommitFailedException, IOException {
  SegmentNodeStore store=new SegmentNodeStore(new MemoryStore());
  addTestNode(store,"test-checkpoint");
  verifyNS(store,true);
  rmTestNode(store,"test-checkpoint");
  verifyNS(store,false);
  store.retrieve("missing-checkpoint");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CompactionAndCleanupIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Set a root node referring to a child node that lives in a different segments. Depending
 * on the order how the SegmentBufferWriters associated with the threads used to create the
 * nodes are flushed, this will introduce a forward reference between the segments.
 * The current cleanup mechanism cannot handle forward references and removes the referenced
 * segment causing a SNFE.
 * This is a regression introduced with OAK-1828.
 */
@Test public void cleanupCyclicGraph() throws IOException, ExecutionException, InterruptedException {
  FileStore fileStore=newFileStore(directory).create();
  final SegmentWriter writer=fileStore.getTracker().getWriter();
  final SegmentNodeState oldHead=fileStore.getHead();
  final SegmentNodeState child=run(new Callable<SegmentNodeState>(){
    @Override public SegmentNodeState call() throws Exception {
      NodeBuilder builder=EMPTY_NODE.builder();
      return writer.writeNode(EMPTY_NODE);
    }
  }
);
  SegmentNodeState newHead=run(new Callable<SegmentNodeState>(){
    @Override public SegmentNodeState call() throws Exception {
      NodeBuilder builder=oldHead.builder();
      builder.setChildNode("child",child);
      return writer.writeNode(builder.getNodeState());
    }
  }
);
  writer.flush();
  fileStore.setHead(oldHead,newHead);
  fileStore.close();
  fileStore=newFileStore(directory).create();
  traverse(fileStore.getHead());
  fileStore.cleanup();
  traverse(fileStore.getHead());
  fileStore.close();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void noCleanupOnCompactionMap() throws Exception {
  final int blobSize=5 * 1024 * 1024;
  final int dataNodes=10000;
  FileStore fileStore=new FileStore(directory,1);
  final SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
  CompactionStrategy custom=new CompactionStrategy(false,false,CLEAN_OLD,TimeUnit.HOURS.toMillis(1),(byte)0){
    @Override public boolean compacted(    @Nonnull Callable<Boolean> setHead) throws Exception {
      return nodeStore.locked(setHead);
    }
  }
;
  fileStore.setCompactionStrategy(custom);
  NodeBuilder extra=nodeStore.getRoot().builder();
  NodeBuilder content=extra.child("content");
  for (int i=0; i < dataNodes; i++) {
    NodeBuilder c=content.child("c" + i);
    for (int j=0; j < 1000; j++) {
      c.setProperty("p" + i,"v" + i);
    }
  }
  nodeStore.merge(extra,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final long dataSize=fileStore.size();
  log.debug("File store dataSize {}",byteCountToDisplaySize(dataSize));
  try {
    NodeBuilder builder=nodeStore.getRoot().builder();
    builder.setProperty("a1",createBlob(nodeStore,blobSize));
    builder.setProperty("b","foo");
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    builder=nodeStore.getRoot().builder();
    builder.removeProperty("a1");
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    fileStore.maybeCompact(false);
    builder=nodeStore.getRoot().builder();
    builder.setProperty("a2",createBlob(nodeStore,blobSize));
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    fileStore.maybeCompact(false);
    fileStore.cleanup();
    custom.setOlderThan(0);
    TimeUnit.MILLISECONDS.sleep(5);
    boolean needsCompaction=true;
    for (int i=0; i < 3 && needsCompaction; i++) {
      needsCompaction=fileStore.maybeCompact(false);
      fileStore.cleanup();
    }
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CompareAgainstBaseStateTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChildNodeAdded(){
  NodeState before=builder.getNodeState();
  builder=before.builder();
  builder.child("test");
  NodeState after=builder.getNodeState();
  expect(diff.childNodeAdded("test",after.getChildNode("test"))).andReturn(true);
  replay(diff);
  after.compareAgainstBaseState(before,diff);
  verify(diff);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPropertyAdded(){
  NodeState before=builder.getNodeState();
  builder=before.builder();
  builder.setProperty("test","test");
  NodeState after=builder.getNodeState();
  expect(diff.propertyAdded(after.getProperty("test"))).andReturn(true);
  replay(diff);
  after.compareAgainstBaseState(before,diff);
  verify(diff);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChildNodeDeleted(){
  NodeState before=builder.getNodeState();
  builder.getChildNode("baz").remove();
  NodeState after=builder.getNodeState();
  expect(diff.childNodeDeleted("baz",before.getChildNode("baz"))).andReturn(true);
  replay(diff);
  after.compareAgainstBaseState(before,diff);
  verify(diff);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSameState(){
  NodeState node=builder.getNodeState();
  replay(diff);
  node.compareAgainstBaseState(node,diff);
  verify(diff);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEqualState(){
  NodeState before=builder.getNodeState();
  NodeState after=before.builder().getNodeState();
  replay(diff);
  after.compareAgainstBaseState(before,diff);
  verify(diff);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChildNodeChanged(){
  NodeState before=builder.getNodeState();
  builder.child("baz").setProperty("test","test");
  NodeState after=builder.getNodeState();
  expect(diff.childNodeChanged("baz",before.getChildNode("baz"),after.getChildNode("baz"))).andReturn(true);
  replay(diff);
  after.compareAgainstBaseState(before,diff);
  verify(diff);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPropertyDeleted(){
  NodeState before=builder.getNodeState();
  builder=before.builder();
  builder.removeProperty("foo");
  NodeState after=builder.getNodeState();
  expect(diff.propertyDeleted(before.getProperty("foo"))).andReturn(true);
  replay(diff);
  after.compareAgainstBaseState(before,diff);
  verify(diff);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPropertyChanged(){
  NodeState before=builder.getNodeState();
  builder=before.builder();
  builder.setProperty("foo","test");
  NodeState after=builder.getNodeState();
  expect(diff.propertyChanged(before.getProperty("foo"),after.getProperty("foo"))).andReturn(true);
  replay(diff);
  after.compareAgainstBaseState(before,diff);
  verify(diff);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.ExternalBlobIT </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore("would need a FileBlobStore for this") public void testFileBlob() throws Exception {
  nodeStore=getNodeStore(new TestBlobStore());
  testCreateAndRead(getFileBlob());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.HeavyWriteIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void heavyWrite() throws IOException, CommitFailedException, InterruptedException {
  final FileStore store=new FileStore(directory,128,false);
  final SegmentNodeStore nodeStore=new SegmentNodeStore(store);
  CompactionStrategy custom=new CompactionStrategy(false,false,CLEAN_OLD,30000,(byte)0){
    @Override public boolean compacted(    @Nonnull Callable<Boolean> setHead) throws Exception {
      return nodeStore.locked(setHead);
    }
  }
;
  custom.setPersistCompactionMap(usePersistedMap);
  store.setCompactionStrategy(custom);
  int writes=100;
  final AtomicBoolean run=new AtomicBoolean(true);
  Thread thread=new Thread(new Runnable(){
    @Override public void run(){
      for (int k=1; run.get(); k++) {
        store.gc();
        try {
          Thread.sleep(5000);
        }
 catch (        InterruptedException e) {
          Thread.currentThread().interrupt();
          break;
        }
      }
    }
  }
);
  thread.start();
  try {
    for (int k=1; k <= writes; k++) {
      NodeBuilder root=nodeStore.getRoot().builder();
      NodeBuilder test=root.setChildNode("test");
      createNodes(nodeStore,test,10,2);
      nodeStore.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
      root=nodeStore.getRoot().builder();
      root.getChildNode("test").remove();
      nodeStore.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    }
  }
  finally {
    run.set(false);
    thread.join();
    store.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.InitializerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInitializerSegment() throws CommitFailedException, IOException {
  NodeStore store=new SegmentNodeStore(new MemoryStore());
  NodeBuilder builder=store.getRoot().builder();
  new InitialContent().initialize(builder);
  SecurityProviderImpl provider=new SecurityProviderImpl(ConfigurationParameters.of(ImmutableMap.of(UserConfiguration.NAME,ConfigurationParameters.of(ImmutableMap.of("anonymousId","anonymous","adminId","admin","usersPath","/home/users","groupsPath","/home/groups","defaultDepth","1")))));
  provider.getConfiguration(UserConfiguration.class).getWorkspaceInitializer().initialize(builder,"default");
  builder.getNodeState();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.MapRecordTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOak1104(){
  Pattern pattern=Pattern.compile(", ");
  Set<String> beforeNames=newHashSet(pattern.split("_b_Lucene41_0.doc, _b.fdx, _b.fdt, segments_34, _b_4.del," + " _b_Lucene41_0.pos, _b.nvm, _b.nvd, _b.fnm, _3n.si," + " _b_Lucene41_0.tip, _b_Lucene41_0.tim, _3n.cfe,"+ " segments.gen, _3n.cfs, _b.si"));
  Set<String> afterNames=newHashSet(pattern.split("_b_Lucene41_0.pos, _3k.cfs, _3j_1.del, _b.nvm, _b.nvd," + " _3d.cfe, _3d.cfs, _b.fnm, _3j.si, _3h.si, _3i.cfe," + " _3i.cfs, _3e_2.del, _3f.si, _b_Lucene41_0.tip,"+ " _b_Lucene41_0.tim, segments.gen, _3e.cfe, _3e.cfs,"+ " _b.si, _3g.si, _3l.si, _3i_1.del, _3d_3.del, _3e.si,"+ " _3d.si, _b_Lucene41_0.doc, _3h_2.del, _3i.si, _3k_1.del,"+ " _3j.cfe, _3j.cfs, _b.fdx, _b.fdt, _3g_1.del, _3k.si,"+ " _3l.cfe, _3l.cfs, segments_33, _3f_1.del, _3h.cfe,"+ " _3h.cfs, _b_4.del, _3f.cfe, _3f.cfs, _3g.cfe, _3g.cfs"));
  for (  String name : beforeNames) {
    builder.setChildNode(name);
  }
  NodeState before=builder.getNodeState();
  for (  String name : Sets.difference(beforeNames,afterNames)) {
    builder.getChildNode(name).remove();
  }
  for (  String name : Sets.difference(afterNames,beforeNames)) {
    builder.setChildNode(name);
  }
  NodeState after=builder.getNodeState();
  for (  String name : Sets.difference(beforeNames,afterNames)) {
    expect(diff.childNodeDeleted(name,before.getChildNode(name))).andReturn(true);
  }
  for (  String name : Sets.difference(afterNames,beforeNames)) {
    expect(diff.childNodeAdded(name,after.getChildNode(name))).andReturn(true);
  }
  replay(diff);
  after.compareAgainstBaseState(before,diff);
  verify(diff);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.PartialCompactionMapTest </h4><pre class="type-16 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void benchLargeMap(){
  assumeTrue(Boolean.getBoolean("benchmark.benchLargeMap"));
  assertHeapSize(4000000000L);
  map=createCompactionMap();
  Runtime runtime=Runtime.getRuntime();
  for (int i=0; i < 1000; i++) {
    Map<RecordId,RecordId> ids=randomRecordIdMap(rnd,getTracker(),10000,100);
    long start=System.nanoTime();
    for (    Entry<RecordId,RecordId> entry : ids.entrySet()) {
      map.put(entry.getKey(),entry.getValue());
    }
    log.info("Bench Large Map #" + (i + 1) + ": "+ (runtime.totalMemory() - runtime.freeMemory()) / (1024 * 1024) + "MB, " + (System.nanoTime() - start) / 1000000 + "ms");
  }
}

</code></pre>

<br>
<pre class="type-16 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void benchPut() throws Exception {
  assumeTrue(Boolean.getBoolean("benchmark.benchPut"));
  assertHeapSize(4000000000L);
  run(new PutBenchmark(0,100));
  run(new PutBenchmark(10,100));
  run(new PutBenchmark(100,100));
  run(new PutBenchmark(1000,100));
  run(new PutBenchmark(10000,100));
  run(new PutBenchmark(100000,100));
  run(new PutBenchmark(1000000,100));
}

</code></pre>

<br>
<pre class="type-16 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void benchGet() throws Exception {
  assumeTrue(Boolean.getBoolean("benchmark.benchGet"));
  assertHeapSize(4000000000L);
  run(new GetBenchmark(0,100));
  run(new GetBenchmark(10,100));
  run(new GetBenchmark(100,100));
  run(new GetBenchmark(1000,100));
  run(new GetBenchmark(10000,100));
  run(new GetBenchmark(100000,100));
  run(new GetBenchmark(1000000,100));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.RecordTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStreamRecord() throws IOException {
  checkRandomStreamRecord(0);
  checkRandomStreamRecord(1);
  checkRandomStreamRecord(0x79);
  checkRandomStreamRecord(0x80);
  checkRandomStreamRecord(0x4079);
  checkRandomStreamRecord(0x4080);
  checkRandomStreamRecord(SegmentWriter.BLOCK_SIZE);
  checkRandomStreamRecord(SegmentWriter.BLOCK_SIZE + 1);
  checkRandomStreamRecord(Segment.MAX_SEGMENT_SIZE);
  checkRandomStreamRecord(Segment.MAX_SEGMENT_SIZE + 1);
  checkRandomStreamRecord(Segment.MAX_SEGMENT_SIZE * 2);
  checkRandomStreamRecord(Segment.MAX_SEGMENT_SIZE * 2 + 1);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testListWithLotsOfReferences() throws IOException {
  SegmentTracker factory=store.getTracker();
  List<RecordId> list=newArrayList();
  for (int i=0; i < 1000; i++) {
    list.add(new RecordId(factory.newBulkSegmentId(),0));
  }
  writer.writeList(list);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.RecordUsageAnalyserTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithLargeString() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("large",repeat("b",MEDIUM_LIMIT + 1));
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,15,16530,8,6);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithBlob() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("blob",createRandomBlob(4));
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,0,10,8,6);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithMediumBlob() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("mediumBlob",createRandomBlob(SMALL_LIMIT + 1));
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,0,142,8,6);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void emptyNode() throws IOException {
  SegmentNodeState node=writer.writeNode(EMPTY_NODE);
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,0,0,4,3);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithInts() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("multi",ImmutableList.of(1L,2L,3L,4L),LONGS);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,12,21,8,6);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithMixinTypes() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("jcr:mixinTypes",ImmutableList.of("type1","type2"),NAMES);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,0,12,10,3);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void singleChild() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setChildNode("child");
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,0,6,11,9);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithStrings() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("multi",ImmutableList.of("one","one","two","two","three"),STRINGS);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,15,27,8,6);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithString() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("two","222");
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,0,8,8,6);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithMultipleProperties() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("one","11");
  builder.setProperty("two","22");
  builder.setProperty("three","33");
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  if (segmentVersion == V_11) {
    assertSizes(analyser,0,18,23,10,6);
  }
 else {
    assertSizes(analyser,0,0,23,16,12);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithPrimaryType() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("jcr:primaryType","type",NAME);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,0,5,7,3);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithLargeBlob() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("largeBlob",createRandomBlob(MEDIUM_LIMIT + 1));
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,15,16534,8,6);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithManyIntsAndOne() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("multi",nCopies(LEVEL_SIZE + 2,1L),LONGS);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,777,15,8,6);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithInt() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("one",1);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,0,6,8,6);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithMediumString() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("medium",repeat("a",SMALL_LIMIT + 1));
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,0,138,8,6);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void manyChild() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  for (int k=0; k < MapRecord.BUCKETS_PER_LEVEL + 1; k++) {
    builder.setChildNode("child" + k);
  }
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,457,0,254,8,105);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void counts() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setChildNode("child1");
  builder.setChildNode("child2");
  builder.setProperty("prop",ImmutableList.of("a","b"),STRINGS);
  builder.setProperty("mediumString",repeat("m",SMALL_LIMIT));
  builder.setProperty("longString",repeat("l",MEDIUM_LIMIT));
  builder.setProperty("smallBlob",createRandomBlob(4));
  builder.setProperty("mediumBlob",createRandomBlob(SMALL_LIMIT));
  builder.setProperty("longBlob",createRandomBlob(MEDIUM_LIMIT));
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  if (segmentVersion == V_11) {
    assertCounts(analyser,1,5,6,1,1,1,0,10,1,1,2,3);
  }
 else {
    assertCounts(analyser,1,3,6,1,1,1,0,10,1,1,2,3);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithSameString() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("two","two");
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,0,4,8,6);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void changedChild() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setChildNode("child1");
  builder.setChildNode("child2");
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,24,0,14,8,12);
  builder=node.builder();
  builder.child("child1").setProperty("p","q");
  when(store.containsSegment(node.getRecordId().getSegmentId())).thenReturn(true);
  node=(SegmentNodeState)builder.getNodeState();
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,41,0,18,16,24);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void multiChild() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setChildNode("child1");
  builder.setChildNode("child2");
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,24,0,14,8,12);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void nodeWithManyInts() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("multi",nCopies(LEVEL_SIZE + 1,1L),LONGS);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  analyser.analyseNode(node.getRecordId());
  assertSizes(analyser,0,771,15,8,6);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentCompactionIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void run() throws InterruptedException {
  scheduleSizeMonitor();
  scheduleCompactor();
  addReaders(maxReaders);
  addWriters(maxWriters);
synchronized (this) {
    while (!stopping) {
      wait();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentIdFactoryTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * OAK-2049 - error for data segments
 */
@Test(expected=IllegalStateException.class) public void dataAIOOBE(){
  SegmentId id=factory.newDataSegmentId();
  byte[] buffer=SegmentBufferWriter.createNewBuffer(SegmentVersion.V_11);
  ByteBuffer data=ByteBuffer.allocate(Segment.MAX_SEGMENT_SIZE);
  data.put(buffer);
  data.rewind();
  Segment s=new Segment(factory,id,data);
  s.getRefId(1);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * OAK-2049 - error for bulk segments
 */
@Test(expected=IllegalStateException.class) public void bulkAIOOBE(){
  SegmentId id=factory.newBulkSegmentId();
  ByteBuffer data=ByteBuffer.allocate(4);
  Segment s=new Segment(factory,id,data);
  s.getRefId(1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStoreServiceTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A NodeStore service should not be registered when the "customBlobStore"
 * configuration property is true but a BlobStore service is not available.
 */
@Test public void testUseCustomBlobStoreWithoutBlobStore(){
  registerSegmentNodeStoreService(true);
  assertServiceNotActivated();
  unregisterSegmentNodeStoreService();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A NodeStore service should be unregistered when the "customBlobStore"
 * configuration property is true and a BlobStore service becomes
 * dynamically unavailable.
 */
@Test public void testUseCustomBlobStoreWithDynamicBlobStoreDeactivation(){
  registerBlobStore();
  registerSegmentNodeStoreService(true);
  assertServiceActivated();
  unregisterBlobStore();
  assertServiceNotActivated();
  unregisterSegmentNodeStoreService();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A NodeStore service should be registered when the "customBlobStore"
 * configuration property is true and a BlobStore service becomes
 * dynamically available.
 */
@Test public void testUseCustomBlobStoreWithDynamicBlobStoreActivation(){
  registerSegmentNodeStoreService(true);
  assertServiceNotActivated();
  registerBlobStore();
  assertServiceActivated();
  unregisterSegmentNodeStoreService();
  unregisterBlobStore();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A NodeStore service should be registered when a BlobStore service is not
 * available and the "customBlobStore" configuration property is false.
 */
@Test public void testNoCustomBlobStoreWithoutBlobStore(){
  registerSegmentNodeStoreService(false);
  assertServiceActivated();
  unregisterSegmentNodeStoreService();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A NodeStore service should be registered when a BlobStore service is not
 * available but the "customBlobStore" configuration property is false.
 */
@Test public void testNoCustomBlobStoreWithBlobStore(){
  registerBlobStore();
  registerSegmentNodeStoreService(false);
  assertServiceActivated();
  unregisterSegmentNodeStoreService();
  unregisterBlobStore();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A NodeStore service should be registered when the "customBlobStore"
 * configuration property is true and a BlobStore service is available.
 */
@Test public void testUseCustomBlobStoreWithBlobStore(){
  registerBlobStore();
  registerSegmentNodeStoreService(true);
  assertServiceActivated();
  unregisterSegmentNodeStoreService();
  unregisterBlobStore();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentOverflowExceptionIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void run() throws IOException, CommitFailedException, InterruptedException {
  FileStore fileStore=newFileStore(directory).withGCMonitor(gcMonitor).create();
  try {
    final SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
    fileStore.setCompactionStrategy(new CompactionStrategy(false,false,CLEAN_OLD,1000,MEMORY_THRESHOLD_DEFAULT){
      @Override public boolean compacted(      @Nonnull Callable<Boolean> setHead) throws Exception {
        return nodeStore.locked(setHead);
      }
    }
);
    long start=System.currentTimeMillis();
    int snfeCount=0;
    while (System.currentTimeMillis() - start < TIMEOUT) {
      try {
        NodeBuilder root=nodeStore.getRoot().builder();
        while (rnd.nextInt(100) != 0) {
          modify(nodeStore,root);
        }
        nodeStore.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
        if (compact) {
          compact=false;
          fileStore.maybeCompact(true);
        }
      }
 catch (      SegmentNotFoundException snfe) {
        if (snfeCount++ > 100) {
          throw snfe;
        }
      }
    }
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentSizeTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAccessControlNodes() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("jcr:primaryType","rep:ACL",Type.NAME);
  expectSize(96,builder);
  expectAmortizedSize(4,builder);
  NodeBuilder deny=builder.child("deny");
  deny.setProperty("jcr:primaryType","rep:DenyACE",Type.NAME);
  deny.setProperty("rep:principalName","everyone");
  deny.setProperty(PropertyStates.createProperty("rep:privileges",ImmutableList.of("jcr:read"),Type.NAMES));
  expectSize(240,builder);
  expectAmortizedSize(32,builder);
  NodeBuilder allow=builder.child("allow");
  allow.setProperty("jcr:primaryType","rep:GrantACE");
  allow.setProperty("rep:principalName","administrators");
  allow.setProperty(PropertyStates.createProperty("rep:privileges",ImmutableList.of("jcr:all"),Type.NAMES));
  expectSize(368,builder);
  expectAmortizedSize(84,builder);
  NodeBuilder deny0=builder.child("deny0");
  deny0.setProperty("jcr:primaryType","rep:DenyACE",Type.NAME);
  deny0.setProperty("rep:principalName","everyone");
  deny0.setProperty("rep:glob","*/activities/*");
  builder.setProperty(PropertyStates.createProperty("rep:privileges",ImmutableList.of("jcr:read"),Type.NAMES));
  expectSize(464,builder);
  expectAmortizedSize(124,builder);
  NodeBuilder allow0=builder.child("allow0");
  allow0.setProperty("jcr:primaryType","rep:GrantACE");
  allow0.setProperty("rep:principalName","user-administrators");
  allow0.setProperty(PropertyStates.createProperty("rep:privileges",ImmutableList.of("jcr:all"),Type.NAMES));
  expectSize(528,builder);
  expectAmortizedSize(160,builder);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeSize() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  expectSize(96,builder);
  expectAmortizedSize(4,builder);
  builder=EMPTY_NODE.builder();
  builder.setProperty("foo","bar");
  expectSize(112,builder);
  expectAmortizedSize(8,builder);
  builder=EMPTY_NODE.builder();
  builder.setProperty("foo","bar");
  builder.setProperty("baz",123);
  expectSize(128,builder);
  expectAmortizedSize(16,builder);
  builder=EMPTY_NODE.builder();
  builder.child("foo");
  expectSize(128,builder);
  expectAmortizedSize(12,builder);
  builder=EMPTY_NODE.builder();
  builder.child("foo");
  builder.child("bar");
  expectSize(144,builder);
  expectAmortizedSize(40,builder);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentVersionTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void migrate() throws IOException, CommitFailedException {
  FileStore fileStoreV10=new FileStore(directory,1){
    @SuppressWarnings("deprecation") @Override public SegmentVersion getVersion(){
      return SegmentVersion.V_10;
    }
  }
;
  try {
    addTestContent(fileStoreV10,"content10");
  }
  finally {
    fileStoreV10.close();
  }
  FileStore fileStoreV11=new FileStore(directory,1);
  try {
    fileStoreV11.setCompactionStrategy(new CompactionStrategy(false,false,CLEAN_NONE,0,(byte)0){
      @Override public boolean compacted(      @Nonnull Callable<Boolean> setHead) throws Exception {
        return setHead.call();
      }
    }
);
    checkAllVersions(fileStoreV11.getHead(),SegmentVersion.V_10);
    fileStoreV11.compact();
    checkAllVersions(fileStoreV11.getHead(),V_11);
  }
  finally {
    fileStoreV11.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void readOldVersions() throws Exception {
  FileStore fileStoreV10=new FileStore(directory,1){
    @SuppressWarnings("deprecation") @Override public SegmentVersion getVersion(){
      return SegmentVersion.V_10;
    }
  }
;
  try {
    NodeState content=addTestContent(fileStoreV10,"content");
    assertVersion(content,SegmentVersion.V_10);
  }
  finally {
    fileStoreV10.close();
  }
  FileStore fileStoreV11=new FileStore(directory,1);
  try {
    verifyContent(fileStoreV11,"content");
  }
  finally {
    fileStoreV11.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mixedVersions() throws IOException, CommitFailedException {
  FileStore fileStoreV10=new FileStore(directory,1){
    @SuppressWarnings("deprecation") @Override public SegmentVersion getVersion(){
      return SegmentVersion.V_10;
    }
  }
;
  try {
    NodeState content10=addTestContent(fileStoreV10,"content10");
    assertVersion(content10,SegmentVersion.V_10);
  }
  finally {
    fileStoreV10.close();
  }
  FileStore fileStoreV11=new FileStore(directory,1);
  try {
    NodeState content11=addTestContent(fileStoreV11,"content11");
    assertVersion(content11,V_11);
    verifyContent(fileStoreV11,"content10");
    verifyContent(fileStoreV11,"content11");
  }
  finally {
    fileStoreV11.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.ShortSetTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addMedian(){
  short[] elements=new short[]{0,1,2,3,4,6,7,8,9,5};
  addAndCheck(elements);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addRandom(){
  short[] elements=new short[8192];
  Random rnd=new Random();
  for (int k=0; k < elements.length; k++) {
    elements[k]=s(rnd.nextInt(1 + Short.MAX_VALUE - Short.MIN_VALUE) + Short.MIN_VALUE);
  }
  addAndCheck(elements);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addLast(){
  short[] elements=new short[]{8,7,6,5,4,3,2,1,0,9};
  addAndCheck(elements);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addFirst(){
  short[] elements=new short[]{1,2,3,4,5,6,7,8,9,0};
  addAndCheck(elements);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.ExternalBlobReferenceTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * The {@code SegmentWriter} should be able to write blob IDs whose length
 * is between 0 and {@code Segment.BLOB_ID_SMALL_LIMIT - 1} bytes. It should
 * be possible to correctly read the blob ID back and pass it to the {@codeBlobStore} to obtain information about the blob.
 * <p/>
 * This code path executes only if the written stream is {@codeSegment.MEDIUM_LIMIT} bytes long (or more). If the length of the stream
 * is smaller, the binary value is inlined in the segment and the {@codeBlobStore} is never called.
 * <p/>
 * See OAK-3105.
 */
@Test public void testShortBlobId() throws Exception {
  testBlobIdWithLength(Segment.BLOB_ID_SMALL_LIMIT - 1);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * If the {@code BlobStore} returns a blob ID whose length is {@codeSegment.BLOB_ID_SMALL_LIMIT} bytes long (or more), writing the stream
 * should succeed. In this case, the blob ID is considered a long blob ID
 * and an alternate encoding is used. It should be possible to correctly
 * read the blob ID back and pass it to the {@code BlobStore} to obtain
 * information about the blob.
 * <p/>
 * This code path executes only if the written stream is {@codeSegment.MEDIUM_LIMIT} bytes long (or more). If the length of the stream
 * is smaller, the binary value is inlined in the segment and the {@codeBlobStore} is never called.
 * <p/>
 * See OAK-3105 and OAK-3107.
 */
@Test public void testLongBlobId() throws Exception {
  testBlobIdWithLength(Segment.BLOB_ID_SMALL_LIMIT);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.FileStoreIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void segmentOverflow() throws IOException {
  for (int n=1; n < 255; n++) {
    FileStore store=new FileStore(directory,1,false);
    SegmentWriter writer=store.getTracker().getWriter();
    for (int k=0; k < 15; k++) {
      writer.writeString(Strings.repeat("abcdefghijklmno".substring(k,k + 1),Segment.MEDIUM_LIMIT - 1));
    }
    RecordId x=writer.writeString(Strings.repeat("x",14278));
    List<RecordId> list=Collections.nCopies(n,x);
    writer.writeList(list);
    writer.flush();
    store.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestartAndGCWithMM() throws IOException {
  testRestartAndGC(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestartAndGCWithoutMM() throws IOException {
  testRestartAndGC(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.LargeNumberOfPropertiesTestIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void corruption() throws Exception {
  FileStore fileStore=newFileStore(directory).withMaxFileSize(5).withNoCache().withMemoryMapping(true).create();
  SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
  NodeBuilder root=nodeStore.getRoot().builder();
  try {
    NodeBuilder c=root.child("c" + System.currentTimeMillis());
    for (int i=0; i < 25; i++) {
      LOG.debug("run {}/24",i);
      for (int j=0; j < 10000; j++) {
        c.setProperty("int-" + i + "-"+ j,i);
      }
    }
    nodeStore.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.ReversedLinesFileReaderTestParamBlockSize </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWindows31jFile() throws URISyntaxException, IOException {
  File testFileWindows31J=createFile(WINDOWS_31J_BIN);
  reversedLinesFileReader=new ReversedLinesFileReader(testFileWindows31J,testParamBlockSize,"windows-31j");
  assertEqualsAndNoLineBreaks(TEST_LINE_WINDOWS_31J_2,reversedLinesFileReader.readLine());
  assertEqualsAndNoLineBreaks(TEST_LINE_WINDOWS_31J_1,reversedLinesFileReader.readLine());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testxWindows950File() throws URISyntaxException, IOException {
  File testFilexWindows950=createFile(X_WINDOWS_950_BIN);
  reversedLinesFileReader=new ReversedLinesFileReader(testFilexWindows950,testParamBlockSize,"x-windows-950");
  assertEqualsAndNoLineBreaks(TEST_LINE_X_WINDOWS_950_2,reversedLinesFileReader.readLine());
  assertEqualsAndNoLineBreaks(TEST_LINE_X_WINDOWS_950_1,reversedLinesFileReader.readLine());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGBK() throws URISyntaxException, IOException {
  File testFileGBK=createFile(GBK_BIN);
  reversedLinesFileReader=new ReversedLinesFileReader(testFileGBK,testParamBlockSize,"GBK");
  assertEqualsAndNoLineBreaks(TEST_LINE_GBK_2,reversedLinesFileReader.readLine());
  assertEqualsAndNoLineBreaks(TEST_LINE_GBK_1,reversedLinesFileReader.readLine());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testxWindows949File() throws URISyntaxException, IOException {
  File testFilexWindows949=createFile(X_WINDOWS_949_BIN);
  reversedLinesFileReader=new ReversedLinesFileReader(testFilexWindows949,testParamBlockSize,"x-windows-949");
  assertEqualsAndNoLineBreaks(TEST_LINE_X_WINDOWS_949_2,reversedLinesFileReader.readLine());
  assertEqualsAndNoLineBreaks(TEST_LINE_X_WINDOWS_949_1,reversedLinesFileReader.readLine());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.SegmentReferenceLimitTestIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void corruption() throws IOException, CommitFailedException, ExecutionException, InterruptedException {
  FileStore fileStore=newFileStore(directory).withMaxFileSize(1).withNoCache().withMemoryMapping(true).create();
  SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
  NodeBuilder root=nodeStore.getRoot().builder();
  root.setChildNode("test");
  nodeStore.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  List<FutureTask<Void>> l=new ArrayList<FutureTask<Void>>();
  for (int i=0; i < 10; i++) {
    l.add(run(new Worker(nodeStore,"w" + i)));
  }
  try {
    for (    FutureTask<Void> w : l) {
      w.get();
    }
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.BrokenNetworkTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxySkippedBytes() throws Exception {
  useProxy(false,100,1,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyFlippedEndByte() throws Exception {
  useProxy(false,0,0,220,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxySSLSkippedBytes() throws Exception {
  useProxy(true,400,10,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxySSL() throws Exception {
  useProxy(true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyFlippedStartByte() throws Exception {
  useProxy(false,0,0,0,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxy() throws Exception {
  useProxy(false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyFlippedEndByteSSL() throws Exception {
  useProxy(true,0,0,575,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyFlippedIntermediateByte() throws Exception {
  useProxy(false,0,0,150,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyFlippedStartByteSSL() throws Exception {
  useProxy(true,0,0,0,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxySkippedBytesIntermediateChange() throws Exception {
  useProxy(false,100,1,true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxySSLSkippedBytesIntermediateChange() throws Exception {
  useProxy(true,400,10,true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyFlippedIntermediateByteSSL() throws Exception {
  useProxy(true,0,0,560,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.BulkTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test1MillionNodes() throws Exception {
  test(1000000,87,87,22700000,22800000);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test10000Nodes() throws Exception {
  test(10000,1,1,245000,246000);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test1MillionNodesUsingSSL() throws Exception {
  test(1000000,87,87,22700000,22800000,true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test100Nodes() throws Exception {
  test(100,1,1,3000,3100);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test100000Nodes() throws Exception {
  test(100000,9,9,2210000,2220000);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test1000Nodes() throws Exception {
  test(1000,1,1,53000,55000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.DataStoreTestBase </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyFlippedIntermediateByte() throws Exception {
  useProxy(0,0,150,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyFlippedIntermediateByte2() throws Exception {
  useProxy(0,0,150000,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyFlippedIntermediateByteChange() throws Exception {
  useProxy(0,0,150,true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyFlippedIntermediateByteChange2() throws Exception {
  useProxy(0,0,150000,true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxySkippedBytesIntermediateChange() throws Exception {
  useProxy(100,1,-1,true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxySkippedBytes() throws Exception {
  useProxy(100,1,-1,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyFlippedStartByte() throws Exception {
  useProxy(0,0,0,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.FailoverIPRangeTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverCorrectListIPv6UseIPv6() throws Exception {
  if (!noDualStackSupport) {
    createTestWithConfig("::1",new String[]{"foobar","122-126","::1","126.0.0.1","127.0.0.0-127.255.255.255"},true);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverCorrectListUseIPv6() throws Exception {
  if (!noDualStackSupport) {
    createTestWithConfig("::1",new String[]{"foobar","127-128","0:0:0:0:0:0:0:1","126.0.0.1","127.0.0.0-127.255.255.255"},true);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverValidIPRangeEnd() throws Exception {
  createTestWithConfig(new String[]{"127.0.0.0-127.0.0.1"},true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverValidIPRange() throws Exception {
  createTestWithConfig(new String[]{"127.0.0.0-127.0.0.2"},true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverCorrectListIPv6() throws Exception {
  if (!noDualStackSupport) {
    createTestWithConfig(new String[]{"foobar","122-126","::1","126.0.0.1","127.0.0.0-127.255.255.255"},true);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverLocalClientUseIPv6() throws Exception {
  if (!noDualStackSupport) {
    createTestWithConfig("::1",new String[]{"::1"},true);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverAllClients() throws Exception {
  createTestWithConfig(null,true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverWrongClientIPv6() throws Exception {
  if (!noDualStackSupport) {
    createTestWithConfig(new String[]{"::2"},false);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverLocalClient() throws Exception {
  createTestWithConfig(new String[]{"127.0.0.1"},true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverLocalhost() throws Exception {
  createTestWithConfig(new String[]{"localhost"},true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverValidIPRangeStart() throws Exception {
  createTestWithConfig(new String[]{"127.0.0.1-127.0.0.2"},true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverInvalidRange() throws Exception {
  createTestWithConfig(new String[]{"127.0.0.2-127.0.0.1"},false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverInvalidName() throws Exception {
  createTestWithConfig(new String[]{"foobar"},false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverWrongClient() throws Exception {
  createTestWithConfig(new String[]{"127.0.0.2"},false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverCorrectList() throws Exception {
  createTestWithConfig(new String[]{"foobar","127-128","126.0.0.1","127.0.0.0-127.255.255.255"},true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverWrongList() throws Exception {
  createTestWithConfig(new String[]{"foobar","126.0.0.1","::2","128.0.0.1-255.255.255.255","128.0.0.0-127.255.255.255"},false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverWrongListUseIPv6() throws Exception {
  if (!noDualStackSupport) {
    createTestWithConfig("::1",new String[]{"foobar","126.0.0.1","::2","128.0.0.1-255.255.255.255","128.0.0.0-127.255.255.255"},false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tree.impl.ImmutableTreeTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testRootGetParent(){
  immutable.getParent();
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=UnsupportedOperationException.class) public void testGetParentDisconnected(){
  ImmutableTree child=immutable.getChild("x");
  ImmutableTree disconnected=new ImmutableTree(ImmutableTree.ParentProvider.UNSUPPORTED,child.getName(),child.getNodeState());
  disconnected.getParent();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void orderBefore() throws Exception {
  Tree t=root.getTree("/x/y/z");
  NodeUtil n=new NodeUtil(t);
  n.addChild("node1",JcrConstants.NT_UNSTRUCTURED);
  n.addChild("node2",JcrConstants.NT_UNSTRUCTURED);
  n.addChild("node3",JcrConstants.NT_UNSTRUCTURED);
  t.getChild("node1").orderBefore("node2");
  t.getChild("node3").orderBefore(null);
  root.commit();
  ImmutableTree tree=new ImmutableTree(((AbstractTree)t).getNodeState());
  assertSequence(tree.getChildren(),"node1","node2","node3");
  t.getChild("node3").orderBefore("node2");
  root.commit();
  tree=new ImmutableTree(((AbstractTree)t).getNodeState());
  assertSequence(tree.getChildren(),"node1","node3","node2");
  t.getChild("node1").orderBefore(null);
  root.commit();
  tree=new ImmutableTree(((AbstractTree)t).getNodeState());
  assertSequence(tree.getChildren(),"node3","node2","node1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.version.ReadOnlyVersionManagerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetVersionable() throws Exception {
  Tree versionHistory=checkNotNull(versionManager.getVersionHistory(root.getTree("/a")));
  assertVersionable("/a",versionHistory);
  Tree rootVersion=versionHistory.getChild(JcrConstants.JCR_ROOTVERSION);
  assertVersionable("/a",rootVersion);
  Tree baseVersion=checkNotNull(versionManager.getBaseVersion(versionable));
  assertVersionable("/a",baseVersion);
  Tree frozen=baseVersion.getChild(VersionConstants.JCR_FROZENNODE);
  assertVersionable("/a",frozen);
  Tree frozenB=frozen.getChild("b");
  assertVersionable("/a/b",frozenB);
  Tree frozenC=frozenB.getChild("c");
  assertVersionable("/a/b/c",frozenC);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.IteratorsTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sortCompareCalls(){
  sortCompareCalls(10000,0);
  sortCompareCalls(10000,1);
  sortCompareCalls(10000,10);
  sortCompareCalls(10000,100);
  sortCompareCalls(10000,1000);
  sortCompareCalls(10000,10000);
  sortCompareCalls(10000,100000);
  sortCompareCalls(10000,1000000);
  sortCompareCalls(10000,Integer.MAX_VALUE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.SQL2OptimiseQueryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * checks the {@code Query#optimise()} calls for the conversion from OR to UNION from a query
 * POV; ensuring that it returns always the same, expected resultset.
 * @throws RepositoryException
 * @throws CommitFailedException
 */
@Test public void orToUnions() throws RepositoryException, CommitFailedException {
  Tree test, t;
  List<String> original, optimised, cheapest, expected;
  String statement;
  test=root.getTree("/").addChild("test");
  test.setProperty(JCR_PRIMARYTYPE,NT_OAK_UNSTRUCTURED,NAME);
  t=addChildWithProperty(test,"a","p","a");
  t.setProperty("p1","a1");
  t=addChildWithProperty(test,"b","p","b");
  t.setProperty("p1","b1");
  t.setProperty("p2","a");
  t=addChildWithProperty(test,"c","p","c");
  t.setProperty("p3","a");
  addChildWithProperty(test,"d","p","d");
  addChildWithProperty(test,"e","p","e");
  test=root.getTree("/").addChild("test2");
  addChildWithProperty(test,"a","p","a");
  root.commit();
  statement=String.format("SELECT * FROM [%s] WHERE p = 'a' OR p = 'b'",NT_OAK_UNSTRUCTURED);
  expected=of("/test/a","/test/b","/test2/a");
  setQuerySelectionMode(ORIGINAL);
  original=executeQuery(statement,JCR_SQL2,true);
  setQuerySelectionMode(ALTERNATIVE);
  optimised=executeQuery(statement,JCR_SQL2,true);
  setQuerySelectionMode(CHEAPEST);
  cheapest=executeQuery(statement,JCR_SQL2,true);
  assertOrToUnionResults(expected,original,optimised,cheapest);
  statement=String.format("SELECT * FROM [%s] WHERE p = 'a' OR p = 'b' OR p = 'c' OR p = 'd' OR p = 'e' ",NT_OAK_UNSTRUCTURED);
  expected=of("/test/a","/test/b","/test/c","/test/d","/test/e","/test2/a");
  setQuerySelectionMode(ORIGINAL);
  original=executeQuery(statement,JCR_SQL2,true);
  setQuerySelectionMode(ALTERNATIVE);
  optimised=executeQuery(statement,JCR_SQL2,true);
  setQuerySelectionMode(CHEAPEST);
  cheapest=executeQuery(statement,JCR_SQL2,true);
  assertOrToUnionResults(expected,original,optimised,cheapest);
  statement=String.format("SELECT * FROM [%s] WHERE (p = 'a' OR p = 'b') AND (p1 = 'a1' OR p1 = 'b1')",NT_OAK_UNSTRUCTURED);
  expected=of("/test/a","/test/b");
  setQuerySelectionMode(ORIGINAL);
  original=executeQuery(statement,JCR_SQL2,true);
  setQuerySelectionMode(ALTERNATIVE);
  optimised=executeQuery(statement,JCR_SQL2,true);
  setQuerySelectionMode(CHEAPEST);
  cheapest=executeQuery(statement,JCR_SQL2,true);
  assertOrToUnionResults(expected,original,optimised,cheapest);
  statement=String.format("SELECT * FROM [%s] WHERE (p = 'a' AND p1 = 'a1') OR (p = 'b' AND p1 = 'b1')",NT_OAK_UNSTRUCTURED);
  expected=of("/test/a","/test/b");
  setQuerySelectionMode(ORIGINAL);
  original=executeQuery(statement,JCR_SQL2,true);
  setQuerySelectionMode(ALTERNATIVE);
  optimised=executeQuery(statement,JCR_SQL2,true);
  setQuerySelectionMode(CHEAPEST);
  cheapest=executeQuery(statement,JCR_SQL2,true);
  assertOrToUnionResults(expected,original,optimised,cheapest);
  statement="SELECT * FROM [oak:Unstructured] AS c " + "WHERE ( c.[p] = 'a' " + "OR c.[p2] = 'a' "+ "OR c.[p3] = 'a') "+ "AND ISDESCENDANTNODE(c, '/test') "+ "ORDER BY added DESC";
  expected=of("/test/a","/test/b","/test/c");
  setQuerySelectionMode(ORIGINAL);
  original=executeQuery(statement,JCR_SQL2,true);
  setQuerySelectionMode(ALTERNATIVE);
  optimised=executeQuery(statement,JCR_SQL2,true);
  setQuerySelectionMode(CHEAPEST);
  cheapest=executeQuery(statement,JCR_SQL2,true);
  assertOrToUnionResults(expected,original,optimised,cheapest);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.SQL2ParserTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTransformAndParse() throws ParseException {
  p.parse(new XPathToSQL2Converter().convert("/jcr:root/test/*/nt:resource[@jcr:encoding]"));
  p.parse(new XPathToSQL2Converter().convert("/jcr:root/test/*/*/nt:resource[@jcr:encoding]"));
  String xpath="/jcr:root/etc/commerce/products//*[@cq:commerceType = 'product' " + "and ((@size = 'M' or */@size= 'M' or */*/@size = 'M' " + "or */*/*/@size = 'M' or */*/*/*/@size = 'M' or */*/*/*/*/@size = 'M'))]";
  p.parse(new XPathToSQL2Converter().convert(xpath));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIgnoreSqlComment() throws ParseException {
  p.parse("select * from [nt:unstructured] /* sql comment */");
  p.parse("select [jcr:path], [jcr:score], * from [nt:base] as a /* xpath: //* */");
  p.parse("/* begin query */ select [jcr:path] /* this is the path */, " + "[jcr:score] /* the score */, * /* everything*/ " + "from [nt:base] /* all node types */ as a /* an identifier */");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ParseException.class) public void testUnfinishedSqlComment() throws ParseException {
  p.parse("select [jcr:path], [jcr:score], * from [nt:base] as a /* xpath: //* ");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.ast.FullTextTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void invalid() throws ParseException {
  testInvalid("","(*); expected: term");
  testInvalid("x OR ","x OR(*); expected: term");
  testInvalid("\"","(*)\"; expected: double quote");
  testInvalid("-","(*)-; expected: term");
  testInvalid("- x","- (*)x; expected: term");
  testInvalid("\\","(*)\\; expected: escaped char");
  testInvalid("\"\\","\"(*)\\; expected: escaped char");
  testInvalid("\"x\"y","\"x\"(*)y; expected: space");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.ast.LikePatternTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void pattern(){
  pattern("%_","X","",null,null);
  pattern("A%","A","X","A","B");
  pattern("A%%","A","X","A","B");
  pattern("%\\_%","A_A","AAA",null,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.fulltext.SimpleExcerptProviderTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void randomized() throws Exception {
  Random r=new Random(1);
  String set="abc*\'\"<> ";
  for (int i=0; i < 10000; i++) {
    highlight(sb(randomString(r,set)),of(randomString(r,set)));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.index.TraversingIndexQueryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * tests range queries, long comparisons and relative properties 
 * @throws CommitFailedException 
 */
@Test public void testRangeRelativeProperties() throws CommitFailedException {
  final List<String> emptyList=new ArrayList<String>();
  final String property="prop";
  Tree contentNodes, t;
  contentNodes=root.getTree("/").addChild("content").addChild("nodes");
  t=addNtUnstructuredChild(contentNodes,"a9",null,null);
  t=addNtUnstructuredChild(t,"b",null,null);
  t=addNtUnstructuredChild(t,"c",null,null);
  t=addNtUnstructuredChild(t,"d9",property,9L);
  t=addNtUnstructuredChild(contentNodes,"a10",null,null);
  t=addNtUnstructuredChild(t,"b",null,null);
  t=addNtUnstructuredChild(t,"c",null,null);
  t=addNtUnstructuredChild(t,"d10",property,10L);
  t=addNtUnstructuredChild(contentNodes,"a20",null,null);
  t=addNtUnstructuredChild(t,"b",null,null);
  t=addNtUnstructuredChild(t,"c",null,null);
  t=addNtUnstructuredChild(t,"d20",property,20L);
  t=addNtUnstructuredChild(contentNodes,"a30",null,null);
  t=addNtUnstructuredChild(t,"b",null,null);
  t=addNtUnstructuredChild(t,"c",null,null);
  t=addNtUnstructuredChild(t,"d30",property,30L);
  root.commit();
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop >= 9)]","xpath",of("/content/nodes/a9","/content/nodes/a10","/content/nodes/a20","/content/nodes/a30"));
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop >= 10)]","xpath",of("/content/nodes/a10","/content/nodes/a20","/content/nodes/a30"));
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop >= 20)]","xpath",of("/content/nodes/a20","/content/nodes/a30"));
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop >= 30)]","xpath",of("/content/nodes/a30"));
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop >= 40)]","xpath",emptyList);
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop <= 8)]","xpath",emptyList);
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop <= 9)]","xpath",of("/content/nodes/a9"));
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop <= 10)]","xpath",of("/content/nodes/a9","/content/nodes/a10"));
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop <= 20)]","xpath",of("/content/nodes/a9","/content/nodes/a10","/content/nodes/a20"));
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop <= 30)]","xpath",of("/content/nodes/a9","/content/nodes/a10","/content/nodes/a20","/content/nodes/a30"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop >= 9)]","xpath",of("/content/nodes/a9","/content/nodes/a10","/content/nodes/a20","/content/nodes/a30"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop >= 10)]","xpath",of("/content/nodes/a10","/content/nodes/a20","/content/nodes/a30"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop >= 20)]","xpath",of("/content/nodes/a20","/content/nodes/a30"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop >= 30)]","xpath",of("/content/nodes/a30"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop >= 40)]","xpath",emptyList);
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop <= 8)]","xpath",emptyList);
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop <= 9)]","xpath",of("/content/nodes/a9"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop <= 10)]","xpath",of("/content/nodes/a9","/content/nodes/a10"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop <= 20)]","xpath",of("/content/nodes/a9","/content/nodes/a10","/content/nodes/a20"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop <= 30)]","xpath",of("/content/nodes/a9","/content/nodes/a10","/content/nodes/a20","/content/nodes/a30"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSubPropertyMultiAndLike() throws Exception {
  Tree c=root.getTree("/").addChild("content");
  c.addChild("one").addChild("child").setProperty("prop","aaaBoom");
  c.addChild("two").addChild("child").setProperty("prop",ImmutableList.of("aaaBoom","bbbBoom","cccBoom"),Type.STRINGS);
  c.addChild("three").addChild("child").setProperty("prop",ImmutableList.of("aaaBoom","bbbBoom"),Type.STRINGS);
  root.commit();
  assertQuery("//*[(jcr:like(child/@prop, 'aaa%') and jcr:like(child/@prop, 'bbb%') and jcr:like(child/@prop, 'ccc%'))]","xpath",ImmutableList.of("/content/two"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleRelativeProperties() throws Exception {
  Tree content=root.getTree("/").addChild("content");
  content.addChild("node1").setProperty("a",128);
  content.addChild("node2").setProperty("a","abc");
  content.addChild("node3").setProperty("a","1280");
  content.addChild("node1").setProperty("b",128);
  content.addChild("node2").setProperty("b",1024);
  content.addChild("node3").setProperty("b",2048);
  content.addChild("node1").setProperty("c",10.3);
  content.addChild("node2").setProperty("c",-10.3);
  content.addChild("node3").setProperty("c",9.8);
  content.addChild("node1").setProperty("d",Arrays.asList("x","y"),Type.STRINGS);
  content.addChild("node2").setProperty("d",10);
  content.addChild("node3").setProperty("d",Arrays.asList(1L,2L),Type.LONGS);
  root.commit();
  assertQuery("//*[*/@a > 2]","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@a > '1']","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@a > 'abd']","xpath",Arrays.<String>asList());
  assertQuery("//*[*/@a = 'abc']","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@a >= 'abc']","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@b > 2]","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@b > 2048]","xpath",Arrays.<String>asList());
  assertQuery("//*[*/@b > '1']","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@b = 128]","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@c > 10]","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@c > 11]","xpath",Arrays.<String>asList());
  assertQuery("//*[*/@c > '1']","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@c = 9.8]","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@d > 10]","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@d > 11]","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@d > '1']","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@d = 10]","xpath",Arrays.asList("/content"));
  assertQuery("//*[*/@d < 3]","xpath",Arrays.asList("/content"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRelativeProperties2() throws Exception {
  Tree t=root.getTree("/").addChild("content").addChild("nodes");
  Tree a=t.addChild("a");
  a.setProperty(JCR_PRIMARYTYPE,"nt:unstructured",Type.NAME);
  Tree b=a.addChild("b");
  b.setProperty(JCR_PRIMARYTYPE,"nt:unstructured",Type.NAME);
  Tree c=b.addChild("c");
  c.setProperty(JCR_PRIMARYTYPE,"nt:unstructured",Type.NAME);
  Tree d1=c.addChild("d1");
  d1.setProperty("prop",10);
  d1.setProperty(JCR_PRIMARYTYPE,"nt:unstructured",Type.NAME);
  Tree d2=c.addChild("d2");
  d2.setProperty("prop",20);
  d2.setProperty(JCR_PRIMARYTYPE,"nt:unstructured",Type.NAME);
  Tree d3=c.addChild("d3");
  d3.setProperty("prop",30);
  d3.setProperty(JCR_PRIMARYTYPE,"nt:unstructured",Type.NAME);
  root.commit();
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop >= 9)]","xpath",ImmutableList.of("/content/nodes/a"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop >= 9)]","xpath",ImmutableList.of("/content/nodes/a"));
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop >= 10)]","xpath",ImmutableList.of("/content/nodes/a"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop >= 10)]","xpath",ImmutableList.of("/content/nodes/a"));
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop >= 15)]","xpath",ImmutableList.of("/content/nodes/a"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop >= 15)]","xpath",ImmutableList.of("/content/nodes/a"));
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop >= 20)]","xpath",ImmutableList.of("/content/nodes/a"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop >= 20)]","xpath",ImmutableList.of("/content/nodes/a"));
  assertQuery("/jcr:root/content/nodes//*[(*/*/*/@prop >= 30)]","xpath",ImmutableList.of("/content/nodes/a"));
  assertQuery("/jcr:root/content/nodes//element(*, nt:unstructured)[(*/*/*/@prop >= 30)]","xpath",ImmutableList.of("/content/nodes/a"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiAndLike() throws Exception {
  Tree c=root.getTree("/").addChild("content");
  c.addChild("one").setProperty("prop","aaaBoom");
  c.addChild("two").setProperty("prop",ImmutableList.of("aaaBoom","bbbBoom","cccBoom"),Type.STRINGS);
  c.addChild("three").setProperty("prop",ImmutableList.of("aaaBoom","bbbBoom"),Type.STRINGS);
  root.commit();
  assertQuery("//*[(jcr:like(@prop, 'aaa%') and jcr:like(@prop, 'bbb%') and jcr:like(@prop, 'ccc%'))]","xpath",ImmutableList.of("/content/two"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSubPropertyMultiAndEquals() throws Exception {
  Tree c=root.getTree("/").addChild("content");
  c.addChild("one").addChild("child").setProperty("prop","aaa");
  c.addChild("two").addChild("child").setProperty("prop",ImmutableList.of("aaa","bbb","ccc"),Type.STRINGS);
  c.addChild("three").addChild("child").setProperty("prop",ImmutableList.of("aaa","bbb"),Type.STRINGS);
  root.commit();
  assertQuery("//*[(child/@prop = 'aaa' and child/@prop = 'bbb' and child/@prop = 'ccc')]","xpath",ImmutableList.of("/content/two"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRelativeProperties() throws Exception {
  root.getTree("/").addChild("content").addChild("node1").setProperty("prop",128);
  root.commit();
  assertQuery("//*[(@prop > 1)]","xpath",ImmutableList.of("/content/node1"));
  assertQuery("//*[(@prop > 2)]","xpath",ImmutableList.of("/content/node1"));
  assertQuery("//*[(@prop > 20)]","xpath",ImmutableList.of("/content/node1"));
  assertQuery("//*[(@prop > 100)]","xpath",ImmutableList.of("/content/node1"));
  assertQuery("//*[(@prop > 200)]","xpath",new ArrayList<String>());
  assertQuery("//*[(@prop > 1000)]","xpath",new ArrayList<String>());
  assertQuery("//*[(*/@prop > 1)]","xpath",ImmutableList.of("/content"));
  assertQuery("//*[(*/@prop > 2)]","xpath",ImmutableList.of("/content"));
  assertQuery("//*[(*/@prop > 20)]","xpath",ImmutableList.of("/content"));
  assertQuery("//*[(*/@prop > 100)]","xpath",ImmutableList.of("/content"));
  assertQuery("//*[(*/@prop > 200)]","xpath",new ArrayList<String>());
  assertQuery("//*[(*/@prop > 1000)]","xpath",new ArrayList<String>());
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-2050") public void testFullTextTermName() throws Exception {
  Tree c=root.getTree("/").addChild("content");
  c.addChild("testFullTextTermNameSimple");
  c.addChild("testFullTextTermNameFile.txt");
  root.commit();
  assertQuery("//*[jcr:contains(., 'testFullTextTermNameSimple')]","xpath",ImmutableList.of("/content/testFullTextTermNameSimple"));
  assertQuery("//*[jcr:contains(., 'testFullTextTermNameFile.txt')]","xpath",ImmutableList.of("/content/testFullTextTermNameFile.txt"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql2() throws Exception {
  test("sql2.txt");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiNotEqual() throws Exception {
  Tree c=root.getTree("/").addChild("content");
  c.addChild("one").setProperty("prop","value");
  c.addChild("two").setProperty("prop",ImmutableList.of("aaa","value","bbb"),Type.STRINGS);
  c.addChild("three").setProperty("prop",ImmutableList.of("aaa","bbb","ccc"),Type.STRINGS);
  root.commit();
  assertQuery("//*[@prop != 'value']","xpath",ImmutableList.of("/content/two","/content/three"));
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-2050") public void testFullTextTerm() throws Exception {
  Tree node=root.getTree("/").addChild("content");
  node.setProperty("jcr:mimeType","text/plain");
  root.commit();
  assertQuery("//*[jcr:contains(., 'text/plain')]","xpath",ImmutableList.of("/content"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiAndEquals() throws Exception {
  Tree c=root.getTree("/").addChild("content");
  c.addChild("one").setProperty("prop","aaa");
  c.addChild("two").setProperty("prop",ImmutableList.of("aaa","bbb","ccc"),Type.STRINGS);
  c.addChild("three").setProperty("prop",ImmutableList.of("aaa","bbb"),Type.STRINGS);
  root.commit();
  assertQuery("//*[(@prop = 'aaa' and @prop = 'bbb' and @prop = 'ccc')]","xpath",ImmutableList.of("/content/two"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOak1301() throws Exception {
  Tree t1=root.getTree("/").addChild("home").addChild("users").addChild("testing").addChild("socialgraph_test_user_4");
  t1.setProperty("jcr:primaryType","rep:User");
  t1.setProperty("rep:authorizableId","socialgraph_test_user_4");
  Tree s=t1.addChild("social");
  s.setProperty("jcr:primaryType","sling:Folder");
  Tree r=s.addChild("relationships");
  r.setProperty("jcr:primaryType","sling:Folder");
  Tree f=r.addChild("friend");
  f.setProperty("jcr:primaryType","sling:Folder");
  Tree sg=f.addChild("socialgraph_test_group");
  sg.setProperty("jcr:primaryType","nt:unstructured");
  sg.setProperty("id","socialgraph_test_group");
  Tree t2=root.getTree("/").addChild("home").addChild("groups").addChild("testing").addChild("socialgraph_test_group");
  root.commit();
  assertQuery("/jcr:root/home//*[@id='socialgraph_test_group']","xpath",ImmutableList.of("/home/users/testing/socialgraph_test_user_4/social/relationships/friend/socialgraph_test_group"));
  assertQuery("/jcr:root/home//social/relationships//*[@id='socialgraph_test_group']","xpath",ImmutableList.of("/home/users/testing/socialgraph_test_user_4/social/relationships/friend/socialgraph_test_group"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLowercaseOnArrays() throws Exception {
  Tree content=root.getTree("/").addChild("content");
  content.setProperty("array",Arrays.asList("X","Y"),Type.STRINGS);
  root.commit();
  assertQuery("//*[jcr:like(fn:lower-case(@array), '%x%')]","xpath",Arrays.asList("/content"));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void sql1() throws Exception {
  test("sql1.txt");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.AddContentRemoteOperationTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testAddNodeWithExistingTree() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test").apply(root);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddNode() throws Exception {
  Tree parent=mock(Tree.class);
  doReturn(true).when(parent).exists();
  Tree tree=mock(Tree.class);
  doReturn(false).when(tree).exists();
  doReturn(parent).when(tree).getParent();
  doReturn("test").when(tree).getName();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test").apply(root);
  verify(parent).addChild("test");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testAddNodeWithNonExistingParent() throws Exception {
  Tree parent=mock(Tree.class);
  doReturn(false).when(parent).exists();
  Tree tree=mock(Tree.class);
  doReturn(false).when(tree).exists();
  doReturn(parent).when(tree).getParent();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test").apply(root);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteRepositoryTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testLoginWithInvalidCredentials() throws Exception {
  createRepository().login(mock(RemoteCredentials.class));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteLoginException.class) public void testUnsuccessfulLoginWithBasicCredentials() throws Exception {
  ContentRepository repository=mock(ContentRepository.class);
  when(repository.login(any(Credentials.class),anyString())).thenThrow(LoginException.class);
  ContentRemoteRepository remoteRepository=createRepository(repository);
  remoteRepository.login(remoteRepository.createBasicCredentials("admin","admin".toCharArray()));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testLoginWithNullCredentials() throws Exception {
  createRepository().login(null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteResultTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testColumnNotAvailable(){
  ResultRow row=mock(ResultRow.class);
  doThrow(IllegalArgumentException.class).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  result.getColumnValue("column");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testSelectorNotAvailable(){
  ResultRow row=mock(ResultRow.class);
  doThrow(IllegalArgumentException.class).when(row).getPath("selector");
  createResult(row).getSelectorPath("selector");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteSessionTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCommitWithInvalidRevision() throws Exception {
  createSession().commit(mock(RemoteRevision.class),mock(ContentRemoteOperation.class));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createAggregateOperationWithNullList(){
  createSession().createAggregateOperation(null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createCopyOperationWithNullSourcePath(){
  createSession().createCopyOperation(null,"/target");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCommitWithNullOperation() throws Exception {
  createSession().commit(mock(ContentRemoteRevision.class),null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateSetOperationWithInvalidPath(){
  createSession().createSetOperation("invalid","name",RemoteValue.toText("value"));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateAddOperationWithRootPath(){
  createSession().createAddOperation("/",new HashMap<String,RemoteValue>());
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadBinaryIdWithEmptyReference(){
  createSession().readBinaryId("");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadTreeWithNullRevision() throws Exception {
  createSession().readTree(null,"/",new RemoteTreeFilters());
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createCopyOperationWithInvalidTargetPath(){
  createSession().createCopyOperation("/source","invalid");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadTreeWithNullFilters() throws Exception {
  ContentRemoteRevision revision=mock(ContentRemoteRevision.class);
  createSession().readTree(revision,"/",null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCommitWithNullRevision() throws Exception {
  createSession().commit(null,mock(ContentRemoteOperation.class));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadBinaryLengthWithNullBinaryId() throws Exception {
  createSession().readBinaryLength(null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createAddOperationWithNullProperties(){
  createSession().createAddOperation("/test",null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateSetOperationWithNullPath(){
  createSession().createSetOperation(null,"name",RemoteValue.toText("value"));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createCopyOperationWithInvalidSourcePath(){
  createSession().createCopyOperation("invalid","/target");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createMoveOperationWithInvalidSourcePath(){
  createSession().createMoveOperation("invalid","/target");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadBinaryWithNullId(){
  createSession().readBinary(null,new RemoteBinaryFilters());
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadTreeWithInvalidPath() throws Exception {
  ContentRemoteRevision revision=mock(ContentRemoteRevision.class);
  createSession().readTree(revision,"invalid",new RemoteTreeFilters());
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RuntimeException.class) public void testWriteBinaryFailure() throws Exception {
  InputStream stream=mock(InputStream.class);
  Root root=mock(Root.class);
  doThrow(IOException.class).when(root).createBlob(stream);
  ContentSession session=mock(ContentSession.class);
  doReturn(root).when(session).getLatestRoot();
  ContentRemoteSession remoteSession=createSession(session);
  remoteSession.writeBinary(stream);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createMoveOperationWithNullTargetPath(){
  createSession().createMoveOperation("/source",null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateRemoveOperationWithInvalidPath(){
  createSession().createRemoveOperation("invalid");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createCopyOperationWithSameSourceAndTargetPath(){
  createSession().createCopyOperation("/same","/same");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateUnsetOperationWithNullPath(){
  createSession().createUnsetOperation(null,"name");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadBinaryIdWithNullReference(){
  createSession().readBinaryId(null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testWriteBinaryWithNullStream() throws Exception {
  createSession().writeBinary(null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateAddOperationWithNullPath(){
  createSession().createAddOperation(null,new HashMap<String,RemoteValue>());
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadBinaryWithNullFilters(){
  createSession().readBinary(mock(ContentRemoteBinaryId.class),null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createCopyOperationWithSourceAncestorOfTarget(){
  createSession().createCopyOperation("/source","/source/target");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateUnsetOperationWithInvalidPath(){
  createSession().createUnsetOperation("invalid","name");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testCommitWithConflictingCommit() throws Exception {
  Root root=mock(Root.class);
  doThrow(CommitFailedException.class).when(root).commit();
  ContentRemoteRevision revision=mock(ContentRemoteRevision.class);
  doReturn(root).when(revision).getRoot();
  createSession().commit(revision,mock(ContentRemoteOperation.class));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateUnsetOperationWithNullName(){
  createSession().createUnsetOperation("/test",null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createCopyOperationWithNullTargetPath(){
  createSession().createCopyOperation("/source",null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadTreeWithInvalidRevision() throws Exception {
  createSession().readTree(mock(RemoteRevision.class),"/",new RemoteTreeFilters());
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createMoveOperationWithSourceAncestorOfTarget(){
  createSession().createMoveOperation("/source","/source/target");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadBinaryLengthWithInvalidBinaryId() throws Exception {
  createSession().readBinaryLength(mock(RemoteBinaryId.class));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testCommitWithOperationThrowingException() throws Exception {
  Root root=mock(Root.class);
  ContentRemoteOperation operation=mock(ContentRemoteOperation.class);
  doThrow(RemoteCommitException.class).when(operation).apply(root);
  ContentRemoteRevision revision=mock(ContentRemoteRevision.class);
  doReturn(root).when(revision).getRoot();
  createSession().commit(revision,operation);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createMoveOperationWithNullSourcePath(){
  createSession().createMoveOperation(null,"/target");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateRemoveOperationWithRootPath(){
  createSession().createRemoveOperation("/");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createMoveOperationWithSameSourceAndTargetPath(){
  createSession().createMoveOperation("/same","/same");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadBinaryWithInvalidId(){
  createSession().readBinary(mock(RemoteBinaryId.class),new RemoteBinaryFilters());
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateSetOperationWithNullValue(){
  createSession().createSetOperation("/test","name",null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void createMoveOperationWithInvalidTargetPath(){
  createSession().createMoveOperation("/source","invalid");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCommitWithInvalidOperation() throws Exception {
  createSession().commit(mock(ContentRemoteRevision.class),mock(RemoteOperation.class));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateSetOperationWithEmptyName(){
  createSession().createSetOperation("/test","",RemoteValue.toText("value"));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateSetOperationWithNullName(){
  createSession().createSetOperation("/test",null,RemoteValue.toText("value"));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateAddOperationWithInvalidPath(){
  createSession().createAddOperation("invalid",new HashMap<String,RemoteValue>());
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateUnsetOperationWithEmptyName(){
  createSession().createUnsetOperation("/test","");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateRemoveOperationWithNullPath(){
  createSession().createRemoveOperation(null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReadTreeWithNullPath() throws Exception {
  ContentRemoteRevision revision=mock(ContentRemoteRevision.class);
  createSession().readTree(revision,null,new RemoteTreeFilters());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.CopyContentRemoteOperationTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testCopyWithNonExistingTargetParent() throws Exception {
  Tree parent=mock(Tree.class);
  doReturn(false).when(parent).exists();
  Tree target=mock(Tree.class);
  doReturn(false).when(target).exists();
  doReturn(parent).when(target).getParent();
  Tree source=mock(Tree.class);
  doReturn(true).when(source).exists();
  Root root=mock(Root.class);
  doReturn(source).when(root).getTree("/source");
  doReturn(target).when(root).getTree("/target");
  createOperation("/source","/target").apply(root);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testCopyWithNonExistingSource() throws Exception {
  Tree source=mock(Tree.class);
  doReturn(false).when(source).exists();
  Root root=mock(Root.class);
  doReturn(source).when(root).getTree("/source");
  createOperation("/source","/target").apply(root);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testCopyWithExistingTarget() throws Exception {
  Tree target=mock(Tree.class);
  doReturn(true).when(target).exists();
  Tree source=mock(Tree.class);
  doReturn(true).when(source).exists();
  Root root=mock(Root.class);
  doReturn(source).when(root).getTree("/source");
  doReturn(target).when(root).getTree("/target");
  createOperation("/source","/target").apply(root);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopy() throws Exception {
  Tree parent=mock(Tree.class);
  doReturn(true).when(parent).exists();
  Tree target=mock(Tree.class);
  doReturn(false).when(target).exists();
  doReturn(parent).when(target).getParent();
  doReturn("target").when(target).getName();
  Tree source=mock(Tree.class);
  doReturn(true).when(source).exists();
  doReturn(emptyList()).when(source).getProperties();
  doReturn(emptyList()).when(source).getChildren();
  Root root=mock(Root.class);
  doReturn(source).when(root).getTree("/source");
  doReturn(target).when(root).getTree("/target");
  createOperation("/source","/target").apply(root);
  verify(parent).addChild("target");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.MoveContentRemoteOperationTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testMoveUnsuccessful() throws Exception {
  Root root=mock(Root.class);
  doReturn(false).when(root).move("/source","/target");
  createOperation("/source","/target").apply(root);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMove() throws Exception {
  Root root=mock(Root.class);
  doReturn(true).when(root).move("/source","/target");
  createOperation("/source","/target").apply(root);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.RemoveContentRemoteOperationTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemove() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  doReturn(true).when(tree).remove();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test").apply(root);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testRemoveWithNonRemovableTree() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  doReturn(false).when(tree).remove();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test").apply(root);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testRemoveWithNonExistingTree() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(false).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test").apply(root);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.SetContentRemoteOperationTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiLongProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toMultiLong(singletonList(42L))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableContaining(42L)),eq(Type.LONGS));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiDoubleProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toMultiDouble(singletonList(4.2))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableContaining(4.2)),eq(Type.DOUBLES));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetDoubleProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toDouble(4.2)).apply(root);
  verify(tree).setProperty("name",4.2,Type.DOUBLE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiStringProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toMultiText(singletonList("value"))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableContaining("value")),eq(Type.STRINGS));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiWeakReferenceProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toMultiWeakReference(singletonList("value"))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableContaining("value")),eq(Type.WEAKREFERENCES));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetStringProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toText("value")).apply(root);
  verify(tree).setProperty("name","value",Type.STRING);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetBooleanProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toBoolean(true)).apply(root);
  verify(tree).setProperty("name",true,Type.BOOLEAN);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetUriProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toUri("value")).apply(root);
  verify(tree).setProperty("name","value",Type.URI);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetBinaryIdProperty() throws Exception {
  Blob blob=mock(Blob.class);
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn(blob).when(binaries).get("id");
  createOperation(binaries,"/test","name",toBinaryId("id")).apply(root);
  verify(tree).setProperty("name",blob,Type.BINARY);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiDecimalProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toMultiDecimal(singletonList(BigDecimal.ONE))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableContaining(BigDecimal.ONE)),eq(Type.DECIMALS));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiReferenceProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toMultiReference(singletonList("value"))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableContaining("value")),eq(Type.REFERENCES));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiBinaryProperty() throws Exception {
  Blob blob=mock(Blob.class);
  InputStream stream=mock(InputStream.class);
  Supplier<InputStream> supplier=mock(Supplier.class);
  doReturn(stream).when(supplier).get();
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  doReturn(blob).when(root).createBlob(stream);
  createOperation("/test","name",toMultiBinary(singletonList(supplier))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableReferencing(blob)),eq(Type.BINARIES));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetBinaryProperty() throws Exception {
  Blob blob=mock(Blob.class);
  InputStream stream=mock(InputStream.class);
  Supplier<InputStream> supplier=mock(Supplier.class);
  doReturn(stream).when(supplier).get();
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  doReturn(blob).when(root).createBlob(stream);
  createOperation("/test","name",toBinary(supplier)).apply(root);
  verify(tree).setProperty("name",blob,Type.BINARY);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiNameProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toMultiName(singletonList("value"))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableContaining("value")),eq(Type.NAMES));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiBooleanProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toMultiBoolean(singletonList(true))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableContaining(true)),eq(Type.BOOLEANS));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiUriProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toMultiUri(singletonList("value"))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableContaining("value")),eq(Type.URIS));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testSetWithNonExistingTree() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(false).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",mock(RemoteValue.class)).apply(root);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetLongProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toLong(42L)).apply(root);
  verify(tree).setProperty("name",42L,Type.LONG);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void setMultiBinaryIdProperty() throws Exception {
  Blob blob=mock(Blob.class);
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn(blob).when(binaries).get("id");
  createOperation(binaries,"/test","name",toMultiBinaryId(singletonList("id"))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableReferencing(blob)),eq(Type.BINARIES));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetReferenceProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toReference("value")).apply(root);
  verify(tree).setProperty("name","value",Type.REFERENCE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetNameProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toName("value")).apply(root);
  verify(tree).setProperty("name","value",Type.NAME);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetWeakReferenceProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toWeakReference("value")).apply(root);
  verify(tree).setProperty("name","value",Type.WEAKREFERENCE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiDateProperty() throws Exception {
  Calendar calendar=Calendar.getInstance();
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toMultiDate(singletonList(calendar.getTimeInMillis()))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableContaining(ISO8601.format(calendar))),eq(Type.DATES));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetDecimalProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toDecimal(BigDecimal.ONE)).apply(root);
  verify(tree).setProperty("name",BigDecimal.ONE,Type.DECIMAL);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetMultiPathProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toMultiPath(singletonList("value"))).apply(root);
  verify(tree).setProperty(eq("name"),argThat(isIterableContaining("value")),eq(Type.PATHS));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetPathProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toPath("value")).apply(root);
  verify(tree).setProperty("name","value",Type.PATH);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetDateProperty() throws Exception {
  Calendar calendar=Calendar.getInstance();
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name",toDate(calendar.getTimeInMillis())).apply(root);
  verify(tree).setProperty("name",ISO8601.format(calendar),Type.DATE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.UnsetContentRemoteOperationTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testUnsetWithNonExistingProperty() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  doReturn(false).when(tree).hasProperty("name");
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name").apply(root);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RemoteCommitException.class) public void testUnsetWithNonExistingTree() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(false).when(tree).exists();
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name").apply(root);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUnset() throws Exception {
  Tree tree=mock(Tree.class);
  doReturn(true).when(tree).exists();
  doReturn(true).when(tree).hasProperty("name");
  Root root=mock(Root.class);
  doReturn(tree).when(root).getTree("/test");
  createOperation("/test","name").apply(root);
  verify(tree).removeProperty("name");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.filter.FiltersTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testNullFilter(){
  new Filters(Sets.newHashSet((String)null));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testEmptyExcludeFilter(){
  new Filters(Sets.newHashSet("-"));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testEmptyIncludeFilter(){
  new Filters(Sets.newHashSet(""));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.http.matcher.MatchersTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreatePathMatcherWithInvalidPattern(){
  matchesPath("/test(");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateRequestMatcherWithNullMethod(){
  matchesRequest(null,"/test");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateMethodMatcherWithNullMethod(){
  matchesMethod(null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateRequestMatcherWithNullPattern(){
  matchesRequest("GET",null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateRequestMatcherWithInvalidPattern(){
  matchesRequest("GET","/test(");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreatePathMatcherWithNullPattern(){
  matchesPath(null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateAllMatchersWithNullMatcher(){
  matchesAll(null,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.L2_AuthInfoTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetAuthInfo(){
  AuthInfo authInfo=adminSession.getAuthInfo();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.L3_LoginModuleTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLogin() throws LoginException, NoSuchWorkspaceException, IOException {
  ContentSession contentSession=login(new GuestCredentials());
  contentSession.close();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCustomCredentialsLogin() throws LoginException, RepositoryException, IOException {
  String loginID=null;
  String pw=null;
  ContentSession contentSession=login(new CustomCredentials(loginID,pw,Collections.EMPTY_MAP));
  contentSession.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.L8_PreAuthTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreAuthenticatedLogin() throws IOException, LoginException, NoSuchWorkspaceException {
  String loginID=getUserConfiguration().getParameters().getConfigValue(UserConstants.DEFAULT_ADMIN_ID,UserConstants.DEFAULT_ADMIN_ID);
  ContentSession contentSession=login(new CustomCredentials(loginID,null,Collections.EMPTY_MAP));
  contentSession.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.TokenDefaultLoginModuleTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleCredentials() throws Exception {
  ContentSession cs=null;
  try {
    cs=login(getAdminCredentials());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleCredentialsWithAttribute() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
    sc.setAttribute(".token","");
    cs=login(sc);
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGuestLogin() throws Exception {
  ContentSession cs=null;
  try {
    cs=login(new GuestCredentials());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.LargeLdapProviderTest </h4><pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-2874") public void testListUsers() throws Exception {
  Iterator<ExternalUser> users=idp.listUsers();
  List<ExternalIdentityRef> refs=new ArrayList<ExternalIdentityRef>();
  while (users.hasNext()) {
    refs.add(users.next().getExternalId());
  }
  assertIfEquals("Test users",TEST_MEMBERS,refs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.LdapLoginTestBase </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConcurrentLogin() throws Exception {
  concurrentLogin(CONCURRENT_TEST_USERS);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConcurrentLoginSameGroup() throws Exception {
  concurrentLogin(CONCURRENT_GROUP_TEST_USERS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenProviderImplTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateTokenFromUserId() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertTokenInfo(info,userId);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetTokenInfo() throws Exception {
  String token=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap()).getToken();
  TokenInfo info=tokenProvider.getTokenInfo(token);
  assertTokenInfo(info,userId);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateTokenFromCredentials() throws Exception {
  SimpleCredentials sc=new SimpleCredentials(userId,new char[0]);
  List<Credentials> valid=new ArrayList<Credentials>();
  valid.add(sc);
  valid.add(new ImpersonationCredentials(sc,null));
  for (  Credentials creds : valid) {
    TokenInfo info=tokenProvider.createToken(creds);
    assertTokenInfo(info,userId);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenValidatorTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testManuallyCreateTokenParentWithNtUnstructured() throws Exception {
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil node=new NodeUtil(userTree);
  node.addChild(TOKENS_NODE_NAME,JcrConstants.NT_UNSTRUCTURED);
  root.commit();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChangeRegularRepUnstructuredPrimaryType() throws Exception {
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil n=new NodeUtil(userTree).getOrAddChild("test",NodeTypeConstants.NT_REP_UNSTRUCTURED);
  root.commit();
  n.setName(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED);
  root.commit();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testModifyExpirationDate() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  NodeUtil tokenTree=new NodeUtil(getTokenTree(info));
  tokenTree.setDate(TOKEN_ATTRIBUTE_EXPIRY,new Date().getTime());
  root.commit(CommitMarker.asCommitAttributes());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testManuallyCreateTokenParent() throws Exception {
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil node=new NodeUtil(userTree);
  node.addChild(TOKENS_NODE_NAME,TOKENS_NT_NAME);
  root.commit();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChangeTokenParentPrimaryTypeToRepUnstructured() throws Exception {
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil node=new NodeUtil(userTree);
  node=node.addChild(TOKENS_NODE_NAME,JcrConstants.NT_UNSTRUCTURED);
  root.commit();
  node.setName(JcrConstants.JCR_PRIMARYTYPE,TOKENS_NT_NAME);
  root.commit();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveTokenNode() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  getTokenTree(info).remove();
  root.commit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.ACLTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInsertionOrder() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Privilege[] addNodePriv=privilegesFromNames(JCR_ADD_CHILD_NODES);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,getValueFactory().createValue("/.*"));
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(testPrincipal,writePriv,false);
  acl.addEntry(testPrincipal,addNodePriv,true,restrictions);
  List<? extends JackrabbitAccessControlEntry> entries=acl.getEntries();
  assertACE(entries.get(0),true,readPriv);
  assertACE(entries.get(1),false,writePriv);
  assertACE(entries.get(2),true,addNodePriv);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInternalPrincipal() throws RepositoryException {
  Principal internal=new PrincipalImpl("unknown");
  acl.addAccessControlEntry(internal,privilegesFromNames(JCR_READ));
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInsertionOrder2() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Privilege[] addNodePriv=privilegesFromNames(JCR_ADD_CHILD_NODES);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,getValueFactory().createValue("/.*"));
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(testPrincipal,addNodePriv,true,restrictions);
  acl.addEntry(testPrincipal,writePriv,false);
  List<? extends JackrabbitAccessControlEntry> entries=acl.getEntries();
  assertACE(entries.get(0),true,readPriv);
  assertACE(entries.get(1),true,addNodePriv);
  assertACE(entries.get(2),false,writePriv);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.AdminPrincipalsBaseTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAdminAuthInfoPrincipals() throws Exception {
  try {
    for (    Principal p : adminSession.getAuthInfo().getPrincipals()) {
      if (p instanceof AdminPrincipal) {
        boolean success=acl.addAccessControlEntry(p,privilegesFromNames(PrivilegeConstants.JCR_READ));
        assertResult(success);
      }
    }
  }
 catch (  AccessControlException e) {
    assertException();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test if the ACL code properly deals the creation of ACEs for configured
 * admin-principals, which have full access anyway.
 * @since Oak 1.3.0
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2955">OAK-2955</a>
 */
@Test public void testConfiguredAdministrativePrincipal() throws Exception {
  try {
    boolean success=acl.addAccessControlEntry(administrativePrincipal,privilegesFromNames(PrivilegeConstants.JCR_READ));
    assertResult(success);
  }
 catch (  AccessControlException e) {
    assertException();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test if the ACL code properly deals the creation of ACEs for system
 * principals which have full access anyway.
 * @since Oak 1.3.0
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2955">OAK-2955</a>
 */
@Test public void testSystemPrincipal() throws Exception {
  try {
    boolean success=acl.addAccessControlEntry(SystemPrincipal.INSTANCE,privilegesFromNames(PrivilegeConstants.JCR_READ));
    assertResult(success);
  }
 catch (  AccessControlException e) {
    assertException();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test if the ACL code properly deals the creation of ACEs for administrative
 * principals which have full access anyway.
 * @since Oak 1.1.1
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2158">OAK-2158</a>
 */
@Test public void testAdminPrincipal() throws Exception {
  try {
    boolean success=acl.addAccessControlEntry(new AdminPrincipal(){
      @Override public String getName(){
        return "admin";
      }
    }
,privilegesFromNames(PrivilegeConstants.JCR_READ));
    assertResult(success);
  }
 catch (  AccessControlException e) {
    assertException();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.AbstractCompositeProviderTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetTreePermissionInstance() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=pp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertCompositeTreePermission(tp);
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTreePermissionGetChild() throws Exception {
  List<String> childNames=ImmutableList.of("test","a","b","c","nonexisting");
  Tree rootTree=readOnlyRoot.getTree(ROOT_PATH);
  NodeState ns=((ImmutableTree)rootTree).getNodeState();
  TreePermission tp=createPermissionProvider().getTreePermission(rootTree,TreePermission.EMPTY);
  for (  String cName : childNames) {
    ns=ns.getChildNode(cName);
    tp=tp.getChildPermission(cName,ns);
    assertCompositeTreePermission(tp);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefresh() throws Exception {
  CompositePermissionProvider pp=createPermissionProvider();
  pp.refresh();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeAuthorizationConfigurationTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testEmptyGetPermissionProvider(){
  getCompositeConfiguration().getPermissionProvider(root,adminSession.getWorkspaceName(),Collections.<Principal>emptySet());
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testEmptyGetAccessControlManager(){
  getCompositeConfiguration().getAccessControlManager(root,NamePathMapper.DEFAULT);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderNoScopeTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Override @Test public void testGetTreePermissionInstance() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=pp.getTreePermission(t,parentPermission);
    assertCompositeTreePermission(t.isRoot(),tp);
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Override @Test public void testTreePermissionGetChild() throws Exception {
  List<String> childNames=ImmutableList.of("test","a","b","c","nonexisting");
  Tree rootTree=readOnlyRoot.getTree(ROOT_PATH);
  NodeState ns=((ImmutableTree)rootTree).getNodeState();
  TreePermission tp=createPermissionProvider().getTreePermission(rootTree,TreePermission.EMPTY);
  assertCompositeTreePermission(tp);
  for (  String cName : childNames) {
    ns=ns.getChildNode(cName);
    tp=tp.getChildPermission(cName,ns);
    assertCompositeTreePermission(false,tp);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeTreePermissionTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiple(){
  TreePermission rootTp=createRootTreePermission(fullScopeProvider,fullScopeProvider);
  assertCompositeTreePermission(true,rootTp);
  TreePermission testTp=rootTp.getChildPermission("test",rootTree.getChild("test").getNodeState());
  assertCompositeTreePermission(true,testTp);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.JcrUUIDTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Creating a tree which is referenceable doesn't require any property
 * related privilege to be granted as the jcr:uuid property is defined to
 * be autocreated and protected.
 */
@Test public void testCreateJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_ADD_CHILD_NODES);
  Root testRoot=getTestRoot();
  testRoot.refresh();
  NodeUtil a=new NodeUtil(testRoot.getTree("/a"));
  NodeUtil test=a.addChild("referenceable2",NT_NAME);
  test.setString(JcrConstants.JCR_UUID,IdentifierManager.generateUUID());
  testRoot.commit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.Jr2CompatibilityTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUserManagementPermissionWithJr2Flag() throws Exception {
  Root testRoot=getTestRoot();
  testRoot.refresh();
  UserManager testUserMgr=getUserConfiguration().getUserManager(testRoot,NamePathMapper.DEFAULT);
  try {
    User u=testUserMgr.createUser("a","b");
    testRoot.commit();
    u.changePassword("c");
    testRoot.commit();
    u.remove();
    testRoot.commit();
  }
  finally {
    root.refresh();
    Authorizable user=getUserManager(root).getAuthorizable("a");
    if (user != null) {
      user.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.MoveWithoutEntryCacheTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Same as {@code org.apache.jackrabbit.oak.jcr.security.authorization.SessionMoveTest.testMoveAndRemoveProperty2()}without having a permission-entry cache.
 * @throws Exception
 */
@Test public void testMoveAndRemoveProperty2() throws Exception {
  setupPermission("/a/b",testPrincipal,true,PrivilegeConstants.JCR_REMOVE_NODE,PrivilegeConstants.JCR_REMOVE_CHILD_NODES,PrivilegeConstants.REP_REMOVE_PROPERTIES);
  setupPermission("/a/bb",testPrincipal,true,PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_NODE_TYPE_MANAGEMENT);
  String siblingDestPath="/a/bb/destination";
  Root testRoot=getTestRoot();
  testRoot.move("/a/b/c",siblingDestPath);
  Tree destTree=testRoot.getTree(siblingDestPath);
  destTree.removeProperty("cProp");
  testRoot.commit();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar to {@code org.apache.jackrabbit.oak.jcr.security.authorization.SessionMoveTest.testMoveAndAddProperty2()}without having a permission-entry cache.
 * @throws Exception
 */
@Test public void testMoveAndAddProperty2() throws Exception {
  setupPermission("/a/b",testPrincipal,true,PrivilegeConstants.JCR_REMOVE_NODE,PrivilegeConstants.JCR_REMOVE_CHILD_NODES,PrivilegeConstants.REP_ADD_PROPERTIES);
  setupPermission("/a/bb",testPrincipal,true,PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_NODE_TYPE_MANAGEMENT);
  String siblingDestPath="/a/bb/destination";
  Root testRoot=getTestRoot();
  testRoot.move("/a/b/c",siblingDestPath);
  Tree destTree=testRoot.getTree(siblingDestPath);
  destTree.setProperty("newProp","val");
  testRoot.commit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.VersionStorageTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetChildrenCountOnVersionStorage2() throws Exception {
  setupPermission("/",testPrincipal,true,PrivilegeConstants.JCR_READ);
  Tree vs=getTestRoot().getTree(VersionConstants.VERSION_STORE_PATH);
  vs.getChildrenCount(Long.MAX_VALUE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetChildrenCountOnVersionStorage() throws Exception {
  Tree vs=getTestRoot().getTree(VersionConstants.VERSION_STORE_PATH);
  vs.getChildrenCount(Long.MAX_VALUE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.L1_IntroductionTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWritePermissionWalkThrough() throws CommitFailedException {
  Root testRoot=testSession.getLatestRoot();
  Tree bTree=testRoot.getTree("/a/b");
  try {
    Tree child=bTree.addChild("childName");
    child.setProperty(JcrConstants.JCR_PRIMARYTYPE,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    testRoot.commit();
  }
  finally {
    testRoot.refresh();
  }
  try {
    bTree.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED);
    testRoot.commit();
  }
  finally {
    testRoot.refresh();
  }
  Tree cTree=testRoot.getTree("/a/b/c");
  try {
    cTree.setProperty("cProp","changedValue");
    testRoot.commit();
  }
  finally {
    testRoot.refresh();
  }
  try {
    cTree.setProperty("anotherCProp","val");
    testRoot.commit();
  }
  finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReadPermissionWalkThrough(){
  Root testRoot=testSession.getLatestRoot();
  Tree rootTree=testRoot.getTree("/");
  Tree bTree=testRoot.getTree("/a/b");
  Tree cTree=testRoot.getTree("/a/b/c");
  PropertyState bProp=bTree.getProperty("bProp");
  PropertyState bbProp=testRoot.getTree("/a/bb").getProperty("bbProp");
  PropertyState cProp=cTree.getProperty("cProp");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.L5_SpecialPermissionsTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReadVersionInformation() throws RepositoryException {
  Node childNode=superuser.getNode(childPath);
  childNode.addMixin(JcrConstants.MIX_VERSIONABLE);
  superuser.save();
  childNode.checkin();
  childNode.checkout();
  Session s=createTestSession();
  VersionManager versionManager=s.getWorkspace().getVersionManager();
  VersionHistory vh=versionManager.getVersionHistory(childPath);
  Version rootVersion=vh.getRootVersion();
  Version baseVersion=versionManager.getBaseVersion(childPath);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.L6_AdministratativeAccessTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAdmininistrativePermissions() throws AccessDeniedException, CommitFailedException {
  Tree rootTree=root.getTree("/");
  NodeUtil child=new NodeUtil(rootTree).addChild("test",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  root.commit();
  child.getTree().remove();
  root.commit();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAdministrativeConfiguration() throws Exception {
  ContentSession testSession=createTestSession();
  try {
    Root testRoot=testSession.getLatestRoot();
    Tree rootTree=testRoot.getTree("/");
    NodeUtil child=new NodeUtil(rootTree).addChild("test",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    child.setString("prop","val");
    testRoot.commit();
    child.getTree().remove();
    testRoot.commit();
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionHookTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * ACE    :  0   1   2   3   4   5   6   7
 * Before :  tp  ev  p0  p1  p2  p3
 * After  :      ev      p2  p1  p3  p4  p5
 */
@Test public void testReorderAddAndRemoveAces2() throws Exception {
  createPrincipals();
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,testPath);
  for (int i=0; i < 4; i++) {
    acl.addAccessControlEntry(principals.get(i),privilegesFromNames(JCR_READ));
  }
  acMgr.setPolicy(testPath,acl);
  root.commit();
  AccessControlEntry[] aces=acl.getAccessControlEntries();
  acl.removeAccessControlEntry(aces[0]);
  acl.removeAccessControlEntry(aces[2]);
  acl.orderBefore(aces[4],aces[3]);
  acl.addAccessControlEntry(principals.get(4),privilegesFromNames(JCR_READ));
  acl.addAccessControlEntry(principals.get(5),privilegesFromNames(JCR_READ));
  acMgr.setPolicy(testPath,acl);
  root.commit();
  Tree entry=getEntry(principals.get(2).getName(),testPath,1);
  assertIndex(1,entry);
  entry=getEntry(principals.get(1).getName(),testPath,2);
  assertIndex(2,entry);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReorderAddAndRemoveAces() throws Exception {
  Tree entry=getEntry(testPrincipalName,testPath,0);
  assertIndex(0,entry);
  Tree aclTree=root.getTree(testPath + "/rep:policy");
  aclTree.getChildren().iterator().next().orderBefore(null);
  Iterator<Tree> aceIt=aclTree.getChildren().iterator();
  aceIt.next().remove();
  String name=aceIt.next().getName();
  NodeUtil ace=new NodeUtil(aclTree).addChild("denyEveryoneLockMgt",NT_REP_DENY_ACE);
  ace.setString(REP_PRINCIPAL_NAME,EveryonePrincipal.NAME);
  ace.setNames(AccessControlConstants.REP_PRIVILEGES,JCR_LOCK_MANAGEMENT);
  ace.getTree().orderBefore(name);
  root.commit();
  entry=getEntry(testPrincipalName,testPath,1);
  assertIndex(1,entry);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReorderAndAddAce() throws Exception {
  Tree entry=getEntry(testPrincipalName,testPath,0);
  assertIndex(0,entry);
  Tree aclTree=root.getTree(testPath + "/rep:policy");
  aclTree.getChildren().iterator().next().orderBefore(null);
  NodeUtil ace=new NodeUtil(aclTree).addChild("denyEveryoneLockMgt",NT_REP_DENY_ACE);
  ace.setString(REP_PRINCIPAL_NAME,EveryonePrincipal.NAME);
  ace.setNames(AccessControlConstants.REP_PRIVILEGES,JCR_LOCK_MANAGEMENT);
  root.commit();
  entry=getEntry(testPrincipalName,testPath,1);
  assertIndex(1,entry);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReorderAce() throws Exception {
  Tree entry=getEntry(testPrincipalName,testPath,0);
  assertIndex(0,entry);
  Tree aclTree=root.getTree(testPath + "/rep:policy");
  aclTree.getChildren().iterator().next().orderBefore(null);
  root.commit();
  entry=getEntry(testPrincipalName,testPath,1);
  assertIndex(1,entry);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.VersionTreePermissionTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVersionableChildRemoved2() throws Exception {
  root.getTree("/test/a/b").remove();
  root.commit();
  pp.refresh();
  Tree versionHistory=checkNotNull(vMgr.getVersionHistory(testTree));
  String frozenAPath=PathUtils.concat(versionHistory.getPath(),"1.0",JCR_FROZENNODE,"a");
  TreePermission tp=getVersionPermission(root,pp,frozenAPath);
  assertVersionPermission(tp,"/test/a",true);
  Tree frozenB=root.getTree(frozenAPath).getChild("b");
  tp=pp.getTreePermission(frozenB,tp);
  assertVersionPermission(tp,"/test/a/b",true);
  Tree frozenC=frozenB.getChild("c");
  tp=pp.getTreePermission(frozenC,tp);
  assertVersionPermission(tp,"/test/a/b/c",true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVersionableChildRemoved() throws Exception {
  root.getTree("/test/a/b/c").remove();
  root.commit();
  pp.refresh();
  Tree versionHistory=checkNotNull(vMgr.getVersionHistory(testTree));
  String frozenCPath=PathUtils.concat(versionHistory.getPath(),"1.0",JCR_FROZENNODE,"a/b/c");
  TreePermission tp=getVersionPermission(root,pp,frozenCPath);
  assertVersionPermission(tp,"/test/a/b/c",true);
  root.getTree("/test/a").remove();
  root.commit();
  pp.refresh();
  tp=getVersionPermission(root,pp,frozenCPath);
  assertVersionPermission(tp,"/test/a/b/c",true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetChild() throws Exception {
  Tree versionHistory=checkNotNull(vMgr.getVersionHistory(testTree));
  ImmutableTree t=(ImmutableTree)RootFactory.createReadOnlyRoot(root).getTree("/");
  TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
  for (  String name : PathUtils.elements(versionHistory.getPath())) {
    t=t.getChild(name);
    tp=tp.getChildPermission(name,t.getNodeState());
  }
  String expectedPath="/test";
  assertVersionPermission(tp,"/test",true);
  NodeState ns=t.getChild("1.0").getNodeState();
  tp=tp.getChildPermission("1.0",ns);
  assertVersionPermission(tp,"/test",true);
  ns=ns.getChildNode(JCR_FROZENNODE);
  tp=tp.getChildPermission(JCR_FROZENNODE,ns);
  assertVersionPermission(tp,"/test",true);
  for (  String name : new String[]{"a","b","c"}) {
    ns=ns.getChildNode(name);
    expectedPath=PathUtils.concat(expectedPath,name);
    tp=tp.getChildPermission(name,ns);
    assertVersionPermission(tp,expectedPath,true);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.CustomRestrictionProviderTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests the custom restriction provider that checks on the existence of a property.
 * @throws Exception
 */
@Test public void testProtectPropertiesByRestriction() throws Exception {
  addEntry(TEST_ROOT_PATH,true,"",PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE);
  addEntry(TEST_A_PATH,false,PROP_NAME_PROTECT_ME,PrivilegeConstants.JCR_MODIFY_PROPERTIES);
  ContentSession testSession=createTestSession();
  try {
    Root testRoot=testSession.getLatestRoot();
    PermissionProvider pp=getPermissionProvider(testSession);
    assertIsGranted(pp,testRoot,true,TEST_A_PATH,Permissions.MODIFY_PROPERTY);
    assertIsGranted(pp,testRoot,true,TEST_B_PATH,Permissions.MODIFY_PROPERTY);
    assertIsGranted(pp,testRoot,false,TEST_C_PATH,Permissions.MODIFY_PROPERTY);
    assertIsGranted(pp,testRoot,true,TEST_D_PATH,Permissions.MODIFY_PROPERTY);
    assertIsGranted(pp,testRoot,true,TEST_E_PATH,Permissions.MODIFY_PROPERTY);
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests the custom restriction provider that checks on the absence of a property.
 * @throws Exception
 */
@Test public void testUnProtectByRestriction() throws Exception {
  addEntry(TEST_ROOT_PATH,true,"",PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE);
  addEntry(TEST_ROOT_PATH,false,"",PrivilegeConstants.JCR_REMOVE_NODE);
  addEntry(TEST_A_PATH,true,"!" + PROP_NAME_PROTECT_ME,PrivilegeConstants.JCR_REMOVE_NODE);
  ContentSession testSession=createTestSession();
  try {
    Root testRoot=testSession.getLatestRoot();
    PermissionProvider pp=getPermissionProvider(testSession);
    assertIsGranted(pp,testRoot,true,TEST_A_PATH,Permissions.REMOVE_NODE);
    assertIsGranted(pp,testRoot,true,TEST_B_PATH,Permissions.REMOVE_NODE);
    assertIsGranted(pp,testRoot,false,TEST_C_PATH,Permissions.REMOVE_NODE);
    assertIsGranted(pp,testRoot,true,TEST_D_PATH,Permissions.REMOVE_NODE);
    assertIsGranted(pp,testRoot,true,TEST_E_PATH,Permissions.REMOVE_NODE);
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.GlobPatternTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMatchesWildcardAll(){
  Map<String,Boolean> tests=new HashMap<String,Boolean>();
  GlobPattern gp=GlobPattern.create("/a/b/c","*");
  tests.put("/a/b/c",true);
  tests.put("/a/b/c/d",true);
  tests.put("/a/b/c/d/e",true);
  tests.put("/a/b/c/d/e/f",true);
  tests.put("/a/b/cde",true);
  tests.put("/a/b/cde/e/f",true);
  tests.put("/",false);
  tests.put("/a",false);
  tests.put("/b/c",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
  gp=GlobPattern.create("/a/b/c","*e");
  tests=new HashMap<String,Boolean>();
  tests.put("/a/b/c/e",true);
  tests.put("/a/b/c/d/e",true);
  tests.put("/a/b/c/gge",true);
  tests.put("/a/b/c/d/gge",true);
  tests.put("/a/b/ce",true);
  tests.put("/a/b/chee",true);
  tests.put("/a/b/cd/e",true);
  tests.put("/a/b/cd/f/e",true);
  tests.put("/a/b/cd/e",true);
  tests.put("/a/b/cd/f/e",true);
  tests.put("/",false);
  tests.put("/a",false);
  tests.put("/b/c",false);
  tests.put("/a/b/c",false);
  tests.put("/a/b/c/d",false);
  tests.put("/a/b/c/d/e/f",false);
  tests.put("/a/b/c/d/f/e/f",false);
  tests.put("/a/b/c/d/f/efg",false);
  tests.put("/a/b/c/d/f/f",false);
  tests.put("/a/b/c/e/f",false);
  tests.put("/a/b/ce/",false);
  tests.put("/a/b/ceg",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
  gp=GlobPattern.create("/a/b/c","*/e");
  tests=new HashMap<String,Boolean>();
  tests.put("/a/b/c/e",true);
  tests.put("/a/b/c/d/e",true);
  tests.put("/a/b/cd/e",true);
  tests.put("/a/b/cd/f/e",true);
  tests.put("/",false);
  tests.put("/a",false);
  tests.put("/b/c",false);
  tests.put("/a/b/c",false);
  tests.put("/a/b/c/d",false);
  tests.put("/a/b/c/d/e/f",false);
  tests.put("/a/b/c/d/f/e/f",false);
  tests.put("/a/b/c/d/f/efg",false);
  tests.put("/a/b/c/d/f/f",false);
  tests.put("/a/b/c/e/f",false);
  tests.put("/a/b/ce/",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
  gp=GlobPattern.create("/a/b/c/e","*");
  tests=new HashMap<String,Boolean>();
  tests.put("/a/b/c/e/f/g/h",true);
  tests.put("/a/b/c/e/d/e/f",true);
  tests.put("/a/b/c/e/d/e/f",true);
  tests.put("/a/b/c/e",true);
  tests.put("/a/b/c/e/",true);
  tests.put("/a/b/c/ef",true);
  tests.put("/a/b/c/ef/g",true);
  tests.put("/a/b/ce/f/g/h",false);
  tests.put("/a/b/ce/d/e/f",false);
  tests.put("/a/b/c",false);
  tests.put("/a/b/c/d",false);
  tests.put("/a/b/c/d/e/f",false);
  tests.put("/a/b/c/d/f/f",false);
  tests.put("/a/b/c/d/f/e/f",false);
  tests.put("/a/b/cee/d/e/f",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
  gp=GlobPattern.create("/a/b/c/e","/*");
  tests=new HashMap<String,Boolean>();
  tests.put("/a/b/c/e/f/g/h",true);
  tests.put("/a/b/c/e/d/e/f",true);
  tests.put("/a/b/c/e",false);
  tests.put("/a/b/c/e/",false);
  tests.put("/a/b/c/ef",false);
  tests.put("/a/b/ce/f/g/h",false);
  tests.put("/a/b/ce/d/e/f",false);
  tests.put("/a/b/c",false);
  tests.put("/a/b/c/d",false);
  tests.put("/a/b/c/d/e",false);
  tests.put("/a/b/c/d/e/f",false);
  tests.put("/a/b/c/d/f/f",false);
  tests.put("/a/b/c/d/f/e/f",false);
  tests.put("/a/b/cee/d/e/f",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
  gp=GlobPattern.create("/a/b/c","e/*");
  tests=new HashMap<String,Boolean>();
  tests.put("/a/b/ce/f/g/h",true);
  tests.put("/a/b/ce/d/e/f",true);
  tests.put("/a/b/c",false);
  tests.put("/a/b/ce",false);
  tests.put("/a/b/c/d",false);
  tests.put("/a/b/c/d/e",false);
  tests.put("/a/b/c/d/e/f",false);
  tests.put("/a/b/c/d/f/f",false);
  tests.put("/a/b/c/d/f/e/f",false);
  tests.put("/a/b/cee/d/e/f",false);
  tests.put("/a/b/ce/",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
  gp=GlobPattern.create("/","*");
  tests=new HashMap<String,Boolean>();
  tests.put("/a",true);
  tests.put("/b/",true);
  tests.put("/c/d",true);
  tests.put("/a/b/ce/",true);
  tests.put("/a/b/ce/f/g/h",true);
  tests.put("/a/b/ce/d/e/f",true);
  tests.put("/",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
  gp=GlobPattern.create("/a/b/c","*e/*");
  tests=new HashMap<String,Boolean>();
  tests.put("/a/b/ceeeeeee/f/g/h",true);
  tests.put("/a/b/cde/d/e/f",true);
  tests.put("/a/b/c/d/e/f",true);
  tests.put("/a/b/ced/d/e/f",true);
  tests.put("/a/b/cde",false);
  tests.put("/a/b/ce/",false);
  tests.put("/a/b/c/d/e/",false);
  tests.put("/a/b/c/d",false);
  tests.put("/a/b/c/d/e",false);
  tests.put("/a/b/c/d/f/f",false);
  tests.put("/a/b/c/ed/f/f",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
  gp=GlobPattern.create("/a/b/c","/*e/*");
  tests=new HashMap<String,Boolean>();
  tests.put("/a/b/c/d/e/f",true);
  tests.put("/a/b/c/de/f",true);
  tests.put("/a/b/cde",false);
  tests.put("/a/b/ced/d/e/f",false);
  tests.put("/a/b/cde/d/e/f",false);
  tests.put("/a/b/ce/",false);
  tests.put("/a/b/c/d/e/",false);
  tests.put("/a/b/c/d/e",false);
  tests.put("/a/b/c/d",false);
  tests.put("/a/b/c/d/e",false);
  tests.put("/a/b/c/d/f/f",false);
  tests.put("/a/b/c/ed/f/f",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
  gp=GlobPattern.create("/a/b/c","/*cat");
  tests=new HashMap<String,Boolean>();
  tests.put("/a/b/c/cat",true);
  tests.put("/a/b/c/acat",true);
  tests.put("/a/b/c/f/cat",true);
  tests.put("/a/b/c/f/acat",true);
  tests.put("/a/b/c/d",false);
  tests.put("/a/b/c/d/cat/e",false);
  tests.put("/a/b/c/d/acat/e",false);
  tests.put("/a/b/c/d/cata/e",false);
  tests.put("/a/b/c/d/cate",false);
  tests.put("/a/b/cat",false);
  tests.put("/a/b/cat/ed/f/f",false);
  tests.put("/a/b/ced/cat",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
  gp=GlobPattern.create("/a/b/c","/*/cat");
  tests=new HashMap<String,Boolean>();
  tests.put("/a/b/c/a/cat",true);
  tests.put("/a/b/c/d/e/f/cat",true);
  tests.put("/a/b/c/cat",false);
  tests.put("/a/b/c/cate",false);
  tests.put("/a/b/c/acat",false);
  tests.put("/a/b/c/cat/d",false);
  tests.put("/a/b/c/d/acat",false);
  tests.put("/a/b/c/d/cate",false);
  tests.put("/a/b/c/d/cat/e",false);
  tests.put("/a/b/c/d/acat/e",false);
  tests.put("/a/b/c/d/cata/e",false);
  tests.put("/a/b/cat",false);
  tests.put("/a/b/cat/ed/f/f",false);
  tests.put("/a/b/ced/cat",false);
  tests.put("/a/b/ced/f/cat",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
  gp=GlobPattern.create("/a/b/c","/cat*");
  tests=new HashMap<String,Boolean>();
  tests.put("/a/b/c/cat",true);
  tests.put("/a/b/c/cats",true);
  tests.put("/a/b/c/cat/s",true);
  tests.put("/a/b/c/cats/d/e/f",true);
  tests.put("/a/b/c/d/cat",false);
  tests.put("/a/b/c/d/cats",false);
  tests.put("/a/b/c/d/e/cat",false);
  tests.put("/a/b/c/d/e/cats",false);
  tests.put("/a/b/c/acat",false);
  tests.put("/a/b/c/d/acat",false);
  tests.put("/a/b/c/d/cat/e",false);
  tests.put("/a/b/c/d/acat/e",false);
  tests.put("/a/b/c/d/cata/e",false);
  tests.put("/a/b/cat",false);
  tests.put("/a/b/cat/ed/f/f",false);
  tests.put("/a/b/ced/cat",false);
  tests.put("/a/b/ced/f/cat",false);
  for (  String testPath : tests.keySet()) {
    assertMatch(gp,testPath,tests.get(testPath));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.ItemNameRestrictionTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddChild() throws Exception {
  Root testRoot=testSession.getLatestRoot();
  List<String> paths=ImmutableList.of("/a","/a/d/b","/a/d/b/e/c");
  for (  String p : paths) {
    NodeUtil t=new NodeUtil(testRoot.getTree(p));
    t.addChild("c",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    testRoot.commit();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.PermissionTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests the custom restriction provider that checks on the existence of a property.
 * @throws Exception
 */
@Test public void testProtectPropertiesByRestriction() throws Exception {
  addEntry(TEST_ROOT_PATH,true,"",PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE);
  addEntry(TEST_A_PATH,false,"*/c",PrivilegeConstants.JCR_MODIFY_PROPERTIES);
  ContentSession testSession=createTestSession();
  try {
    Root testRoot=testSession.getLatestRoot();
    PermissionProvider pp=getPermissionProvider(testSession);
    assertIsGranted(pp,testRoot,true,TEST_A_PATH,Permissions.MODIFY_PROPERTY);
    assertIsGranted(pp,testRoot,true,TEST_B_PATH,Permissions.MODIFY_PROPERTY);
    assertIsGranted(pp,testRoot,false,TEST_C_PATH,Permissions.MODIFY_PROPERTY);
    assertIsGranted(pp,testRoot,true,TEST_D_PATH,Permissions.MODIFY_PROPERTY);
    assertIsGranted(pp,testRoot,true,TEST_E_PATH,Permissions.MODIFY_PROPERTY);
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.internal.SecurityProviderRegistrationTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthorizationContext() throws Exception {
  Tree t=root.getTree("/");
  Field f=registration.getClass().getDeclaredField("authorizationConfiguration");
  f.setAccessible(true);
  AuthorizationConfiguration ac=new AuthorizationConfigurationImpl();
  registration.bindAuthorizationConfiguration(ac,PROPS);
  CompositeAuthorizationConfiguration cac=(CompositeAuthorizationConfiguration)f.get(registration);
  Context ctx=cac.getContext();
  assertContext(ctx,1,t,false);
  AuthorizationConfiguration ac1=new TestAuthorizationConfiguration();
  registration.bindAuthorizationConfiguration(ac1,PROPS);
  cac=(CompositeAuthorizationConfiguration)f.get(registration);
  ctx=cac.getContext();
  assertContext(ctx,2,t,true);
  AuthorizationConfiguration ac2=new TestAuthorizationConfiguration();
  registration.bindAuthorizationConfiguration(ac2,PROPS);
  cac=(CompositeAuthorizationConfiguration)f.get(registration);
  ctx=cac.getContext();
  assertContext(ctx,3,t,true);
  registration.unbindAuthorizationConfiguration(ac1,PROPS);
  cac=(CompositeAuthorizationConfiguration)f.get(registration);
  ctx=cac.getContext();
  assertContext(ctx,2,t,true);
  registration.unbindAuthorizationConfiguration(ac,PROPS);
  cac=(CompositeAuthorizationConfiguration)f.get(registration);
  ctx=cac.getContext();
  assertContext(ctx,1,t,true);
  registration.unbindAuthorizationConfiguration(ac2,PROPS);
  cac=(CompositeAuthorizationConfiguration)f.get(registration);
  ctx=cac.getContext();
  assertContext(ctx,0,t,false);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPrincipalContext() throws Exception {
  Tree t=root.getTree("/");
  Field f=registration.getClass().getDeclaredField("principalConfiguration");
  f.setAccessible(true);
  PrincipalConfiguration pc=new PrincipalConfigurationImpl();
  registration.bindPrincipalConfiguration(pc,PROPS);
  CompositePrincipalConfiguration cpc=(CompositePrincipalConfiguration)f.get(registration);
  Context ctx=cpc.getContext();
  assertContext(ctx,0,t,false);
  PrincipalConfiguration pc1=new TestPrincipalConfiguration();
  registration.bindPrincipalConfiguration(pc1,PROPS);
  cpc=(CompositePrincipalConfiguration)f.get(registration);
  ctx=cpc.getContext();
  assertContext(ctx,1,t,true);
  PrincipalConfiguration pc2=new TestPrincipalConfiguration();
  registration.bindPrincipalConfiguration(pc2,PROPS);
  cpc=(CompositePrincipalConfiguration)f.get(registration);
  ctx=cpc.getContext();
  assertContext(ctx,2,t,true);
  registration.unbindPrincipalConfiguration(pc,PROPS);
  cpc=(CompositePrincipalConfiguration)f.get(registration);
  ctx=cpc.getContext();
  assertContext(ctx,2,t,true);
  registration.unbindPrincipalConfiguration(pc1,PROPS);
  cpc=(CompositePrincipalConfiguration)f.get(registration);
  ctx=cpc.getContext();
  assertContext(ctx,1,t,true);
  registration.unbindPrincipalConfiguration(pc2,PROPS);
  cpc=(CompositePrincipalConfiguration)f.get(registration);
  ctx=cpc.getContext();
  assertContext(ctx,0,t,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.principal.L4_PrincipalProviderTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCorrespondance(){
  boolean exists=principalManager.hasPrincipal(testPrincipalName);
  Principal principal=principalManager.getPrincipal(testPrincipalName);
  PrincipalIterator principalIterator=principalManager.findPrincipals(testPrincipalName,PrincipalManager.SEARCH_TYPE_ALL);
  PrincipalIterator groups=principalManager.getGroupMembership(principal);
  PrincipalIterator all=principalManager.getPrincipals(PrincipalManager.SEARCH_TYPE_ALL);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.L3_BuiltInPrivilegesTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMapItems() throws Exception {
  Privilege jcrAll=acMgr.privilegeFromName(PrivilegeConstants.JCR_ALL);
  for (  Privilege privilege : jcrAll.getAggregatePrivileges()) {
    try {
      setupAcl(privilege,acMgr);
      testRoot.refresh();
    }
  finally {
      clearAcl(acMgr);
      testRoot.refresh();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.L5_PrivilegeContentTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPrivilegeBits(){
  Tree jcrReadTree=PrivilegeUtil.getPrivilegesTree(root).getChild(PrivilegeConstants.JCR_READ);
  Tree repWriteTree=PrivilegeUtil.getPrivilegesTree(root).getChild(PrivilegeConstants.REP_WRITE);
  PrivilegeBitsProvider provider=new PrivilegeBitsProvider(root);
  PrivilegeBits privilegeBits=provider.getBits(PrivilegeConstants.REP_WRITE,PrivilegeBits.JCR_READ);
  PrivilegeBits readBits=PrivilegeBits.getInstance(jcrReadTree);
  PrivilegeBits writeBits=PrivilegeBits.getInstance(jcrReadTree);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNext() throws RepositoryException, CommitFailedException {
  PropertyState next=PrivilegeUtil.getPrivilegesTree(root).getProperty(PrivilegeConstants.REP_NEXT);
  PrivilegeManager privilegeManager=getPrivilegeManager(root);
  Privilege newPrivilege=privilegeManager.registerPrivilege("myPrivilege",true,null);
  root.commit();
  PropertyState nextAgain=PrivilegeUtil.getPrivilegesTree(root).getProperty(PrivilegeConstants.REP_NEXT);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.L6_JcrAllTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testManualModification() throws Exception {
  Tree jcrAllTree=PrivilegeUtil.getPrivilegesTree(root).getChild(PrivilegeConstants.JCR_ALL);
  jcrAllTree.removeProperty(PrivilegeConstants.REP_AGGREGATES);
  root.commit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AbstractAddMembersByIdTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testValidAndNullId() throws Exception {
  testGroup.addMembers(getTestUser().getID(),null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testValidAndEmptyId() throws Exception {
  testGroup.addMembers(getTestUser().getID(),"");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testEmptyId() throws Exception {
  testGroup.addMembers("");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NullPointerException.class) public void testNullId() throws Exception {
  testGroup.addMembers(null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AbstractRemoveMembersByIdTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testEmptyId() throws Exception {
  testGroup.removeMembers("");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testValidAndNullId() throws Exception {
  testGroup.removeMembers(getTestUser().getID(),null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NullPointerException.class) public void testNullId() throws Exception {
  testGroup.removeMembers(null);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testValidAndEmptyId() throws Exception {
  testGroup.removeMembers(getTestUser().getID(),"");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AddMembersByIdAbortTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testNonExistingMember() throws Exception {
  addNonExistingMember();
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testExistingMemberWithoutAccess() throws Exception {
  addExistingMemberWithoutAccess();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.CacheValidatorProviderTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveCache() throws Exception {
  Tree cache=getCache(getTestUser());
  cache.remove();
  root.commit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.IntermediatePathTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testGroupWrongRoot() throws Exception {
  createAuthorizable(true,UserConstants.DEFAULT_USER_PATH);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testUserWrongRoot() throws Exception {
  createAuthorizable(false,UserConstants.DEFAULT_GROUP_PATH);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L16_RepositoryWithoutUserManagement </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=UnsupportedOperationException.class) public void testNoUserManagementSupported(){
  getSecurityProvider().getConfiguration(UserConfiguration.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L3_UserVsPrincipalTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAccessControlEntryWithId() throws RepositoryException {
  AccessControlManager acMgr=getAccessControlManager(root);
  String[] ids=new String[]{testId,testGroupId};
  for (  String id : ids) {
    AccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/");
    acl.addAccessControlEntry(new PrincipalImpl(id),AccessControlUtils.privilegesFromNames(acMgr,PrivilegeConstants.JCR_READ));
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLoginWithPrincipalName() throws Exception {
  login(ExerciseUtility.getTestCredentials(testPrincipal.getName())).close();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateUserWithGroupPrincipalName() throws RepositoryException, CommitFailedException {
  User user2=null;
  try {
    user2=getUserManager(root).createUser(UUID.randomUUID().toString(),ExerciseUtility.TEST_PW,testGroupPrincipal,null);
    root.commit();
  }
  finally {
    if (user2 != null) {
      user2.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L4_AuthorizableIdTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIdConflict() throws RepositoryException, CommitFailedException {
  User conflictUser=getUserManager(root).createUser(testUser.getID(),null);
  root.refresh();
  Group conflictGroup=getUserManager(root).createGroup(testUser.getID());
  root.refresh();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordExpiryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthenticatePasswordExpiredNewUser() throws Exception {
  Authentication a=new UserAuthentication(getUserConfiguration(),root,userId);
  a.authenticate(new SimpleCredentials(userId,userId.toCharArray()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordHistoryTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testHistoryViolation() throws Exception {
  User user=getTestUser();
  user.changePassword("abc");
  user.changePassword("def");
  user.changePassword("abc");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRepeatedPwAfterHistorySizeReached() throws Exception {
  User user=getTestUser();
  for (  String pw : PASSWORDS) {
    user.changePassword(pw);
  }
  user.changePassword(user.getID());
  for (  String pw : PASSWORDS) {
    user.changePassword(pw);
  }
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testHistoryViolationAtFirstChange() throws Exception {
  User user=getTestUser();
  user.changePassword(user.getID());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.RandomAuthorizableNodeNameTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateGroupWithPath() throws Exception {
  Group group=getUserManager(root).createGroup(id,new PrincipalImpl(id),"a/b");
  root.commit();
  assertNodeName(group,"a/b");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateGroup() throws Exception {
  Group group=getUserManager(root).createGroup(id);
  root.commit();
  assertNodeName(group);
  Authorizable authorizable=getUserManager(root).getAuthorizable(id);
  assertNodeName(authorizable);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateUserWithPath() throws Exception {
  User user=getUserManager(root).createUser(id,"pw",new PrincipalImpl(id),"a/b");
  root.commit();
  assertNodeName(user,"a/b");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateUser() throws Exception {
  User user=getUserManager(root).createUser(id,"pw");
  root.commit();
  assertNodeName(user);
  Authorizable authorizable=getUserManager(root).getAuthorizable(id);
  assertNodeName(authorizable);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.RemoveMembersByIdAbortTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testMissingAccessMember() throws Exception {
  removeExistingMemberWithoutAccess();
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testNonExistingMember() throws Exception {
  removeNonExistingMember();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.ResetExpiredPasswordTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthenticatePasswordExpiredThenChanged() throws Exception {
  authenticate(userId,userId);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.SystemUserImplTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImpersonateSystemUser() throws Exception {
  user=createUser(null);
  ContentSession cs=login(new ImpersonationCredentials(new SimpleCredentials(uid,new char[0]),adminSession.getAuthInfo()));
  cs.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserConfigurationImplTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUserConfigurationWithSetParameters() throws Exception {
  UserConfigurationImpl userConfiguration=new UserConfigurationImpl();
  userConfiguration.setParameters(getParams());
  testConfigurationParameters(userConfiguration.getParameters());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUserConfigurationWithConstructor() throws Exception {
  UserConfigurationImpl userConfiguration=new UserConfigurationImpl(getSecurityProvider());
  testConfigurationParameters(userConfiguration.getParameters());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserManagerImplTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConcurrentCreateUser() throws Exception {
  final List<Exception> exceptions=new ArrayList<Exception>();
  List<Thread> workers=new ArrayList<Thread>();
  for (int i=0; i < 10; i++) {
    final String userId="foo-user-" + i;
    workers.add(new Thread(new Runnable(){
      public void run(){
        try {
          ContentSession admin=login(getAdminCredentials());
          Root root=admin.getLatestRoot();
          UserManager userManager=new UserManagerImpl(root,namePathMapper,getSecurityProvider());
          userManager.createUser(userId,"pass");
          root.commit();
          admin.close();
        }
 catch (        Exception e) {
          exceptions.add(e);
        }
      }
    }
));
  }
  for (  Thread t : workers) {
    t.start();
  }
  for (  Thread t : workers) {
    t.join();
  }
  for (  Exception e : exceptions) {
    e.printStackTrace();
  }
  if (!exceptions.isEmpty()) {
    throw exceptions.get(0);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserPrincipalProviderWithCacheTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveCache() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  pp.getPrincipals(userId);
  root.refresh();
  Tree cache=getCacheTree(root);
  cache.remove();
  root.commit();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnlySystemReadsFromCache() throws Exception {
  String userId=getTestUser().getID();
  PrincipalProvider systemPP=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=systemPP.getPrincipals(userId);
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal(),getTestUser().getPrincipal());
  root.refresh();
  assertPrincipals(principalProvider.getPrincipals(userId),EveryonePrincipal.getInstance(),testGroup.getPrincipal(),getTestUser().getPrincipal());
  testGroup.removeMember(getTestUser());
  root.commit();
  assertPrincipals(principalProvider.getPrincipals(userId),EveryonePrincipal.getInstance(),getTestUser().getPrincipal());
  assertPrincipals(systemPP.getPrincipals(userId),EveryonePrincipal.getInstance(),testGroup.getPrincipal(),getTestUser().getPrincipal());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserProviderTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAutoCreatedItemsUponSystemUserCreation() throws Exception {
  UserProvider up=createUserProvider();
  assertAutoCreatedItems(up.createSystemUser("s",null),UserConstants.NT_REP_SYSTEM_USER,root);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAutoCreatedItemsUponGroupCreation() throws Exception {
  UserProvider up=createUserProvider();
  assertAutoCreatedItems(up.createGroup("g",null),UserConstants.NT_REP_GROUP,root);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAutoCreatedItemsUponUserCreation() throws Exception {
  UserProvider up=createUserProvider();
  assertAutoCreatedItems(up.createUser("c",null),UserConstants.NT_REP_USER,root);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.autosave.AutoSaveEnabledManagerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAutoSave() throws RepositoryException {
  mgr.autoSave(false);
  mgr.autoSave(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.AbstractBlobStoreTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMedium() throws Exception {
  doTest(100,100);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLarge() throws Exception {
  doTest(1000,10);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSmall() throws Exception {
  doTest(10,300);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.split.SplitBlobStoreTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetInputStream() throws IOException {
  for (  String id : oldBlobIds) {
    assertStreamEquals(oldBlobStore.getInputStream(id),splitBlobStore.getInputStream(id));
  }
  for (  String id : newBlobIds) {
    assertStreamEquals(newBlobStore.getInputStream(id),splitBlobStore.getInputStream(id));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.commit.MoveTrackerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiMove4(){
  MoveTest test=new MoveTest().addMove("/a/b/c","/a/f/c","/a/b/c").addMove("/a/f/c/d","/a/b/d","/a/b/c/d").addMove("/a/b/d/e","/a/f/c/e","/a/b/c/d/e").addMove("/a/f/c","/a/b/d/e","/a/b/c");
  test.assertResult();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Existing tree structure:
 * - /a/b/c/d/e
 * - /a/f
 * Moves:
 * - /a/b/c    -> /a/f/c
 * - /a/f/c/d  -> /a/b/d
 * - /a/b/d/e  -> /a/f/c/e
 * - /a/f/c    -> /a/b/c
 * Expected mapping original-source vs destination:
 * - "/a/b/c"     -> "/a/f/c"
 * - "/a/b/c/d"   -> "/a/b/d"
 * - "/a/b/c/d/e" -> "/a/f/c/e"
 */
@Test public void testMultiMove(){
  MoveTest test=new MoveTest().addMove("/a/b/c","/a/f/c","/a/b/c").addMove("/a/f/c/d","/a/b/d","/a/b/c/d").addMove("/a/b/d/e","/a/f/c/e","/a/b/c/d/e");
  test.assertResult();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiMove3(){
  MoveTest test=new MoveTest().addMove("/a/b/c","/a/f/c","/a/b/c").addMove("/a/f/c/d","/a/b/d","/a/b/c/d").addMove("/a/b/d/e","/a/f/c/e","/a/b/c/d/e").addMove("/a/f/c/e","/a/b/c","/a/b/c/d/e");
  test.assertResult();
  test.addMove("/a/b/d","/a/b/c/d","/a/b/c/d");
  test.assertResult();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Existing tree structure:
 * - /a/b/c/d/e
 * - /a/f
 * Moves:
 * - /a/b/c    -> /a/f/c
 * - /a/f/c/d  -> /a/b/d
 * - /a/b/d/e  -> /a/f/c/e
 * - /a/f/c/e  -> /a/f/e
 * Expected mapping original-source vs destination:
 * - "/a/b/c"     -> "/a/f/c"
 * - "/a/b/c/d"   -> "/a/b/d"
 * - "/a/b/c/d/e" -> "/a/f/e"
 */
@Test public void testMultiMove2(){
  MoveTest test=new MoveTest().addMove("/a/b/c","/a/f/c","/a/b/c").addMove("/a/f/c/d","/a/b/d","/a/b/c/d").addMove("/a/b/d/e","/a/f/c/e","/a/b/c/d/e").addMove("/a/f/c/e","/a/f/e","/a/b/c/d/e");
  test.assertResult();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiMoveIncludingNewNodes(){
  MoveTest test=new MoveTest().addMove("/a/b/c","/a/f/c","/a/b/c").addMove("/a/f/c/d","/a/b/d","/a/b/c/d").addMove("/a/b/d/e","/a/f/c/e","/a/b/c/d/e").addMove("/a/b/d/e","/a/b/c/d/e","/a/b/c/d/e");
  test.assertResult();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.basic.DefaultSyncContextTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testSyncInvalidExternalIdentity() throws Exception {
  syncCtx.sync(new TestExternalIdentity());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSyncAutoMembershipListsUser() throws Exception {
  config.user().setAutoMembership(getTestUser().getID());
  syncCtx.sync(idp.listUsers().next());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugAccessControlManagerTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testSetInvalidCugNode() throws Exception {
  Tree supportedTree=root.getTree(SUPPORTED_PATH);
  new NodeUtil(supportedTree).addChild(REP_CUG_POLICY,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,new CugPolicyImpl(SUPPORTED_PATH,NamePathMapper.DEFAULT,getPrincipalManager(root),ImportBehavior.BESTEFFORT));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testRemoveInvalidCugNode() throws Exception {
  Tree supportedTree=root.getTree(SUPPORTED_PATH);
  new NodeUtil(supportedTree).addChild(REP_CUG_POLICY,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  cugAccessControlManager.removePolicy(SUPPORTED_PATH,new CugPolicyImpl(SUPPORTED_PATH,NamePathMapper.DEFAULT,getPrincipalManager(root),ImportBehavior.BESTEFFORT));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testRemovePolicyPathMismatch() throws Exception {
  cugAccessControlManager.removePolicy(SUPPORTED_PATH,createCug(SUPPORTED_PATH + "/subtree"));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=PathNotFoundException.class) public void testSetPolicyInvalidPath() throws Exception {
  cugAccessControlManager.setPolicy(INVALID_PATH,createCug(INVALID_PATH));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=PathNotFoundException.class) public void testGetApplicablePoliciesInvalidPath() throws Exception {
  cugAccessControlManager.getApplicablePolicies(INVALID_PATH);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=PathNotFoundException.class) public void testGetSupportedPrivilegesInvalidPath() throws Exception {
  cugAccessControlManager.getSupportedPrivileges(INVALID_PATH);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testSetPolicyUnsupportedPath() throws Exception {
  cugAccessControlManager.setPolicy(UNSUPPORTED_PATH,createCug(UNSUPPORTED_PATH));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=PathNotFoundException.class) public void testGetEffectivePoliciesInvalidPath() throws Exception {
  cugAccessControlManager.getEffectivePolicies(INVALID_PATH);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testRemovePolicyUnsupportedPath() throws Exception {
  cugAccessControlManager.removePolicy(UNSUPPORTED_PATH,createCug(UNSUPPORTED_PATH));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=PathNotFoundException.class) public void testGetPoliciesInvalidPath() throws Exception {
  cugAccessControlManager.getPolicies(INVALID_PATH);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=PathNotFoundException.class) public void testRemovePolicyInvalidPath() throws Exception {
  cugAccessControlManager.removePolicy(INVALID_PATH,createCug(INVALID_PATH));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testSetPolicyPathMismatch() throws Exception {
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,createCug(SUPPORTED_PATH + "/subtree"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugImportBaseTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCugValidPrincipals() throws Exception {
  testGroup=((JackrabbitSession)adminSession).getUserManager().createGroup(new PrincipalImpl(TEST_GROUP_PRINCIPAL_NAME));
  adminSession.save();
  Node targetNode=getTargetNode();
  targetNode.addMixin(CugConstants.MIX_REP_CUG_MIXIN);
  doImport(getTargetPath(),XML_CUG_POLICY);
  adminSession.save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeWithCugValidPrincipals() throws Exception {
  testGroup=((JackrabbitSession)adminSession).getUserManager().createGroup(new PrincipalImpl(TEST_GROUP_PRINCIPAL_NAME));
  adminSession.save();
  doImport(getTargetPath(),XML_CHILD_WITH_CUG);
  adminSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugImportBesteffortTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeWithCugInvalidPrincipals() throws Exception {
  doImport(getTargetPath(),XML_CHILD_WITH_CUG);
  Node cugNode=getTargetNode().getNode("child").getNode(CugConstants.REP_CUG_POLICY);
  Value[] principalNames=cugNode.getProperty(CugConstants.REP_PRINCIPAL_NAMES).getValues();
  assertPrincipalNames(PRINCIPAL_NAMES,principalNames);
  getImportSession().save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCugInvalidPrincipals() throws Exception {
  Node targetNode=getTargetNode();
  targetNode.addMixin(CugConstants.MIX_REP_CUG_MIXIN);
  doImport(getTargetPath(),XML_CUG_POLICY);
  Node cugNode=targetNode.getNode(CugConstants.REP_CUG_POLICY);
  Value[] principalNames=cugNode.getProperty(CugConstants.REP_PRINCIPAL_NAMES).getValues();
  assertPrincipalNames(PRINCIPAL_NAMES,principalNames);
  getImportSession().save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugImportIgnoreTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCugInvalidPrincipals() throws Exception {
  Node targetNode=getTargetNode();
  targetNode.addMixin(CugConstants.MIX_REP_CUG_MIXIN);
  doImport(getTargetPath(),XML_CUG_POLICY);
  Node cugNode=targetNode.getNode(CugConstants.REP_CUG_POLICY);
  Value[] principalNames=cugNode.getProperty(CugConstants.REP_PRINCIPAL_NAMES).getValues();
  assertPrincipalNames(ImmutableSet.of(EveryonePrincipal.NAME),principalNames);
  getImportSession().save();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeWithCugInvalidPrincipals() throws Exception {
  doImport(getTargetPath(),XML_CHILD_WITH_CUG);
  Node cugNode=getTargetNode().getNode("child").getNode(CugConstants.REP_CUG_POLICY);
  Value[] principalNames=cugNode.getProperty(CugConstants.REP_PRINCIPAL_NAMES).getValues();
  assertPrincipalNames(ImmutableSet.of(EveryonePrincipal.NAME),principalNames);
  getImportSession().save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugPolicyImplTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testAddEmptyPrincipalName() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.BESTEFFORT);
  cug.addPrincipals(new PrincipalImpl(""));
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testAddNullPrincipalName() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.BESTEFFORT);
  cug.addPrincipals(new Principal(){
    @Override public String getName(){
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testAddInvalidPrincipalsAbort() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.ABORT);
  cug.addPrincipals(EveryonePrincipal.getInstance(),new PrincipalImpl("unknown"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugValidatorTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeTypeWithCugNames() throws Exception {
  ReadWriteNodeTypeManager ntMgr=new ReadWriteNodeTypeManager(){
    @Nonnull @Override protected Root getWriteRoot(){
      return root;
    }
    @CheckForNull @Override protected Tree getTypes(){
      return root.getTree(NODE_TYPES_PATH);
    }
  }
;
  NodeTypeTemplate ntTemplate=ntMgr.createNodeTypeTemplate();
  ntTemplate.setName("testNT");
  NodeDefinitionTemplate ndt=ntMgr.createNodeDefinitionTemplate();
  ndt.setName(REP_CUG_POLICY);
  ndt.setRequiredPrimaryTypeNames(new String[]{JcrConstants.NT_BASE});
  ntTemplate.getNodeDefinitionTemplates().add(ndt);
  ntMgr.registerNodeType(ntTemplate,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.EmptyCugTreePermissionTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRootPermission() throws Exception {
  assertCugPermission(tp,false);
  TreePermission rootTp=pp.getTreePermission(root.getTree("/"),TreePermission.EMPTY);
  assertCugPermission(rootTp,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.NestedCugHookRootSupportedTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddAtRoot3() throws Exception {
  createCug(ROOT_PATH,EveryonePrincipal.getInstance());
  createCug("/content",getTestGroupPrincipal());
  createCug("/content2",EveryonePrincipal.getInstance());
  root.commit();
  assertNestedCugs(root,ROOT_PATH,true,"/content","/content2");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddAtRoot2() throws Exception {
  createCug("/content",getTestGroupPrincipal());
  createCug("/content2",EveryonePrincipal.getInstance());
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,"/content","/content2");
  createCug(ROOT_PATH,EveryonePrincipal.getInstance());
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false);
  assertNestedCugs(root,ROOT_PATH,true,"/content","/content2");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveRootCug2() throws Exception {
  createCug(ROOT_PATH,EveryonePrincipal.getInstance());
  createCug("/content",getTestGroupPrincipal());
  createCug("/content2",EveryonePrincipal.getInstance());
  root.commit();
  removeCug("/content",true);
  assertNestedCugs(root,ROOT_PATH,true,"/content2");
  removeCug("/",true);
  assertNestedCugs(root,ROOT_PATH,false,"/content2");
  removeCug("/content2",true);
  assertNestedCugs(root,ROOT_PATH,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.NestedCugHookTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveContentNode() throws Exception {
  setupCugsAndAcls();
  root.getTree("/content").remove();
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,"/content2");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveContentANode() throws Exception {
  setupCugsAndAcls();
  root.getTree("/content/a").remove();
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,"/content2","/content/aa/bb");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveToSupportedPath() throws Exception {
  createCug(root,SUPPORTED_PATH3,EveryonePrincipal.NAME);
  Tree newTree=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NT_OAK_UNSTRUCTURED).getTree();
  String path=newTree.getPath();
  createCug(path,getTestGroupPrincipal());
  root.commit();
  String destPath=PathUtils.concat(SUPPORTED_PATH,"moved");
  root.move(path,destPath);
  root.commit();
  assertNestedCugs(root,SUPPORTED_PATH3,true);
  assertNestedCugs(root,ROOT_PATH,false,SUPPORTED_PATH3,destPath);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddCug() throws Exception {
  createCug("/content",getTestGroupPrincipal());
  root.commit();
  assertNestedCugs(root,"/",false,"/content");
  assertNestedCugs(root,"/content",true);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddNodeWithCugManually() throws Exception {
  createCug(root,SUPPORTED_PATH3,EveryonePrincipal.NAME);
  Tree newTree=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NT_OAK_UNSTRUCTURED).getTree();
  String path=newTree.getPath();
  createCug(root,path,getTestGroupPrincipal().getName());
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,SUPPORTED_PATH3);
  assertNestedCugs(root,SUPPORTED_PATH3,true,path);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddAtUnsupportedPath() throws Exception {
  String unsupportedPath=UNSUPPORTED_PATH + "/child";
  createCug(root,unsupportedPath,EveryonePrincipal.NAME);
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,unsupportedPath);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveToNested() throws Exception {
  createCug(root,SUPPORTED_PATH2,EveryonePrincipal.NAME);
  createCug(root,SUPPORTED_PATH3,EveryonePrincipal.NAME);
  Tree newTree=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NT_OAK_UNSTRUCTURED).getTree();
  String path=newTree.getPath();
  createCug(path,getTestGroupPrincipal());
  root.commit();
  String destPath=PathUtils.concat(SUPPORTED_PATH2,"moved");
  root.move(path,destPath);
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,SUPPORTED_PATH3,SUPPORTED_PATH2);
  assertNestedCugs(root,SUPPORTED_PATH3,true);
  assertNestedCugs(root,SUPPORTED_PATH2,true,destPath);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveToUnsupportedPath() throws Exception {
  createCug(root,SUPPORTED_PATH3,EveryonePrincipal.NAME);
  Tree newTree=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NT_OAK_UNSTRUCTURED).getTree();
  String path=newTree.getPath();
  createCug(path,getTestGroupPrincipal());
  root.commit();
  String destPath=PathUtils.concat(UNSUPPORTED_PATH,"moved");
  root.move(path,destPath);
  root.commit();
  assertNestedCugs(root,SUPPORTED_PATH3,true);
  assertNestedCugs(root,ROOT_PATH,false,SUPPORTED_PATH3,destPath);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddNodeWithCug() throws Exception {
  createCug(SUPPORTED_PATH2,EveryonePrincipal.getInstance());
  Tree newTree=new NodeUtil(root.getTree(SUPPORTED_PATH2)).addChild("child",NT_OAK_UNSTRUCTURED).getTree();
  String path=newTree.getPath();
  createCug(path,getTestGroupPrincipal());
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,SUPPORTED_PATH2);
  assertNestedCugs(root,SUPPORTED_PATH2,true,path);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddNestedCug() throws Exception {
  setupCugsAndAcls();
  assertNestedCugs(root,ROOT_PATH,false,"/content/a","/content/aa/bb","/content2");
  assertNestedCugs(root,"/content/a",true,"/content/a/b/c");
  createCug("/content",EveryonePrincipal.getInstance());
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,"/content","/content2");
  assertNestedCugs(root,"/content",true,"/content/a","/content/aa/bb");
  assertNestedCugs(root,"/content/a",true,"/content/a/b/c");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveAndReadd() throws Exception {
  createCug(root,SUPPORTED_PATH3,EveryonePrincipal.NAME);
  Tree newTree=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NT_OAK_UNSTRUCTURED).getTree();
  String path=newTree.getPath();
  createCug(path,getTestGroupPrincipal());
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,SUPPORTED_PATH3);
  assertNestedCugs(root,SUPPORTED_PATH3,true,path);
  removeCug(path,false);
  createCug(path,EveryonePrincipal.getInstance());
  root.commit();
  assertNestedCugs(root,SUPPORTED_PATH3,true,path);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.AbstractRestrictionProviderTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidateRestrictions() throws Exception {
  Restriction glob=restrictionProvider.createRestriction(testPath,REP_GLOB,globValue);
  Restriction ntNames=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,nameValues);
  Restriction mand=restrictionProvider.createRestriction(testPath,"mandatory",valueFactory.createValue(true));
  restrictionProvider.validateRestrictions(testPath,getAceTree(mand));
  restrictionProvider.validateRestrictions(testPath,getAceTree(mand,glob));
  restrictionProvider.validateRestrictions(testPath,getAceTree(mand,ntNames));
  restrictionProvider.validateRestrictions(testPath,getAceTree(mand,glob,ntNames));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.CompositeRestrictionProviderTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteRestrictions() throws Exception {
  NodeUtil aceNode=new NodeUtil(root.getTree("/")).addChild("test",NT_REP_GRANT_ACE);
  Set<Restriction> restrictions=ImmutableSet.of(provider.createRestriction("/test","boolean",vf.createValue(true)),provider.createRestriction("/test","longs"),provider.createRestriction("/test",REP_GLOB,vf.createValue("*")),provider.createRestriction("/test",REP_NT_NAMES,vf.createValue("nt:base",PropertyType.NAME),vf.createValue("nt:version",PropertyType.NAME)));
  provider.writeRestrictions("/test",aceNode.getTree(),restrictions);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMvCreateRestriction() throws RepositoryException {
  Map<String,Value[]> valid=ImmutableMap.of("longs",new Value[]{vf.createValue(100)},REP_NT_NAMES,new Value[]{vf.createValue("nt:base",PropertyType.NAME),vf.createValue("nt:unstructured",PropertyType.NAME)});
  for (  String name : valid.keySet()) {
    provider.createRestriction("/testPath",name,valid.get(name));
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateRestriction() throws Exception {
  Map<String,Value> valid=ImmutableMap.of("boolean",vf.createValue(true),"longs",vf.createValue(10),REP_GLOB,vf.createValue("*"));
  for (  String name : valid.keySet()) {
    provider.createRestriction("/testPath",name,valid.get(name));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.privilege.PrivilegeBitsTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetInstanceFromBase(){
  PrivilegeBits pb=PrivilegeBits.getInstance(READ_NODES_PRIVILEGE_BITS);
  pb.add(PrivilegeBits.BUILT_IN.get(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  pb.add(PrivilegeBits.BUILT_IN.get(PrivilegeConstants.JCR_NODE_TYPE_MANAGEMENT));
  PrivilegeBits pb2=PrivilegeBits.getInstance(READ_NODES_PRIVILEGE_BITS,PrivilegeBits.BUILT_IN.get(PrivilegeConstants.JCR_READ_ACCESS_CONTROL),PrivilegeBits.BUILT_IN.get(PrivilegeConstants.JCR_NODE_TYPE_MANAGEMENT));
  assertEquivalent(pb,pb2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.user.action.AccessControlActionTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAccessControlAction() throws Exception {
  UserManager userMgr=getUserManager(root);
  Group gr=null;
  try {
    gr=userMgr.createGroup("actionTestGroup");
    root.commit();
    assertAcAction(gr,PrivilegeConstants.JCR_READ);
  }
  finally {
    root.refresh();
    if (gr != null) {
      gr.remove();
    }
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAccessControlActionForUser() throws Exception {
  UserManager userMgr=getUserManager(root);
  User u=null;
  try {
    String uid="actionTestUser";
    u=userMgr.createUser(uid,uid);
    root.commit();
    assertAcAction(u,PrivilegeConstants.JCR_ALL);
  }
  finally {
    root.refresh();
    if (u != null) {
      u.remove();
    }
    root.commit();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.user.action.PasswordChangeActionTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testSamePassword() throws Exception {
  User user=getTestUser();
  String pw=user.getID();
  pwChangeAction.onPasswordChange(user,pw,root,getNamePathMapper());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPasswordChange() throws Exception {
  pwChangeAction.onPasswordChange(getTestUser(),"changedPassword",root,getNamePathMapper());
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testNullPassword() throws Exception {
  pwChangeAction.onPasswordChange(getTestUser(),null,root,getNamePathMapper());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUserWithoutPassword() throws Exception {
  String uid="testUser" + UUID.randomUUID();
  User user=getUserManager(root).createUser(uid,null);
  try {
    pwChangeAction.onPasswordChange(user,"changedPassword",root,getNamePathMapper());
  }
  finally {
    user.remove();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.MoveDetectorTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Moving a transiently added node doesn't generate a move event
 * @throws CommitFailedException
 */
@Test public void moveAddedNode() throws CommitFailedException {
  NodeBuilder rootBuilder=root.builder();
  rootBuilder.getChildNode("test").setChildNode("added");
  NodeState moved=move(rootBuilder,"/test/added","/test/y/added").getNodeState();
  MoveExpectation moveExpectation=new MoveExpectation(ImmutableMap.<String,String>of());
  MoveDetector moveDetector=new MoveDetector(moveExpectation);
  CommitFailedException exception=EditorDiff.process(moveDetector,root,moved);
  if (exception != null) {
    throw exception;
  }
  moveExpectation.assertAllFound();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Moving a transiently added node from a moved subtree doesn't generate a move event.
 * @throws CommitFailedException
 */
@Test public void moveAddedFromMovedSubtree() throws CommitFailedException {
  NodeBuilder rootBuilder=root.builder();
  rootBuilder.getChildNode("test").getChildNode("z").setChildNode("added");
  move(rootBuilder,"/test/z","/test/y/z");
  NodeState moved=move(rootBuilder,"/test/y/z/added","/test/x/added").getNodeState();
  MoveExpectation moveExpectation=new MoveExpectation(ImmutableMap.of("/test/z","/test/y/z"));
  MoveDetector moveDetector=new MoveDetector(moveExpectation);
  CommitFailedException exception=EditorDiff.process(moveDetector,root,moved);
  if (exception != null) {
    throw exception;
  }
  moveExpectation.assertAllFound();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Moving a node from a moved subtree doesn't generate a move event.
 * @throws CommitFailedException
 */
@Test public void moveFromMovedSubtree() throws CommitFailedException {
  NodeBuilder rootBuilder=root.builder();
  move(rootBuilder,"/test/z","/test/y/z");
  NodeState moved=move(rootBuilder,"/test/y/z/zz","/test/x/zz").getNodeState();
  MoveExpectation moveExpectation=new MoveExpectation(ImmutableMap.of("/test/z","/test/y/z","/test/z/zz","/test/x/zz"));
  MoveDetector moveDetector=new MoveDetector(moveExpectation);
  CommitFailedException exception=EditorDiff.process(moveDetector,root,moved);
  if (exception != null) {
    throw exception;
  }
  moveExpectation.assertAllFound();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Moving a moved node is reported as a single move from the original source
 * to the final destination.
 * @throws CommitFailedException
 */
@Test public void moveMoved() throws CommitFailedException {
  NodeBuilder rootBuilder=root.builder();
  move(rootBuilder,"/test/x","/test/y/xx");
  NodeState moved=move(rootBuilder,"/test/y/xx","/test/z/xxx").getNodeState();
  MoveExpectation moveExpectation=new MoveExpectation(ImmutableMap.of("/test/x","/test/z/xxx"));
  MoveDetector moveDetector=new MoveDetector(moveExpectation);
  CommitFailedException exception=EditorDiff.process(moveDetector,root,moved);
  if (exception != null) {
    throw exception;
  }
  moveExpectation.assertAllFound();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test whether we can detect a single move
 * @throws CommitFailedException
 */
@Test public void simpleMove() throws CommitFailedException {
  NodeState moved1=move(root.builder(),"/test/x","/test/y/xx").getNodeState();
  MoveExpectation moveExpectation1=new MoveExpectation(ImmutableMap.of("/test/x","/test/y/xx"));
  MoveDetector moveDetector1=new MoveDetector(moveExpectation1);
  CommitFailedException exception1=EditorDiff.process(moveDetector1,root,moved1);
  if (exception1 != null) {
    throw exception1;
  }
  moveExpectation1.assertAllFound();
  NodeState moved2=move(moved1.builder(),"/test/y/xx","/test/x").getNodeState();
  MoveExpectation moveExpectation2=new MoveExpectation(ImmutableMap.of("/test/y/xx","/test/x"));
  MoveDetector moveDetector2=new MoveDetector(moveExpectation2);
  CommitFailedException exception2=EditorDiff.process(moveDetector2,moved1,moved2);
  if (exception2 != null) {
    throw exception2;
  }
  moveExpectation2.assertAllFound();
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Moving a node forth and back again should not generate a move event.
 * @throws CommitFailedException
 */
@Test public void moveForthAndBack() throws CommitFailedException {
  NodeBuilder rootBuilder=root.builder();
  move(rootBuilder,"/test/x","/test/y/xx");
  NodeState moved=move(rootBuilder,"/test/y/xx","/test/x").getNodeState();
  MoveExpectation moveExpectation=new MoveExpectation(ImmutableMap.<String,String>of());
  MoveDetector moveDetector=new MoveDetector(moveExpectation);
  CommitFailedException exception=EditorDiff.process(moveDetector,root,moved);
  if (exception != null) {
    throw exception;
  }
  moveExpectation.assertAllFound();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.NodeStoreTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void mergeNodeRoot() throws CommitFailedException {
  NodeBuilder x=store.getRoot().builder().getChildNode("x");
  store.merge(x,EmptyHook.INSTANCE,CommitInfo.EMPTY);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void oak965() throws CommitFailedException {
  NodeStore store1=init(fixture.createNodeStore());
  NodeStore store2=init(fixture.createNodeStore());
  try {
    NodeState tree1=store1.getRoot();
    NodeState tree2=store2.getRoot();
    tree1.equals(tree2);
  }
  finally {
    fixture.dispose(store1);
    fixture.dispose(store2);
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addExistingNodeJCRLastModified() throws CommitFailedException {
  CommitHook hook=new CompositeHook(new ConflictHook(JcrConflictHandler.createJcrConflictHandler()),new EditorHook(new ConflictValidatorProvider()));
  NodeBuilder b1=store.getRoot().builder();
  NodeBuilder b2=store.getRoot().builder();
  Calendar calendar=Calendar.getInstance();
  b1.setChildNode("addExistingNodeJCRLastModified").setProperty(JCR_LASTMODIFIED,calendar);
  calendar.add(Calendar.MINUTE,1);
  b2.setChildNode("addExistingNodeJCRLastModified").setProperty(JCR_LASTMODIFIED,calendar);
  b1.setChildNode("conflict");
  b2.setChildNode("conflict");
  store.merge(b1,hook,CommitInfo.EMPTY);
  store.merge(b2,hook,CommitInfo.EMPTY);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void compareAgainstBaseState100() throws CommitFailedException {
  compareAgainstBaseState(100);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addChangeChangedJCRLastModified() throws CommitFailedException {
  CommitHook hook=new CompositeHook(new ConflictHook(JcrConflictHandler.createJcrConflictHandler()),new EditorHook(new ConflictValidatorProvider()));
  NodeBuilder b=store.getRoot().builder();
  Calendar calendar=Calendar.getInstance();
  b.setChildNode("addExistingNodeJCRLastModified").setProperty(JCR_LASTMODIFIED,calendar);
  store.merge(b,hook,CommitInfo.EMPTY);
  NodeBuilder b1=store.getRoot().builder();
  NodeBuilder b2=store.getRoot().builder();
  calendar.add(Calendar.MINUTE,1);
  b1.setChildNode("addExistingNodeJCRLastModified").setProperty(JCR_LASTMODIFIED,calendar);
  calendar.add(Calendar.MINUTE,1);
  b2.setChildNode("addExistingNodeJCRLastModified").setProperty(JCR_LASTMODIFIED,calendar);
  b1.setChildNode("conflict");
  b2.setChildNode("conflict");
  store.merge(b1,hook,CommitInfo.EMPTY);
  store.merge(b2,hook,CommitInfo.EMPTY);
}

</code></pre>

<br>
<pre class="type-16 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addExistingNode() throws CommitFailedException {
  assumeTrue(fixture != NodeStoreFixtures.DOCUMENT_NS);
  assumeTrue(fixture != NodeStoreFixtures.DOCUMENT_RDB);
  CommitHook hook=new CompositeHook(new ConflictHook(JcrConflictHandler.createJcrConflictHandler()),new EditorHook(new ConflictValidatorProvider()));
  NodeBuilder b1=store.getRoot().builder();
  NodeBuilder b2=store.getRoot().builder();
  for (int k=0; k < 1002; k++) {
    b1.setChildNode("n" + k);
    b2.setChildNode("m" + k);
  }
  b1.setChildNode("conflict");
  b2.setChildNode("conflict");
  store.merge(b1,hook,CommitInfo.EMPTY);
  store.merge(b2,hook,CommitInfo.EMPTY);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void compareAgainstBaseState0() throws CommitFailedException {
  compareAgainstBaseState(0);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void compareAgainstBaseState20() throws CommitFailedException {
  compareAgainstBaseState(20);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.standalone.RepositoryBootIT </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void repositoryLogin() throws Exception {
  Session session=repository.login(new SimpleCredentials("admin","admin".toCharArray()));
  session.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.stats.ClockTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClockDriftSimple() throws InterruptedException {
  testClockDrift(Clock.SIMPLE);
}

</code></pre>

<br>
<pre class="type-10 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-3220") public void testClockDriftFast() throws InterruptedException {
  ScheduledExecutorService executor=Executors.newSingleThreadScheduledExecutor();
  try {
    testClockDrift(new Clock.Fast(executor));
  }
  finally {
    executor.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClockIncreasingAccurate() throws InterruptedException {
  testClockIncreasing(Clock.SIMPLE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClockIncreasingFast() throws InterruptedException {
  ScheduledExecutorService executor=Executors.newSingleThreadScheduledExecutor();
  try {
    testClockIncreasing(new Clock.Fast(executor));
  }
  finally {
    executor.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClockIncreasingSimple() throws InterruptedException {
  testClockIncreasing(Clock.SIMPLE);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClockDriftAccurate() throws InterruptedException {
  testClockDrift(Clock.ACCURATE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.stats.StatisticManagerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void setupWithCustom() throws Exception {
  Whiteboard wb=new DefaultWhiteboard();
  wb.register(StatisticsProvider.class,StatisticsProvider.NOOP,null);
  StatisticManager mgr=new StatisticManager(wb,executorService);
  MeterStats meterStats=mgr.getMeter(Type.QUERY_COUNT);
  meterStats.mark(5);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.CopyVersionHistoryTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void referencedOlderThanOrphaned() throws RepositoryException, IOException {
  Session session=performCopy(new VersionCopySetup(){
    @Override public void setup(    VersionCopyConfiguration config){
      config.setCopyOrphanedVersions(betweenHistories);
    }
  }
);
  assertExistingHistories(session,VERSIONABLES_OLD,VERSIONABLES_YOUNG,VERSIONABLES_YOUNG_ORPHANED);
  assertVersionablePaths(session,VERSIONABLES_OLD,VERSIONABLES_YOUNG);
  assertMissingHistories(session,VERSIONABLES_OLD_ORPHANED);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void dontCopyVersionHistory() throws RepositoryException, IOException {
  Session session=performCopy(new VersionCopySetup(){
    @Override public void setup(    VersionCopyConfiguration config){
      config.setCopyVersions(null);
      config.setCopyOrphanedVersions(null);
    }
  }
);
  assertMissingHistories(session,VERSIONABLES_OLD,VERSIONABLES_OLD_ORPHANED,VERSIONABLES_YOUNG,VERSIONABLES_YOUNG_ORPHANED);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void onlyReferencedAfterDate() throws RepositoryException, IOException {
  Session session=performCopy(new VersionCopySetup(){
    @Override public void setup(    VersionCopyConfiguration config){
      config.setCopyVersions(betweenHistories);
      config.setCopyOrphanedVersions(null);
    }
  }
);
  assertExistingHistories(session,VERSIONABLES_YOUNG);
  assertVersionablePaths(session,VERSIONABLES_YOUNG);
  assertMissingHistories(session,VERSIONABLES_OLD,VERSIONABLES_OLD_ORPHANED,VERSIONABLES_YOUNG_ORPHANED);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void copyAllVersions() throws RepositoryException, IOException {
  Session session=performCopy(new VersionCopySetup(){
    @Override public void setup(    VersionCopyConfiguration config){
    }
  }
);
  assertExistingHistories(session,VERSIONABLES_OLD,VERSIONABLES_OLD_ORPHANED,VERSIONABLES_YOUNG,VERSIONABLES_YOUNG_ORPHANED);
  assertVersionablePaths(session,VERSIONABLES_OLD,VERSIONABLES_YOUNG);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void overrideOrphaned() throws RepositoryException, IOException {
  Session session=performCopy(new VersionCopySetup(){
    @Override public void setup(    VersionCopyConfiguration config){
      config.setCopyVersions(null);
      config.setCopyOrphanedVersions(betweenHistories);
    }
  }
);
  assertMissingHistories(session,VERSIONABLES_OLD,VERSIONABLES_OLD_ORPHANED,VERSIONABLES_YOUNG,VERSIONABLES_YOUNG_ORPHANED);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void referencedSinceDate() throws RepositoryException, IOException {
  Session session=performCopy(new VersionCopySetup(){
    @Override public void setup(    VersionCopyConfiguration config){
      config.setCopyVersions(betweenHistories);
    }
  }
);
  assertExistingHistories(session,VERSIONABLES_YOUNG,VERSIONABLES_YOUNG_ORPHANED);
  assertVersionablePaths(session,VERSIONABLES_YOUNG);
  assertMissingHistories(session,VERSIONABLES_OLD,VERSIONABLES_OLD_ORPHANED);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void onlyReferenced() throws RepositoryException, IOException {
  Session session=performCopy(new VersionCopySetup(){
    @Override public void setup(    VersionCopyConfiguration config){
      config.setCopyOrphanedVersions(null);
    }
  }
);
  assertExistingHistories(session,VERSIONABLES_OLD,VERSIONABLES_YOUNG);
  assertVersionablePaths(session,VERSIONABLES_OLD,VERSIONABLES_YOUNG);
  ;
  assertMissingHistories(session,VERSIONABLES_OLD_ORPHANED,VERSIONABLES_YOUNG_ORPHANED);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.IncludeExcludeUpgradeTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldLackPathsThatWereNotIncluded() throws RepositoryException {
  assertMissing("/content/foo/de","/content/foo/fr","/content/foo/it");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldLackExcludedPaths() throws RepositoryException {
  assertMissing("/content/assets/foo/2013","/content/assets/foo/2012","/content/assets/foo/2011","/content/assets/foo/2010");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldHaveIncludedPaths() throws RepositoryException {
  assertExisting("/content/foo/en","/content/assets/foo/2015/02","/content/assets/foo/2015/01","/content/assets/foo/2014");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.LongNameTest </h4><pre class="type-11 type-10 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test(expected=RepositoryException.class) @Ignore public void longNameOnDocumentStoreThrowsAnException() throws RepositoryException, IOException {
  DocumentNodeStore nodeStore=new DocumentMK.Builder().getNodeStore();
  try {
    upgrade(nodeStore,false);
  }
  finally {
    nodeStore.dispose();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.RepeatedRepositoryUpgradeTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldReflectSourceAfterModifications() throws Exception {
  assertExisting("/","/content","/content/child2","/content/child2/grandchild1","/content/child2/grandchild2","/content/child2/grandchild3","/content/child3");
  assertMissing("/content/child1");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldContainCustomInitializerContent() throws Exception {
  assertExisting("/foo","/foo/bar");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldContainUpgradeInitializedContent() throws Exception {
  assertExisting("/rep:security","/oak:index");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.TickerTest </h4><pre class="type-17 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimple() throws Exception {
  ProgressTicker ticker=new SimpleTicker(50);
  for (int i=0; i < 200; i++) {
    System.out.println(ticker.tick());
  }
}

</code></pre>

<br>
<pre class="type-17 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAscii() throws Exception {
  ProgressTicker ticker=new AsciiArtTicker();
  for (int i=0; i < 200; i++) {
    System.out.println(ticker.tick());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.UpgradeFromTwoSourcesTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldContainNodesFromBothSources() throws Exception {
  assertExisting("/","/left","/left/child1","/left/child2","/left/child3","/left/child1/grandchild1","/left/child1/grandchild2","/left/child1/grandchild3","/left/child2/grandchild2","/left/child2/grandchild3","/right","/right/child1","/right/child1/grandchild1","/right/child1/grandchild2");
  assertMissing("/left/child2/grandchild1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.cli.AbstractOak2OakTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void validateMigration() throws RepositoryException, IOException {
  verifyContent(session);
  verifyBlob(session);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.cli.Jcr2ToSegmentTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void validateMigration() throws RepositoryException, IOException {
  AbstractOak2OakTest.verifyContent(session);
  AbstractOak2OakTest.verifyBlob(session);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.nodestate.FilteringNodeStateTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldHideMissingIncludedPathsViaGetChildNodeNames(){
  final NodeState decorated=wrap("/",rootNodeState,of("/content"),null);
  assertExistingChildNodeName(decorated,"content");
  assertMissingChildNodeName(decorated,"apps");
  assertMissingChildNodeName(decorated,"libs");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldHideMissingIncludedPathsViaHasChildNode(){
  final NodeState decorated=wrap("/",rootNodeState,of("/content"),null);
  assertExistingHasChildNode(decorated,"content");
  assertMissingHasChildNode(decorated,"apps");
  assertMissingHasChildNode(decorated,"libs");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldRespectPathBoundariesForExcludes(){
  final NodeState decorated=wrap("/",rootNodeState,null,of("/content/foo"));
  assertExistingChildNodeName(decorated,"content");
  assertMissingChildNodeName(decorated.getChildNode("content"),"foo");
  assertExistingChildNodeName(decorated.getChildNode("content"),"football");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldRespectPathBoundariesForIncludes(){
  final NodeState decorated=wrap("/",rootNodeState,of("/content/foo"),null);
  assertExistingChildNodeName(decorated,"content");
  assertExistingChildNodeName(decorated.getChildNode("content"),"foo");
  assertMissingChildNodeName(decorated.getChildNode("content"),"football");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldHideExcludedPathsViaExists(){
  final NodeState decorated=wrap("/",rootNodeState,null,of("/apps","/libs"));
  assertMissing(decorated,"apps");
  assertMissing(decorated,"libs/foo/install");
  assertExists(decorated,"content/foo/de");
  assertExists(decorated,"content/foo/en");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldGivePrecedenceForExcludesOverIncludes(){
  final NodeState conflictingRules=wrap("/",rootNodeState,of("/content"),of("/content"));
  assertMissingChildNodeName(conflictingRules,"content");
  final NodeState overlappingRules=wrap("/",rootNodeState,of("/content"),of("/content/foo"));
  assertExistingChildNodeName(overlappingRules,"content");
  assertMissingChildNodeName(overlappingRules.getChildNode("content"),"foo");
  final NodeState overlappingRules2=wrap("/",rootNodeState,of("/content/foo"),of("/content"));
  assertMissingChildNodeName(overlappingRules2,"content");
  assertMissingChildNodeName(overlappingRules2.getChildNode("content"),"foo");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldHideExcludedPathsViaHasChildNode(){
  final NodeState decorated=wrap("/",rootNodeState,null,of("/apps","/libs"));
  assertExistingHasChildNode(decorated,"content");
  assertMissingHasChildNode(decorated,"apps");
  assertMissingHasChildNode(decorated,"libs");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldHideExcludedPathsViaGetChildNodeNames(){
  final NodeState decorated=wrap("/",rootNodeState,null,of("/apps","/libs"));
  assertExistingChildNodeName(decorated,"content");
  assertMissingChildNodeName(decorated,"apps");
  assertMissingChildNodeName(decorated,"libs");
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldHideMissingIncludedPathsViaExists(){
  final NodeState decorated=wrap("/",rootNodeState,of("/content"),null);
  assertMissing(decorated,"apps");
  assertMissing(decorated,"libs/foo/install");
  assertExists(decorated,"content/foo/de");
  assertExists(decorated,"content/foo/en");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.nodestate.NodeStateCopierTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldIncludeMultiplePaths() throws CommitFailedException, IOException {
  final NodeStore source=createPrefilledNodeStore();
  final NodeStore target=createNodeStoreWithContent();
  builder().include("/a/b/c/d","/a/b/c/e").copy(source,target);
  expectDifference().propertyDeleted("/a/b/c/f/jcr:primaryType").childNodeChanged("/a","/a/b","/a/b/c").childNodeDeleted("/excluded","/a/b/excluded","/a/b/c/f").strict().verify(source.getRoot(),target.getRoot());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldNotDeleteExistingNodesIfMerged() throws CommitFailedException, IOException {
  final NodeStore source=createNodeStoreWithContent("/content/foo");
  final NodeStore target=createNodeStoreWithContent("/content/bar");
  final NodeState before=target.getRoot();
  builder().merge("/content/bar").copy(source,target);
  final NodeState after=target.getRoot();
  expectDifference().strict().childNodeAdded("/content/foo").childNodeChanged("/content").verify(before,after);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldNotDeleteExistingNodesIfDescendantsOfMerged() throws CommitFailedException, IOException {
  final NodeStore source=createNodeStoreWithContent("/content/foo");
  final NodeStore target=createNodeStoreWithContent("/content/bar");
  final NodeState before=target.getRoot();
  builder().merge("/content").copy(source,target);
  final NodeState after=target.getRoot();
  expectDifference().strict().childNodeAdded("/content/foo").childNodeChanged("/content").verify(before,after);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldCreateMissingAncestors() throws CommitFailedException, IOException {
  final NodeStore source=createPrefilledNodeStore();
  final NodeStore target=createNodeStoreWithContent();
  builder().include("/a/b/c").copy(source,target);
  expectDifference().childNodeChanged("/a","/a/b").childNodeDeleted("/excluded","/a/b/excluded").strict().verify(source.getRoot(),target.getRoot());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldIgnoreNonMatchingMergePaths() throws CommitFailedException, IOException {
  final NodeStore source=createNodeStoreWithContent("/content/foo");
  final NodeStore target=createNodeStoreWithContent("/content/bar");
  final NodeState before=target.getRoot();
  builder().merge("/con").copy(source,target);
  final NodeState after=target.getRoot();
  expectDifference().strict().childNodeAdded("/content/foo").childNodeChanged("/content").childNodeDeleted("/content/bar").verify(before,after);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldMergeIdenticalContent() throws CommitFailedException, IOException {
  final NodeStore source=createPrefilledNodeStore();
  final NodeStore target=createPrefilledNodeStore();
  final NodeState before=target.getRoot();
  NodeStateCopier.copyNodeStore(source,target);
  final NodeState after=target.getRoot();
  expectDifference().strict().verify(before,after);
  expectDifference().strict().verify(source.getRoot(),after);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldNotDeleteMergedExcludedPaths() throws CommitFailedException, IOException {
  final NodeStore source=createNodeStoreWithContent("/content/foo/en","/jcr:system");
  final NodeStore target=createNodeStoreWithContent("/jcr:system/jcr:versionStorage");
  final NodeState before=target.getRoot();
  builder().merge("/jcr:system").exclude("/jcr:system").copy(source,target);
  final NodeState after=target.getRoot();
  expectDifference().strict().childNodeAdded("/content","/content/foo","/content/foo/en").verify(before,after);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldRespectMergePaths() throws CommitFailedException, IOException {
  final NodeStore source=createNodeStoreWithContent("/content/foo/en","/content/bar/en");
  final NodeStore target=createNodeStoreWithContent("/content/foo/de");
  builder().merge("/content").copy(source,target);
  final NodeState after=target.getRoot();
  expectDifference().strict().childNodeAdded("/content/foo/de").childNodeChanged("/content","/content/foo").verify(source.getRoot(),after);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldSkipNonMatchingIncludes() throws CommitFailedException, IOException {
  final NodeStore source=createNodeStoreWithContent();
  final NodeBuilder builder=source.getRoot().builder();
  create(builder,"/a",primaryType);
  create(builder,"/a/b",primaryType);
  create(builder,"/a/b/c",primaryType);
  commit(source,builder);
  final NodeStore target=createNodeStoreWithContent();
  builder().include("/a","/z").copy(source,target);
  expectDifference().strict().verify(source.getRoot(),target.getRoot());
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldCopyFromMultipleSources() throws CommitFailedException, IOException {
  final NodeStore source1=createNodeStoreWithContent("/content/foo/en","/content/foo/de");
  final NodeStore source2=createNodeStoreWithContent("/content/bar/en","/content/bar/de","/content/baz/en");
  final NodeStore target=createNodeStoreWithContent();
  final NodeState before=target.getRoot();
  builder().include("/content/foo").copy(source1,target);
  builder().include("/content/bar").exclude("/content/bar/de").copy(source2,target);
  final NodeState after=target.getRoot();
  expectDifference().strict().childNodeAdded("/content","/content/foo","/content/foo/en","/content/foo/de","/content/bar","/content/bar/en").verify(before,after);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldDeleteExistingPropertyIfMissingInSource() throws CommitFailedException, IOException {
  final NodeStore source=createNodeStoreWithContent("/a");
  final NodeStore target=createNodeStoreWithContent();
  final NodeBuilder builder=target.getRoot().builder();
  create(builder,"/a",primaryType);
  commit(target,builder);
  final NodeState before=target.getRoot();
  builder().copy(source,target);
  final NodeState after=target.getRoot();
  expectDifference().strict().propertyDeleted("/a/jcr:primaryType").childNodeChanged("/a").verify(before,after);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldDeleteExistingNodes() throws CommitFailedException, IOException {
  final NodeStore source=createNodeStoreWithContent("/content/foo");
  final NodeStore target=createNodeStoreWithContent("/content/bar");
  final NodeState before=target.getRoot();
  builder().copy(source,target);
  final NodeState after=target.getRoot();
  expectDifference().strict().childNodeAdded("/content/foo").childNodeChanged("/content").childNodeDeleted("/content/bar").verify(before,after);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.util.AggregatingDescriptorsTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLaterAddedDescriptors() throws Exception {
  final ValueFactory valueFactory=new SimpleValueFactory();
  final MyTracker<Descriptors> tracker=createTracker();
  AggregatingDescriptors aggregator=new AggregatingDescriptors(tracker);
  assertMatches(aggregator,0);
  final GenericDescriptors input1=new GenericDescriptors();
  input1.put("a",valueFactory.createValue("b"),true,false);
  input1.put("b",valueFactory.createValue("c"),true,true);
  tracker.addService(input1);
  assertMatches(aggregator,2,input1);
  final GenericDescriptors input2=new GenericDescriptors();
  input2.put("b",valueFactory.createValue("c2"),true,true);
  input2.put("c",valueFactory.createValue("d"),true,true);
  tracker.addService(input2);
  assertMatches(aggregator,3,input2,input1);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInitialDescriptors() throws Exception {
  final ValueFactory valueFactory=new SimpleValueFactory();
  final MyTracker<Descriptors> tracker=createTracker();
  final GenericDescriptors input=new GenericDescriptors();
  input.put("a",valueFactory.createValue("b"),true,false);
  input.put("b",valueFactory.createValue("c"),true,true);
  tracker.addService(input);
  AggregatingDescriptors aggregator=new AggregatingDescriptors(tracker);
  assertMatches(aggregator,2,input);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEmptyServices() throws Exception {
  final MyTracker<Descriptors> tracker=createTracker();
  AggregatingDescriptors aggregator=new AggregatingDescriptors(tracker);
  tracker.setServices(new LinkedList<Descriptors>());
  assertEmpty(aggregator);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.util.PerfLoggerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEndSkipsIsDebugEnabled(){
  Logger logger=Mockito.mock(Logger.class);
  when(logger.isTraceEnabled()).thenReturn(false);
  when(logger.isDebugEnabled()).thenReturn(false);
  PerfLogger perfLogger=new PerfLogger(logger);
  long start=perfLogger.start();
  perfLogger.end(start,-1,"message","argument");
  verify(logger,never()).isTraceEnabled();
  verify(logger,times(1)).isDebugEnabled();
  verifyNoMoreInteractions(logger);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEndDebug(){
  Logger logger=Mockito.mock(Logger.class);
  when(logger.isTraceEnabled()).thenReturn(false);
  when(logger.isDebugEnabled()).thenReturn(true);
  PerfLogger perfLogger=new PerfLogger(logger);
  long start=perfLogger.start();
  perfLogger.end(start,-1,"message","argument");
  verify(logger,atLeastOnce()).isTraceEnabled();
  verify(logger,atLeastOnce()).isDebugEnabled();
  verify(logger,times(1)).debug(anyString(),any(Object[].class));
  verifyNoMoreInteractions(logger);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
