<h3><span class=" glyphicon glyphicon-tag"/>&nbspInternalCallVerifier</h3><kbd>Verifies values of objects/variables related to AUT calls</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.james.adapter.mailbox.MailboxManagementTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createMailboxShouldNotThrowIfMailboxAlreadyExist() throws Exception {
  MailboxPath path=new MailboxPath(MailboxConstants.USER_NAMESPACE,USER,"name");
  Mailbox<InMemoryId> mailbox=new SimpleMailbox<InMemoryId>(path,UID_VALIDITY);
  inMemoryMapperFactory.createMailboxMapper(session).save(mailbox);
  mailboxManagerManagement.createMailbox(MailboxConstants.USER_NAMESPACE,USER,"name");
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).containsExactly(mailbox);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void deleteMailboxShouldDeleteGivenMailbox() throws Exception {
  inMemoryMapperFactory.createMailboxMapper(session).save(new SimpleMailbox<InMemoryId>(new MailboxPath(MailboxConstants.USER_NAMESPACE,USER,"name"),UID_VALIDITY));
  mailboxManagerManagement.deleteMailbox(MailboxConstants.USER_NAMESPACE,USER,"name");
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).isEmpty();
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void deleteMailboxesShouldDeleteInbox() throws Exception {
  inMemoryMapperFactory.createMailboxMapper(session).save(new SimpleMailbox<InMemoryId>(new MailboxPath(MailboxConstants.USER_NAMESPACE,USER,"INBOX"),UID_VALIDITY));
  mailboxManagerManagement.deleteMailboxes(USER);
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).isEmpty();
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void deleteMailboxesShouldDeleteMultipleMailboxes() throws Exception {
  inMemoryMapperFactory.createMailboxMapper(session).save(new SimpleMailbox<InMemoryId>(new MailboxPath(MailboxConstants.USER_NAMESPACE,USER,"name"),UID_VALIDITY));
  inMemoryMapperFactory.createMailboxMapper(session).save(new SimpleMailbox<InMemoryId>(new MailboxPath(MailboxConstants.USER_NAMESPACE,USER,"INBOX"),UID_VALIDITY));
  inMemoryMapperFactory.createMailboxMapper(session).save(new SimpleMailbox<InMemoryId>(new MailboxPath(MailboxConstants.USER_NAMESPACE,USER,"INBOX.test"),UID_VALIDITY));
  mailboxManagerManagement.deleteMailboxes(USER);
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).isEmpty();
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void deleteMailboxesShouldDeleteMailboxesWithEmptyNames() throws Exception {
  inMemoryMapperFactory.createMailboxMapper(session).save(new SimpleMailbox<InMemoryId>(new MailboxPath(MailboxConstants.USER_NAMESPACE,USER,""),UID_VALIDITY));
  mailboxManagerManagement.deleteMailboxes(USER);
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).isEmpty();
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void deleteMailboxShouldNotDeleteGivenMailboxIfWrongNamespace() throws Exception {
  Mailbox<InMemoryId> mailbox=new SimpleMailbox<InMemoryId>(new MailboxPath("#top",USER,"name"),UID_VALIDITY);
  inMemoryMapperFactory.createMailboxMapper(session).save(mailbox);
  mailboxManagerManagement.deleteMailbox(MailboxConstants.USER_NAMESPACE,USER,"name");
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).containsOnly(mailbox);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void deleteMailboxShouldNotDeleteGivenMailboxIfWrongName() throws Exception {
  Mailbox<InMemoryId> mailbox=new SimpleMailbox<InMemoryId>(new MailboxPath(MailboxConstants.USER_NAMESPACE,USER,"wrong_name"),UID_VALIDITY);
  inMemoryMapperFactory.createMailboxMapper(session).save(mailbox);
  mailboxManagerManagement.deleteMailbox(MailboxConstants.USER_NAMESPACE,USER,"name");
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).containsOnly(mailbox);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void deleteMailboxesShouldDeleteMailboxes() throws Exception {
  inMemoryMapperFactory.createMailboxMapper(session).save(new SimpleMailbox<InMemoryId>(new MailboxPath(MailboxConstants.USER_NAMESPACE,USER,"name"),UID_VALIDITY));
  mailboxManagerManagement.deleteMailboxes(USER);
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).isEmpty();
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void deleteMailboxesShouldNotDeleteMailboxesBelongingToNotPrivateNamespace() throws Exception {
  Mailbox<InMemoryId> mailbox=new SimpleMailbox<InMemoryId>(new MailboxPath("#top",USER,"name"),UID_VALIDITY);
  inMemoryMapperFactory.createMailboxMapper(session).save(mailbox);
  mailboxManagerManagement.deleteMailboxes(USER);
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).containsExactly(mailbox);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void deleteMailboxesShouldDeleteMailboxesChildren() throws Exception {
  inMemoryMapperFactory.createMailboxMapper(session).save(new SimpleMailbox<InMemoryId>(new MailboxPath(MailboxConstants.USER_NAMESPACE,USER,"INBOX.test"),UID_VALIDITY));
  mailboxManagerManagement.deleteMailboxes(USER);
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).isEmpty();
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void deleteMailboxShouldNotDeleteGivenMailboxIfWrongUser() throws Exception {
  Mailbox<InMemoryId> mailbox=new SimpleMailbox<InMemoryId>(new MailboxPath(MailboxConstants.USER_NAMESPACE,"userbis","name"),UID_VALIDITY);
  inMemoryMapperFactory.createMailboxMapper(session).save(mailbox);
  mailboxManagerManagement.deleteMailbox(MailboxConstants.USER_NAMESPACE,USER,"name");
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).containsOnly(mailbox);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void deleteMailboxesShouldNotDeleteMailboxesBelongingToOtherUsers() throws Exception {
  Mailbox<InMemoryId> mailbox=new SimpleMailbox<InMemoryId>(new MailboxPath(MailboxConstants.USER_NAMESPACE,"userbis","name"),UID_VALIDITY);
  inMemoryMapperFactory.createMailboxMapper(session).save(mailbox);
  mailboxManagerManagement.deleteMailboxes(USER);
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).containsExactly(mailbox);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createMailboxShouldCreateAMailbox() throws Exception {
  mailboxManagerManagement.createMailbox(MailboxConstants.USER_NAMESPACE,USER,"name");
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).list()).hasSize(1);
  assertThat(inMemoryMapperFactory.createMailboxMapper(session).findMailboxByPath(new MailboxPath(MailboxConstants.USER_NAMESPACE,USER,"name"))).isNotNull();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.core.MailHeadersTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHeadersOrder() throws MessagingException {
  MailHeaders header=new MailHeaders(new ByteArrayInputStream((RFC2822Headers.SUBJECT + ": testsubject\r\n").getBytes()));
  header.setHeader(RFC2822Headers.RETURN_PATH,"<test@test>");
  header.setHeader(RFC2822Headers.FROM,"<test2@test.de>");
  Enumeration h=header.getAllHeaderLines();
  assertEquals(h.nextElement(),"Return-Path: <test@test>");
  assertEquals(h.nextElement(),"From: <test2@test.de>");
  assertEquals(h.nextElement(),"Subject: testsubject");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.core.MailImplTest </h4><pre class="type-1 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testDuplicate() throws MessagingException {
  MailImpl mail=new MailImpl();
  MailImpl duplicate=(MailImpl)mail.duplicate();
  assertNotSame("is real duplicate",mail,duplicate);
  helperTestInitialState(duplicate);
  helperTestMessageSize(duplicate,0);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstr3() throws MessagingException {
  ArrayList recepients=new ArrayList();
  String name=MailUtil.newId();
  String sender="sender@localhost";
  MailAddress senderMailAddress=new MailAddress(sender);
  FakeMimeMessage mimeMessage=new FakeMimeMessage();
  MailImpl mail=new MailImpl(name,senderMailAddress,recepients,mimeMessage);
  helperTestInitialState(mail);
  helperTestMessageSize(mail,0);
  assertEquals("initial message",mimeMessage.getMessageID(),mail.getMessage().getMessageID());
  assertEquals("sender",sender,mail.getSender().toString());
  assertEquals("name",name,mail.getName());
  mail.dispose();
}

</code></pre>

<br>
<pre class="type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstr2() throws MessagingException {
  ArrayList recepients=new ArrayList();
  String name=MailUtil.newId();
  String sender="sender@localhost";
  MailAddress senderMailAddress=new MailAddress(sender);
  MailImpl mail=new MailImpl(name,senderMailAddress,recepients);
  helperTestInitialState(mail);
  helperTestMessageSize(mail,0);
  assertNull("no initial message",mail.getMessage());
  assertEquals("sender",sender,mail.getSender().toString());
  assertEquals("name",name,mail.getName());
  mail.setMessage(new FakeMimeMessage());
  assertNotNull("message",mail.getMessage());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDuplicateNewName() throws MessagingException {
  String newName="aNewName";
  MailImpl mail=new MailImpl();
  assertFalse("before + after names differ",newName.equals(mail.getName()));
  MailImpl duplicate=(MailImpl)mail.duplicate(newName);
  assertEquals("new name set",newName,duplicate.getName());
  helperTestInitialState(duplicate);
  helperTestMessageSize(duplicate,0);
}

</code></pre>

<br>
<pre class="type-1 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testConstr1() throws MessagingException {
  MailImpl mail=new MailImpl();
  helperTestInitialState(mail);
  helperTestMessageSize(mail,0);
  assertNull("no initial message",mail.getMessage());
  assertNull("no initial sender",mail.getSender());
  assertNull("no initial name",mail.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.core.MailTestAllImplementations </h4><pre class="type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAttributes(){
  Mail mail=createMailImplementation();
  assertFalse("no initial attributes",mail.hasAttributes());
  assertFalse("attributes initially empty",mail.getAttributeNames().hasNext());
  assertNull("not found on emtpy list",mail.getAttribute("test"));
  assertNull("no previous item with key",mail.setAttribute("testKey","testValue"));
  assertEquals("item found","testValue",mail.getAttribute("testKey"));
  assertTrue("has attribute",mail.hasAttributes());
  assertEquals("item removed","testValue",mail.removeAttribute("testKey"));
  assertNull("item no longer found",mail.getAttribute("testKey"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.core.MimeMessageCopyOnWriteProxyTest </h4><pre class="type-13 type-1 type-11 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMessageCloning2() throws Exception {
  ArrayList r=new ArrayList();
  r.add(new MailAddress("recipient@test.com"));
  MimeMessageCopyOnWriteProxy messageFromSources=(MimeMessageCopyOnWriteProxy)getMessageFromSources(content + sep + body);
  MailImpl mail=new MailImpl("test",new MailAddress("test@test.com"),r,messageFromSources);
  MailImpl m2=(MailImpl)mail.duplicate();
  System.out.println("mail: " + getReferences(mail.getMessage()) + " m2: "+ getReferences(m2.getMessage()));
  assertNotSame(m2,mail);
  assertNotSame(m2.getMessage(),mail.getMessage());
  assertTrue(isSameMimeMessage(m2.getMessage(),mail.getMessage()));
  m2.getMessage().getSubject();
  assertTrue(isSameMimeMessage(m2.getMessage(),mail.getMessage()));
  m2.getMessage().setText("new body");
  m2.getMessage().saveChanges();
  m2.getMessage().setSubject("new Subject");
  assertTrue(!isSameMimeMessage(m2.getMessage(),mail.getMessage()));
  assertEquals(m2.getMessage().getSubject(),"new Subject");
  assertEquals(mail.getMessage().getSubject(),"foo");
  Mail m2clone=m2.duplicate();
  assertTrue(isSameMimeMessage(m2clone.getMessage(),m2.getMessage()));
  MimeMessage mm=getWrappedMessage(m2.getMessage());
  assertNotSame(m2.getMessage(),m2clone.getMessage());
  MimeMessage mm3=getWrappedMessage(m2clone.getMessage());
  assertNotNull(mm3);
  LifecycleUtil.dispose(m2);
  assertEquals(mm3,getWrappedMessage(m2clone.getMessage()));
  m2clone.getMessage().setSubject("new Subject 2");
  m2clone.getMessage().setText("new Body 3");
  assertTrue(isSameMimeMessage(m2clone.getMessage(),mm));
  LifecycleUtil.dispose(mail);
  LifecycleUtil.dispose(messageFromSources);
}

</code></pre>

<br>
<pre class="type-13 type-1 type-11 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMessageCloning1() throws Exception {
  ArrayList r=new ArrayList();
  r.add(new MailAddress("recipient@test.com"));
  MimeMessageCopyOnWriteProxy messageFromSources=(MimeMessageCopyOnWriteProxy)getMessageFromSources(content + sep + body);
  MailImpl mail=new MailImpl("test",new MailAddress("test@test.com"),r,messageFromSources);
  MailImpl m2=(MailImpl)mail.duplicate();
  System.out.println("mail: " + getReferences(mail.getMessage()) + " m2: "+ getReferences(m2.getMessage()));
  assertNotSame(m2,mail);
  assertNotSame(m2.getMessage(),mail.getMessage());
  assertTrue(isSameMimeMessage(m2.getMessage(),mail.getMessage()));
  mail.getMessage().getSubject();
  assertTrue(isSameMimeMessage(m2.getMessage(),mail.getMessage()));
  mail.getMessage().setText("new body");
  mail.getMessage().saveChanges();
  mail.getMessage().setSubject("new Subject");
  assertTrue(!isSameMimeMessage(m2.getMessage(),mail.getMessage()));
  LifecycleUtil.dispose(mail);
  LifecycleUtil.dispose(m2);
  LifecycleUtil.dispose(messageFromSources);
}

</code></pre>

<br>
<pre class="type-1 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testMessageDisposing() throws Exception {
  ArrayList r=new ArrayList();
  r.add(new MailAddress("recipient@test.com"));
  MimeMessageCopyOnWriteProxy messageFromSources=(MimeMessageCopyOnWriteProxy)getMessageFromSources(content + sep + body);
  MailImpl mail=new MailImpl("test",new MailAddress("test@test.com"),r,messageFromSources);
  MailImpl mailClone=(MailImpl)mail.duplicate();
  LifecycleUtil.dispose(mail);
  assertNotNull(getWrappedMessage(mailClone.getMessage()));
  assertNull(mail.getMessage());
  LifecycleUtil.dispose(mailClone);
  assertNull(mailClone.getMessage());
  assertNull(mail.getMessage());
  LifecycleUtil.dispose(mail);
  LifecycleUtil.dispose(messageFromSources);
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * If I create a new MimeMessageCopyOnWriteProxy from a MimeMessage and I
 * change the new message, the original should be unaltered and the proxy
 * should clone the message.
 */
@Test public void testMessageCloning3() throws Exception {
  ArrayList r=new ArrayList();
  r.add(new MailAddress("recipient@test.com"));
  MimeMessage m=new MimeMessage(Session.getDefaultInstance(new Properties(null)));
  m.setText("CIPS");
  MailImpl mail=new MailImpl("test",new MailAddress("test@test.com"),r,m);
  assertTrue(isSameMimeMessage(m,mail.getMessage()));
  System.gc();
  Thread.sleep(100);
  mail.getMessage().setSubject("new Subject 2");
  mail.getMessage().setText("new Body 3");
  System.gc();
  Thread.sleep(100);
  assertFalse(isSameMimeMessage(m,mail.getMessage()));
  LifecycleUtil.dispose(mail);
  LifecycleUtil.dispose(m);
}

</code></pre>

<br>
<pre class="type-13 type-1 type-11 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * If I create a new MimeMessageCopyOnWriteProxy from another
 * MimeMessageCopyOnWriteProxy, I remove references to the first and I
 * change the second, then it should not clone
 */
@Test public void testMessageAvoidCloning() throws Exception {
  ArrayList r=new ArrayList();
  r.add(new MailAddress("recipient@test.com"));
  MimeMessageCopyOnWriteProxy messageFromSources=(MimeMessageCopyOnWriteProxy)getMessageFromSources(content + sep + body);
  MailImpl mail=new MailImpl("test",new MailAddress("test@test.com"),r,messageFromSources);
  Mail mailClone=mail.duplicate();
  assertTrue(isSameMimeMessage(mailClone.getMessage(),mail.getMessage()));
  MimeMessage mm=getWrappedMessage(mail.getMessage());
  assertNotSame(mail.getMessage(),mailClone.getMessage());
  LifecycleUtil.dispose(mail);
  LifecycleUtil.dispose(messageFromSources);
  System.gc();
  Thread.sleep(1000);
  assertTrue(isSameMimeMessage(mailClone.getMessage(),mailClone.getMessage()));
  mailClone.getMessage().setSubject("new Subject 2");
  mailClone.getMessage().setText("new Body 3");
  assertTrue(isSameMimeMessage(mailClone.getMessage(),mm));
  LifecycleUtil.dispose(mailClone);
  LifecycleUtil.dispose(mm);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.core.MimeMessageTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * This test throw a NullPointerException when the original message was
 * created by a MimeMessageInputStreamSource.
 */
@Test public void testMessageCloningViaCoWSubjectLost() throws Exception {
  MimeMessage mmorig=getSimpleMessage();
  MimeMessage mm=new MimeMessageCopyOnWriteProxy(mmorig);
  mm.setHeader("X-Test","foo");
  mm.saveChanges();
  assertEquals(getSimpleMessageCleanedSourceHeaderExpected(),getCleanedMessageSource(mm));
  LifecycleUtil.dispose(mm);
  LifecycleUtil.dispose(mmorig);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultipartMessageChanges() throws Exception {
  MimeMessage mm=getMultipartMessage();
  MimeMultipart content1=(MimeMultipart)mm.getContent();
  BodyPart b1=content1.getBodyPart(0);
  b1.setContent("test\u20AC","text/plain; charset=Cp1252");
  mm.setContent(content1,mm.getContentType());
  mm.saveChanges();
  assertEquals(getMultipartMessageExpected1(),getCleanedMessageSource(mm));
  MimeMultipart content2=(MimeMultipart)mm.getContent();
  content2.addBodyPart(new MimeBodyPart(new InternetHeaders(new ByteArrayInputStream("Subject: test3\r\n".getBytes())),"third part".getBytes()));
  mm.setContent(content2,mm.getContentType());
  mm.saveChanges();
  assertEquals(getMultipartMessageExpected2(),getCleanedMessageSource(mm));
  mm.setContent("mynewco\u00F2\u00E0\u00F9ntent\u20AC\u00E0!","text/plain; charset=cp1252");
  mm.setHeader(RFC2822Headers.CONTENT_TYPE,"binary/octet-stream");
  mm.saveChanges();
  assertEquals(getMultipartMessageExpected3(),getCleanedMessageSource(mm));
  LifecycleUtil.dispose(mm);
}

</code></pre>

<br>
<pre class="type-9 type-13 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetLineCount() throws Exception {
  MimeMessage mm=getMissingEncodingMessage();
  try {
    int count=mm.getLineCount();
    assertTrue(count == -1 || count == 7);
  }
 catch (  Exception e) {
    fail("Unexpected exception in getLineCount");
  }
  LifecycleUtil.dispose(mm);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHeaderOrder() throws Exception {
  MimeMessage message=getSimpleMessage();
  message.setHeader(RFC2822Headers.RETURN_PATH,"<test@test.de>");
  Enumeration h=message.getAllHeaderLines();
  assertEquals(h.nextElement(),"Return-Path: <test@test.de>");
  LifecycleUtil.dispose(message);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.core.MimeMessageWrapperTest </h4><pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeferredMessageLoading() throws MessagingException, IOException {
  assertEquals("foo",mw.getSubject());
  assertFalse(mw.messageParsed());
  assertEquals("bar\r\n",mw.getContent());
  assertTrue(mw.messageParsed());
  assertFalse(mw.isModified());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddReturnPathOnBadMessage() throws Exception {
  MimeMessage message=getMessageWithBadReturnPath();
  message.addHeader(RFC2822Headers.RETURN_PATH,"<test@test.de>");
  Enumeration e=message.getMatchingHeaderLines(new String[]{"Return-Path"});
  assertEquals("Return-Path: <test@test.de>",e.nextElement());
  assertEquals("Return-Path: <mybadreturn@example.com>",e.nextElement());
  Enumeration h=message.getAllHeaderLines();
  assertEquals("Return-Path: <test@test.de>",h.nextElement());
  LifecycleUtil.dispose(message);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSizeModifiedBodyWithSave() throws MessagingException {
  String newBody="This is the new body of the message";
  mw.setText(newBody);
  mw.saveChanges();
  assertEquals(body.length(),mw.getSize());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for JAMES-1154
 */
@Test public void testMessageStreamWithUpatedHeaders() throws MessagingException, IOException {
  mw.addHeader("X-Test","X-Value");
  assertEquals("X-Value",mw.getHeader("X-Test")[0]);
  mw.saveChanges();
  BufferedReader reader=new BufferedReader(new InputStreamReader(mw.getMessageInputStream()));
  String line;
  boolean headerUpdated=false;
  while ((line=reader.readLine()) != null) {
    if (line.equals("X-Test: X-Value")) {
      headerUpdated=true;
      break;
    }
  }
  reader.close();
  assertTrue(headerUpdated);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSizeModifiedBodyWithoutSave() throws MessagingException {
  String newBody="This is the new body of the message";
  mw.setText(newBody);
  assertEquals(body.length(),mw.getSize());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReplaceReturnPathOnBadMessage() throws Exception {
  MimeMessage message=getMessageWithBadReturnPath();
  message.setHeader(RFC2822Headers.RETURN_PATH,"<test@test.de>");
  Enumeration e=message.getMatchingHeaderLines(new String[]{"Return-Path"});
  assertEquals("Return-Path: <test@test.de>",e.nextElement());
  assertFalse(e.hasMoreElements());
  Enumeration h=message.getAllHeaderLines();
  assertEquals("Return-Path: <test@test.de>",h.nextElement());
  assertFalse(h.nextElement().toString().startsWith("Return-Path:"));
  LifecycleUtil.dispose(message);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSizeModifiedHeaders() throws MessagingException {
  mw.addHeader("whatever","test");
  assertEquals(body.length(),mw.getSize());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for JAMES-1154
 */
@Test public void testMessageStreamWithUpatedContent() throws MessagingException, IOException {
  String newContent="This is the new message content!";
  mw.setText(newContent);
  assertEquals(newContent,mw.getContent());
  mw.saveChanges();
  BufferedReader reader=new BufferedReader(new InputStreamReader(mw.getMessageInputStream()));
  String line;
  boolean contentUpdated=false;
  while ((line=reader.readLine()) != null) {
    if (line.equals(newContent)) {
      contentUpdated=true;
      break;
    }
  }
  reader.close();
  assertTrue(contentUpdated);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddHeaderAndSave(){
  try {
    mw.addHeader("X-Test","X-Value");
    assertEquals("X-Value",mw.getHeader("X-Test")[0]);
    mw.saveChanges();
    ByteArrayOutputStream rawMessage=new ByteArrayOutputStream();
    mw.writeTo(rawMessage);
    assertEquals("X-Value",mw.getHeader("X-Test")[0]);
    String res=rawMessage.toString();
    boolean found=res.indexOf("X-Test: X-Value") > 0;
    assertEquals(true,found);
  }
 catch (  MessagingException e) {
    e.printStackTrace();
  }
catch (  IOException e) {
    e.printStackTrace();
  }
}

</code></pre>

<br>
<pre class="type-9 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * this is commented out due optimisation reverts (JAMES-559) public void
 * testDeferredMessageLoadingWhileWriting() throws MessagingException,
 * IOException { mw.setMessageLoadable(false);
 * assertEquals("foo",mw.getSubject()); assertFalse(mw.isModified());
 * mw.setSubject("newSubject"); assertEquals("newSubject",mw.getSubject());
 * assertFalse(mw.messageParsed()); assertTrue(mw.isModified());
 * mw.setMessageLoadable(true);
 * }
 */
@Test public void testDeferredHeaderLoading() throws MessagingException, IOException {
  mw.setHeadersLoadable(false);
  try {
    assertEquals("foo",mw.getSubject());
    fail("subject should not be loadable here, headers loading is disabled");
  }
 catch (  IllegalStateException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.dnsservice.api.AbstractDNSServiceTest </h4><pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Simple localhost resolution.
 * @throws UnknownHostException
 */
@Test public void testLocalhost() throws UnknownHostException {
  assertEquals("localhost/127.0.0.1",DNS_SERVER.getByName("localhost").toString());
  String localHost=DNS_SERVER.getHostName(InetAddress.getByName("127.0.0.1"));
  assertTrue(localHost.length() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.dnsservice.dnsjava.DNSJavaServiceTest </h4><pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for JAMES-1251
 */
@Test public void testOneMX() throws Exception {
  doAnswer(new ZoneCacheLookupRecordsAnswer(loadZone("one-mx.bar."))).when(mockedCache).lookupRecords(any(Name.class),anyInt(),anyInt());
  dnsServer.setCache(mockedCache);
  Collection<String> records=dnsServer.findMXRecords("one-mx.bar.");
  assertEquals(1,records.size());
  assertTrue(records.contains("mx1.one-mx.bar."));
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBadMX() throws Exception {
  doAnswer(new ZoneCacheLookupRecordsAnswer(loadZone("dnstest.com."))).when(mockedCache).lookupRecords(any(Name.class),anyInt(),anyInt());
  dnsServer.setCache(mockedCache);
  Collection<String> records=dnsServer.findMXRecords("badmx.dnstest.com.");
  assertEquals(1,records.size());
  assertEquals("badhost.dnstest.com.",records.iterator().next());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testINARecords() throws Exception {
  doAnswer(new ZoneCacheLookupRecordsAnswer(loadZone("pippo.com."))).when(mockedCache).lookupRecords(any(Name.class),anyInt(),anyInt());
  dnsServer.setCache(mockedCache);
  Collection<String> records=dnsServer.findMXRecords("www.pippo.com.");
  assertEquals(1,records.size());
  assertEquals("pippo.com.inbound.mxlogic.net.",records.iterator().next());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for JAMES-1251
 */
@Test public void testTwoMXSamePrio() throws Exception {
  doAnswer(new ZoneCacheLookupRecordsAnswer(loadZone("two-mx.sameprio."))).when(mockedCache).lookupRecords(any(Name.class),anyInt(),anyInt());
  dnsServer.setCache(mockedCache);
  Collection<String> records=dnsServer.findMXRecords("two-mx.sameprio.");
  assertEquals(2,records.size());
  assertTrue(records.contains("mx1.two-mx.sameprio."));
  assertTrue(records.contains("mx2.two-mx.sameprio."));
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThreeMX() throws Exception {
  doAnswer(new ZoneCacheLookupRecordsAnswer(loadZone("three-mx.bar."))).when(mockedCache).lookupRecords(any(Name.class),anyInt(),anyInt());
  dnsServer.setCache(mockedCache);
  ArrayList<String> records=new ArrayList<String>(dnsServer.findMXRecords("three-mx.bar."));
  assertEquals(3,records.size());
  assertTrue(records.contains("mx1.three-mx.bar."));
  assertTrue(records.contains("mx2.three-mx.bar."));
  assertEquals("mx3.three-mx.bar.",records.get(2));
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for JAMES-1251
 */
@Test public void testTwoMXDifferentPrio() throws Exception {
  doAnswer(new ZoneCacheLookupRecordsAnswer(loadZone("two-mx.differentprio."))).when(mockedCache).lookupRecords(any(Name.class),anyInt(),anyInt());
  dnsServer.setCache(mockedCache);
  Collection<String> records=dnsServer.findMXRecords("two-mx.differentprio.");
  assertEquals(2,records.size());
  assertTrue(records.contains("mx1.two-mx.differentprio."));
  assertTrue(records.contains("mx2.two-mx.differentprio."));
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoMX() throws Exception {
  doAnswer(new ZoneCacheLookupRecordsAnswer(loadZone("dnstest.com."))).when(mockedCache).lookupRecords(any(Name.class),anyInt(),anyInt());
  dnsServer.setCache(mockedCache);
  Collection<String> records=dnsServer.findMXRecords("nomx.dnstest.com.");
  assertEquals(1,records.size());
  assertEquals("nomx.dnstest.com.",records.iterator().next());
}

</code></pre>

<br>
<pre class="type-9 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMXCatches() throws Exception {
  doAnswer(new ZoneCacheLookupRecordsAnswer(loadZone("test-zone.com."))).when(mockedCache).lookupRecords(any(Name.class),anyInt(),anyInt());
  dnsServer.setCache(mockedCache);
  Collection<String> res=dnsServer.findMXRecords("test-zone.com.");
  try {
    res.add("");
    fail("MX Collection should not be modifiable");
  }
 catch (  UnsupportedOperationException e) {
  }
  assertEquals(1,res.size());
  assertEquals("mail.test-zone.com.",res.iterator().next());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.dnsservice.library.MXHostAddressIteratorTest </h4><pre class="type-16 type-13 type-1 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test case for JAMES-1251
 */
@Test public void testIteratorContainMultipleMX(){
  DNSService dns=new DNSService(){
    @Override public InetAddress getLocalHost() throws UnknownHostException {
      throw new UnsupportedOperationException();
    }
    @Override public String getHostName(    InetAddress addr){
      throw new UnsupportedOperationException();
    }
    @Override public InetAddress getByName(    String host) throws UnknownHostException {
      return InetAddress.getLocalHost();
    }
    /** 
 * Every time this method is called it will return two InetAddress instances
 */
    @Override public InetAddress[] getAllByName(    String host) throws UnknownHostException {
      InetAddress addr=InetAddress.getLocalHost();
      return new InetAddress[]{addr,addr};
    }
    @Override public Collection<String> findTXTRecords(    String hostname){
      throw new UnsupportedOperationException();
    }
    @Override public Collection<String> findMXRecords(    String hostname) throws TemporaryResolutionException {
      throw new UnsupportedOperationException();
    }
  }
;
  MXHostAddressIterator it=new MXHostAddressIterator(Arrays.asList("localhost","localhost2").iterator(),dns,false,LoggerFactory.getLogger(this.getClass()));
  for (int i=0; i < 4; i++) {
    assertTrue(it.hasNext());
    assertNotNull(it.next());
  }
  assertFalse(it.hasNext());
  it=new MXHostAddressIterator(Arrays.asList("localhost","localhost2").iterator(),dns,true,LoggerFactory.getLogger(this.getClass()));
  for (int i=0; i < 2; i++) {
    assertTrue(it.hasNext());
    assertNotNull(it.next());
  }
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.dnsservice.library.inetnetwork.InetNetworkBuilderTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Verify that InetNetworkBuild return correctly initialized Inet6Network.
 * @throws UnknownHostException
 */
@Test public void testInetNetworkBuilderDnsV6() throws UnknownHostException {
  inetNetworkBuilder=new InetNetworkBuilder(DNSFixture.DNS_SERVER_IPV6_MOCK);
  inetNetwork=inetNetworkBuilder.getFromString(DNSFixture.LOCALHOST_IP_V6_ADDRESS_0);
  assertEquals("0:0:0:0:0:0:0:1/32768",inetNetwork.toString());
  inetNetwork=inetNetworkBuilder.getFromString(DNSFixture.LOCALHOST_IP_V6_ADDRESS_1);
  assertEquals("2781:db8:1234:0:0:0:0:0/48",inetNetwork.toString());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Verify that InetNetworkBuild return correctly initialized Inet4Network.
 * @throws UnknownHostException
 */
@Test public void testInetNetworkBuilderDnsV4() throws UnknownHostException {
  inetNetworkBuilder=new InetNetworkBuilder(DNSFixture.DNS_SERVER_IPV4_MOCK);
  inetNetwork=inetNetworkBuilder.getFromString(DNSFixture.LOCALHOST_IP_V4_ADDRESS_0);
  assertEquals("127.0.0.0/255.255.0.0",inetNetwork.toString());
  inetNetwork=inetNetworkBuilder.getFromString(DNSFixture.LOCALHOST_IP_V4_ADDRESS_1);
  assertEquals("172.16.0.0/255.255.0.0",inetNetwork.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.dnsservice.library.netmatcher.NetMatcherTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @throws UnknownHostException
 */
@Test public void testIpV6MatcherWithIpV4() throws UnknownHostException {
  netMatcher=new NetMatcher(DNSFixture.LOCALHOST_IP_V6_ADDRESSES,DNSFixture.DNS_SERVER_IPV6_MOCK);
  assertEquals(false,netMatcher.matchInetNetwork("127.0.0.1"));
  assertEquals(false,netMatcher.matchInetNetwork("localhost"));
  assertEquals(false,netMatcher.matchInetNetwork("172.16.15.254"));
  assertEquals(false,netMatcher.matchInetNetwork("192.168.1.254"));
  assertEquals(false,netMatcher.matchInetNetwork("192.169.1.254"));
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test for IPV4 matcher.
 * @throws UnknownHostException
 */
@Test public void testIpV4Matcher() throws UnknownHostException {
  netMatcher=new NetMatcher(DNSFixture.LOCALHOST_IP_V4_ADDRESSES,DNSFixture.DNS_SERVER_IPV4_MOCK);
  assertEquals(true,netMatcher.matchInetNetwork("127.0.0.1"));
  assertEquals(true,netMatcher.matchInetNetwork("localhost"));
  assertEquals(true,netMatcher.matchInetNetwork("172.16.15.254"));
  assertEquals(true,netMatcher.matchInetNetwork("192.168.1.254"));
  assertEquals(false,netMatcher.matchInetNetwork("192.169.1.254"));
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @throws UnknownHostException
 */
@Test public void testIpV4MatcherWithIpV6() throws UnknownHostException {
  netMatcher=new NetMatcher(DNSFixture.LOCALHOST_IP_V4_ADDRESSES,DNSFixture.DNS_SERVER_IPV4_MOCK);
  assertEquals(false,netMatcher.matchInetNetwork("0:0:0:0:0:0:0:1%0"));
  assertEquals(false,netMatcher.matchInetNetwork("00:00:00:00:00:00:00:1"));
  assertEquals(false,netMatcher.matchInetNetwork("00:00:00:00:00:00:00:2"));
  assertEquals(false,netMatcher.matchInetNetwork("2781:0db8:1234:8612:45ee:ffff:fffe:0001"));
  assertEquals(false,netMatcher.matchInetNetwork("2781:0db8:1235:8612:45ee:ffff:fffe:0001"));
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @throws UnknownHostException
 */
@Test public void testIpV6Matcher() throws UnknownHostException {
  netMatcher=new NetMatcher(DNSFixture.LOCALHOST_IP_V6_ADDRESSES,DNSFixture.DNS_SERVER_IPV6_MOCK);
  assertEquals(true,netMatcher.matchInetNetwork("0:0:0:0:0:0:0:1%0"));
  assertEquals(true,netMatcher.matchInetNetwork("00:00:00:00:00:00:00:1"));
  assertEquals(false,netMatcher.matchInetNetwork("00:00:00:00:00:00:00:2"));
  assertEquals(true,netMatcher.matchInetNetwork("2781:0db8:1234:8612:45ee:ffff:fffe:0001"));
  assertEquals(false,netMatcher.matchInetNetwork("2781:0db8:1235:8612:45ee:ffff:fffe:0001"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.domainlist.lib.AbstractDomainListTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Add a domain and remove another domain, and check first domain is still
 * present.
 * @throws DomainListException
 */
@Test public void testAddRemoveContainsDifferentDomain() throws DomainListException {
  domainList.addDomain(DOMAIN_1);
  domainList.removeDomain(DOMAIN_2);
  assertEquals(1,domainList.getDomains().length);
  assertEquals(true,domainList.containsDomain(DOMAIN_1));
}

</code></pre>

<br>
<pre class="type-9 type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Add two same domains with different cases, and check we've got an exception.
 * @throws DomainListException
 */
@Test public void testUpperCaseSameDomain() throws DomainListException {
  domainList.addDomain(DOMAIN_1);
  assertEquals(1,domainList.getDomains().length);
  try {
    String DOMAIN_1_UPPER_CASE="Domain1.tld";
    domainList.addDomain(DOMAIN_1_UPPER_CASE);
    fail("We should not be able to insert same domains, even with different cases");
  }
 catch (  DomainListException domainListException) {
    assertTrue(domainListException.getMessage().contains(DOMAIN_1));
  }
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Add 3 domains and list them.
 * @throws DomainListException
 */
@Test public void createListDomains() throws DomainListException {
  domainList.addDomain(DOMAIN_3);
  domainList.addDomain(DOMAIN_4);
  domainList.addDomain(DOMAIN_5);
  assertEquals(3,domainList.getDomains().length);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Add and remove a domain, and check database is empty.
 * @throws DomainListException
 */
@Test public void testAddRemoveContainsSameDomain() throws DomainListException {
  domainList.addDomain(DOMAIN_1);
  domainList.removeDomain(DOMAIN_1);
  assertThat(domainList.getDomains(),nullValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.domainlist.xml.XMLDomainListTest </h4><pre class="type-1 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testNoConfiguredDomains() throws Exception {
  List<String> domains=new ArrayList<String>();
  XMLDomainList dom=new XMLDomainList();
  dom.setLog(LoggerFactory.getLogger("MockLog"));
  dom.configure(setUpConfiguration(false,false,domains));
  dom.setDNSService(setUpDNSServer("localhost"));
  assertNull("No domain found",dom.getDomains());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetDomainsAutoDetectNotLocalHost() throws Exception {
  List<String> domains=new ArrayList<String>();
  domains.add("domain1.");
  XMLDomainList dom=new XMLDomainList();
  dom.setLog(LoggerFactory.getLogger("MockLog"));
  dom.configure(setUpConfiguration(true,false,domains));
  dom.setDNSService(setUpDNSServer("local"));
  assertEquals("Two domains found",dom.getDomains().length,2);
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetDomains() throws Exception {
  List<String> domains=new ArrayList<String>();
  domains.add("domain1.");
  domains.add("domain2.");
  XMLDomainList dom=new XMLDomainList();
  dom.setLog(LoggerFactory.getLogger("MockLog"));
  dom.configure(setUpConfiguration(false,false,domains));
  dom.setDNSService(setUpDNSServer("localhost"));
  assertTrue("Two domain found",dom.getDomains().length == 2);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetDomainsAutoDetectLocalHost() throws Exception {
  List<String> domains=new ArrayList<String>();
  domains.add("domain1.");
  XMLDomainList dom=new XMLDomainList();
  dom.setLog(LoggerFactory.getLogger("MockLog"));
  dom.configure(setUpConfiguration(true,false,domains));
  dom.setDNSService(setUpDNSServer("localhost"));
  assertEquals("One domain found",dom.getDomains().length,1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.filesystem.api.SieveFileRepositoryTestCase </h4><pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for .
 * @throws StorageException 
 * @throws DuplicateUserException 
 * @throws DuplicateException 
 * @throws IsActiveException 
 * @throws UserNotFoundException 
 * @throws ScriptNotFoundException 
 * @throws QuotaExceededException 
 */
@Test public final void testRenameScript() throws DuplicateUserException, StorageException, UserNotFoundException, IsActiveException, DuplicateException, ScriptNotFoundException, QuotaExceededException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  repo.addUser(user);
  String scriptName="script";
  String content="01234567";
  String scriptName1="script1";
  boolean scriptNotFoundExceptionThrown=false;
  try {
    repo.renameScript(user,scriptName,scriptName1);
  }
 catch (  ScriptNotFoundException ex) {
    scriptNotFoundExceptionThrown=true;
  }
  assertTrue(scriptNotFoundExceptionThrown);
  repo.putScript(user,scriptName,content);
  repo.renameScript(user,scriptName,scriptName1);
  assertEquals("Script content did not match",content,repo.getScript(user,scriptName1));
  repo.setActive(user,scriptName1);
  repo.renameScript(user,scriptName1,scriptName);
  assertEquals("Script content did not match",content,repo.getActive(user));
  repo.setActive(user,"");
  boolean duplicateExceptionThrown=false;
  try {
    repo.renameScript(user,scriptName,scriptName);
  }
 catch (  DuplicateException ex) {
    duplicateExceptionThrown=true;
  }
  assertTrue(duplicateExceptionThrown);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public final void testSetQuota() throws QuotaNotFoundException, StorageException {
  SieveRepository repo=new SieveFileRepository(fs);
  repo.setQuota(Long.MAX_VALUE);
  assertEquals(Long.MAX_VALUE,repo.getQuota());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for .
 * @throws StorageException 
 * @throws DuplicateUserException 
 * @throws UserNotFoundException 
 * @throws ScriptNotFoundException 
 * @throws QuotaExceededException 
 */
@Test public final void testSetActive() throws DuplicateUserException, StorageException, UserNotFoundException, ScriptNotFoundException, QuotaExceededException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  repo.addUser(user);
  String scriptName="script";
  String content="01234567";
  String scriptName1="script1";
  String content1="abcdefgh";
  boolean scriptNotFoundExceptionThrown=false;
  try {
    repo.setActive(user,scriptName);
  }
 catch (  ScriptNotFoundException ex) {
    scriptNotFoundExceptionThrown=true;
  }
  assertTrue(scriptNotFoundExceptionThrown);
  repo.putScript(user,scriptName,content);
  repo.setActive(user,scriptName);
  assertEquals("Script content did not match",content,repo.getActive(user));
  repo.putScript(user,scriptName1,content1);
  scriptNotFoundExceptionThrown=false;
  repo.setActive(user,scriptName1);
  assertEquals("Script content did not match",content1,repo.getActive(user));
  repo.setActive(user,"");
  scriptNotFoundExceptionThrown=false;
  try {
    repo.getActive(user);
  }
 catch (  ScriptNotFoundException ex) {
    scriptNotFoundExceptionThrown=true;
  }
  assertTrue(scriptNotFoundExceptionThrown);
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public final void testRemoveUser() throws StorageException, DuplicateUserException, UserNotFoundException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  boolean userNotFoundExceptionThrown=false;
  try {
    repo.removeUser(user);
  }
 catch (  UserNotFoundException ex) {
    userNotFoundExceptionThrown=true;
  }
  assertTrue(userNotFoundExceptionThrown);
  repo.addUser(user);
  repo.removeUser(user);
  assertTrue(!repo.hasUser(user));
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public final void testAddUser() throws DuplicateUserException, StorageException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  repo.addUser(user);
  assertTrue(repo.hasUser(user));
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public final void testHasUser() throws DuplicateUserException, StorageException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  assertTrue(!repo.hasUser(user));
  repo.addUser(user);
  assertTrue(repo.hasUser(user));
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public final void testSetUserQuota() throws QuotaNotFoundException, StorageException, DuplicateUserException, UserNotFoundException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  repo.addUser(user);
  repo.setQuota(user,Long.MAX_VALUE);
  assertEquals(Long.MAX_VALUE,repo.getQuota(user));
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public final void testGetQuota() throws StorageException, QuotaNotFoundException {
  SieveRepository repo=new SieveFileRepository(fs);
  boolean quotaNotFoundExceptionThrown=false;
  try {
    repo.getQuota();
  }
 catch (  QuotaNotFoundException ex) {
    quotaNotFoundExceptionThrown=true;
  }
  assertTrue(quotaNotFoundExceptionThrown);
  repo.setQuota(Long.MAX_VALUE);
  assertEquals(Long.MAX_VALUE,repo.getQuota());
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public final void testRemoveUserQuota() throws StorageException, QuotaNotFoundException, DuplicateUserException, UserNotFoundException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  repo.addUser(user);
  boolean quotaNotFoundExceptionThrown=false;
  try {
    repo.removeQuota(user);
  }
 catch (  QuotaNotFoundException ex) {
    quotaNotFoundExceptionThrown=true;
  }
  assertTrue(quotaNotFoundExceptionThrown);
  repo.setQuota(user,Long.MAX_VALUE);
  repo.removeQuota(user);
  assertTrue(!repo.hasQuota(user));
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for .
 * @throws StorageException 
 * @throws DuplicateUserException 
 * @throws UserNotFoundException 
 * @throws QuotaExceededException 
 * @throws ScriptNotFoundException 
 */
@Test public final void testListScripts() throws DuplicateUserException, StorageException, UserNotFoundException, QuotaExceededException, ScriptNotFoundException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  repo.addUser(user);
  String scriptName="script";
  String content="01234567";
  String scriptName1="script1";
  String content1="abcdefgh";
  assertTrue(repo.listScripts(user).isEmpty());
  repo.putScript(user,scriptName,content);
  List<ScriptSummary> summaries=repo.listScripts(user);
  assertEquals(1,summaries.size());
  assertEquals(scriptName,summaries.get(0).getName());
  assertTrue(!summaries.get(0).isActive());
  repo.setActive(user,scriptName);
  summaries=repo.listScripts(user);
  assertEquals(1,summaries.size());
  assertEquals(scriptName,summaries.get(0).getName());
  assertTrue(summaries.get(0).isActive());
  repo.putScript(user,scriptName1,content1);
  summaries=repo.listScripts(user);
  assertEquals(2,summaries.size());
  assertTrue(summaries.contains(new ScriptSummary(scriptName,true)));
  assertTrue(summaries.contains(new ScriptSummary(scriptName1,false)));
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public final void testRemoveQuota() throws StorageException, QuotaNotFoundException {
  SieveRepository repo=new SieveFileRepository(fs);
  boolean quotaNotFoundExceptionThrown=false;
  try {
    repo.removeQuota();
  }
 catch (  QuotaNotFoundException ex) {
    quotaNotFoundExceptionThrown=true;
  }
  assertTrue(quotaNotFoundExceptionThrown);
  repo.setQuota(Long.MAX_VALUE);
  repo.removeQuota();
  assertTrue(!repo.hasQuota());
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public final void testHasQuota() throws StorageException {
  SieveRepository repo=new SieveFileRepository(fs);
  assertTrue(!repo.hasQuota());
  repo.setQuota(Long.MAX_VALUE);
  assertTrue(repo.hasQuota());
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test method for .
 * @throws DuplicateUserException 
 * @throws QuotaExceededException 
 * @throws StorageException 
 * @throws UserNotFoundException 
 * @throws FileNotFoundException 
 */
@Test public final void testPutScript() throws DuplicateUserException, UserNotFoundException, StorageException, QuotaExceededException, FileNotFoundException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  repo.addUser(user);
  String scriptName="script";
  String content="01234567";
  repo.putScript(user,scriptName,content);
  assertTrue("Script creation failed",new File(fs.getFile(SIEVE_ROOT),user + '/' + scriptName).exists());
  repo.putScript(user,scriptName,content);
  assertTrue("Script replacement failed",new File(fs.getFile(SIEVE_ROOT),user + '/' + scriptName).exists());
  repo.setQuota(content.length());
  repo.putScript(user,scriptName,content);
  repo.setQuota(content.length() - 1);
  boolean quotaExceededExceptionThrown=false;
  try {
    repo.putScript(user,scriptName,content);
  }
 catch (  QuotaExceededException ex) {
    quotaExceededExceptionThrown=true;
  }
  assertTrue(quotaExceededExceptionThrown);
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public final void testHasUserQuota() throws StorageException, DuplicateUserException, UserNotFoundException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  repo.addUser(user);
  assertTrue(!repo.hasQuota(user));
  repo.setQuota(user,Long.MAX_VALUE);
  assertTrue(repo.hasQuota(user));
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for .
 * @throws StorageException 
 * @throws DuplicateUserException 
 * @throws QuotaExceededException 
 * @throws UserNotFoundException 
 * @throws ScriptNotFoundException 
 */
@Test public final void testGetActive() throws DuplicateUserException, StorageException, UserNotFoundException, QuotaExceededException, ScriptNotFoundException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  repo.addUser(user);
  String scriptName="script";
  String content="01234567";
  boolean scriptNotFoundExceptionThrown=false;
  try {
    repo.getActive(user);
  }
 catch (  ScriptNotFoundException ex) {
    scriptNotFoundExceptionThrown=true;
  }
  assertTrue(scriptNotFoundExceptionThrown);
  repo.putScript(user,scriptName,content);
  scriptNotFoundExceptionThrown=false;
  try {
    repo.getActive(user);
  }
 catch (  ScriptNotFoundException ex) {
    scriptNotFoundExceptionThrown=true;
  }
  assertTrue(scriptNotFoundExceptionThrown);
  repo.setActive(user,scriptName);
  assertEquals("Script content did not match",content,repo.getActive(user));
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public final void testGetUserQuota() throws StorageException, QuotaNotFoundException, DuplicateUserException, UserNotFoundException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  repo.addUser(user);
  boolean quotaNotFoundExceptionThrown=false;
  try {
    repo.getQuota(user);
  }
 catch (  QuotaNotFoundException ex) {
    quotaNotFoundExceptionThrown=true;
  }
  assertTrue(quotaNotFoundExceptionThrown);
  repo.setQuota(user,Long.MAX_VALUE);
  assertEquals(Long.MAX_VALUE,repo.getQuota(user));
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for .
 * @throws StorageException 
 * @throws DuplicateUserException 
 * @throws UserNotFoundException 
 * @throws QuotaExceededException 
 * @throws ScriptNotFoundException 
 */
@Test public final void testGetScript() throws DuplicateUserException, StorageException, UserNotFoundException, QuotaExceededException, ScriptNotFoundException {
  SieveRepository repo=new SieveFileRepository(fs);
  String user="test";
  repo.addUser(user);
  String scriptName="script";
  String content="01234567";
  boolean scriptNotFoundExceptionThrown=false;
  try {
    repo.getScript(user,scriptName);
  }
 catch (  ScriptNotFoundException ex) {
    scriptNotFoundExceptionThrown=true;
  }
  assertTrue(scriptNotFoundExceptionThrown);
  repo.putScript(user,scriptName,content);
  assertEquals("Script content did not match",content,repo.getScript(user,scriptName));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailetcontainer.impl.MailetConfigImplTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDotParamsFromXML() throws ConfigurationException {
  builder.load(new ByteArrayInputStream("<mailet><mail.debug>true</mail.debug></mailet>".getBytes()));
  config.setConfiguration(builder);
  String param=config.getInitParameterNames().next();
  assertEquals("mail.debug",param);
  assertEquals("true",config.getInitParameter(param));
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testParamWithXmlSpace() throws ConfigurationException {
  builder.setDelimiterParsingDisabled(true);
  builder.load(new ByteArrayInputStream("<mailet><whatever xml:space=\"preserve\"> some text </whatever></mailet>".getBytes()));
  config.setConfiguration(builder);
  String param=config.getInitParameterNames().next();
  assertEquals("whatever",param);
  assertEquals(" some text ",config.getInitParameter(param));
  List<String> params=new ArrayList<String>();
  Iterator<String> iter=config.getInitParameterNames();
  while (iter.hasNext()) {
    params.add(iter.next());
  }
  assertEquals(params.size(),1);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDotParamsFromConfig() throws ConfigurationException {
  builder.addProperty("mail.debug","true");
  config.setConfiguration(builder);
  String param=config.getInitParameterNames().next();
  assertEquals("mail.debug",param);
  assertEquals("true",config.getInitParameter(param));
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testParamWithComma() throws ConfigurationException {
  builder.load(new ByteArrayInputStream("<mailet><whatever>value1,value2</whatever></mailet>".getBytes()));
  config.setConfiguration(builder);
  String param=config.getInitParameterNames().next();
  assertEquals("whatever",param);
  assertEquals("value1,value2",config.getInitParameter(param));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailetcontainer.lib.AbstractStateMailetProcessorTest </h4><pre class="type-17 type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMatcherThrowException() throws Exception {
  final CountDownLatch latch=new CountDownLatch(1);
  final MailImpl mail=new MailImpl();
  mail.setName(MailImpl.getId());
  mail.setSender(new MailAddress("test@localhost"));
  mail.setRecipients(Arrays.asList(new MailAddress("test@localhost"),new MailAddress("test2@localhost")));
  AbstractStateMailetProcessor processor=createProcessor(createConfig(ExceptionThrowingMatcher.class,MockMailet.class,0));
  processor.addListener(new MailetProcessorListener(){
    @Override public void afterMatcher(    Matcher m,    String mailName,    Collection<MailAddress> recipients,    Collection<MailAddress> matches,    long processTime,    MessagingException e){
      if (ExceptionThrowingMatcher.class.equals(m.getClass())) {
        assertEquals(mail.getName(),mailName);
        assertNull(matches);
        assertNotNull(e);
        latch.countDown();
      }
    }
    @Override public void afterMailet(    Mailet m,    String mailName,    String state,    long processTime,    MessagingException e){
      throw new RuntimeException("Should not call any mailet!");
    }
  }
);
  assertEquals(Mail.DEFAULT,mail.getState());
  boolean catched=false;
  try {
    processor.service(mail);
  }
 catch (  MessagingException e) {
    catched=true;
  }
  assertTrue(catched);
  assertEquals(Mail.ERROR,mail.getState());
  latch.await();
  processor.destroy();
}

</code></pre>

<br>
<pre class="type-17 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleRouting() throws Exception {
  final CountDownLatch latch=new CountDownLatch(2);
  final MailImpl mail=new MailImpl();
  mail.setName(MailImpl.getId());
  mail.setSender(new MailAddress("test@localhost"));
  mail.setRecipients(Arrays.asList(new MailAddress("test@localhost"),new MailAddress("test2@localhost")));
  AbstractStateMailetProcessor processor=createProcessor(createConfig(MockMatcher.class,MockMailet.class,1));
  processor.addListener(new MailetProcessorListener(){
    @Override public void afterMatcher(    Matcher m,    String mailName,    Collection<MailAddress> recipients,    Collection<MailAddress> matches,    long processTime,    MessagingException e){
      if (MockMatcher.class.equals(m.getClass())) {
        assertEquals(mail.getName(),mailName);
        assertEquals(1,matches.size());
        assertNull(e);
        latch.countDown();
      }
    }
    @Override public void afterMailet(    Mailet m,    String mailName,    String state,    long processTime,    MessagingException e){
      if (MockMailet.class.equals(m.getClass())) {
        assertEquals("test",state);
        assertNull(e);
        latch.countDown();
      }
    }
  }
);
  assertEquals(Mail.DEFAULT,mail.getState());
  processor.service(mail);
  assertEquals(Mail.GHOST,mail.getState());
  latch.await();
  processor.destroy();
}

</code></pre>

<br>
<pre class="type-17 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleRoutingMatchAll() throws Exception {
  final CountDownLatch latch=new CountDownLatch(2);
  final MailImpl mail=new MailImpl();
  mail.setName(MailImpl.getId());
  mail.setSender(new MailAddress("test@localhost"));
  mail.setRecipients(Arrays.asList(new MailAddress("test@localhost"),new MailAddress("test2@localhost")));
  AbstractStateMailetProcessor processor=createProcessor(createConfig(MockMatcher.class,MockMailet.class,2));
  processor.addListener(new MailetProcessorListener(){
    @Override public void afterMatcher(    Matcher m,    String mailName,    Collection<MailAddress> recipients,    Collection<MailAddress> matches,    long processTime,    MessagingException e){
      if (MockMatcher.class.equals(m.getClass())) {
        assertEquals(mail.getName(),mailName);
        assertEquals(2,matches.size());
        assertNull(e);
        latch.countDown();
      }
    }
    @Override public void afterMailet(    Mailet m,    String mailName,    String state,    long processTime,    MessagingException e){
      if (MockMailet.class.equals(m.getClass())) {
        assertEquals(mail.getName(),mailName);
        assertEquals("test",state);
        assertNull(e);
        latch.countDown();
      }
    }
  }
);
  assertEquals(Mail.DEFAULT,mail.getState());
  processor.service(mail);
  assertEquals("test",mail.getState());
  latch.await();
  processor.destroy();
}

</code></pre>

<br>
<pre class="type-17 type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMailetThrowException() throws Exception {
  final CountDownLatch latch=new CountDownLatch(2);
  final MailImpl mail=new MailImpl();
  mail.setName(MailImpl.getId());
  mail.setSender(new MailAddress("test@localhost"));
  mail.setRecipients(Arrays.asList(new MailAddress("test@localhost"),new MailAddress("test2@localhost")));
  AbstractStateMailetProcessor processor=createProcessor(createConfig(MockMatcher.class,ExceptionThrowingMailet.class,1));
  processor.addListener(new MailetProcessorListener(){
    @Override public void afterMatcher(    Matcher m,    String mailName,    Collection<MailAddress> recipients,    Collection<MailAddress> matches,    long processTime,    MessagingException e){
      if (MockMatcher.class.equals(m.getClass())) {
        assertEquals(mail.getName(),mailName);
        assertEquals(1,matches.size());
        assertNull(e);
        latch.countDown();
      }
    }
    @Override public void afterMailet(    Mailet m,    String mailName,    String state,    long processTime,    MessagingException e){
      if (ExceptionThrowingMailet.class.equals(m.getClass())) {
        assertFalse(mail.getName().equals(mailName));
        assertNotNull(e);
        assertEquals(Mail.ERROR,state);
        latch.countDown();
      }
    }
  }
);
  assertEquals(Mail.DEFAULT,mail.getState());
  boolean catched=false;
  try {
    processor.service(mail);
  }
 catch (  MessagingException e) {
    catched=true;
  }
  assertTrue(catched);
  latch.await();
  processor.destroy();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailrepository.AbstractMailRepositoryTest </h4><pre class="type-13 type-1 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyRepository() throws MessagingException {
  assertFalse(mailRepository.list().hasNext());
  assertNull(mailRepository.retrieve("random"));
  mailRepository.remove("random");
}

</code></pre>

<br>
<pre class="type-9 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreAndRetrieveMail() throws MessagingException, IOException {
  try {
    mailRepository.store(mail);
  }
 catch (  Exception e) {
    fail("Failed to store mail");
  }
  Mail m2=mailRepository.retrieve(mailRepository.list().next());
  assertEquals("stored and retrieved messages do not match",mail.getMessage().getContent().toString(),m2.getMessage().getContent().toString());
  assertEquals("stored and retrieved message sizes do not match",mail.getMessageSize(),m2.getMessageSize());
  assertEquals("stored and retrieved keys do not match",mail.getName(),m2.getName());
  assertEquals("stored and retrieved states do not match",mail.getState(),m2.getState());
  assertEquals("stored and retrieved attributes do not match",mail.getAttribute("testAttribute"),m2.getAttribute("testAttribute"));
  LifecycleUtil.dispose(m2);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * This test has been written as a proof to:
 * http://issues.apache.org/jira/browse/JAMES-559
 */
@Test public void testJames559() throws Exception {
  mailRepository.store(mail);
  Mail m2=mailRepository.retrieve("mail1");
  m2.getMessage().setHeader("X-Header","foobar");
  m2.getMessage().saveChanges();
  mailRepository.store(m2);
  LifecycleUtil.dispose(m2);
  m2=mailRepository.retrieve("mail1");
  assertEquals(mail.getMessage().getContent().toString(),m2.getMessage().getContent().toString());
  LifecycleUtil.dispose(mail);
  mail=null;
  LifecycleUtil.dispose(m2);
  mailRepository.remove("mail1");
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListMail() throws MessagingException {
  mailRepository.store(mail);
  mailRepository.store(mail);
  Iterator<String> i=mailRepository.list();
  assertTrue(i.hasNext());
  assertEquals(mail.getName(),i.next());
  assertFalse("Found more than one message after storing 2 times the SAME message: it MUST update the previous",i.hasNext());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * This test has been written as a proof to:
 * http://issues.apache.org/jira/browse/JAMES-559
 */
@Test public void testJames559WithoutSaveChanges() throws Exception {
  mailRepository.store(mail);
  Mail m2=mailRepository.retrieve("mail1");
  m2.getMessage().setHeader("X-Header","foobar");
  mailRepository.store(m2);
  LifecycleUtil.dispose(m2);
  m2=mailRepository.retrieve("mail1");
  assertEquals(mail.getMessage().getContent().toString(),m2.getMessage().getContent().toString());
  LifecycleUtil.dispose(mail);
  mail=null;
  LifecycleUtil.dispose(m2);
  mailRepository.remove("mail1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailrepository.MBoxMailRepositoryTest </h4><pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReadMboxrdFile() throws Exception {
  MailRepository mr=getMailRepository();
  Iterator<String> keys=mr.list();
  assertTrue("Two messages in list",keys.hasNext());
  keys.next();
  assertTrue("One messages in list",keys.hasNext());
  keys.next();
  assertFalse("No messages",keys.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.pop3server.POP3ServerTest </h4><pre class="type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKnownUserInboxWithMessages() throws Exception {
  finishSetUp(pop3Configuration);
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  usersRepository.addUser("foo2","bar2");
  MailboxPath mailboxPath=new MailboxPath(MailboxConstants.USER_NAMESPACE,"foo2","INBOX");
  MailboxSession session=mailboxManager.login("foo2","bar2",LoggerFactory.getLogger("Test"));
  if (!mailboxManager.mailboxExists(mailboxPath,session)) {
    mailboxManager.createMailbox(mailboxPath,session);
  }
  setupTestMails(session,mailboxManager.getMailbox(mailboxPath,session));
  pop3Client.sendCommand("retr","1");
  assertEquals(0,pop3Client.getState());
  assertEquals("-ERR",pop3Client.getReplyString().substring(0,4));
  pop3Client.login("foo2","bar2");
  assertEquals(1,pop3Client.getState());
  POP3MessageInfo[] entries=pop3Client.listMessages();
  assertNotNull(entries);
  assertEquals(2,entries.length);
  assertEquals(1,pop3Client.getState());
  Reader r=pop3Client.retrieveMessageTop(entries[0].number,0);
  assertNotNull(r);
  r.close();
  Reader r2=pop3Client.retrieveMessage(entries[0].number);
  assertNotNull(r2);
  r2.close();
  boolean deleted=pop3Client.deleteMessage(entries[0].number);
  assertTrue(deleted);
  deleted=pop3Client.deleteMessage(entries[0].number);
  assertFalse(deleted);
  deleted=pop3Client.deleteMessage(10);
  assertFalse(deleted);
  pop3Client.logout();
  pop3Client.connect("127.0.0.1",pop3Port);
  pop3Client.login("foo2","bar2");
  assertEquals(1,pop3Client.getState());
  entries=null;
  POP3MessageInfo stats=pop3Client.status();
  assertEquals(1,stats.number);
  assertEquals(5,stats.size);
  entries=pop3Client.listMessages();
  assertNotNull(entries);
  assertEquals(1,entries.length);
  assertEquals(1,pop3Client.getState());
  pop3Client.sendCommand("top");
  assertEquals("-ERR",pop3Client.getReplyString().substring(0,4));
  Reader r3=pop3Client.retrieveMessageTop(entries[0].number,0);
  assertNotNull(r3);
  r3.close();
  mailboxManager.deleteMailbox(mailboxPath,session);
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCapa() throws Exception {
  finishSetUp(pop3Configuration);
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  String pass="password";
  usersRepository.addUser("foo",pass);
  assertEquals(POP3Reply.OK,pop3Client.sendCommand("CAPA"));
  pop3Client.getAdditionalReply();
  pop3Client.getReplyString();
  List<String> replies=Arrays.asList(pop3Client.getReplyStrings());
  assertTrue("contains USER",replies.contains("USER"));
  pop3Client.login("foo",pass);
  assertEquals(POP3Reply.OK,pop3Client.sendCommand("CAPA"));
  pop3Client.getAdditionalReply();
  pop3Client.getReplyString();
  replies=Arrays.asList(pop3Client.getReplyStrings());
  assertTrue("contains USER",replies.contains("USER"));
  assertTrue("contains UIDL",replies.contains("UIDL"));
  assertTrue("contains TOP",replies.contains("TOP"));
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-10 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test for JAMES-1202 - This was failing before as the more then one connection to the same
 * mailbox was not handled the right way
 */
@Test @Ignore public void testStatUidlListTwoConnections() throws Exception {
  finishSetUp(pop3Configuration);
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  usersRepository.addUser("foo2","bar2");
  MailboxPath mailboxPath=new MailboxPath(MailboxConstants.USER_NAMESPACE,"foo2","INBOX");
  MailboxSession session=mailboxManager.login("foo2","bar2",LoggerFactory.getLogger("Test"));
  if (!mailboxManager.mailboxExists(mailboxPath,session)) {
    mailboxManager.createMailbox(mailboxPath,session);
  }
  int msgCount=100;
  for (int i=0; i < msgCount; i++) {
    mailboxManager.getMailbox(mailboxPath,session).appendMessage(new ByteArrayInputStream(("Subject: test\r\n\r\n" + i).getBytes()),new Date(),session,true,new Flags());
  }
  pop3Client.login("foo2","bar2");
  assertEquals(1,pop3Client.getState());
  POP3MessageInfo[] listEntries=pop3Client.listMessages();
  POP3MessageInfo[] uidlEntries=pop3Client.listUniqueIdentifiers();
  POP3MessageInfo statInfo=pop3Client.status();
  assertEquals(msgCount,listEntries.length);
  assertEquals(msgCount,uidlEntries.length);
  assertEquals(msgCount,statInfo.number);
  POP3Client m_pop3Protocol2=new POP3Client();
  m_pop3Protocol2.connect("127.0.0.1",pop3Port);
  m_pop3Protocol2.login("foo2","bar2");
  assertEquals(1,m_pop3Protocol2.getState());
  POP3MessageInfo[] listEntries2=m_pop3Protocol2.listMessages();
  POP3MessageInfo[] uidlEntries2=m_pop3Protocol2.listUniqueIdentifiers();
  POP3MessageInfo statInfo2=m_pop3Protocol2.status();
  assertEquals(msgCount,listEntries2.length);
  assertEquals(msgCount,uidlEntries2.length);
  assertEquals(msgCount,statInfo2.number);
  pop3Client.deleteMessage(1);
  listEntries=pop3Client.listMessages();
  uidlEntries=pop3Client.listUniqueIdentifiers();
  statInfo=pop3Client.status();
  assertEquals(msgCount - 1,listEntries.length);
  assertEquals(msgCount - 1,uidlEntries.length);
  assertEquals(msgCount - 1,statInfo.number);
  listEntries2=m_pop3Protocol2.listMessages();
  uidlEntries2=m_pop3Protocol2.listUniqueIdentifiers();
  statInfo2=m_pop3Protocol2.status();
  assertEquals(msgCount,listEntries2.length);
  assertEquals(msgCount,uidlEntries2.length);
  assertEquals(msgCount,statInfo2.number);
  assertTrue(pop3Client.logout());
  pop3Client.disconnect();
  listEntries2=m_pop3Protocol2.listMessages();
  uidlEntries2=m_pop3Protocol2.listUniqueIdentifiers();
  statInfo2=m_pop3Protocol2.status();
  assertEquals(msgCount,listEntries2.length);
  assertEquals(msgCount,uidlEntries2.length);
  assertEquals(msgCount,statInfo2.number);
  assertNull(m_pop3Protocol2.retrieveMessageTop(1,100));
  assertNull(m_pop3Protocol2.retrieveMessage(1));
  m_pop3Protocol2.sendCommand("quit");
  m_pop3Protocol2.disconnect();
  mailboxManager.deleteMailbox(mailboxPath,session);
}

</code></pre>

<br>
<pre class="type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKnownUserEmptyInbox() throws Exception {
  finishSetUp(pop3Configuration);
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  usersRepository.addUser("foo","bar");
  POP3MessageInfo[] entries=pop3Client.listMessages();
  assertNull(entries);
  pop3Client.login("foo","bar");
  System.err.println(pop3Client.getState());
  assertEquals(1,pop3Client.getState());
  entries=pop3Client.listMessages();
  assertEquals(1,pop3Client.getState());
  assertNotNull(entries);
  assertEquals(entries.length,0);
  POP3MessageInfo p3i=pop3Client.listMessage(1);
  assertEquals(1,pop3Client.getState());
  assertNull(p3i);
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticationFail() throws Exception {
  finishSetUp(pop3Configuration);
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  usersRepository.addUser("known","test2");
  pop3Client.login("known","test");
  assertEquals(0,pop3Client.getState());
  assertTrue(pop3Client.getReplyString().startsWith("-ERR"));
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnknownUser() throws Exception {
  finishSetUp(pop3Configuration);
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  pop3Client.login("unknown","test");
  assertEquals(0,pop3Client.getState());
  assertTrue(pop3Client.getReplyString().startsWith("-ERR"));
}

</code></pre>

<br>
<pre class="type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeadlockOnRetr() throws Exception {
  finishSetUp(pop3Configuration);
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  usersRepository.addUser("foo6","bar6");
  MailboxSession session=mailboxManager.login("foo6","bar6",LoggerFactory.getLogger("Test"));
  MailboxPath mailboxPath=MailboxPath.inbox(session);
  mailboxManager.startProcessingRequest(session);
  if (!mailboxManager.mailboxExists(mailboxPath,session)) {
    mailboxManager.createMailbox(mailboxPath,session);
  }
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  out.write(content);
  byte[] bigMail=new byte[1024 * 1024 * 10];
  int c=0;
  for (int i=0; i < bigMail.length; i++) {
    bigMail[i]='X';
    c++;
    if (c == 1000 || i + 3 == bigMail.length) {
      c=0;
      bigMail[++i]='\r';
      bigMail[++i]='\n';
    }
  }
  out.write(bigMail);
  bigMail=null;
  mailboxManager.getMailbox(mailboxPath,session).appendMessage(new ByteArrayInputStream(out.toByteArray()),new Date(),session,false,new Flags());
  mailboxManager.startProcessingRequest(session);
  pop3Client.login("foo6","bar6");
  assertEquals(1,pop3Client.getState());
  POP3MessageInfo[] entries=pop3Client.listMessages();
  assertNotNull(entries);
  assertEquals(1,entries.length);
  assertEquals(1,pop3Client.getState());
  Reader r=pop3Client.retrieveMessage(entries[0].number);
  assertNotNull(r);
  r.close();
  mailboxManager.deleteMailbox(mailboxPath,session);
}

</code></pre>

<br>
<pre class="type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUidlCommand() throws Exception {
  finishSetUp(pop3Configuration);
  usersRepository.addUser("foo","bar");
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  pop3Client.sendCommand("uidl");
  assertEquals(0,pop3Client.getState());
  pop3Client.login("foo","bar");
  POP3MessageInfo[] list=pop3Client.listUniqueIdentifiers();
  assertEquals("Found unexpected messages",0,list.length);
  pop3Client.disconnect();
  MailboxPath mailboxPath=new MailboxPath(MailboxConstants.USER_NAMESPACE,"foo","INBOX");
  MailboxSession session=mailboxManager.login("foo","bar",LoggerFactory.getLogger("Test"));
  if (!mailboxManager.mailboxExists(mailboxPath,session)) {
    mailboxManager.createMailbox(mailboxPath,session);
  }
  setupTestMails(session,mailboxManager.getMailbox(mailboxPath,session));
  pop3Client.connect("127.0.0.1",pop3Port);
  pop3Client.login("foo","bar");
  list=pop3Client.listUniqueIdentifiers();
  assertEquals("Expected 2 messages, found: " + list.length,2,list.length);
  POP3MessageInfo p3i=pop3Client.listUniqueIdentifier(1);
  assertNotNull(p3i);
  mailboxManager.deleteMailbox(mailboxPath,session);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMiscCommandsWithWithoutAuth() throws Exception {
  finishSetUp(pop3Configuration);
  usersRepository.addUser("foo","bar");
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  pop3Client.sendCommand("noop");
  assertEquals(0,pop3Client.getState());
  assertEquals("-ERR",pop3Client.getReplyString().substring(0,4));
  pop3Client.sendCommand("stat");
  assertEquals(0,pop3Client.getState());
  assertEquals("-ERR",pop3Client.getReplyString().substring(0,4));
  pop3Client.sendCommand("pass");
  assertEquals(0,pop3Client.getState());
  assertEquals("-ERR",pop3Client.getReplyString().substring(0,4));
  pop3Client.sendCommand("auth");
  assertEquals(0,pop3Client.getState());
  assertEquals("-ERR",pop3Client.getReplyString().substring(0,4));
  pop3Client.sendCommand("rset");
  assertEquals(0,pop3Client.getState());
  assertEquals("-ERR",pop3Client.getReplyString().substring(0,4));
  pop3Client.login("foo","bar");
  POP3MessageInfo[] list=pop3Client.listUniqueIdentifiers();
  assertEquals("Found unexpected messages",0,list.length);
  pop3Client.sendCommand("noop");
  assertEquals(1,pop3Client.getState());
  pop3Client.sendCommand("pass");
  assertEquals(1,pop3Client.getState());
  assertEquals("-ERR",pop3Client.getReplyString().substring(0,4));
  pop3Client.sendCommand("auth");
  assertEquals(1,pop3Client.getState());
  assertEquals("-ERR",pop3Client.getReplyString().substring(0,4));
  pop3Client.sendCommand("user");
  assertEquals(1,pop3Client.getState());
  assertEquals("-ERR",pop3Client.getReplyString().substring(0,4));
  pop3Client.sendCommand("rset");
  assertEquals(1,pop3Client.getState());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnknownCommand() throws Exception {
  finishSetUp(pop3Configuration);
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  pop3Client.sendCommand("unkn");
  assertEquals(0,pop3Client.getState());
  assertEquals("Expected -ERR as result for an unknown command",pop3Client.getReplyString().substring(0,4),"-ERR");
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIpStored() throws Exception {
  finishSetUp(pop3Configuration);
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  String pass="password";
  usersRepository.addUser("foo",pass);
  pop3Client.login("foo",pass);
  assertEquals(1,pop3Client.getState());
  assertTrue(POP3BeforeSMTPHelper.isAuthorized("127.0.0.1"));
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test for JAMES-1202 -  Which shows that UIDL,STAT and LIST all show the same message numbers.
 */
@Test public void testStatUidlList() throws Exception {
  finishSetUp(pop3Configuration);
  pop3Client=new POP3Client();
  pop3Client.connect("127.0.0.1",pop3Port);
  usersRepository.addUser("foo2","bar2");
  MailboxPath mailboxPath=new MailboxPath(MailboxConstants.USER_NAMESPACE,"foo2","INBOX");
  MailboxSession session=mailboxManager.login("foo2","bar2",LoggerFactory.getLogger("Test"));
  if (!mailboxManager.mailboxExists(mailboxPath,session)) {
    mailboxManager.createMailbox(mailboxPath,session);
  }
  int msgCount=100;
  for (int i=0; i < msgCount; i++) {
    mailboxManager.getMailbox(mailboxPath,session).appendMessage(new ByteArrayInputStream(("Subject: test\r\n\r\n" + i).getBytes()),new Date(),session,true,new Flags());
  }
  pop3Client.login("foo2","bar2");
  assertEquals(1,pop3Client.getState());
  POP3MessageInfo[] listEntries=pop3Client.listMessages();
  POP3MessageInfo[] uidlEntries=pop3Client.listUniqueIdentifiers();
  POP3MessageInfo statInfo=pop3Client.status();
  assertEquals(msgCount,listEntries.length);
  assertEquals(msgCount,uidlEntries.length);
  assertEquals(msgCount,statInfo.number);
  pop3Client.sendCommand("quit");
  pop3Client.disconnect();
  pop3Client.connect("127.0.0.1",pop3Port);
  pop3Client.login("foo2","bar2");
  assertEquals(1,pop3Client.getState());
  mailboxManager.deleteMailbox(mailboxPath,session);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.queue.jms.AbstractJMSMailQueueTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRemoveWithRecipient() throws MessagingException, InterruptedException, MailAddressException {
  final JMSMailQueue queue=getQueue();
  assertEquals(0,queue.getSize());
  Mail mail=createMail();
  mail.setRecipients(Arrays.asList(new MailAddress("remove@me1")));
  Mail mail2=createMail();
  mail2.setRecipients(Arrays.asList(new MailAddress("remove@me2")));
  queue.enQueue(mail);
  queue.enQueue(mail2);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(2,queue.getSize());
  assertEquals(1,queue.remove(ManageableMailQueue.Type.Recipient,"remove@me1"));
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(1,queue.getSize());
  assertEquals(1,queue.remove(ManageableMailQueue.Type.Recipient,"remove@me2"));
  assertEquals(0,queue.getSize());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRemoveWithSender() throws MessagingException, InterruptedException, MailAddressException {
  final JMSMailQueue queue=getQueue();
  assertEquals(0,queue.getSize());
  MailImpl mail=createMail();
  mail.setSender(new MailAddress("remove@me1"));
  MailImpl mail2=createMail();
  mail2.setSender(new MailAddress("remove@me2"));
  queue.enQueue(mail);
  queue.enQueue(mail2);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(2,queue.getSize());
  assertEquals(1,queue.remove(ManageableMailQueue.Type.Sender,"remove@me1"));
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(1,queue.getSize());
  assertEquals(1,queue.remove(ManageableMailQueue.Type.Sender,"remove@me2"));
  assertEquals(0,queue.getSize());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlush() throws MessagingException, InterruptedException, IOException, MailAddressException {
  final JMSMailQueue queue=getQueue();
  assertEquals(0,queue.getSize());
  final Mail mail=createMail();
  long enqueueTime=System.currentTimeMillis();
  queue.enQueue(mail,30,TimeUnit.SECONDS);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(1,queue.getSize());
  Thread flushThread=new Thread(new Runnable(){
    @Override public void run(){
      try {
        TimeUnit.MILLISECONDS.sleep(4000);
        assertEquals(1,queue.flush());
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
);
  flushThread.start();
  MailQueueItem item=queue.deQueue();
  checkMail(mail,item.getMail());
  item.done(true);
  long dequeueTime=System.currentTimeMillis() - enqueueTime;
  assertEquals(0,queue.getSize());
  assertTrue(dequeueTime < 30 * 1000);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFIFO() throws MessagingException, InterruptedException, IOException, MailAddressException {
  final JMSMailQueue queue=getQueue();
  assertEquals(0,queue.getSize());
  Mail mail=createMail();
  Mail mail2=createMail();
  queue.enQueue(mail);
  queue.enQueue(mail2);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(2,queue.getSize());
  MailQueueItem item=queue.deQueue();
  checkMail(mail,item.getMail());
  item.done(false);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(2,queue.getSize());
  MailQueueItem item2=queue.deQueue();
  checkMail(mail,item2.getMail());
  item2.done(true);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(1,queue.getSize());
  MailQueueItem item3=queue.deQueue();
  checkMail(mail2,item3.getMail());
  item3.done(true);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(0,queue.getSize());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBrowse() throws MessagingException, InterruptedException, IOException, MailAddressException {
  final JMSMailQueue queue=getQueue();
  assertEquals(0,queue.getSize());
  Mail mail=createMail();
  Mail mail2=createMail();
  queue.enQueue(mail);
  queue.enQueue(mail2);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(2,queue.getSize());
  MailQueueIterator it=queue.browse();
  checkMail(mail,it.next().getMail());
  checkMail(mail2,it.next().getMail());
  assertFalse(it.hasNext());
  it.close();
  assertEquals(2,queue.getSize());
  MailQueueItem item2=queue.deQueue();
  checkMail(mail,item2.getMail());
  item2.done(true);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(1,queue.getSize());
  it=queue.browse();
  checkMail(mail2,it.next().getMail());
  assertFalse(it.hasNext());
  it.close();
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrioritySupport() throws InterruptedException, MessagingException, IOException, MailAddressException {
  final JMSMailQueue queue=getQueue();
  assertEquals(0,queue.getSize());
  Mail mail=createMail();
  Mail mail2=createMail();
  mail2.setAttribute(JMSMailQueue.MAIL_PRIORITY,JMSMailQueue.HIGH_PRIORITY);
  queue.enQueue(mail);
  queue.enQueue(mail2);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(2,queue.getSize());
  assertEquals(2,queue.getSize());
  MailQueueItem item2=queue.deQueue();
  checkMail(mail2,item2.getMail());
  item2.done(true);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(1,queue.getSize());
  MailQueueItem item3=queue.deQueue();
  checkMail(mail,item3.getMail());
  item3.done(true);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(0,queue.getSize());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRemoveWithName() throws MessagingException, InterruptedException, MailAddressException {
  final JMSMailQueue queue=getQueue();
  assertEquals(0,queue.getSize());
  MailImpl mail=createMail();
  mail.setName("remove@me1");
  MailImpl mail2=createMail();
  mail2.setName("remove@me2");
  queue.enQueue(mail);
  queue.enQueue(mail2);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(2,queue.getSize());
  assertEquals(1,queue.remove(ManageableMailQueue.Type.Name,"remove@me1"));
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(1,queue.getSize());
  assertEquals(1,queue.remove(ManageableMailQueue.Type.Name,"remove@me2"));
  assertEquals(0,queue.getSize());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelayedDeQueue() throws MessagingException, InterruptedException, IOException, MailAddressException {
  final JMSMailQueue queue=getQueue();
  assertEquals(0,queue.getSize());
  Mail mail=createMail();
  Mail mail2=createMail();
  long enqueueTime=System.currentTimeMillis();
  queue.enQueue(mail,3,TimeUnit.SECONDS);
  queue.enQueue(mail2);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(2,queue.getSize());
  MailQueueItem item=queue.deQueue();
  checkMail(mail2,item.getMail());
  item.done(true);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(1,queue.getSize());
  MailQueueItem item2=queue.deQueue();
  long dequeueTime=System.currentTimeMillis() - enqueueTime;
  checkMail(mail,item2.getMail());
  item2.done(true);
  assertTrue(dequeueTime >= 2000);
  TimeUnit.MILLISECONDS.sleep(200);
  assertEquals(0,queue.getSize());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.rrt.lib.AbstractRecipientRewriteTableTest </h4><pre class="type-9 type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreAndRetrieveErrorMapping() throws ErrorMappingException, RecipientRewriteTableException {
  String user="test";
  String domain="localhost";
  String error="bounce!";
  boolean catched=false;
  try {
    assertNull("No mapping",virtualUserTable.getMappings(user,domain));
    assertTrue("Added virtual mapping",addMapping(user,domain,error,ERROR_TYPE));
    assertEquals("One mappingline",virtualUserTable.getAllMappings().size(),1);
    try {
      virtualUserTable.getMappings(user,domain);
    }
 catch (    ErrorMappingException e) {
      catched=true;
    }
    assertTrue("Error Mapping throw exception",catched);
    assertTrue("remove virtual mapping",removeMapping(user,domain,error,ERROR_TYPE));
    assertNull("No mapping",virtualUserTable.getMappings(user,domain));
    assertNull("No mappings",virtualUserTable.getAllMappings());
  }
 catch (  IllegalArgumentException e) {
    fail("Storing failed");
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreAndRetrieveRegexMapping() throws org.apache.james.rrt.api.RecipientRewriteTable.ErrorMappingException, RecipientRewriteTableException {
  String user="test";
  String domain="localhost";
  String regex="(.*)@localhost";
  String regex2="(.+)@test";
  String invalidRegex=".*):";
  boolean catched=false;
  try {
    assertNull("No mapping",virtualUserTable.getMappings(user,domain));
    assertTrue("Added virtual mapping",addMapping(user,domain,regex,REGEX_TYPE));
    assertTrue("Added virtual mapping",addMapping(user,domain,regex2,REGEX_TYPE));
    assertEquals("Two mappings",virtualUserTable.getMappings(user,domain).size(),2);
    assertEquals("One mappingline",virtualUserTable.getAllMappings().size(),1);
    assertTrue("remove virtual mapping",removeMapping(user,domain,regex,REGEX_TYPE));
    try {
      virtualUserTable.addRegexMapping(user,domain,invalidRegex);
    }
 catch (    RecipientRewriteTableException e) {
      catched=true;
    }
    assertTrue("Invalid Mapping throw exception",catched);
    assertTrue("remove virtual mapping",removeMapping(user,domain,regex2,REGEX_TYPE));
    assertNull("No mapping",virtualUserTable.getMappings(user,domain));
    assertNull("No mappings",virtualUserTable.getAllMappings());
  }
 catch (  IllegalArgumentException e) {
    e.printStackTrace();
    fail("Storing failed");
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreAndRetrieveWildCardAddressMapping() throws ErrorMappingException, RecipientRewriteTableException {
  String user="test";
  String user2="test2";
  String domain="localhost";
  String address="test@localhost2";
  String address2="test@james";
  try {
    assertNull("No mapping",virtualUserTable.getMappings(user,domain));
    assertTrue("Added virtual mapping",addMapping(RecipientRewriteTable.WILDCARD,domain,address,ADDRESS_TYPE));
    assertTrue("Added virtual mapping",addMapping(user,domain,address2,ADDRESS_TYPE));
    assertEquals("One mappings",1,virtualUserTable.getMappings(user,domain).size());
    assertEquals("One mappings",1,virtualUserTable.getMappings(user2,domain).size());
    assertTrue("remove virtual mapping",removeMapping(user,domain,address2,ADDRESS_TYPE));
    assertTrue("remove virtual mapping",removeMapping(RecipientRewriteTable.WILDCARD,domain,address,ADDRESS_TYPE));
    assertNull("No mapping",virtualUserTable.getMappings(user,domain));
    assertNull("No mapping",virtualUserTable.getMappings(user2,domain));
  }
 catch (  IllegalArgumentException e) {
    fail("Storing failed");
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreAndRetrieveAddressMapping() throws ErrorMappingException, RecipientRewriteTableException {
  String user="test";
  String domain="localhost";
  String address="test@localhost2";
  String address2="test@james";
  try {
    assertNull("No mapping",virtualUserTable.getMappings(user,domain));
    assertTrue("Added virtual mapping",addMapping(user,domain,address,ADDRESS_TYPE));
    assertTrue("Added virtual mapping",addMapping(user,domain,address2,ADDRESS_TYPE));
    assertEquals("Two mappings",virtualUserTable.getMappings(user,domain).size(),2);
    assertEquals("One mappingline",virtualUserTable.getAllMappings().size(),1);
    assertTrue("remove virtual mapping",removeMapping(user,domain,address,ADDRESS_TYPE));
    assertTrue("remove virtual mapping",removeMapping(user,domain,address2,ADDRESS_TYPE));
    assertNull("No mapping",virtualUserTable.getMappings(user,domain));
    assertNull("No mappings",virtualUserTable.getAllMappings());
  }
 catch (  IllegalArgumentException e) {
    fail("Storing failed");
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecursiveMapping() throws ErrorMappingException, RecipientRewriteTableException {
  String user1="user1";
  String user2="user2";
  String user3="user3";
  String domain1="domain1";
  String domain2="domain2";
  String domain3="domain3";
  boolean exception1=false;
  virtualUserTable.setRecursiveMapping(true);
  try {
    assertNull("No mappings",virtualUserTable.getAllMappings());
    assertTrue("Add mapping",addMapping(user1,domain1,user2 + "@" + domain2,ADDRESS_TYPE));
    assertTrue("Add mapping",addMapping(user2,domain2,user3 + "@" + domain3,ADDRESS_TYPE));
    assertEquals("Recursive mapped",virtualUserTable.getMappings(user1,domain1).iterator().next(),user3 + "@" + domain3);
    assertTrue("Add mapping",addMapping(user3,domain3,user1 + "@" + domain1,ADDRESS_TYPE));
    try {
      virtualUserTable.getMappings(user1,domain1);
    }
 catch (    ErrorMappingException e) {
      exception1=true;
    }
    assertTrue("Exception thrown on to many mappings",exception1);
    virtualUserTable.setRecursiveMapping(false);
    assertEquals("Not recursive mapped",virtualUserTable.getMappings(user1,domain1).iterator().next(),user2 + "@" + domain2);
  }
 catch (  IllegalArgumentException e) {
    fail("Storing failed");
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAliasDomainMapping() throws ErrorMappingException, RecipientRewriteTableException {
  String domain="realdomain";
  String aliasDomain="aliasdomain";
  String user="user";
  String user2="user2";
  assertNull("No mappings",virtualUserTable.getAllMappings());
  try {
    assertTrue("Add mapping",addMapping(RecipientRewriteTable.WILDCARD,aliasDomain,user2 + "@" + domain,ADDRESS_TYPE));
    assertTrue("Add aliasDomain mapping",addMapping(RecipientRewriteTable.WILDCARD,aliasDomain,domain,ALIASDOMAIN_TYPE));
    Iterator<String> mappings=virtualUserTable.getMappings(user,aliasDomain).iterator();
    assertEquals("Domain mapped as first ",mappings.next(),user + "@" + domain);
    assertEquals("Address mapped as second ",mappings.next(),user2 + "@" + domain);
    assertTrue("Remove mapping",removeMapping(RecipientRewriteTable.WILDCARD,aliasDomain,user2 + "@" + domain,ADDRESS_TYPE));
    assertTrue("Remove aliasDomain mapping",removeMapping(RecipientRewriteTable.WILDCARD,aliasDomain,domain,ALIASDOMAIN_TYPE));
  }
 catch (  IllegalArgumentException e) {
    fail("Storing failed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.smtpserver.POP3BeforeSMTPHandlerTest </h4><pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAuthWorks(){
  POP3BeforeSMTPHandler handler=new POP3BeforeSMTPHandler();
  setupMockedSMTPSession();
  POP3BeforeSMTPHelper.addIPAddress("192.168.200.1");
  assertFalse(mockedSession.isRelayingAllowed());
  handler.onConnect(mockedSession);
  assertTrue(mockedSession.isRelayingAllowed());
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIPGetRemoved(){
  long sleepTime=100;
  POP3BeforeSMTPHandler handler=new POP3BeforeSMTPHandler();
  setupMockedSMTPSession();
  POP3BeforeSMTPHelper.addIPAddress("192.168.200.1");
  assertFalse(mockedSession.isRelayingAllowed());
  try {
    Thread.sleep(sleepTime);
    POP3BeforeSMTPHelper.removeExpiredIP(10);
    handler.onConnect(mockedSession);
    assertFalse(mockedSession.isRelayingAllowed());
  }
 catch (  InterruptedException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.smtpserver.SMTPServerTest </h4><pre class="type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxRcpt() throws Exception {
  smtpConfiguration.setMaxRcpt(1);
  init(smtpConfiguration);
  SMTPClient smtpProtocol1=new SMTPClient();
  smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
  assertTrue("first connection taken",smtpProtocol1.isConnected());
  assertNull("no mail received by mail server",queue.getLastMail());
  smtpProtocol1.helo(InetAddress.getLocalHost().toString());
  String sender1="mail_sender1@james.apache.org";
  String rcpt1="test@localhost";
  String rcpt2="test2@localhost";
  smtpProtocol1.setSender(sender1);
  smtpProtocol1.addRecipient(rcpt1);
  smtpProtocol1.addRecipient(rcpt2);
  assertEquals("expected 452 error",452,smtpProtocol1.getReplyCode());
  smtpProtocol1.sendShortMessageData("Subject: test\r\n\r\nTest body testMaxRcpt1\r\n");
  smtpProtocol1.setSender(sender1);
  smtpProtocol1.addRecipient(rcpt1);
  smtpProtocol1.sendShortMessageData("Subject: test\r\n\r\nTest body testMaxRcpt2\r\n");
  smtpProtocol1.quit();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReverseEqualsHelo() throws Exception {
  smtpConfiguration.setReverseEqualsHelo();
  smtpConfiguration.setAuthorizedAddresses("192.168.0.1");
  try {
    dnsServer.setLocalhostByName(InetAddress.getByName("james.apache.org"));
  }
 catch (  UnknownHostException e) {
    fail("james.apache.org currently cannot be resolved (check your DNS/internet connection/proxy settings to make test pass)");
  }
  try {
    init(smtpConfiguration);
    SMTPClient smtpProtocol1=new SMTPClient();
    smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
    assertTrue("first connection taken",smtpProtocol1.isConnected());
    assertNull("no mail received by mail server",queue.getLastMail());
    String helo1="abgsfe3rsf.de";
    String helo2="james.apache.org";
    String mail="sender";
    String rcpt="recipient";
    smtpProtocol1.sendCommand("helo",helo1);
    smtpProtocol1.setSender(mail);
    smtpProtocol1.addRecipient(rcpt);
    assertEquals("expected error: helo not equals reverse of ip",501,smtpProtocol1.getReplyCode());
    smtpProtocol1.sendCommand("helo",helo2);
    smtpProtocol1.setSender(mail);
    smtpProtocol1.addRecipient(rcpt);
    assertEquals("Helo accepted",250,smtpProtocol1.getReplyCode());
    smtpProtocol1.quit();
  }
  finally {
    dnsServer.setLocalhostByName(null);
  }
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEhloResolvDefault() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtpProtocol1=new SMTPClient();
  smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol1.sendCommand("ehlo","abgsfe3rsf.de");
  assertEquals("ehlo accepted",250,smtpProtocol1.getReplyCode());
  smtpProtocol1.quit();
}

</code></pre>

<br>
<pre class="type-1 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testReceivedHeader() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtp=newSMTPClient();
  assertNull("no mail received by mail server",queue.getLastMail());
  smtp.helo(InetAddress.getLocalHost().toString());
  smtp.setSender("mail@localhost");
  smtp.addRecipient("mail@localhost");
  smtp.sendShortMessageData("Subject: test\r\n\r\n");
  smtp.quit();
  smtp.disconnect();
  assertNotNull("spooled mail has Received header",queue.getLastMail().getMessage().getHeader("Received"));
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAuthWithEmptySender() throws Exception {
  smtpConfiguration.setAuthorizedAddresses("128.0.0.1/8");
  smtpConfiguration.setAuthorizingAnnounce();
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo " + InetAddress.getLocalHost());
  String userName="test_user_smtp";
  usersRepository.addUser(userName,"pwd");
  smtpProtocol.setSender("");
  smtpProtocol.sendCommand("AUTH PLAIN");
  smtpProtocol.sendCommand(Base64.encodeAsString("\0" + userName + "\0pwd\0"));
  assertEquals("authenticated",235,smtpProtocol.getReplyCode());
  smtpProtocol.addRecipient("mail@sample.com");
  assertEquals("expected error",503,smtpProtocol.getReplyCode());
  smtpProtocol.quit();
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRelayingDenied() throws Exception {
  smtpConfiguration.setAuthorizedAddresses("128.0.0.1/8");
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo " + InetAddress.getLocalHost());
  smtpProtocol.setSender("mail@sample.com");
  smtpProtocol.addRecipient("maila@sample.com");
  assertEquals("expected 550 error",550,smtpProtocol.getReplyCode());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoRecepientSpecified() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo " + InetAddress.getLocalHost());
  smtpProtocol.setSender("mail@sample.com");
  smtpProtocol.sendShortMessageData("Subject: test\r\n\r\nTest body testNoRecepientSpecified\r\n");
  assertTrue("sending succeeded without recepient",SMTPReply.isNegativePermanent(smtpProtocol.getReplyCode()));
  smtpProtocol.quit();
  assertNull("no mail received by mail server",queue.getLastMail());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMaxLineLength() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < AbstractChannelPipelineFactory.MAX_LINE_LENGTH; i++) {
    sb.append("A");
  }
  smtpProtocol.sendCommand("EHLO " + sb.toString());
  System.out.println(smtpProtocol.getReplyString());
  assertEquals("Line length exceed",500,smtpProtocol.getReplyCode());
  smtpProtocol.sendCommand("EHLO test");
  assertEquals("Line length ok",250,smtpProtocol.getReplyCode());
  smtpProtocol.quit();
  smtpProtocol.disconnect();
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeloEnforcementDisabled() throws Exception {
  smtpConfiguration.setHeloEhloEnforcement(false);
  init(smtpConfiguration);
  SMTPClient smtpProtocol1=new SMTPClient();
  smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
  assertTrue("first connection taken",smtpProtocol1.isConnected());
  assertNull("no mail received by mail server",queue.getLastMail());
  String sender1="mail_sender1@localhost";
  smtpProtocol1.setSender(sender1);
  smtpProtocol1.quit();
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAuthCancel() throws Exception {
  smtpConfiguration.setAuthorizedAddresses("127.0.0.1/8");
  smtpConfiguration.setAuthorizingAnnounce();
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo",InetAddress.getLocalHost().toString());
  smtpProtocol.sendCommand("AUTH PLAIN");
  assertEquals("start auth.",334,smtpProtocol.getReplyCode());
  smtpProtocol.sendCommand("*");
  assertEquals("cancel auth.",501,smtpProtocol.getReplyCode());
  smtpProtocol.quit();
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHeloResolvDefault() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtpProtocol1=new SMTPClient();
  smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol1.helo("abgsfe3rsf.de");
  assertEquals("Helo accepted",250,smtpProtocol1.getReplyCode());
  smtpProtocol1.quit();
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSenderDomainResolvRelayClient() throws Exception {
  smtpConfiguration.setSenderDomainResolv();
  smtpConfiguration.setCheckAuthNetworks(true);
  init(smtpConfiguration);
  SMTPClient smtpProtocol1=new SMTPClient();
  smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
  assertTrue("first connection taken",smtpProtocol1.isConnected());
  assertNull("no mail received by mail server",queue.getLastMail());
  smtpProtocol1.helo(InetAddress.getLocalHost().toString());
  String sender1="mail_sender1@xfwrqqfgfe.de";
  String sender2="mail_sender2@james.apache.org";
  smtpProtocol1.setSender(sender1);
  assertEquals("expected 501 error",501,smtpProtocol1.getReplyCode());
  smtpProtocol1.setSender(sender2);
  smtpProtocol1.quit();
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwoSimultaneousMails() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtpProtocol1=new SMTPClient();
  smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
  SMTPClient smtpProtocol2=new SMTPClient();
  smtpProtocol2.connect("127.0.0.1",smtpListenerPort);
  assertTrue("first connection taken",smtpProtocol1.isConnected());
  assertTrue("second connection taken",smtpProtocol2.isConnected());
  assertNull("no mail received by mail server",queue.getLastMail());
  smtpProtocol1.helo(InetAddress.getLocalHost().toString());
  smtpProtocol2.helo(InetAddress.getLocalHost().toString());
  String sender1="mail_sender1@localhost";
  String recipient1="mail_recipient1@localhost";
  smtpProtocol1.setSender(sender1);
  smtpProtocol1.addRecipient(recipient1);
  String sender2="mail_sender2@localhost";
  String recipient2="mail_recipient2@localhost";
  smtpProtocol2.setSender(sender2);
  smtpProtocol2.addRecipient(recipient2);
  smtpProtocol1.sendShortMessageData("Subject: test\r\n\r\nTest body testTwoSimultaneousMails1\r\n.\r\n");
  verifyLastMail(sender1,recipient1,null);
  smtpProtocol2.sendShortMessageData("Subject: test\r\n\r\nTest body testTwoSimultaneousMails2\r\n.\r\n");
  verifyLastMail(sender2,recipient2,null);
  smtpProtocol1.quit();
  smtpProtocol2.quit();
  smtpProtocol1.disconnect();
  smtpProtocol2.disconnect();
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSenderDomainResolvRelayClientDefault() throws Exception {
  smtpConfiguration.setSenderDomainResolv();
  init(smtpConfiguration);
  SMTPClient smtpProtocol1=new SMTPClient();
  smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
  assertTrue("first connection taken",smtpProtocol1.isConnected());
  assertNull("no mail received by mail server",queue.getLastMail());
  smtpProtocol1.helo(InetAddress.getLocalHost().toString());
  String sender1="mail_sender1@xfwrqqfgfe.de";
  smtpProtocol1.setSender(sender1);
  smtpProtocol1.quit();
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddressBracketsEnforcementEnabled() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo",InetAddress.getLocalHost().toString());
  smtpProtocol.sendCommand("mail from:","test@localhost");
  assertEquals("reject",501,smtpProtocol.getReplyCode());
  smtpProtocol.sendCommand("mail from:","<test@localhost>");
  assertEquals("accept",250,smtpProtocol.getReplyCode());
  smtpProtocol.sendCommand("rcpt to:","mail@sample.com");
  assertEquals("reject",501,smtpProtocol.getReplyCode());
  smtpProtocol.sendCommand("rcpt to:","<mail@sample.com>");
  assertEquals("accept",250,smtpProtocol.getReplyCode());
  smtpProtocol.quit();
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHandleMessageSizeLimitRespected() throws Exception {
  smtpConfiguration.setMaxMessageSize(1);
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo " + InetAddress.getLocalHost());
  smtpProtocol.setSender("mail@localhost");
  smtpProtocol.addRecipient("mail@localhost");
  Writer wr=smtpProtocol.sendMessageData();
  wr.write("1234567810123456782012345678301234567840123456785012345678601234567870123456788012345678901234567100");
  wr.write("1234567810123456782012345678301234567840123456785012345678601234567870123456788012345678901234567100");
  wr.write("1234567810123456782012345678301234567840123456785012345678601234567870123456788012345678901234567100");
  wr.write("1234567810123456782012345678301234567840123456785012345678601234567870123456788012345678901234567100");
  wr.write("1234567810123456782012345678301234567840123456785012345678601234567870123456788012345678901234567100");
  wr.write("1234567810123456782012345678301234567840123456785012345678601234567870123456788012345678901234567100");
  wr.write("1234567810123456782012345678301234567840123456785012345678601234567870123456788012345678901234567100");
  wr.write("1234567810123456782012345678301234567840123456785012345678601234567870123456788012345678901234567100");
  wr.write("1234567810123456782012345678301234567840123456785012345678601234567870123456788012345678901234567100");
  wr.write("1234567810123456782012345678301234567840123456785012345678601234567870123456788012345678901234567100");
  wr.write("1234567810123456782012\r\n");
  wr.close();
  assertTrue(smtpProtocol.completePendingCommand());
  assertEquals("expected 250 ok",250,smtpProtocol.getReplyCode());
}

</code></pre>

<br>
<pre class="type-9 type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReverseEqualsEhlo() throws Exception {
  smtpConfiguration.setReverseEqualsEhlo();
  smtpConfiguration.setAuthorizedAddresses("192.168.0.1");
  InetAddress jamesDomain=null;
  try {
    jamesDomain=dnsServer.getByName("james.apache.org");
  }
 catch (  UnknownHostException e) {
    fail("james.apache.org currently cannot be resolved (check your DNS/internet connection/proxy settings to make test pass)");
  }
  dnsServer.setLocalhostByName(jamesDomain);
  try {
    init(smtpConfiguration);
    SMTPClient smtpProtocol1=new SMTPClient();
    smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
    assertTrue("first connection taken",smtpProtocol1.isConnected());
    assertNull("no mail received by mail server",queue.getLastMail());
    String ehlo1="abgsfe3rsf.de";
    String ehlo2="james.apache.org";
    String mail="sender";
    String rcpt="recipient";
    smtpProtocol1.sendCommand("ehlo",ehlo1);
    smtpProtocol1.setSender(mail);
    smtpProtocol1.addRecipient(rcpt);
    assertEquals("expected error: ehlo not equals reverse of ip",501,smtpProtocol1.getReplyCode());
    smtpProtocol1.sendCommand("ehlo",ehlo2);
    smtpProtocol1.setSender(mail);
    smtpProtocol1.addRecipient(rcpt);
    assertEquals("ehlo accepted",250,smtpProtocol1.getReplyCode());
    smtpProtocol1.quit();
  }
  finally {
    dnsServer.setLocalhostByName(null);
  }
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuth() throws Exception {
  smtpConfiguration.setAuthorizedAddresses("128.0.0.1/8");
  smtpConfiguration.setAuthorizingAnnounce();
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo",InetAddress.getLocalHost().toString());
  String[] capabilityRes=smtpProtocol.getReplyStrings();
  List<String> capabilitieslist=new ArrayList<String>();
  for (int i=1; i < capabilityRes.length; i++) {
    capabilitieslist.add(capabilityRes[i].substring(4));
  }
  assertTrue("anouncing auth required",capabilitieslist.contains("AUTH LOGIN PLAIN"));
  String userName="test_user_smtp";
  String noexistUserName="noexist_test_user_smtp";
  String sender="test_user_smtp@localhost";
  smtpProtocol.sendCommand("AUTH FOO",null);
  assertEquals("expected error: unrecognized authentication type",504,smtpProtocol.getReplyCode());
  smtpProtocol.setSender(sender);
  smtpProtocol.addRecipient("mail@sample.com");
  assertEquals("expected 530 error",530,smtpProtocol.getReplyCode());
  assertFalse("user not existing",usersRepository.contains(noexistUserName));
  smtpProtocol.sendCommand("AUTH PLAIN");
  smtpProtocol.sendCommand(Base64.encodeAsString("\0" + noexistUserName + "\0pwd\0"));
  assertEquals("expected error",535,smtpProtocol.getReplyCode());
  usersRepository.addUser(userName,"pwd");
  smtpProtocol.sendCommand("AUTH PLAIN");
  smtpProtocol.sendCommand(Base64.encodeAsString("\0" + userName + "\0wrongpwd\0"));
  assertEquals("expected error",535,smtpProtocol.getReplyCode());
  smtpProtocol.sendCommand("AUTH PLAIN");
  smtpProtocol.sendCommand(Base64.encodeAsString("\0" + userName + "\0pwd\0"));
  assertEquals("authenticated",235,smtpProtocol.getReplyCode());
  smtpProtocol.sendCommand("AUTH PLAIN");
  assertEquals("expected error: User has previously authenticated.",503,smtpProtocol.getReplyCode());
  smtpProtocol.addRecipient("mail@sample.com");
  smtpProtocol.sendShortMessageData("Subject: test\r\n\r\nTest body testAuth\r\n");
  smtpProtocol.quit();
  assertNotNull("mail received by mail server",queue.getLastMail());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddressBracketsEnforcementDisabled() throws Exception {
  smtpConfiguration.setAddressBracketsEnforcement(false);
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo",InetAddress.getLocalHost().toString());
  smtpProtocol.sendCommand("mail from:","test@localhost");
  assertEquals("accept",250,smtpProtocol.getReplyCode());
  smtpProtocol.sendCommand("rcpt to:","mail@sample.com");
  assertEquals("accept",250,smtpProtocol.getReplyCode());
  smtpProtocol.quit();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo",InetAddress.getLocalHost().toString());
  smtpProtocol.sendCommand("mail from:","<test@localhost>");
  assertEquals("accept",250,smtpProtocol.getReplyCode());
  smtpProtocol.sendCommand("rcpt to:","<mail@sample.com>");
  assertEquals("accept",250,smtpProtocol.getReplyCode());
  smtpProtocol.quit();
}

</code></pre>

<br>
<pre class="type-1 type-12 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testEmptyMessageReceivedHeader() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtp=newSMTPClient();
  assertNull("no mail received by mail server",queue.getLastMail());
  smtp.helo(InetAddress.getLocalHost().toString());
  smtp.setSender("mail@localhost");
  smtp.addRecipient("mail@localhost");
  smtp.sendShortMessageData("");
  smtp.quit();
  smtp.disconnect();
  assertNotNull("spooled mail has Received header",queue.getLastMail().getMessage().getHeader("Received"));
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSenderDomainResolv() throws Exception {
  smtpConfiguration.setSenderDomainResolv();
  smtpConfiguration.setAuthorizedAddresses("192.168.0.1/32");
  init(smtpConfiguration);
  SMTPClient smtpProtocol1=new SMTPClient();
  smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
  assertTrue("first connection taken",smtpProtocol1.isConnected());
  assertNull("no mail received by mail server",queue.getLastMail());
  smtpProtocol1.helo(InetAddress.getLocalHost().toString());
  String sender1="mail_sender1@xfwrqqfgfe.de";
  smtpProtocol1.setSender(sender1);
  assertEquals("expected 501 error",501,smtpProtocol1.getReplyCode());
  smtpProtocol1.addRecipient("test@localhost");
  assertEquals("Recipient not accepted cause no valid sender",503,smtpProtocol1.getReplyCode());
  smtpProtocol1.quit();
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeloEnforcement() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtpProtocol1=new SMTPClient();
  smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
  assertTrue("first connection taken",smtpProtocol1.isConnected());
  assertNull("no mail received by mail server",queue.getLastMail());
  String sender1="mail_sender1@localhost";
  smtpProtocol1.setSender(sender1);
  assertEquals("expected 503 error",503,smtpProtocol1.getReplyCode());
  smtpProtocol1.helo(InetAddress.getLocalHost().toString());
  smtpProtocol1.setSender(sender1);
  smtpProtocol1.quit();
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHandleAnnouncedMessageSizeLimitExceeded() throws Exception {
  smtpConfiguration.setMaxMessageSize(1);
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo " + InetAddress.getLocalHost());
  smtpProtocol.sendCommand("MAIL FROM:<mail@localhost> SIZE=1025",null);
  assertEquals("expected error: max msg size exceeded",552,smtpProtocol.getReplyCode());
  smtpProtocol.addRecipient("mail@localhost");
  assertEquals("expected error",503,smtpProtocol.getReplyCode());
}

</code></pre>

<br>
<pre class="type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDNSRBLRejectWorks() throws Exception {
  smtpConfiguration.setAuthorizedAddresses("192.168.0.1/32");
  smtpConfiguration.useRBL(true);
  init(smtpConfiguration);
  dnsServer.setLocalhostByName(InetAddress.getByName("127.0.0.1"));
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo",InetAddress.getLocalHost().toString());
  String sender="test_user_smtp@localhost";
  smtpProtocol.setSender(sender);
  smtpProtocol.addRecipient("mail@sample.com");
  assertEquals("reject",550,smtpProtocol.getReplyCode());
  smtpProtocol.sendShortMessageData("Subject: test\r\n\r\nTest body testDNSRBLRejectWorks\r\n");
  smtpProtocol.quit();
  assertNull("mail reject by mail server",queue.getLastMail());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleMailSendWithEHLO() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  assertNull("no mail received by mail server",queue.getLastMail());
  smtpProtocol.sendCommand("EHLO " + InetAddress.getLocalHost());
  String[] capabilityRes=smtpProtocol.getReplyStrings();
  List<String> capabilitieslist=new ArrayList<String>();
  for (int i=1; i < capabilityRes.length; i++) {
    capabilitieslist.add(capabilityRes[i].substring(4));
  }
  assertEquals("capabilities",3,capabilitieslist.size());
  assertTrue("capabilities present PIPELINING",capabilitieslist.contains("PIPELINING"));
  assertTrue("capabilities present ENHANCEDSTATUSCODES",capabilitieslist.contains("ENHANCEDSTATUSCODES"));
  assertTrue("capabilities present 8BITMIME",capabilitieslist.contains("8BITMIME"));
  smtpProtocol.setSender("mail@localhost");
  smtpProtocol.addRecipient("mail@localhost");
  smtpProtocol.sendShortMessageData("Subject: test\r\n\r\nBody\r\n\r\n.\r\n");
  smtpProtocol.quit();
  smtpProtocol.disconnect();
  assertNotNull("mail received by mail server",queue.getLastMail());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDNSRBLNotRejectAuthUser() throws Exception {
  smtpConfiguration.setAuthorizedAddresses("192.168.0.1/32");
  smtpConfiguration.setAuthorizingAnnounce();
  smtpConfiguration.useRBL(true);
  init(smtpConfiguration);
  dnsServer.setLocalhostByName(InetAddress.getByName("127.0.0.1"));
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  smtpProtocol.sendCommand("ehlo",InetAddress.getLocalHost().toString());
  String[] capabilityRes=smtpProtocol.getReplyStrings();
  List<String> capabilitieslist=new ArrayList<String>();
  for (int i=1; i < capabilityRes.length; i++) {
    capabilitieslist.add(capabilityRes[i].substring(4));
  }
  assertTrue("anouncing auth required",capabilitieslist.contains("AUTH LOGIN PLAIN"));
  String userName="test_user_smtp";
  String sender="test_user_smtp@localhost";
  smtpProtocol.setSender(sender);
  usersRepository.addUser(userName,"pwd");
  smtpProtocol.sendCommand("AUTH PLAIN");
  smtpProtocol.sendCommand(Base64.encodeAsString("\0" + userName + "\0pwd\0"));
  assertEquals("authenticated",235,smtpProtocol.getReplyCode());
  smtpProtocol.addRecipient("mail@sample.com");
  assertEquals("authenticated.. not reject",250,smtpProtocol.getReplyCode());
  smtpProtocol.sendShortMessageData("Subject: test\r\n\r\nTest body testDNSRBLNotRejectAuthUser\r\n");
  smtpProtocol.quit();
  assertNotNull("mail received by mail server",queue.getLastMail());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwoMailsInSequence() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtpProtocol1=new SMTPClient();
  smtpProtocol1.connect("127.0.0.1",smtpListenerPort);
  assertTrue("first connection taken",smtpProtocol1.isConnected());
  assertNull("no mail received by mail server",queue.getLastMail());
  smtpProtocol1.helo(InetAddress.getLocalHost().toString());
  String sender1="mail_sender1@localhost";
  String recipient1="mail_recipient1@localhost";
  smtpProtocol1.setSender(sender1);
  smtpProtocol1.addRecipient(recipient1);
  smtpProtocol1.sendShortMessageData("Subject: test\r\n\r\nTest body testTwoMailsInSequence1\r\n");
  verifyLastMail(sender1,recipient1,null);
  String sender2="mail_sender2@localhost";
  String recipient2="mail_recipient2@localhost";
  smtpProtocol1.setSender(sender2);
  smtpProtocol1.addRecipient(recipient2);
  smtpProtocol1.sendShortMessageData("Subject: test2\r\n\r\nTest body2 testTwoMailsInSequence2\r\n");
  verifyLastMail(sender2,recipient2,null);
  smtpProtocol1.quit();
  smtpProtocol1.disconnect();
}

</code></pre>

<br>
<pre class="type-1 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testSimpleMailSendWithHELO() throws Exception {
  init(smtpConfiguration);
  SMTPClient smtpProtocol=new SMTPClient();
  smtpProtocol.connect("127.0.0.1",smtpListenerPort);
  assertNull("no mail received by mail server",queue.getLastMail());
  smtpProtocol.helo(InetAddress.getLocalHost().toString());
  smtpProtocol.setSender("mail@localhost");
  smtpProtocol.addRecipient("mail@localhost");
  smtpProtocol.sendShortMessageData("Subject: test mail\r\n\r\nTest body testSimpleMailSendWithHELO\r\n.\r\n");
  smtpProtocol.quit();
  smtpProtocol.disconnect();
  assertNotNull("mail received by mail server",queue.getLastMail());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.smtpserver.SPFHandlerTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSPFNoRecord() throws Exception {
  MailAddress sender=new MailAddress("test@spf6.james.apache.org");
  MailAddress rcpt=new MailAddress("test@localhost");
  setupMockedSMTPSession("192.168.100.1","spf6.james.apache.org");
  SPFHandler spf=new SPFHandler();
  spf.setDNSService(mockedDnsService);
  assertEquals("declined",HookReturnCode.DECLINED,spf.doMail(mockedSMTPSession,sender).getResult());
  assertEquals("declined",HookReturnCode.DECLINED,spf.doRcpt(mockedSMTPSession,sender,rcpt).getResult());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSPFpermError() throws Exception {
  MailAddress sender=new MailAddress("test@spf4.james.apache.org");
  MailAddress rcpt=new MailAddress("test@localhost");
  setupMockedSMTPSession("192.168.100.1","spf4.james.apache.org");
  SPFHandler spf=new SPFHandler();
  spf.setDNSService(mockedDnsService);
  spf.setBlockSoftFail(true);
  assertEquals("declined",HookReturnCode.DECLINED,spf.doMail(mockedSMTPSession,sender).getResult());
  assertEquals("permerror reject",HookReturnCode.DENY,spf.doRcpt(mockedSMTPSession,sender,rcpt).getResult());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSPFsoftFail() throws Exception {
  MailAddress sender=new MailAddress("test@spf3.james.apache.org");
  MailAddress rcpt=new MailAddress("test@localhost");
  setupMockedSMTPSession("192.168.100.1","spf3.james.apache.org");
  SPFHandler spf=new SPFHandler();
  spf.setDNSService(mockedDnsService);
  assertEquals("declined",HookReturnCode.DECLINED,spf.doMail(mockedSMTPSession,sender).getResult());
  assertEquals("softfail declined",HookReturnCode.DECLINED,spf.doRcpt(mockedSMTPSession,sender,rcpt).getResult());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSPFfail() throws Exception {
  MailAddress sender=new MailAddress("test@spf2.james.apache.org");
  MailAddress rcpt=new MailAddress("test@localhost");
  setupMockedSMTPSession("192.168.100.1","spf2.james.apache.org");
  SPFHandler spf=new SPFHandler();
  spf.setDNSService(mockedDnsService);
  assertEquals("declined",HookReturnCode.DECLINED,spf.doMail(mockedSMTPSession,sender).getResult());
  assertEquals("fail",HookReturnCode.DENY,spf.doRcpt(mockedSMTPSession,sender,rcpt).getResult());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSPFsoftFailRejectEnabled() throws Exception {
  MailAddress sender=new MailAddress("test@spf3.james.apache.org");
  MailAddress rcpt=new MailAddress("test@localhost");
  setupMockedSMTPSession("192.168.100.1","spf3.james.apache.org");
  SPFHandler spf=new SPFHandler();
  spf.setDNSService(mockedDnsService);
  spf.setBlockSoftFail(true);
  assertEquals("declined",HookReturnCode.DECLINED,spf.doMail(mockedSMTPSession,sender).getResult());
  assertEquals("softfail reject",HookReturnCode.DENY,spf.doRcpt(mockedSMTPSession,sender,rcpt).getResult());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSPFpermErrorRejectDisabled() throws Exception {
  MailAddress sender=new MailAddress("test@spf4.james.apache.org");
  MailAddress rcpt=new MailAddress("test@localhost");
  setupMockedSMTPSession("192.168.100.1","spf4.james.apache.org");
  SPFHandler spf=new SPFHandler();
  spf.setDNSService(mockedDnsService);
  spf.setBlockPermError(false);
  assertEquals("declined",HookReturnCode.DECLINED,spf.doMail(mockedSMTPSession,sender).getResult());
  assertEquals("declined",HookReturnCode.DECLINED,spf.doRcpt(mockedSMTPSession,sender,rcpt).getResult());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSPFtempError() throws Exception {
  MailAddress sender=new MailAddress("test@spf5.james.apache.org");
  MailAddress rcpt=new MailAddress("test@localhost");
  setupMockedSMTPSession("192.168.100.1","spf5.james.apache.org");
  SPFHandler spf=new SPFHandler();
  spf.setDNSService(mockedDnsService);
  assertEquals("declined",HookReturnCode.DECLINED,spf.doMail(mockedSMTPSession,sender).getResult());
  assertEquals("temperror denysoft",HookReturnCode.DENYSOFT,spf.doRcpt(mockedSMTPSession,sender,rcpt).getResult());
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSPFpass() throws Exception {
  MailAddress sender=new MailAddress("test@spf1.james.apache.org");
  MailAddress rcpt=new MailAddress("test@localhost");
  setupMockedSMTPSession("192.168.100.1","spf1.james.apache.org");
  SPFHandler spf=new SPFHandler();
  spf.setDNSService(mockedDnsService);
  assertEquals("declined",HookReturnCode.DECLINED,spf.doMail(mockedSMTPSession,sender).getResult());
  assertEquals("declined",HookReturnCode.DECLINED,spf.doRcpt(mockedSMTPSession,sender,rcpt).getResult());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.smtpserver.SpamAssassinHandlerTest </h4><pre class="type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonSpam() throws IOException, MessagingException {
  int port=PortUtil.getNonPrivilegedPort();
  MockSpamd spamd=new MockSpamd(port);
  new Thread(spamd).start();
  SMTPSession session=setupMockedSMTPSession(setupMockedMail(setupMockedMimeMessage("test")));
  SpamAssassinHandler handler=new SpamAssassinHandler();
  handler.setSpamdHost(SPAMD_HOST);
  handler.setSpamdPort(port);
  handler.setSpamdRejectionHits(200.0);
  HookResult response=handler.onMessage(session,mockedMail);
  assertEquals("Email was not rejected",response.getResult(),HookReturnCode.DECLINED);
  assertEquals("email was not spam",mockedMail.getAttribute(SpamAssassinInvoker.FLAG_MAIL_ATTRIBUTE_NAME),"NO");
  assertNotNull("spam hits",mockedMail.getAttribute(SpamAssassinInvoker.STATUS_MAIL_ATTRIBUTE_NAME));
}

</code></pre>

<br>
<pre class="type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpamReject() throws IOException, MessagingException {
  int port=PortUtil.getNonPrivilegedPort();
  new Thread(new MockSpamd(port)).start();
  SMTPSession session=setupMockedSMTPSession(setupMockedMail(setupMockedMimeMessage(MockSpamd.GTUBE)));
  SpamAssassinHandler handler=new SpamAssassinHandler();
  handler.setSpamdHost(SPAMD_HOST);
  handler.setSpamdPort(port);
  handler.setSpamdRejectionHits(200.0);
  HookResult response=handler.onMessage(session,mockedMail);
  assertEquals("Email was rejected",response.getResult(),HookReturnCode.DENY);
  assertEquals("email was spam",mockedMail.getAttribute(SpamAssassinInvoker.FLAG_MAIL_ATTRIBUTE_NAME),"YES");
  assertNotNull("spam hits",mockedMail.getAttribute(SpamAssassinInvoker.STATUS_MAIL_ATTRIBUTE_NAME));
}

</code></pre>

<br>
<pre class="type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpam() throws IOException, MessagingException {
  int port=PortUtil.getNonPrivilegedPort();
  new Thread(new MockSpamd(port)).start();
  SMTPSession session=setupMockedSMTPSession(setupMockedMail(setupMockedMimeMessage(MockSpamd.GTUBE)));
  SpamAssassinHandler handler=new SpamAssassinHandler();
  handler.setSpamdHost(SPAMD_HOST);
  handler.setSpamdPort(port);
  handler.setSpamdRejectionHits(2000.0);
  HookResult response=handler.onMessage(session,mockedMail);
  assertEquals("Email was not rejected",response.getResult(),HookReturnCode.DECLINED);
  assertEquals("email was spam",mockedMail.getAttribute(SpamAssassinInvoker.FLAG_MAIL_ATTRIBUTE_NAME),"YES");
  assertNotNull("spam hits",mockedMail.getAttribute(SpamAssassinInvoker.STATUS_MAIL_ATTRIBUTE_NAME));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.smtpserver.URIRBLHandlerTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBlocked() throws IOException, MessagingException {
  ArrayList servers=new ArrayList();
  servers.add(URISERVER);
  SMTPSession session=setupMockedSMTPSession(setupMockedMail(setupMockedMimeMessage("http://" + BAD_DOMAIN1 + "/")));
  URIRBLHandler handler=new URIRBLHandler();
  handler.setDNSService(setupMockedDnsServer());
  handler.setUriRblServer(servers);
  HookResult response=handler.onMessage(session,mockedMail);
  assertEquals("Email was rejected",response.getResult(),HookReturnCode.DENY);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBlockedMultiPart() throws IOException, MessagingException {
  ArrayList servers=new ArrayList();
  servers.add(URISERVER);
  SMTPSession session=setupMockedSMTPSession(setupMockedMail(setupMockedMimeMessageMP("http://" + BAD_DOMAIN1 + "/"+ " "+ "http://"+ GOOD_DOMAIN+ "/")));
  URIRBLHandler handler=new URIRBLHandler();
  handler.setDNSService(setupMockedDnsServer());
  handler.setUriRblServer(servers);
  HookResult response=handler.onMessage(session,mockedMail);
  assertEquals("Email was rejected",response.getResult(),HookReturnCode.DENY);
}

</code></pre>

<br>
<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNotBlocked() throws IOException, MessagingException {
  ArrayList servers=new ArrayList();
  servers.add(URISERVER);
  SMTPSession session=setupMockedSMTPSession(setupMockedMail(setupMockedMimeMessage("http://" + GOOD_DOMAIN + "/")));
  URIRBLHandler handler=new URIRBLHandler();
  handler.setDNSService(setupMockedDnsServer());
  handler.setUriRblServer(servers);
  HookResult response=handler.onMessage(session,mockedMail);
  assertEquals("Email was not rejected",response.getResult(),HookReturnCode.DECLINED);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.smtpserver.ValidRcptHandlerTest </h4><pre class="type-7 type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNotRejectValidUser() throws Exception {
  MailAddress mailAddress=new MailAddress(VALID_USER + "@localhost");
  SMTPSession session=setupMockedSMTPSession(setupMockedSMTPConfiguration(),mailAddress,false);
  int rCode=handler.doRcpt(session,null,mailAddress).getResult();
  assertEquals("Not rejected",rCode,HookReturnCode.DECLINED);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRejectInvalidUser() throws Exception {
  MailAddress mailAddress=new MailAddress(INVALID_USER + "@localhost");
  SMTPSession session=setupMockedSMTPSession(setupMockedSMTPConfiguration(),mailAddress,false);
  int rCode=handler.doRcpt(session,null,mailAddress).getResult();
  assertEquals("Rejected",rCode,HookReturnCode.DENY);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHasErrorMapping() throws Exception {
  MailAddress mailAddress=new MailAddress(USER2 + "@localhost");
  SMTPSession session=setupMockedSMTPSession(setupMockedSMTPConfiguration(),mailAddress,false);
  int rCode=handler.doRcpt(session,null,mailAddress).getResult();
  assertNull("Valid Error mapping",session.getAttachment("VALID_USER",State.Transaction));
  assertEquals("Error mapping",rCode,HookReturnCode.DENY);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRejectInvalidUserRelay() throws Exception {
  MailAddress mailAddress=new MailAddress(INVALID_USER + "@localhost");
  SMTPSession session=setupMockedSMTPSession(setupMockedSMTPConfiguration(),mailAddress,true);
  int rCode=handler.doRcpt(session,null,mailAddress).getResult();
  assertEquals("Rejected",rCode,HookReturnCode.DENY);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHasAddressMapping() throws Exception {
  MailAddress mailAddress=new MailAddress(USER1 + "@localhost");
  SMTPSession session=setupMockedSMTPSession(setupMockedSMTPConfiguration(),mailAddress,false);
  int rCode=handler.doRcpt(session,null,mailAddress).getResult();
  assertEquals("Not rejected",rCode,HookReturnCode.DECLINED);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.smtpserver.ValidRcptMXTest </h4><pre class="type-7 type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRejectLoopbackMX() throws ParseException, MailAddressException {
  Collection bNetworks=new ArrayList();
  bNetworks.add("127.0.0.1");
  DNSService dns=setupMockedDNSServer();
  MailAddress mailAddress=new MailAddress("test@" + INVALID_HOST);
  SMTPSession session=setupMockedSMTPSession(mailAddress);
  ValidRcptMX handler=new ValidRcptMX();
  handler.setDNSService(dns);
  handler.setBannedNetworks(bNetworks,dns);
  int rCode=handler.doRcpt(session,null,mailAddress).getResult();
  assertEquals("Reject",rCode,HookReturnCode.DENY);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.transport.mailets.RecipientRewriteTableTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddressMapping() throws Exception {
  Mail mail=createMail(new String[]{"test@localhost","apache@localhost"});
  table.service(mail);
  assertEquals(3,mail.getRecipients().size());
  Iterator<MailAddress> it=mail.getRecipients().iterator();
  assertEquals("whatever@localhost",it.next().toString());
  assertEquals("blah@localhost",it.next().toString());
  assertEquals("apache@localhost",it.next().toString());
}

</code></pre>

<br>
<pre class="type-17 type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMixedLocalAndRemoteRecipients() throws Exception {
  RecordingMailContext context=new RecordingMailContext();
  RecipientRewriteTable mailet=createRecipientRewriteMailet(rewriteTableMock(mapFrom("mixed@localhost").to("a@localhost","b@remote.com")),context);
  Mail mail=createMail(new String[]{"mixed@localhost"});
  mailet.service(mail);
  assertEquals(context.getSendmails().size(),1);
  MimeMessage msg=context.getSendmails().get(0).getMessage();
  if (msg == null) {
    msg=context.getSendmails().get(0).getMail().getMessage();
  }
  if (msg.getRecipients(Message.RecipientType.TO).length == 1) {
    assertEquals(msg.getRecipients(Message.RecipientType.TO)[0].toString(),"b@remote.com");
  }
 else {
    assertEquals(context.getSendmails().get(0).getRecipients().size(),1);
    MailAddress rec=context.getSendmails().get(0).getRecipients().iterator().next();
    assertEquals(rec.toInternetAddress().toString(),"b@remote.com");
  }
  assertEquals(mail.getRecipients().size(),1);
  MailAddress localRec=mail.getRecipients().iterator().next();
  assertEquals(localRec.toInternetAddress().toString(),"a@localhost");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.transport.matchers.InSpammerBlacklistTest </h4><pre class="type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInBlackList() throws MessagingException {
  setupMockedMail(LISTED_HOST.toString());
  setupMatcher(BLACKLIST);
  Collection<MailAddress> matchedRecipients=matcher.match(mockedMail);
  assertNotNull(matchedRecipients);
  assertEquals(matchedRecipients.size(),mockedMail.getRecipients().size());
}

</code></pre>

<br>
<pre class="type-1 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testNotInBlackList() throws MessagingException {
  setupMockedMail("212.12.14.1");
  setupMatcher(BLACKLIST);
  Collection<MailAddress> matchedRecipients=matcher.match(mockedMail);
  assertNull(matchedRecipients);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.user.lib.AbstractUsersRepositoryTest </h4><pre class="type-9 type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserAddRemoveCycle() throws UsersRepositoryException {
  assertFalse("accepted login when no user existed",usersRepository.test("username","password"));
  try {
    usersRepository.removeUser("username");
  }
 catch (  UsersRepositoryException e) {
  }
  usersRepository.addUser("username","password");
  assertEquals("didn't accept the correct password",usersRepository.test("username","password"),getPasswordsEnabled());
  User user=usersRepository.getUserByName("username");
  user.setPassword("newpass");
  try {
    usersRepository.updateUser(user);
    assertEquals("new password accepted",usersRepository.test("username","newpass"),getPasswordsEnabled());
    assertFalse("old password rejected",usersRepository.test("username","password"));
  }
 catch (  UnsupportedOperationException e) {
    assertFalse(getPasswordsEnabled());
  }
  try {
    usersRepository.removeUser("username");
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("removing the user failed!");
  }
  assertFalse("user not existing",usersRepository.contains("username"));
  assertFalse("new password rejected",usersRepository.test("username","newpass"));
  try {
    usersRepository.updateUser(user);
    fail();
  }
 catch (  UsersRepositoryException e) {
  }
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUsersRepositoryEmpty() throws UsersRepositoryException {
  assertEquals("users repository not empty",0,usersRepository.countUsers());
  assertFalse("users repository not empty",usersRepository.list().hasNext());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-12 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserAddedIsFound() throws UsersRepositoryException {
  usersRepository.addUser("username","password");
  User user=usersRepository.getUserByName("username");
  assertNotNull(user);
  assertEquals("username does not match",user.getUserName(),"username");
  assertTrue("user not contained in the repository",usersRepository.contains("username"));
  User u=usersRepository.getUserByName("uSERNAMe");
  assertNull("found the user searching for a different case!",u);
}

</code></pre>

<br>
<pre class="type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserPassword() throws UsersRepositoryException {
  usersRepository.addUser("username","password");
  assertEquals("didn't accept the correct password ",usersRepository.test("username","password"),getPasswordsEnabled());
  assertFalse("accepted the wrong password #1",usersRepository.test("username","password2"));
  assertFalse("accepted the wrong password #2",usersRepository.test("username2","password"));
  assertFalse("accepted the wrong password #3",usersRepository.test("username","Password"));
  assertFalse("accepted the wrong password #4",usersRepository.test("username","passwords"));
  assertFalse("accepted the wrong password #5",usersRepository.test("userName","password"));
}

</code></pre>

<br>
<pre class="type-9 type-13 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddUserOnce() throws UsersRepositoryException {
  usersRepository.addUser("username","password");
  try {
    usersRepository.addUser("username","password2");
    fail("User added twice!");
  }
 catch (  UsersRepositoryException e) {
  }
  try {
    usersRepository.addUser("username2","password2");
    assertTrue(usersRepository.contains("username2"));
    usersRepository.addUser("username3","password3");
    assertTrue(usersRepository.contains("username3"));
  }
 catch (  UnsupportedOperationException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-16 type-17 type-13 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserListing() throws UsersRepositoryException {
  ArrayList<String> keys=new ArrayList<String>(3);
  keys.add("username1");
  keys.add("username2");
  keys.add("username3");
  for (  String username : keys) {
    usersRepository.addUser(username,username);
  }
  assertEquals("Wrong number of users found",keys.size(),usersRepository.countUsers());
  ArrayList<String> check=new ArrayList<String>(keys);
  for (Iterator<String> i=usersRepository.list(); i.hasNext(); ) {
    String username=i.next();
    if (getPasswordsEnabled()) {
      assertTrue(usersRepository.test(username,username));
      User u=usersRepository.getUserByName(username);
      u.setPassword("newpass");
      usersRepository.updateUser(u);
    }
    assertTrue(check.contains(username));
    check.remove(username);
  }
  assertEquals("Some user has not be found",0,check.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.user.lib.UsersRepositoryManagementTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserCount() throws Exception {
  assertEquals("no user yet",0,m_userManagement.countUsers());
  m_mockUsersRepository.addUser("testCount1","testCount");
  assertEquals("1 user",1,m_userManagement.countUsers());
  m_mockUsersRepository.addUser("testCount2","testCount");
  assertEquals("2 users",2,m_userManagement.countUsers());
  m_mockUsersRepository.removeUser("testCount1");
  assertEquals("1 user",1,m_userManagement.countUsers());
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDelUser() throws Exception {
  m_mockUsersRepository.addUser("testDel","test");
  assertFalse("user not there",m_userManagement.verifyExists("testNotDeletable"));
  assertTrue("user is there",m_userManagement.verifyExists("testDel"));
  m_mockUsersRepository.removeUser("testDel");
  assertFalse("user no longer there",m_userManagement.verifyExists("testDel"));
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSetPassword() throws Exception {
  m_userManagement.addUser("testPwdUser","pwd1");
  assertTrue("initial password",m_mockUsersRepository.test("testPwdUser","pwd1"));
  m_userManagement.setPassword("testPwdUser","");
  assertTrue("password changed to empty",m_mockUsersRepository.test("testPwdUser",""));
  m_userManagement.setPassword("testPwdUser","pwd2");
  assertTrue("password not changed to pwd2",m_mockUsersRepository.test("testPwdUser","pwd2"));
  m_userManagement.setPassword("testPwdUser","pWD2");
  assertFalse("password no longer pwd2",m_mockUsersRepository.test("testPwdUser","pwd2"));
  assertTrue("password changed to pWD2",m_mockUsersRepository.test("testPwdUser","pWD2"));
}

</code></pre>

<br>
<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddUserAndVerify() throws Exception {
  m_mockUsersRepository.addUser("testCount1","testCount");
  assertFalse("user not there",m_userManagement.verifyExists("testNotAdded"));
  assertTrue("user is there",m_userManagement.verifyExists("testCount1"));
  m_mockUsersRepository.removeUser("testCount1");
  assertFalse("user not there",m_userManagement.verifyExists("testCount1"));
}

</code></pre>

<br>
<pre class="type-7 type-17 type-9 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListUsers() throws Exception {
  String[] usersArray=new String[]{"ccc","aaa","dddd","bbbbb"};
  List<String> users=Arrays.asList(usersArray);
  for (  String user : users) {
    m_mockUsersRepository.addUser(user,"test");
  }
  String[] userNames=m_userManagement.listAllUsers();
  assertEquals("user count",users.size(),userNames.length);
  for (  String user : userNames) {
    if (!users.contains(user)) {
      fail("user not listed");
    }
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
