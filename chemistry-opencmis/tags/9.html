<h3><span class=" glyphicon glyphicon-tag"/>&nbspIterativeVerifier</h3><kbd>Verifies assertions in iterations</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.chemistry.opencmis.client.runtime.CacheTest </h4><pre class="type-9 type-8 type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void serializationTest() throws Exception {
  int cacheSize=10;
  Cache cache=createCache(cacheSize,3600 * 1000);
  String cacheKey="key";
  for (int i=0; i < cacheSize; i++) {
    CmisObject obj=createCmisObject("id" + i);
    cache.put(obj,cacheKey);
  }
  ByteArrayOutputStream buffer=new ByteArrayOutputStream();
  ObjectOutputStream out=new ObjectOutputStream(buffer);
  out.writeObject(cache);
  out.close();
  ObjectInputStream in=new ObjectInputStream(new ByteArrayInputStream(buffer.toByteArray()));
  Cache cache2=(Cache)in.readObject();
  in.close();
  for (int k=0; k < cacheSize; k++) {
    CmisObject o1=cache.getById("id" + k,cacheKey);
    CmisObject o2=cache2.getById("id" + k,cacheKey);
    assertEquals(o1.getId(),o2.getId());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.chemistry.opencmis.client.runtime.ItemIterableTest </h4><pre class="type-9 type-4 type-5 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void totalNumItems(){
  ItemIterableTest.LOG.info("totalNumItems");
  int pageSize=5;
  ItemIterable<String> p=this.getIterable(this.data10,pageSize);
  assertNotNull(p);
  Iterator<String> i=p.iterator();
  assertNotNull(i);
  assertEquals(pageSize + 1,p.getTotalNumItems());
  for (int idx=0; i.hasNext() && idx < (pageSize + 1); idx++) {
    assertNotNull(i.next());
  }
  assertEquals(this.data10.length,p.getTotalNumItems());
}

</code></pre>

<br>
<pre class="type-9 type-4 type-5 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void pageNumItems(){
  ItemIterableTest.LOG.info("totalPageNumItems");
  int pageSize=7;
  ItemIterable<String> p=this.getIterable(this.data10,pageSize);
  assertNotNull(p);
  Iterator<String> i=p.iterator();
  assertNotNull(i);
  assertEquals(pageSize,p.getPageNumItems());
  for (int idx=0; i.hasNext() && idx < (pageSize + 1); idx++) {
    assertNotNull(i.next());
  }
  assertEquals(this.data10.length - pageSize,p.getPageNumItems());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.chemistry.opencmis.inmemory.DiscoveryServiceTest </h4><pre class="type-9 type-8 type-16 type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQueryPaging(){
  log.info("starting testQuery() ...");
  String statement;
  ObjectList res;
  ObjectGenerator gen=new ObjectGenerator(fFactory,fNavSvc,fObjSvc,fRepSvc,fRepositoryId,ObjectGenerator.ContentKind.LOREM_IPSUM_TEXT);
  gen.setNumberOfDocumentsToCreatePerFolder(3);
  gen.setDocumentTypeId(TEST_DOCUMENT_TYPE_ID);
  gen.setFolderTypeId(TEST_FOLDER_TYPE_ID);
  List<String> propsToSet=new ArrayList<String>();
  propsToSet.add(TEST_DOCUMENT_STRING_PROP_ID);
  gen.setDocumentPropertiesToGenerate(propsToSet);
  propsToSet=new ArrayList<String>();
  propsToSet.add(TEST_FOLDER_STRING_PROP_ID);
  gen.setFolderPropertiesToGenerate(propsToSet);
  gen.createFolderHierachy(2,2,fRootFolderId);
  Boolean searchAllVersions=Boolean.FALSE;
  Boolean includeAllowableActions=Boolean.FALSE;
  IncludeRelationships includeRelationships=IncludeRelationships.NONE;
  String renditionFilter=null;
  BigInteger skipCount=BigInteger.valueOf(0);
  BigInteger maxItems=BigInteger.valueOf(3);
  int count=0;
  boolean hasMoreItems=true;
  statement="SELECT * FROM cmis:document";
  while (hasMoreItems) {
    res=fDiscSvc.query(fRepositoryId,statement,searchAllVersions,includeAllowableActions,includeRelationships,renditionFilter,maxItems,skipCount,null);
    hasMoreItems=res.hasMoreItems();
    assertEquals(3,res.getObjects().size());
    if (res.getNumItems() != null) {
      assertEquals(9L,res.getNumItems().longValue());
    }
    skipCount=skipCount.add(maxItems);
    ++count;
  }
  assertEquals(3,count);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.chemistry.opencmis.inmemory.ObjectServiceTest </h4><pre class="type-9 type-8 type-12 type-3 type-5 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBulkUpdateProperties(){
  log.info("starting testBulkUpdateProperties() ...");
  String MY_CUSTOM_NAME_2=MY_CUSTOM_NAME + "_2";
  String id1=createDocumentWithCustomType(MY_CUSTOM_NAME,fRootFolderId,false);
  String id2=createDocumentWithCustomType(MY_CUSTOM_NAME_2,fRootFolderId,false);
  String changeToken1, changeToken2;
  try {
    ObjectData res=fObjSvc.getObject(fRepositoryId,id1,"*",false,IncludeRelationships.NONE,null,false,false,null);
    assertNotNull(res);
    Map<String,PropertyData<?>> props=res.getProperties().getProperties();
    changeToken1=(String)props.get(PropertyIds.CHANGE_TOKEN).getFirstValue();
    res=fObjSvc.getObject(fRepositoryId,id2,"*",false,IncludeRelationships.NONE,null,false,false,null);
    assertNotNull(res);
    props=res.getProperties().getProperties();
    changeToken2=(String)props.get(PropertyIds.CHANGE_TOKEN).getFirstValue();
    for (    PropertyData<?> pd : props.values()) {
      log.info("  return property id: " + pd.getId() + ", value: "+ pd.getValues());
    }
    log.info("updating property");
    List<PropertyData<?>> properties=new ArrayList<PropertyData<?>>();
    properties.add(fFactory.createPropertyStringData(TEST_DOCUMENT_MY_STRING_PROP_ID,NEW_STRING_PROP_VAL));
    properties.add(fFactory.createPropertyIntegerData(TEST_DOCUMENT_MY_INT_PROP_ID,NEW_INT_PROP_VAL));
    Properties newProps=fFactory.createPropertiesData(properties);
    List<BulkUpdateObjectIdAndChangeToken> objs=new ArrayList<BulkUpdateObjectIdAndChangeToken>();
    objs.add(new BulkUpdateObjectIdAndChangeTokenImpl(id1,changeToken1));
    objs.add(new BulkUpdateObjectIdAndChangeTokenImpl(id2,changeToken2));
    List<BulkUpdateObjectIdAndChangeToken> newObjs;
    newObjs=fObjSvc.bulkUpdateProperties(fRepositoryId,objs,newProps,null,null,null);
    assertNotNull(newObjs);
    assertEquals(objs.size(),newObjs.size());
    for (int i=0; i < newObjs.size(); i++) {
      assertEquals(objs.get(i).getId(),newObjs.get(i).getId());
      assertTrue(!objs.get(i).getChangeToken().equals(newObjs.get(i).getChangeToken()));
    }
    verifyUpdatedProperties(id1,MY_CUSTOM_NAME);
    verifyUpdatedProperties(id2,MY_CUSTOM_NAME_2);
  }
 catch (  Exception e) {
    fail("testBulkUpdateProperties() failed with exception: " + e);
  }
  log.info("... testBulkUpdateProperties() finished.");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.chemistry.opencmis.server.impl.ThresholdOutputStreamTest </h4><pre class="type-9 type-8 type-16 type-3 type-4 type-5 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThreshold() throws Exception {
  int threshold=8;
  TempStoreOutputStreamFactory streamFactory=TempStoreOutputStreamFactory.newInstance(null,threshold,1024,false);
  for (int i=0; i < 20; i++) {
    TempStoreOutputStream tempStream=streamFactory.newOutputStream();
    assertTrue(tempStream instanceof ThresholdOutputStream);
    ThresholdOutputStream tos=(ThresholdOutputStream)tempStream;
    for (int j=0; j < i; j++) {
      tos.write('0' + j);
    }
    tos.close();
    ThresholdInputStream tis=(ThresholdInputStream)tos.getInputStream();
    if (i > threshold) {
      assertFalse(tis.isInMemory());
    }
 else {
      assertTrue(tis.isInMemory());
    }
    File tempFile=tis.getTemporaryFile();
    tis.close();
    assertEquals(-1,tis.read());
    if (tis.isInMemory()) {
      assertNull(tempFile);
    }
 else {
      assertNotNull(tempFile);
      assertFalse(tempFile.exists());
    }
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
