<h3 style="margin:0px">Class: org.apache.coyote.http11.TestAbstractHttp11Processor (18 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(11)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(6)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies assertions inside branch conditions"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >BranchVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="12"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('12')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-12"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBug53677b() throws Exception {
  doTestBug53677(true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWithTEChunkedWithCL() throws Exception {
  doTestWithTEChunked(true);
}

</code></pre>

<pre class="type-3 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWithTEIdentity() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  File root=new File("test/webapp-3.0");
  tomcat.addWebapp("",root.getAbsolutePath());
  tomcat.start();
  String request="POST /echo-params.jsp HTTP/1.1" + SimpleHttpClient.CRLF + "Host: any"+ SimpleHttpClient.CRLF+ "Transfer-encoding: identity"+ SimpleHttpClient.CRLF+ "Content-Length: 9"+ SimpleHttpClient.CRLF+ "Content-Type: application/x-www-form-urlencoded"+ SimpleHttpClient.CRLF+ "Connection: close"+ SimpleHttpClient.CRLF+ SimpleHttpClient.CRLF+ "test=data";
  Client client=new Client(tomcat.getConnector().getLocalPort());
  client.setRequest(new String[]{request});
  client.connect();
  client.processRequest();
  assertTrue(client.isResponse200());
  assertTrue(client.getResponseBody().contains("test - data"));
}

</code></pre>

<pre class="type-4 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoChunking11NoContentLengthConnectionClose() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctxt=tomcat.addContext("",null);
  Tomcat.addServlet(ctxt,"NoContentLengthConnectionCloseFlushingServlet",new NoContentLengthConnectionCloseFlushingServlet());
  ctxt.addServletMapping("/test","NoContentLengthConnectionCloseFlushingServlet");
  tomcat.start();
  ByteChunk responseBody=new ByteChunk();
  Map<String,List<String>> responseHeaders=new HashMap<String,List<String>>();
  int rc=getUrl("http://localhost:" + getPort() + "/test",responseBody,responseHeaders);
  assertEquals(HttpServletResponse.SC_OK,rc);
  assertTrue(responseHeaders.containsKey("Connection"));
  List<String> connections=responseHeaders.get("Connection");
  assertEquals(1,connections.size());
  assertEquals("close",connections.get(0));
  assertFalse(responseHeaders.containsKey("Transfer-Encoding"));
  assertEquals("OK",responseBody.toString());
}

</code></pre>

<pre class="type-3 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWithTEBuffered() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  File root=new File("test/webapp-3.0");
  tomcat.addWebapp("",root.getAbsolutePath());
  tomcat.start();
  String request="POST /echo-params.jsp HTTP/1.1" + SimpleHttpClient.CRLF + "Host: any"+ SimpleHttpClient.CRLF+ "Transfer-encoding: buffered"+ SimpleHttpClient.CRLF+ "Content-Length: 9"+ SimpleHttpClient.CRLF+ "Content-Type: application/x-www-form-urlencoded"+ SimpleHttpClient.CRLF+ SimpleHttpClient.CRLF+ "test=data";
  Client client=new Client(tomcat.getConnector().getLocalPort());
  client.setRequest(new String[]{request});
  client.connect();
  client.processRequest();
  assertTrue(client.isResponse501());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBug53677a() throws Exception {
  doTestBug53677(false);
}

</code></pre>

<pre class="type-3 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWithUnknownExpectation() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  File root=new File("test/webapp-3.0");
  tomcat.addWebapp("",root.getAbsolutePath());
  tomcat.start();
  String request="POST /echo-params.jsp HTTP/1.1" + SimpleHttpClient.CRLF + "Host: any"+ SimpleHttpClient.CRLF+ "Expect: unknoen"+ SimpleHttpClient.CRLF+ SimpleHttpClient.CRLF;
  Client client=new Client(tomcat.getConnector().getLocalPort());
  client.setRequest(new String[]{request});
  client.connect();
  client.processRequest();
  assertTrue(client.isResponse417());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWithTEChunked() throws Exception {
  doTestWithTEChunked(false);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNon2xxResponseWithExpectation() throws Exception {
  doTestNon2xxResponseAndExpectation(true);
}

</code></pre>

<pre class="type-3 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWithTEVoid() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  File root=new File("test/webapp-3.0");
  tomcat.addWebapp("",root.getAbsolutePath());
  tomcat.start();
  String request="POST /echo-params.jsp HTTP/1.1" + SimpleHttpClient.CRLF + "Host: any"+ SimpleHttpClient.CRLF+ "Transfer-encoding: void"+ SimpleHttpClient.CRLF+ "Content-Length: 9"+ SimpleHttpClient.CRLF+ "Content-Type: application/x-www-form-urlencoded"+ SimpleHttpClient.CRLF+ SimpleHttpClient.CRLF+ "test=data";
  Client client=new Client(tomcat.getConnector().getLocalPort());
  client.setRequest(new String[]{request});
  client.connect();
  client.processRequest();
  assertTrue(client.isResponse501());
}

</code></pre>

<pre class="type-3 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWithTEUnsupported() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  File root=new File("test/webapp-3.0");
  tomcat.addWebapp("",root.getAbsolutePath());
  tomcat.start();
  String request="POST /echo-params.jsp HTTP/1.1" + SimpleHttpClient.CRLF + "Host: any"+ SimpleHttpClient.CRLF+ "Transfer-encoding: unsupported"+ SimpleHttpClient.CRLF+ "Content-Length: 9"+ SimpleHttpClient.CRLF+ "Content-Type: application/x-www-form-urlencoded"+ SimpleHttpClient.CRLF+ SimpleHttpClient.CRLF+ "test=data";
  Client client=new Client(tomcat.getConnector().getLocalPort());
  client.setRequest(new String[]{request});
  client.connect();
  client.processRequest();
  assertTrue(client.isResponse501());
}

</code></pre>

<pre class="type-3 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWithTESavedRequest() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  File root=new File("test/webapp-3.0");
  tomcat.addWebapp("",root.getAbsolutePath());
  tomcat.start();
  String request="POST /echo-params.jsp HTTP/1.1" + SimpleHttpClient.CRLF + "Host: any"+ SimpleHttpClient.CRLF+ "Transfer-encoding: savedrequest"+ SimpleHttpClient.CRLF+ "Content-Length: 9"+ SimpleHttpClient.CRLF+ "Content-Type: application/x-www-form-urlencoded"+ SimpleHttpClient.CRLF+ SimpleHttpClient.CRLF+ "test=data";
  Client client=new Client(tomcat.getConnector().getLocalPort());
  client.setRequest(new String[]{request});
  client.connect();
  client.processRequest();
  assertTrue(client.isResponse501());
}

</code></pre>

<pre class="type-3 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testResponseWithErrorChunked() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctxt=tomcat.addContext("",null);
  Tomcat.addServlet(ctxt,"ChunkedResponseWithErrorServlet",new ResponseWithErrorServlet(true));
  ctxt.addServletMapping("/*","ChunkedResponseWithErrorServlet");
  tomcat.start();
  String request="GET /anything HTTP/1.1" + SimpleHttpClient.CRLF + "Host: any"+ SimpleHttpClient.CRLF+ SimpleHttpClient.CRLF;
  Client client=new Client(tomcat.getConnector().getLocalPort());
  client.setRequest(new String[]{request});
  client.connect();
  client.processRequest();
  assertTrue(client.isResponse200());
  assertFalse(client.getResponseBody().endsWith("0"));
  assertTrue(client.getResponseBody().endsWith("line03"));
}

</code></pre>

<pre class="type-4 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChunking11NoContentLength() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctxt=tomcat.addContext("",null);
  Tomcat.addServlet(ctxt,"NoContentLengthFlushingServlet",new NoContentLengthFlushingServlet());
  ctxt.addServletMapping("/test","NoContentLengthFlushingServlet");
  tomcat.start();
  ByteChunk responseBody=new ByteChunk();
  Map<String,List<String>> responseHeaders=new HashMap<String,List<String>>();
  int rc=getUrl("http://localhost:" + getPort() + "/test",responseBody,responseHeaders);
  assertEquals(HttpServletResponse.SC_OK,rc);
  assertTrue(responseHeaders.containsKey("Transfer-Encoding"));
  List<String> encodings=responseHeaders.get("Transfer-Encoding");
  assertEquals(1,encodings.size());
  assertEquals("chunked",encodings.get(0));
}

</code></pre>

<pre class="type-4 type-3 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBug57621() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context root=tomcat.addContext("",System.getProperty("java.io.tmpdir"));
  Wrapper w=Tomcat.addServlet(root,"Bug57621",new Bug57621Servlet());
  w.setAsyncSupported(true);
  root.addServletMapping("/test","Bug57621");
  tomcat.start();
  Bug57621Client client=new Bug57621Client();
  client.setPort(tomcat.getConnector().getLocalPort());
  client.setUseContentLength(true);
  client.connect();
  client.doRequest();
  assertTrue(client.getResponseLine(),client.isResponse200());
  assertTrue(client.isResponseBodyOK());
  client.resetResponse();
  client.processRequest();
  assertTrue(client.isResponse200());
  assertTrue(client.isResponseBodyOK());
  client.disconnect();
}

</code></pre>

<pre class="type-3 type-11 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPipelining() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctxt=tomcat.addContext("",null);
  Tomcat.addServlet(ctxt,"TesterServlet",new TesterServlet());
  ctxt.addServletMapping("/foo","TesterServlet");
  tomcat.start();
  String requestPart1="GET /foo HTTP/1.1" + SimpleHttpClient.CRLF;
  String requestPart2="Host: any" + SimpleHttpClient.CRLF + SimpleHttpClient.CRLF;
  final Client client=new Client(tomcat.getConnector().getLocalPort());
  client.setRequest(new String[]{requestPart1,requestPart2});
  client.setRequestPause(1000);
  client.setUseContentLength(true);
  client.connect();
  Runnable send=new Runnable(){
    @Override public void run(){
      try {
        client.sendRequest();
        client.sendRequest();
      }
 catch (      InterruptedException e) {
        throw new RuntimeException(e);
      }
catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
;
  Thread t=new Thread(send);
  t.start();
  Thread.sleep(1500);
  client.readResponse(true);
  assertFalse(client.isResponse50x());
  assertTrue(client.isResponse200());
  assertEquals("OK",client.getResponseBody());
  client.readResponse(true);
  assertFalse(client.isResponse50x());
  assertTrue(client.isResponse200());
  assertEquals("OK",client.getResponseBody());
}

</code></pre>

<pre class="type-10 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testBug55772() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  tomcat.getConnector().setProperty("processorCache","1");
  tomcat.getConnector().setProperty("maxThreads","1");
  Context ctxt=tomcat.addContext("",null);
  Tomcat.addServlet(ctxt,"async",new Bug55772Servlet());
  ctxt.addServletMapping("/*","async");
  tomcat.start();
  String request1="GET /async?1 HTTP/1.1\r\n" + "Host: localhost:" + getPort() + "\r\n"+ "Connection: keep-alive\r\n"+ "Cache-Control: max-age=0\r\n"+ "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\r\n"+ "User-Agent: Request1\r\n"+ "Accept-Encoding: gzip,deflate,sdch\r\n"+ "Accept-Language: en-US,en;q=0.8,fr;q=0.6,es;q=0.4\r\n"+ "Cookie: something.that.should.not.leak=true\r\n"+ "\r\n";
  String request2="GET /async?2 HTTP/1.1\r\n" + "Host: localhost:" + getPort() + "\r\n"+ "Connection: keep-alive\r\n"+ "Cache-Control: max-age=0\r\n"+ "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\r\n"+ "User-Agent: Request2\r\n"+ "Accept-Encoding: gzip,deflate,sdch\r\n"+ "Accept-Language: en-US,en;q=0.8,fr;q=0.6,es;q=0.4\r\n"+ "\r\n";
  Socket connection=null;
  try {
    connection=new Socket("localhost",getPort());
    connection.setSoLinger(true,0);
    Writer writer=new OutputStreamWriter(connection.getOutputStream(),B2CConverter.getCharset("US-ASCII"));
    writer.write(request1);
    writer.flush();
    bug55772Latch1.await();
    connection.close();
  }
  finally {
    if (connection != null) {
      try {
        connection.close();
      }
 catch (      IOException ioe) {
      }
    }
  }
  bug55772Latch2.await();
  bug55772IsSecondRequest=true;
  try {
    connection=new Socket("localhost",getPort());
    connection.setSoLinger(true,0);
    Writer writer=new OutputStreamWriter(connection.getOutputStream(),B2CConverter.getCharset("US-ASCII"));
    writer.write(request2);
    writer.flush();
    connection.getInputStream().read();
  }
  finally {
    if (connection != null) {
      try {
        connection.close();
      }
 catch (      IOException ioe) {
      }
    }
  }
  bug55772Latch3.await();
  if (bug55772RequestStateLeaked) {
    Assert.fail("State leaked between requests!");
  }
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNon2xxResponseWithoutExpectation() throws Exception {
  doTestNon2xxResponseAndExpectation(false);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
