<h3><span class=" glyphicon glyphicon-tag"/>&nbspInternalCallVerifier</h3><kbd>Verifies values of objects/variables related to AUT calls</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.flume.TestContext </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testClear(){
  context.put("test","1");
  context.clear();
  assertNull(context.getInteger("test"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSubProperties(){
  context.put("my.key","1");
  context.put("otherKey","otherValue");
  assertEquals(ImmutableMap.of("key","1"),context.getSubProperties("my."));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPutAll(){
  context.putAll(ImmutableMap.of("test","1"));
  assertEquals("1",context.getString("test"));
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutGet(){
  assertEquals("Context is empty",0,context.getParameters().size());
  context.put("test","value");
  assertEquals("value",context.getString("test"));
  context.clear();
  assertNull(context.getString("test"));
  assertEquals("value",context.getString("test","value"));
  context.put("test","true");
  assertEquals(new Boolean(true),context.getBoolean("test"));
  context.clear();
  assertNull(context.getBoolean("test"));
  assertEquals(new Boolean(true),context.getBoolean("test",true));
  context.put("test","1");
  assertEquals(new Integer(1),context.getInteger("test"));
  context.clear();
  assertNull(context.getInteger("test"));
  assertEquals(new Integer(1),context.getInteger("test",1));
  context.put("test",String.valueOf(Long.MAX_VALUE));
  assertEquals(new Long(Long.MAX_VALUE),context.getLong("test"));
  context.clear();
  assertNull(context.getLong("test"));
  assertEquals(new Long(Long.MAX_VALUE),context.getLong("test",Long.MAX_VALUE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.TestCounterGroup </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIncrementAndGet(){
  long value=counterGroup.incrementAndGet("test");
  Assert.assertEquals(1,value);
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGet(){
  long value=counterGroup.get("test");
  Assert.assertEquals(0,value);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCounter(){
  AtomicLong counter=counterGroup.getCounter("test");
  Assert.assertNotNull(counter);
  Assert.assertEquals(0,counter.get());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddAndGet(){
  long value=counterGroup.addAndGet("test",13L);
  Assert.assertEquals(13,value);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.agent.embedded.TestEmbeddedAgent </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testPutWithInterceptors() throws Exception {
  properties.put("source.interceptors","i1");
  properties.put("source.interceptors.i1.type","static");
  properties.put("source.interceptors.i1.key","key2");
  properties.put("source.interceptors.i1.value","value2");
  agent.configure(properties);
  agent.start();
  agent.put(EventBuilder.withBody(body,headers));
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Map<String,String> newHeaders=new HashMap<String,String>(headers);
  newHeaders.put("key2","value2");
  Assert.assertEquals(newHeaders,event.getHeaders());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testPut() throws Exception {
  agent.configure(properties);
  agent.start();
  agent.put(EventBuilder.withBody(body,headers));
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Assert.assertEquals(headers,event.getHeaders());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testEmbeddedAgentName() throws Exception {
  EmbeddedAgent embedAgent=new EmbeddedAgent("test 1 2" + serialNumber.incrementAndGet());
  List<Event> events=Lists.newArrayList();
  events.add(EventBuilder.withBody(body,headers));
  embedAgent.configure(properties);
  embedAgent.start();
  embedAgent.putAll(events);
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Assert.assertEquals(headers,event.getHeaders());
  if (embedAgent != null) {
    try {
      embedAgent.stop();
    }
 catch (    Exception e) {
      LOGGER.debug("Error shutting down agent",e);
    }
  }
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testPutAll() throws Exception {
  List<Event> events=Lists.newArrayList();
  events.add(EventBuilder.withBody(body,headers));
  agent.configure(properties);
  agent.start();
  agent.putAll(events);
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Assert.assertEquals(headers,event.getHeaders());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestFailoverRpcClient </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test a bunch of servers closing the one we are writing to and bringing
 * another one back online.
 * @throws FlumeException
 * @throws EventDeliveryException
 * @throws InterruptedException
 */
@Test public void testFailover() throws FlumeException, EventDeliveryException, InterruptedException {
  FailoverRpcClient client=null;
  Server server1=RpcTestUtils.startServer(new OKAvroHandler());
  Server server2=RpcTestUtils.startServer(new OKAvroHandler());
  Server server3=RpcTestUtils.startServer(new OKAvroHandler());
  Properties props=new Properties();
  int s1Port=server1.getPort();
  int s2Port=server2.getPort();
  int s3Port=server3.getPort();
  props.put("client.type","default_failover");
  props.put("hosts","host1 host2 host3");
  props.put("hosts.host1","127.0.0.1:" + String.valueOf(s1Port));
  props.put("hosts.host2","127.0.0.1:" + String.valueOf(s2Port));
  props.put("hosts.host3","127.0.0.1:" + String.valueOf(s3Port));
  client=(FailoverRpcClient)RpcClientFactory.getInstance(props);
  List<Event> events=new ArrayList<Event>();
  for (int i=0; i < 50; i++) {
    events.add(EventBuilder.withBody("evt: " + i,Charset.forName("UTF8")));
  }
  client.appendBatch(events);
  Assert.assertEquals(client.getLastConnectedServerAddress(),new InetSocketAddress("127.0.0.1",server1.getPort()));
  server1.close();
  Thread.sleep(1000L);
  events=new ArrayList<Event>();
  for (int i=0; i < 50; i++) {
    events.add(EventBuilder.withBody("evt: " + i,Charset.forName("UTF8")));
  }
  client.appendBatch(events);
  Assert.assertEquals(new InetSocketAddress("localhost",server2.getPort()),client.getLastConnectedServerAddress());
  server2.close();
  Thread.sleep(1000L);
  client.append(EventBuilder.withBody("Had a sandwich?",Charset.forName("UTF8")));
  Assert.assertEquals(new InetSocketAddress("localhost",server3.getPort()),client.getLastConnectedServerAddress());
  Server server4=RpcTestUtils.startServer(new OKAvroHandler(),s2Port);
  server3.close();
  Thread.sleep(1000L);
  events=new ArrayList<Event>();
  for (int i=0; i < 50; i++) {
    events.add(EventBuilder.withBody("evt: " + i,Charset.forName("UTF8")));
  }
  client.appendBatch(events);
  Assert.assertEquals(new InetSocketAddress("localhost",s2Port),client.getLastConnectedServerAddress());
  Server server5=RpcTestUtils.startServer(new OKAvroHandler(),s1Port);
  client.append(EventBuilder.withBody("Had a mango?",Charset.forName("UTF8")));
  Assert.assertEquals(new InetSocketAddress("localhost",s2Port),client.getLastConnectedServerAddress());
  server4.close();
  Thread.sleep(1000L);
  events=new ArrayList<Event>();
  for (int i=0; i < 50; i++) {
    events.add(EventBuilder.withBody("evt: " + i,Charset.forName("UTF8")));
  }
  client.appendBatch(events);
  Assert.assertEquals(new InetSocketAddress("localhost",s1Port),client.getLastConnectedServerAddress());
  server5.close();
  Thread.sleep(1000L);
  Server server6=RpcTestUtils.startServer(new OKAvroHandler(),s1Port);
  client.append(EventBuilder.withBody("Had a whole watermelon?",Charset.forName("UTF8")));
  Assert.assertEquals(new InetSocketAddress("localhost",s1Port),client.getLastConnectedServerAddress());
  server6.close();
  Thread.sleep(1000L);
  Server server7=RpcTestUtils.startServer(new OKAvroHandler(),s3Port);
  events=new ArrayList<Event>();
  for (int i=0; i < 50; i++) {
    events.add(EventBuilder.withBody("evt: " + i,Charset.forName("UTF8")));
  }
  client.appendBatch(events);
  Assert.assertEquals(new InetSocketAddress("localhost",s3Port),client.getLastConnectedServerAddress());
  server7.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestLoadBalancingRpcClient </h4><pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLbClientTenHostRoundRobinDistribution() throws Exception {
  final int NUM_HOSTS=10;
  final int NUM_EVENTS=1000;
  Server[] s=new Server[NUM_HOSTS];
  LoadBalancedAvroHandler[] h=new LoadBalancedAvroHandler[NUM_HOSTS];
  RpcClient c=null;
  try {
    Properties p=new Properties();
    StringBuilder hostList=new StringBuilder("");
    for (int i=0; i < NUM_HOSTS; i++) {
      h[i]=new LoadBalancedAvroHandler();
      s[i]=RpcTestUtils.startServer(h[i]);
      String name="h" + i;
      p.put("hosts." + name,"127.0.0.1:" + s[i].getPort());
      hostList.append(name).append(" ");
    }
    p.put("hosts",hostList.toString().trim());
    p.put("client.type","default_loadbalance");
    p.put("host-selector","round_robin");
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < NUM_EVENTS; i++) {
      c.append(getEvent(i));
    }
    Set<Integer> counts=new HashSet<Integer>();
    int total=0;
    for (    LoadBalancedAvroHandler handler : h) {
      total+=handler.getAppendCount();
      counts.add(handler.getAppendCount());
    }
    Assert.assertTrue("Very unusual distribution",counts.size() == 1);
    Assert.assertTrue("Missing events",total == NUM_EVENTS);
  }
  finally {
    for (int i=0; i < NUM_HOSTS; i++) {
      if (s[i] != null)       s[i].close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwoHostFailover() throws Exception {
  Server s1=null, s2=null;
  RpcClient c=null;
  try {
    LoadBalancedAvroHandler h1=new LoadBalancedAvroHandler();
    LoadBalancedAvroHandler h2=new LoadBalancedAvroHandler();
    s1=RpcTestUtils.startServer(h1);
    s2=RpcTestUtils.startServer(h2);
    Properties p=new Properties();
    p.put("hosts","h1 h2");
    p.put("client.type","default_loadbalance");
    p.put("hosts.h1","127.0.0.1:" + s1.getPort());
    p.put("hosts.h2","127.0.0.1:" + s2.getPort());
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < 100; i++) {
      if (i == 20) {
        h2.setFailed();
      }
 else       if (i == 40) {
        h2.setOK();
      }
      c.append(getEvent(i));
    }
    Assert.assertEquals(60,h1.getAppendCount());
    Assert.assertEquals(40,h2.getAppendCount());
  }
  finally {
    if (s1 != null)     s1.close();
    if (s2 != null)     s2.close();
    if (c != null)     c.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLbClientTenHostRandomDistributionBatch() throws Exception {
  final int NUM_HOSTS=10;
  final int NUM_EVENTS=1000;
  Server[] s=new Server[NUM_HOSTS];
  LoadBalancedAvroHandler[] h=new LoadBalancedAvroHandler[NUM_HOSTS];
  RpcClient c=null;
  try {
    Properties p=new Properties();
    StringBuilder hostList=new StringBuilder("");
    for (int i=0; i < NUM_HOSTS; i++) {
      h[i]=new LoadBalancedAvroHandler();
      s[i]=RpcTestUtils.startServer(h[i]);
      String name="h" + i;
      p.put("hosts." + name,"127.0.0.1:" + s[i].getPort());
      hostList.append(name).append(" ");
    }
    p.put("hosts",hostList.toString().trim());
    p.put("client.type","default_loadbalance");
    p.put("host-selector","random");
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < NUM_EVENTS; i++) {
      c.appendBatch(getBatchedEvent(i));
    }
    Set<Integer> counts=new HashSet<Integer>();
    int total=0;
    for (    LoadBalancedAvroHandler handler : h) {
      total+=handler.getAppendBatchCount();
      counts.add(handler.getAppendBatchCount());
    }
    Assert.assertTrue("Very unusual distribution",counts.size() > 2);
    Assert.assertTrue("Missing events",total == NUM_EVENTS);
  }
  finally {
    for (int i=0; i < NUM_HOSTS; i++) {
      if (s[i] != null)       s[i].close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure that we can tolerate a host that is completely down.
 * @throws Exception
 */
@Test public void testTwoHostsOneDead() throws Exception {
  LOGGER.info("Running testTwoHostsOneDead...");
  Server s1=null;
  RpcClient c1=null, c2=null;
  try {
    LoadBalancedAvroHandler h1=new LoadBalancedAvroHandler();
    s1=RpcTestUtils.startServer(h1);
    Properties p=new Properties();
    p.put("hosts","h1 h2");
    p.put("client.type","default_loadbalance");
    p.put("hosts.h1","127.0.0.1:" + 0);
    p.put("hosts.h2","127.0.0.1:" + s1.getPort());
    c1=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c1 instanceof LoadBalancingRpcClient);
    for (int i=0; i < 10; i++) {
      c1.appendBatch(getBatchedEvent(i));
    }
    Assert.assertEquals(10,h1.getAppendBatchCount());
    c2=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c2 instanceof LoadBalancingRpcClient);
    for (int i=0; i < 10; i++) {
      c2.append(getEvent(i));
    }
    Assert.assertEquals(10,h1.getAppendCount());
  }
  finally {
    if (s1 != null)     s1.close();
    if (c1 != null)     c1.close();
    if (c2 != null)     c2.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwoHostFailoverBatch() throws Exception {
  Server s1=null, s2=null;
  RpcClient c=null;
  try {
    LoadBalancedAvroHandler h1=new LoadBalancedAvroHandler();
    LoadBalancedAvroHandler h2=new LoadBalancedAvroHandler();
    s1=RpcTestUtils.startServer(h1);
    s2=RpcTestUtils.startServer(h2);
    Properties p=new Properties();
    p.put("hosts","h1 h2");
    p.put("client.type","default_loadbalance");
    p.put("hosts.h1","127.0.0.1:" + s1.getPort());
    p.put("hosts.h2","127.0.0.1:" + s2.getPort());
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < 100; i++) {
      if (i == 20) {
        h2.setFailed();
      }
 else       if (i == 40) {
        h2.setOK();
      }
      c.appendBatch(getBatchedEvent(i));
    }
    Assert.assertEquals(60,h1.getAppendBatchCount());
    Assert.assertEquals(40,h2.getAppendBatchCount());
  }
  finally {
    if (s1 != null)     s1.close();
    if (s2 != null)     s2.close();
    if (c != null)     c.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-11 type-10 type-1 type-3 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=EventDeliveryException.class) public void testTwoHostFailoverThrowAfterClose() throws Exception {
  Server s1=null, s2=null;
  RpcClient c=null;
  try {
    LoadBalancedAvroHandler h1=new LoadBalancedAvroHandler();
    LoadBalancedAvroHandler h2=new LoadBalancedAvroHandler();
    s1=RpcTestUtils.startServer(h1);
    s2=RpcTestUtils.startServer(h2);
    Properties p=new Properties();
    p.put("hosts","h1 h2");
    p.put("client.type","default_loadbalance");
    p.put("hosts.h1","127.0.0.1:" + s1.getPort());
    p.put("hosts.h2","127.0.0.1:" + s2.getPort());
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < 100; i++) {
      if (i == 20) {
        h2.setFailed();
      }
 else       if (i == 40) {
        h2.setOK();
      }
      c.append(getEvent(i));
    }
    Assert.assertEquals(60,h1.getAppendCount());
    Assert.assertEquals(40,h2.getAppendCount());
    if (c != null)     c.close();
    c.append(getEvent(3));
    Assert.fail();
  }
  finally {
    if (s1 != null)     s1.close();
    if (s2 != null)     s2.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLbClientTenHostRoundRobinDistributionBatch() throws Exception {
  final int NUM_HOSTS=10;
  final int NUM_EVENTS=1000;
  Server[] s=new Server[NUM_HOSTS];
  LoadBalancedAvroHandler[] h=new LoadBalancedAvroHandler[NUM_HOSTS];
  RpcClient c=null;
  try {
    Properties p=new Properties();
    StringBuilder hostList=new StringBuilder("");
    for (int i=0; i < NUM_HOSTS; i++) {
      h[i]=new LoadBalancedAvroHandler();
      s[i]=RpcTestUtils.startServer(h[i]);
      String name="h" + i;
      p.put("hosts." + name,"127.0.0.1:" + s[i].getPort());
      hostList.append(name).append(" ");
    }
    p.put("hosts",hostList.toString().trim());
    p.put("client.type","default_loadbalance");
    p.put("host-selector","round_robin");
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < NUM_EVENTS; i++) {
      c.appendBatch(getBatchedEvent(i));
    }
    Set<Integer> counts=new HashSet<Integer>();
    int total=0;
    for (    LoadBalancedAvroHandler handler : h) {
      total+=handler.getAppendBatchCount();
      counts.add(handler.getAppendBatchCount());
    }
    Assert.assertTrue("Very unusual distribution",counts.size() == 1);
    Assert.assertTrue("Missing events",total == NUM_EVENTS);
  }
  finally {
    for (int i=0; i < NUM_HOSTS; i++) {
      if (s[i] != null)       s[i].close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLbClientTenHostRandomDistribution() throws Exception {
  final int NUM_HOSTS=10;
  final int NUM_EVENTS=1000;
  Server[] s=new Server[NUM_HOSTS];
  LoadBalancedAvroHandler[] h=new LoadBalancedAvroHandler[NUM_HOSTS];
  RpcClient c=null;
  try {
    Properties p=new Properties();
    StringBuilder hostList=new StringBuilder("");
    for (int i=0; i < NUM_HOSTS; i++) {
      h[i]=new LoadBalancedAvroHandler();
      s[i]=RpcTestUtils.startServer(h[i]);
      String name="h" + i;
      p.put("hosts." + name,"127.0.0.1:" + s[i].getPort());
      hostList.append(name).append(" ");
    }
    p.put("hosts",hostList.toString().trim());
    p.put("client.type","default_loadbalance");
    p.put("host-selector","random");
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < NUM_EVENTS; i++) {
      c.append(getEvent(i));
    }
    Set<Integer> counts=new HashSet<Integer>();
    int total=0;
    for (    LoadBalancedAvroHandler handler : h) {
      total+=handler.getAppendCount();
      counts.add(handler.getAppendCount());
    }
    Assert.assertTrue("Very unusual distribution",counts.size() > 2);
    Assert.assertTrue("Missing events",total == NUM_EVENTS);
  }
  finally {
    for (int i=0; i < NUM_HOSTS; i++) {
      if (s[i] != null)       s[i].close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestNettyAvroRpcClient </h4><pre class="type-10 type-1 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * First connect the client, then close the client, then send a request.
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test(expected=EventDeliveryException.class) public void testClientClosedRequest() throws FlumeException, EventDeliveryException {
  NettyAvroRpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  try {
    client=RpcTestUtils.getStockLocalClient(server.getPort());
    client.close();
    Assert.assertFalse("Client should not be active",client.isActive());
    System.out.println("Yaya! I am not active after client close!");
    client.append(EventBuilder.withBody("hello",Charset.forName("UTF8")));
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null)     client.close();
  }
}

</code></pre>

<br>
<pre class="type-10 type-1 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * First connect the client, then shut down the server, then send a request.
 * @throws FlumeException
 * @throws EventDeliveryException
 * @throws InterruptedException
 */
@Test(expected=EventDeliveryException.class) public void testServerDisconnect() throws FlumeException, EventDeliveryException, InterruptedException {
  NettyAvroRpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  try {
    client=RpcTestUtils.getStockLocalClient(server.getPort());
    server.close();
    Thread.sleep(1000L);
    try {
      server.join();
    }
 catch (    InterruptedException ex) {
      logger.warn("Thread interrupted during join()",ex);
      Thread.currentThread().interrupt();
    }
    try {
      client.append(EventBuilder.withBody("hello",Charset.forName("UTF8")));
    }
  finally {
      Assert.assertFalse("Client should not be active",client.isActive());
    }
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null)     client.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestRpcClientFactory </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testThreeParamDeprecatedAppend() throws FlumeException, EventDeliveryException {
  RpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  try {
    client=RpcClientFactory.getInstance(localhost,server.getPort(),3);
    Assert.assertEquals("Batch size was specified",3,client.getBatchSize());
    client.append(EventBuilder.withBody("wheee!!!",Charset.forName("UTF8")));
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null)     client.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.auth.TestFlumeAuthenticator </h4><pre class="type-9 type-11 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlumeLoginPrincipalWithoutRealm() throws Exception {
  String principal="flume";
  File keytab=new File(workDir,"flume2.keytab");
  kdc.createPrincipal(keytab,principal);
  String expResult=principal + "@" + kdc.getRealm();
  FlumeAuthenticationUtil.clearCredentials();
  FlumeAuthenticator authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab.getAbsolutePath());
  assertTrue(authenticator.isAuthenticated());
  String result=((KerberosAuthenticator)authenticator).getUserName();
  assertEquals("Initial login failed",expResult,result);
  authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab.getAbsolutePath());
  result=((KerberosAuthenticator)authenticator).getUserName();
  assertEquals("Re-login failed",expResult,result);
  principal="alice";
  keytab=aliceKeytab;
  try {
    authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab.getAbsolutePath());
    result=((KerberosAuthenticator)authenticator).getUserName();
    fail("Login should have failed with a new principal: " + result);
  }
 catch (  Exception ex) {
    assertTrue("Login with a new principal failed, but for an unexpected " + "reason: " + ex.getMessage(),ex.getMessage().contains("Cannot use multiple kerberos principals"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-11 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlumeLogin() throws IOException {
  String principal=flumePrincipal;
  String keytab=flumeKeytab.getAbsolutePath();
  String expResult=principal;
  FlumeAuthenticationUtil.clearCredentials();
  FlumeAuthenticator authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab);
  assertTrue(authenticator.isAuthenticated());
  String result=((KerberosAuthenticator)authenticator).getUserName();
  assertEquals("Initial login failed",expResult,result);
  authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab);
  result=((KerberosAuthenticator)authenticator).getUserName();
  assertEquals("Re-login failed",expResult,result);
  principal=alicePrincipal;
  keytab=aliceKeytab.getAbsolutePath();
  try {
    authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab);
    result=((KerberosAuthenticator)authenticator).getUserName();
    fail("Login should have failed with a new principal: " + result);
  }
 catch (  Exception ex) {
    assertTrue("Login with a new principal failed, but for an unexpected " + "reason: " + ex.getMessage(),ex.getMessage().contains("Cannot use multiple kerberos principals"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProxyAs() throws IOException {
  String username="alice";
  String expResult=username;
  FlumeAuthenticator authenticator=FlumeAuthenticationUtil.getAuthenticator(null,null);
  String result=((UGIExecutor)(authenticator.proxyAs(username))).getUserName();
  assertEquals("Proxy as didn't generate the expected username",expResult,result);
  authenticator=FlumeAuthenticationUtil.getAuthenticator(flumePrincipal,flumeKeytab.getAbsolutePath());
  String login=((KerberosAuthenticator)authenticator).getUserName();
  assertEquals("Login succeeded, but the principal doesn't match",flumePrincipal,login);
  result=((UGIExecutor)(authenticator.proxyAs(username))).getUserName();
  assertEquals("Proxy as didn't generate the expected username",expResult,result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestBasicChannelSemantics </h4><pre class="type-1 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testGetTransaction() throws Exception {
  final Transaction transaction=channel.getTransaction();
  executor.submit(new Runnable(){
    @Override public void run(){
      Assert.assertNotSame(transaction,channel.getTransaction());
    }
  }
).get();
  Assert.assertSame(transaction,channel.getTransaction());
  transaction.begin();
  executor.submit(new Runnable(){
    @Override public void run(){
      Assert.assertNotSame(transaction,channel.getTransaction());
    }
  }
).get();
  Assert.assertSame(transaction,channel.getTransaction());
  transaction.commit();
  executor.submit(new Runnable(){
    @Override public void run(){
      Assert.assertNotSame(transaction,channel.getTransaction());
    }
  }
).get();
  Assert.assertSame(transaction,channel.getTransaction());
  transaction.close();
  executor.submit(new Runnable(){
    @Override public void run(){
      Assert.assertNotSame(transaction,channel.getTransaction());
    }
  }
).get();
  Assert.assertNotSame(transaction,channel.getTransaction());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestChannelProcessor </h4><pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiredAndOptionalChannels(){
  Context context=new Context();
  ArrayList<Channel> channels=new ArrayList<Channel>();
  for (int i=0; i < 4; i++) {
    Channel ch=new MemoryChannel();
    ch.setName("ch" + i);
    Configurables.configure(ch,context);
    channels.add(ch);
  }
  ChannelSelector selector=new ReplicatingChannelSelector();
  selector.setChannels(channels);
  context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch2 ch3");
  Configurables.configure(selector,context);
  ChannelProcessor processor=new ChannelProcessor(selector);
  context=new Context();
  Configurables.configure(processor,context);
  Event event1=EventBuilder.withBody("event 1",Charsets.UTF_8);
  processor.processEvent(event1);
  try {
    Thread.sleep(3000);
  }
 catch (  InterruptedException e) {
  }
  for (  Channel channel : channels) {
    Transaction transaction=channel.getTransaction();
    transaction.begin();
    Event event_ch=channel.take();
    Assert.assertEquals(event1,event_ch);
    transaction.commit();
    transaction.close();
  }
  List<Event> events=Lists.newArrayList();
  for (int i=0; i < 100; i++) {
    events.add(EventBuilder.withBody("event " + i,Charsets.UTF_8));
  }
  processor.processEventBatch(events);
  try {
    Thread.sleep(3000);
  }
 catch (  InterruptedException e) {
  }
  for (  Channel channel : channels) {
    Transaction transaction=channel.getTransaction();
    transaction.begin();
    for (int i=0; i < 100; i++) {
      Event event_ch=channel.take();
      Assert.assertNotNull(event_ch);
    }
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMemoryChannel </h4><pre class="type-12 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChannelResize(){
  Context context=new Context();
  Map<String,String> parms=new HashMap<String,String>();
  parms.put("capacity","5");
  parms.put("transactionCapacity","5");
  context.putAll(parms);
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 5; i++) {
    channel.put(EventBuilder.withBody(String.format("test event %d",i).getBytes()));
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  boolean overflowed=false;
  try {
    transaction.begin();
    channel.put(EventBuilder.withBody("overflow event".getBytes()));
    transaction.commit();
  }
 catch (  ChannelException e) {
    overflowed=true;
    transaction.rollback();
  }
 finally {
    transaction.close();
  }
  Assert.assertTrue(overflowed);
  parms.put("capacity","6");
  context.putAll(parms);
  Configurables.configure(channel,context);
  transaction=channel.getTransaction();
  transaction.begin();
  channel.put(EventBuilder.withBody("extended capacity event".getBytes()));
  transaction.commit();
  transaction.close();
  parms.put("capacity","2");
  parms.put("transactionCapacity","2");
  context.putAll(parms);
  Configurables.configure(channel,context);
  for (int i=0; i < 6; i++) {
    transaction=channel.getTransaction();
    transaction.begin();
    Assert.assertNotNull(channel.take());
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutTake() throws InterruptedException, EventDeliveryException {
  Event event=EventBuilder.withBody("test event".getBytes());
  Context context=new Context();
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  channel.put(event);
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  Event event2=channel.take();
  Assert.assertEquals(event,event2);
  transaction.commit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMemoryChannelConcurrency </h4><pre class="type-13 type-11 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransactionConcurrency() throws InterruptedException {
  final Channel channel=new MemoryChannel();
  barrier=new CyclicBarrier(2);
  Configurables.configure(channel,new Context());
  Thread t1=new Thread(new Runnable(){
    @Override public void run(){
      Transaction tx=channel.getTransaction();
      tx.begin();
      channel.put(EventBuilder.withBody("first event".getBytes()));
      try {
        barrier.await();
        barrier.await();
        tx.rollback();
        barrier.await();
        tx.close();
        barrier.await();
      }
 catch (      InterruptedException e) {
        Assert.fail();
      }
catch (      BrokenBarrierException e) {
        Assert.fail();
      }
    }
  }
);
  Thread t2=new Thread(new Runnable(){
    @Override public void run(){
      Transaction tx=channel.getTransaction();
      try {
        barrier.await();
        tx.begin();
        channel.put(EventBuilder.withBody("second event".getBytes()));
        barrier.await();
        barrier.await();
        tx.commit();
        tx.close();
        barrier.await();
      }
 catch (      InterruptedException e) {
        Assert.fail();
      }
catch (      BrokenBarrierException e) {
        Assert.fail();
      }
    }
  }
);
  t1.start();
  t2.start();
  t1.join(1000);
  if (t1.isAlive()) {
    Assert.fail("Thread1 failed to finish");
    t1.interrupt();
  }
  t2.join(1000);
  if (t2.isAlive()) {
    Assert.fail("Thread2 failed to finish");
    t2.interrupt();
  }
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertEquals("second event",new String(e.getBody()));
  Assert.assertNull(channel.take());
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMemoryChannelTransaction </h4><pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRollBack() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("BasicChannelSemantics doesn't support re-entrant transactions") @Test public void testReEntTxn() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    transaction.begin();
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
    transaction.commit();
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("BasicChannelSemantics doesn't support re-entrant transactions") @Test public void testReEntTxnRollBack() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (int i=0; i < 10; i++) {
    transaction.begin();
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
    transaction.commit();
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommit() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  context.put("capacity","100");
  context.put("transactionCapacity","50");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMultiplexingChannelSelector </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoSelection() throws Exception {
  config.put("mapping.foo","ch1 ch2");
  config.put("mapping.bar","ch2 ch3");
  config.put("mapping.xyz","ch1 ch2 ch3");
  config.put("default","ch1 ch3");
  selector=ChannelSelectorFactory.create(channels,config);
  Assert.assertTrue(selector instanceof MultiplexingChannelSelector);
  Event noHeaderEvent=new MockEvent();
  List<Channel> reqCh1=selector.getRequiredChannels(noHeaderEvent);
  List<Channel> optCh1=selector.getOptionalChannels(noHeaderEvent);
  Assert.assertEquals(2,reqCh1.size());
  Assert.assertTrue(reqCh1.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh1.get(1).getName().equals("ch3"));
  Assert.assertTrue(optCh1.isEmpty());
  Map<String,String> header2=new HashMap<String,String>();
  header2.put("someheader","foo");
  Event invalidHeaderEvent=new MockEvent();
  invalidHeaderEvent.setHeaders(header2);
  List<Channel> reqCh2=selector.getRequiredChannels(invalidHeaderEvent);
  List<Channel> optCh2=selector.getOptionalChannels(invalidHeaderEvent);
  Assert.assertEquals(2,reqCh2.size());
  Assert.assertTrue(reqCh2.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh2.get(1).getName().equals("ch3"));
  Assert.assertTrue(optCh2.isEmpty());
  Map<String,String> header3=new HashMap<String,String>();
  header3.put("myheader","bar1");
  Event unmatchedHeaderEvent=new MockEvent();
  unmatchedHeaderEvent.setHeaders(header3);
  List<Channel> reqCh3=selector.getRequiredChannels(unmatchedHeaderEvent);
  List<Channel> optCh3=selector.getOptionalChannels(unmatchedHeaderEvent);
  Assert.assertEquals(2,reqCh3.size());
  Assert.assertTrue(reqCh3.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh3.get(1).getName().equals("ch3"));
  Assert.assertTrue(optCh3.isEmpty());
  Map<String,String> header4=new HashMap<String,String>();
  header4.put("myheader","zebra");
  Event zebraEvent=new MockEvent();
  zebraEvent.setHeaders(header4);
  List<Channel> reqCh4=selector.getRequiredChannels(zebraEvent);
  List<Channel> optCh4=selector.getOptionalChannels(zebraEvent);
  Assert.assertEquals(2,reqCh4.size());
  Assert.assertTrue(reqCh4.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh4.get(1).getName().equals("ch3"));
  Assert.assertTrue(optCh4.size() == 1);
  Assert.assertTrue(optCh4.get(0).getName().equals("ch2"));
  List<Channel> allChannels=selector.getAllChannels();
  Assert.assertTrue(allChannels.size() == 3);
  Assert.assertTrue(allChannels.get(0).getName().equals("ch1"));
  Assert.assertTrue(allChannels.get(1).getName().equals("ch2"));
  Assert.assertTrue(allChannels.get(2).getName().equals("ch3"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoMandatory(){
  config.put("default","ch3");
  config.put("optional.foo","ch1 ch2");
  config.put("optional.zebra","ch2 ch3");
  selector=ChannelSelectorFactory.create(channels,config);
  Assert.assertTrue(selector instanceof MultiplexingChannelSelector);
  Event event1=new MockEvent();
  Map<String,String> header1=new HashMap<String,String>();
  header1.put("myheader","foo");
  event1.setHeaders(header1);
  List<Channel> reqCh1=selector.getRequiredChannels(event1);
  Assert.assertEquals(1,reqCh1.size());
  Assert.assertEquals("ch3",reqCh1.get(0).getName());
  List<Channel> optCh1=selector.getOptionalChannels(event1);
  Assert.assertEquals(2,optCh1.size());
  Assert.assertEquals("ch1",optCh1.get(0).getName());
  Assert.assertEquals("ch2",optCh1.get(1).getName());
  Event event4=new MockEvent();
  Map<String,String> header4=new HashMap<String,String>();
  header4.put("myheader","zebra");
  event4.setHeaders(header4);
  List<Channel> reqCh4=selector.getRequiredChannels(event4);
  Assert.assertEquals(1,reqCh4.size());
  Assert.assertTrue(reqCh4.get(0).getName().equals("ch3"));
  List<Channel> optCh4=selector.getOptionalChannels(event4);
  Assert.assertEquals(1,optCh4.size());
  Assert.assertEquals("ch2",optCh4.get(0).getName());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoDefault(){
  config.put("mapping.foo","ch1 ch2");
  config.put("mapping.bar","ch2 ch3");
  config.put("mapping.xyz","ch1 ch2 ch3");
  config.put("mapping.zebra","ch2");
  config.put("optional.zebra","ch1 ch3");
  selector=ChannelSelectorFactory.create(channels,config);
  Assert.assertTrue(selector instanceof MultiplexingChannelSelector);
  Event event1=new MockEvent();
  Map<String,String> header1=new HashMap<String,String>();
  header1.put("myheader","foo");
  event1.setHeaders(header1);
  List<Channel> reqCh1=selector.getRequiredChannels(event1);
  Assert.assertEquals(2,reqCh1.size());
  Assert.assertEquals("ch1",reqCh1.get(0).getName());
  Assert.assertEquals("ch2",reqCh1.get(1).getName());
  List<Channel> optCh1=selector.getOptionalChannels(event1);
  Assert.assertTrue(optCh1.size() == 1);
  Assert.assertEquals("ch3",optCh1.get(0).getName());
  Event event2=new MockEvent();
  Map<String,String> header2=new HashMap<String,String>();
  header2.put("myheader","bar");
  event2.setHeaders(header2);
  List<Channel> reqCh2=selector.getRequiredChannels(event2);
  Assert.assertEquals(2,reqCh2.size());
  Assert.assertEquals("ch2",reqCh2.get(0).getName());
  Assert.assertEquals("ch3",reqCh2.get(1).getName());
  List<Channel> optCh2=selector.getOptionalChannels(event2);
  Assert.assertTrue(optCh2.isEmpty());
  Event event3=new MockEvent();
  Map<String,String> header3=new HashMap<String,String>();
  header3.put("myheader","xyz");
  event3.setHeaders(header3);
  List<Channel> reqCh3=selector.getRequiredChannels(event3);
  Assert.assertEquals(3,reqCh3.size());
  Assert.assertEquals("ch1",reqCh3.get(0).getName());
  Assert.assertEquals("ch2",reqCh3.get(1).getName());
  Assert.assertEquals("ch3",reqCh3.get(2).getName());
  List<Channel> optCh3=selector.getOptionalChannels(event3);
  Assert.assertTrue(optCh3.isEmpty());
  Event event4=new MockEvent();
  Map<String,String> header4=new HashMap<String,String>();
  header4.put("myheader","zebra");
  event4.setHeaders(header4);
  List<Channel> reqCh4=selector.getRequiredChannels(event4);
  Assert.assertEquals(1,reqCh4.size());
  Assert.assertEquals("ch2",reqCh4.get(0).getName());
  List<Channel> optCh4=selector.getOptionalChannels(event4);
  Assert.assertEquals(2,optCh4.size());
  Assert.assertEquals("ch1",optCh4.get(0).getName());
  Assert.assertEquals("ch3",optCh4.get(1).getName());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnlyOptional(){
  config.put("optional.foo","ch1 ch2");
  config.put("optional.zebra","ch2 ch3");
  selector=ChannelSelectorFactory.create(channels,config);
  Assert.assertTrue(selector instanceof MultiplexingChannelSelector);
  Event event1=new MockEvent();
  Map<String,String> header1=new HashMap<String,String>();
  header1.put("myheader","foo");
  event1.setHeaders(header1);
  List<Channel> reqCh1=selector.getRequiredChannels(event1);
  Assert.assertTrue(reqCh1.isEmpty());
  List<Channel> optCh1=selector.getOptionalChannels(event1);
  Assert.assertEquals(2,optCh1.size());
  Event event4=new MockEvent();
  Map<String,String> header4=new HashMap<String,String>();
  header4.put("myheader","zebra");
  event4.setHeaders(header4);
  List<Channel> reqCh4=selector.getRequiredChannels(event4);
  Assert.assertTrue(reqCh4.isEmpty());
  List<Channel> optCh4=selector.getOptionalChannels(event4);
  Assert.assertEquals(2,optCh4.size());
  Assert.assertEquals("ch2",optCh4.get(0).getName());
  Assert.assertEquals("ch3",optCh4.get(1).getName());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSelection() throws Exception {
  config.put("mapping.foo","ch1 ch2");
  config.put("mapping.bar","ch2 ch3");
  config.put("mapping.xyz","ch1 ch2 ch3");
  config.put("default","ch1 ch3");
  selector=ChannelSelectorFactory.create(channels,config);
  Assert.assertTrue(selector instanceof MultiplexingChannelSelector);
  Event event1=new MockEvent();
  Map<String,String> header1=new HashMap<String,String>();
  header1.put("myheader","foo");
  event1.setHeaders(header1);
  List<Channel> reqCh1=selector.getRequiredChannels(event1);
  Assert.assertEquals(2,reqCh1.size());
  Assert.assertTrue(reqCh1.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh1.get(1).getName().equals("ch2"));
  List<Channel> optCh1=selector.getOptionalChannels(event1);
  Assert.assertTrue(optCh1.size() == 1);
  Assert.assertTrue(optCh1.get(0).getName().equals("ch3"));
  Event event2=new MockEvent();
  Map<String,String> header2=new HashMap<String,String>();
  header2.put("myheader","bar");
  event2.setHeaders(header2);
  List<Channel> reqCh2=selector.getRequiredChannels(event2);
  Assert.assertEquals(2,reqCh2.size());
  Assert.assertTrue(reqCh2.get(0).getName().equals("ch2"));
  Assert.assertTrue(reqCh2.get(1).getName().equals("ch3"));
  List<Channel> optCh2=selector.getOptionalChannels(event2);
  Assert.assertTrue(optCh2.isEmpty());
  Event event3=new MockEvent();
  Map<String,String> header3=new HashMap<String,String>();
  header3.put("myheader","xyz");
  event3.setHeaders(header3);
  List<Channel> reqCh3=selector.getRequiredChannels(event3);
  Assert.assertEquals(3,reqCh3.size());
  Assert.assertTrue(reqCh3.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh3.get(1).getName().equals("ch2"));
  Assert.assertTrue(reqCh3.get(2).getName().equals("ch3"));
  List<Channel> optCh3=selector.getOptionalChannels(event3);
  Assert.assertTrue(optCh3.size() == 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestReplicatingChannelSelector </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOptionalChannels() throws Exception {
  Context context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch1");
  Configurables.configure(selector,context);
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(3,channels.size());
  Assert.assertEquals("ch2",channels.get(0).getName());
  Assert.assertEquals("ch3",channels.get(1).getName());
  Assert.assertEquals("ch4",channels.get(2).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(1,optCh.size());
  Assert.assertEquals("ch1",optCh.get(0).getName());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleOptionalChannelsSameChannelTwice() throws Exception {
  Context context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch1 ch4 ch1");
  Configurables.configure(selector,context);
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(2,channels.size());
  Assert.assertEquals("ch2",channels.get(0).getName());
  Assert.assertEquals("ch3",channels.get(1).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(2,optCh.size());
  Assert.assertEquals("ch1",optCh.get(0).getName());
  Assert.assertEquals("ch4",optCh.get(1).getName());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReplicatingSelector() throws Exception {
  selector.configure(new Context());
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(4,channels.size());
  Assert.assertEquals("ch1",channels.get(0).getName());
  Assert.assertEquals("ch2",channels.get(1).getName());
  Assert.assertEquals("ch3",channels.get(2).getName());
  Assert.assertEquals("ch4",channels.get(3).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(0,optCh.size());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleOptionalChannels() throws Exception {
  Context context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch1 ch4");
  Configurables.configure(selector,context);
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(2,channels.size());
  Assert.assertEquals("ch2",channels.get(0).getName());
  Assert.assertEquals("ch3",channels.get(1).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(2,optCh.size());
  Assert.assertEquals("ch1",optCh.get(0).getName());
  Assert.assertEquals("ch4",optCh.get(1).getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestSpillableMemoryChannel </h4><pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReconfigure(){
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","10");
  params.put("overflowCapacity","0");
  params.put("overflowTimeout","0");
  startChannel(params);
  Assert.assertTrue("overflowTimeout setting did not reconfigure correctly",channel.getOverflowTimeout() == 0);
  Assert.assertTrue("memoryCapacity did not reconfigure correctly",channel.getMemoryCapacity() == 10);
  Assert.assertTrue("overflowCapacity did not reconfigure correctly",channel.isOverflowDisabled());
  transactionalPutN(1,10,channel);
  boolean threw=false;
  try {
    transactionalPutN(11,10,channel);
  }
 catch (  ChannelException e) {
    threw=true;
  }
  Assert.assertTrue("Expected the channel to fill up and throw an exception, " + "but it did not throw",threw);
  params=new HashMap<String,String>();
  params.put("memoryCapacity","20");
  params.put("overflowCapacity","0");
  reconfigureChannel(params);
  Assert.assertTrue("overflowTimeout setting did not reconfigure correctly",channel.getOverflowTimeout() == SpillableMemoryChannel.defaultOverflowTimeout);
  Assert.assertTrue("memoryCapacity did not reconfigure correctly",channel.getMemoryCapacity() == 20);
  Assert.assertTrue("overflowCapacity did not reconfigure correctly",channel.isOverflowDisabled());
  transactionalTakeN(1,10,channel);
  transactionalPutN(11,10,channel);
  transactionalPutN(21,10,channel);
  threw=false;
  try {
    transactionalPutN(31,10,channel);
  }
 catch (  ChannelException e) {
    threw=true;
  }
  Assert.assertTrue("Expected the channel to fill up and throw an exception, " + "but it did not throw",threw);
  transactionalTakeN(11,10,channel);
  transactionalTakeN(21,10,channel);
  params=new HashMap<String,String>();
  reconfigureChannel(params);
  Assert.assertTrue("overflowTimeout setting did not reconfigure correctly",channel.getOverflowTimeout() == SpillableMemoryChannel.defaultOverflowTimeout);
  Assert.assertTrue("memoryCapacity did not reconfigure correctly",channel.getMemoryCapacity() == SpillableMemoryChannel.defaultMemoryCapacity);
  Assert.assertTrue("overflowCapacity did not reconfigure correctly",channel.getOverflowCapacity() == SpillableMemoryChannel.defaultOverflowCapacity);
  Assert.assertFalse("overflowCapacity did not reconfigure correctly",channel.isOverflowDisabled());
  params=new HashMap<String,String>();
  params.put("memoryCapacity","10");
  params.put("overflowCapacity","10");
  params.put("transactionCapacity","5");
  params.put("overflowTimeout","1");
  reconfigureChannel(params);
  transactionalPutN(1,5,channel);
  transactionalPutN(6,5,channel);
  transactionalPutN(11,5,channel);
  transactionalPutN(16,5,channel);
  threw=false;
  try {
    transactionalPutN(21,5,channel);
  }
 catch (  ChannelException e) {
    threw=true;
  }
  Assert.assertTrue("Expected the last insertion to fail, but it didn't.",threw);
  params=new HashMap<String,String>();
  params.put("memoryCapacity","10");
  params.put("overflowCapacity","20");
  params.put("transactionCapacity","10");
  params.put("overflowTimeout","1");
  reconfigureChannel(params);
  transactionalPutN(21,5,channel);
  transactionalTakeN(1,10,channel);
  transactionalTakeN(11,5,channel);
  transactionalTakeN(16,5,channel);
  transactionalTakeN(21,5,channel);
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCounters() throws InterruptedException {
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","5000");
  params.put("overflowCapacity","5000");
  params.put("transactionCapacity","5000");
  params.put("overflowTimeout","0");
  startChannel(params);
  Thread sourceThd=makePutThread("src",1,5000,2500,channel);
  sourceThd.start();
  sourceThd.join();
  Assert.assertEquals(5000,channel.getTotalStored());
  Assert.assertEquals(5000,channel.channelCounter.getChannelSize());
  Assert.assertEquals(5000,channel.channelCounter.getEventPutAttemptCount());
  Assert.assertEquals(5000,channel.channelCounter.getEventPutSuccessCount());
  Thread sinkThd=makeTakeThread("sink",1,5000,1000,channel);
  sinkThd.start();
  sinkThd.join();
  Assert.assertEquals(0,channel.getTotalStored());
  Assert.assertEquals(0,channel.channelCounter.getChannelSize());
  Assert.assertEquals(5000,channel.channelCounter.getEventTakeAttemptCount());
  Assert.assertEquals(5000,channel.channelCounter.getEventTakeSuccessCount());
  sourceThd=makePutThread("src",1,10000,1000,channel);
  sourceThd.start();
  sourceThd.join();
  Assert.assertEquals(10000,channel.getTotalStored());
  Assert.assertEquals(10000,channel.channelCounter.getChannelSize());
  Assert.assertEquals(15000,channel.channelCounter.getEventPutAttemptCount());
  Assert.assertEquals(15000,channel.channelCounter.getEventPutSuccessCount());
  sinkThd=makeTakeThread("sink",1,5000,1000,channel);
  sinkThd.start();
  sinkThd.join();
  Assert.assertEquals(5000,channel.getTotalStored());
  Assert.assertEquals(5000,channel.channelCounter.getChannelSize());
  Assert.assertEquals(10000,channel.channelCounter.getEventTakeAttemptCount());
  Assert.assertEquals(10000,channel.channelCounter.getEventTakeSuccessCount());
  transactionalTakeN(5001,1000,channel);
  transactionalTakeN(6001,1000,channel);
  transactionalTakeN(7001,1000,channel);
  transactionalTakeN(8001,1000,channel);
  transactionalTakeN(9001,1000,channel);
  Assert.assertEquals(0,channel.getTotalStored());
  Assert.assertEquals(0,channel.channelCounter.getChannelSize());
  Assert.assertEquals(15000,channel.channelCounter.getEventTakeAttemptCount());
  Assert.assertEquals(15000,channel.channelCounter.getEventTakeSuccessCount());
  sourceThd=makePutThread("src1",1,5000,1000,channel);
  Thread sourceThd2=makePutThread("src2",1,5000,500,channel);
  sinkThd=makeTakeThread_noCheck("sink1",5000,1000,channel);
  sourceThd.start();
  sourceThd2.start();
  sinkThd.start();
  sourceThd.join();
  sourceThd2.join();
  sinkThd.join();
  Assert.assertEquals(5000,channel.getTotalStored());
  Assert.assertEquals(5000,channel.channelCounter.getChannelSize());
  Thread sinkThd2=makeTakeThread_noCheck("sink2",2500,500,channel);
  Thread sinkThd3=makeTakeThread_noCheck("sink3",2500,1000,channel);
  sinkThd2.start();
  sinkThd3.start();
  sinkThd2.join();
  sinkThd3.join();
  Assert.assertEquals(0,channel.getTotalStored());
  Assert.assertEquals(0,channel.channelCounter.getChannelSize());
  Assert.assertEquals(25000,channel.channelCounter.getEventTakeSuccessCount());
  Assert.assertEquals(25000,channel.channelCounter.getEventPutSuccessCount());
  Assert.assertTrue("TakeAttempt channel counter value larger than expected",25000 <= channel.channelCounter.getEventTakeAttemptCount());
  Assert.assertTrue("PutAttempt channel counter value larger than expected",25000 <= channel.channelCounter.getEventPutAttemptCount());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCapacityDisableOverflow(){
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","2");
  params.put("overflowCapacity","0");
  params.put("overflowTimeout","0");
  startChannel(params);
  transactionalPutN(0,2,channel);
  boolean threw=false;
  try {
    transactionalPutN(2,1,channel);
  }
 catch (  ChannelException e) {
    threw=true;
  }
  Assert.assertTrue("Expecting ChannelFullException to be thrown",threw);
  transactionalTakeN(0,2,channel);
  Transaction tx=channel.getTransaction();
  tx.begin();
  Assert.assertNull(channel.take());
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestCheckpoint </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSerialization() throws Exception {
  EventQueueBackingStore backingStore=new EventQueueBackingStoreFileV2(file,1,"test");
  FlumeEventPointer ptrIn=new FlumeEventPointer(10,20);
  FlumeEventQueue queueIn=new FlumeEventQueue(backingStore,inflightTakes,inflightPuts,queueSet);
  queueIn.addHead(ptrIn);
  FlumeEventQueue queueOut=new FlumeEventQueue(backingStore,inflightTakes,inflightPuts,queueSet);
  Assert.assertEquals(0,queueOut.getLogWriteOrderID());
  queueIn.checkpoint(false);
  FlumeEventQueue queueOut2=new FlumeEventQueue(backingStore,inflightTakes,inflightPuts,queueSet);
  FlumeEventPointer ptrOut=queueOut2.removeHead(0L);
  Assert.assertEquals(ptrIn,ptrOut);
  Assert.assertTrue(queueOut2.getLogWriteOrderID() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFileChannel </h4><pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPutCheckpointCommitCheckpointReplay() throws Exception {
  Map<String,String> overrides=Maps.newHashMap();
  overrides.put(FileChannelConfiguration.CAPACITY,String.valueOf(2));
  overrides.put(FileChannelConfiguration.TRANSACTION_CAPACITY,String.valueOf(2));
  overrides.put(FileChannelConfiguration.CHECKPOINT_INTERVAL,"10000");
  FileChannel channel=createFileChannel(overrides);
  channel.start();
  Transaction tx=channel.getTransaction();
  Set<String> in=putWithoutCommit(channel,tx,"doubleCheckpoint",1);
  forceCheckpoint(channel);
  tx.commit();
  tx.close();
  forceCheckpoint(channel);
  channel.stop();
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Set<String> out=takeEvents(channel,5);
  compareInputAndOut(in,out);
  channel.stop();
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLocking() throws IOException {
  channel.start();
  Assert.assertTrue(channel.isOpen());
  FileChannel fileChannel=createFileChannel();
  fileChannel.start();
  Assert.assertTrue(!fileChannel.isOpen());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPutForceCheckpointCommitReplay() throws Exception {
  Map<String,String> overrides=Maps.newHashMap();
  overrides.put(FileChannelConfiguration.CAPACITY,String.valueOf(2));
  overrides.put(FileChannelConfiguration.TRANSACTION_CAPACITY,String.valueOf(2));
  overrides.put(FileChannelConfiguration.CHECKPOINT_INTERVAL,"10000");
  FileChannel channel=createFileChannel(overrides);
  channel.start();
  Transaction tx=channel.getTransaction();
  Set<String> in=putWithoutCommit(channel,tx,"putWithoutCommit",1);
  forceCheckpoint(channel);
  tx.commit();
  tx.close();
  channel.stop();
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Set<String> out=takeEvents(channel,1);
  compareInputAndOut(in,out);
  channel.stop();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRollbackIncompleteTransaction() throws Exception {
  Map<String,String> overrides=Maps.newHashMap();
  overrides.put(FileChannelConfiguration.CHECKPOINT_INTERVAL,String.valueOf(Integer.MAX_VALUE));
  final FileChannel channel=createFileChannel(overrides);
  channel.start();
  FileBackedTransaction tx=(FileBackedTransaction)channel.getTransaction();
  InflightEventWrapper inflightPuts=field("inflightPuts").ofType(InflightEventWrapper.class).in(field("queue").ofType(FlumeEventQueue.class).in(tx).get()).get();
  tx.begin();
  for (int i=0; i < 100; i++) {
    channel.put(EventBuilder.withBody("TestEvent".getBytes()));
  }
  Assert.assertFalse(inflightPuts.getFileIDs().isEmpty());
  Assert.assertFalse(inflightPuts.getInFlightPointers().isEmpty());
  tx.rollback();
  tx.close();
  Assert.assertTrue(inflightPuts.getFileIDs().isEmpty());
  Assert.assertTrue(inflightPuts.getInFlightPointers().isEmpty());
  Assert.assertTrue(channel.getDepth() == 0);
  Set<String> in=putEvents(channel,"testing-rollbacks",100,100);
  tx=(FileBackedTransaction)channel.getTransaction();
  InflightEventWrapper inflightTakes=field("inflightTakes").ofType(InflightEventWrapper.class).in(field("queue").ofType(FlumeEventQueue.class).in(tx).get()).get();
  tx.begin();
  for (int i=0; i < 100; i++) {
    channel.take();
  }
  Assert.assertFalse(inflightTakes.getFileIDs().isEmpty());
  Assert.assertFalse(inflightTakes.getInFlightPointers().isEmpty());
  tx.rollback();
  tx.close();
  Assert.assertTrue(inflightTakes.getFileIDs().isEmpty());
  Assert.assertTrue(inflightTakes.getInFlightPointers().isEmpty());
  Assert.assertTrue(channel.getDepth() == in.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFileChannelRollback </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRollbackSimulatedCrashWithSink() throws Exception {
  channel.start();
  Assert.assertTrue(channel.isOpen());
  int numEvents=100;
  LoggerSink sink=new LoggerSink();
  sink.setChannel(channel);
  CountingSinkRunner runner=new CountingSinkRunner(sink,numEvents - 1);
  runner.start();
  putEvents(channel,"rollback",10,numEvents);
  Transaction transaction;
  transaction=channel.getTransaction();
  transaction.begin();
  byte[] bytes="rolled back".getBytes(Charsets.UTF_8);
  channel.put(EventBuilder.withBody(bytes));
  transaction.rollback();
  transaction.close();
  while (runner.isAlive()) {
    Thread.sleep(10L);
  }
  Assert.assertEquals(numEvents - 1,runner.getCount());
  for (  Exception ex : runner.getErrors()) {
    LOG.warn("Sink had error",ex);
  }
  Assert.assertEquals(Collections.EMPTY_LIST,runner.getErrors());
  channel.stop();
  channel=createFileChannel();
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Set<String> out=takeEvents(channel,1,1);
  Assert.assertEquals(1,out.size());
  String s=out.iterator().next();
  Assert.assertTrue(s,s.startsWith("rollback-90-9"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFlumeEvent </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasics(){
  Map<String,String> headers=Maps.newHashMap();
  headers.put("key","value");
  byte[] body="flume".getBytes(Charsets.UTF_8);
  FlumeEvent event=new FlumeEvent(headers,body);
  Assert.assertEquals(headers,event.getHeaders());
  Assert.assertTrue(Arrays.equals(body,event.getBody()));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSerialization() throws IOException {
  Map<String,String> headers=Maps.newHashMap();
  headers.put("key","value");
  byte[] body="flume".getBytes(Charsets.UTF_8);
  FlumeEvent in=new FlumeEvent(headers,body);
  FlumeEvent out=FlumeEvent.from(TestUtils.toDataInput(in));
  Assert.assertEquals(headers,out.getHeaders());
  Assert.assertTrue(Arrays.equals(body,out.getBody()));
  in.setHeaders(null);
  in.setBody(null);
  out=FlumeEvent.from(TestUtils.toDataInput(in));
  Assert.assertEquals(Maps.newHashMap(),out.getHeaders());
  Assert.assertNull(out.getBody());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFlumeEventPointer </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquals(){
  FlumeEventPointer pointerA=new FlumeEventPointer(1,1);
  FlumeEventPointer pointerB=new FlumeEventPointer(1,1);
  Assert.assertEquals(pointerA,pointerB);
  Assert.assertEquals(pointerB,pointerA);
  pointerA=new FlumeEventPointer(1,1);
  pointerB=new FlumeEventPointer(2,2);
  Assert.assertFalse(pointerA.equals(pointerB));
  Assert.assertFalse(pointerB.equals(pointerA));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPack(){
  FlumeEventPointer pointerA=new FlumeEventPointer(1,1);
  FlumeEventPointer pointerB=new FlumeEventPointer(1,2);
  Assert.assertEquals(4294967297L,pointerA.toLong());
  Assert.assertEquals(4294967298L,pointerB.toLong());
  Assert.assertEquals(pointerA,FlumeEventPointer.fromLong(pointerA.toLong()));
  Assert.assertEquals(pointerB,FlumeEventPointer.fromLong(pointerB.toLong()));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetter(){
  FlumeEventPointer pointer=new FlumeEventPointer(1,1);
  Assert.assertEquals(1,pointer.getFileID());
  Assert.assertEquals(1,pointer.getOffset());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFlumeEventQueue </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTail1() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addTail(pointer1));
  Assert.assertEquals(pointer1,queue.removeHead(0));
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCapacity() throws Exception {
  backingStore.close();
  File checkpoint=backingStoreSupplier.getCheckpoint();
  Assert.assertTrue(checkpoint.delete());
  backingStore=new EventQueueBackingStoreFileV2(checkpoint,1,"test");
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addTail(pointer1));
  Assert.assertFalse(queue.addTail(pointer2));
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testWrappingCorrectly() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  int size=Integer.MAX_VALUE;
  for (int i=1; i <= size; i++) {
    if (!queue.addHead(new FlumeEventPointer(i,i))) {
      break;
    }
  }
  for (int i=queue.getSize() / 2; i > 0; i--) {
    Assert.assertNotNull(queue.removeHead(0));
  }
  for (int i=1; i <= size; i++) {
    if (!queue.addHead(new FlumeEventPointer(i,i))) {
      break;
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInflightTakes() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  long txnID1=new Random().nextInt(Integer.MAX_VALUE - 1);
  long txnID2=txnID1 + 1;
  queue.addTail(new FlumeEventPointer(1,1));
  queue.addTail(new FlumeEventPointer(2,1));
  queue.addTail(new FlumeEventPointer(2,2));
  queue.removeHead(txnID1);
  queue.removeHead(txnID2);
  queue.removeHead(txnID2);
  queue.checkpoint(true);
  TimeUnit.SECONDS.sleep(3L);
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  SetMultimap<Long,Long> deserializedMap=queue.deserializeInflightTakes();
  Assert.assertTrue(deserializedMap.get(txnID1).contains(new FlumeEventPointer(1,1).toLong()));
  Assert.assertTrue(deserializedMap.get(txnID2).contains(new FlumeEventPointer(2,1).toLong()));
  Assert.assertTrue(deserializedMap.get(txnID2).contains(new FlumeEventPointer(2,2).toLong()));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addHeadRemove1() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  queue.addHead(pointer1);
  Assert.assertTrue(queue.remove(pointer1));
  Assert.assertNull(queue.removeHead(0));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTailRemove1() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addTail(pointer1));
  Assert.assertEquals(Sets.newHashSet(1),queue.getFileIDs());
  Assert.assertTrue(queue.remove(pointer1));
  queue.replayComplete();
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
  Assert.assertNull(queue.removeHead(0));
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addHead1() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addHead(pointer1));
  Assert.assertEquals(Sets.newHashSet(1),queue.getFileIDs());
  Assert.assertEquals(pointer1,queue.removeHead(0));
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnknownPointerDoesNotCauseSearch() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addHead(pointer1));
  Assert.assertTrue(queue.addHead(pointer2));
  Assert.assertFalse(queue.remove(pointer3));
  Assert.assertTrue(queue.remove(pointer1));
  Assert.assertTrue(queue.remove(pointer2));
  queue.replayComplete();
  Assert.assertEquals(2,queue.getSearchCount());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadCheckpointException.class) public void testCorruptInflightPuts() throws Exception {
  RandomAccessFile inflight=null;
  try {
    queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
    long txnID1=new Random().nextInt(Integer.MAX_VALUE - 1);
    long txnID2=txnID1 + 1;
    queue.addWithoutCommit(new FlumeEventPointer(1,1),txnID1);
    queue.addWithoutCommit(new FlumeEventPointer(2,1),txnID1);
    queue.addWithoutCommit(new FlumeEventPointer(2,2),txnID2);
    queue.checkpoint(true);
    TimeUnit.SECONDS.sleep(3L);
    inflight=new RandomAccessFile(backingStoreSupplier.getInflightPuts(),"rw");
    inflight.seek(0);
    inflight.writeInt(new Random().nextInt());
    queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
    SetMultimap<Long,Long> deserializedMap=queue.deserializeInflightPuts();
    Assert.assertTrue(deserializedMap.get(txnID1).contains(new FlumeEventPointer(1,1).toLong()));
    Assert.assertTrue(deserializedMap.get(txnID1).contains(new FlumeEventPointer(2,1).toLong()));
    Assert.assertTrue(deserializedMap.get(txnID2).contains(new FlumeEventPointer(2,2).toLong()));
  }
  finally {
    inflight.close();
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTailLarge() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  int size=500;
  Set<Integer> fileIDs=Sets.newHashSet();
  for (int i=1; i <= size; i++) {
    Assert.assertTrue(queue.addTail(new FlumeEventPointer(i,i)));
    fileIDs.add(i);
    Assert.assertEquals(fileIDs,queue.getFileIDs());
  }
  for (int i=1; i <= size; i++) {
    Assert.assertEquals(new FlumeEventPointer(i,i),queue.removeHead(0));
    fileIDs.remove(i);
    Assert.assertEquals(fileIDs,queue.getFileIDs());
  }
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addHeadRemove2() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addHead(pointer1));
  Assert.assertTrue(queue.addHead(pointer2));
  Assert.assertTrue(queue.remove(pointer1));
  queue.replayComplete();
  Assert.assertEquals(pointer2,queue.removeHead(0));
}

</code></pre>

<br>
<pre class="type-12 type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addHeadLarge() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  queue.replayComplete();
  int size=500;
  Set<Integer> fileIDs=Sets.newHashSet();
  for (int i=1; i <= size; i++) {
    Assert.assertTrue(queue.addHead(new FlumeEventPointer(i,i)));
    fileIDs.add(i);
    Assert.assertEquals(fileIDs,queue.getFileIDs());
  }
  for (int i=size; i > 0; i--) {
    Assert.assertEquals(new FlumeEventPointer(i,i),queue.removeHead(0));
    fileIDs.remove(i);
    Assert.assertEquals(fileIDs,queue.getFileIDs());
  }
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTailRemove2() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addTail(pointer1));
  Assert.assertTrue(queue.addTail(pointer2));
  Assert.assertTrue(queue.remove(pointer1));
  queue.replayComplete();
  Assert.assertEquals(pointer2,queue.removeHead(0));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTail2() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addTail(pointer1));
  Assert.assertTrue(queue.addTail(pointer2));
  Assert.assertEquals(Sets.newHashSet(1,2),queue.getFileIDs());
  Assert.assertEquals(pointer1,queue.removeHead(0));
  Assert.assertEquals(Sets.newHashSet(2),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadCheckpointException.class) public void testCorruptInflightTakes() throws Exception {
  RandomAccessFile inflight=null;
  try {
    queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
    long txnID1=new Random().nextInt(Integer.MAX_VALUE - 1);
    long txnID2=txnID1 + 1;
    queue.addWithoutCommit(new FlumeEventPointer(1,1),txnID1);
    queue.addWithoutCommit(new FlumeEventPointer(2,1),txnID1);
    queue.addWithoutCommit(new FlumeEventPointer(2,2),txnID2);
    queue.checkpoint(true);
    TimeUnit.SECONDS.sleep(3L);
    inflight=new RandomAccessFile(backingStoreSupplier.getInflightTakes(),"rw");
    inflight.seek(0);
    inflight.writeInt(new Random().nextInt());
    queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
    SetMultimap<Long,Long> deserializedMap=queue.deserializeInflightTakes();
    Assert.assertTrue(deserializedMap.get(txnID1).contains(new FlumeEventPointer(1,1).toLong()));
    Assert.assertTrue(deserializedMap.get(txnID1).contains(new FlumeEventPointer(2,1).toLong()));
    Assert.assertTrue(deserializedMap.get(txnID2).contains(new FlumeEventPointer(2,2).toLong()));
  }
  finally {
    inflight.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addHead2() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  queue.replayComplete();
  Assert.assertTrue(queue.addHead(pointer1));
  Assert.assertTrue(queue.addHead(pointer2));
  Assert.assertEquals(Sets.newHashSet(1,2),queue.getFileIDs());
  Assert.assertEquals(pointer2,queue.removeHead(0));
  Assert.assertEquals(Sets.newHashSet(1),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInflightPuts() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  long txnID1=new Random().nextInt(Integer.MAX_VALUE - 1);
  long txnID2=txnID1 + 1;
  queue.addWithoutCommit(new FlumeEventPointer(1,1),txnID1);
  queue.addWithoutCommit(new FlumeEventPointer(2,1),txnID1);
  queue.addWithoutCommit(new FlumeEventPointer(2,2),txnID2);
  queue.checkpoint(true);
  TimeUnit.SECONDS.sleep(3L);
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  SetMultimap<Long,Long> deserializedMap=queue.deserializeInflightPuts();
  Assert.assertTrue(deserializedMap.get(txnID1).contains(new FlumeEventPointer(1,1).toLong()));
  Assert.assertTrue(deserializedMap.get(txnID1).contains(new FlumeEventPointer(2,1).toLong()));
  Assert.assertTrue(deserializedMap.get(txnID2).contains(new FlumeEventPointer(2,2).toLong()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestIntegration </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIntegration() throws IOException, InterruptedException {
  Context context=new Context();
  context.put(FileChannelConfiguration.CHECKPOINT_DIR,checkpointDir.getAbsolutePath());
  context.put(FileChannelConfiguration.DATA_DIRS,dataDir);
  context.put(FileChannelConfiguration.CAPACITY,String.valueOf(10000));
  context.put(FileChannelConfiguration.CHECKPOINT_INTERVAL,"5000");
  context.put(FileChannelConfiguration.MAX_FILE_SIZE,String.valueOf(1024 * 1024 * 5));
  channel=new FileChannel();
  channel.setName("FileChannel-" + UUID.randomUUID());
  Configurables.configure(channel,context);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  SequenceGeneratorSource source=new SequenceGeneratorSource();
  CountingSourceRunner sourceRunner=new CountingSourceRunner(source,channel);
  source.configure(context);
  source.start();
  NullSink sink=new NullSink();
  sink.setChannel(channel);
  CountingSinkRunner sinkRunner=new CountingSinkRunner(sink);
  sinkRunner.start();
  sourceRunner.start();
  TimeUnit.SECONDS.sleep(30);
  sourceRunner.shutdown();
  while (sourceRunner.isAlive()) {
    Thread.sleep(10L);
  }
  while (channel.getDepth() > 0) {
    Thread.sleep(10L);
  }
  sinkRunner.shutdown();
  TimeUnit.SECONDS.sleep(5);
  List<File> logs=Lists.newArrayList();
  for (int i=0; i < dataDirs.length; i++) {
    logs.addAll(LogUtils.getLogs(dataDirs[i]));
  }
  LOG.info("Total Number of Logs = " + logs.size());
  for (  File logFile : logs) {
    LOG.info("LogFile = " + logFile);
  }
  LOG.info("Source processed " + sinkRunner.getCount());
  LOG.info("Sink processed " + sourceRunner.getCount());
  for (  Exception ex : sourceRunner.getErrors()) {
    LOG.warn("Source had error",ex);
  }
  for (  Exception ex : sinkRunner.getErrors()) {
    LOG.warn("Sink had error",ex);
  }
  Assert.assertEquals(sinkRunner.getCount(),sinkRunner.getCount());
  Assert.assertEquals(Collections.EMPTY_LIST,sinkRunner.getErrors());
  Assert.assertEquals(Collections.EMPTY_LIST,sourceRunner.getErrors());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestLog </h4><pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoll() throws IOException, InterruptedException, NoopRecordException, CorruptEventException {
  log.shutdownWorker();
  Thread.sleep(1000);
  for (int i=0; i < 1000; i++) {
    FlumeEvent eventIn=TestUtils.newPersistableEvent();
    long transactionID=++this.transactionID;
    FlumeEventPointer eventPointer=log.put(transactionID,eventIn);
    FlumeEvent eventOut=log.get(eventPointer);
    Assert.assertNotNull(eventOut);
    Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
    Assert.assertArrayEquals(eventIn.getBody(),eventOut.getBody());
  }
  int logCount=0;
  for (  File dataDir : dataDirs) {
    for (    File logFile : dataDir.listFiles()) {
      if (logFile.getName().startsWith("log-")) {
        logCount++;
      }
    }
  }
  Assert.assertEquals(186,logCount);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testCommitNoTake() throws IOException, InterruptedException {
  long putTransactionID=++transactionID;
  log.commitTake(putTransactionID);
  log.close();
  new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(1).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  log.replay();
  FlumeEventQueue queue=log.getFlumeEventQueue();
  FlumeEventPointer eventPointerOut=queue.removeHead(0);
  Assert.assertNull(eventPointerOut);
}

</code></pre>

<br>
<pre class="type-11 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCachedFSUsableSpace() throws Exception {
  File fs=mock(File.class);
  when(fs.getUsableSpace()).thenReturn(Long.MAX_VALUE);
  LogFile.CachedFSUsableSpace cachedFS=new LogFile.CachedFSUsableSpace(fs,1000L);
  Assert.assertEquals(cachedFS.getUsableSpace(),Long.MAX_VALUE);
  cachedFS.decrement(Integer.MAX_VALUE);
  Assert.assertEquals(cachedFS.getUsableSpace(),Long.MAX_VALUE - Integer.MAX_VALUE);
  try {
    cachedFS.decrement(-1);
    Assert.fail();
  }
 catch (  IllegalArgumentException expected) {
  }
  when(fs.getUsableSpace()).thenReturn(Long.MAX_VALUE - 1L);
  Thread.sleep(1100);
  Assert.assertEquals(cachedFS.getUsableSpace(),Long.MAX_VALUE - 1L);
}

</code></pre>

<br>
<pre class="type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * After replay of the log, we should not find the event because the
 * put was rolled back
 */
@Test public void testPutRollback() throws IOException, InterruptedException {
  FlumeEvent eventIn=TestUtils.newPersistableEvent();
  long transactionID=++this.transactionID;
  log.put(transactionID,eventIn);
  log.rollback(transactionID);
  log.close();
  log=new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(CAPACITY).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  log.replay();
  FlumeEventQueue queue=log.getFlumeEventQueue();
  Assert.assertNull(queue.removeHead(transactionID));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testCommitNoPut() throws IOException, InterruptedException {
  long putTransactionID=++transactionID;
  log.commitPut(putTransactionID);
  log.close();
  new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(1).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  log.replay();
  FlumeEventQueue queue=log.getFlumeEventQueue();
  FlumeEventPointer eventPointerOut=queue.removeHead(0);
  Assert.assertNull(eventPointerOut);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRollbackNoPutTake() throws IOException, InterruptedException {
  long putTransactionID=++transactionID;
  log.rollback(putTransactionID);
  log.close();
  new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(1).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  log.replay();
  FlumeEventQueue queue=log.getFlumeEventQueue();
  FlumeEventPointer eventPointerOut=queue.removeHead(0);
  Assert.assertNull(eventPointerOut);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * After replay of the log, we should not find the event because the take
 * was committed
 */
@Test public void testPutTakeCommit() throws IOException, InterruptedException {
  FlumeEvent eventIn=TestUtils.newPersistableEvent();
  long putTransactionID=++transactionID;
  FlumeEventPointer eventPointer=log.put(putTransactionID,eventIn);
  log.commitPut(putTransactionID);
  long takeTransactionID=++transactionID;
  log.take(takeTransactionID,eventPointer);
  log.commitTake(takeTransactionID);
  log.close();
  new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(1).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  log.replay();
  FlumeEventQueue queue=log.getFlumeEventQueue();
  Assert.assertNull(queue.removeHead(0));
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that we can put, commit and then get. Note that get is
 * not transactional so the commit is not required.
 */
@Test public void testPutGet() throws IOException, InterruptedException, NoopRecordException, CorruptEventException {
  FlumeEvent eventIn=TestUtils.newPersistableEvent();
  long transactionID=++this.transactionID;
  FlumeEventPointer eventPointer=log.put(transactionID,eventIn);
  log.commitPut(transactionID);
  FlumeEvent eventOut=log.get(eventPointer);
  Assert.assertNotNull(eventOut);
  Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
  Assert.assertArrayEquals(eventIn.getBody(),eventOut.getBody());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestLogFile </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGroupCommit() throws Exception {
  final FlumeEvent eventIn=TestUtils.newPersistableEvent(250);
  final CyclicBarrier barrier=new CyclicBarrier(20);
  ExecutorService executorService=Executors.newFixedThreadPool(20);
  ExecutorCompletionService<Void> completionService=new ExecutorCompletionService<Void>(executorService);
  final LogFile.Writer writer=logFileWriter;
  final AtomicLong txnId=new AtomicLong(++transactionID);
  for (int i=0; i < 20; i++) {
    completionService.submit(new Callable<Void>(){
      @Override public Void call(){
        try {
          Put put=new Put(txnId.incrementAndGet(),WriteOrderOracle.next(),eventIn);
          ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
          writer.put(bytes);
          writer.commit(TransactionEventRecord.toByteBuffer(new Commit(txnId.get(),WriteOrderOracle.next())));
          barrier.await();
          writer.sync();
        }
 catch (        Exception ex) {
          Throwables.propagate(ex);
        }
        return null;
      }
    }
);
  }
  for (int i=0; i < 20; i++) {
    completionService.take().get();
  }
  Assert.assertTrue(logFileWriter.position() >= 5000);
  Assert.assertEquals(1,writer.getSyncCount());
  Assert.assertTrue(logFileWriter.getLastCommitPosition() == logFileWriter.getLastSyncPosition());
  executorService.shutdown();
}

</code></pre>

<br>
<pre class="type-12 type-9 type-13 type-11 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReaderTempMetaFile() throws InterruptedException, IOException, CorruptEventException {
  Map<Integer,Put> puts=Maps.newHashMap();
  for (int i=0; i < 1000; i++) {
    FlumeEvent eventIn=TestUtils.newPersistableEvent();
    Put put=new Put(++transactionID,WriteOrderOracle.next(),eventIn);
    ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
    FlumeEventPointer ptr=logFileWriter.put(bytes);
    puts.put(ptr.getOffset(),put);
  }
  File metadataFile=Serialization.getMetaDataFile(dataFile);
  File tempMetadataFile=Serialization.getMetaDataTempFile(dataFile);
  File oldMetadataFile=Serialization.getOldMetaDataFile(dataFile);
  oldMetadataFile.createNewFile();
  if (!metadataFile.renameTo(tempMetadataFile)) {
    Assert.fail("Renaming to meta.temp failed");
  }
  LogFile.SequentialReader reader=LogFileFactory.getSequentialReader(dataFile,null,true);
  Assert.assertTrue(metadataFile.exists());
  Assert.assertFalse(tempMetadataFile.exists());
  Assert.assertFalse(oldMetadataFile.exists());
  LogRecord entry;
  while ((entry=reader.next()) != null) {
    Integer offset=entry.getOffset();
    TransactionEventRecord record=entry.getEvent();
    Put put=puts.get(offset);
    FlumeEvent eventIn=put.getEvent();
    Assert.assertEquals(put.getTransactionID(),record.getTransactionID());
    Assert.assertTrue(record instanceof Put);
    FlumeEvent eventOut=((Put)record).getEvent();
    Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
    Assert.assertTrue(Arrays.equals(eventIn.getBody(),eventOut.getBody()));
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-13 type-11 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReaderOldMetaFile() throws InterruptedException, IOException, CorruptEventException {
  Map<Integer,Put> puts=Maps.newHashMap();
  for (int i=0; i < 1000; i++) {
    FlumeEvent eventIn=TestUtils.newPersistableEvent();
    Put put=new Put(++transactionID,WriteOrderOracle.next(),eventIn);
    ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
    FlumeEventPointer ptr=logFileWriter.put(bytes);
    puts.put(ptr.getOffset(),put);
  }
  File metadataFile=Serialization.getMetaDataFile(dataFile);
  File oldMetadataFile=Serialization.getOldMetaDataFile(dataFile);
  if (!metadataFile.renameTo(oldMetadataFile)) {
    Assert.fail("Renaming to meta.old failed");
  }
  LogFile.SequentialReader reader=LogFileFactory.getSequentialReader(dataFile,null,true);
  Assert.assertTrue(metadataFile.exists());
  Assert.assertFalse(oldMetadataFile.exists());
  LogRecord entry;
  while ((entry=reader.next()) != null) {
    Integer offset=entry.getOffset();
    TransactionEventRecord record=entry.getEvent();
    Put put=puts.get(offset);
    FlumeEvent eventIn=put.getEvent();
    Assert.assertEquals(put.getTransactionID(),record.getTransactionID());
    Assert.assertTrue(record instanceof Put);
    FlumeEvent eventOut=((Put)record).getEvent();
    Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
    Assert.assertTrue(Arrays.equals(eventIn.getBody(),eventOut.getBody()));
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReader() throws InterruptedException, IOException, CorruptEventException {
  Map<Integer,Put> puts=Maps.newHashMap();
  for (int i=0; i < 1000; i++) {
    FlumeEvent eventIn=TestUtils.newPersistableEvent();
    Put put=new Put(++transactionID,WriteOrderOracle.next(),eventIn);
    ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
    FlumeEventPointer ptr=logFileWriter.put(bytes);
    puts.put(ptr.getOffset(),put);
  }
  LogFile.SequentialReader reader=LogFileFactory.getSequentialReader(dataFile,null,true);
  LogRecord entry;
  while ((entry=reader.next()) != null) {
    Integer offset=entry.getOffset();
    TransactionEventRecord record=entry.getEvent();
    Put put=puts.get(offset);
    FlumeEvent eventIn=put.getEvent();
    Assert.assertEquals(put.getTransactionID(),record.getTransactionID());
    Assert.assertTrue(record instanceof Put);
    FlumeEvent eventOut=((Put)record).getEvent();
    Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
    Assert.assertTrue(Arrays.equals(eventIn.getBody(),eventOut.getBody()));
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutGet() throws InterruptedException, IOException {
  final List<Throwable> errors=Collections.synchronizedList(new ArrayList<Throwable>());
  ExecutorService executorService=Executors.newFixedThreadPool(10);
  CompletionService<Void> completionService=new ExecutorCompletionService<Void>(executorService);
  final LogFile.RandomReader logFileReader=LogFileFactory.getRandomReader(dataFile,null,true);
  for (int i=0; i < 1000; i++) {
synchronized (errors) {
      for (      Throwable throwable : errors) {
        Throwables.propagateIfInstanceOf(throwable,AssertionError.class);
      }
      for (      Throwable throwable : errors) {
        Throwables.propagate(throwable);
      }
    }
    final FlumeEvent eventIn=TestUtils.newPersistableEvent();
    final Put put=new Put(++transactionID,WriteOrderOracle.next(),eventIn);
    ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
    FlumeEventPointer ptr=logFileWriter.put(bytes);
    final int offset=ptr.getOffset();
    completionService.submit(new Runnable(){
      @Override public void run(){
        try {
          FlumeEvent eventOut=logFileReader.get(offset);
          Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
          Assert.assertTrue(Arrays.equals(eventIn.getBody(),eventOut.getBody()));
        }
 catch (        Throwable throwable) {
synchronized (errors) {
            errors.add(throwable);
          }
        }
      }
    }
,null);
  }
  for (int i=0; i < 1000; i++) {
    completionService.take();
  }
  for (  Throwable throwable : errors) {
    Throwables.propagateIfInstanceOf(throwable,AssertionError.class);
  }
  for (  Throwable throwable : errors) {
    Throwables.propagate(throwable);
  }
}

</code></pre>

<br>
<pre class="type-13 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteDelimitedTo() throws IOException {
  if (dataFile.isFile()) {
    Assert.assertTrue(dataFile.delete());
  }
  Assert.assertTrue(dataFile.createNewFile());
  ProtosFactory.LogFileMetaData.Builder metaDataBuilder=ProtosFactory.LogFileMetaData.newBuilder();
  metaDataBuilder.setVersion(1);
  metaDataBuilder.setLogFileID(2);
  metaDataBuilder.setCheckpointPosition(3);
  metaDataBuilder.setCheckpointWriteOrderID(4);
  LogFileV3.writeDelimitedTo(metaDataBuilder.build(),dataFile);
  ProtosFactory.LogFileMetaData metaData=ProtosFactory.LogFileMetaData.parseDelimitedFrom(new FileInputStream(dataFile));
  Assert.assertEquals(1,metaData.getVersion());
  Assert.assertEquals(2,metaData.getLogFileID());
  Assert.assertEquals(3,metaData.getCheckpointPosition());
  Assert.assertEquals(4,metaData.getCheckpointWriteOrderID());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestLogRecord </h4><pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testConstructor(){
  long now=System.currentTimeMillis();
  Commit commit=new Commit(now,now + 1);
  LogRecord logRecord=new LogRecord(1,2,commit);
  Assert.assertTrue(now == commit.getTransactionID());
  Assert.assertTrue(now + 1 == commit.getLogWriteOrderID());
  Assert.assertTrue(1 == logRecord.getFileID());
  Assert.assertTrue(2 == logRecord.getOffset());
  Assert.assertTrue(commit == logRecord.getEvent());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestTransactionEventRecordV2 </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRollbackSerialization() throws IOException {
  Rollback in=new Rollback(System.currentTimeMillis(),WriteOrderOracle.next());
  Rollback out=(Rollback)TransactionEventRecord.fromDataInputV2(toDataInput(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTakeSerialization() throws IOException {
  Take in=new Take(System.currentTimeMillis(),WriteOrderOracle.next(),10,20);
  Take out=(Take)TransactionEventRecord.fromDataInputV2(toDataInput(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
  Assert.assertEquals(in.getFileID(),out.getFileID());
  Assert.assertEquals(in.getOffset(),out.getOffset());
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommitSerialization() throws IOException {
  Commit in=new Commit(System.currentTimeMillis(),WriteOrderOracle.next());
  Commit out=(Commit)TransactionEventRecord.fromDataInputV2(toDataInput(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutSerialization() throws IOException {
  Put in=new Put(System.currentTimeMillis(),WriteOrderOracle.next(),new FlumeEvent(new HashMap<String,String>(),new byte[0]));
  Put out=(Put)TransactionEventRecord.fromDataInputV2(toDataInput(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
  Assert.assertEquals(in.getEvent().getHeaders(),out.getEvent().getHeaders());
  Assert.assertTrue(Arrays.equals(in.getEvent().getBody(),out.getEvent().getBody()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestTransactionEventRecordV3 </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTakeSerialization() throws IOException, CorruptEventException {
  Take in=new Take(System.currentTimeMillis(),WriteOrderOracle.next(),10,20);
  Take out=(Take)TransactionEventRecord.fromByteArray(toByteArray(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
  Assert.assertEquals(in.getFileID(),out.getFileID());
  Assert.assertEquals(in.getOffset(),out.getOffset());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutSerialization() throws IOException, CorruptEventException {
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("key","value");
  Put in=new Put(System.currentTimeMillis(),WriteOrderOracle.next(),new FlumeEvent(headers,new byte[0]));
  Put out=(Put)TransactionEventRecord.fromByteArray(toByteArray(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
  Assert.assertEquals(in.getEvent().getHeaders(),out.getEvent().getHeaders());
  Assert.assertEquals(headers,in.getEvent().getHeaders());
  Assert.assertEquals(headers,out.getEvent().getHeaders());
  Assert.assertTrue(Arrays.equals(in.getEvent().getBody(),out.getEvent().getBody()));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommitSerialization() throws IOException, CorruptEventException {
  Commit in=new Commit(System.currentTimeMillis(),WriteOrderOracle.next());
  Commit out=(Commit)TransactionEventRecord.fromByteArray(toByteArray(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutSerializationNullHeader() throws IOException, CorruptEventException {
  Put in=new Put(System.currentTimeMillis(),WriteOrderOracle.next(),new FlumeEvent(null,new byte[0]));
  Put out=(Put)TransactionEventRecord.fromByteArray(toByteArray(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
  Assert.assertNull(in.getEvent().getHeaders());
  Assert.assertNotNull(out.getEvent().getHeaders());
  Assert.assertTrue(Arrays.equals(in.getEvent().getBody(),out.getEvent().getBody()));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRollbackSerialization() throws IOException, CorruptEventException {
  Rollback in=new Rollback(System.currentTimeMillis(),WriteOrderOracle.next());
  Rollback out=(Rollback)TransactionEventRecord.fromByteArray(toByteArray(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.jdbc.BaseJdbcChannelProviderTest </h4><pre class="type-12 type-9 type-13 type-11 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDerbyChannelCapacity(){
  provider=new JdbcChannelProviderImpl();
  derbyCtx.put(ConfigurationConstants.CONFIG_MAX_CAPACITY,"10");
  provider.initialize(derbyCtx);
  Set<MockEvent> events=new HashSet<MockEvent>();
  for (int i=1; i < 12; i++) {
    events.add(MockEventUtils.generateMockEvent(i,i,i,61 % i,1));
  }
  Iterator<MockEvent> meIt=events.iterator();
  int count=0;
  while (meIt.hasNext()) {
    count++;
    MockEvent me=meIt.next();
    String chName=me.getChannel();
    try {
      provider.persistEvent(chName,me);
      if (count == 11) {
        Assert.fail();
      }
    }
 catch (    JdbcChannelException ex) {
      Assert.assertEquals(11,count);
    }
    Event e=provider.removeEvent(chName);
    Assert.assertNotNull(e);
    provider.persistEvent(chName,me);
  }
}

</code></pre>

<br>
<pre class="type-1 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testDerbySetup(){
  provider=new JdbcChannelProviderImpl();
  provider.initialize(derbyCtx);
  Transaction tx1=provider.getTransaction();
  tx1.begin();
  Transaction tx2=provider.getTransaction();
  Assert.assertSame(tx1,tx2);
  tx2.begin();
  tx2.close();
  tx1.close();
  Transaction tx3=provider.getTransaction();
  Assert.assertNotSame(tx1,tx3);
  tx3.begin();
  tx3.close();
  provider.close();
  provider=null;
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * creates 80 events split over 5 channels, stores them
 */
@Test public void testPeristingEvents(){
  provider=new JdbcChannelProviderImpl();
  provider.initialize(derbyCtx);
  Map<String,List<MockEvent>> eventMap=new HashMap<String,List<MockEvent>>();
  Set<MockEvent> events=new HashSet<MockEvent>();
  for (int i=1; i < 81; i++) {
    events.add(MockEventUtils.generateMockEvent(i,i,i,61 % i,5));
  }
  Iterator<MockEvent> meIt=events.iterator();
  while (meIt.hasNext()) {
    MockEvent me=meIt.next();
    String chName=me.getChannel();
    List<MockEvent> eventList=eventMap.get(chName);
    if (eventList == null) {
      eventList=new ArrayList<MockEvent>();
      eventMap.put(chName,eventList);
    }
    eventList.add(me);
    provider.persistEvent(me.getChannel(),me);
  }
  for (  String chName : eventMap.keySet()) {
    List<MockEvent> meList=eventMap.get(chName);
    Iterator<MockEvent> it=meList.iterator();
    while (it.hasNext()) {
      MockEvent me=it.next();
      Event event=provider.removeEvent(chName);
      assertEquals(me,event);
    }
    Event nullEvent=provider.removeEvent(chName);
    Assert.assertNull(nullEvent);
  }
  provider.close();
  provider=null;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.jdbc.TestDatabaseTypeEnum </h4><pre class="type-9 type-1 type-14 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDatabaseTypeLookup(){
  for (  String key : enumMap.keySet()) {
    DatabaseType type=enumMap.get(key);
    DatabaseType lookupType=DatabaseType.valueOf(key);
    String lookupTypeName=lookupType.getName();
    Assert.assertEquals(lookupTypeName,lookupType.toString());
    Assert.assertSame(type,lookupType);
    Assert.assertEquals(key,lookupTypeName);
    DatabaseType lookupType2=DatabaseType.getByName(key.toLowerCase(Locale.ENGLISH));
    Assert.assertSame(type,lookupType2);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.jdbc.TestTransactionIsolationLevelEnum </h4><pre class="type-9 type-1 type-14 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReverseLookup(){
  for (  String key : enumMap.keySet()) {
    TransactionIsolation txIsolation=enumMap.get(key);
    TransactionIsolation lookupTxIsolation=TransactionIsolation.valueOf(key);
    String lookupTxIsolationName=lookupTxIsolation.getName();
    Assert.assertEquals(lookupTxIsolationName,lookupTxIsolation.toString());
    Assert.assertSame(txIsolation,lookupTxIsolation);
    Assert.assertEquals(key,lookupTxIsolationName);
    TransactionIsolation lookupTxIsolation2=TransactionIsolation.getByName(key.toLowerCase(Locale.ENGLISH));
    Assert.assertSame(txIsolation,lookupTxIsolation2);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.client.avro.TestBufferedLineReader </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleRead() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  SimpleTextLineEventReader reader=new SimpleTextLineEventReader(new FileReader(f1));
  assertEquals("file1line1",bodyAsString(reader.readEvent()));
  assertEquals("file1line2",bodyAsString(reader.readEvent()));
  assertEquals("file1line3",bodyAsString(reader.readEvent()));
  assertEquals("file1line4",bodyAsString(reader.readEvent()));
  assertEquals("file1line5",bodyAsString(reader.readEvent()));
  assertEquals("file1line6",bodyAsString(reader.readEvent()));
  assertEquals("file1line7",bodyAsString(reader.readEvent()));
  assertEquals("file1line8",bodyAsString(reader.readEvent()));
  assertEquals(null,reader.readEvent());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchedReadsWithinAFile() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  SimpleTextLineEventReader reader=new SimpleTextLineEventReader(new FileReader(f1));
  List<String> out=bodiesAsStrings(reader.readEvents(5));
  assertEquals(5,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file1line3"));
  assertTrue(out.contains("file1line4"));
  assertTrue(out.contains("file1line5"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchedReadsAtFileBoundary() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  SimpleTextLineEventReader reader=new SimpleTextLineEventReader(new FileReader(f1));
  List<String> out=bodiesAsStrings(reader.readEvents(10));
  assertEquals(8,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file1line3"));
  assertTrue(out.contains("file1line4"));
  assertTrue(out.contains("file1line5"));
  assertTrue(out.contains("file1line6"));
  assertTrue(out.contains("file1line7"));
  assertTrue(out.contains("file1line8"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.client.avro.TestReliableSpoolingFileEventReader </h4><pre class="type-12 type-9 type-13 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepeatedCallsWithCommitOnSuccess() throws IOException {
  String trackerDirPath=SpoolDirectorySourceConfigurationConstants.DEFAULT_TRACKER_DIR;
  File trackerDir=new File(WORK_DIR,trackerDirPath);
  ReliableEventReader reader=new ReliableSpoolingFileEventReader.Builder().spoolDirectory(WORK_DIR).trackerDirPath(trackerDirPath).build();
  final int expectedLines=0 + 1 + 2+ 3+ 1;
  int seenLines=0;
  for (int i=0; i < 10; i++) {
    List<Event> events=reader.readEvents(10);
    int numEvents=events.size();
    if (numEvents > 0) {
      seenLines+=numEvents;
      reader.commit();
      File[] files=trackerDir.listFiles();
      Assert.assertNotNull(files);
      Assert.assertTrue("Expected tracker files in tracker dir " + trackerDir.getAbsolutePath(),files.length > 0);
    }
  }
  Assert.assertEquals(expectedLines,seenLines);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConsumeFileRandomlyNewFile() throws Exception {
  if (SystemUtils.IS_OS_WINDOWS) {
    return;
  }
  final ReliableEventReader reader=new ReliableSpoolingFileEventReader.Builder().spoolDirectory(WORK_DIR).consumeOrder(ConsumeOrder.RANDOM).build();
  File fileName=new File(WORK_DIR,"new-file");
  FileUtils.write(fileName,"New file created in the end. Shoud be read randomly.\n");
  Set<String> expected=Sets.newHashSet();
  int totalFiles=WORK_DIR.listFiles().length;
  final Set<String> actual=Sets.newHashSet();
  ExecutorService executor=Executors.newSingleThreadExecutor();
  final Semaphore semaphore1=new Semaphore(0);
  final Semaphore semaphore2=new Semaphore(0);
  Future<Void> wait=executor.submit(new Callable<Void>(){
    @Override public Void call() throws Exception {
      readEventsForFilesInDir(WORK_DIR,reader,actual,semaphore1,semaphore2);
      return null;
    }
  }
);
  semaphore1.acquire();
  File finalFile=new File(WORK_DIR,"t-file");
  FileUtils.write(finalFile,"Last file");
  semaphore2.release();
  wait.get();
  int listFilesCount=((ReliableSpoolingFileEventReader)reader).getListFilesCount();
  finalFile.delete();
  createExpectedFromFilesInSetup(expected);
  expected.add("");
  expected.add("New file created in the end. Shoud be read randomly.");
  expected.add("Last file");
  Assert.assertTrue(listFilesCount < (totalFiles + 2));
  Assert.assertEquals(expected,actual);
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRepeatedCallsWithCommitAlways() throws IOException {
  ReliableEventReader reader=new ReliableSpoolingFileEventReader.Builder().spoolDirectory(WORK_DIR).build();
  final int expectedLines=0 + 1 + 2+ 3+ 1;
  int seenLines=0;
  for (int i=0; i < 10; i++) {
    List<Event> events=reader.readEvents(10);
    seenLines+=events.size();
    reader.commit();
  }
  Assert.assertEquals(expectedLines,seenLines);
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testZeroByteTrackerFile() throws IOException {
  String trackerDirPath=SpoolDirectorySourceConfigurationConstants.DEFAULT_TRACKER_DIR;
  File trackerDir=new File(WORK_DIR,trackerDirPath);
  if (!trackerDir.exists()) {
    trackerDir.mkdir();
  }
  File trackerFile=new File(trackerDir,ReliableSpoolingFileEventReader.metaFileName);
  if (trackerFile.exists()) {
    trackerFile.delete();
  }
  trackerFile.createNewFile();
  ReliableEventReader reader=new ReliableSpoolingFileEventReader.Builder().spoolDirectory(WORK_DIR).trackerDirPath(trackerDirPath).build();
  final int expectedLines=1;
  int seenLines=0;
  List<Event> events=reader.readEvents(10);
  int numEvents=events.size();
  if (numEvents > 0) {
    seenLines+=numEvents;
    reader.commit();
  }
  Assert.assertEquals(expectedLines,seenLines);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.client.avro.TestSpoolingFileLineReader </h4><pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBehaviorWithEmptyFile() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file0");
  Files.touch(f1);
  ReliableSpoolingFileEventReader parser=getParser();
  File f2=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f2,Charsets.UTF_8);
  List<String> out=bodiesAsStrings(parser.readEvents(8));
  parser.commit();
  assertEquals(8,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file1line3"));
  assertTrue(out.contains("file1line4"));
  assertTrue(out.contains("file1line5"));
  assertTrue(out.contains("file1line6"));
  assertTrue(out.contains("file1line7"));
  assertTrue(out.contains("file1line8"));
  assertNull(parser.readEvent());
  List<File> outFiles=Lists.newArrayList(tmpDir.listFiles(directoryFilter()));
  assertEquals(2,outFiles.size());
  assertTrue("Outfiles should have file0 & file1: " + outFiles,outFiles.contains(new File(tmpDir + "/file0" + completedSuffix)));
  assertTrue("Outfiles should have file0 & file1: " + outFiles,outFiles.contains(new File(tmpDir + "/file1" + completedSuffix)));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNameCorrespondsToLatestRead() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  parser.readEvents(5);
  parser.commit();
  assertNotNull(parser.getLastFileRead());
  assertTrue(parser.getLastFileRead().endsWith("file1"));
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  Files.write("file2line1\nfile2line2\nfile2line3\nfile2line4\n" + "file2line5\nfile2line6\nfile2line7\nfile2line8\n",f2,Charsets.UTF_8);
  parser.readEvents(5);
  parser.commit();
  assertNotNull(parser.getLastFileRead());
  assertTrue(parser.getLastFileRead().endsWith("file1"));
  parser.readEvents(5);
  parser.commit();
  assertNotNull(parser.getLastFileRead());
  assertTrue(parser.getLastFileRead().endsWith("file2"));
  parser.readEvents(5);
  assertTrue(parser.getLastFileRead().endsWith("file2"));
  parser.readEvents(5);
  assertTrue(parser.getLastFileRead().endsWith("file2"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchedReadsAcrossFileBoundary() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> out1=bodiesAsStrings(parser.readEvents(5));
  parser.commit();
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  Files.write("file2line1\nfile2line2\nfile2line3\nfile2line4\n" + "file2line5\nfile2line6\nfile2line7\nfile2line8\n",f2,Charsets.UTF_8);
  List<String> out2=bodiesAsStrings(parser.readEvents(5));
  parser.commit();
  List<String> out3=bodiesAsStrings(parser.readEvents(5));
  parser.commit();
  assertEquals(5,out1.size());
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  assertTrue(out1.contains("file1line5"));
  assertEquals(3,out2.size());
  assertTrue(out2.contains("file1line6"));
  assertTrue(out2.contains("file1line7"));
  assertTrue(out2.contains("file1line8"));
  assertEquals(5,out3.size());
  assertTrue(out3.contains("file2line1"));
  assertTrue(out3.contains("file2line2"));
  assertTrue(out3.contains("file2line3"));
  assertTrue(out3.contains("file2line4"));
  assertTrue(out3.contains("file2line5"));
  List<File> outFiles=Lists.newArrayList(tmpDir.listFiles(directoryFilter()));
  assertEquals(2,outFiles.size());
  assertTrue(outFiles.contains(new File(tmpDir + "/file1" + completedSuffix)));
  assertTrue(outFiles.contains(new File(tmpDir + "/file2")));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicCommitFailure() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n" + "file1line9\nfile1line10\nfile1line11\nfile1line12\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> out1=bodiesAsStrings(parser.readEvents(4));
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  List<String> out2=bodiesAsStrings(parser.readEvents(4));
  assertTrue(out2.contains("file1line1"));
  assertTrue(out2.contains("file1line2"));
  assertTrue(out2.contains("file1line3"));
  assertTrue(out2.contains("file1line4"));
  parser.commit();
  List<String> out3=bodiesAsStrings(parser.readEvents(4));
  assertTrue(out3.contains("file1line5"));
  assertTrue(out3.contains("file1line6"));
  assertTrue(out3.contains("file1line7"));
  assertTrue(out3.contains("file1line8"));
  parser.commit();
  List<String> out4=bodiesAsStrings(parser.readEvents(4));
  assertEquals(4,out4.size());
  assertTrue(out4.contains("file1line9"));
  assertTrue(out4.contains("file1line10"));
  assertTrue(out4.contains("file1line11"));
  assertTrue(out4.contains("file1line12"));
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBasicCommitFailureAndBufferSizeChanges() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n" + "file1line9\nfile1line10\nfile1line11\nfile1line12\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> out1=bodiesAsStrings(parser.readEvents(5));
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  assertTrue(out1.contains("file1line5"));
  List<String> out2=bodiesAsStrings(parser.readEvents(2));
  assertTrue(out2.contains("file1line1"));
  assertTrue(out2.contains("file1line2"));
  parser.commit();
  List<String> out3=bodiesAsStrings(parser.readEvents(2));
  assertTrue(out3.contains("file1line3"));
  assertTrue(out3.contains("file1line4"));
  parser.commit();
  List<String> out4=bodiesAsStrings(parser.readEvents(2));
  assertTrue(out4.contains("file1line5"));
  assertTrue(out4.contains("file1line6"));
  parser.commit();
  List<String> out5=bodiesAsStrings(parser.readEvents(2));
  assertTrue(out5.contains("file1line7"));
  assertTrue(out5.contains("file1line8"));
  parser.commit();
  List<String> out6=bodiesAsStrings(parser.readEvents(15));
  assertTrue(out6.contains("file1line9"));
  assertTrue(out6.contains("file1line10"));
  assertTrue(out6.contains("file1line11"));
  assertTrue(out6.contains("file1line12"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitiallyEmptyDirectory() throws IOException {
  ReliableSpoolingFileEventReader parser=getParser();
  assertNull(parser.readEvent());
  assertEquals(0,parser.readEvents(10).size());
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  List<String> out=bodiesAsStrings(parser.readEvents(2));
  parser.commit();
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  parser.readEvent();
  parser.commit();
  List<File> outFiles=Lists.newArrayList(tmpDir.listFiles(directoryFilter()));
  assertEquals(2,outFiles.size());
  assertTrue(outFiles.contains(new File(tmpDir + "/file1" + completedSuffix)));
  assertTrue(outFiles.contains(new File(tmpDir + "/file2")));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchedReadsWithinAFile() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> out=bodiesAsStrings(parser.readEvents(5));
  parser.commit();
  assertEquals(5,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file1line3"));
  assertTrue(out.contains("file1line4"));
  assertTrue(out.contains("file1line5"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLineExceedsMaxLineLength() throws IOException {
  final int maxLineLength=12;
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n" + "reallyreallyreallyreallyLongLineHerefile1line9\n"+ "file1line10\nfile1line11\nfile1line12\nfile1line13\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser(maxLineLength);
  List<String> out1=bodiesAsStrings(parser.readEvents(5));
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  assertTrue(out1.contains("file1line5"));
  parser.commit();
  List<String> out2=bodiesAsStrings(parser.readEvents(4));
  assertTrue(out2.contains("file1line6"));
  assertTrue(out2.contains("file1line7"));
  assertTrue(out2.contains("file1line8"));
  assertTrue(out2.contains("reallyreally"));
  parser.commit();
  List<String> out3=bodiesAsStrings(parser.readEvents(5));
  assertTrue(out3.contains("reallyreally"));
  assertTrue(out3.contains("LongLineHere"));
  assertTrue(out3.contains("file1line9"));
  assertTrue(out3.contains("file1line10"));
  assertTrue(out3.contains("file1line11"));
  parser.commit();
  List<String> out4=bodiesAsStrings(parser.readEvents(5));
  assertTrue(out4.contains("file1line12"));
  assertTrue(out4.contains("file1line13"));
  assertEquals(2,out4.size());
  parser.commit();
  assertEquals(0,parser.readEvents(5).size());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyDirectoryAfterCommittingFile() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> allLines=bodiesAsStrings(parser.readEvents(2));
  assertEquals(2,allLines.size());
  parser.commit();
  List<String> empty=bodiesAsStrings(parser.readEvents(10));
  assertEquals(0,empty.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.clients.log4jappender.TestLog4jAppender </h4><pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLog4jAppender() throws IOException {
  configureSource();
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppender.class);
  for (int count=0; count <= 1000; count++) {
    int level=((count % 5) + 1) * 10000;
    String msg="This is log message number" + String.valueOf(count);
    logger.log(Level.toLevel(level),msg);
    Transaction transaction=ch.getTransaction();
    transaction.begin();
    Event event=ch.take();
    Assert.assertNotNull(event);
    Assert.assertEquals(new String(event.getBody(),"UTF8"),msg);
    Map<String,String> hdrs=event.getHeaders();
    Assert.assertNotNull(hdrs.get(Log4jAvroHeaders.TIMESTAMP.toString()));
    Assert.assertEquals(Level.toLevel(level),Level.toLevel(Integer.valueOf(hdrs.get(Log4jAvroHeaders.LOG_LEVEL.toString()))));
    Assert.assertEquals(logger.getName(),hdrs.get(Log4jAvroHeaders.LOGGER_NAME.toString()));
    Assert.assertEquals("UTF8",hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLayout() throws IOException {
  configureSource();
  props.put("log4j.appender.out2.layout","org.apache.log4j.PatternLayout");
  props.put("log4j.appender.out2.layout.ConversionPattern","%-5p [%t]: %m%n");
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppender.class);
  Thread.currentThread().setName("Log4jAppenderTest");
  for (int count=0; count <= 100; count++) {
    int level=((count % 5) + 1) * 10000;
    String msg="This is log message number" + String.valueOf(count);
    logger.log(Level.toLevel(level),msg);
    Transaction transaction=ch.getTransaction();
    transaction.begin();
    Event event=ch.take();
    Assert.assertNotNull(event);
    StringBuilder builder=new StringBuilder();
    builder.append("[").append("Log4jAppenderTest").append("]: ").append(msg);
    String eventBody=new String(event.getBody(),"UTF-8");
    String eventLevel=eventBody.split("\\s+")[0];
    Assert.assertEquals(Level.toLevel(level).toString(),eventLevel);
    Assert.assertEquals(new String(event.getBody(),"UTF8").trim().substring(eventLevel.length()).trim(),builder.toString());
    Map<String,String> hdrs=event.getHeaders();
    Assert.assertNotNull(hdrs.get(Log4jAvroHeaders.TIMESTAMP.toString()));
    Assert.assertEquals(Level.toLevel(level),Level.toLevel(Integer.parseInt(hdrs.get(Log4jAvroHeaders.LOG_LEVEL.toString()))));
    Assert.assertEquals(logger.getName(),hdrs.get(Log4jAvroHeaders.LOGGER_NAME.toString()));
    Assert.assertEquals("UTF8",hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.clients.log4jappender.TestLog4jAppenderWithAvro </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAvroGeneric() throws IOException {
  loadProperties("flume-log4jtest-avro-generic.properties");
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppenderWithAvro.class);
  String msg="This is log message number " + String.valueOf(0);
  Schema schema=new Schema.Parser().parse(getClass().getClassLoader().getResource("myrecord.avsc").openStream());
  GenericRecordBuilder builder=new GenericRecordBuilder(schema);
  GenericRecord record=builder.set("message",msg).build();
  logger.info(record);
  Transaction transaction=ch.getTransaction();
  transaction.begin();
  Event event=ch.take();
  Assert.assertNotNull(event);
  GenericDatumReader<GenericRecord> reader=new GenericDatumReader<GenericRecord>(schema);
  BinaryDecoder decoder=DecoderFactory.get().binaryDecoder(event.getBody(),null);
  GenericRecord recordFromEvent=reader.read(null,decoder);
  Assert.assertEquals(msg,recordFromEvent.get("message").toString());
  Map<String,String> hdrs=event.getHeaders();
  Assert.assertNull(hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
  Assert.assertEquals("Schema URL should be set","file:///tmp/myrecord.avsc",hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_URL.toString()));
  Assert.assertNull("Schema string should not be set",hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_LITERAL.toString()));
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAvroReflect() throws IOException {
  loadProperties("flume-log4jtest-avro-reflect.properties");
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppenderWithAvro.class);
  String msg="This is log message number " + String.valueOf(0);
  AppEvent appEvent=new AppEvent();
  appEvent.setMessage(msg);
  logger.info(appEvent);
  Transaction transaction=ch.getTransaction();
  transaction.begin();
  Event event=ch.take();
  Assert.assertNotNull(event);
  Schema schema=ReflectData.get().getSchema(appEvent.getClass());
  ReflectDatumReader<AppEvent> reader=new ReflectDatumReader<AppEvent>(AppEvent.class);
  BinaryDecoder decoder=DecoderFactory.get().binaryDecoder(event.getBody(),null);
  AppEvent recordFromEvent=reader.read(null,decoder);
  Assert.assertEquals(msg,recordFromEvent.getMessage());
  Map<String,String> hdrs=event.getHeaders();
  Assert.assertNull(hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
  Assert.assertNull("Schema URL should not be set",hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_URL.toString()));
  Assert.assertEquals("Schema string should be set",schema.toString(),hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_LITERAL.toString()));
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.conf.TestFlumeConfiguration </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test fails without FLUME-1743
 */
@Test public void testFLUME1743() throws Exception {
  Properties properties=new Properties();
  properties.put("agent1.channels","ch0");
  properties.put("agent1.channels.ch0.type","memory");
  properties.put("agent1.sources","src0");
  properties.put("agent1.sources.src0.type","multiport_syslogtcp");
  properties.put("agent1.sources.src0.channels","ch0");
  properties.put("agent1.sources.src0.host","localhost");
  properties.put("agent1.sources.src0.ports","10001 10002 10003");
  properties.put("agent1.sources.src0.portHeader","port");
  properties.put("agent1.sinks","sink0");
  properties.put("agent1.sinks.sink0.type","null");
  properties.put("agent1.sinks.sink0.channel","ch0");
  FlumeConfiguration conf=new FlumeConfiguration(properties);
  AgentConfiguration agentConfiguration=conf.getConfigurationFor("agent1");
  Assert.assertEquals(String.valueOf(agentConfiguration.getSourceSet()),1,agentConfiguration.getSourceSet().size());
  Assert.assertEquals(String.valueOf(agentConfiguration.getChannelSet()),1,agentConfiguration.getChannelSet().size());
  Assert.assertEquals(String.valueOf(agentConfiguration.getSinkSet()),1,agentConfiguration.getSinkSet().size());
  Assert.assertTrue(agentConfiguration.getSourceSet().contains("src0"));
  Assert.assertTrue(agentConfiguration.getChannelSet().contains("ch0"));
  Assert.assertTrue(agentConfiguration.getSinkSet().contains("sink0"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.event.TestEventBuilder </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeaders(){
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("one","1");
  headers.put("two","2");
  Event e1=EventBuilder.withBody("e1".getBytes(),headers);
  Assert.assertNotNull(e1);
  Assert.assertArrayEquals("e1 has the proper body","e1".getBytes(),e1.getBody());
  Assert.assertEquals("e1 has the proper headers",2,e1.getHeaders().size());
  Assert.assertEquals("e1 has a one key","1",e1.getHeaders().get("one"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.event.TestEventHelper </h4><pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPrintable(){
  SimpleEvent event=new SimpleEvent();
  event.setBody("Some text".getBytes());
  String eventDump=EventHelper.dumpEvent(event);
  System.out.println(eventDump);
  Assert.assertTrue(eventDump,eventDump.contains("Some text"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNonPrintable(){
  SimpleEvent event=new SimpleEvent();
  byte[] body=new byte[5];
  event.setBody(body);
  String eventDump=EventHelper.dumpEvent(event);
  Assert.assertTrue(eventDump,eventDump.contains("....."));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestCensoringInterceptor </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCensor(){
  MemoryChannel memCh=new MemoryChannel();
  memCh.configure(new Context());
  memCh.start();
  ChannelSelector cs=new ReplicatingChannelSelector();
  cs.setChannels(Lists.<Channel>newArrayList(memCh));
  ChannelProcessor cp=new ChannelProcessor(cs);
  Map<String,String> cfgMap=Maps.newHashMap();
  cfgMap.put("interceptors","a");
  String builderClass=CensoringInterceptor.Builder.class.getName();
  cfgMap.put("interceptors.a.type",builderClass);
  Context ctx=new Context(cfgMap);
  cp.configure(ctx);
  cp.initialize();
  Map<String,String> headers=Maps.newHashMap();
  String badWord="scribe";
  headers.put("Bad-Words",badWord);
  Event event1=EventBuilder.withBody("test",Charsets.UTF_8,headers);
  Assert.assertEquals(badWord,event1.getHeaders().get("Bad-Words"));
  cp.processEvent(event1);
  Transaction tx=memCh.getTransaction();
  tx.begin();
  Event event1a=memCh.take();
  Assert.assertNull(event1a.getHeaders().get("Bad-Words"));
  tx.commit();
  tx.close();
  cp.close();
  memCh.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestHostInterceptor </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host name can be used instead of host IP.
 */
@Test public void testUseHostname() throws Exception {
  Context ctx=new Context();
  ctx.put("useIP","false");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=InetAddress.getLocalHost().getCanonicalHostName();
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host is NOT overwritten when preserveExisting=true.
 */
@Test public void testPreserve() throws Exception {
  Context ctx=new Context();
  ctx.put("preserveExisting","true");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=ORIGINAL_HOST;
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomHeader() throws Exception {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  Context ctx=new Context();
  ctx.put("preserveExisting","false");
  ctx.put("hostHeader","hostname");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  Assert.assertNull(eventBeforeIntercept.getHeaders().get("hostname"));
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get("hostname");
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(InetAddress.getLocalHost().getHostAddress(),actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Ensure that the "host" header gets set (to something)
 */
@Test public void testBasic() throws Exception {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  Interceptor interceptor=builder.build();
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  Assert.assertNull(eventBeforeIntercept.getHeaders().get(Constants.HOST));
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host IP is used by default instead of host name.
 */
@Test public void testUseIP() throws Exception {
  Context ctx=new Context();
  ctx.put("useIP","true");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=InetAddress.getLocalHost().getHostAddress();
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host IS overwritten when preserveExisting=false.
 */
@Test public void testClobber() throws Exception {
  Context ctx=new Context();
  ctx.put("preserveExisting","false");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=InetAddress.getLocalHost().getHostAddress();
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestRegexExtractorInterceptor </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldExtractAddHeadersForAllMatchGroupsIgnoringMissingIds() throws Exception {
  String body="2012-10-17 14:34:44,338";
  Context context=new Context();
  context.put(RegexExtractorInterceptor.REGEX,"^(\\d\\d\\d\\d-\\d\\d-\\d\\d\\s\\d\\d:\\d\\d)(:\\d\\d,\\d\\d\\d)");
  context.put(RegexExtractorInterceptor.SERIALIZERS,"s1");
  context.put(RegexExtractorInterceptor.SERIALIZERS + ".s1.name","timestamp");
  fixtureBuilder.configure(context);
  Interceptor fixture=fixtureBuilder.build();
  Event event=EventBuilder.withBody(body,Charsets.UTF_8);
  Event expected=EventBuilder.withBody(body,Charsets.UTF_8);
  expected.getHeaders().put("timestamp","2012-10-17 14:34");
  Event actual=fixture.intercept(event);
  Assert.assertArrayEquals(expected.getBody(),actual.getBody());
  Assert.assertEquals(expected.getHeaders(),actual.getHeaders());
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldExtractAddHeadersUsingSpecifiedSerializer() throws Exception {
  long now=(System.currentTimeMillis() / 60000L) * 60000L;
  String pattern="yyyy-MM-dd HH:mm:ss,SSS";
  DateTimeFormatter formatter=DateTimeFormat.forPattern(pattern);
  String body=formatter.print(now);
  System.out.println(body);
  Context context=new Context();
  context.put(RegexExtractorInterceptor.REGEX,"^(\\d\\d\\d\\d-\\d\\d-\\d\\d\\s\\d\\d:\\d\\d)(:\\d\\d,\\d\\d\\d)");
  context.put(RegexExtractorInterceptor.SERIALIZERS,"s1 s2");
  String millisSerializers=RegexExtractorInterceptorMillisSerializer.class.getName();
  context.put(RegexExtractorInterceptor.SERIALIZERS + ".s1.type",millisSerializers);
  context.put(RegexExtractorInterceptor.SERIALIZERS + ".s1.name","timestamp");
  context.put(RegexExtractorInterceptor.SERIALIZERS + ".s1.pattern","yyyy-MM-dd HH:mm");
  context.put(RegexExtractorInterceptor.SERIALIZERS + ".s2.name","data");
  fixtureBuilder.configure(context);
  Interceptor fixture=fixtureBuilder.build();
  Event event=EventBuilder.withBody(body,Charsets.UTF_8);
  Event expected=EventBuilder.withBody(body,Charsets.UTF_8);
  expected.getHeaders().put("timestamp",String.valueOf(now));
  expected.getHeaders().put("data",":00,000");
  Event actual=fixture.intercept(event);
  Assert.assertArrayEquals(expected.getBody(),actual.getBody());
  Assert.assertEquals(expected.getHeaders(),actual.getHeaders());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldExtractAddHeadersForAllMatchGroups() throws Exception {
  Context context=new Context();
  context.put(RegexExtractorInterceptor.REGEX,"(\\d):(\\d):(\\d)");
  context.put(RegexExtractorInterceptor.SERIALIZERS,"s1 s2 s3");
  context.put(RegexExtractorInterceptor.SERIALIZERS + ".s1.name","Num1");
  context.put(RegexExtractorInterceptor.SERIALIZERS + ".s2.name","Num2");
  context.put(RegexExtractorInterceptor.SERIALIZERS + ".s3.name","Num3");
  fixtureBuilder.configure(context);
  Interceptor fixture=fixtureBuilder.build();
  Event event=EventBuilder.withBody("1:2:3.4foobar5",Charsets.UTF_8);
  Event expected=EventBuilder.withBody("1:2:3.4foobar5",Charsets.UTF_8);
  expected.getHeaders().put("Num1","1");
  expected.getHeaders().put("Num2","2");
  expected.getHeaders().put("Num3","3");
  Event actual=fixture.intercept(event);
  Assert.assertArrayEquals(expected.getBody(),actual.getBody());
  Assert.assertEquals(expected.getHeaders(),actual.getHeaders());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestRegexExtractorInterceptorMillisSerializer </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldReturnMillisFromPattern(){
  RegexExtractorInterceptorMillisSerializer fixture=new RegexExtractorInterceptorMillisSerializer();
  Context context=new Context();
  String pattern="yyyy-MM-dd HH:mm:ss";
  context.put("pattern",pattern);
  fixture.configure(context);
  DateTimeFormatter formatter=DateTimeFormat.forPattern(pattern);
  long time=(System.currentTimeMillis() / 1000L) * 1000L;
  Assert.assertEquals(String.valueOf(time),fixture.serialize(formatter.print(time)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestRegexExtractorInterceptorPassThroughSerializer </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldReturnSameValue(){
  RegexExtractorInterceptorPassThroughSerializer fixture=new RegexExtractorInterceptorPassThroughSerializer();
  fixture.configure(new Context());
  String input="testing (1,2,3,4)";
  Assert.assertEquals(input,fixture.serialize(input));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestRegexFilteringInterceptor </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testInclusion() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.REGEX_FILTER.toString());
  Context ctx=new Context();
  ctx.put(Constants.REGEX,"(INFO.*)|(WARNING.*)");
  ctx.put(Constants.EXCLUDE_EVENTS,"false");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event shouldPass1=EventBuilder.withBody("INFO: some message",Charsets.UTF_8);
  Assert.assertNotNull(interceptor.intercept(shouldPass1));
  Event shouldPass2=EventBuilder.withBody("WARNING: some message",Charsets.UTF_8);
  Assert.assertNotNull(interceptor.intercept(shouldPass2));
  Event shouldNotPass=EventBuilder.withBody("DEBUG: some message",Charsets.UTF_8);
  Assert.assertNull(interceptor.intercept(shouldNotPass));
  builder.configure(ctx);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testExclusion() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.REGEX_FILTER.toString());
  Context ctx=new Context();
  ctx.put(Constants.REGEX,".*DEBUG.*");
  ctx.put(Constants.EXCLUDE_EVENTS,"true");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event shouldPass1=EventBuilder.withBody("INFO: some message",Charsets.UTF_8);
  Assert.assertNotNull(interceptor.intercept(shouldPass1));
  Event shouldPass2=EventBuilder.withBody("WARNING: some message",Charsets.UTF_8);
  Assert.assertNotNull(interceptor.intercept(shouldPass2));
  Event shouldNotPass=EventBuilder.withBody("this message has DEBUG in it",Charsets.UTF_8);
  Assert.assertNull(interceptor.intercept(shouldNotPass));
  builder.configure(ctx);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultBehavior() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.REGEX_FILTER.toString());
  builder.configure(new Context());
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  Event filteredEvent=interceptor.intercept(event);
  Assert.assertNotNull(filteredEvent);
  Assert.assertEquals(event,filteredEvent);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestStaticInterceptor </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomKeyValue() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  Context ctx=new Context();
  ctx.put(Constants.KEY,"myKey");
  ctx.put(Constants.VALUE,"myVal");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  Assert.assertNull(event.getHeaders().get("myKey"));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get("myKey");
  Assert.assertNotNull(val);
  Assert.assertEquals("myVal",val);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultKeyValue() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  builder.configure(new Context());
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  Assert.assertNull(event.getHeaders().get(Constants.KEY));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get(Constants.KEY);
  Assert.assertNotNull(val);
  Assert.assertEquals(Constants.VALUE,val);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPreserve() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  Context ctx=new Context();
  ctx.put(Constants.PRESERVE,"true");
  ctx.put(Constants.VALUE,"replacement value");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  event.getHeaders().put(Constants.KEY,"incumbent value");
  Assert.assertNotNull(event.getHeaders().get(Constants.KEY));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get(Constants.KEY);
  Assert.assertNotNull(val);
  Assert.assertEquals("incumbent value",val);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReplace() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  Context ctx=new Context();
  ctx.put(Constants.PRESERVE,"false");
  ctx.put(Constants.VALUE,"replacement value");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  event.getHeaders().put(Constants.KEY,"incumbent value");
  Assert.assertNotNull(event.getHeaders().get(Constants.KEY));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get(Constants.KEY);
  Assert.assertNotNull(val);
  Assert.assertEquals("replacement value",val);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestTimestampInterceptor </h4><pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure that the "timestamp" header gets set (to something)
 */
@Test public void testBasic() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  InterceptorBuilderFactory factory=new InterceptorBuilderFactory();
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.TIMESTAMP.toString());
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test event",Charsets.UTF_8);
  Assert.assertNull(event.getHeaders().get(Constants.TIMESTAMP));
  Long now=System.currentTimeMillis();
  event=interceptor.intercept(event);
  String timestampStr=event.getHeaders().get(Constants.TIMESTAMP);
  Assert.assertNotNull(timestampStr);
  Assert.assertTrue(Long.parseLong(timestampStr) >= now);
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure timestamp is NOT overwritten when preserveExistingTimestamp == true
 */
@Test public void testPreserve() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Context ctx=new Context();
  ctx.put("preserveExisting","true");
  InterceptorBuilderFactory factory=new InterceptorBuilderFactory();
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.TIMESTAMP.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  long originalTs=1L;
  Event event=EventBuilder.withBody("test event",Charsets.UTF_8);
  event.getHeaders().put(Constants.TIMESTAMP,Long.toString(originalTs));
  Assert.assertEquals(Long.toString(originalTs),event.getHeaders().get(Constants.TIMESTAMP));
  Long now=System.currentTimeMillis();
  event=interceptor.intercept(event);
  String timestampStr=event.getHeaders().get(Constants.TIMESTAMP);
  Assert.assertNotNull(timestampStr);
  Assert.assertTrue(Long.parseLong(timestampStr) == originalTs);
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure timestamp IS overwritten when preserveExistingTimestamp == false
 */
@Test public void testClobber() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Context ctx=new Context();
  ctx.put("preserveExisting","false");
  InterceptorBuilderFactory factory=new InterceptorBuilderFactory();
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.TIMESTAMP.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  long originalTs=1L;
  Event event=EventBuilder.withBody("test event",Charsets.UTF_8);
  event.getHeaders().put(Constants.TIMESTAMP,Long.toString(originalTs));
  Assert.assertEquals(Long.toString(originalTs),event.getHeaders().get(Constants.TIMESTAMP));
  Long now=System.currentTimeMillis();
  event=interceptor.intercept(event);
  String timestampStr=event.getHeaders().get(Constants.TIMESTAMP);
  Assert.assertNotNull(timestampStr);
  Assert.assertTrue(Long.parseLong(timestampStr) >= now);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.lifecycle.TestLifecycleController </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWaitForState() throws LifecycleException, InterruptedException {
  LifecycleAware delegate=new SleeperLifecycleDelegate();
  Assert.assertTrue(delegate.getLifecycleState().equals(LifecycleState.IDLE));
  delegate.start();
  boolean reached=LifecycleController.waitForState(delegate,LifecycleState.START,2000);
  Assert.assertEquals(true,reached);
  Assert.assertEquals(LifecycleState.START,delegate.getLifecycleState());
  delegate.stop();
  reached=LifecycleController.waitForState(delegate,LifecycleState.STOP,2000);
  Assert.assertEquals(true,reached);
  Assert.assertEquals(LifecycleState.STOP,delegate.getLifecycleState());
  delegate.start();
  reached=LifecycleController.waitForState(delegate,LifecycleState.IDLE,500);
  Assert.assertEquals(false,reached);
  Assert.assertEquals(LifecycleState.START,delegate.getLifecycleState());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWaitForOneOf() throws LifecycleException, InterruptedException {
  LifecycleAware delegate=new SleeperLifecycleDelegate();
  Assert.assertEquals(LifecycleState.IDLE,delegate.getLifecycleState());
  delegate.start();
  boolean reached=LifecycleController.waitForOneOf(delegate,new LifecycleState[]{LifecycleState.STOP,LifecycleState.START},2000);
  Assert.assertTrue("Matched a state change",reached);
  Assert.assertEquals(LifecycleState.START,delegate.getLifecycleState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.node.TestAbstractConfigurationProvider </h4><pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSinkThrowsExceptionDuringConfiguration() throws Exception {
  String agentName="agent1";
  String sourceType="seq";
  String channelType="memory";
  String sinkType=UnconfigurableSink.class.getName();
  Map<String,String> properties=getProperties(agentName,sourceType,channelType,sinkType);
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,properties);
  MaterializedConfiguration config=provider.getConfiguration();
  Assert.assertTrue(config.getSourceRunners().size() == 1);
  Assert.assertTrue(config.getChannels().size() == 1);
  Assert.assertTrue(config.getSinkRunners().size() == 0);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testChannelThrowsExceptionDuringConfiguration() throws Exception {
  String agentName="agent1";
  String sourceType="seq";
  String channelType=UnconfigurableChannel.class.getName();
  String sinkType="null";
  Map<String,String> properties=getProperties(agentName,sourceType,channelType,sinkType);
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,properties);
  MaterializedConfiguration config=provider.getConfiguration();
  Assert.assertTrue(config.getSourceRunners().size() == 0);
  Assert.assertTrue(config.getChannels().size() == 0);
  Assert.assertTrue(config.getSinkRunners().size() == 0);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSourceThrowsExceptionDuringConfiguration() throws Exception {
  String agentName="agent1";
  String sourceType=UnconfigurableSource.class.getName();
  String channelType="memory";
  String sinkType="null";
  Map<String,String> properties=getProperties(agentName,sourceType,channelType,sinkType);
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,properties);
  MaterializedConfiguration config=provider.getConfiguration();
  Assert.assertTrue(config.getSourceRunners().size() == 0);
  Assert.assertTrue(config.getChannels().size() == 1);
  Assert.assertTrue(config.getSinkRunners().size() == 1);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnspecifiedChannel() throws Exception {
  String agentName="agent1";
  Map<String,String> properties=getPropertiesForChannel(agentName,UnspecifiedChannel.class.getName());
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,properties);
  MaterializedConfiguration config1=provider.getConfiguration();
  Channel channel1=config1.getChannels().values().iterator().next();
  Assert.assertTrue(channel1 instanceof UnspecifiedChannel);
  MaterializedConfiguration config2=provider.getConfiguration();
  Channel channel2=config2.getChannels().values().iterator().next();
  Assert.assertTrue(channel2 instanceof UnspecifiedChannel);
  Assert.assertSame(channel1,channel2);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReusableChannel() throws Exception {
  String agentName="agent1";
  Map<String,String> properties=getPropertiesForChannel(agentName,RecyclableChannel.class.getName());
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,properties);
  MaterializedConfiguration config1=provider.getConfiguration();
  Channel channel1=config1.getChannels().values().iterator().next();
  Assert.assertTrue(channel1 instanceof RecyclableChannel);
  MaterializedConfiguration config2=provider.getConfiguration();
  Channel channel2=config2.getChannels().values().iterator().next();
  Assert.assertTrue(channel2 instanceof RecyclableChannel);
  Assert.assertSame(channel1,channel2);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDispoableChannel() throws Exception {
  String agentName="agent1";
  Map<String,String> properties=getPropertiesForChannel(agentName,DisposableChannel.class.getName());
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,properties);
  MaterializedConfiguration config1=provider.getConfiguration();
  Channel channel1=config1.getChannels().values().iterator().next();
  Assert.assertTrue(channel1 instanceof DisposableChannel);
  MaterializedConfiguration config2=provider.getConfiguration();
  Channel channel2=config2.getChannels().values().iterator().next();
  Assert.assertTrue(channel2 instanceof DisposableChannel);
  Assert.assertNotSame(channel1,channel2);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReusableChannelNotReusedLater() throws Exception {
  String agentName="agent1";
  Map<String,String> propertiesReusable=getPropertiesForChannel(agentName,RecyclableChannel.class.getName());
  Map<String,String> propertiesDispoable=getPropertiesForChannel(agentName,DisposableChannel.class.getName());
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,propertiesReusable);
  MaterializedConfiguration config1=provider.getConfiguration();
  Channel channel1=config1.getChannels().values().iterator().next();
  Assert.assertTrue(channel1 instanceof RecyclableChannel);
  provider.setProperties(propertiesDispoable);
  MaterializedConfiguration config2=provider.getConfiguration();
  Channel channel2=config2.getChannels().values().iterator().next();
  Assert.assertTrue(channel2 instanceof DisposableChannel);
  provider.setProperties(propertiesReusable);
  MaterializedConfiguration config3=provider.getConfiguration();
  Channel channel3=config3.getChannels().values().iterator().next();
  Assert.assertTrue(channel3 instanceof RecyclableChannel);
  Assert.assertNotSame(channel1,channel3);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSourceAndSinkThrowExceptionDuringConfiguration() throws Exception {
  String agentName="agent1";
  String sourceType=UnconfigurableSource.class.getName();
  String channelType="memory";
  String sinkType=UnconfigurableSink.class.getName();
  Map<String,String> properties=getProperties(agentName,sourceType,channelType,sinkType);
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,properties);
  MaterializedConfiguration config=provider.getConfiguration();
  Assert.assertTrue(config.getSourceRunners().size() == 0);
  Assert.assertTrue(config.getChannels().size() == 0);
  Assert.assertTrue(config.getSinkRunners().size() == 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.node.TestPollingPropertiesFileConfigurationProvider </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPolling() throws Exception {
  Thread.sleep(2000L);
  final List<MaterializedConfiguration> events=Lists.newArrayList();
  Object eventHandler=new Object(){
    @Subscribe public synchronized void handleConfigurationEvent(    MaterializedConfiguration event){
      events.add(event);
    }
  }
;
  eventBus.register(eventHandler);
  configFile.setLastModified(System.currentTimeMillis());
  Thread.sleep(2000L);
  Assert.assertEquals(String.valueOf(events),1,events.size());
  MaterializedConfiguration materializedConfiguration=events.remove(0);
  Assert.assertEquals(1,materializedConfiguration.getSourceRunners().size());
  Assert.assertEquals(1,materializedConfiguration.getSinkRunners().size());
  Assert.assertEquals(1,materializedConfiguration.getChannels().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.node.TestPollingZooKeeperConfigurationProvider </h4><pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPolling() throws Exception {
  es.awaitEvent();
  es.reset();
  FlumeConfiguration fc=cp.getFlumeConfiguration();
  Assert.assertTrue(fc.getConfigurationErrors().isEmpty());
  AgentConfiguration ac=fc.getConfigurationFor(AGENT_NAME);
  Assert.assertNull(ac);
  addData();
  es.awaitEvent();
  es.reset();
  verifyProperties(cp);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.node.TestPropertiesFileConfigurationProvider </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyRead() throws Exception {
  FlumeConfiguration configuration=provider.getFlumeConfiguration();
  Assert.assertNotNull(configuration);
  List<String> expected=Lists.newArrayList();
  expected.add("host5 CONFIG_ERROR");
  expected.add("host5 INVALID_PROPERTY");
  expected.add("host4 CONFIG_ERROR");
  expected.add("host4 CONFIG_ERROR");
  expected.add("host4 PROPERTY_VALUE_NULL");
  expected.add("host4 PROPERTY_VALUE_NULL");
  expected.add("host4 PROPERTY_VALUE_NULL");
  expected.add("host4 AGENT_CONFIGURATION_INVALID");
  expected.add("ch2 ATTRS_MISSING");
  expected.add("host3 CONFIG_ERROR");
  expected.add("host3 PROPERTY_VALUE_NULL");
  expected.add("host3 AGENT_CONFIGURATION_INVALID");
  expected.add("host2 PROPERTY_VALUE_NULL");
  expected.add("host2 AGENT_CONFIGURATION_INVALID");
  List<String> actual=Lists.newArrayList();
  for (  FlumeConfigurationError error : configuration.getConfigurationErrors()) {
    actual.add(error.getComponentName() + " " + error.getErrorType().toString());
  }
  Collections.sort(expected);
  Collections.sort(actual);
  Assert.assertEquals(expected,actual);
  AgentConfiguration agentConfiguration=configuration.getConfigurationFor("host1");
  Assert.assertNotNull(agentConfiguration);
  LOGGER.info(agentConfiguration.getPrevalidationConfig());
  LOGGER.info(agentConfiguration.getPostvalidationConfig());
  Set<String> sources=Sets.newHashSet("source1");
  Set<String> sinks=Sets.newHashSet("sink1");
  Set<String> channels=Sets.newHashSet("channel1");
  Assert.assertEquals(sources,agentConfiguration.getSourceSet());
  Assert.assertEquals(sinks,agentConfiguration.getSinkSet());
  Assert.assertEquals(channels,agentConfiguration.getChannelSet());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestAvroEventDeserializer </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSchemaLiteral() throws IOException {
  File tempFile=newTestFile(true);
  String target=tempFile.getAbsolutePath();
  logger.info("Target: {}",target);
  TransientPositionTracker tracker=new TransientPositionTracker(target);
  Context context=new Context();
  context.put(AvroEventDeserializer.CONFIG_SCHEMA_TYPE_KEY,AvroEventDeserializer.AvroSchemaType.LITERAL.toString());
  ResettableInputStream in=new ResettableFileInputStream(tempFile,tracker);
  EventDeserializer des=new AvroEventDeserializer.Builder().build(context,in);
  Event event=des.readEvent();
  String eventSchema=event.getHeaders().get(AvroEventDeserializer.AVRO_SCHEMA_HEADER_LITERAL);
  Assert.assertEquals(schema.toString(),eventSchema);
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSchemaHash() throws IOException, NoSuchAlgorithmException {
  File tempFile=newTestFile(true);
  String target=tempFile.getAbsolutePath();
  logger.info("Target: {}",target);
  TransientPositionTracker tracker=new TransientPositionTracker(target);
  Context context=new Context();
  context.put(AvroEventDeserializer.CONFIG_SCHEMA_TYPE_KEY,AvroEventDeserializer.AvroSchemaType.HASH.toString());
  ResettableInputStream in=new ResettableFileInputStream(tempFile,tracker);
  EventDeserializer des=new AvroEventDeserializer.Builder().build(context,in);
  Event event=des.readEvent();
  String eventSchemaHash=event.getHeaders().get(AvroEventDeserializer.AVRO_SCHEMA_HEADER_HASH);
  String expectedSchemaHash=Hex.encodeHexString(SchemaNormalization.parsingFingerprint("CRC-64-AVRO",schema));
  Assert.assertEquals(expectedSchemaHash,eventSchemaHash);
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void resetTest() throws IOException {
  File tempFile=newTestFile(true);
  String target=tempFile.getAbsolutePath();
  logger.info("Target: {}",target);
  TransientPositionTracker tracker=new TransientPositionTracker(target);
  AvroEventDeserializer.Builder desBuilder=new AvroEventDeserializer.Builder();
  EventDeserializer deserializer=desBuilder.build(new Context(),new ResettableFileInputStream(tempFile,tracker));
  BinaryDecoder decoder=null;
  DatumReader<GenericRecord> reader=new GenericDatumReader<GenericRecord>(schema);
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("bar",reader.read(null,decoder).get("foo").toString());
  deserializer.reset();
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("bar",reader.read(null,decoder).get("foo").toString());
  deserializer.mark();
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("baz",reader.read(null,decoder).get("foo").toString());
  deserializer.reset();
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("baz",reader.read(null,decoder).get("foo").toString());
  assertNull(deserializer.readEvent());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestDurablePositionTracker </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBasicTracker() throws IOException {
  File metaFile=File.createTempFile(getClass().getName(),".meta");
  metaFile.delete();
  File dataFile=File.createTempFile(getClass().getName(),".data");
  Files.write("line 1\nline2\n",dataFile,Charsets.UTF_8);
  final long NEW_POS=7;
  PositionTracker tracker;
  tracker=new DurablePositionTracker(metaFile,dataFile.toString());
  Assert.assertEquals(0,tracker.getPosition());
  tracker.storePosition(NEW_POS);
  Assert.assertEquals(NEW_POS,tracker.getPosition());
  tracker.close();
  tracker=new DurablePositionTracker(metaFile,"foobar");
  Assert.assertEquals(NEW_POS,tracker.getPosition());
  Assert.assertEquals(dataFile.getAbsolutePath(),tracker.getTarget());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestLineDeserializer </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testMaxLineLength() throws IOException {
  String longLine="abcdefghijklmnopqrstuvwxyz\n";
  Context ctx=new Context();
  ctx.put(LineDeserializer.MAXLINE_KEY,"10");
  ResettableInputStream in=new ResettableTestStringInputStream(longLine);
  EventDeserializer des=new LineDeserializer(ctx,in);
  assertEventBodyEquals("abcdefghij",des.readEvent());
  assertEventBodyEquals("klmnopqrst",des.readEvent());
  assertEventBodyEquals("uvwxyz",des.readEvent());
  Assert.assertNull(des.readEvent());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBatch() throws IOException {
  ResettableInputStream in=new ResettableTestStringInputStream(mini);
  EventDeserializer des=new LineDeserializer(new Context(),in);
  List<Event> events;
  events=des.readEvents(1);
  Assert.assertEquals(1,events.size());
  assertEventBodyEquals("line 1",events.get(0));
  events=des.readEvents(10);
  Assert.assertEquals(1,events.size());
  assertEventBodyEquals("line 2",events.get(0));
  des.mark();
  des.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestResettableFileInputStream </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure a reset() brings us back to the default mark (beginning of file)
 * @throws IOException
 */
@Test public void testReset() throws IOException {
  String output=singleLineFileInit(file,Charsets.UTF_8);
  PositionTracker tracker=new DurablePositionTracker(meta,file.getPath());
  ResettableInputStream in=new ResettableFileInputStream(file,tracker);
  String result1=readLine(in,output.length());
  assertEquals(output,result1);
  in.reset();
  String result2=readLine(in,output.length());
  assertEquals(output,result2);
  String result3=readLine(in,output.length());
  assertNull("Should be null: " + result3,result3);
  in.close();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Ensure that surrogate pairs work well when resuming
 * reading. Specifically, this test brings up special situations
 * where a surrogate pair cannot be correctly decoded because
 * the second character is lost.
 * @throws IOException
 */
@Test public void testResumeWithSurrogatePairs() throws IOException {
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  out.write("foo".getBytes(Charsets.UTF_8));
  generateUtf8SurrogatePairSequence(out);
  out.write("bar".getBytes(Charsets.UTF_8));
  Files.write(out.toByteArray(),file);
  PositionTracker tracker=new DurablePositionTracker(meta,file.getPath());
  ResettableInputStream in=new ResettableFileInputStream(file,tracker);
  Assert.assertEquals('f',in.readChar());
  Assert.assertEquals('o',in.readChar());
  in.mark();
  Assert.assertEquals('o',in.readChar());
  Assert.assertEquals('\ud83d',in.readChar());
  in.reset();
  in.close();
  tracker.close();
  tracker=new DurablePositionTracker(meta,file.getPath());
  in=new ResettableFileInputStream(file,tracker);
  Assert.assertEquals('o',in.readChar());
  Assert.assertEquals('\ud83d',in.readChar());
  in.mark();
  in.close();
  tracker.close();
  tracker=new DurablePositionTracker(meta,file.getPath());
  in=new ResettableFileInputStream(file,tracker);
  Assert.assertEquals('b',in.readChar());
  Assert.assertEquals('a',in.readChar());
  Assert.assertEquals('r',in.readChar());
  Assert.assertEquals(-1,in.readChar());
  in.close();
  tracker.close();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSeek() throws IOException {
  int NUM_LINES=1000;
  int LINE_LEN=1000;
  generateData(file,Charsets.UTF_8,NUM_LINES,LINE_LEN);
  PositionTracker tracker=new DurablePositionTracker(meta,file.getPath());
  ResettableInputStream in=new ResettableFileInputStream(file,tracker,10 * LINE_LEN,Charsets.UTF_8,DecodeErrorPolicy.FAIL);
  String line="";
  for (int i=0; i < 9; i++) {
    line=readLine(in,LINE_LEN);
  }
  int lineNum=Integer.parseInt(line.substring(0,10));
  assertEquals(8,lineNum);
  long pos=in.tell();
  in.seek(pos - 2 * LINE_LEN);
  line=readLine(in,LINE_LEN);
  lineNum=Integer.parseInt(line.substring(0,10));
  assertEquals(7,lineNum);
  in.seek(in.tell() + LINE_LEN);
  line=readLine(in,LINE_LEN);
  lineNum=Integer.parseInt(line.substring(0,10));
  assertEquals(9,lineNum);
  in.seek(in.tell() + 20 * LINE_LEN);
  line=readLine(in,LINE_LEN);
  lineNum=Integer.parseInt(line.substring(0,10));
  assertEquals(30,lineNum);
  in.seek(in.tell() - 25 * LINE_LEN);
  line=readLine(in,LINE_LEN);
  lineNum=Integer.parseInt(line.substring(0,10));
  assertEquals(6,lineNum);
  in.seek(100 * LINE_LEN);
  in.seek(0);
  in.seek(9 * LINE_LEN);
  assertEquals(9,Integer.parseInt(readLine(in,LINE_LEN).substring(0,10)));
  assertEquals(10,Integer.parseInt(readLine(in,LINE_LEN).substring(0,10)));
  assertEquals(11,Integer.parseInt(readLine(in,LINE_LEN).substring(0,10)));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Ensure that marking and resetting works.
 * @throws IOException
 */
@Test public void testMarkReset() throws IOException {
  List<String> expected=multiLineFileInit(file,Charsets.UTF_8);
  int MAX_LEN=100;
  PositionTracker tracker=new DurablePositionTracker(meta,file.getPath());
  ResettableInputStream in=new ResettableFileInputStream(file,tracker);
  String result0=readLine(in,MAX_LEN);
  assertEquals(expected.get(0),result0);
  in.reset();
  String result0a=readLine(in,MAX_LEN);
  assertEquals(expected.get(0),result0a);
  in.mark();
  String result1=readLine(in,MAX_LEN);
  assertEquals(expected.get(1),result1);
  in.reset();
  String result1a=readLine(in,MAX_LEN);
  assertEquals(expected.get(1),result1a);
  in.mark();
  in.close();
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Ensure that we can simply read bytes from a file using InputStream.read() method.
 * @throws IOException
 */
@Test public void testReadByte() throws IOException {
  byte[] bytes=new byte[255];
  for (int i=0; i < 255; i++) {
    bytes[i]=(byte)i;
  }
  Files.write(bytes,file);
  PositionTracker tracker=new DurablePositionTracker(meta,file.getPath());
  ResettableInputStream in=new ResettableFileInputStream(file,tracker);
  for (int i=0; i < 255; i++) {
    assertEquals(i,in.read());
  }
  assertEquals(-1,in.read());
  in.close();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Ensure that surrogate pairs work well with mark/reset.
 * @throws IOException
 */
@Test public void testMarkResetWithSurrogatePairs() throws IOException {
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  out.write("foo".getBytes(Charsets.UTF_8));
  generateUtf8SurrogatePairSequence(out);
  out.write("bar".getBytes(Charsets.UTF_8));
  Files.write(out.toByteArray(),file);
  PositionTracker tracker=new DurablePositionTracker(meta,file.getPath());
  ResettableInputStream in=new ResettableFileInputStream(file,tracker);
  Assert.assertEquals('f',in.readChar());
  Assert.assertEquals('o',in.readChar());
  in.mark();
  Assert.assertEquals('o',in.readChar());
  Assert.assertEquals('\ud83d',in.readChar());
  in.reset();
  Assert.assertEquals('\ude18',in.readChar());
  Assert.assertEquals('o',in.readChar());
  Assert.assertEquals('\ud83d',in.readChar());
  in.mark();
  in.reset();
  Assert.assertEquals('\ude18',in.readChar());
  Assert.assertEquals('b',in.readChar());
  Assert.assertEquals('a',in.readChar());
  in.reset();
  Assert.assertEquals('b',in.readChar());
  Assert.assertEquals('a',in.readChar());
  Assert.assertEquals('r',in.readChar());
  Assert.assertEquals(-1,in.readChar());
  in.close();
  tracker.close();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testResume() throws IOException {
  List<String> expected=multiLineFileInit(file,Charsets.UTF_8);
  int MAX_LEN=100;
  PositionTracker tracker=new DurablePositionTracker(meta,file.getPath());
  ResettableInputStream in=new ResettableFileInputStream(file,tracker);
  String result0=readLine(in,MAX_LEN);
  String result1=readLine(in,MAX_LEN);
  in.mark();
  String result2=readLine(in,MAX_LEN);
  Assert.assertEquals(expected.get(2),result2);
  String result3=readLine(in,MAX_LEN);
  Assert.assertEquals(expected.get(3),result3);
  in.close();
  tracker.close();
  tracker=new DurablePositionTracker(meta,file.getPath());
  in=new ResettableFileInputStream(file,tracker);
  String result2a=readLine(in,MAX_LEN);
  String result3a=readLine(in,MAX_LEN);
  Assert.assertEquals(result2,result2a);
  Assert.assertEquals(result3,result3a);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestSyslogAvroEventSerializer </h4><pre class="type-12 type-1 type-19 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws FileNotFoundException, IOException {
  Assume.assumeTrue(!"Mac OS X".equals(System.getProperty("os.name")) || !System.getProperty("java.version").startsWith("1.7."));
  OutputStream out=new FileOutputStream(testFile);
  String builderName=SyslogAvroEventSerializer.Builder.class.getName();
  Context ctx=new Context();
  ctx.put("syncInterval","4096");
  ctx.put("compressionCodec","snappy");
  EventSerializer serializer=EventSerializerFactory.getInstance(builderName,ctx,out);
  serializer.afterCreate();
  List<Event> events=generateSyslogEvents();
  for (  Event e : events) {
    serializer.write(e);
  }
  serializer.flush();
  serializer.beforeClose();
  out.flush();
  out.close();
  DatumReader<GenericRecord> reader=new GenericDatumReader<GenericRecord>();
  DataFileReader<GenericRecord> fileReader=new DataFileReader<GenericRecord>(testFile,reader);
  GenericRecord record=new GenericData.Record(fileReader.getSchema());
  int numEvents=0;
  while (fileReader.hasNext()) {
    fileReader.next(record);
    int facility=(Integer)record.get("facility");
    int severity=(Integer)record.get("severity");
    long timestamp=(Long)record.get("timestamp");
    String hostname=record.get("hostname").toString();
    String message=record.get("message").toString();
    Assert.assertEquals("Facility should be 1",1,facility);
    System.out.println(timestamp + ": " + message);
    numEvents++;
  }
  fileReader.close();
  Assert.assertEquals("Should have found a total of 3 events",3,numEvents);
  FileUtils.forceDelete(testFile);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.SinkProcessorFactoryTest </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInstantiatingLoadBalancingSinkProcessor(){
  Context context=new Context();
  context.put("type",LoadBalancingSinkProcessor.class.getName());
  context.put("selector","random");
  SinkFactory sf=new DefaultSinkFactory();
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(sf.create("sink1","avro"));
  sinks.add(sf.create("sink2","avro"));
  SinkProcessor sp=SinkProcessorFactory.getProcessor(context,sinks);
  context.put("type","load_balance");
  SinkProcessor sp2=SinkProcessorFactory.getProcessor(context,sinks);
  Assert.assertEquals(sp.getClass(),sp2.getClass());
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test(){
  Context context=new Context();
  context.put("type",FailoverSinkProcessor.class.getName());
  context.put("priority.sink1","1");
  context.put("priority.sink2","2");
  SinkFactory sf=new DefaultSinkFactory();
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(sf.create("sink1","avro"));
  sinks.add(sf.create("sink2","avro"));
  SinkProcessor sp=SinkProcessorFactory.getProcessor(context,sinks);
  context.put("type","failover");
  SinkProcessor sp2=SinkProcessorFactory.getProcessor(context,sinks);
  Assert.assertEquals(sp.getClass(),sp2.getClass());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestAvroSink </h4><pre class="type-13 type-11 type-10 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslSinkWithNonSslServer() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  Server server=createServer(new MockAvroServer());
  server.start();
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("trust-all-certs",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  Configurables.configure(sink,context);
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  boolean failed=false;
  try {
    for (int i=0; i < 5; i++) {
      sink.process();
      failed=true;
    }
  }
 catch (  EventDeliveryException ex) {
    logger.info("Correctly failed to send event",ex);
  }
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
  if (failed) {
    Assert.fail("SSL-enabled sink successfully connected to a non-SSL-enabled server, that's wrong.");
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslWithCompression() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp("deflate",6);
  boolean bound=false;
  AvroSource source;
  Channel sourceChannel;
  int selectedPort;
  source=new AvroSource();
  sourceChannel=new MemoryChannel();
  Configurables.configure(sourceChannel,new Context());
  List<Channel> channels=new ArrayList<Channel>();
  channels.add(sourceChannel);
  ChannelSelector rcs=new ReplicatingChannelSelector();
  rcs.setChannels(channels);
  source.setChannelProcessor(new ChannelProcessor(rcs));
  Context context=new Context();
  context.put("port",port.toString());
  context.put("bind",hostname);
  context.put("threads","50");
  context.put("compression-type","deflate");
  context.put("ssl",String.valueOf(true));
  context.put("keystore","src/test/resources/server.p12");
  context.put("keystore-password","password");
  context.put("keystore-type","PKCS12");
  Configurables.configure(source,context);
  source.start();
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  Event event=EventBuilder.withBody("Hello avro",Charset.forName("UTF8"));
  context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("trust-all-certs",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  context.put("compression-type","deflate");
  context.put("compression-level",Integer.toString(6));
  Configurables.configure(sink,context);
  sink.start();
  Transaction sickTransaction=channel.getTransaction();
  sickTransaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  sickTransaction.commit();
  sickTransaction.close();
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    logger.debug("Calling Process " + i + " times:"+ status);
    Assert.assertEquals(Sink.Status.READY,status);
  }
  sink.stop();
  Transaction sourceTransaction=sourceChannel.getTransaction();
  sourceTransaction.begin();
  Event sourceEvent=sourceChannel.take();
  Assert.assertNotNull(sourceEvent);
  Assert.assertEquals("Channel contained our event","Hello avro",new String(sourceEvent.getBody()));
  sourceTransaction.commit();
  sourceTransaction.close();
  logger.debug("Round trip event:{}",sourceEvent);
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslProcess() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  Server server=createSslServer(new MockAvroServer());
  server.start();
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("trust-all-certs",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  Configurables.configure(sink,context);
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProcess() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  Server server=createServer(new MockAvroServer());
  server.start();
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslProcessWithTrustStore() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  Server server=createSslServer(new MockAvroServer());
  server.start();
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("truststore","src/test/resources/truststore.jks");
  context.put("truststore-password","password");
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  Configurables.configure(sink,context);
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailedConnect() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charset.forName("UTF8"));
  Server server=createServer(new MockAvroServer());
  server.start();
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Thread.sleep(500L);
  server.close();
  Thread.sleep(500L);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 5; i++) {
    boolean threwException=false;
    try {
      sink.process();
    }
 catch (    EventDeliveryException e) {
      threwException=true;
    }
    Assert.assertTrue("Must throw EventDeliveryException if disconnected",threwException);
  }
  server=createServer(new MockAvroServer());
  server.start();
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReset() throws Exception {
  setUp();
  Server server=createServer(new MockAvroServer());
  server.start();
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  context.put("reset-connection-interval",String.valueOf("5"));
  sink.setChannel(channel);
  Configurables.configure(sink,context);
  sink.start();
  RpcClient firstClient=sink.getUnderlyingClient();
  Thread.sleep(6000);
  Transaction t=channel.getTransaction();
  t.begin();
  channel.put(EventBuilder.withBody("This is a test",Charset.defaultCharset()));
  t.commit();
  t.close();
  sink.process();
  Assert.assertFalse(firstClient == sink.getUnderlyingClient());
  sink.stop();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  context.put("reset-connection-interval",String.valueOf("0"));
  sink.setChannel(channel);
  Configurables.configure(sink,context);
  sink.start();
  firstClient=sink.getUnderlyingClient();
  Thread.sleep(6000);
  Assert.assertTrue(firstClient == sink.getUnderlyingClient());
  sink.stop();
  context.clear();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  sink.setChannel(channel);
  Configurables.configure(sink,context);
  sink.start();
  firstClient=sink.getUnderlyingClient();
  Thread.sleep(6000);
  Assert.assertTrue(firstClient == sink.getUnderlyingClient());
  sink.stop();
  server.close();
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLifecycle() throws InterruptedException, InstantiationException, IllegalAccessException {
  setUp();
  Server server=createServer(new MockAvroServer());
  server.start();
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTimeout() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("foo",Charsets.UTF_8);
  AtomicLong delay=new AtomicLong();
  Server server=createServer(new DelayMockAvroServer(delay));
  server.start();
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int i=0; i < 4; i++) {
    channel.put(event);
  }
  txn.commit();
  txn.close();
  delay.set(3000L);
  boolean threw=false;
  try {
    sink.process();
  }
 catch (  EventDeliveryException ex) {
    logger.info("Correctly threw due to connect timeout. Exception follows.",ex);
    threw=true;
  }
  Assert.assertTrue("Must throw due to connect timeout",threw);
  delay.set(0);
  sink.process();
  delay.set(4000L);
  threw=false;
  try {
    sink.process();
  }
 catch (  EventDeliveryException ex) {
    logger.info("Correctly threw due to request timeout. Exception follows.",ex);
    threw=true;
  }
  Assert.assertTrue("Must throw due to request timeout",threw);
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
}

</code></pre>

<br>
<pre class="type-13 type-11 type-10 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslSinkWithNonTrustedCert() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  Server server=createSslServer(new MockAvroServer());
  server.start();
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  Configurables.configure(sink,context);
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  boolean failed=false;
  try {
    for (int i=0; i < 5; i++) {
      sink.process();
      failed=true;
    }
  }
 catch (  EventDeliveryException ex) {
    logger.info("Correctly failed to send event",ex);
  }
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
  if (failed) {
    Assert.fail("SSL-enabled sink successfully connected to a server with an untrusted certificate when it should have failed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestDefaultSinkFactory </h4><pre class="type-10 type-1 type-14 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDuplicateCreate(){
  Sink avroSink1=sinkFactory.create("avroSink1","avro");
  Sink avroSink2=sinkFactory.create("avroSink2","avro");
  Assert.assertNotNull(avroSink1);
  Assert.assertNotNull(avroSink2);
  Assert.assertNotSame(avroSink1,avroSink2);
  Assert.assertTrue(avroSink1 instanceof AvroSink);
  Assert.assertTrue(avroSink2 instanceof AvroSink);
  Sink s1=sinkFactory.create("avroSink1","avro");
  Sink s2=sinkFactory.create("avroSink2","avro");
  Assert.assertNotSame(avroSink1,s1);
  Assert.assertNotSame(avroSink2,s2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestFailoverSinkProcessor </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test failover by feeding events to the channel and verifying at various
 * stages that the number of events consumed by each sink matches expected
 * failover patterns
 * @throws InterruptedException
 */
@Test public void testFailover() throws InterruptedException {
  Channel ch=new MemoryChannel();
  ConsumeXSink s1=new ConsumeXSink(10);
  s1.setChannel(ch);
  s1.setName("s1");
  ConsumeXSink s2=new ConsumeXSink(50);
  s2.setChannel(ch);
  s2.setName("s2");
  ConsumeXSink s3=new ConsumeXSink(100);
  s3.setChannel(ch);
  s3.setName("s3");
  Context context=new Context();
  Configurables.configure(s1,context);
  Configurables.configure(s2,context);
  Configurables.configure(s3,context);
  Configurables.configure(ch,context);
  ch.start();
  List<Sink> sinks=new LinkedList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  SinkGroup group=new SinkGroup(sinks);
  Map<String,String> params=new HashMap<String,String>();
  params.put("sinks","s1 s2 s3");
  params.put("processor.type","failover");
  params.put("processor.priority.s1","3");
  params.put("processor.priority.s2","2");
  params.put("processor.priority.s3","1");
  params.put("processor.maxpenalty","10000");
  context.putAll(params);
  Configurables.configure(group,context);
  SinkRunner runner=new SinkRunner(group.getProcessor());
  runner.start();
  Assert.assertEquals(LifecycleState.START,s1.getLifecycleState());
  Assert.assertEquals(LifecycleState.START,s2.getLifecycleState());
  Assert.assertEquals(LifecycleState.START,s3.getLifecycleState());
  for (int i=0; i < 15; i++) {
    Transaction tx=ch.getTransaction();
    tx.begin();
    ch.put(EventBuilder.withBody("test".getBytes()));
    tx.commit();
    tx.close();
  }
  Thread.sleep(100);
  Assert.assertEquals(new Integer(10),s1.getWritten());
  Assert.assertEquals(new Integer(5),s2.getWritten());
  for (int i=0; i < 50; i++) {
    Transaction tx=ch.getTransaction();
    tx.begin();
    ch.put(EventBuilder.withBody("test".getBytes()));
    tx.commit();
    tx.close();
  }
  Thread.sleep(100);
  Assert.assertEquals(new Integer(50),s2.getWritten());
  Assert.assertEquals(new Integer(5),s3.getWritten());
  s2.setRemaining(20);
  Thread.sleep(5000);
  for (int i=0; i < 100; i++) {
    Transaction tx=ch.getTransaction();
    tx.begin();
    ch.put(EventBuilder.withBody("test".getBytes()));
    tx.commit();
    tx.close();
  }
  Thread.sleep(1000);
  Assert.assertEquals(new Integer(10),s1.getWritten());
  Assert.assertEquals(new Integer(70),s2.getWritten());
  Assert.assertEquals(new Integer(85),s3.getWritten());
  runner.stop();
  ch.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestLoadBalancingSinkProcessor </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRoundRobinBackoffInitialFailure() throws EventDeliveryException {
  Channel ch=new MockChannel();
  int n=100;
  int numEvents=3 * n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  LoadBalancingSinkProcessor lbsp=getProcessor("round_robin",sinks,true);
  Status s=Status.READY;
  for (int i=0; i < 3 && s != Status.BACKOFF; i++) {
    s=lbsp.process();
  }
  s2.setFail(true);
  for (int i=0; i < 3 && s != Status.BACKOFF; i++) {
    s=lbsp.process();
  }
  s2.setFail(false);
  while (s != Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertEquals((3 * n) / 2,s1.getEvents().size());
  Assert.assertEquals(1,s2.getEvents().size());
  Assert.assertEquals((3 * n) / 2 - 1,s3.getEvents().size());
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCustomSelector() throws Exception {
  Channel ch=new MockChannel();
  int n=10;
  int numEvents=n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  s1.setFail(true);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  Context ctx=getContext(FixedOrderSelector.class.getCanonicalName());
  ctx.put("selector." + FixedOrderSelector.SET_ME,"foo");
  LoadBalancingSinkProcessor lbsp=getProcessor(sinks,ctx);
  Sink.Status s=Sink.Status.READY;
  while (s != Sink.Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertTrue(s1.getEvents().size() == 0);
  Assert.assertTrue(s2.getEvents().size() == n);
  Assert.assertTrue(s3.getEvents().size() == 0);
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRoundRobinPersistentFailure() throws Exception {
  Channel ch=new MockChannel();
  int n=100;
  int numEvents=3 * n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  s2.setFail(true);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  LoadBalancingSinkProcessor lbsp=getProcessor("round_robin",sinks,false);
  Status s=Status.READY;
  while (s != Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertTrue(s1.getEvents().size() == n);
  Assert.assertTrue(s2.getEvents().size() == 0);
  Assert.assertTrue(s3.getEvents().size() == 2 * n);
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDefaultConfiguration() throws Exception {
  Channel ch=new MockChannel();
  int n=100;
  int numEvents=3 * n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  LoadBalancingSinkProcessor lbsp=getProcessor(sinks,new Context());
  Status s=Status.READY;
  while (s != Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertTrue(s1.getEvents().size() == n);
  Assert.assertTrue(s2.getEvents().size() == n);
  Assert.assertTrue(s3.getEvents().size() == n);
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRoundRobinOneActiveSink() throws Exception {
  Channel ch=new MockChannel();
  int n=10;
  int numEvents=n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  s1.setFail(true);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  s3.setFail(true);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  LoadBalancingSinkProcessor lbsp=getProcessor("round_robin",sinks,false);
  Sink.Status s=Sink.Status.READY;
  while (s != Sink.Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertTrue(s1.getEvents().size() == 0);
  Assert.assertTrue(s2.getEvents().size() == n);
  Assert.assertTrue(s3.getEvents().size() == 0);
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRoundRobinBackoffFailureRecovery() throws EventDeliveryException, InterruptedException {
  Channel ch=new MockChannel();
  int n=100;
  int numEvents=3 * n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  s2.setFail(true);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  LoadBalancingSinkProcessor lbsp=getProcessor("round_robin",sinks,true);
  Status s=Status.READY;
  for (int i=0; i < 3 && s != Status.BACKOFF; i++) {
    s=lbsp.process();
  }
  s2.setFail(false);
  Thread.sleep(2001);
  while (s != Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertEquals(n + 1,s1.getEvents().size());
  Assert.assertEquals(n - 1,s2.getEvents().size());
  Assert.assertEquals(n,s3.getEvents().size());
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRoundRobinBackoffIncreasingBackoffs() throws EventDeliveryException, InterruptedException {
  Channel ch=new MockChannel();
  int n=100;
  int numEvents=3 * n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  s2.setFail(true);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  LoadBalancingSinkProcessor lbsp=getProcessor("round_robin",sinks,true);
  Status s=Status.READY;
  for (int i=0; i < 3 && s != Status.BACKOFF; i++) {
    s=lbsp.process();
  }
  Assert.assertEquals(0,s2.getEvents().size());
  Thread.sleep(2100);
  for (int i=0; i < 3 && s != Status.BACKOFF; i++) {
    s=lbsp.process();
  }
  Assert.assertEquals(0,s2.getEvents().size());
  s2.setFail(false);
  Thread.sleep(2100);
  for (int i=0; i < 3 && s != Status.BACKOFF; i++) {
    s=lbsp.process();
  }
  Assert.assertEquals(0,s2.getEvents().size());
  Thread.sleep(2100);
  while (s != Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertEquals(n + 2,s1.getEvents().size());
  Assert.assertEquals(n - 3,s2.getEvents().size());
  Assert.assertEquals(n + 1,s3.getEvents().size());
}

</code></pre>

<br>
<pre class="type-9 type-11 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomBackoff() throws Exception {
  Channel ch=new MockChannel();
  int n=100;
  int numEvents=n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  s1.setFail(true);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  s3.setFail(true);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  LoadBalancingSinkProcessor lbsp=getProcessor("random",sinks,true);
  for (int i=0; i < 50; i++) {
    lbsp.process();
  }
  Assert.assertEquals(50,s2.getEvents().size());
  s2.setFail(true);
  s1.setFail(false);
  try {
    lbsp.process();
    Assert.fail("Expected EventDeliveryException");
  }
 catch (  EventDeliveryException e) {
  }
  Thread.sleep(2100);
  Sink.Status s=Sink.Status.READY;
  while (s != Sink.Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertEquals(50,s1.getEvents().size());
  Assert.assertEquals(50,s2.getEvents().size());
  Assert.assertEquals(0,s3.getEvents().size());
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRandomPersistentFailure() throws Exception {
  Channel ch=new MockChannel();
  int n=100;
  int numEvents=3 * n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  s2.setFail(true);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  LoadBalancingSinkProcessor lbsp=getProcessor("random",sinks,false);
  Status s=Status.READY;
  while (s != Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertTrue(s2.getEvents().size() == 0);
  Assert.assertTrue(s1.getEvents().size() + s3.getEvents().size() == 3 * n);
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRandomOneActiveSink() throws Exception {
  Channel ch=new MockChannel();
  int n=10;
  int numEvents=n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  s1.setFail(true);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  s3.setFail(true);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  LoadBalancingSinkProcessor lbsp=getProcessor("random",sinks,false);
  Sink.Status s=Sink.Status.READY;
  while (s != Sink.Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertTrue(s1.getEvents().size() == 0);
  Assert.assertTrue(s2.getEvents().size() == n);
  Assert.assertTrue(s3.getEvents().size() == 0);
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRoundRobinNoFailure() throws Exception {
  Channel ch=new MockChannel();
  int n=100;
  int numEvents=3 * n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  LoadBalancingSinkProcessor lbsp=getProcessor("round_robin",sinks,false);
  Status s=Status.READY;
  while (s != Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertTrue(s1.getEvents().size() == n);
  Assert.assertTrue(s2.getEvents().size() == n);
  Assert.assertTrue(s3.getEvents().size() == n);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestThriftSink </h4><pre class="type-13 type-11 type-10 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslSinkWithNonSslServer() throws Exception {
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  src=new ThriftTestingSource(ThriftTestingSource.HandlerType.OK.name(),port,ThriftRpcClient.COMPACT_PROTOCOL);
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  context.put("truststore","src/test/resources/truststorefile.jks");
  context.put("truststore-password","password");
  context.put("trustmanager-type",TrustManagerFactory.getDefaultAlgorithm());
  Configurables.configure(sink,context);
  channel.start();
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 11; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  boolean failed=false;
  try {
    for (int i=0; i < 6; i++) {
      Sink.Status status=sink.process();
      failed=true;
    }
  }
 catch (  EventDeliveryException ex) {
  }
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  if (failed) {
    Assert.fail("SSL-enabled sink successfully connected to a non-SSL-enabled server, that's wrong.");
  }
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSslProcess() throws Exception {
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  src=new ThriftTestingSource(ThriftTestingSource.HandlerType.OK.name(),port,ThriftRpcClient.COMPACT_PROTOCOL,"src/test/resources/keystorefile.jks","password",KeyManagerFactory.getDefaultAlgorithm(),"JKS");
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  context.put("truststore","src/test/resources/truststorefile.jks");
  context.put("truststore-password","password");
  context.put("trustmanager-type",TrustManagerFactory.getDefaultAlgorithm());
  Configurables.configure(sink,context);
  channel.start();
  sink.start();
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 11; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 6; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
  Assert.assertEquals(11,src.flumeEvents.size());
  Assert.assertEquals(6,src.batchCount);
  Assert.assertEquals(0,src.individualCount);
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProcess() throws Exception {
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  src=new ThriftTestingSource(ThriftTestingSource.HandlerType.OK.name(),port,ThriftRpcClient.COMPACT_PROTOCOL);
  channel.start();
  sink.start();
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 11; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 6; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
  Assert.assertEquals(11,src.flumeEvents.size());
  Assert.assertEquals(6,src.batchCount);
  Assert.assertEquals(0,src.individualCount);
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailedConnect() throws Exception {
  Event event=EventBuilder.withBody("test event 1",Charset.forName("UTF8"));
  sink.start();
  Thread.sleep(500L);
  Thread.sleep(500L);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 5; i++) {
    boolean threwException=false;
    try {
      sink.process();
    }
 catch (    EventDeliveryException e) {
      threwException=true;
    }
    Assert.assertTrue("Must throw EventDeliveryException if disconnected",threwException);
  }
  src=new ThriftTestingSource(ThriftTestingSource.HandlerType.OK.name(),port,ThriftRpcClient.COMPACT_PROTOCOL);
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
}

</code></pre>

<br>
<pre class="type-13 type-11 type-10 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslSinkWithNonTrustedCert() throws Exception {
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  src=new ThriftTestingSource(ThriftTestingSource.HandlerType.OK.name(),port,ThriftRpcClient.COMPACT_PROTOCOL,"src/test/resources/keystorefile.jks","password",KeyManagerFactory.getDefaultAlgorithm(),"JKS");
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  Configurables.configure(sink,context);
  channel.start();
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 11; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  boolean failed=false;
  try {
    for (int i=0; i < 6; i++) {
      Sink.Status status=sink.process();
      failed=true;
    }
  }
 catch (  EventDeliveryException ex) {
  }
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  if (failed) {
    Assert.fail("SSL-enabled sink successfully connected to a server with an untrusted certificate when it should have failed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TestElasticSearchDynamicSerializer </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRoundTrip() throws Exception {
  ElasticSearchDynamicSerializer fixture=new ElasticSearchDynamicSerializer();
  Context context=new Context();
  fixture.configure(context);
  String message="test body";
  Map<String,String> headers=Maps.newHashMap();
  headers.put("headerNameOne","headerValueOne");
  headers.put("headerNameTwo","headerValueTwo");
  headers.put("headerNameThree","headerValueThree");
  Event event=EventBuilder.withBody(message.getBytes(charset));
  event.setHeaders(headers);
  XContentBuilder expected=jsonBuilder().startObject();
  expected.field("body",new String(message.getBytes(),charset));
  for (  String headerName : headers.keySet()) {
    expected.field(headerName,new String(headers.get(headerName).getBytes(),charset));
  }
  expected.endObject();
  XContentBuilder actual=fixture.getContentBuilder(event);
  assertEquals(new String(expected.bytes().array()),new String(actual.bytes().array()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TestElasticSearchIndexRequestBuilderFactory </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseExistingAtTimestampHeaderInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  Map<String,String> headersWithTimestamp=Maps.newHashMap();
  headersWithTimestamp.put("@timestamp","-999");
  base.setHeaders(headersWithTimestamp);
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals(-999L,timestampedEvent.getTimestamp());
  assertEquals("-999",timestampedEvent.getHeaders().get("@timestamp"));
  assertNull(timestampedEvent.getHeaders().get("timestamp"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldSetIndexNameTypeAndSerializedEventIntoIndexRequest() throws Exception {
  String indexPrefix="qwerty";
  String indexType="uiop";
  Event event=new SimpleEvent();
  IndexRequestBuilder indexRequestBuilder=factory.createIndexRequest(FAKE_CLIENT,indexPrefix,indexType,event);
  assertEquals(indexPrefix + '-' + ElasticSearchIndexRequestBuilderFactory.df.format(FIXED_TIME_MILLIS),indexRequestBuilder.request().index());
  assertEquals(indexType,indexRequestBuilder.request().type());
  assertArrayEquals(FakeEventSerializer.FAKE_BYTES,indexRequestBuilder.request().source().array());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldEnsureTimestampHeaderPresentInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals(FIXED_TIME_MILLIS,timestampedEvent.getTimestamp());
  assertEquals(String.valueOf(FIXED_TIME_MILLIS),timestampedEvent.getHeaders().get("timestamp"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldPreserveBodyAndNonTimestampHeadersInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  base.setBody(new byte[]{1,2,3,4});
  Map<String,String> headersWithTimestamp=Maps.newHashMap();
  headersWithTimestamp.put("foo","bar");
  base.setHeaders(headersWithTimestamp);
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals("bar",timestampedEvent.getHeaders().get("foo"));
  assertArrayEquals(base.getBody(),timestampedEvent.getBody());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldUseExistingTimestampHeaderInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  Map<String,String> headersWithTimestamp=Maps.newHashMap();
  headersWithTimestamp.put("timestamp","-321");
  base.setHeaders(headersWithTimestamp);
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals(-321L,timestampedEvent.getTimestamp());
  assertEquals("-321",timestampedEvent.getHeaders().get("timestamp"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldSetIndexNameFromTimestampHeaderWhenPresent() throws Exception {
  String indexPrefix="qwerty";
  String indexType="uiop";
  Event event=new SimpleEvent();
  event.getHeaders().put("timestamp","1213141516");
  IndexRequestBuilder indexRequestBuilder=factory.createIndexRequest(null,indexPrefix,indexType,event);
  assertEquals(indexPrefix + '-' + ElasticSearchIndexRequestBuilderFactory.df.format(1213141516L),indexRequestBuilder.request().index());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldSetIndexNameTypeFromHeaderWhenPresent() throws Exception {
  String indexPrefix="%{index-name}";
  String indexType="%{index-type}";
  String indexValue="testing-index-name-from-headers";
  String typeValue="testing-index-type-from-headers";
  Event event=new SimpleEvent();
  event.getHeaders().put("index-name",indexValue);
  event.getHeaders().put("index-type",typeValue);
  IndexRequestBuilder indexRequestBuilder=factory.createIndexRequest(null,indexPrefix,indexType,event);
  assertEquals(indexValue + '-' + ElasticSearchIndexRequestBuilderFactory.df.format(FIXED_TIME_MILLIS),indexRequestBuilder.request().index());
  assertEquals(typeValue,indexRequestBuilder.request().type());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TestElasticSearchLogStashEventSerializer </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldHandleInvalidJSONDuringComplexParsing() throws Exception {
  ElasticSearchLogStashEventSerializer fixture=new ElasticSearchLogStashEventSerializer();
  Context context=new Context();
  fixture.configure(context);
  String message="{flume: somethingnotvalid}";
  Map<String,String> headers=Maps.newHashMap();
  long timestamp=System.currentTimeMillis();
  headers.put("timestamp",String.valueOf(timestamp));
  headers.put("source","flume_tail_src");
  headers.put("host","test@localhost");
  headers.put("src_path","/tmp/test");
  headers.put("headerNameOne","headerValueOne");
  headers.put("headerNameTwo","headerValueTwo");
  headers.put("type","sometype");
  Event event=EventBuilder.withBody(message.getBytes(charset));
  event.setHeaders(headers);
  XContentBuilder expected=jsonBuilder().startObject();
  expected.field("@message",new String(message.getBytes(),charset));
  expected.field("@timestamp",new Date(timestamp));
  expected.field("@source","flume_tail_src");
  expected.field("@type","sometype");
  expected.field("@source_host","test@localhost");
  expected.field("@source_path","/tmp/test");
  expected.startObject("@fields");
  expected.field("timestamp",String.valueOf(timestamp));
  expected.field("src_path","/tmp/test");
  expected.field("host","test@localhost");
  expected.field("headerNameTwo","headerValueTwo");
  expected.field("source","flume_tail_src");
  expected.field("headerNameOne","headerValueOne");
  expected.field("type","sometype");
  expected.endObject();
  expected.endObject();
  XContentBuilder actual=fixture.getContentBuilder(event);
  JsonParser parser=new JsonParser();
  assertEquals(parser.parse(expected.string()),parser.parse(actual.string()));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRoundTrip() throws Exception {
  ElasticSearchLogStashEventSerializer fixture=new ElasticSearchLogStashEventSerializer();
  Context context=new Context();
  fixture.configure(context);
  String message="test body";
  Map<String,String> headers=Maps.newHashMap();
  long timestamp=System.currentTimeMillis();
  headers.put("timestamp",String.valueOf(timestamp));
  headers.put("source","flume_tail_src");
  headers.put("host","test@localhost");
  headers.put("src_path","/tmp/test");
  headers.put("headerNameOne","headerValueOne");
  headers.put("headerNameTwo","headerValueTwo");
  headers.put("type","sometype");
  Event event=EventBuilder.withBody(message.getBytes(charset));
  event.setHeaders(headers);
  XContentBuilder expected=jsonBuilder().startObject();
  expected.field("@message",new String(message.getBytes(),charset));
  expected.field("@timestamp",new Date(timestamp));
  expected.field("@source","flume_tail_src");
  expected.field("@type","sometype");
  expected.field("@source_host","test@localhost");
  expected.field("@source_path","/tmp/test");
  expected.startObject("@fields");
  expected.field("timestamp",String.valueOf(timestamp));
  expected.field("src_path","/tmp/test");
  expected.field("host","test@localhost");
  expected.field("headerNameTwo","headerValueTwo");
  expected.field("source","flume_tail_src");
  expected.field("headerNameOne","headerValueOne");
  expected.field("type","sometype");
  expected.endObject();
  expected.endObject();
  XContentBuilder actual=fixture.getContentBuilder(event);
  JsonParser parser=new JsonParser();
  assertEquals(parser.parse(expected.string()),parser.parse(actual.string()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TestElasticSearchSink </h4><pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseSpecifiedIndexNameBuilder() throws Exception {
  Context context=new Context();
  context.put(ElasticSearchSinkConstants.INDEX_NAME_BUILDER,"org.apache.flume.sink.elasticsearch.FakeIndexNameBuilder");
  assertNull(fixture.getIndexNameBuilder());
  fixture.configure(context);
  assertTrue(fixture.getIndexNameBuilder() instanceof FakeIndexNameBuilder);
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldParseConfigurationUsingDefaults(){
  parameters.put(HOSTNAMES,"10.5.5.27");
  parameters.remove(INDEX_NAME);
  parameters.remove(INDEX_TYPE);
  parameters.remove(CLUSTER_NAME);
  fixture=new ElasticSearchSink();
  fixture.configure(new Context(parameters));
  String[] expected={"10.5.5.27"};
  assertEquals(DEFAULT_INDEX_NAME,fixture.getIndexName());
  assertEquals(DEFAULT_INDEX_TYPE,fixture.getIndexType());
  assertEquals(DEFAULT_CLUSTER_NAME,fixture.getClusterName());
  assertArrayEquals(expected,fixture.getServerAddresses());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseSpecifiedSerializer() throws Exception {
  Context context=new Context();
  context.put(SERIALIZER,"org.apache.flume.sink.elasticsearch.FakeEventSerializer");
  assertNull(fixture.getEventSerializer());
  fixture.configure(context);
  assertTrue(fixture.getEventSerializer() instanceof FakeEventSerializer);
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldParseMultipleHostAndPortsWithWhitespaces(){
  parameters.put(HOSTNAMES," 10.5.5.27 : 9300 , 10.5.5.28 : 9301 , 10.5.5.29 : 9302 ");
  fixture=new ElasticSearchSink();
  fixture.configure(new Context(parameters));
  String[] expected={"10.5.5.27:9300","10.5.5.28:9301","10.5.5.29:9302"};
  assertArrayEquals(expected,fixture.getServerAddresses());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldParseMultipleHostUsingDefaultPorts(){
  parameters.put(HOSTNAMES,"10.5.5.27,10.5.5.28,10.5.5.29");
  fixture=new ElasticSearchSink();
  fixture.configure(new Context(parameters));
  String[] expected={"10.5.5.27","10.5.5.28","10.5.5.29"};
  assertArrayEquals(expected,fixture.getServerAddresses());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldAllowCustomElasticSearchIndexRequestBuilderFactory() throws Exception {
  parameters.put(SERIALIZER,CustomElasticSearchIndexRequestBuilderFactory.class.getName());
  fixture.configure(new Context(parameters));
  Channel channel=bindAndStartChannel(fixture);
  Transaction tx=channel.getTransaction();
  tx.begin();
  String body="{ foo: \"bar\" }";
  Event event=EventBuilder.withBody(body.getBytes());
  channel.put(event);
  tx.commit();
  tx.close();
  fixture.process();
  fixture.stop();
  assertEquals(fixture.getIndexName() + "-05_17_36_789",CustomElasticSearchIndexRequestBuilderFactory.actualIndexName);
  assertEquals(fixture.getIndexType(),CustomElasticSearchIndexRequestBuilderFactory.actualIndexType);
  assertArrayEquals(event.getBody(),CustomElasticSearchIndexRequestBuilderFactory.actualEventBody);
  assertTrue(CustomElasticSearchIndexRequestBuilderFactory.hasContext);
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldParseMultipleHostWithWhitespacesUsingDefaultPorts(){
  parameters.put(HOSTNAMES," 10.5.5.27 , 10.5.5.28 , 10.5.5.29 ");
  fixture=new ElasticSearchSink();
  fixture.configure(new Context(parameters));
  String[] expected={"10.5.5.27","10.5.5.28","10.5.5.29"};
  assertArrayEquals(expected,fixture.getServerAddresses());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldParseMultipleHostAndPorts(){
  parameters.put(HOSTNAMES,"10.5.5.27:9300,10.5.5.28:9301,10.5.5.29:9302");
  fixture=new ElasticSearchSink();
  fixture.configure(new Context(parameters));
  String[] expected={"10.5.5.27:9300","10.5.5.28:9301","10.5.5.29:9302"};
  assertArrayEquals(expected,fixture.getServerAddresses());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldParseConfiguration(){
  parameters.put(HOSTNAMES,"10.5.5.27");
  parameters.put(CLUSTER_NAME,"testing-cluster-name");
  parameters.put(INDEX_NAME,"testing-index-name");
  parameters.put(INDEX_TYPE,"testing-index-type");
  parameters.put(TTL,"10");
  fixture=new ElasticSearchSink();
  fixture.configure(new Context(parameters));
  String[] expected={"10.5.5.27"};
  assertEquals("testing-cluster-name",fixture.getClusterName());
  assertEquals("testing-index-name",fixture.getIndexName());
  assertEquals("testing-index-type",fixture.getIndexType());
  assertEquals(TimeUnit.DAYS.toMillis(10),fixture.getTTLMs());
  assertArrayEquals(expected,fixture.getServerAddresses());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldParseFullyQualifiedTTLs(){
  Map<String,Long> testTTLMap=new HashMap<String,Long>();
  testTTLMap.put("1ms",Long.valueOf(1));
  testTTLMap.put("1s",Long.valueOf(1000));
  testTTLMap.put("1m",Long.valueOf(60000));
  testTTLMap.put("1h",Long.valueOf(3600000));
  testTTLMap.put("1d",Long.valueOf(86400000));
  testTTLMap.put("1w",Long.valueOf(604800000));
  testTTLMap.put("1",Long.valueOf(86400000));
  parameters.put(HOSTNAMES,"10.5.5.27");
  parameters.put(CLUSTER_NAME,"testing-cluster-name");
  parameters.put(INDEX_NAME,"testing-index-name");
  parameters.put(INDEX_TYPE,"testing-index-type");
  for (  String ttl : testTTLMap.keySet()) {
    parameters.put(TTL,ttl);
    fixture=new ElasticSearchSink();
    fixture.configure(new Context(parameters));
    String[] expected={"10.5.5.27"};
    assertEquals("testing-cluster-name",fixture.getClusterName());
    assertEquals("testing-index-name",fixture.getIndexName());
    assertEquals("testing-index-type",fixture.getIndexType());
    assertEquals((long)testTTLMap.get(ttl),fixture.getTTLMs());
    assertArrayEquals(expected,fixture.getServerAddresses());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TimeBasedIndexNameBuilderTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void indexNameShouldBePrefixDashFormattedTimestamp(){
  long time=987654321L;
  Event event=new SimpleEvent();
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("timestamp",Long.toString(time));
  event.setHeaders(headers);
  assertEquals("prefix-" + indexNameBuilder.getFastDateFormat().format(time),indexNameBuilder.getIndexName(event));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TimestampedEventTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldEnsureTimestampHeaderPresentInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals(FIXED_TIME_MILLIS,timestampedEvent.getTimestamp());
  assertEquals(String.valueOf(FIXED_TIME_MILLIS),timestampedEvent.getHeaders().get("timestamp"));
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseExistingAtTimestampHeaderInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  Map<String,String> headersWithTimestamp=Maps.newHashMap();
  headersWithTimestamp.put("@timestamp","-999");
  base.setHeaders(headersWithTimestamp);
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals(-999L,timestampedEvent.getTimestamp());
  assertEquals("-999",timestampedEvent.getHeaders().get("@timestamp"));
  assertNull(timestampedEvent.getHeaders().get("timestamp"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldPreserveBodyAndNonTimestampHeadersInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  base.setBody(new byte[]{1,2,3,4});
  Map<String,String> headersWithTimestamp=Maps.newHashMap();
  headersWithTimestamp.put("foo","bar");
  base.setHeaders(headersWithTimestamp);
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals("bar",timestampedEvent.getHeaders().get("foo"));
  assertArrayEquals(base.getBody(),timestampedEvent.getBody());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldUseExistingTimestampHeaderInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  Map<String,String> headersWithTimestamp=Maps.newHashMap();
  headersWithTimestamp.put("timestamp","-321");
  base.setHeaders(headersWithTimestamp);
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals(-321L,timestampedEvent.getTimestamp());
  assertEquals("-321",timestampedEvent.getHeaders().get("timestamp"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.client.RoundRobinListTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldReturnNextElement(){
  assertEquals("test1",fixture.get());
  assertEquals("test2",fixture.get());
  assertEquals("test1",fixture.get());
  assertEquals("test2",fixture.get());
  assertEquals("test1",fixture.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.client.TestElasticSearchClientFactory </h4><pre class="type-1 type-20 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void shouldReturnTransportClient() throws Exception {
  String[] hostNames={"127.0.0.1"};
  Object o=factory.getClient(ElasticSearchClientFactory.TransportClient,hostNames,"test",serializer,null);
  assertThat(o,instanceOf(ElasticSearchTransportClient.class));
}

</code></pre>

<br>
<pre class="type-1 type-20 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void shouldReturnRestClient() throws NoSuchClientTypeException {
  String[] hostNames={"127.0.0.1"};
  Object o=factory.getClient(ElasticSearchClientFactory.RestClient,hostNames,"test",serializer,null);
  assertThat(o,instanceOf(ElasticSearchRestClient.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.client.TestElasticSearchRestClient </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test() public void shouldRetryBulkOperation() throws Exception {
  ArgumentCaptor<HttpPost> argument=ArgumentCaptor.forClass(HttpPost.class);
  when(httpStatus.getStatusCode()).thenReturn(HttpStatus.SC_INTERNAL_SERVER_ERROR,HttpStatus.SC_OK);
  when(httpResponse.getStatusLine()).thenReturn(httpStatus);
  when(httpClient.execute(any(HttpUriRequest.class))).thenReturn(httpResponse);
  fixture.addEvent(event,nameBuilder,"bar_type",123);
  fixture.execute();
  verify(httpClient,times(2)).execute(isA(HttpUriRequest.class));
  verify(httpClient,times(2)).execute(argument.capture());
  List<HttpPost> allValues=argument.getAllValues();
  assertEquals("http://host1/_bulk",allValues.get(0).getURI().toString());
  assertEquals("http://host2/_bulk",allValues.get(1).getURI().toString());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldAddNewEventWithTTL() throws Exception {
  ArgumentCaptor<HttpPost> argument=ArgumentCaptor.forClass(HttpPost.class);
  when(httpStatus.getStatusCode()).thenReturn(HttpStatus.SC_OK);
  when(httpResponse.getStatusLine()).thenReturn(httpStatus);
  when(httpClient.execute(any(HttpUriRequest.class))).thenReturn(httpResponse);
  fixture.addEvent(event,nameBuilder,"bar_type",123);
  fixture.execute();
  verify(httpClient).execute(isA(HttpUriRequest.class));
  verify(httpClient).execute(argument.capture());
  assertEquals("http://host1/_bulk",argument.getValue().getURI().toString());
  assertTrue(verifyJsonEvents("{\"index\":{\"_type\":\"bar_type\",\"_index\":\"foo_index\",\"_ttl\":\"123\"}}\n",MESSAGE_CONTENT,EntityUtils.toString(argument.getValue().getEntity())));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldAddNewEventWithoutTTL() throws Exception {
  ArgumentCaptor<HttpPost> argument=ArgumentCaptor.forClass(HttpPost.class);
  when(httpStatus.getStatusCode()).thenReturn(HttpStatus.SC_OK);
  when(httpResponse.getStatusLine()).thenReturn(httpStatus);
  when(httpClient.execute(any(HttpUriRequest.class))).thenReturn(httpResponse);
  fixture.addEvent(event,nameBuilder,"bar_type",-1);
  fixture.execute();
  verify(httpClient).execute(isA(HttpUriRequest.class));
  verify(httpClient).execute(argument.capture());
  assertEquals("http://host1/_bulk",argument.getValue().getURI().toString());
  assertTrue(verifyJsonEvents("{\"index\":{\"_type\":\"bar_type\", \"_index\":\"foo_index\"}}\n",MESSAGE_CONTENT,EntityUtils.toString(argument.getValue().getEntity())));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hbase.TestAsyncHBaseSink </h4><pre class="type-9 type-10 type-1 type-3 type-8 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * This test must run last - it shuts down the minicluster :D
 * @throws Exception
 */
@Ignore("For dev builds only:" + "This test takes too long, and this has to be run after all other" + "tests, since it shuts down the minicluster. "+ "Comment out all other tests"+ "and uncomment this annotation to run this test.") @Test(expected=EventDeliveryException.class) public void testHBaseFailure() throws Exception {
  ctx.put("batchSize","2");
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=false;
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,ctx);
  ctx.put("batchSize","100");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  sink.process();
  Assert.assertFalse(sink.isConfNull());
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,2);
  byte[] out;
  int found=0;
  for (int i=0; i < 2; i++) {
    for (int j=0; j < 2; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(2,found);
  out=results[2];
  Assert.assertArrayEquals(Longs.toByteArray(2),out);
  testUtility.shutdownMiniCluster();
  sink.process();
  sink.stop();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneEventWithDefaults() throws Exception {
  Map<String,String> ctxMap=new HashMap<String,String>();
  ctxMap.put("table",tableName);
  ctxMap.put("columnFamily",columnFamily);
  ctxMap.put("serializer","org.apache.flume.sink.hbase.SimpleAsyncHbaseEventSerializer");
  ctxMap.put("keep-alive","0");
  ctxMap.put("timeout","10000");
  Context tmpctx=new Context();
  tmpctx.putAll(ctxMap);
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,tmpctx);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,tmpctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=EventBuilder.withBody(Bytes.toBytes(valBase));
  channel.put(e);
  tx.commit();
  tx.close();
  Assert.assertFalse(sink.isConfNull());
  sink.process();
  sink.stop();
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,1);
  byte[] out=results[0];
  Assert.assertArrayEquals(e.getBody(),out);
  out=results[1];
  Assert.assertArrayEquals(Longs.toByteArray(1),out);
}

</code></pre>

<br>
<pre class="type-11 type-10 type-1 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=EventDeliveryException.class) public void testTimeOut() throws Exception {
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration(),true,false);
  Configurables.configure(sink,ctx);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  channel.start();
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  Assert.assertFalse(sink.isConfNull());
  sink.process();
  Assert.fail();
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFDLeakOnShutdown() throws Exception {
  if (getOpenFileDescriptorCount() < 0) {
    return;
  }
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration(),true,false);
  ctx.put("maxConsecutiveFails","1");
  Configurables.configure(sink,ctx);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  channel.start();
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  Assert.assertFalse(sink.isConfNull());
  long initialFDCount=getOpenFileDescriptorCount();
  for (int i=0; i < 10; i++) {
    try {
      sink.process();
    }
 catch (    EventDeliveryException ex) {
    }
  }
  long increaseInFD=getOpenFileDescriptorCount() - initialFDCount;
  Assert.assertTrue("File Descriptor leak detected. FDs have increased by " + increaseInFD + " from an initial FD count of "+ initialFDCount,increaseInFD < 50);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThreeEvents() throws Exception {
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,ctx);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  Assert.assertFalse(sink.isConfNull());
  sink.process();
  sink.stop();
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,3);
  byte[] out;
  int found=0;
  for (int i=0; i < 3; i++) {
    for (int j=0; j < 3; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(3,found);
  out=results[3];
  Assert.assertArrayEquals(Longs.toByteArray(3),out);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleBatches() throws Exception {
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  ctx.put("batchSize","2");
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,ctx);
  ctx.put("batchSize","100");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  int count=0;
  Status status=Status.READY;
  while (status != Status.BACKOFF) {
    count++;
    status=sink.process();
  }
  Assert.assertFalse(sink.isConfNull());
  sink.stop();
  Assert.assertEquals(2,count);
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,3);
  byte[] out;
  int found=0;
  for (int i=0; i < 3; i++) {
    for (int j=0; j < 3; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(3,found);
  out=results[3];
  Assert.assertArrayEquals(Longs.toByteArray(3),out);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneEvent() throws Exception {
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,ctx);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=EventBuilder.withBody(Bytes.toBytes(valBase));
  channel.put(e);
  tx.commit();
  tx.close();
  Assert.assertFalse(sink.isConfNull());
  sink.process();
  sink.stop();
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,1);
  byte[] out=results[0];
  Assert.assertArrayEquals(e.getBody(),out);
  out=results[1];
  Assert.assertArrayEquals(Longs.toByteArray(1),out);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=FlumeException.class) public void testMissingTable() throws Exception {
  deleteTable=false;
  ctx.put("batchSize","2");
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,ctx);
  ctx.put("batchSize","100");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  sink.process();
  Assert.assertFalse(sink.isConfNull());
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,2);
  byte[] out;
  int found=0;
  for (int i=0; i < 2; i++) {
    for (int j=0; j < 2; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(2,found);
  out=results[2];
  Assert.assertArrayEquals(Longs.toByteArray(2),out);
  sink.process();
  sink.stop();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithoutConfigurationObject() throws Exception {
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  ctx.put("batchSize","2");
  ctx.put(HBaseSinkConfigurationConstants.ZK_QUORUM,ZKConfig.getZKQuorumServersString(testUtility.getConfiguration()));
  ctx.put(HBaseSinkConfigurationConstants.ZK_ZNODE_PARENT,testUtility.getConfiguration().get(HConstants.ZOOKEEPER_ZNODE_PARENT));
  AsyncHBaseSink sink=new AsyncHBaseSink();
  Configurables.configure(sink,ctx);
  ctx.put(HBaseSinkConfigurationConstants.ZK_QUORUM,null);
  ctx.put(HBaseSinkConfigurationConstants.ZK_ZNODE_PARENT,null);
  ctx.put("batchSize","100");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  int count=0;
  Status status=Status.READY;
  while (status != Status.BACKOFF) {
    count++;
    status=sink.process();
  }
  Assert.assertTrue(sink.isConfNull());
  sink.stop();
  Assert.assertEquals(2,count);
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,3);
  byte[] out;
  int found=0;
  for (int i=0; i < 3; i++) {
    for (int j=0; j < 3; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(3,found);
  out=results[3];
  Assert.assertArrayEquals(Longs.toByteArray(3),out);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hbase.TestHBaseSink </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testZKQuorum() throws Exception {
  initContextForSimpleHbaseEventSerializer();
  Context tmpContext=new Context(ctx.getParameters());
  String zkQuorum="zk1.flume.apache.org:3342, zk2.flume.apache.org:3342, " + "zk3.flume.apache.org:3342";
  tmpContext.put("batchSize","2");
  tmpContext.put(HBaseSinkConfigurationConstants.ZK_QUORUM,zkQuorum);
  tmpContext.put(HBaseSinkConfigurationConstants.ZK_ZNODE_PARENT,conf.get(HConstants.ZOOKEEPER_ZNODE_PARENT,HConstants.DEFAULT_ZOOKEEPER_ZNODE_PARENT));
  HBaseSink sink=new HBaseSink();
  Configurables.configure(sink,tmpContext);
  Assert.assertEquals("zk1.flume.apache.org,zk2.flume.apache.org," + "zk3.flume.apache.org",sink.getConfig().get(HConstants.ZOOKEEPER_QUORUM));
  Assert.assertEquals(String.valueOf(3342),sink.getConfig().get(HConstants.ZOOKEEPER_CLIENT_PORT));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWithoutConfigurationObject() throws Exception {
  initContextForSimpleHbaseEventSerializer();
  Context tmpContext=new Context(ctx.getParameters());
  tmpContext.put("batchSize","2");
  tmpContext.put(HBaseSinkConfigurationConstants.ZK_QUORUM,ZKConfig.getZKQuorumServersString(conf));
  System.out.print(ctx.getString(HBaseSinkConfigurationConstants.ZK_QUORUM));
  tmpContext.put(HBaseSinkConfigurationConstants.ZK_ZNODE_PARENT,conf.get(HConstants.ZOOKEEPER_ZNODE_PARENT,HConstants.DEFAULT_ZOOKEEPER_ZNODE_PARENT));
  HBaseSink sink=new HBaseSink();
  Configurables.configure(sink,tmpContext);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  Status status=Status.READY;
  while (status != Status.BACKOFF) {
    status=sink.process();
  }
  sink.stop();
  HTable table=new HTable(conf,tableName);
  byte[][] results=getResults(table,3);
  byte[] out;
  int found=0;
  for (int i=0; i < 3; i++) {
    for (int j=0; j < 3; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(3,found);
  out=results[3];
  Assert.assertArrayEquals(Longs.toByteArray(3),out);
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBatchAware() throws EventDeliveryException {
  logger.info("Running testBatchAware()");
  initContextForIncrementHBaseSerializer();
  HBaseSink sink=new HBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,ctx);
  Channel channel=createAndConfigureMemoryChannel(sink);
  sink.start();
  int batchCount=3;
  for (int i=0; i < batchCount; i++) {
    sink.process();
  }
  sink.stop();
  Assert.assertEquals(batchCount,((IncrementHBaseSerializer)sink.getSerializer()).getNumBatchesStarted());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hbase.TestRegexHbaseEventSerializer </h4><pre class="type-9 type-10 type-1 type-3 type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testApacheRegex() throws Exception {
  RegexHbaseEventSerializer s=new RegexHbaseEventSerializer();
  Context context=new Context();
  context.put(RegexHbaseEventSerializer.REGEX_CONFIG,"([^ ]*) ([^ ]*) ([^ ]*) (-|\\[[^\\]]*\\]) \"([^ ]+) ([^ ]+)" + " ([^\"]+)\" (-|[0-9]*) (-|[0-9]*)(?: ([^ \"]*|\"[^\"]*\")" + " ([^ \"]*|\"[^\"]*\"))?");
  context.put(RegexHbaseEventSerializer.COL_NAME_CONFIG,"host,identity,user,time,method,request,protocol,status,size," + "referer,agent");
  s.configure(context);
  String logMsg="33.22.11.00 - - [20/May/2011:07:01:19 +0000] " + "\"GET /wp-admin/css/install.css HTTP/1.0\" 200 813 " + "\"http://www.cloudera.com/wp-admin/install.php\" \"Mozilla/5.0 (comp"+ "atible; Yahoo! Slurp; http://help.yahoo.com/help/us/ysearch/slurp)\"";
  Event e=EventBuilder.withBody(Bytes.toBytes(logMsg));
  s.initialize(e,"CF".getBytes());
  List<Row> actions=s.getActions();
  assertEquals(1,s.getActions().size());
  assertTrue(actions.get(0) instanceof Put);
  Put put=(Put)actions.get(0);
  assertTrue(put.getFamilyMap().containsKey(s.cf));
  List<KeyValue> kvPairs=put.getFamilyMap().get(s.cf);
  assertTrue(kvPairs.size() == 11);
  Map<String,String> resultMap=Maps.newHashMap();
  for (  KeyValue kv : kvPairs) {
    resultMap.put(new String(kv.getQualifier()),new String(kv.getValue()));
  }
  assertEquals("33.22.11.00",resultMap.get("host"));
  assertEquals("-",resultMap.get("identity"));
  assertEquals("-",resultMap.get("user"));
  assertEquals("[20/May/2011:07:01:19 +0000]",resultMap.get("time"));
  assertEquals("GET",resultMap.get("method"));
  assertEquals("/wp-admin/css/install.css",resultMap.get("request"));
  assertEquals("HTTP/1.0",resultMap.get("protocol"));
  assertEquals("200",resultMap.get("status"));
  assertEquals("813",resultMap.get("size"));
  assertEquals("\"http://www.cloudera.com/wp-admin/install.php\"",resultMap.get("referer"));
  assertEquals("\"Mozilla/5.0 (compatible; Yahoo! Slurp; " + "http://help.yahoo.com/help/us/ysearch/slurp)\"",resultMap.get("agent"));
  List<Increment> increments=s.getIncrements();
  assertEquals(0,increments.size());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRowIndexKey() throws Exception {
  RegexHbaseEventSerializer s=new RegexHbaseEventSerializer();
  Context context=new Context();
  context.put(RegexHbaseEventSerializer.REGEX_CONFIG,"^([^\t]+)\t([^\t]+)\t" + "([^\t]+)$");
  context.put(RegexHbaseEventSerializer.COL_NAME_CONFIG,"col1,col2,ROW_KEY");
  context.put("rowKeyIndex","2");
  s.configure(context);
  String body="val1\tval2\trow1";
  Event e=EventBuilder.withBody(Bytes.toBytes(body));
  s.initialize(e,"CF".getBytes());
  List<Row> actions=s.getActions();
  Put put=(Put)actions.get(0);
  List<KeyValue> kvPairs=put.getFamilyMap().get(s.cf);
  assertTrue(kvPairs.size() == 2);
  Map<String,String> resultMap=Maps.newHashMap();
  for (  KeyValue kv : kvPairs) {
    resultMap.put(new String(kv.getQualifier()),new String(kv.getValue()));
  }
  assertEquals("val1",resultMap.get("col1"));
  assertEquals("val2",resultMap.get("col2"));
  assertEquals("row1",Bytes.toString(put.getRow()));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRowKeyGeneration(){
  Context context=new Context();
  RegexHbaseEventSerializer s1=new RegexHbaseEventSerializer();
  s1.configure(context);
  RegexHbaseEventSerializer s2=new RegexHbaseEventSerializer();
  s2.configure(context);
  RegexHbaseEventSerializer.nonce.set(0);
  String randomString=RegexHbaseEventSerializer.randomKey;
  Event e1=EventBuilder.withBody(Bytes.toBytes("body"));
  Event e2=EventBuilder.withBody(Bytes.toBytes("body"));
  Event e3=EventBuilder.withBody(Bytes.toBytes("body"));
  Calendar cal=mock(Calendar.class);
  when(cal.getTimeInMillis()).thenReturn(1L);
  s1.initialize(e1,"CF".getBytes());
  String rk1=new String(s1.getRowKey(cal));
  assertEquals("1-" + randomString + "-0",rk1);
  when(cal.getTimeInMillis()).thenReturn(10L);
  s1.initialize(e2,"CF".getBytes());
  String rk2=new String(s1.getRowKey(cal));
  assertEquals("10-" + randomString + "-1",rk2);
  when(cal.getTimeInMillis()).thenReturn(100L);
  s2.initialize(e3,"CF".getBytes());
  String rk3=new String(s2.getRowKey(cal));
  assertEquals("100-" + randomString + "-2",rk3);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDepositHeaders() throws Exception {
  Charset charset=Charset.forName("KOI8-R");
  RegexHbaseEventSerializer s=new RegexHbaseEventSerializer();
  Context context=new Context();
  context.put(RegexHbaseEventSerializer.DEPOSIT_HEADERS_CONFIG,"true");
  context.put(RegexHbaseEventSerializer.CHARSET_CONFIG,charset.toString());
  s.configure(context);
  String body="body";
  Map<String,String> headers=Maps.newHashMap();
  headers.put("header1","value1");
  headers.put("заголовок2","значение2");
  Event e=EventBuilder.withBody(Bytes.toBytes(body),headers);
  s.initialize(e,"CF".getBytes());
  List<Row> actions=s.getActions();
  assertEquals(1,s.getActions().size());
  assertTrue(actions.get(0) instanceof Put);
  Put put=(Put)actions.get(0);
  assertTrue(put.getFamilyMap().containsKey(s.cf));
  List<KeyValue> kvPairs=put.getFamilyMap().get(s.cf);
  assertTrue(kvPairs.size() == 3);
  Map<String,byte[]> resultMap=Maps.newHashMap();
  for (  KeyValue kv : kvPairs) {
    resultMap.put(new String(kv.getQualifier(),charset),kv.getValue());
  }
  assertEquals(body,new String(resultMap.get(RegexHbaseEventSerializer.COLUMN_NAME_DEFAULT),charset));
  assertEquals("value1",new String(resultMap.get("header1"),charset));
  assertArrayEquals("значение2".getBytes(charset),resultMap.get("заголовок2"));
  assertEquals("значение2".length(),resultMap.get("заголовок2").length);
  List<Increment> increments=s.getIncrements();
  assertEquals(0,increments.size());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultBehavior() throws Exception {
  RegexHbaseEventSerializer s=new RegexHbaseEventSerializer();
  Context context=new Context();
  s.configure(context);
  String logMsg="The sky is falling!";
  Event e=EventBuilder.withBody(Bytes.toBytes(logMsg));
  s.initialize(e,"CF".getBytes());
  List<Row> actions=s.getActions();
  assertTrue(actions.size() == 1);
  assertTrue(actions.get(0) instanceof Put);
  Put put=(Put)actions.get(0);
  assertTrue(put.getFamilyMap().containsKey(s.cf));
  List<KeyValue> kvPairs=put.getFamilyMap().get(s.cf);
  assertTrue(kvPairs.size() == 1);
  Map<String,String> resultMap=Maps.newHashMap();
  for (  KeyValue kv : kvPairs) {
    resultMap.put(new String(kv.getQualifier()),new String(kv.getValue()));
  }
  assertTrue(resultMap.containsKey(RegexHbaseEventSerializer.COLUMN_NAME_DEFAULT));
  assertEquals("The sky is falling!",resultMap.get(RegexHbaseEventSerializer.COLUMN_NAME_DEFAULT));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hdfs.TestBucketWriter </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIntervalRoller() throws IOException, InterruptedException {
  final int ROLL_INTERVAL=1;
  final int NUM_EVENTS=10;
  final AtomicBoolean calledBack=new AtomicBoolean(false);
  MockHDFSWriter hdfsWriter=new MockHDFSWriter();
  BucketWriter bucketWriter=new BucketWriter(ROLL_INTERVAL,0,0,0,ctx,"/tmp","file","",".tmp",null,null,SequenceFile.CompressionType.NONE,hdfsWriter,timedRollerPool,proxy,new SinkCounter("test-bucket-writer-" + System.currentTimeMillis()),0,new HDFSEventSink.WriterCallback(){
    @Override public void run(    String filePath){
      calledBack.set(true);
    }
  }
,null,30000,Executors.newSingleThreadExecutor(),0,0);
  Event e=EventBuilder.withBody("foo",Charsets.UTF_8);
  long startNanos=System.nanoTime();
  for (int i=0; i < NUM_EVENTS - 1; i++) {
    bucketWriter.append(e);
  }
  Thread.sleep(2 * ROLL_INTERVAL * 1000L);
  Assert.assertTrue(bucketWriter.closed);
  Assert.assertTrue(calledBack.get());
  bucketWriter=new BucketWriter(ROLL_INTERVAL,0,0,0,ctx,"/tmp","file","",".tmp",null,null,SequenceFile.CompressionType.NONE,hdfsWriter,timedRollerPool,proxy,new SinkCounter("test-bucket-writer-" + System.currentTimeMillis()),0,null,null,30000,Executors.newSingleThreadExecutor(),0,0);
  bucketWriter.append(e);
  long elapsedMillis=TimeUnit.MILLISECONDS.convert(System.nanoTime() - startNanos,TimeUnit.NANOSECONDS);
  long elapsedSeconds=elapsedMillis / 1000L;
  logger.info("Time elapsed: {} milliseconds",elapsedMillis);
  logger.info("Number of events written: {}",hdfsWriter.getEventsWritten());
  logger.info("Number of bytes written: {}",hdfsWriter.getBytesWritten());
  logger.info("Number of files opened: {}",hdfsWriter.getFilesOpened());
  logger.info("Number of files closed: {}",hdfsWriter.getFilesClosed());
  Assert.assertEquals("events written",NUM_EVENTS,hdfsWriter.getEventsWritten());
  Assert.assertEquals("bytes written",e.getBody().length * NUM_EVENTS,hdfsWriter.getBytesWritten());
  Assert.assertEquals("files opened",2,hdfsWriter.getFilesOpened());
  Assert.assertEquals("files closed",1,hdfsWriter.getFilesClosed());
  logger.info("Waiting for roll...");
  Thread.sleep(2 * ROLL_INTERVAL * 1000L);
  logger.info("Number of files closed: {}",hdfsWriter.getFilesClosed());
  Assert.assertEquals("files closed",2,hdfsWriter.getFilesClosed());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSizeRoller() throws IOException, InterruptedException {
  int maxBytes=300;
  MockHDFSWriter hdfsWriter=new MockHDFSWriter();
  BucketWriter bucketWriter=new BucketWriter(0,maxBytes,0,0,ctx,"/tmp","file","",".tmp",null,null,SequenceFile.CompressionType.NONE,hdfsWriter,timedRollerPool,proxy,new SinkCounter("test-bucket-writer-" + System.currentTimeMillis()),0,null,null,30000,Executors.newSingleThreadExecutor(),0,0);
  Event e=EventBuilder.withBody("foo",Charsets.UTF_8);
  for (int i=0; i < 1000; i++) {
    bucketWriter.append(e);
  }
  logger.info("Number of events written: {}",hdfsWriter.getEventsWritten());
  logger.info("Number of bytes written: {}",hdfsWriter.getBytesWritten());
  logger.info("Number of files opened: {}",hdfsWriter.getFilesOpened());
  Assert.assertEquals("events written",1000,hdfsWriter.getEventsWritten());
  Assert.assertEquals("bytes written",3000,hdfsWriter.getBytesWritten());
  Assert.assertEquals("files opened",10,hdfsWriter.getFilesOpened());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEventCountingRoller() throws IOException, InterruptedException {
  int maxEvents=100;
  MockHDFSWriter hdfsWriter=new MockHDFSWriter();
  BucketWriter bucketWriter=new BucketWriter(0,0,maxEvents,0,ctx,"/tmp","file","",".tmp",null,null,SequenceFile.CompressionType.NONE,hdfsWriter,timedRollerPool,proxy,new SinkCounter("test-bucket-writer-" + System.currentTimeMillis()),0,null,null,30000,Executors.newSingleThreadExecutor(),0,0);
  Event e=EventBuilder.withBody("foo",Charsets.UTF_8);
  for (int i=0; i < 1000; i++) {
    bucketWriter.append(e);
  }
  logger.info("Number of events written: {}",hdfsWriter.getEventsWritten());
  logger.info("Number of bytes written: {}",hdfsWriter.getBytesWritten());
  logger.info("Number of files opened: {}",hdfsWriter.getFilesOpened());
  Assert.assertEquals("events written",1000,hdfsWriter.getEventsWritten());
  Assert.assertEquals("bytes written",3000,hdfsWriter.getBytesWritten());
  Assert.assertEquals("files opened",10,hdfsWriter.getFilesOpened());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hdfs.TestHDFSEventSink </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAvroAppend() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  LOG.debug("Starting...");
  final long rollCount=3;
  final long batchSize=2;
  final String fileName="FlumeData";
  String newPath=testPath + "/singleTextBucket";
  int totalEvents=0;
  int i=1, j=1;
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  Path dirPath=new Path(newPath);
  fs.delete(dirPath,true);
  fs.mkdirs(dirPath);
  Context context=new Context();
  context.put("hdfs.path",newPath);
  context.put("hdfs.filePrefix",fileName);
  context.put("hdfs.rollCount",String.valueOf(rollCount));
  context.put("hdfs.batchSize",String.valueOf(batchSize));
  context.put("hdfs.writeFormat","Text");
  context.put("hdfs.fileType","DataStream");
  context.put("serializer","AVRO_EVENT");
  Configurables.configure(sink,context);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.start();
  Calendar eventDate=Calendar.getInstance();
  List<String> bodies=Lists.newArrayList();
  for (i=1; i < 4; i++) {
    Transaction txn=channel.getTransaction();
    txn.begin();
    for (j=1; j <= batchSize; j++) {
      Event event=new SimpleEvent();
      eventDate.clear();
      eventDate.set(2011,i,i,i,0);
      event.getHeaders().put("timestamp",String.valueOf(eventDate.getTimeInMillis()));
      event.getHeaders().put("hostname","Host" + i);
      String body="Test." + i + "."+ j;
      event.setBody(body.getBytes());
      bodies.add(body);
      channel.put(event);
      totalEvents++;
    }
    txn.commit();
    txn.close();
    sink.process();
  }
  sink.stop();
  FileStatus[] dirStat=fs.listStatus(dirPath);
  Path fList[]=FileUtil.stat2Paths(dirStat);
  long expectedFiles=totalEvents / rollCount;
  if (totalEvents % rollCount > 0)   expectedFiles++;
  Assert.assertEquals("num files wrong, found: " + Lists.newArrayList(fList),expectedFiles,fList.length);
  verifyOutputAvroFiles(fs,conf,dirPath.toUri().getPath(),fileName,bodies);
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSlowAppendFailure() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  LOG.debug("Starting...");
  final String fileName="FlumeData";
  final long rollCount=5;
  final long batchSize=2;
  final int numBatches=2;
  String newPath=testPath + "/singleBucket";
  int i=1, j=1;
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  Path dirPath=new Path(newPath);
  fs.delete(dirPath,true);
  fs.mkdirs(dirPath);
  HDFSTestWriterFactory badWriterFactory=new HDFSTestWriterFactory();
  sink=new HDFSEventSink(badWriterFactory);
  Context context=new Context();
  context.put("hdfs.path",newPath);
  context.put("hdfs.filePrefix",fileName);
  context.put("hdfs.rollCount",String.valueOf(rollCount));
  context.put("hdfs.batchSize",String.valueOf(batchSize));
  context.put("hdfs.fileType",HDFSTestWriterFactory.TestSequenceFileType);
  context.put("hdfs.callTimeout",Long.toString(1000));
  Configurables.configure(sink,context);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.start();
  Calendar eventDate=Calendar.getInstance();
  for (i=0; i < numBatches; i++) {
    Transaction txn=channel.getTransaction();
    txn.begin();
    for (j=1; j <= batchSize; j++) {
      Event event=new SimpleEvent();
      eventDate.clear();
      eventDate.set(2011,i,i,i,0);
      event.getHeaders().put("timestamp",String.valueOf(eventDate.getTimeInMillis()));
      event.getHeaders().put("hostname","Host" + i);
      event.getHeaders().put("slow","1500");
      event.setBody(("Test." + i + "."+ j).getBytes());
      channel.put(event);
    }
    txn.commit();
    txn.close();
    Status satus=sink.process();
    Assert.assertEquals(satus,Status.BACKOFF);
  }
  sink.stop();
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyChannelResultsInStatusBackoff() throws InterruptedException, LifecycleException, EventDeliveryException {
  LOG.debug("Starting...");
  Context context=new Context();
  Channel channel=new MemoryChannel();
  context.put("hdfs.path",testPath);
  context.put("keep-alive","0");
  Configurables.configure(sink,context);
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.start();
  Assert.assertEquals(Status.BACKOFF,sink.process());
  sink.stop();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCloseOnIdle() throws IOException, EventDeliveryException, InterruptedException {
  String hdfsPath=testPath + "/idleClose";
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  Path dirPath=new Path(hdfsPath);
  fs.delete(dirPath,true);
  fs.mkdirs(dirPath);
  Context context=new Context();
  context.put("hdfs.path",hdfsPath);
  context.put("hdfs.rollCount","0");
  context.put("hdfs.rollSize","0");
  context.put("hdfs.rollInterval","0");
  context.put("hdfs.batchSize","2");
  context.put("hdfs.idleTimeout","1");
  Configurables.configure(sink,context);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.start();
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int i=0; i < 10; i++) {
    Event event=new SimpleEvent();
    event.setBody(("test event " + i).getBytes());
    channel.put(event);
  }
  txn.commit();
  txn.close();
  sink.process();
  sink.process();
  Thread.sleep(1001);
  sink.process();
  sink.process();
  Thread.sleep(500);
  sink.process();
  sink.process();
  sink.stop();
  FileStatus[] dirStat=fs.listStatus(dirPath);
  Path[] fList=FileUtil.stat2Paths(dirStat);
  Assert.assertEquals("Incorrect content of the directory " + StringUtils.join(fList,","),2,fList.length);
  Assert.assertTrue(!fList[0].getName().endsWith(".tmp") && !fList[1].getName().endsWith(".tmp"));
  fs.close();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTextAppend() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  LOG.debug("Starting...");
  final long rollCount=3;
  final long batchSize=2;
  final String fileName="FlumeData";
  String newPath=testPath + "/singleTextBucket";
  int totalEvents=0;
  int i=1, j=1;
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  Path dirPath=new Path(newPath);
  fs.delete(dirPath,true);
  fs.mkdirs(dirPath);
  Context context=new Context();
  context.put("hdfs.path",newPath);
  context.put("hdfs.filePrefix",fileName);
  context.put("hdfs.rollCount",String.valueOf(rollCount));
  context.put("hdfs.batchSize",String.valueOf(batchSize));
  context.put("hdfs.writeFormat","Text");
  context.put("hdfs.fileType","DataStream");
  Configurables.configure(sink,context);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.start();
  Calendar eventDate=Calendar.getInstance();
  List<String> bodies=Lists.newArrayList();
  for (i=1; i < 4; i++) {
    Transaction txn=channel.getTransaction();
    txn.begin();
    for (j=1; j <= batchSize; j++) {
      Event event=new SimpleEvent();
      eventDate.clear();
      eventDate.set(2011,i,i,i,0);
      event.getHeaders().put("timestamp",String.valueOf(eventDate.getTimeInMillis()));
      event.getHeaders().put("hostname","Host" + i);
      String body="Test." + i + "."+ j;
      event.setBody(body.getBytes());
      bodies.add(body);
      channel.put(event);
      totalEvents++;
    }
    txn.commit();
    txn.close();
    sink.process();
  }
  sink.stop();
  FileStatus[] dirStat=fs.listStatus(dirPath);
  Path fList[]=FileUtil.stat2Paths(dirStat);
  long expectedFiles=totalEvents / rollCount;
  if (totalEvents % rollCount > 0)   expectedFiles++;
  Assert.assertEquals("num files wrong, found: " + Lists.newArrayList(fList),expectedFiles,fList.length);
  verifyOutputTextFiles(fs,conf,dirPath.toUri().getPath(),fileName,bodies);
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleAppend() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  LOG.debug("Starting...");
  final String fileName="FlumeData";
  final long rollCount=5;
  final long batchSize=2;
  final int numBatches=4;
  String newPath=testPath + "/singleBucket";
  int totalEvents=0;
  int i=1, j=1;
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  Path dirPath=new Path(newPath);
  fs.delete(dirPath,true);
  fs.mkdirs(dirPath);
  Context context=new Context();
  context.put("hdfs.path",newPath);
  context.put("hdfs.filePrefix",fileName);
  context.put("hdfs.rollCount",String.valueOf(rollCount));
  context.put("hdfs.batchSize",String.valueOf(batchSize));
  Configurables.configure(sink,context);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.start();
  Calendar eventDate=Calendar.getInstance();
  List<String> bodies=Lists.newArrayList();
  for (i=1; i < numBatches; i++) {
    Transaction txn=channel.getTransaction();
    txn.begin();
    for (j=1; j <= batchSize; j++) {
      Event event=new SimpleEvent();
      eventDate.clear();
      eventDate.set(2011,i,i,i,0);
      event.getHeaders().put("timestamp",String.valueOf(eventDate.getTimeInMillis()));
      event.getHeaders().put("hostname","Host" + i);
      String body="Test." + i + "."+ j;
      event.setBody(body.getBytes());
      bodies.add(body);
      channel.put(event);
      totalEvents++;
    }
    txn.commit();
    txn.close();
    sink.process();
  }
  sink.stop();
  FileStatus[] dirStat=fs.listStatus(dirPath);
  Path fList[]=FileUtil.stat2Paths(dirStat);
  long expectedFiles=totalEvents / rollCount;
  if (totalEvents % rollCount > 0)   expectedFiles++;
  Assert.assertEquals("num files wrong, found: " + Lists.newArrayList(fList),expectedFiles,fList.length);
  verifyOutputSequenceFiles(fs,conf,dirPath.toUri().getPath(),fileName,bodies);
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleAppendLocalTime() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  final long currentTime=System.currentTimeMillis();
  Clock clk=new Clock(){
    @Override public long currentTimeMillis(){
      return currentTime;
    }
  }
;
  LOG.debug("Starting...");
  final String fileName="FlumeData";
  final long rollCount=5;
  final long batchSize=2;
  final int numBatches=4;
  String newPath=testPath + "/singleBucket/%s";
  String expectedPath=testPath + "/singleBucket/" + String.valueOf(currentTime / 1000);
  int totalEvents=0;
  int i=1, j=1;
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  Path dirPath=new Path(expectedPath);
  fs.delete(dirPath,true);
  fs.mkdirs(dirPath);
  Context context=new Context();
  context.put("hdfs.path",newPath);
  context.put("hdfs.filePrefix",fileName);
  context.put("hdfs.rollCount",String.valueOf(rollCount));
  context.put("hdfs.batchSize",String.valueOf(batchSize));
  context.put("hdfs.useLocalTimeStamp",String.valueOf(true));
  Configurables.configure(sink,context);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.setBucketClock(clk);
  sink.start();
  Calendar eventDate=Calendar.getInstance();
  List<String> bodies=Lists.newArrayList();
  for (i=1; i < numBatches; i++) {
    Transaction txn=channel.getTransaction();
    txn.begin();
    for (j=1; j <= batchSize; j++) {
      Event event=new SimpleEvent();
      eventDate.clear();
      eventDate.set(2011,i,i,i,0);
      event.getHeaders().put("timestamp",String.valueOf(eventDate.getTimeInMillis()));
      event.getHeaders().put("hostname","Host" + i);
      String body="Test." + i + "."+ j;
      event.setBody(body.getBytes());
      bodies.add(body);
      channel.put(event);
      totalEvents++;
    }
    txn.commit();
    txn.close();
    sink.process();
  }
  sink.stop();
  FileStatus[] dirStat=fs.listStatus(dirPath);
  Path fList[]=FileUtil.stat2Paths(dirStat);
  long expectedFiles=totalEvents / rollCount;
  if (totalEvents % rollCount > 0)   expectedFiles++;
  Assert.assertEquals("num files wrong, found: " + Lists.newArrayList(fList),expectedFiles,fList.length);
  verifyOutputSequenceFiles(fs,conf,dirPath.toUri().getPath(),fileName,bodies);
  sink.setBucketClock(new SystemClock());
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test that a close due to roll interval removes the bucketwriter from
 * sfWriters map.
 */
@Test public void testCloseRemovesFromSFWriters() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  LOG.debug("Starting...");
  final String fileName="FlumeData";
  final long batchSize=2;
  String newPath=testPath + "/singleBucket";
  int i=1, j=1;
  HDFSTestWriterFactory badWriterFactory=new HDFSTestWriterFactory();
  sink=new HDFSEventSink(badWriterFactory);
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  Path dirPath=new Path(newPath);
  fs.delete(dirPath,true);
  fs.mkdirs(dirPath);
  Context context=new Context();
  context.put("hdfs.path",newPath);
  context.put("hdfs.filePrefix",fileName);
  context.put("hdfs.rollCount",String.valueOf(0));
  context.put("hdfs.rollSize",String.valueOf(0));
  context.put("hdfs.rollInterval",String.valueOf(1));
  context.put("hdfs.batchSize",String.valueOf(batchSize));
  context.put("hdfs.fileType",HDFSTestWriterFactory.TestSequenceFileType);
  String expectedLookupPath=newPath + "/FlumeData";
  Configurables.configure(sink,context);
  MemoryChannel channel=new MemoryChannel();
  Configurables.configure(channel,new Context());
  sink.setChannel(channel);
  sink.start();
  Calendar eventDate=Calendar.getInstance();
  List<String> bodies=Lists.newArrayList();
  channel.getTransaction().begin();
  try {
    for (j=1; j <= 2 * batchSize; j++) {
      Event event=new SimpleEvent();
      eventDate.clear();
      eventDate.set(2011,i,i,i,0);
      event.getHeaders().put("timestamp",String.valueOf(eventDate.getTimeInMillis()));
      event.getHeaders().put("hostname","Host" + i);
      String body="Test." + i + "."+ j;
      event.setBody(body.getBytes());
      bodies.add(body);
      event.getHeaders().put("count-check","");
      channel.put(event);
    }
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  LOG.info("execute sink to process the events: " + sink.process());
  Assert.assertTrue(sink.getSfWriters().containsKey(expectedLookupPath));
  Thread.sleep(2001);
  Assert.assertFalse(sink.getSfWriters().containsKey(expectedLookupPath));
  LOG.info("execute sink to process the events: " + sink.process());
  Assert.assertTrue(sink.getSfWriters().containsKey(expectedLookupPath));
  sink.stop();
  LOG.info("Total number of bucket writers opened: {}",badWriterFactory.openCount.get());
  verifyOutputSequenceFiles(fs,conf,dirPath.toUri().getPath(),fileName,bodies);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hdfs.TestHDFSEventSinkOnMiniCluster </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This is a very basic test that writes one event to HDFS and reads it back.
 */
@Test public void simpleHDFSTest() throws EventDeliveryException, IOException {
  cluster=new MiniDFSCluster(new Configuration(),1,true,null);
  cluster.waitActive();
  String outputDir="/flume/simpleHDFSTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.DataStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  String EVENT_BODY="yarg!";
  channel.getTransaction().begin();
  try {
    channel.put(EventBuilder.withBody(EVENT_BODY,Charsets.UTF_8));
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  sink.process();
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  Assert.assertEquals("Only one file expected",1,statuses.length);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(stream));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertEquals(EVENT_BODY,line);
  }
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This is a very basic test that writes one event to HDFS and reads it back.
 */
@Test public void underReplicationTest() throws EventDeliveryException, IOException {
  Configuration conf=new Configuration();
  conf.set("dfs.replication",String.valueOf(3));
  cluster=new MiniDFSCluster(conf,3,true,null);
  cluster.waitActive();
  String outputDir="/flume/underReplicationTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.DataStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  channel.getTransaction().begin();
  try {
    channel.put(EventBuilder.withBody("yarg 1",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 2",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 3",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 4",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 5",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 5",Charsets.UTF_8));
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Same file.");
  sink.process();
  logger.info("Killing datanode #1...");
  cluster.stopDataNode(0);
  logger.info("Running process(). Create new file? (racy)");
  sink.process();
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Create new file.");
  sink.process();
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(stream));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertTrue(line.startsWith("yarg"));
  }
  Assert.assertTrue("4 or 5 files expected, found " + statuses.length,statuses.length == 4 || statuses.length == 5);
  System.out.println("There are " + statuses.length + " files.");
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Writes two events in GZIP-compressed serialize.
 */
@Test public void simpleHDFSGZipCompressedTest() throws EventDeliveryException, IOException {
  cluster=new MiniDFSCluster(new Configuration(),1,true,null);
  cluster.waitActive();
  String outputDir="/flume/simpleHDFSGZipCompressedTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.CompStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  sinkCtx.put("hdfs.codeC","gzip");
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  String EVENT_BODY_1="yarg1";
  String EVENT_BODY_2="yarg2";
  channel.getTransaction().begin();
  try {
    channel.put(EventBuilder.withBody(EVENT_BODY_1,Charsets.UTF_8));
    channel.put(EventBuilder.withBody(EVENT_BODY_2,Charsets.UTF_8));
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  sink.process();
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  Assert.assertEquals("Only one file expected",1,statuses.length);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(new GZIPInputStream(stream)));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertEquals(EVENT_BODY_1,line);
  }
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * This is a very basic test that writes one event to HDFS and reads it back.
 */
@Ignore("This test is flakey and causes tests to fail pretty often.") @Test public void maxUnderReplicationTest() throws EventDeliveryException, IOException {
  Configuration conf=new Configuration();
  conf.set("dfs.replication",String.valueOf(3));
  cluster=new MiniDFSCluster(conf,3,true,null);
  cluster.waitActive();
  String outputDir="/flume/underReplicationTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.DataStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  channel.getTransaction().begin();
  try {
    for (int i=0; i < 50; i++) {
      channel.put(EventBuilder.withBody("yarg " + i,Charsets.UTF_8));
    }
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Same file.");
  sink.process();
  logger.info("Killing datanode #1...");
  cluster.stopDataNode(0);
  logger.info("Running process(). Create new file? (racy)");
  sink.process();
  for (int i=3; i < 50; i++) {
    logger.info("Running process().");
    sink.process();
  }
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(stream));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertTrue(line.startsWith("yarg"));
  }
  System.out.println("There are " + statuses.length + " files.");
  Assert.assertEquals("31 files expected, found " + statuses.length,31,statuses.length);
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hive.TestHiveSink </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingleWriterUseHeaders() throws Exception {
  String[] colNames={COL1,COL2};
  String PART1_NAME="country";
  String PART2_NAME="hour";
  String[] partNames={PART1_NAME,PART2_NAME};
  List<String> partitionVals=null;
  String PART1_VALUE="%{" + PART1_NAME + "}";
  String PART2_VALUE="%y-%m-%d-%k";
  partitionVals=new ArrayList<String>(2);
  partitionVals.add(PART1_VALUE);
  partitionVals.add(PART2_VALUE);
  String tblName="hourlydata";
  TestUtil.dropDB(conf,dbName2);
  String dbLocation=dbFolder.newFolder(dbName2).getCanonicalPath() + ".db";
  dbLocation=dbLocation.replaceAll("\\\\","/");
  TestUtil.createDbAndTable(driver,dbName2,tblName,partitionVals,colNames,colTypes,partNames,dbLocation);
  int totalRecords=4;
  int batchSize=2;
  int batchCount=totalRecords / batchSize;
  Context context=new Context();
  context.put("hive.metastore",metaStoreURI);
  context.put("hive.database",dbName2);
  context.put("hive.table",tblName);
  context.put("hive.partition",PART1_VALUE + "," + PART2_VALUE);
  context.put("autoCreatePartitions","true");
  context.put("useLocalTimeStamp","false");
  context.put("batchSize","" + batchSize);
  context.put("serializer",HiveDelimitedTextSerializer.ALIAS);
  context.put("serializer.fieldnames",COL1 + ",," + COL2+ ",");
  context.put("heartBeatInterval","0");
  Channel channel=startSink(sink,context);
  Calendar eventDate=Calendar.getInstance();
  List<String> bodies=Lists.newArrayList();
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int j=1; j <= totalRecords; j++) {
    Event event=new SimpleEvent();
    String body=j + ",blah,This is a log message,other stuff";
    event.setBody(body.getBytes());
    eventDate.clear();
    eventDate.set(2014,03,03,j % batchCount,1);
    event.getHeaders().put("timestamp",String.valueOf(eventDate.getTimeInMillis()));
    event.getHeaders().put(PART1_NAME,"Asia");
    bodies.add(body);
    channel.put(event);
  }
  txn.commit();
  txn.close();
  checkRecordCountInTable(0,dbName2,tblName);
  for (int i=0; i < batchCount; i++) {
    sink.process();
  }
  checkRecordCountInTable(totalRecords,dbName2,tblName);
  sink.stop();
  SinkCounter counter=sink.getCounter();
  Assert.assertEquals(2,counter.getConnectionCreatedCount());
  Assert.assertEquals(2,counter.getConnectionClosedCount());
  Assert.assertEquals(2,counter.getBatchCompleteCount());
  Assert.assertEquals(0,counter.getBatchEmptyCount());
  Assert.assertEquals(0,counter.getConnectionFailedCount());
  Assert.assertEquals(4,counter.getEventDrainAttemptCount());
  Assert.assertEquals(4,counter.getEventDrainSuccessCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hive.TestHiveWriter </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTxnBatchConsumption() throws Exception {
  HiveEndPoint endPoint=new HiveEndPoint(metaStoreURI,dbName,tblName,partVals);
  SinkCounter sinkCounter=new SinkCounter(this.getClass().getName());
  int txnPerBatch=3;
  HiveWriter writer=new HiveWriter(endPoint,txnPerBatch,true,timeout,callTimeoutPool,"flumetest",serializer,sinkCounter);
  Assert.assertEquals(writer.getRemainingTxns(),2);
  writer.flush(true);
  Assert.assertEquals(writer.getRemainingTxns(),1);
  writer.flush(true);
  Assert.assertEquals(writer.getRemainingTxns(),0);
  writer.flush(true);
  Assert.assertEquals(writer.getRemainingTxns(),2);
  writer.flush(true);
  Assert.assertEquals(writer.getRemainingTxns(),1);
  writer.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.kafka.KafkaSinkUtilTest </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetKafkaProperties(){
  Context context=new Context();
  context.put("kafka.serializer.class","override.default.serializer");
  context.put("kafka.fake.property","kafka.property.value");
  context.put("kafka.metadata.broker.list","bad-broker-list");
  context.put("brokerList","real-broker-list");
  Properties kafkaProps=KafkaSinkUtil.getKafkaProperties(context);
  assertEquals(kafkaProps.getProperty(KafkaSinkConstants.KEY_SERIALIZER_KEY),KafkaSinkConstants.DEFAULT_KEY_SERIALIZER);
  assertEquals(kafkaProps.getProperty(KafkaSinkConstants.MESSAGE_SERIALIZER_KEY),"override.default.serializer");
  assertEquals(kafkaProps.getProperty("fake.property"),"kafka.property.value");
  assertEquals(kafkaProps.getProperty("metadata.broker.list"),"real-broker-list");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.kafka.TestKafkaSink </h4><pre class="type-13 type-11 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStaticTopic(){
  Context context=prepareDefaultContext();
  context.put(KafkaSinkConstants.TOPIC,TestConstants.STATIC_TOPIC);
  String msg="static-topic-test";
  try {
    Sink.Status status=prepareAndSend(context,msg);
    if (status == Sink.Status.BACKOFF) {
      fail("Error Occurred");
    }
  }
 catch (  EventDeliveryException ex) {
  }
  String fetchedMsg=new String((byte[])testUtil.getNextMessageFromConsumer(TestConstants.STATIC_TOPIC).message());
  assertEquals(msg,fetchedMsg);
}

</code></pre>

<br>
<pre class="type-13 type-11 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTopicAndKeyFromHeader() throws UnsupportedEncodingException {
  Sink kafkaSink=new KafkaSink();
  Context context=prepareDefaultContext();
  Configurables.configure(kafkaSink,context);
  Channel memoryChannel=new MemoryChannel();
  Configurables.configure(memoryChannel,context);
  kafkaSink.setChannel(memoryChannel);
  kafkaSink.start();
  String msg="test-topic-and-key-from-header";
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("topic",TestConstants.CUSTOM_TOPIC);
  headers.put("key",TestConstants.CUSTOM_KEY);
  Transaction tx=memoryChannel.getTransaction();
  tx.begin();
  Event event=EventBuilder.withBody(msg.getBytes(),headers);
  memoryChannel.put(event);
  tx.commit();
  tx.close();
  try {
    Sink.Status status=kafkaSink.process();
    if (status == Sink.Status.BACKOFF) {
      fail("Error Occurred");
    }
  }
 catch (  EventDeliveryException ex) {
  }
  MessageAndMetadata fetchedMsg=testUtil.getNextMessageFromConsumer(TestConstants.CUSTOM_TOPIC);
  assertEquals(msg,new String((byte[])fetchedMsg.message(),"UTF-8"));
  assertEquals(TestConstants.CUSTOM_KEY,new String((byte[])fetchedMsg.key(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-13 type-11 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultTopic(){
  Sink kafkaSink=new KafkaSink();
  Context context=prepareDefaultContext();
  Configurables.configure(kafkaSink,context);
  Channel memoryChannel=new MemoryChannel();
  Configurables.configure(memoryChannel,context);
  kafkaSink.setChannel(memoryChannel);
  kafkaSink.start();
  String msg="default-topic-test";
  Transaction tx=memoryChannel.getTransaction();
  tx.begin();
  Event event=EventBuilder.withBody(msg.getBytes());
  memoryChannel.put(event);
  tx.commit();
  tx.close();
  try {
    Sink.Status status=kafkaSink.process();
    if (status == Sink.Status.BACKOFF) {
      fail("Error Occurred");
    }
  }
 catch (  EventDeliveryException ex) {
  }
  String fetchedMsg=new String((byte[])testUtil.getNextMessageFromConsumer(KafkaSinkConstants.DEFAULT_TOPIC).message());
  assertEquals(msg,fetchedMsg);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.kite.TestDatasetSink </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testParquetDataset() throws EventDeliveryException {
  Datasets.delete(FILE_DATASET_URI);
  Dataset<GenericRecord> created=Datasets.create(FILE_DATASET_URI,new DatasetDescriptor.Builder(DESCRIPTOR).format("parquet").build());
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  assertThrows("Transaction should still be open",IllegalStateException.class,new Callable(){
    @Override public Object call() throws EventDeliveryException {
      in.getTransaction().begin();
      return null;
    }
  }
);
  Assert.assertEquals("Should not have committed",0,read(created).size());
  sink.stop();
  Assert.assertEquals(Sets.newHashSet(expected),read(created));
  Assert.assertEquals("Should have committed",0,remaining(in));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCloseWriter() throws EventDeliveryException {
  config.put(DatasetSinkConstants.CONFIG_FLUSHABLE_COMMIT_ON_BATCH,Boolean.toString(false));
  config.put(DatasetSinkConstants.CONFIG_SYNCABLE_SYNC_ON_BATCH,Boolean.toString(false));
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  sink.closeWriter();
  sink.commitTransaction();
  Assert.assertNull("Writer should be null",sink.getWriter());
  Assert.assertEquals("Should have committed",0,remaining(in));
  sink.stop();
  Assert.assertEquals(Sets.newHashSet(expected),read(Datasets.load(FILE_DATASET_URI)));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommitOnBatchFalse() throws EventDeliveryException {
  config.put(DatasetSinkConstants.CONFIG_FLUSHABLE_COMMIT_ON_BATCH,Boolean.toString(false));
  config.put(DatasetSinkConstants.CONFIG_SYNCABLE_SYNC_ON_BATCH,Boolean.toString(false));
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  assertThrows("Transaction should still be open",IllegalStateException.class,new Callable(){
    @Override public Object call() throws EventDeliveryException {
      in.getTransaction().begin();
      return null;
    }
  }
);
  Assert.assertEquals(0,read(Datasets.load(FILE_DATASET_URI)).size());
  sink.stop();
  Assert.assertEquals(Sets.newHashSet(expected),read(Datasets.load(FILE_DATASET_URI)));
  Assert.assertEquals("Should have committed",0,remaining(in));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCloseAndCreateWriter() throws EventDeliveryException {
  config.put(DatasetSinkConstants.CONFIG_FLUSHABLE_COMMIT_ON_BATCH,Boolean.toString(false));
  config.put(DatasetSinkConstants.CONFIG_SYNCABLE_SYNC_ON_BATCH,Boolean.toString(false));
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  sink.closeWriter();
  sink.commitTransaction();
  sink.createWriter();
  Assert.assertNotNull("Writer should not be null",sink.getWriter());
  Assert.assertEquals("Should have committed",0,remaining(in));
  sink.stop();
  Assert.assertEquals(Sets.newHashSet(expected),read(Datasets.load(FILE_DATASET_URI)));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMiniClusterStore() throws EventDeliveryException, IOException {
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(new Configuration()).build();
  FileSystem dfs=cluster.getFileSystem();
  Configuration conf=dfs.getConf();
  URI hdfsUri=URI.create("dataset:" + conf.get("fs.defaultFS") + "/tmp/repo"+ DATASET_NAME);
  try {
    Datasets.create(hdfsUri,DESCRIPTOR);
    config.put(DatasetSinkConstants.CONFIG_KITE_DATASET_URI,hdfsUri.toString());
    DatasetSink sink=sink(in,config);
    sink.start();
    sink.process();
    sink.stop();
    Assert.assertEquals(Sets.newHashSet(expected),read(Datasets.load(hdfsUri)));
    Assert.assertEquals("Should have committed",0,remaining(in));
  }
  finally {
    if (Datasets.exists(hdfsUri)) {
      Datasets.delete(hdfsUri);
    }
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerializedWithIncompatibleSchemasWithSavePolicy() throws EventDeliveryException {
  if (Datasets.exists(ERROR_DATASET_URI)) {
    Datasets.delete(ERROR_DATASET_URI);
  }
  config.put(DatasetSinkConstants.CONFIG_FAILURE_POLICY,DatasetSinkConstants.SAVE_FAILURE_POLICY);
  config.put(DatasetSinkConstants.CONFIG_KITE_ERROR_DATASET_URI,ERROR_DATASET_URI);
  final DatasetSink sink=sink(in,config);
  GenericRecordBuilder builder=new GenericRecordBuilder(INCOMPATIBLE_SCHEMA);
  GenericData.Record rec=builder.set("username","koala").build();
  Event badEvent=event(rec,INCOMPATIBLE_SCHEMA,SCHEMA_FILE,true);
  putToChannel(in,badEvent);
  sink.start();
  sink.process();
  sink.stop();
  Assert.assertEquals("Good records should have been written",Sets.newHashSet(expected),read(Datasets.load(FILE_DATASET_URI)));
  Assert.assertEquals("Should not have rolled back",0,remaining(in));
  Assert.assertEquals("Should have saved the bad event",Sets.newHashSet(AvroFlumeEvent.newBuilder().setBody(ByteBuffer.wrap(badEvent.getBody())).setHeaders(toUtf8Map(badEvent.getHeaders())).build()),read(Datasets.load(ERROR_DATASET_URI,AvroFlumeEvent.class)));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMissingSchemaWithSavePolicy() throws EventDeliveryException {
  if (Datasets.exists(ERROR_DATASET_URI)) {
    Datasets.delete(ERROR_DATASET_URI);
  }
  config.put(DatasetSinkConstants.CONFIG_FAILURE_POLICY,DatasetSinkConstants.SAVE_FAILURE_POLICY);
  config.put(DatasetSinkConstants.CONFIG_KITE_ERROR_DATASET_URI,ERROR_DATASET_URI);
  final DatasetSink sink=sink(in,config);
  Event badEvent=new SimpleEvent();
  badEvent.setHeaders(Maps.<String,String>newHashMap());
  badEvent.setBody(serialize(expected.get(0),RECORD_SCHEMA));
  putToChannel(in,badEvent);
  sink.start();
  sink.process();
  sink.stop();
  Assert.assertEquals("Good records should have been written",Sets.newHashSet(expected),read(Datasets.load(FILE_DATASET_URI)));
  Assert.assertEquals("Should not have rolled back",0,remaining(in));
  Assert.assertEquals("Should have saved the bad event",Sets.newHashSet(AvroFlumeEvent.newBuilder().setBody(ByteBuffer.wrap(badEvent.getBody())).setHeaders(toUtf8Map(badEvent.getHeaders())).build()),read(Datasets.load(ERROR_DATASET_URI,AvroFlumeEvent.class)));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateWriter() throws EventDeliveryException {
  config.put(DatasetSinkConstants.CONFIG_FLUSHABLE_COMMIT_ON_BATCH,Boolean.toString(false));
  config.put(DatasetSinkConstants.CONFIG_SYNCABLE_SYNC_ON_BATCH,Boolean.toString(false));
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  sink.commitTransaction();
  sink.createWriter();
  Assert.assertNotNull("Writer should not be null",sink.getWriter());
  Assert.assertEquals("Should have committed",0,remaining(in));
  sink.stop();
  Assert.assertEquals(0,read(Datasets.load(FILE_DATASET_URI)).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.solr.morphline.TestBlobDeserializer </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testMaxLineLength() throws IOException {
  String longLine="abcdefghijklmnopqrstuvwxyz\n";
  Context ctx=new Context();
  ctx.put(BlobDeserializer.MAX_BLOB_LENGTH_KEY,"10");
  ResettableInputStream in=new ResettableTestStringInputStream(longLine);
  EventDeserializer des=new BlobDeserializer(ctx,in);
  assertEventBodyEquals("abcdefghij",des.readEvent());
  assertEventBodyEquals("klmnopqrst",des.readEvent());
  assertEventBodyEquals("uvwxyz\n",des.readEvent());
  assertNull(des.readEvent());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBatch() throws IOException {
  ResettableInputStream in=new ResettableTestStringInputStream(mini);
  EventDeserializer des=new BlobDeserializer(new Context(),in);
  List<Event> events;
  events=des.readEvents(10);
  assertEquals(1,events.size());
  assertEventBodyEquals(mini,events.get(0));
  des.mark();
  des.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.solr.morphline.TestBlobHandler </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingleEvent() throws Exception {
  byte[] json="foo".getBytes("UTF-8");
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  assertEquals(1,deserialized.size());
  Event e=deserialized.get(0);
  assertEquals(0,e.getHeaders().size());
  assertEquals("foo",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyEvent() throws Exception {
  byte[] json="".getBytes("UTF-8");
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  assertEquals(1,deserialized.size());
  Event e=deserialized.get(0);
  assertEquals(0,e.getHeaders().size());
  assertEquals("",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.solr.morphline.TestMorphlineInterceptor </h4><pre class="type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGrokIfNotMatchDropEventDrop() throws Exception {
  Context context=new Context();
  context.put(MorphlineHandlerImpl.MORPHLINE_FILE_PARAM,RESOURCES_DIR + "/test-morphlines/grokIfNotMatchDropRecord.conf");
  String msg="<XXXXXXXXXXXXX164>Feb  4 10:46:14 syslog sshd[607]: Server listening on 0.0.0.0 port 22.";
  Event input=EventBuilder.withBody(null,ImmutableMap.of(Fields.MESSAGE,msg));
  Event actual=build(context).intercept(input);
  assertNull(actual);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.solr.morphline.TestMorphlineSolrSink </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAvroRoundTrip() throws Exception {
  String file=RESOURCES_DIR + "/test-documents" + "/sample-statuses-20120906-141433.avro";
  testDocumentTypesInternal(file);
  QueryResponse rsp=query("*:*");
  Iterator<SolrDocument> iter=rsp.getResults().iterator();
  ListMultimap<String,String> expectedFieldValues;
  expectedFieldValues=ImmutableListMultimap.of("id","1234567890","text","sample tweet one","user_screen_name","fake_user1");
  assertEquals(expectedFieldValues,next(iter));
  expectedFieldValues=ImmutableListMultimap.of("id","2345678901","text","sample tweet two","user_screen_name","fake_user2");
  assertEquals(expectedFieldValues,next(iter));
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.solr.morphline.TestUUIDInterceptor </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPreserveExisting() throws Exception {
  Context context=new Context();
  context.put(UUIDInterceptor.HEADER_NAME,ID);
  context.put(UUIDInterceptor.PRESERVE_EXISTING_NAME,"true");
  Event event=new SimpleEvent();
  event.getHeaders().put(ID,"foo");
  assertEquals("foo",build(context).intercept(event).getHeaders().get(ID));
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBasic() throws Exception {
  Context context=new Context();
  context.put(UUIDInterceptor.HEADER_NAME,ID);
  context.put(UUIDInterceptor.PRESERVE_EXISTING_NAME,"true");
  Event event=new SimpleEvent();
  assertTrue(build(context).intercept(event).getHeaders().get(ID).length() > 0);
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPrefix() throws Exception {
  Context context=new Context();
  context.put(UUIDInterceptor.HEADER_NAME,ID);
  context.put(UUIDInterceptor.PREFIX_NAME,"bar#");
  Event event=new SimpleEvent();
  assertTrue(build(context).intercept(event).getHeaders().get(ID).startsWith("bar#"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestAbstractPollableSource </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void voidBackOffConfigDefaults(){
  source=spy(new AbstractPollableSource(){
    @Override protected Status doProcess() throws EventDeliveryException {
      return Status.BACKOFF;
    }
    @Override protected void doConfigure(    Context context) throws FlumeException {
    }
    @Override protected void doStart() throws FlumeException {
    }
    @Override protected void doStop() throws FlumeException {
    }
  }
);
  HashMap<String,String> inputConfigs=new HashMap<String,String>();
  Assert.assertEquals("BackOffSleepIncrement should equal " + PollableSourceConstants.DEFAULT_BACKOFF_SLEEP_INCREMENT + " but it equals "+ source.getBackOffSleepIncrement(),PollableSourceConstants.DEFAULT_BACKOFF_SLEEP_INCREMENT,source.getBackOffSleepIncrement());
  Assert.assertEquals("BackOffSleepIncrement should equal " + PollableSourceConstants.DEFAULT_MAX_BACKOFF_SLEEP + " but it equals "+ source.getMaxBackOffSleepInterval(),PollableSourceConstants.DEFAULT_MAX_BACKOFF_SLEEP,source.getMaxBackOffSleepInterval());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void voidBackOffConfig(){
  source=spy(new AbstractPollableSource(){
    @Override protected Status doProcess() throws EventDeliveryException {
      return Status.BACKOFF;
    }
    @Override protected void doConfigure(    Context context) throws FlumeException {
    }
    @Override protected void doStart() throws FlumeException {
    }
    @Override protected void doStop() throws FlumeException {
    }
  }
);
  HashMap<String,String> inputConfigs=new HashMap<String,String>();
  inputConfigs.put(PollableSourceConstants.BACKOFF_SLEEP_INCREMENT,"42");
  inputConfigs.put(PollableSourceConstants.MAX_BACKOFF_SLEEP,"4242");
  Context context=new Context(inputConfigs);
  source.configure(context);
  Assert.assertEquals("BackOffSleepIncrement should equal 42 but it equals " + source.getBackOffSleepIncrement(),42l,source.getBackOffSleepIncrement());
  Assert.assertEquals("BackOffSleepIncrement should equal 42 but it equals " + source.getMaxBackOffSleepInterval(),4242l,source.getMaxBackOffSleepInterval());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestAvroSource </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifecycle() throws InterruptedException {
  boolean bound=false;
  for (int i=0; i < 100 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("port",String.valueOf(selectedPort=41414 + i));
      context.put("bind","0.0.0.0");
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    ChannelException e) {
    }
  }
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslRequest() throws InterruptedException, IOException {
  boolean bound=false;
  for (int i=0; i < 10 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("port",String.valueOf(selectedPort=41414 + i));
      context.put("bind","0.0.0.0");
      context.put("ssl","true");
      context.put("keystore","src/test/resources/server.p12");
      context.put("keystore-password","password");
      context.put("keystore-type","PKCS12");
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    ChannelException e) {
      Thread.sleep(100);
    }
  }
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  AvroSourceProtocol client=SpecificRequestor.getClient(AvroSourceProtocol.class,new NettyTransceiver(new InetSocketAddress(selectedPort),new SSLChannelFactory()));
  AvroFlumeEvent avroEvent=new AvroFlumeEvent();
  avroEvent.setHeaders(new HashMap<CharSequence,CharSequence>());
  avroEvent.setBody(ByteBuffer.wrap("Hello avro ssl".getBytes()));
  Status status=client.append(avroEvent);
  Assert.assertEquals(Status.OK,status);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Channel contained our event","Hello avro ssl",new String(event.getBody()));
  transaction.commit();
  transaction.close();
  logger.debug("Round trip event:{}",event);
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestBasicSourceSemantics </h4><pre class="type-11 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigureCalledWhenStarted() throws Exception {
  source=spyAndConfigure(new DoNothingSource());
  source.start();
  try {
    source.configure(context);
    Assert.fail();
  }
 catch (  IllegalStateException expected) {
  }
  Assert.assertTrue(source.isStarted());
  Assert.assertNull(source.getStartException());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoStartThrowsException() throws Exception {
  source=spyAndConfigure(new DoNothingSource(){
    @Override protected void doStart() throws FlumeException {
      throw new FlumeException("dummy");
    }
  }
);
  source.start();
  Assert.assertFalse(source.isStarted());
  Assert.assertEquals(LifecycleState.ERROR,source.getLifecycleState());
  Assert.assertNotNull(source.getStartException());
}

</code></pre>

<br>
<pre class="type-11 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoConfigureThrowsException() throws Exception {
  source=spy(new DoNothingSource(){
    @Override protected void doConfigure(    Context context) throws FlumeException {
      throw new FlumeException("dummy");
    }
  }
);
  source.setChannelProcessor(channelProcessor);
  try {
    source.configure(context);
    Assert.fail();
  }
 catch (  FlumeException expected) {
  }
  Assert.assertFalse(source.isStarted());
  Assert.assertEquals(LifecycleState.ERROR,source.getLifecycleState());
  Assert.assertNotNull(source.getStartException());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoStopThrowsException() throws Exception {
  source=spyAndConfigure(new DoNothingSource(){
    @Override protected void doStop() throws FlumeException {
      throw new FlumeException("dummy");
    }
  }
);
  source.start();
  source.stop();
  Assert.assertFalse(source.isStarted());
  Assert.assertEquals(LifecycleState.ERROR,source.getLifecycleState());
  Assert.assertNull(source.getStartException());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestDefaultSourceFactory </h4><pre class="type-10 type-1 type-14 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDuplicateCreate(){
  Source avroSource1=sourceFactory.create("avroSource1","avro");
  Source avroSource2=sourceFactory.create("avroSource2","avro");
  Assert.assertNotNull(avroSource1);
  Assert.assertNotNull(avroSource2);
  Assert.assertNotSame(avroSource1,avroSource2);
  Assert.assertTrue(avroSource1 instanceof AvroSource);
  Assert.assertTrue(avroSource2 instanceof AvroSource);
  Source s1=sourceFactory.create("avroSource1","avro");
  Source s2=sourceFactory.create("avroSource2","avro");
  Assert.assertNotSame(avroSource1,s1);
  Assert.assertNotSame(avroSource2,s2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestExecSource </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMonitoredCounterGroup() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  if (SystemUtils.IS_OS_WINDOWS) {
    runTestShellCmdHelper("powershell -ExecutionPolicy Unrestricted -command","foreach ($i in 1..5) { $i }",new String[]{"1","2","3","4","5"});
  }
 else {
    runTestShellCmdHelper("/bin/bash -c","for i in {1..5}; do echo $i;done",new String[]{"1","2","3","4","5"});
  }
  ObjectName objName=null;
  try {
    objName=new ObjectName("org.apache.flume.source" + ":type=" + source.getName());
    MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
    String strAtts[]={"Type","EventReceivedCount","EventAcceptedCount"};
    AttributeList attrList=mbeanServer.getAttributes(objName,strAtts);
    Assert.assertNotNull(attrList.get(0));
    Assert.assertEquals("Expected Value: Type","Type",((Attribute)attrList.get(0)).getName());
    Assert.assertEquals("Expected Value: SOURCE","SOURCE",((Attribute)attrList.get(0)).getValue());
    Assert.assertNotNull(attrList.get(1));
    Assert.assertEquals("Expected Value: EventReceivedCount","EventReceivedCount",((Attribute)attrList.get(1)).getName());
    Assert.assertEquals("Expected Value: 5","5",((Attribute)attrList.get(1)).getValue().toString());
    Assert.assertNotNull(attrList.get(2));
    Assert.assertEquals("Expected Value: EventAcceptedCount","EventAcceptedCount",((Attribute)attrList.get(2)).getName());
    Assert.assertEquals("Expected Value: 5","5",((Attribute)attrList.get(2)).getValue().toString());
  }
 catch (  Exception ex) {
    System.out.println("Unable to retreive the monitored counter: " + objName + ex.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchTimeout() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  String filePath="/tmp/flume-execsource." + Thread.currentThread().getId();
  String eventBody="TestMessage";
  FileOutputStream outputStream=new FileOutputStream(filePath);
  context.put(ExecSourceConfigurationConstants.CONFIG_BATCH_SIZE,"50000");
  context.put(ExecSourceConfigurationConstants.CONFIG_BATCH_TIME_OUT,"750");
  context.put("shell",SystemUtils.IS_OS_WINDOWS ? "powershell -ExecutionPolicy Unrestricted -command" : "/bin/bash -c");
  context.put("command",SystemUtils.IS_OS_WINDOWS ? "Get-Content " + filePath + " | Select-Object -Last 10" : ("tail -f " + filePath));
  Configurables.configure(source,context);
  source.start();
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int lineNumber=0; lineNumber < 3; lineNumber++) {
    outputStream.write((eventBody).getBytes());
    outputStream.write(String.valueOf(lineNumber).getBytes());
    outputStream.write('\n');
    outputStream.flush();
  }
  outputStream.close();
  Thread.sleep(1500);
  for (int i=0; i < 3; i++) {
    Event event=channel.take();
    assertNotNull(event);
    assertNotNull(event.getBody());
    assertEquals(eventBody + String.valueOf(i),new String(event.getBody()));
  }
  transaction.commit();
  transaction.close();
  source.stop();
  File file=new File(filePath);
  FileUtils.forceDelete(file);
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestart() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  context.put(ExecSourceConfigurationConstants.CONFIG_RESTART_THROTTLE,"10");
  context.put(ExecSourceConfigurationConstants.CONFIG_RESTART,"true");
  context.put("command",SystemUtils.IS_OS_WINDOWS ? "cmd /c echo flume" : "echo flume");
  Configurables.configure(source,context);
  source.start();
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long start=System.currentTimeMillis();
  for (int i=0; i < 5; i++) {
    Event event=channel.take();
    assertNotNull(event);
    assertNotNull(event.getBody());
    assertEquals("flume",new String(event.getBody(),Charsets.UTF_8));
  }
  assertTrue(System.currentTimeMillis() - start < 10000L);
  transaction.commit();
  transaction.close();
  source.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestMultiportSyslogTCPSource </h4><pre class="type-12 type-9 type-13 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Basic test to exercise multiple-port parsing.
 */
@Test public void testMultiplePorts() throws IOException, ParseException {
  MultiportSyslogTCPSource source=new MultiportSyslogTCPSource();
  Channel channel=new MemoryChannel();
  Context channelContext=new Context();
  channelContext.put("capacity",String.valueOf(2000));
  channelContext.put("transactionCapacity",String.valueOf(2000));
  Configurables.configure(channel,channelContext);
  List<Channel> channels=Lists.newArrayList();
  channels.add(channel);
  ChannelSelector rcs=new ReplicatingChannelSelector();
  rcs.setChannels(channels);
  source.setChannelProcessor(new ChannelProcessor(rcs));
  Context context=new Context();
  StringBuilder ports=new StringBuilder();
  for (int i=0; i < 1000; i++) {
    ports.append(String.valueOf(BASE_TEST_SYSLOG_PORT + i)).append(" ");
  }
  context.put(SyslogSourceConfigurationConstants.CONFIG_PORTS,ports.toString().trim());
  source.configure(context);
  source.start();
  Socket syslogSocket;
  for (int i=0; i < 1000; i++) {
    syslogSocket=new Socket(InetAddress.getLocalHost(),BASE_TEST_SYSLOG_PORT + i);
    syslogSocket.getOutputStream().write(getEvent(i));
    syslogSocket.close();
  }
  List<Event> channelEvents=new ArrayList<Event>();
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int i=0; i < 1000; i++) {
    Event e=channel.take();
    if (e == null) {
      throw new NullPointerException("Event is null");
    }
    channelEvents.add(e);
  }
  try {
    txn.commit();
  }
 catch (  Throwable t) {
    txn.rollback();
  }
 finally {
    txn.close();
  }
  for (int i=0; i < 1000; i++) {
    Iterator<Event> iter=channelEvents.iterator();
    while (iter.hasNext()) {
      Event e=iter.next();
      Map<String,String> headers=e.getHeaders();
      Integer port=null;
      if (headers.containsKey(SyslogSourceConfigurationConstants.DEFAULT_PORT_HEADER)) {
        port=Integer.parseInt(headers.get(SyslogSourceConfigurationConstants.DEFAULT_PORT_HEADER));
      }
      iter.remove();
      Assert.assertEquals("Timestamps must match",String.valueOf(time.getMillis()),headers.get("timestamp"));
      String host2=headers.get("host");
      Assert.assertEquals(host1,host2);
      if (port != null) {
        int num=port - BASE_TEST_SYSLOG_PORT;
        Assert.assertEquals(data1 + " " + String.valueOf(num),new String(e.getBody()));
      }
    }
  }
  source.stop();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the reassembly of a single line across multiple packets.
 */
@Test public void testFragmented() throws CharacterCodingException {
  final int maxLen=100;
  IoBuffer savedBuf=IoBuffer.allocate(maxLen);
  String origMsg="<1>- - blah blam foo\n";
  IoBuffer buf1=IoBuffer.wrap(origMsg.substring(0,11).getBytes(Charsets.UTF_8));
  IoBuffer buf2=IoBuffer.wrap(origMsg.substring(11,16).getBytes(Charsets.UTF_8));
  IoBuffer buf3=IoBuffer.wrap(origMsg.substring(16,21).getBytes(Charsets.UTF_8));
  LineSplitter lineSplitter=new LineSplitter(maxLen);
  ParsedBuffer parsedLine=new ParsedBuffer();
  Assert.assertFalse("Incomplete line should not be parsed",lineSplitter.parseLine(buf1,savedBuf,parsedLine));
  Assert.assertFalse("Incomplete line should not be parsed",lineSplitter.parseLine(buf2,savedBuf,parsedLine));
  Assert.assertTrue("Completed line should be parsed",lineSplitter.parseLine(buf3,savedBuf,parsedLine));
  Assert.assertEquals(origMsg.trim(),parsedLine.buffer.getString(Charsets.UTF_8.newDecoder()));
  parsedLine.buffer.rewind();
  MultiportSyslogTCPSource.MultiportSyslogHandler handler=new MultiportSyslogTCPSource.MultiportSyslogHandler(maxLen,100,null,null,SyslogSourceConfigurationConstants.DEFAULT_PORT_HEADER,new ThreadSafeDecoder(Charsets.UTF_8),new ConcurrentHashMap<Integer,ThreadSafeDecoder>(),null);
  Event event=handler.parseEvent(parsedLine,Charsets.UTF_8.newDecoder());
  String body=new String(event.getBody(),Charsets.UTF_8);
  Assert.assertEquals("Event body incorrect",origMsg.trim().substring(7),body);
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that different charsets are parsed by different ports correctly.
 */
@Test public void testPortCharsetHandling() throws UnknownHostException, Exception {
  InetAddress localAddr=InetAddress.getLocalHost();
  DefaultIoSessionDataStructureFactory dsFactory=new DefaultIoSessionDataStructureFactory();
  int port1=10001;
  NioSession session1=mock(NioSession.class);
  session1.setAttributeMap(dsFactory.getAttributeMap(session1));
  SocketAddress sockAddr1=new InetSocketAddress(localAddr,port1);
  when(session1.getLocalAddress()).thenReturn(sockAddr1);
  int port2=10002;
  NioSession session2=mock(NioSession.class);
  session2.setAttributeMap(dsFactory.getAttributeMap(session2));
  SocketAddress sockAddr2=new InetSocketAddress(localAddr,port2);
  when(session2.getLocalAddress()).thenReturn(sockAddr2);
  ConcurrentMap<Integer,ThreadSafeDecoder> portCharsets=new ConcurrentHashMap<Integer,ThreadSafeDecoder>();
  portCharsets.put(port1,new ThreadSafeDecoder(Charsets.ISO_8859_1));
  portCharsets.put(port2,new ThreadSafeDecoder(Charsets.UTF_8));
  MemoryChannel chan=new MemoryChannel();
  chan.configure(new Context());
  chan.start();
  ReplicatingChannelSelector sel=new ReplicatingChannelSelector();
  sel.setChannels(Lists.<Channel>newArrayList(chan));
  ChannelProcessor chanProc=new ChannelProcessor(sel);
  MultiportSyslogHandler handler=new MultiportSyslogHandler(1000,10,chanProc,new SourceCounter("test"),"port",new ThreadSafeDecoder(Charsets.UTF_8),portCharsets,null);
  handler.sessionCreated(session1);
  handler.sessionCreated(session2);
  String header="<10>2012-08-17T02:14:00-07:00 192.168.1.110 ";
  String dangerousChars="þÿÀÁ";
  String msg;
  IoBuffer buf;
  Event evt;
  msg=header + dangerousChars + "\n";
  buf=IoBuffer.wrap(msg.getBytes(Charsets.ISO_8859_1));
  handler.messageReceived(session1,buf);
  evt=takeEvent(chan);
  Assert.assertNotNull("Event vanished!",evt);
  Assert.assertNull(evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
  msg=header + dangerousChars + "\n";
  buf=IoBuffer.wrap(msg.getBytes(Charsets.ISO_8859_1));
  handler.messageReceived(session2,buf);
  evt=takeEvent(chan);
  Assert.assertNotNull("Event vanished!",evt);
  Assert.assertEquals("Expected invalid event due to character encoding",SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
  msg=header + dangerousChars + "\n";
  buf=IoBuffer.wrap(msg.getBytes(Charsets.UTF_8));
  handler.messageReceived(session2,buf);
  evt=takeEvent(chan);
  Assert.assertNotNull("Event vanished!",evt);
  Assert.assertNull(evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test parser handling of different character sets.
 */
@Test public void testCharsetParsing() throws FileNotFoundException, IOException {
  String header="<10>2012-08-11T01:01:01Z localhost ";
  String enBody="Yarf yarf yarf";
  String enMsg=header + enBody;
  String frBody="Comment " + "\u00EA" + "tes-vous?";
  String frMsg=header + frBody;
  String esBody="¿Cómo estás?";
  String esMsg=header + esBody;
  MultiportSyslogHandler handler=new MultiportSyslogHandler(1000,10,new ChannelProcessor(new ReplicatingChannelSelector()),new SourceCounter("test"),"port",new ThreadSafeDecoder(Charsets.UTF_8),new ConcurrentHashMap<Integer,ThreadSafeDecoder>(),null);
  ParsedBuffer parsedBuf=new ParsedBuffer();
  parsedBuf.incomplete=false;
  String[] bodies={enBody,esBody,frBody};
  String[] msgs={enMsg,esMsg,frMsg};
  Charset[] charsets={Charsets.UTF_8,Charsets.ISO_8859_1};
  for (  Charset charset : charsets) {
    for (int i=0; i < msgs.length; i++) {
      String msg=msgs[i];
      String body=bodies[i];
      parsedBuf.buffer=IoBuffer.wrap(msg.getBytes(charset));
      Event evt=handler.parseEvent(parsedBuf,charset.newDecoder());
      String result=new String(evt.getBody(),charset);
      Assert.assertEquals(charset + " parse error: " + msg,body,result);
      Assert.assertNull(evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
    }
  }
  byte[] badUtf8Seq=enMsg.getBytes(Charsets.ISO_8859_1);
  int badMsgLen=badUtf8Seq.length;
  badUtf8Seq[badMsgLen - 2]=(byte)0xFE;
  badUtf8Seq[badMsgLen - 1]=(byte)0xFF;
  parsedBuf.buffer=IoBuffer.wrap(badUtf8Seq);
  Event evt=handler.parseEvent(parsedBuf,Charsets.UTF_8.newDecoder());
  Assert.assertEquals("event body: " + new String(evt.getBody(),Charsets.ISO_8859_1) + " and my default charset = "+ Charset.defaultCharset()+ " with event = "+ evt,SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
  Assert.assertArrayEquals("Raw message data should be kept in body of event",badUtf8Seq,evt.getBody());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestNetcatSource </h4><pre class="type-12 type-9 type-13 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifecycle() throws InterruptedException, LifecycleException, EventDeliveryException {
  ExecutorService executor=Executors.newFixedThreadPool(3);
  boolean bound=false;
  for (int i=0; i < 100 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("bind","0.0.0.0");
      context.put("port","41414");
      context.put("ack-every-event",String.valueOf(ackEveryEvent));
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    FlumeException e) {
    }
  }
  Runnable clientRequestRunnable=new Runnable(){
    @Override public void run(){
      try {
        SocketChannel clientChannel=SocketChannel.open(new InetSocketAddress(41414));
        Writer writer=Channels.newWriter(clientChannel,"utf-8");
        BufferedReader reader=new BufferedReader(Channels.newReader(clientChannel,"utf-8"));
        writer.write("Test message\n");
        writer.flush();
        if (ackEveryEvent) {
          String response=reader.readLine();
          Assert.assertEquals("Server should return OK","OK",response);
        }
 else {
          Assert.assertFalse("Server should not return anything",reader.ready());
        }
        clientChannel.close();
      }
 catch (      IOException e) {
        logger.error("Caught exception: ",e);
      }
    }
  }
;
  ChannelSelector selector=source.getChannelProcessor().getSelector();
  Transaction tx=selector.getAllChannels().get(0).getTransaction();
  tx.begin();
  for (int i=0; i < 100; i++) {
    logger.info("Sending request");
    executor.submit(clientRequestRunnable);
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertArrayEquals("Test message".getBytes(),event.getBody());
  }
  tx.commit();
  tx.close();
  executor.shutdown();
  while (!executor.isTerminated()) {
    executor.awaitTermination(500,TimeUnit.MILLISECONDS);
  }
  source.stop();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test that line above MaxLineLength are discarded
 * @throws InterruptedException
 * @throws IOException
 */
@Test public void testMaxLineLengthwithAck() throws InterruptedException, IOException {
  String encoding="UTF-8";
  String ackEvent="OK";
  String ackErrorEvent="FAILED: Event exceeds the maximum length (10 chars, including newline)";
  startSource(encoding,"true","1","10");
  Socket netcatSocket=new Socket(localhost,selectedPort);
  LineIterator inputLineIterator=IOUtils.lineIterator(netcatSocket.getInputStream(),encoding);
  try {
    sendEvent(netcatSocket,"123456789",encoding);
    Assert.assertArrayEquals("Channel contained our event","123456789".getBytes(defaultCharset),getFlumeEvent());
    Assert.assertEquals("Socket contained the Ack",ackEvent,inputLineIterator.nextLine());
    sendEvent(netcatSocket,english,encoding);
    Assert.assertEquals("Channel does not contain an event",null,getRawFlumeEvent());
    Assert.assertEquals("Socket contained the Error Ack",ackErrorEvent,inputLineIterator.nextLine());
  }
  finally {
    netcatSocket.close();
    stopSource();
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test if an ack is sent for every event in the correct encoding
 * @throws InterruptedException
 * @throws IOException
 */
@Test public void testAck() throws InterruptedException, IOException {
  String encoding="UTF-8";
  String ackEvent="OK";
  startSource(encoding,"true","1","512");
  Socket netcatSocket=new Socket(localhost,selectedPort);
  LineIterator inputLineIterator=IOUtils.lineIterator(netcatSocket.getInputStream(),encoding);
  try {
    for (int i=0; i < 20; i++) {
      sendEvent(netcatSocket,english,encoding);
      Assert.assertArrayEquals("Channel contained our event",english.getBytes(defaultCharset),getFlumeEvent());
      Assert.assertEquals("Socket contained the Ack",ackEvent,inputLineIterator.nextLine());
    }
    for (int i=0; i < 20; i++) {
      sendEvent(netcatSocket,french,encoding);
      Assert.assertArrayEquals("Channel contained our event",french.getBytes(defaultCharset),getFlumeEvent());
      Assert.assertEquals("Socket contained the Ack",ackEvent,inputLineIterator.nextLine());
    }
  }
  finally {
    netcatSocket.close();
    stopSource();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSequenceGeneratorSource </h4><pre class="type-12 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLifecycle() throws InterruptedException, EventDeliveryException {
  Channel channel=new PseudoTxnMemoryChannel();
  Context context=new Context();
  context.put("logicalNode.name","test");
  Configurables.configure(source,context);
  Configurables.configure(channel,context);
  List<Channel> channels=new ArrayList<Channel>();
  channels.add(channel);
  ChannelSelector rcs=new ReplicatingChannelSelector();
  rcs.setChannels(channels);
  source.setChannelProcessor(new ChannelProcessor(rcs));
  source.start();
  for (long i=0; i < 100; i++) {
    source.process();
    Event event=channel.take();
    Assert.assertArrayEquals(String.valueOf(i).getBytes(),new String(event.getBody()).getBytes());
  }
  source.stop();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBatchProcessWithLifeCycle() throws InterruptedException, LifecycleException, EventDeliveryException {
  int batchSize=10;
  Channel channel=new PseudoTxnMemoryChannel();
  Context context=new Context();
  context.put("logicalNode.name","test");
  context.put("batchSize",Integer.toString(batchSize));
  Configurables.configure(source,context);
  Configurables.configure(channel,context);
  List<Channel> channels=new ArrayList<Channel>();
  channels.add(channel);
  ChannelSelector rcs=new ReplicatingChannelSelector();
  rcs.setChannels(channels);
  source.setChannelProcessor(new ChannelProcessor(rcs));
  source.start();
  for (long i=0; i < 100; i++) {
    source.process();
    for (long j=batchSize; j > 0; j--) {
      Event event=channel.take();
      String expectedVal=String.valueOf(((i + 1) * batchSize) - j);
      String resultedVal=new String(event.getBody());
      Assert.assertTrue("Expected " + expectedVal + " is not equals to "+ resultedVal,expectedVal.equals(resultedVal));
    }
  }
  source.stop();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProcess() throws InterruptedException, LifecycleException, EventDeliveryException {
  Channel channel=new PseudoTxnMemoryChannel();
  Context context=new Context();
  context.put("logicalNode.name","test");
  Configurables.configure(source,context);
  Configurables.configure(channel,context);
  List<Channel> channels=new ArrayList<Channel>();
  channels.add(channel);
  ChannelSelector rcs=new ReplicatingChannelSelector();
  rcs.setChannels(channels);
  source.setChannelProcessor(new ChannelProcessor(rcs));
  source.start();
  for (long i=0; i < 100; i++) {
    source.process();
    Event event=channel.take();
    Assert.assertArrayEquals(String.valueOf(i).getBytes(),new String(event.getBody()).getBytes());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSpoolDirectorySource </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutBasenameHeader() throws IOException, InterruptedException {
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  context.put(SpoolDirectorySourceConfigurationConstants.BASENAME_HEADER,"true");
  context.put(SpoolDirectorySourceConfigurationConstants.BASENAME_HEADER_KEY,"basenameHeaderKeyTest");
  Configurables.configure(source,context);
  source.start();
  while (source.getSourceCounter().getEventAcceptedCount() < 8) {
    Thread.sleep(10);
  }
  Transaction txn=channel.getTransaction();
  txn.begin();
  Event e=channel.take();
  Assert.assertNotNull("Event must not be null",e);
  Assert.assertNotNull("Event headers must not be null",e.getHeaders());
  Assert.assertNotNull(e.getHeaders().get("basenameHeaderKeyTest"));
  Assert.assertEquals(f1.getName(),e.getHeaders().get("basenameHeaderKeyTest"));
  txn.commit();
  txn.close();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReconfigure() throws InterruptedException, IOException {
  final int NUM_RECONFIGS=20;
  for (int i=0; i < NUM_RECONFIGS; i++) {
    Context context=new Context();
    File file=new File(tmpDir.getAbsolutePath() + "/file-" + i);
    Files.write("File " + i,file,Charsets.UTF_8);
    context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
    Configurables.configure(source,context);
    source.start();
    Thread.sleep(TimeUnit.SECONDS.toMillis(1));
    Transaction txn=channel.getTransaction();
    txn.begin();
    try {
      Event event=channel.take();
      String content=new String(event.getBody(),Charsets.UTF_8);
      Assert.assertEquals("File " + i,content);
      txn.commit();
    }
 catch (    Throwable t) {
      txn.rollback();
    }
 finally {
      txn.close();
    }
    source.stop();
    Assert.assertFalse("Fatal error on iteration " + i,source.hasFatalError());
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifecycle() throws IOException, InterruptedException {
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  Configurables.configure(source,context);
  for (int i=0; i < 10; i++) {
    source.start();
    Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
    Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
    source.stop();
    Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
    Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
  }
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEndWithZeroByteFiles() throws IOException, InterruptedException {
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\n",f1,Charsets.UTF_8);
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  File f3=new File(tmpDir.getAbsolutePath() + "/file3");
  File f4=new File(tmpDir.getAbsolutePath() + "/file4");
  Files.touch(f2);
  Files.touch(f3);
  Files.touch(f4);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  Configurables.configure(source,context);
  source.start();
  Thread.sleep(5000);
  Assert.assertFalse("Server did not error",source.hasFatalError());
  Assert.assertEquals("One message was read",1,source.getSourceCounter().getEventAcceptedCount());
  source.stop();
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSourceDoesNotDieOnFullChannel() throws Exception {
  Context chContext=new Context();
  chContext.put("capacity","2");
  chContext.put("transactionCapacity","2");
  chContext.put("keep-alive","0");
  channel.stop();
  Configurables.configure(channel,chContext);
  channel.start();
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  context.put(SpoolDirectorySourceConfigurationConstants.BATCH_SIZE,"2");
  Configurables.configure(source,context);
  source.setBackOff(false);
  source.start();
  while (!source.hitChannelException()) {
    Thread.sleep(50);
  }
  List<String> dataOut=Lists.newArrayList();
  for (int i=0; i < 8; ) {
    Transaction tx=channel.getTransaction();
    tx.begin();
    Event e=channel.take();
    if (e != null) {
      dataOut.add(new String(e.getBody(),"UTF-8"));
      i++;
    }
    e=channel.take();
    if (e != null) {
      dataOut.add(new String(e.getBody(),"UTF-8"));
      i++;
    }
    tx.commit();
    tx.close();
  }
  Assert.assertTrue("Expected to hit ChannelException, but did not!",source.hitChannelException());
  Assert.assertEquals(8,dataOut.size());
  source.stop();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutFilenameHeader() throws IOException, InterruptedException {
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  context.put(SpoolDirectorySourceConfigurationConstants.FILENAME_HEADER,"true");
  context.put(SpoolDirectorySourceConfigurationConstants.FILENAME_HEADER_KEY,"fileHeaderKeyTest");
  Configurables.configure(source,context);
  source.start();
  while (source.getSourceCounter().getEventAcceptedCount() < 8) {
    Thread.sleep(10);
  }
  Transaction txn=channel.getTransaction();
  txn.begin();
  Event e=channel.take();
  Assert.assertNotNull("Event must not be null",e);
  Assert.assertNotNull("Event headers must not be null",e.getHeaders());
  Assert.assertNotNull(e.getHeaders().get("fileHeaderKeyTest"));
  Assert.assertEquals(f1.getAbsolutePath(),e.getHeaders().get("fileHeaderKeyTest"));
  txn.commit();
  txn.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestStressSource </h4><pre class="type-12 type-9 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBatchEventsWithoutMatTotalEvents() throws InterruptedException, EventDeliveryException {
  StressSource source=new StressSource();
  source.setChannelProcessor(mockProcessor);
  Context context=new Context();
  context.put("batchSize","10");
  source.configure(context);
  source.start();
  for (int i=0; i < 10; i++) {
    Assert.assertFalse("StressSource with no maxTotalEvents should not return " + Status.BACKOFF,source.process() == Status.BACKOFF);
  }
  verify(mockProcessor,times(10)).processEventBatch(getLastProcessedEventList(source));
  long successfulEvents=getCounterGroup(source).get("events.successful");
  TestCase.assertTrue("Number of successful events should be 100 but was " + successfulEvents,successfulEvents == 100);
  long failedEvents=getCounterGroup(source).get("events.failed");
  TestCase.assertTrue("Number of failure events should be 0 but was " + failedEvents,failedEvents == 0);
}

</code></pre>

<br>
<pre class="type-12 type-9 type-13 type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBatchEvents() throws InterruptedException, EventDeliveryException {
  StressSource source=new StressSource();
  source.setChannelProcessor(mockProcessor);
  Context context=new Context();
  context.put("maxTotalEvents","35");
  context.put("batchSize","10");
  source.configure(context);
  source.start();
  for (int i=0; i < 50; i++) {
    if (source.process() == Status.BACKOFF) {
      TestCase.assertTrue("Source should have sent all events in 4 batches",i == 4);
      break;
    }
    if (i < 3) {
      verify(mockProcessor,times(i + 1)).processEventBatch(getLastProcessedEventList(source));
    }
 else {
      verify(mockProcessor,times(1)).processEventBatch(getLastProcessedEventList(source));
    }
  }
  long successfulEvents=getCounterGroup(source).get("events.successful");
  TestCase.assertTrue("Number of successful events should be 35 but was " + successfulEvents,successfulEvents == 35);
  long failedEvents=getCounterGroup(source).get("events.failed");
  TestCase.assertTrue("Number of failure events should be 0 but was " + failedEvents,failedEvents == 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSyslogParser </h4><pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMessageParsing(){
  SyslogParser parser=new SyslogParser();
  Charset charset=Charsets.UTF_8;
  List<String> messages=Lists.newArrayList();
  messages.add("<34>Oct 11 22:14:15 mymachine su: 'su root' failed for " + "lonvick on /dev/pts/8");
  messages.add("<13>Feb  5 17:32:18 10.0.0.99 Use the BFG!");
  messages.add("<165>Aug 24 05:34:00 CST 1987 mymachine myproc[10]: %% " + "It's time to make the do-nuts.  %%  Ingredients: Mix=OK, Jelly=OK # " + "Devices: Mixer=OK, Jelly_Injector=OK, Frier=OK # Transport: "+ "Conveyer1=OK, Conveyer2=OK # %%");
  messages.add("<0>Oct 22 10:52:12 scapegoat 1990 Oct 22 10:52:01 TZ-6 " + "scapegoat.dmz.example.org 10.1.2.3 sched[0]: That's All Folks!");
  messages.add("<34>1 2003-10-11T22:14:15.003Z mymachine.example.com su - " + "ID47 - BOM'su root' failed for lonvick on /dev/pts/8");
  messages.add("<165>1 2003-08-24T05:14:15.000003-07:00 192.0.2.1 myproc " + "8710 - - %% It's time to make the do-nuts.");
  messages.add("<13>2003-08-24T05:14:15Z localhost snarf?");
  messages.add("<13>2012-08-16T14:34:03-08:00 127.0.0.1 test shnap!");
  for (  String msg : messages) {
    Set<String> keepFields=new HashSet<String>();
    Event event=parser.parseMessage(msg,charset,keepFields);
    Assert.assertNull("Failure to parse known-good syslog message",event.getHeaders().get(SyslogUtils.EVENT_STATUS));
  }
  for (  String msg : messages) {
    Set<String> keepFields=new HashSet<String>();
    keepFields.add(SyslogUtils.KEEP_FIELDS_ALL);
    Event event=parser.parseMessage(msg,charset,keepFields);
    Assert.assertArrayEquals(event.getBody(),msg.getBytes());
    Assert.assertNull("Failure to parse known-good syslog message",event.getHeaders().get(SyslogUtils.EVENT_STATUS));
  }
  for (  String msg : messages) {
    Set<String> keepFields=new HashSet<String>();
    keepFields.add(SyslogSourceConfigurationConstants.CONFIG_KEEP_FIELDS_HOSTNAME);
    Event event=parser.parseMessage(msg,charset,keepFields);
    Assert.assertTrue("Failure to persist hostname",new String(event.getBody()).contains(event.getHeaders().get("host")));
    Assert.assertNull("Failure to parse known-good syslog message",event.getHeaders().get(SyslogUtils.EVENT_STATUS));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSyslogUdpSource </h4><pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLargePayload() throws Exception {
  init("true");
  source.start();
  byte[] largePayload=getPayload(1000).getBytes();
  DatagramSocket syslogSocket;
  DatagramPacket datagramPacket;
  datagramPacket=new DatagramPacket(largePayload,1000,InetAddress.getLocalHost(),source.getSourcePort());
  for (int i=0; i < 10; i++) {
    syslogSocket=new DatagramSocket();
    syslogSocket.send(datagramPacket);
    syslogSocket.close();
  }
  List<Event> channelEvents=new ArrayList<Event>();
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int i=0; i < 10; i++) {
    Event e=channel.take();
    Assert.assertNotNull(e);
    channelEvents.add(e);
  }
  try {
    txn.commit();
  }
 catch (  Throwable t) {
    txn.rollback();
  }
 finally {
    txn.close();
  }
  source.stop();
  for (  Event e : channelEvents) {
    Assert.assertNotNull(e);
    Assert.assertArrayEquals(largePayload,e.getBody());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSyslogUtils </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExtractBadEventLarge(){
  String badData1="<10> bad bad data bad bad\n";
  SyslogUtils util=new SyslogUtils(5,null,false);
  ChannelBuffer buff=ChannelBuffers.buffer(100);
  buff.writeBytes(badData1.getBytes());
  Event e=util.extractEvent(buff);
  if (e == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers=e.getHeaders();
  Assert.assertEquals("1",headers.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("2",headers.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(SyslogUtils.SyslogStatus.INCOMPLETE.getSyslogStatus(),headers.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals("<10> bad b".trim(),new String(e.getBody()).trim());
  Event e2=util.extractEvent(buff);
  if (e2 == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers2=e2.getHeaders();
  Assert.assertEquals("0",headers2.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("0",headers2.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),headers2.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals("ad data ba".trim(),new String(e2.getBody()).trim());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Good event
 */
@Test public void testExtractGoodEvent(){
  String priority="<10>";
  String goodData1="Good good good data\n";
  SyslogUtils util=new SyslogUtils(false);
  ChannelBuffer buff=ChannelBuffers.buffer(100);
  buff.writeBytes((priority + goodData1).getBytes());
  Event e=util.extractEvent(buff);
  if (e == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers=e.getHeaders();
  Assert.assertEquals("1",headers.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("2",headers.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(null,headers.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(priority + goodData1.trim(),new String(e.getBody()).trim());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test bad event format 3: Empty priority - <>
 */
@Test public void testExtractBadEvent3(){
  String badData1="<> bad bad data\n";
  SyslogUtils util=new SyslogUtils(false);
  ChannelBuffer buff=ChannelBuffers.buffer(100);
  buff.writeBytes(badData1.getBytes());
  Event e=util.extractEvent(buff);
  if (e == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers=e.getHeaders();
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),headers.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(badData1.trim(),new String(e.getBody()).trim());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test bad event format 1: Priority is not numeric
 */
@Test public void testExtractBadEvent1(){
  String badData1="<10F> bad bad data\n";
  SyslogUtils util=new SyslogUtils(false);
  ChannelBuffer buff=ChannelBuffers.buffer(100);
  buff.writeBytes(badData1.getBytes());
  Event e=util.extractEvent(buff);
  if (e == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers=e.getHeaders();
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),headers.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(badData1.trim(),new String(e.getBody()).trim());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Bad event immediately followed by a good event
 */
@Test public void testBadEventGoodEvent(){
  String badData1="hi guys! <10F> bad bad data\n";
  SyslogUtils util=new SyslogUtils(false);
  ChannelBuffer buff=ChannelBuffers.buffer(100);
  buff.writeBytes(badData1.getBytes());
  String priority="<10>";
  String goodData1="Good good good data\n";
  buff.writeBytes((priority + goodData1).getBytes());
  Event e=util.extractEvent(buff);
  if (e == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers=e.getHeaders();
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),headers.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(badData1.trim(),new String(e.getBody()).trim());
  Event e2=util.extractEvent(buff);
  if (e2 == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers2=e2.getHeaders();
  Assert.assertEquals("1",headers2.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("2",headers2.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(null,headers2.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(priority + goodData1.trim(),new String(e2.getBody()).trim());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBadEventBadEvent(){
  String badData1="hi guys! <10F> bad bad data\n";
  SyslogUtils util=new SyslogUtils(false);
  ChannelBuffer buff=ChannelBuffers.buffer(100);
  buff.writeBytes(badData1.getBytes());
  String badData2="hi guys! <20> bad bad data\n";
  buff.writeBytes((badData2).getBytes());
  Event e=util.extractEvent(buff);
  if (e == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers=e.getHeaders();
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),headers.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(badData1.trim(),new String(e.getBody()).trim());
  Event e2=util.extractEvent(buff);
  if (e2 == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers2=e2.getHeaders();
  Assert.assertEquals("0",headers2.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("0",headers2.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),headers2.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(badData2.trim(),new String(e2.getBody()).trim());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGoodEventGoodEvent(){
  String priority="<10>";
  String goodData1="Good good good data\n";
  SyslogUtils util=new SyslogUtils(false);
  ChannelBuffer buff=ChannelBuffers.buffer(100);
  buff.writeBytes((priority + goodData1).getBytes());
  String priority2="<20>";
  String goodData2="Good really good data\n";
  buff.writeBytes((priority2 + goodData2).getBytes());
  Event e=util.extractEvent(buff);
  if (e == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers=e.getHeaders();
  Assert.assertEquals("1",headers.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("2",headers.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(null,headers.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(priority + goodData1.trim(),new String(e.getBody()).trim());
  Event e2=util.extractEvent(buff);
  if (e2 == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers2=e2.getHeaders();
  Assert.assertEquals("2",headers2.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("4",headers2.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(null,headers.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(priority2 + goodData2.trim(),new String(e2.getBody()).trim());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGoodEventBadEvent(){
  String badData1="hi guys! <10F> bad bad data\n";
  String priority="<10>";
  String goodData1="Good good good data\n";
  SyslogUtils util=new SyslogUtils(false);
  ChannelBuffer buff=ChannelBuffers.buffer(100);
  buff.writeBytes((priority + goodData1).getBytes());
  buff.writeBytes(badData1.getBytes());
  Event e2=util.extractEvent(buff);
  if (e2 == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers2=e2.getHeaders();
  Assert.assertEquals("1",headers2.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("2",headers2.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(null,headers2.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(priority + goodData1.trim(),new String(e2.getBody()).trim());
  Event e=util.extractEvent(buff);
  if (e == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers=e.getHeaders();
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),headers.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(badData1.trim(),new String(e.getBody()).trim());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test bad event format 4: Priority too long
 */
@Test public void testExtractBadEvent4(){
  String badData1="<123123123123123123123123123123> bad bad data\n";
  SyslogUtils util=new SyslogUtils(false);
  ChannelBuffer buff=ChannelBuffers.buffer(100);
  buff.writeBytes(badData1.getBytes());
  Event e=util.extractEvent(buff);
  if (e == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers=e.getHeaders();
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),headers.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(badData1.trim(),new String(e.getBody()).trim());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test bad event format 2: The first char is not <
 */
@Test public void testExtractBadEvent2(){
  String badData1="hi guys! <10> bad bad data\n";
  SyslogUtils util=new SyslogUtils(false);
  ChannelBuffer buff=ChannelBuffers.buffer(100);
  buff.writeBytes(badData1.getBytes());
  Event e=util.extractEvent(buff);
  if (e == null) {
    throw new NullPointerException("Event is null");
  }
  Map<String,String> headers=e.getHeaders();
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_FACILITY));
  Assert.assertEquals("0",headers.get(SyslogUtils.SYSLOG_SEVERITY));
  Assert.assertEquals(SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),headers.get(SyslogUtils.EVENT_STATUS));
  Assert.assertEquals(badData1.trim(),new String(e.getBody()).trim());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestThriftSource </h4><pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendBigBatch() throws Exception {
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  context.put("capacity","3000");
  context.put("transactionCapacity","3000");
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 5; i++) {
    List<Event> events=Lists.newArrayList();
    for (int j=0; j < 500; j++) {
      Map<String,String> hdrs=Maps.newHashMap();
      hdrs.put("time",String.valueOf(System.currentTimeMillis()));
      events.add(EventBuilder.withBody(String.valueOf(i).getBytes(),hdrs));
    }
    client.appendBatch(events);
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long after=System.currentTimeMillis();
  List<Integer> events=Lists.newArrayList();
  for (int i=0; i < 2500; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertTrue(Long.valueOf(event.getHeaders().get("time")) < after);
    events.add(Integer.parseInt(new String(event.getBody())));
  }
  transaction.commit();
  transaction.close();
  Collections.sort(events);
  int index=0;
  for (int i=0; i < 5; i++) {
    for (int j=0; j < 500; j++) {
      Assert.assertEquals(i,events.get(index++).intValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendBatch() throws Exception {
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  context.put("capacity","1000");
  context.put("transactionCapacity","1000");
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 30; i++) {
    List<Event> events=Lists.newArrayList();
    for (int j=0; j < 10; j++) {
      Map<String,String> hdrs=Maps.newHashMap();
      hdrs.put("time",String.valueOf(System.currentTimeMillis()));
      events.add(EventBuilder.withBody(String.valueOf(i).getBytes(),hdrs));
    }
    client.appendBatch(events);
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long after=System.currentTimeMillis();
  List<Integer> events=Lists.newArrayList();
  for (int i=0; i < 300; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertTrue(Long.valueOf(event.getHeaders().get("time")) <= after);
    events.add(Integer.parseInt(new String(event.getBody())));
  }
  transaction.commit();
  transaction.close();
  Collections.sort(events);
  int index=0;
  for (int i=0; i < 30; i++) {
    for (int j=0; j < 10; j++) {
      Assert.assertEquals(i,events.get(index++).intValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleClients() throws Exception {
  ExecutorService submitter=Executors.newCachedThreadPool();
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  context.put("capacity","1000");
  context.put("transactionCapacity","1000");
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  ExecutorCompletionService<Void> completionService=new ExecutorCompletionService(submitter);
  for (int i=0; i < 30; i++) {
    completionService.submit(new SubmitHelper(i),null);
  }
  for (int i=0; i < 30; i++) {
    completionService.take();
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long after=System.currentTimeMillis();
  List<Integer> events=Lists.newArrayList();
  for (int i=0; i < 300; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertTrue(Long.valueOf(event.getHeaders().get("time")) < after);
    events.add(Integer.parseInt(new String(event.getBody())));
  }
  transaction.commit();
  transaction.close();
  Collections.sort(events);
  int index=0;
  for (int i=0; i < 30; i++) {
    for (int j=0; j < 10; j++) {
      Assert.assertEquals(i,events.get(index++).intValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendSSL() throws Exception {
  Properties sslprops=(Properties)props.clone();
  sslprops.put("ssl","true");
  sslprops.put("truststore","src/test/resources/truststorefile.jks");
  sslprops.put("truststore-password","password");
  sslprops.put("trustmanager-type",TrustManagerFactory.getDefaultAlgorithm());
  client=RpcClientFactory.getThriftInstance(sslprops);
  Context context=new Context();
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  context.put("ssl","true");
  context.put("keystore","src/test/resources/keystorefile.jks");
  context.put("keystore-password","password");
  context.put("keymanager-type",KeyManagerFactory.getDefaultAlgorithm());
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 30; i++) {
    client.append(EventBuilder.withBody(String.valueOf(i).getBytes()));
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 30; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertEquals(String.valueOf(i),new String(event.getBody()));
  }
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppend() throws Exception {
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 30; i++) {
    client.append(EventBuilder.withBody(String.valueOf(i).getBytes()));
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 30; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertEquals(String.valueOf(i),new String(event.getBody()));
  }
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.avroLegacy.TestLegacyAvroSource </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifecycle() throws InterruptedException {
  boolean bound=false;
  for (int i=0; i < 100 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("port",String.valueOf(selectedPort=41414 + i));
      context.put("host","0.0.0.0");
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    ChannelException e) {
    }
  }
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequest() throws InterruptedException, IOException {
  boolean bound=false;
  int i;
  for (i=0; i < 100 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("port",String.valueOf(selectedPort=41414 + i));
      context.put("host","0.0.0.0");
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    ChannelException e) {
    }
  }
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  URL url=new URL("http","0.0.0.0",selectedPort,"/");
  Transceiver http=new HttpTransceiver(url);
  FlumeOGEventAvroServer client=SpecificRequestor.getClient(FlumeOGEventAvroServer.class,http);
  AvroFlumeOGEvent avroEvent=AvroFlumeOGEvent.newBuilder().setHost("foo").setPriority(Priority.INFO).setNanos(0).setTimestamp(1).setFields(new HashMap<CharSequence,ByteBuffer>()).setBody(ByteBuffer.wrap("foo".getBytes())).build();
  client.append(avroEvent);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Channel contained our event","foo",new String(event.getBody()));
  transaction.commit();
  transaction.close();
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.http.TestBLOBHandler </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings({"unchecked","rawtypes"}) @Test public void testCSVData() throws Exception {
  Map requestParameterMap=new HashMap();
  requestParameterMap.put("param1",new String[]{"value1"});
  requestParameterMap.put("param2",new String[]{"value2"});
  HttpServletRequest req=mock(HttpServletRequest.class);
  final String csvData="a,b,c";
  ServletInputStream servletInputStream=new DelegatingServletInputStream(new ByteArrayInputStream(csvData.getBytes()));
  when(req.getInputStream()).thenReturn(servletInputStream);
  when(req.getParameterMap()).thenReturn(requestParameterMap);
  Context context=mock(Context.class);
  when(context.getString(BLOBHandler.MANDATORY_PARAMETERS,BLOBHandler.DEFAULT_MANDATORY_PARAMETERS)).thenReturn("param1,param2");
  handler.configure(context);
  List<Event> deserialized=handler.getEvents(req);
  assertEquals(1,deserialized.size());
  Event e=deserialized.get(0);
  assertEquals(new String(e.getBody()),csvData);
  assertEquals(e.getHeaders().get("param1"),"value1");
  assertEquals(e.getHeaders().get("param2"),"value2");
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings({"unchecked","rawtypes"}) @Test public void testTabData() throws Exception {
  Map requestParameterMap=new HashMap();
  requestParameterMap.put("param1",new String[]{"value1"});
  HttpServletRequest req=mock(HttpServletRequest.class);
  final String tabData="a\tb\tc";
  ServletInputStream servletInputStream=new DelegatingServletInputStream(new ByteArrayInputStream(tabData.getBytes()));
  when(req.getInputStream()).thenReturn(servletInputStream);
  when(req.getParameterMap()).thenReturn(requestParameterMap);
  Context context=mock(Context.class);
  when(context.getString(BLOBHandler.MANDATORY_PARAMETERS,BLOBHandler.DEFAULT_MANDATORY_PARAMETERS)).thenReturn("param1");
  handler.configure(context);
  List<Event> deserialized=handler.getEvents(req);
  assertEquals(1,deserialized.size());
  Event e=deserialized.get(0);
  assertEquals(new String(e.getBody()),tabData);
  assertEquals(e.getHeaders().get("param1"),"value1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.http.TestHTTPSource </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws IOException, InterruptedException {
  StringEntity input=new StringEntity("[{\"headers\":{\"a\": \"b\"},\"body\": \"random_body\"}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"random_body2\"}]");
  input.setContentType("application/json");
  postRequest.setEntity(input);
  HttpResponse response=httpClient.execute(postRequest);
  Assert.assertEquals(HttpServletResponse.SC_OK,response.getStatusLine().getStatusCode());
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
  e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-8"));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleUTF16() throws IOException, InterruptedException {
  StringEntity input=new StringEntity("[{\"headers\":{\"a\": \"b\"},\"body\": \"random_body\"}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"random_body2\"}]","UTF-16");
  input.setContentType("application/json; charset=utf-16");
  postRequest.setEntity(input);
  HttpResponse response=httpClient.execute(postRequest);
  Assert.assertEquals(HttpServletResponse.SC_OK,response.getStatusLine().getStatusCode());
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-16"));
  e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-16"));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInvalid() throws Exception {
  StringEntity input=new StringEntity("[{\"a\": \"b\",[\"d\":\"e\"],\"body\": \"random_body\"}," + "{\"e\": \"f\",\"body\": \"random_body2\"}]");
  input.setContentType("application/json");
  postRequest.setEntity(input);
  HttpResponse response=httpClient.execute(postRequest);
  Assert.assertEquals(HttpServletResponse.SC_BAD_REQUEST,response.getStatusLine().getStatusCode());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleEvent() throws Exception {
  StringEntity input=new StringEntity("[{\"headers\" : {\"a\": \"b\"},\"body\":" + " \"random_body\"}]");
  input.setContentType("application/json");
  postRequest.setEntity(input);
  httpClient.execute(postRequest);
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.http.TestJSONHandler </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoBody() throws Exception {
  String json="[{\"headers\" : {\"a\": \"b\"}}," + "{\"headers\" : {\"e\": \"f\"},\"body\": \"random_body2\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertTrue(e.getBody().length == 0);
  e=deserialized.get(1);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeserializarion() throws Exception {
  Type listType=new TypeToken<List<JSONEvent>>(){
  }
.getType();
  List<JSONEvent> events=Lists.newArrayList();
  Random rand=new Random();
  for (int i=1; i < 10; i++) {
    Map<String,String> input=Maps.newHashMap();
    for (int j=1; j < 10; j++) {
      input.put(String.valueOf(i) + String.valueOf(j),String.valueOf(i));
    }
    JSONEvent e=new JSONEvent();
    e.setBody(String.valueOf(rand.nextGaussian()).getBytes("UTF-8"));
    e.setHeaders(input);
    events.add(e);
  }
  Gson gson=new Gson();
  List<Event> deserialized=handler.getEvents(new FlumeHttpServletRequestWrapper(gson.toJson(events,listType)));
  int i=0;
  for (  Event e : deserialized) {
    Event current=events.get(i++);
    Assert.assertEquals(new String(current.getBody(),"UTF-8"),new String(e.getBody(),"UTF-8"));
    Assert.assertEquals(current.getHeaders(),e.getHeaders());
  }
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultipleEventsUTF32() throws Exception {
  String json="[{\"headers\":{\"a\": \"b\"},\"body\": \"random_body\"}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"random_body2\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json,"UTF-32");
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-32"));
  e=deserialized.get(1);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-32"));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultipleEventsUTF8() throws Exception {
  String json="[{\"headers\":{\"a\": \"b\"},\"body\": \"random_body\"}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"random_body2\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json,"UTF-8");
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
  e=deserialized.get(1);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingleEvent() throws Exception {
  String json="[{\"headers\" : {\"a\": \"b\"},\"body\": \"random_body\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingleEventInArray() throws Exception {
  String json="[{\"headers\": {\"a\": \"b\"},\"body\": \"random_body\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEscapedJSON() throws Exception {
  String json="[{\"headers\":{\"a\": \"b\"}}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"rand\\\"om_body2\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertTrue(e.getBody().length == 0);
  e=deserialized.get(1);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("rand\"om_body2",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultipleEvents() throws Exception {
  String json="[{\"headers\":{\"a\": \"b\"},\"body\": \"random_body\"}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"random_body2\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
  e=deserialized.get(1);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingleHTMLEvent() throws Exception {
  String json="[{\"headers\": {\"a\": \"b\"}," + "\"body\": \"<html><body>test</body></html>\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("<html><body>test</body></html>",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultipleEventsUTF16() throws Exception {
  String json="[{\"headers\":{\"a\": \"b\"},\"body\": \"random_body\"}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"random_body2\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json,"UTF-16");
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-16"));
  e=deserialized.get(1);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-16"));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleLargeEvents() throws Exception {
  String json="[{\"headers\" : {\"a\": \"b\", \"a2\": \"b2\"," + "\"a3\": \"b3\",\"a4\": \"b4\"},\"body\": \"random_body\"}," + "{\"headers\" :{\"e\": \"f\",\"e2\": \"f2\","+ "\"e3\": \"f3\",\"e4\": \"f4\",\"e5\": \"f5\"},"+ "\"body\": \"random_body2\"},"+ "{\"headers\" :{\"q1\": \"b\",\"q2\": \"b2\",\"q3\": \"b3\",\"q4\": \"b4\"},"+ "\"body\": \"random_bodyq\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("b2",e.getHeaders().get("a2"));
  Assert.assertEquals("b3",e.getHeaders().get("a3"));
  Assert.assertEquals("b4",e.getHeaders().get("a4"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
  e=deserialized.get(1);
  Assert.assertNotNull(e);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("f2",e.getHeaders().get("e2"));
  Assert.assertEquals("f3",e.getHeaders().get("e3"));
  Assert.assertEquals("f4",e.getHeaders().get("e4"));
  Assert.assertEquals("f5",e.getHeaders().get("e5"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-8"));
  e=deserialized.get(2);
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("q1"));
  Assert.assertEquals("b2",e.getHeaders().get("q2"));
  Assert.assertEquals("b3",e.getHeaders().get("q3"));
  Assert.assertEquals("b4",e.getHeaders().get("q4"));
  Assert.assertEquals("random_bodyq",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.jms.TestDefaultJMSMessageConverter </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoHeaders() throws Exception {
  createTextMessage();
  createHeaders();
  Event event=converter.convert(message).iterator().next();
  assertEquals(Collections.EMPTY_MAP,event.getHeaders());
  assertEquals(TEXT,new String(event.getBody(),Charsets.UTF_8));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTextMessage() throws Exception {
  createTextMessage();
  headers.put("key1","value1");
  headers.put("key2","value2");
  createHeaders();
  Event event=converter.convert(message).iterator().next();
  assertEquals(headers,event.getHeaders());
  assertEquals(TEXT,new String(event.getBody(),Charsets.UTF_8));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBytesMessage() throws Exception {
  createBytesMessage();
  headers.put("key1","value1");
  headers.put("key2","value2");
  createHeaders();
  Event event=converter.convert(message).iterator().next();
  assertEquals(headers,event.getHeaders());
  assertArrayEquals(BYTES,event.getBody());
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testObjectMessage() throws Exception {
  createObjectMessage();
  headers.put("key1","value1");
  headers.put("key2","value2");
  createHeaders();
  Event event=converter.convert(message).iterator().next();
  assertEquals(headers,event.getHeaders());
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  ObjectOutput out=new ObjectOutputStream(bos);
  out.writeObject(TEXT);
  assertArrayEquals(bos.toByteArray(),event.getBody());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.jms.TestIntegrationActiveMQ </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTopic() throws Exception {
  context.put(JMSSourceConfiguration.DESTINATION_TYPE,JMSSourceConfiguration.DESTINATION_TYPE_TOPIC);
  source.configure(context);
  source.start();
  Thread.sleep(500L);
  List<String> expected=Lists.newArrayList();
  for (int i=0; i < 10; i++) {
    expected.add(String.valueOf(i));
  }
  putTopic(expected);
  Thread.sleep(500L);
  Assert.assertEquals(Status.READY,source.process());
  Assert.assertEquals(Status.BACKOFF,source.process());
  Assert.assertEquals(expected.size(),events.size());
  List<String> actual=Lists.newArrayList();
  for (  Event event : events) {
    actual.add(new String(event.getBody(),Charsets.UTF_8));
  }
  Collections.sort(expected);
  Collections.sort(actual);
  Assert.assertEquals(expected,actual);
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQueue() throws Exception {
  context.put(JMSSourceConfiguration.DESTINATION_TYPE,JMSSourceConfiguration.DESTINATION_TYPE_QUEUE);
  source.configure(context);
  source.start();
  Thread.sleep(500L);
  List<String> expected=Lists.newArrayList();
  for (int i=0; i < 10; i++) {
    expected.add(String.valueOf(i));
  }
  putQueue(expected);
  Thread.sleep(500L);
  Assert.assertEquals(Status.READY,source.process());
  Assert.assertEquals(Status.BACKOFF,source.process());
  Assert.assertEquals(expected.size(),events.size());
  List<String> actual=Lists.newArrayList();
  for (  Event event : events) {
    actual.add(new String(event.getBody(),Charsets.UTF_8));
  }
  Collections.sort(expected);
  Collections.sort(actual);
  Assert.assertEquals(expected,actual);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.jms.TestJMSSource </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProcessPartialBatch() throws Exception {
  when(messageConsumer.receiveNoWait()).thenReturn(message,(Message)null);
  source.configure(context);
  source.start();
  Assert.assertEquals(Status.READY,source.process());
  Assert.assertEquals(2,events.size());
  assertBodyIsExpected(events);
  verify(consumer).commit();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProcessReconnect() throws Exception {
  source.configure(context);
  source.start();
  when(consumer.take()).thenThrow(new JMSException("dummy"));
  int attempts=JMSSourceConfiguration.ERROR_THRESHOLD_DEFAULT;
  for (int i=0; i < attempts; i++) {
    Assert.assertEquals(Status.BACKOFF,source.process());
  }
  Assert.assertEquals(Status.BACKOFF,source.process());
  verify(consumer,times(attempts + 1)).rollback();
  verify(consumer,times(1)).close();
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonDefaultConverter() throws Exception {
  context.put(JMSSourceConfiguration.CONVERTER_TYPE,DefaultJMSMessageConverter.Builder.class.getName());
  source.configure(context);
  source.start();
  Assert.assertEquals(Status.READY,source.process());
  Assert.assertEquals(batchSize,events.size());
  assertBodyIsExpected(events);
  verify(consumer).commit();
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConfigureWithUserNameAndPasswordFile() throws Exception {
  context.put(JMSSourceConfiguration.USERNAME,"dummy");
  context.put(JMSSourceConfiguration.PASSWORD_FILE,passwordFile.getAbsolutePath());
  source.configure(context);
  source.start();
  Assert.assertEquals(Status.READY,source.process());
  Assert.assertEquals(batchSize,events.size());
  assertBodyIsExpected(events);
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testProcessChannelProcessorThrowsChannelException() throws Exception {
  doThrow(new ChannelException("dummy")).when(channelProcessor).processEventBatch(any(List.class));
  source.configure(context);
  source.start();
  Assert.assertEquals(Status.BACKOFF,source.process());
  verify(consumer).rollback();
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonBuilderConfigurableConverter() throws Exception {
  context.put(JMSSourceConfiguration.CONVERTER_TYPE,NonBuilderConfigurableConverter.class.getName());
  source.configure(context);
  source.start();
  Assert.assertEquals(Status.READY,source.process());
  Assert.assertEquals(batchSize,events.size());
  assertBodyIsExpected(events);
  verify(consumer).commit();
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProcessFullBatch() throws Exception {
  source.configure(context);
  source.start();
  Assert.assertEquals(Status.READY,source.process());
  Assert.assertEquals(batchSize,events.size());
  assertBodyIsExpected(events);
  verify(consumer).commit();
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProcessNoEvents() throws Exception {
  when(messageConsumer.receive(anyLong())).thenReturn(null);
  source.configure(context);
  source.start();
  Assert.assertEquals(Status.BACKOFF,source.process());
  Assert.assertEquals(0,events.size());
  verify(consumer).commit();
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonBuilderNonConfigurableConverter() throws Exception {
  context.put(JMSSourceConfiguration.CONVERTER_TYPE,NonBuilderNonConfigurableConverter.class.getName());
  source.configure(context);
  source.start();
  Assert.assertEquals(Status.READY,source.process());
  Assert.assertEquals(batchSize,events.size());
  assertBodyIsExpected(events);
  verify(consumer).commit();
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConfigureWithUserNameButNoPasswordFile() throws Exception {
  context.put(JMSSourceConfiguration.USERNAME,"dummy");
  source.configure(context);
  source.start();
  Assert.assertEquals(Status.READY,source.process());
  Assert.assertEquals(batchSize,events.size());
  assertBodyIsExpected(events);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.kafka.TestKafkaSource </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testNonExistingTopic() throws EventDeliveryException, SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException, InterruptedException {
  context.put(KafkaSourceConstants.TOPIC,"faketopic");
  kafkaSource.configure(context);
  kafkaSource.start();
  Thread.sleep(500L);
  Status status=kafkaSource.process();
  assertEquals(Status.BACKOFF,status);
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testNullKey() throws EventDeliveryException, SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException, InterruptedException {
  context.put(KafkaSourceConstants.BATCH_SIZE,"1");
  kafkaSource.configure(context);
  kafkaSource.start();
  Thread.sleep(500L);
  kafkaServer.produce(topicName,null,"hello, world");
  Thread.sleep(500L);
  Assert.assertEquals(Status.READY,kafkaSource.process());
  Assert.assertEquals(Status.BACKOFF,kafkaSource.process());
  Assert.assertEquals(1,events.size());
  Assert.assertEquals("hello, world",new String(events.get(0).getBody(),Charsets.UTF_8));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testProcessItNotEmptyBatch() throws EventDeliveryException, SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException, InterruptedException {
  context.put(KafkaSourceConstants.BATCH_SIZE,"2");
  kafkaSource.configure(context);
  kafkaSource.start();
  Thread.sleep(500L);
  kafkaServer.produce(topicName,"","hello, world");
  kafkaServer.produce(topicName,"","foo, bar");
  Thread.sleep(500L);
  Status status=kafkaSource.process();
  assertEquals(Status.READY,status);
  Assert.assertEquals("hello, world",new String(events.get(0).getBody(),Charsets.UTF_8));
  Assert.assertEquals("foo, bar",new String(events.get(1).getBody(),Charsets.UTF_8));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonCommit() throws EventDeliveryException, InterruptedException {
  context.put(KafkaSourceConstants.BATCH_SIZE,"1");
  context.put(KafkaSourceConstants.BATCH_DURATION_MS,"30000");
  kafkaSource.configure(context);
  kafkaSource.start();
  Thread.sleep(500L);
  kafkaServer.produce(topicName,"","hello, world");
  Thread.sleep(500L);
  kafkaSource.setChannelProcessor(createBadChannel());
  log.debug("processing from kafka to bad channel");
  Assert.assertEquals(Status.BACKOFF,kafkaSource.process());
  log.debug("repairing channel");
  kafkaSource.setChannelProcessor(createGoodChannel());
  log.debug("re-process to good channel - this should work");
  kafkaSource.process();
  Assert.assertEquals("hello, world",new String(events.get(0).getBody(),Charsets.UTF_8));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchTime() throws InterruptedException, EventDeliveryException {
  context.put(KafkaSourceConstants.BATCH_DURATION_MS,"250");
  kafkaSource.configure(context);
  kafkaSource.start();
  Thread.sleep(500L);
  for (int i=1; i < 5000; i++) {
    kafkaServer.produce(topicName,"","hello, world " + i);
  }
  Thread.sleep(500L);
  long startTime=System.currentTimeMillis();
  Status status=kafkaSource.process();
  long endTime=System.currentTimeMillis();
  assertEquals(Status.READY,status);
  assertTrue(endTime - startTime < (context.getLong(KafkaSourceConstants.BATCH_DURATION_MS) + context.getLong("kafka.consumer.timeout.ms")));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testProcessItEmpty() throws EventDeliveryException, SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException, InterruptedException {
  kafkaSource.configure(context);
  kafkaSource.start();
  Thread.sleep(500L);
  Status status=kafkaSource.process();
  assertEquals(Status.BACKOFF,status);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test(expected=FlumeException.class) public void testNonExistingZk() throws EventDeliveryException, SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException, InterruptedException {
  context.put(KafkaSourceConstants.ZOOKEEPER_CONNECT_FLUME,"blabla:666");
  kafkaSource.configure(context);
  kafkaSource.start();
  Thread.sleep(500L);
  Status status=kafkaSource.process();
  assertEquals(Status.BACKOFF,status);
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testProcessItNotEmpty() throws EventDeliveryException, SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException, InterruptedException {
  context.put(KafkaSourceConstants.BATCH_SIZE,"1");
  kafkaSource.configure(context);
  kafkaSource.start();
  Thread.sleep(500L);
  kafkaServer.produce(topicName,"","hello, world");
  Thread.sleep(500L);
  Assert.assertEquals(Status.READY,kafkaSource.process());
  Assert.assertEquals(Status.BACKOFF,kafkaSource.process());
  Assert.assertEquals(1,events.size());
  Assert.assertEquals("hello, world",new String(events.get(0).getBody(),Charsets.UTF_8));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommit() throws InterruptedException, EventDeliveryException {
  context.put(KafkaSourceConstants.BATCH_SIZE,"1");
  kafkaSource.configure(context);
  kafkaSource.start();
  Thread.sleep(500L);
  kafkaServer.produce(topicName,"","hello, world");
  Thread.sleep(500L);
  Assert.assertEquals(Status.READY,kafkaSource.process());
  kafkaSource.stop();
  Thread.sleep(500L);
  kafkaSource.start();
  Thread.sleep(500L);
  Assert.assertEquals(Status.BACKOFF,kafkaSource.process());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.kafka.TestKafkaSourceUtil </h4><pre class="type-9 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testKafkaConsumerProperties(){
  Context context=new Context();
  context.put("kafka.auto.commit.enable","override.default.autocommit");
  context.put("kafka.fake.property","kafka.property.value");
  context.put("kafka.zookeeper.connect","bad-zookeeper-list");
  context.put("zookeeperConnect","real-zookeeper-list");
  Properties kafkaProps=KafkaSourceUtil.getKafkaProperties(context);
  assertEquals(kafkaProps.getProperty(KafkaSourceConstants.GROUP_ID),KafkaSourceConstants.DEFAULT_GROUP_ID);
  assertEquals(kafkaProps.getProperty(KafkaSourceConstants.AUTO_COMMIT_ENABLED),"override.default.autocommit");
  assertEquals(kafkaProps.getProperty("fake.property"),"kafka.property.value");
  assertEquals(kafkaProps.getProperty("zookeeper.connect"),"real-zookeeper-list");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.scribe.TestScribeSource </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScribeMessage() throws Exception {
  TTransport transport=new TFramedTransport(new TSocket("localhost",port));
  TProtocol protocol=new TBinaryProtocol(transport);
  Scribe.Client client=new Scribe.Client(protocol);
  transport.open();
  LogEntry logEntry=new LogEntry("INFO","Sending info msg to scribe source");
  List<LogEntry> logEntries=new ArrayList<LogEntry>(1);
  logEntries.add(logEntry);
  client.Log(logEntries);
  Transaction tx=memoryChannel.getTransaction();
  tx.begin();
  Event e=memoryChannel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("Sending info msg to scribe source",new String(e.getBody()));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScribeMultipleMessages() throws Exception {
  TTransport transport=new TFramedTransport(new TSocket("localhost",port));
  TProtocol protocol=new TBinaryProtocol(transport);
  Scribe.Client client=new Scribe.Client(protocol);
  transport.open();
  List<LogEntry> logEntries=new ArrayList<LogEntry>(10);
  for (int i=0; i < 10; i++) {
    LogEntry logEntry=new LogEntry("INFO",String.format("Sending info msg# %d to scribe source",i));
    logEntries.add(logEntry);
  }
  client.Log(logEntries);
  Transaction tx=memoryChannel.getTransaction();
  tx.begin();
  for (int i=0; i < 10; i++) {
    Event e=memoryChannel.take();
    Assert.assertNotNull(e);
    Assert.assertEquals(String.format("Sending info msg# %d to scribe source",i),new String(e.getBody()));
  }
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.taildir.TestTaildirEventReader </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicCommitFailure() throws IOException {
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n" + "file1line9\nfile1line10\nfile1line11\nfile1line12\n",f1,Charsets.UTF_8);
  ReliableTaildirEventReader reader=getReader();
  List<String> out1=null;
  for (  TailFile tf : reader.getTailFiles().values()) {
    out1=bodiesAsStrings(reader.readEvents(tf,4));
  }
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  List<String> out2=bodiesAsStrings(reader.readEvents(4));
  assertTrue(out2.contains("file1line1"));
  assertTrue(out2.contains("file1line2"));
  assertTrue(out2.contains("file1line3"));
  assertTrue(out2.contains("file1line4"));
  reader.commit();
  List<String> out3=bodiesAsStrings(reader.readEvents(4));
  assertTrue(out3.contains("file1line5"));
  assertTrue(out3.contains("file1line6"));
  assertTrue(out3.contains("file1line7"));
  assertTrue(out3.contains("file1line8"));
  reader.commit();
  List<String> out4=bodiesAsStrings(reader.readEvents(4));
  assertEquals(4,out4.size());
  assertTrue(out4.contains("file1line9"));
  assertTrue(out4.contains("file1line10"));
  assertTrue(out4.contains("file1line11"));
  assertTrue(out4.contains("file1line12"));
}

</code></pre>

<br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBasicCommitFailureAndBatchSizeChanges() throws IOException {
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  ReliableTaildirEventReader reader=getReader();
  List<String> out1=null;
  for (  TailFile tf : reader.getTailFiles().values()) {
    out1=bodiesAsStrings(reader.readEvents(tf,5));
  }
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  assertTrue(out1.contains("file1line5"));
  List<String> out2=bodiesAsStrings(reader.readEvents(2));
  assertTrue(out2.contains("file1line1"));
  assertTrue(out2.contains("file1line2"));
  reader.commit();
  List<String> out3=bodiesAsStrings(reader.readEvents(2));
  assertTrue(out3.contains("file1line3"));
  assertTrue(out3.contains("file1line4"));
  reader.commit();
  List<String> out4=bodiesAsStrings(reader.readEvents(15));
  assertTrue(out4.contains("file1line5"));
  assertTrue(out4.contains("file1line6"));
  assertTrue(out4.contains("file1line7"));
  assertTrue(out4.contains("file1line8"));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testByteOffsetHeader() throws IOException {
  File f1=new File(tmpDir,"file1");
  String line1="file1line1\n";
  String line2="file1line2\n";
  String line3="file1line3\n";
  Files.write(line1 + line2 + line3,f1,Charsets.UTF_8);
  ReliableTaildirEventReader reader=getReader(true);
  List<String> headers=null;
  for (  TailFile tf : reader.getTailFiles().values()) {
    headers=headersAsStrings(reader.readEvents(tf,5),BYTE_OFFSET_HEADER_KEY);
    reader.commit();
  }
  assertEquals(3,headers.size());
  assertTrue(headers.contains(String.valueOf(0)));
  assertTrue(headers.contains(String.valueOf(line1.length())));
  assertTrue(headers.contains(String.valueOf((line1 + line2).length())));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitiallyEmptyDirAndBehaviorAfterReadingAll() throws IOException {
  ReliableTaildirEventReader reader=getReader();
  List<Long> fileInodes=reader.updateTailFiles();
  assertEquals(0,fileInodes.size());
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  reader.updateTailFiles();
  List<String> out=null;
  for (  TailFile tf : reader.getTailFiles().values()) {
    out=bodiesAsStrings(reader.readEvents(tf,2));
    reader.commit();
  }
  assertEquals(2,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  reader.updateTailFiles();
  List<String> empty=null;
  for (  TailFile tf : reader.getTailFiles().values()) {
    empty=bodiesAsStrings(reader.readEvents(tf,15));
    reader.commit();
  }
  assertEquals(0,empty.size());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSkipToEndPosition() throws IOException {
  ReliableTaildirEventReader reader=getReader();
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  reader.updateTailFiles();
  for (  TailFile tf : reader.getTailFiles().values()) {
    if (tf.getPath().equals(tmpDir + "file1")) {
      assertEquals(0,tf.getPos());
    }
  }
  File f2=new File(tmpDir,"file2");
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  reader.updateTailFiles(true);
  for (  TailFile tf : reader.getTailFiles().values()) {
    if (tf.getPath().equals(tmpDir + "file2")) {
      assertEquals(f2.length(),tf.getPos());
    }
  }
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIncludeEmptyFile() throws IOException {
  File f1=new File(tmpDir,"file1");
  File f2=new File(tmpDir,"file2");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Files.touch(f2);
  ReliableTaildirEventReader reader=getReader();
  List<String> out=Lists.newArrayList();
  for (  TailFile tf : reader.getTailFiles().values()) {
    out.addAll(bodiesAsStrings(reader.readEvents(tf,5)));
    reader.commit();
  }
  assertEquals(2,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertNull(reader.readEvent());
}

</code></pre>

<br>
<pre class="type-9 type-13 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLoadPositionFile() throws IOException {
  File f1=new File(tmpDir,"file1");
  File f2=new File(tmpDir,"file2");
  File f3=new File(tmpDir,"file3");
  Files.write("file1line1\nfile1line2\nfile1line3\n",f1,Charsets.UTF_8);
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  Files.write("file3line1\n",f3,Charsets.UTF_8);
  ReliableTaildirEventReader reader=getReader();
  Map<Long,TailFile> tailFiles=reader.getTailFiles();
  long pos=f2.length();
  int i=1;
  File posFile=new File(posFilePath);
  for (  TailFile tf : tailFiles.values()) {
    Files.append(i == 1 ? "[" : "",posFile,Charsets.UTF_8);
    Files.append(String.format("{\"inode\":%s,\"pos\":%s,\"file\":\"%s\"}",tf.getInode(),pos,tf.getPath()),posFile,Charsets.UTF_8);
    Files.append(i == 3 ? "]" : ",",posFile,Charsets.UTF_8);
    i++;
  }
  reader.loadPositionFile(posFilePath);
  for (  TailFile tf : tailFiles.values()) {
    if (tf.getPath().equals(tmpDir + "file3")) {
      assertEquals(0,tf.getPos());
    }
 else {
      assertEquals(pos,tf.getPos());
    }
  }
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchedReadsAcrossFileBoundary() throws IOException {
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  ReliableTaildirEventReader reader=getReader();
  List<String> out1=Lists.newArrayList();
  for (  TailFile tf : reader.getTailFiles().values()) {
    out1.addAll(bodiesAsStrings(reader.readEvents(tf,5)));
    reader.commit();
  }
  File f2=new File(tmpDir,"file2");
  Files.write("file2line1\nfile2line2\nfile2line3\nfile2line4\n" + "file2line5\nfile2line6\nfile2line7\nfile2line8\n",f2,Charsets.UTF_8);
  List<String> out2=bodiesAsStrings(reader.readEvents(5));
  reader.commit();
  reader.updateTailFiles();
  List<String> out3=Lists.newArrayList();
  for (  TailFile tf : reader.getTailFiles().values()) {
    out3.addAll(bodiesAsStrings(reader.readEvents(tf,5)));
    reader.commit();
  }
  assertEquals(5,out1.size());
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  assertTrue(out1.contains("file1line5"));
  assertEquals(3,out2.size());
  assertTrue(out2.contains("file1line6"));
  assertTrue(out2.contains("file1line7"));
  assertTrue(out2.contains("file1line8"));
  assertEquals(5,out3.size());
  assertTrue(out3.contains("file2line1"));
  assertTrue(out3.contains("file2line2"));
  assertTrue(out3.contains("file2line3"));
  assertTrue(out3.contains("file2line4"));
  assertTrue(out3.contains("file2line5"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.taildir.TestTaildirSource </h4><pre class="type-12 type-13 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeaderMapping() throws IOException {
  File f1=new File(tmpDir,"file1");
  File f2=new File(tmpDir,"file2");
  File f3=new File(tmpDir,"file3");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  Files.write("file3line1\nfile3line2\n",f3,Charsets.UTF_8);
  Context context=new Context();
  context.put(POSITION_FILE,posFilePath);
  context.put(FILE_GROUPS,"f1 f2 f3");
  context.put(FILE_GROUPS_PREFIX + "f1",tmpDir.getAbsolutePath() + "/file1$");
  context.put(FILE_GROUPS_PREFIX + "f2",tmpDir.getAbsolutePath() + "/file2$");
  context.put(FILE_GROUPS_PREFIX + "f3",tmpDir.getAbsolutePath() + "/file3$");
  context.put(HEADERS_PREFIX + "f1.headerKeyTest","value1");
  context.put(HEADERS_PREFIX + "f2.headerKeyTest","value2");
  context.put(HEADERS_PREFIX + "f2.headerKeyTest2","value2-2");
  Configurables.configure(source,context);
  source.start();
  source.process();
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int i=0; i < 6; i++) {
    Event e=channel.take();
    String body=new String(e.getBody(),Charsets.UTF_8);
    String headerValue=e.getHeaders().get("headerKeyTest");
    String headerValue2=e.getHeaders().get("headerKeyTest2");
    if (body.startsWith("file1")) {
      assertEquals("value1",headerValue);
      assertNull(headerValue2);
    }
 else     if (body.startsWith("file2")) {
      assertEquals("value2",headerValue);
      assertEquals("value2-2",headerValue2);
    }
 else     if (body.startsWith("file3")) {
      assertNull(headerValue);
      assertNull(headerValue2);
    }
  }
  txn.commit();
  txn.close();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifecycle() throws IOException, InterruptedException {
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Context context=new Context();
  context.put(POSITION_FILE,posFilePath);
  context.put(FILE_GROUPS,"f1");
  context.put(FILE_GROUPS_PREFIX + "f1",tmpDir.getAbsolutePath() + "/file1$");
  Configurables.configure(source,context);
  for (int i=0; i < 3; i++) {
    source.start();
    source.process();
    assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
    assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
    source.stop();
    assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
    assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.thriftLegacy.TestThriftLegacySource </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeaders() throws InterruptedException, IOException {
  bind();
  Map flumeHeaders=new HashMap<CharSequence,ByteBuffer>();
  flumeHeaders.put("hello",ByteBuffer.wrap("world".getBytes("UTF-8")));
  ThriftFlumeEvent thriftEvent=new ThriftFlumeEvent(1,Priority.INFO,ByteBuffer.wrap("foo".getBytes()),0,"fooHost",flumeHeaders);
  FlumeClient fClient=new FlumeClient("0.0.0.0",selectedPort);
  fClient.append(thriftEvent);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Event in channel has our header","world",event.getHeaders().get("hello"));
  transaction.commit();
  transaction.close();
  stop();
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequest() throws InterruptedException, IOException {
  bind();
  Map flumeMap=new HashMap<CharSequence,ByteBuffer>();
  ThriftFlumeEvent thriftEvent=new ThriftFlumeEvent(1,Priority.INFO,ByteBuffer.wrap("foo".getBytes()),0,"fooHost",flumeMap);
  FlumeClient fClient=new FlumeClient("0.0.0.0",selectedPort);
  fClient.append(thriftEvent);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Channel contained our event","foo",new String(event.getBody()));
  transaction.commit();
  transaction.close();
  stop();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
