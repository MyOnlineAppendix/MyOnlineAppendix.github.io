<h3><span class=" glyphicon glyphicon-tag"/>&nbspExecutionTester</h3><kbd>Executes methods or other tests from the same test unit</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.flume.agent.embedded.TestEmbeddedAgentConfiguration </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testSinkNamedLikeProcessor() throws Exception {
  properties.put("sinks","processor");
  EmbeddedAgentConfiguration.configure("test1",properties);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShortSourceType() throws Exception {
  properties.put("source.type","EMBEDDED");
  doTestExcepted(EmbeddedAgentConfiguration.configure("test1",properties));
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testBadSource() throws Exception {
  properties.put("source.type","exec");
  EmbeddedAgentConfiguration.configure("test1",properties);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testBadSinkProcessor() throws Exception {
  properties.put("processor.type","bad");
  EmbeddedAgentConfiguration.configure("test1",properties);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFullSourceType() throws Exception {
  doTestExcepted(EmbeddedAgentConfiguration.configure("test1",properties));
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testSinkNamedLikeSource() throws Exception {
  properties.put("sinks","source");
  EmbeddedAgentConfiguration.configure("test1",properties);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testBadKey() throws Exception {
  properties.put("bad.key.name","bad");
  EmbeddedAgentConfiguration.configure("test1",properties);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testNoChannel() throws Exception {
  properties.remove("channel.type");
  EmbeddedAgentConfiguration.configure("test1",properties);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testSinkNamedLikeChannel() throws Exception {
  properties.put("sinks","channel");
  EmbeddedAgentConfiguration.configure("test1",properties);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testNoSinkProcessor() throws Exception {
  properties.remove("processor.type");
  EmbeddedAgentConfiguration.configure("test1",properties);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testBadChannel() throws Exception {
  properties.put("channel.type","jdbc");
  EmbeddedAgentConfiguration.configure("test1",properties);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testNoSink() throws Exception {
  properties.remove("sink2.type");
  EmbeddedAgentConfiguration.configure("test1",properties);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testBadSink() throws Exception {
  properties.put("sink1.type","hbase");
  EmbeddedAgentConfiguration.configure("test1",properties);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.agent.embedded.TestEmbeddedAgentEmbeddedSource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPut() throws EventDeliveryException {
  Event event=new SimpleEvent();
  agent.configure(properties);
  agent.start();
  agent.put(event);
  verify(source,times(1)).put(event);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStop(){
  agent.configure(properties);
  agent.start();
  agent.stop();
  verify(sourceRunner,times(1)).stop();
  verify(channel,times(1)).stop();
  verify(sinkRunner,times(1)).stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartSourceThrowsException(){
  doThrow(new LocalRuntimeException()).when(sourceRunner).start();
  startExpectingLocalRuntimeException();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testPutAllNotStarted() throws EventDeliveryException {
  Event event=new SimpleEvent();
  List<Event> events=Lists.newArrayList();
  events.add(event);
  agent.configure(properties);
  agent.putAll(events);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStart(){
  agent.configure(properties);
  agent.start();
  verify(sourceRunner,times(1)).start();
  verify(channel,times(1)).start();
  verify(sinkRunner,times(1)).start();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartChannelThrowsException(){
  doThrow(new LocalRuntimeException()).when(channel).start();
  startExpectingLocalRuntimeException();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testPutNotStarted() throws EventDeliveryException {
  Event event=new SimpleEvent();
  agent.configure(properties);
  agent.put(event);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPutAll() throws EventDeliveryException {
  Event event=new SimpleEvent();
  List<Event> events=Lists.newArrayList();
  events.add(event);
  agent.configure(properties);
  agent.start();
  agent.putAll(events);
  verify(source,times(1)).putAll(events);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartSinkThrowsException(){
  doThrow(new LocalRuntimeException()).when(sinkRunner).start();
  startExpectingLocalRuntimeException();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.agent.embedded.TestEmbeddedAgentState </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testStopAfterConfigure(){
  try {
    agent.configure(properties);
  }
 catch (  Exception e) {
    Throwables.propagate(e);
  }
  agent.stop();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testConfigureWhileStarted(){
  try {
    agent.configure(properties);
    agent.start();
  }
 catch (  Exception e) {
    Throwables.propagate(e);
  }
  agent.configure(properties);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testStartWhileStarted(){
  try {
    agent.configure(properties);
    agent.start();
  }
 catch (  Exception e) {
    Throwables.propagate(e);
  }
  agent.start();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testStoppedWhileStopped(){
  try {
    agent.configure(properties);
  }
 catch (  Exception e) {
    Throwables.propagate(e);
  }
  agent.stop();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testStopAfterStop(){
  try {
    agent.configure(properties);
    agent.start();
    agent.stop();
  }
 catch (  Exception e) {
    Throwables.propagate(e);
  }
  agent.stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConfigureMultipleTimes(){
  agent.configure(properties);
  agent.configure(properties);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testConfigureWithBadSourceType(){
  properties.put(EmbeddedAgentConfiguration.SOURCE_TYPE,"bad");
  agent.configure(properties);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testStartUnconfigured(){
  agent.start();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testStopBeforeConfigure(){
  agent.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestFailoverRpcClient </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Try writing to some servers and then kill them all.
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test(expected=EventDeliveryException.class) public void testFailedServers() throws FlumeException, EventDeliveryException {
  FailoverRpcClient client=null;
  Server server1=RpcTestUtils.startServer(new OKAvroHandler());
  Server server2=RpcTestUtils.startServer(new OKAvroHandler());
  Server server3=RpcTestUtils.startServer(new OKAvroHandler());
  Properties props=new Properties();
  props.put("client.type","default_failover");
  props.put("hosts","host1 host2 host3");
  props.put("hosts.host1","localhost:" + String.valueOf(server1.getPort()));
  props.put("hosts.host2","localhost:" + String.valueOf(server2.getPort()));
  props.put("hosts.host3"," localhost:" + String.valueOf(server3.getPort()));
  client=(FailoverRpcClient)RpcClientFactory.getInstance(props);
  List<Event> events=new ArrayList<Event>();
  for (int i=0; i < 50; i++) {
    events.add(EventBuilder.withBody("evt: " + i,Charset.forName("UTF8")));
  }
  client.appendBatch(events);
  server1.close();
  server2.close();
  server3.close();
  events=new ArrayList<Event>();
  for (int i=0; i < 50; i++) {
    events.add(EventBuilder.withBody("evt: " + i,Charset.forName("UTF8")));
  }
  client.appendBatch(events);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestLoadBalancingRpcClient </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testCreatingLbClientSingleHost(){
  Server server1=null;
  RpcClient c=null;
  try {
    server1=RpcTestUtils.startServer(new OKAvroHandler());
    Properties p=new Properties();
    p.put("host1","127.0.0.1:" + server1.getPort());
    p.put("hosts","host1");
    p.put("client.type","default_loadbalance");
    RpcClientFactory.getInstance(p);
  }
  finally {
    if (server1 != null)     server1.close();
    if (c != null)     c.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestNettyAvroRpcClient </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple batch request
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test public void testOKServerBatch() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerBatchAppendTest(new OKAvroHandler());
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple request with compression on the client only
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test(expected=org.apache.flume.EventDeliveryException.class) public void testOKServerSimpleCompressionClientOnly() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerSimpleAppendTest(new OKAvroHandler(),false,true,6);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple request with compression on the server and client with compression level 0
 * Compression level 0 = no compression
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test public void testOKServerSimpleCompressionLevel0() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerSimpleAppendTest(new OKAvroHandler(),true,true,0);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple request
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test public void testOKServerSimple() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerSimpleAppendTest(new OKAvroHandler());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * configure the NettyAvroRpcClient with a non-default
 * NioClientSocketChannelFactory number of io worker threads
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test public void testAppendWithMaxIOWorkers() throws FlumeException, EventDeliveryException {
  NettyAvroRpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  Properties props=new Properties();
  props.setProperty(RpcClientConfigurationConstants.CONFIG_HOSTS,"localhost");
  props.setProperty(RpcClientConfigurationConstants.CONFIG_HOSTS_PREFIX + "localhost",localhost + ":" + server.getPort());
  props.setProperty(RpcClientConfigurationConstants.MAX_IO_WORKERS,Integer.toString(2));
  try {
    client=new NettyAvroRpcClient();
    client.configure(props);
    for (int i=0; i < 5; i++) {
      client.append(EventBuilder.withBody("evt:" + i,Charset.forName("UTF8")));
    }
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null) {
      client.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple batch request with compression deflate level 0
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test public void testOKServerBatchCompressionLevel0() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerBatchAppendTest(new OKAvroHandler(),true,true,0);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple request with compression on the server only
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test(expected=org.apache.flume.EventDeliveryException.class) public void testOKServerSimpleCompressionServerOnly() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerSimpleAppendTest(new OKAvroHandler(),true,false,6);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Send a batch of events to a server that always throws exceptions.
 */
@Test(expected=EventDeliveryException.class) public void testThrowingServerBatch() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerBatchAppendTest(new ThrowingAvroHandler());
  logger.error("Throwing: I should never have gotten here!");
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple batch request where the client only is using compression
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test(expected=org.apache.flume.EventDeliveryException.class) public void testOKServerBatchCompressionClientOnly() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerBatchAppendTest(new OKAvroHandler(),false,true,6);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Send an event to an online server that returns UNKNOWN.
 */
@Test(expected=EventDeliveryException.class) public void testUnknownServerSimple() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerSimpleAppendTest(new UnknownAvroHandler());
  logger.error("Unknown: I should never have gotten here!");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Send too many events at once. Should handle this case gracefully.
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test public void testBatchOverrun() throws FlumeException, EventDeliveryException {
  int batchSize=10;
  int moreThanBatchSize=batchSize + 1;
  NettyAvroRpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  Properties props=new Properties();
  props.setProperty(RpcClientConfigurationConstants.CONFIG_HOSTS,"localhost");
  props.setProperty(RpcClientConfigurationConstants.CONFIG_HOSTS_PREFIX + "localhost",localhost + ":" + server.getPort());
  props.setProperty(RpcClientConfigurationConstants.CONFIG_BATCH_SIZE,"" + batchSize);
  try {
    client=new NettyAvroRpcClient();
    client.configure(props);
    List<Event> events=new ArrayList<Event>();
    for (int i=0; i < moreThanBatchSize; i++) {
      events.add(EventBuilder.withBody("evt: " + i,Charset.forName("UTF8")));
    }
    client.appendBatch(events);
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null)     client.close();
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple batch request where the server only is using compression
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test(expected=org.apache.flume.EventDeliveryException.class) public void testOKServerBatchCompressionServerOnly() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerBatchAppendTest(new OKAvroHandler(),true,false,6);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple request with compression on the server and client with compression
 * level 0
 * configure the NettyAvroRpcClient with a non-default
 * NioClientSocketChannelFactory number of io worker threads
 * Compression level 0 = no compression
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test public void testAppendWithMaxIOWorkersSimpleCompressionLevel0() throws FlumeException, EventDeliveryException {
  NettyAvroRpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler(),0,true);
  Properties props=new Properties();
  props.setProperty(RpcClientConfigurationConstants.CONFIG_HOSTS,"localhost");
  props.setProperty(RpcClientConfigurationConstants.CONFIG_HOSTS_PREFIX + "localhost",localhost + ":" + server.getPort());
  props.setProperty(RpcClientConfigurationConstants.MAX_IO_WORKERS,Integer.toString(2));
  props.setProperty(RpcClientConfigurationConstants.CONFIG_COMPRESSION_TYPE,"deflate");
  props.setProperty(RpcClientConfigurationConstants.CONFIG_COMPRESSION_LEVEL,"" + 0);
  try {
    client=new NettyAvroRpcClient();
    client.configure(props);
    for (int i=0; i < 5; i++) {
      client.append(EventBuilder.withBody("evt:" + i,Charset.forName("UTF8")));
    }
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null) {
      client.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple batch request with compression deflate level 6
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test public void testOKServerBatchCompressionLevel6() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerBatchAppendTest(new OKAvroHandler(),true,true,6);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Send an event to an online server that throws an exception.
 */
@Test(expected=EventDeliveryException.class) public void testThrowingServerSimple() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerSimpleAppendTest(new ThrowingAvroHandler());
  logger.error("Throwing: I should never have gotten here!");
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Try to connect to a closed port.
 * Note: this test tries to connect to port 1 on localhost.
 * @throws FlumeException
 */
@Test(expected=FlumeException.class) public void testUnableToConnect() throws FlumeException {
  @SuppressWarnings("unused") NettyAvroRpcClient client=new NettyAvroRpcClient();
  Properties props=new Properties();
  props.setProperty(RpcClientConfigurationConstants.CONFIG_HOSTS,"localhost");
  props.setProperty(RpcClientConfigurationConstants.CONFIG_HOSTS_PREFIX + "localhost",localhost + ":" + 1);
  client.configure(props);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Send an event to an online server that returns FAILED.
 */
@Test(expected=EventDeliveryException.class) public void testFailedServerSimple() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerSimpleAppendTest(new FailedAvroHandler());
  logger.error("Failed: I should never have gotten here!");
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Send a batch of events to a server that returns UNKNOWN.
 */
@Test(expected=EventDeliveryException.class) public void testUnknownServerBatch() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerBatchAppendTest(new UnknownAvroHandler());
  logger.error("Unknown: I should never have gotten here!");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple request with compression on the server and client with compression level 6
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test public void testOKServerSimpleCompressionLevel6() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerSimpleAppendTest(new OKAvroHandler(),true,true,6);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Send a batch of events to a server that returns FAILED.
 */
@Test(expected=EventDeliveryException.class) public void testFailedServerBatch() throws FlumeException, EventDeliveryException {
  RpcTestUtils.handlerBatchAppendTest(new FailedAvroHandler());
  logger.error("Failed: I should never have gotten here!");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestRpcClientFactory </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPropertiesBatchAppend() throws FlumeException, EventDeliveryException {
  int batchSize=7;
  RpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  try {
    Properties p=new Properties();
    p.put("hosts","host1");
    p.put("hosts.host1",localhost + ":" + String.valueOf(server.getPort()));
    p.put("batch-size",String.valueOf(batchSize));
    client=RpcClientFactory.getInstance(p);
    List<Event> events=new ArrayList<Event>();
    for (int i=0; i < batchSize; i++) {
      events.add(EventBuilder.withBody("evt: " + i,Charset.forName("UTF8")));
    }
    client.appendBatch(events);
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null)     client.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoParamBatchAppendOverflow() throws FlumeException, EventDeliveryException {
  RpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  try {
    client=RpcClientFactory.getDefaultInstance(localhost,server.getPort());
    int batchSize=client.getBatchSize();
    int moreThanBatch=batchSize + 1;
    List<Event> events=new ArrayList<Event>();
    for (int i=0; i < moreThanBatch; i++) {
      events.add(EventBuilder.withBody("evt: " + i,Charset.forName("UTF8")));
    }
    client.appendBatch(events);
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null)     client.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoParamDeprecatedAppend() throws FlumeException, EventDeliveryException {
  RpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  try {
    client=RpcClientFactory.getInstance(localhost,server.getPort());
    client.append(EventBuilder.withBody("wheee!!!",Charset.forName("UTF8")));
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null)     client.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testThreeParamBatchAppend() throws FlumeException, EventDeliveryException {
  int batchSize=7;
  RpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  try {
    client=RpcClientFactory.getDefaultInstance(localhost,server.getPort(),batchSize);
    List<Event> events=new ArrayList<Event>();
    for (int i=0; i < batchSize; i++) {
      events.add(EventBuilder.withBody("evt: " + i,Charset.forName("UTF8")));
    }
    client.appendBatch(events);
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null)     client.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoParamSimpleAppend() throws FlumeException, EventDeliveryException {
  RpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  try {
    client=RpcClientFactory.getDefaultInstance(localhost,server.getPort());
    client.append(EventBuilder.withBody("wheee!!!",Charset.forName("UTF8")));
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null)     client.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestThriftRpcClient </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=TimeoutException.class) public void testTimeout() throws Throwable {
  try {
    src=new ThriftTestingSource(ThriftTestingSource.HandlerType.TIMEOUT.name(),port,ThriftRpcClient.COMPACT_PROTOCOL);
    client=(ThriftRpcClient)RpcClientFactory.getThriftInstance(props);
    insertEvents(client,2);
  }
 catch (  EventDeliveryException ex) {
    throw ex.getCause();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestBasicChannelSemantics </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClose2() throws Exception {
  final Transaction transaction=channel.getTransaction();
  testRuntimeException(new Runnable(){
    @Override public void run(){
      transaction.close();
    }
  }
);
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.close();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCommit2() throws Exception {
  final Transaction transaction=channel.getTransaction();
  transaction.begin();
  transaction.rollback();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.commit();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.commit();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClose4() throws Exception {
  final Transaction transaction=channel.getTransaction();
  transaction.begin();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.close();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollback6() throws Exception {
  final Transaction transaction=channel.getTransaction();
  transaction.begin();
  transaction.commit();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollback4() throws Exception {
  final Transaction transaction=channel.getTransaction();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.begin();
  testChannelException(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollback2() throws Exception {
  final Transaction transaction=channel.getTransaction();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.begin();
  testError(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPut1() throws Exception {
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.put(events.get(0));
    }
  }
);
  Transaction transaction=channel.getTransaction();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.put(events.get(0));
    }
  }
);
  transaction.begin();
  channel.put(events.get(0));
  testIllegalArgument(new Runnable(){
    @Override public void run(){
      channel.put(null);
    }
  }
);
  testExceptions(new Runnable(){
    @Override public void run(){
      channel.put(events.get(0));
    }
  }
);
  transaction.commit();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.put(events.get(0));
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.put(events.get(0));
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPut3() throws Exception {
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  channel.put(events.get(0));
  final Transaction finalTransaction=transaction;
  testChannelException(new Runnable(){
    @Override public void run(){
      finalTransaction.commit();
    }
  }
);
  transaction.rollback();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.put(events.get(0));
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.put(events.get(0));
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTake3() throws Exception {
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  channel.take();
  final Transaction finalTransaction=transaction;
  testChannelException(new Runnable(){
    @Override public void run(){
      finalTransaction.commit();
    }
  }
);
  transaction.rollback();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBegin() throws Exception {
  final Transaction transaction=channel.getTransaction();
  testExceptions(new Runnable(){
    @Override public void run(){
      transaction.begin();
    }
  }
);
  transaction.begin();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.begin();
    }
  }
);
  transaction.commit();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.begin();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.begin();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClose1() throws Exception {
  final Transaction transaction=channel.getTransaction();
  testError(new Runnable(){
    @Override public void run(){
      transaction.close();
    }
  }
);
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.close();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClose3() throws Exception {
  final Transaction transaction=channel.getTransaction();
  testChannelException(new Runnable(){
    @Override public void run(){
      transaction.close();
    }
  }
);
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.close();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollback7() throws Exception {
  final Transaction transaction=channel.getTransaction();
  transaction.begin();
  testExceptions(new Runnable(){
    @Override public void run(){
      transaction.commit();
    }
  }
);
  transaction.rollback();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClose5() throws Exception {
  final Transaction transaction=channel.getTransaction();
  transaction.begin();
  testChannelException(new Runnable(){
    @Override public void run(){
      transaction.commit();
    }
  }
);
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.close();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCommit1() throws Exception {
  final Transaction transaction=channel.getTransaction();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.commit();
    }
  }
);
  transaction.begin();
  testExceptions(new Runnable(){
    @Override public void run(){
      transaction.commit();
    }
  }
);
  transaction.commit();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.commit();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.commit();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollback5() throws Exception {
  final Transaction transaction=channel.getTransaction();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.begin();
  testInterrupt(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollback3() throws Exception {
  final Transaction transaction=channel.getTransaction();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.begin();
  testRuntimeException(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollback1() throws Exception {
  final Transaction transaction=channel.getTransaction();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.begin();
  testWrongThread(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.rollback();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      transaction.rollback();
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPut2() throws Exception {
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  channel.put(events.get(0));
  transaction.rollback();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.put(events.get(0));
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.put(events.get(0));
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTake2() throws Exception {
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  channel.take();
  transaction.rollback();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestChannelProcessor </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Ensure that we bubble up any specific exception thrown from getTransaction
 * instead of another exception masking it such as an NPE
 */
@Test(expected=ChannelException.class) public void testExceptionFromGetTransaction(){
  Channel ch=mock(Channel.class);
  when(ch.getTransaction()).thenThrow(new ChannelException("doh!"));
  ChannelSelector sel=new ReplicatingChannelSelector();
  sel.setChannels(Lists.newArrayList(ch));
  ChannelProcessor proc=new ChannelProcessor(sel);
  List<Event> events=Lists.newArrayList();
  events.add(EventBuilder.withBody("event 1",Charsets.UTF_8));
  proc.processEventBatch(events);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestChannelUtils </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInterrupt() throws Exception {
  testTransact(TestChannel.Mode.SLEEP,InterruptedException.class,new Runnable(){
    @Override public void run(){
      interruptTest(new Runnable(){
        @Override public void run(){
          channel.put(events.get(0));
        }
      }
);
    }
  }
);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRuntimeException(){
  testTransact(TestChannel.Mode.THROW_RUNTIME,TestRuntimeException.class);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChannelException(){
  testTransact(TestChannel.Mode.THROW_CHANNEL,ChannelException.class);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testError(){
  testTransact(TestChannel.Mode.THROW_ERROR,TestError.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMemoryChannel </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testByteCapacityBufferEmptyingAfterRollback(){
  Context context=new Context();
  Map<String,String> parms=new HashMap<String,String>();
  parms.put("byteCapacity","2000");
  parms.put("byteCapacityBufferPercentage","20");
  context.putAll(parms);
  Configurables.configure(channel,context);
  byte[] eventBody=new byte[405];
  Transaction tx=channel.getTransaction();
  tx.begin();
  channel.put(EventBuilder.withBody(eventBody));
  channel.put(EventBuilder.withBody(eventBody));
  channel.put(EventBuilder.withBody(eventBody));
  tx.rollback();
  tx.close();
  tx=channel.getTransaction();
  tx.begin();
  channel.put(EventBuilder.withBody(eventBody));
  channel.put(EventBuilder.withBody(eventBody));
  channel.put(EventBuilder.withBody(eventBody));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCapacityBufferEmptyingAfterTakeCommit(){
  Context context=new Context();
  Map<String,String> parms=new HashMap<String,String>();
  parms.put("capacity","3");
  parms.put("transactionCapacity","3");
  context.putAll(parms);
  Configurables.configure(channel,context);
  Transaction tx=channel.getTransaction();
  tx.begin();
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  tx.commit();
  tx.close();
  tx=channel.getTransaction();
  tx.begin();
  channel.take();
  channel.take();
  tx.commit();
  tx.close();
  tx=channel.getTransaction();
  tx.begin();
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNullEmptyEvent(){
  Context context=new Context();
  Map<String,String> parms=new HashMap<String,String>();
  parms.put("byteCapacity","2000");
  parms.put("byteCapacityBufferPercentage","20");
  context.putAll(parms);
  Configurables.configure(channel,context);
  Transaction tx=channel.getTransaction();
  tx.begin();
  channel.put(EventBuilder.withBody(null));
  tx.commit();
  tx.close();
  tx=channel.getTransaction();
  tx.begin();
  channel.put(EventBuilder.withBody(new byte[0]));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCapacityBufferEmptyingAfterRollback(){
  Context context=new Context();
  Map<String,String> parms=new HashMap<String,String>();
  parms.put("capacity","3");
  parms.put("transactionCapacity","3");
  context.putAll(parms);
  Configurables.configure(channel,context);
  Transaction tx=channel.getTransaction();
  tx.begin();
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  tx.rollback();
  tx.close();
  tx=channel.getTransaction();
  tx.begin();
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestSpillableMemoryChannel </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestart(){
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","2");
  params.put("overflowCapacity","10");
  params.put(FileChannelConfiguration.TRANSACTION_CAPACITY,"4");
  params.put("overflowTimeout","0");
  startChannel(params);
  transactionalPutN(1,2,channel);
  transactionalPutN(3,2,channel);
  restartChannel(params);
  transactionalTakeN(3,2,channel);
}

</code></pre>

<br>
<pre class="type-17 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParallelMultipleSourcesAndSinks() throws InterruptedException {
  int sourceCount=8;
  int sinkCount=8;
  int eventCount=1000000;
  int batchSize=100;
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","0");
  params.put("overflowCapacity","500020");
  params.put("overflowTimeout","3");
  startChannel(params);
  ArrayList<Thread> sinks=createSinkThreads(sinkCount,eventCount,batchSize);
  ArrayList<Thread> sources=createSourceThreads(sourceCount,eventCount,batchSize);
  StopWatch watch=new StopWatch();
  startThreads(sinks);
  startThreads(sources);
  joinThreads(sources);
  joinThreads(sinks);
  watch.elapsed();
  System.out.println("Total puts " + channel.drainOrder.totalPuts);
  System.out.println("Max Queue size " + channel.getMaxMemQueueSize());
  System.out.println(channel.memQueue.size());
  System.out.println("done");
}

</code></pre>

<br>
<pre class="type-17 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParallelSingleSourceAndSink() throws InterruptedException {
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","1000020");
  params.put("overflowCapacity","0");
  params.put("overflowTimeout","3");
  startChannel(params);
  Thread sourceThd=makePutThread("src",1,500000,100,channel);
  Thread sinkThd=makeTakeThread("sink",1,500000,100,channel);
  StopWatch watch=new StopWatch();
  sinkThd.start();
  sourceThd.start();
  sourceThd.join();
  sinkThd.join();
  watch.elapsed();
  System.out.println("Max Queue size " + channel.getMaxMemQueueSize());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOverflow(){
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","10");
  params.put("overflowCapacity","20");
  params.put(FileChannelConfiguration.TRANSACTION_CAPACITY,"10");
  params.put("overflowTimeout","1");
  startChannel(params);
  transactionalPutN(1,5,channel);
  transactionalPutN(6,5,channel);
  transactionalPutN(11,5,channel);
  transactionalTakeN(1,10,channel);
  transactionalTakeN(11,5,channel);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDrainingOnChannelBoundary(){
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","5");
  params.put("overflowCapacity","15");
  params.put(FileChannelConfiguration.TRANSACTION_CAPACITY,"10");
  params.put("overflowTimeout","1");
  startChannel(params);
  transactionalPutN(1,5,channel);
  transactionalPutN(6,5,channel);
  transactionalPutN(11,5,channel);
  transactionalPutN(16,5,channel);
  transactionalTakeN(1,3,channel);
  Transaction tx=channel.getTransaction();
  tx.begin();
  takeN(4,2,channel);
  takeNull(channel);
  tx.commit();
  tx.close();
  transactionalTakeN(6,5,channel);
  transactionalTakeN(11,5,channel);
  transactionalTakeN(16,2,channel);
  transactionalPutN(21,5,channel);
  tx=channel.getTransaction();
  tx.begin();
  takeN(18,3,channel);
  takeNull(channel);
  tx.commit();
  tx.close();
  transactionalTakeN(21,5,channel);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPutTake(){
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","5");
  params.put("overflowCapacity","5");
  params.put(FileChannelConfiguration.TRANSACTION_CAPACITY,"5");
  startChannel(params);
  Transaction tx=channel.getTransaction();
  tx.begin();
  putN(0,2,channel);
  tx.commit();
  tx.close();
  tx=channel.getTransaction();
  tx.begin();
  takeN(0,2,channel);
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollBack(){
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","100");
  params.put("overflowCapacity","900");
  params.put(FileChannelConfiguration.TRANSACTION_CAPACITY,"900");
  params.put("overflowTimeout","0");
  startChannel(params);
  transactionalPutN(1,5,channel);
  Transaction tx=channel.getTransaction();
  tx.begin();
  putN(6,5,channel);
  tx.rollback();
  tx.close();
  transactionalTakeN(1,5,channel);
  transactionalTakeNull(2,channel);
  transactionalPutN(11,5,channel);
  transactionalTakeN(11,5,channel);
  transactionalPutN(16,5,channel);
  tx=channel.getTransaction();
  tx.begin();
  takeN(16,5,channel);
  takeNull(channel);
  tx.rollback();
  tx.close();
  transactionalTakeN_NoCheck(5,channel);
  transactionalPutN(21,5,channel);
  transactionalTakeN(21,5,channel);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDrainOrder(){
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","10");
  params.put("overflowCapacity","10");
  params.put(FileChannelConfiguration.TRANSACTION_CAPACITY,"5");
  params.put("overflowTimeout","1");
  startChannel(params);
  transactionalPutN(1,5,channel);
  transactionalPutN(6,5,channel);
  transactionalPutN(11,5,channel);
  transactionalPutN(16,5,channel);
  transactionalTakeN(1,1,channel);
  transactionalTakeN(2,5,channel);
  transactionalTakeN(7,4,channel);
  transactionalPutN(20,2,channel);
  transactionalPutN(22,3,channel);
  transactionalTakeN(11,3,channel);
  transactionalTakeN(14,5,channel);
  transactionalTakeN(19,2,channel);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBasicStart(){
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","10000000");
  params.put("overflowCapacity","20000000");
  params.put(FileChannelConfiguration.TRANSACTION_CAPACITY,"10");
  params.put("overflowTimeout","1");
  startChannel(params);
  transactionalPutN(1,5,channel);
  transactionalPutN(6,5,channel);
  transactionalPutN(11,5,channel);
  transactionalTakeN(1,10,channel);
  transactionalTakeN(11,5,channel);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestEventQueueBackingStoreFactory </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=BadCheckpointException.class) public void testCheckpointVersionNotEqualToMeta() throws Exception {
  RandomAccessFile writer=new RandomAccessFile(checkpoint,"rw");
  try {
    EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
    backingStore.close();
    writer.seek(EventQueueBackingStoreFile.INDEX_VERSION * Serialization.SIZE_OF_LONG);
    writer.writeLong(2L);
    writer.getFD().sync();
    backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  }
  finally {
    writer.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWithFlag() throws Exception {
  verify(EventQueueBackingStoreFactory.get(checkpoint,10,"test",true),Serialization.VERSION_3,pointersInTestCheckpoint);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=BadCheckpointException.class) public void testIncompleteCheckpoint() throws Exception {
  RandomAccessFile writer=new RandomAccessFile(checkpoint,"rw");
  try {
    EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
    backingStore.close();
    writer.seek(EventQueueBackingStoreFile.INDEX_CHECKPOINT_MARKER * Serialization.SIZE_OF_LONG);
    writer.writeLong(EventQueueBackingStoreFile.CHECKPOINT_INCOMPLETE);
    writer.getFD().sync();
    backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  }
  finally {
    writer.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoUprade() throws Exception {
  verify(EventQueueBackingStoreFactory.get(checkpoint,10,"test",false),Serialization.VERSION_2,pointersInTestCheckpoint);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=BadCheckpointException.class) public void testCheckpointBadVersion() throws Exception {
  RandomAccessFile writer=new RandomAccessFile(checkpoint,"rw");
  try {
    EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
    backingStore.close();
    writer.seek(EventQueueBackingStoreFile.INDEX_VERSION * Serialization.SIZE_OF_LONG);
    writer.writeLong(94L);
    writer.getFD().sync();
    backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  }
  finally {
    writer.close();
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=BadCheckpointException.class) public void testCheckpointOrderIdNotEqualToMeta() throws Exception {
  RandomAccessFile writer=new RandomAccessFile(checkpoint,"rw");
  try {
    EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
    backingStore.close();
    writer.seek(EventQueueBackingStoreFile.INDEX_WRITE_ORDER_ID * Serialization.SIZE_OF_LONG);
    writer.writeLong(2L);
    writer.getFD().sync();
    backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  }
  finally {
    writer.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWithNoFlag() throws Exception {
  verify(EventQueueBackingStoreFactory.get(checkpoint,10,"test"),Serialization.VERSION_3,pointersInTestCheckpoint);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFileChannel </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailAfterTakeBeforeCommit() throws Throwable {
  final FileChannel channel=createFileChannel();
  channel.start();
  final Set<String> eventSet=putEvents(channel,"testTakeFailBeforeCommit",5,5);
  Transaction tx=channel.getTransaction();
  takeWithoutCommit(channel,tx,2);
  Executors.newSingleThreadExecutor().submit(new Runnable(){
    @Override public void run(){
      Transaction tx=channel.getTransaction();
      takeWithoutCommit(channel,tx,3);
    }
  }
).get();
  forceCheckpoint(channel);
  channel.stop();
  try {
    Executors.newSingleThreadExecutor().submit(new Runnable(){
      @Override public void run(){
        FileChannel channel=createFileChannel();
        channel.start();
        Set<String> output=null;
        try {
          output=takeEvents(channel,5);
        }
 catch (        Exception e) {
          Throwables.propagate(e);
        }
        compareInputAndOut(eventSet,output);
        channel.stop();
      }
    }
).get();
  }
 catch (  ExecutionException e) {
    throw e.getCause();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChannelDiesOnCorruptEventNoFsync() throws Exception {
  testChannelDiesOnCorruptEvent(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailAfterPutCheckpointCommit() throws Throwable {
  final Map<String,String> overrides=Maps.newHashMap();
  overrides.put(FileChannelConfiguration.CHECKPOINT_INTERVAL,"10000");
  final FileChannel channel=createFileChannel(overrides);
  channel.start();
  Transaction tx=channel.getTransaction();
  final Set<String> input=putWithoutCommit(channel,tx,"failAfterPut",3);
  final CountDownLatch latch=new CountDownLatch(1);
  Executors.newSingleThreadExecutor().submit(new Runnable(){
    @Override public void run(){
      Transaction tx=channel.getTransaction();
      input.addAll(putWithoutCommit(channel,tx,"failAfterPut",3));
      try {
        latch.await();
        tx.commit();
      }
 catch (      InterruptedException e) {
        tx.rollback();
        Throwables.propagate(e);
      }
 finally {
        tx.close();
      }
    }
  }
);
  forceCheckpoint(channel);
  tx.commit();
  tx.close();
  latch.countDown();
  Thread.sleep(2000);
  channel.stop();
  final Set<String> out=Sets.newHashSet();
  try {
    Executors.newSingleThreadExecutor().submit(new Runnable(){
      @Override public void run(){
        try {
          FileChannel channel=createFileChannel();
          channel.start();
          out.addAll(takeEvents(channel,6));
          channel.stop();
        }
 catch (        Exception ex) {
          Throwables.propagate(ex);
        }
      }
    }
).get();
  }
 catch (  ExecutionException e) {
    throw e.getCause();
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testChannelDiesOnCorruptEventFsync() throws Exception {
  testChannelDiesOnCorruptEvent(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFileChannelFormatRegression </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This is a regression test with files generated by a file channel
 * without the FLUME-1432 patch.
 */
@Test public void testFileFormatV2PreFLUME1432LogReplayV1() throws Exception {
  doTestFileFormatV2PreFLUME1432(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFileFormatV2PreFLUME1432LogReplayV2() throws Exception {
  doTestFileFormatV2PreFLUME1432(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFileChannelRestart </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTruncatedCheckpointMeta() throws Exception {
  doTestTruncatedCheckpointMeta(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestartWhenMetaDataExistsButCheckpointDoesNotWithBackup() throws Exception {
  doTestRestartWhenMetaDataExistsButCheckpointDoesNot(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestartWhenCheckpointExistsButMetaDoesNot() throws Exception {
  doTestRestartWhenCheckpointExistsButMetaDoesNot(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNormalReplayV2() throws Exception {
  doTestRestart(false,true,true,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDifferingOrderIDCheckpointAndMetaVersionWithBackup() throws Exception {
  doTestDifferingOrderIDCheckpointAndMetaVersion(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBadCheckpointVersionWithBackup() throws Exception {
  doTestBadCheckpointVersion(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCorruptInflightPutsWithBackup() throws Exception {
  doTestCorruptInflights("inflightputs",true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFastReplayV1() throws Exception {
  doTestRestart(true,true,true,true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBackupUsedEnsureNoFullReplayWithoutCompression() throws Exception {
  testBackupUsedEnsureNoFullReplay(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCorruptInflightPuts() throws Exception {
  doTestCorruptInflights("inflightputs",false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIncompleteCheckpointWithCheckpoint() throws Exception {
  doTestIncompleteCheckpoint(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBackupUsedEnsureNoFullReplayWithCompression() throws Exception {
  testBackupUsedEnsureNoFullReplay(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testToggleCheckpointCompressionFromFalseToTrue() throws Exception {
  restartToggleCompression(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestartWhenMetaDataExistsButCheckpointDoesNot() throws Exception {
  doTestRestartWhenMetaDataExistsButCheckpointDoesNot(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFastReplayNegativeTestV2() throws Exception {
  doTestRestart(false,true,false,true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testToggleCheckpointCompressionFromTrueToFalse() throws Exception {
  restartToggleCompression(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBadCheckpointMetaVersion() throws Exception {
  doTestBadCheckpointMetaVersion(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestartWhenNoCheckpointExistsWithBackup() throws Exception {
  doTestRestartWhenNoCheckpointExists(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoFastReplayWithCheckpoint() throws Exception {
  testFastReplay(false,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestartLogReplayV1() throws Exception {
  doTestRestart(true,false,false,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestartWhenNoCheckpointExists() throws Exception {
  doTestRestartWhenNoCheckpointExists(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestartWhenCheckpointExistsButMetaDoesNotWithBackup() throws Exception {
  doTestRestartWhenCheckpointExistsButMetaDoesNot(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCorruptInflightTakes() throws Exception {
  doTestCorruptInflights("inflighttakes",false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDifferingOrderIDCheckpointAndMetaVersion() throws Exception {
  doTestDifferingOrderIDCheckpointAndMetaVersion(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFastReplayWithBadCheckpoint() throws Exception {
  testFastReplay(true,true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBadCheckpointVersion() throws Exception {
  doTestBadCheckpointVersion(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCorruptCheckpointMetaWithBackup() throws Exception {
  doTestCorruptCheckpointMeta(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFastReplayWithCheckpoint() throws Exception {
  testFastReplay(false,true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoFastReplayWithBadCheckpoint() throws Exception {
  testFastReplay(true,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFastReplayV2() throws Exception {
  doTestRestart(false,true,true,true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBadCheckpointMetaVersionWithBackup() throws Exception {
  doTestBadCheckpointMetaVersion(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFastReplayNegativeTestV1() throws Exception {
  doTestRestart(true,true,false,true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCorruptCheckpointMeta() throws Exception {
  doTestCorruptCheckpointMeta(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIncompleteCheckpoint() throws Exception {
  doTestIncompleteCheckpoint(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTruncatedCheckpointMetaWithBackup() throws Exception {
  doTestTruncatedCheckpointMeta(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCorruptInflightTakesWithBackup() throws Exception {
  doTestCorruptInflights("inflighttakes",true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNormalReplayV1() throws Exception {
  doTestRestart(true,true,true,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRestartLogReplayV2() throws Exception {
  doTestRestart(false,false,false,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFlumeEventQueue </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testRemoveAfterReplayComplete() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  queue.replayComplete();
  queue.remove(pointer1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestLog </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * After replay of the log, we should find the event because the put
 * was committed
 */
@Test public void testPutCommit() throws IOException, InterruptedException, NoopRecordException, CorruptEventException {
  FlumeEvent eventIn=TestUtils.newPersistableEvent();
  long transactionID=++this.transactionID;
  FlumeEventPointer eventPointerIn=log.put(transactionID,eventIn);
  log.commitPut(transactionID);
  log.close();
  log=new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(CAPACITY).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  log.replay();
  takeAndVerify(eventPointerIn,eventIn);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * After replay of the log, we should get the event because the take
 * was rolled back
 */
@Test public void testPutTakeRollbackLogReplayV1() throws IOException, InterruptedException, NoopRecordException, CorruptEventException {
  doPutTakeRollback(true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReplayFailsWithAllEmptyLogMetaDataNormalReplay() throws IOException, InterruptedException {
  doTestReplayFailsWithAllEmptyLogMetaData(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * There is a race here in that someone could take up some space
 */
@Test public void testMinimumRequiredSpaceTooSmallForPut() throws IOException, InterruptedException {
  try {
    doTestMinimumRequiredSpaceTooSmallForPut();
  }
 catch (  IOException e) {
    LOGGER.info("Error during test, retrying",e);
    doTestMinimumRequiredSpaceTooSmallForPut();
  }
catch (  AssertionError e) {
    LOGGER.info("Test failed, let's be sure it failed for good reason",e);
    doTestMinimumRequiredSpaceTooSmallForPut();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPutTakeRollbackLogReplayV2() throws IOException, InterruptedException, NoopRecordException, CorruptEventException {
  doPutTakeRollback(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReplaySucceedsWithUnusedEmptyLogMetaDataNormalReplay() throws IOException, InterruptedException, NoopRecordException, CorruptEventException {
  FlumeEvent eventIn=TestUtils.newPersistableEvent();
  long transactionID=++this.transactionID;
  FlumeEventPointer eventPointer=log.put(transactionID,eventIn);
  log.commitPut(transactionID);
  log.close();
  log=new Log.Builder().setCheckpointInterval(1L).setMaxFileSize(MAX_FILE_SIZE).setQueueSize(CAPACITY).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  doTestReplaySucceedsWithUnusedEmptyLogMetaData(eventIn,eventPointer);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReplayFailsWithAllEmptyLogMetaDataFastReplay() throws IOException, InterruptedException {
  doTestReplayFailsWithAllEmptyLogMetaData(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.encryption.TestAESCTRNoPaddingProvider </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test() throws Exception {
  cipherProviderTestSuite.test();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.encryption.TestJCEFileKeyProvider </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWithExistingKeyStore() throws Exception {
  keyAliasPassword.putAll(EncryptionTestUtils.configureTestKeyStore(baseDir,keyStoreFile));
  Context context=new Context(EncryptionTestUtils.configureForKeyStore(keyStoreFile,keyStorePasswordFile,keyAliasPassword));
  Context keyProviderContext=new Context(context.getSubProperties(EncryptionConfiguration.KEY_PROVIDER + "."));
  KeyProvider keyProvider=KeyProviderFactory.getInstance(KeyProviderType.JCEKSFILE.name(),keyProviderContext);
  testKeyProvider(keyProvider);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWithNewKeyStore() throws Exception {
  createNewKeyStore();
  EncryptionTestUtils.createKeyStore(keyStoreFile,keyStorePasswordFile,keyAliasPassword);
  Context context=new Context(EncryptionTestUtils.configureForKeyStore(keyStoreFile,keyStorePasswordFile,keyAliasPassword));
  Context keyProviderContext=new Context(context.getSubProperties(EncryptionConfiguration.KEY_PROVIDER + "."));
  KeyProvider keyProvider=KeyProviderFactory.getInstance(KeyProviderType.JCEKSFILE.name(),keyProviderContext);
  testKeyProvider(keyProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.jdbc.TestPersistentEvent </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMarshalling(){
  int nameLimit=ConfigurationConstants.HEADER_NAME_LENGTH_THRESHOLD;
  int valLimit=ConfigurationConstants.HEADER_VALUE_LENGTH_THRESHOLD;
  byte[] s1=MockEventUtils.generatePayload(1);
  runTest(s1,null);
  byte[] s2=MockEventUtils.generatePayload(2);
  runTest(s2,new HashMap<String,String>());
  int th=ConfigurationConstants.PAYLOAD_LENGTH_THRESHOLD;
  byte[] s3=MockEventUtils.generatePayload(th - 2);
  Map<String,String> m3=new HashMap<String,String>();
  m3.put(MockEventUtils.generateHeaderString(1),MockEventUtils.generateHeaderString(1));
  runTest(s3,m3);
  byte[] s4=MockEventUtils.generatePayload(th - 1);
  Map<String,String> m4=new HashMap<String,String>();
  m4.put(MockEventUtils.generateHeaderString(nameLimit - 21),"w");
  m4.put(MockEventUtils.generateHeaderString(nameLimit - 2),"x");
  m4.put(MockEventUtils.generateHeaderString(nameLimit - 1),"y");
  m4.put(MockEventUtils.generateHeaderString(nameLimit),"z");
  m4.put(MockEventUtils.generateHeaderString(nameLimit + 1),"a");
  m4.put(MockEventUtils.generateHeaderString(nameLimit + 2),"b");
  m4.put(MockEventUtils.generateHeaderString(nameLimit + 21),"c");
  runTest(s4,m4);
  byte[] s5=MockEventUtils.generatePayload(th);
  Map<String,String> m5=new HashMap<String,String>();
  m5.put("w",MockEventUtils.generateHeaderString(valLimit - 21));
  m5.put("x",MockEventUtils.generateHeaderString(valLimit - 2));
  m5.put("y",MockEventUtils.generateHeaderString(valLimit - 1));
  m5.put("z",MockEventUtils.generateHeaderString(valLimit));
  m5.put("a",MockEventUtils.generateHeaderString(valLimit + 1));
  m5.put("b",MockEventUtils.generateHeaderString(valLimit + 2));
  m5.put("c",MockEventUtils.generateHeaderString(valLimit + 21));
  runTest(s5,m5);
  byte[] s6=MockEventUtils.generatePayload(th + 1);
  Map<String,String> m6=new HashMap<String,String>();
  m6.put(MockEventUtils.generateHeaderString(nameLimit - 21),MockEventUtils.generateHeaderString(valLimit - 21));
  m6.put(MockEventUtils.generateHeaderString(nameLimit - 2),MockEventUtils.generateHeaderString(valLimit - 2));
  m6.put(MockEventUtils.generateHeaderString(nameLimit - 1),MockEventUtils.generateHeaderString(valLimit - 1));
  m6.put(MockEventUtils.generateHeaderString(nameLimit),MockEventUtils.generateHeaderString(valLimit));
  m6.put(MockEventUtils.generateHeaderString(nameLimit + 1),MockEventUtils.generateHeaderString(valLimit + 1));
  m6.put(MockEventUtils.generateHeaderString(nameLimit + 2),MockEventUtils.generateHeaderString(valLimit + 2));
  m6.put(MockEventUtils.generateHeaderString(nameLimit + 21),MockEventUtils.generateHeaderString(valLimit + 21));
  runTest(s6,m6);
  byte[] s7=MockEventUtils.generatePayload(th + 2);
  runTest(s7,null);
  byte[] s8=MockEventUtils.generatePayload(th + 27);
  runTest(s8,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.kafka.TestKafkaChannel </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuccessInterleave() throws Exception {
  doTestSuccessRollback(false,true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollbacks() throws Exception {
  doTestSuccessRollback(true,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuccess() throws Exception {
  doTestSuccessRollback(false,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStopAndStartWithRollback() throws Exception {
  doTestStopAndStart(true,true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollbacksInterleave() throws Exception {
  doTestSuccessRollback(true,true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStopAndStart() throws Exception {
  doTestStopAndStart(false,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStopAndStartWithRollbackAndNoRetry() throws Exception {
  doTestStopAndStart(true,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.client.avro.TestReliableSpoolingFileEventReader </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NullPointerException.class) public void testNullConsumeOrder() throws IOException {
  new ReliableSpoolingFileEventReader.Builder().spoolDirectory(WORK_DIR).consumeOrder(null).build();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLargeNumberOfFilesRANDOM() throws IOException {
  templateTestForLargeNumberOfFiles(ConsumeOrder.RANDOM,null,1000);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLargeNumberOfFilesYOUNGEST() throws IOException {
  templateTestForLargeNumberOfFiles(ConsumeOrder.YOUNGEST,new Comparator<Long>(){
    @Override public int compare(    Long o1,    Long o2){
      return o2.compareTo(o1);
    }
  }
,1000);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLargeNumberOfFilesOLDEST() throws IOException {
  templateTestForLargeNumberOfFiles(ConsumeOrder.OLDEST,null,1000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.client.avro.TestSpoolingFileLineReader </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testDestinationExistsAndDifferentFile() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  File f1Completed=new File(tmpDir.getAbsolutePath() + "/file1" + completedSuffix);
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Files.write("file1line1\nfile1XXXe2\n",f1Completed,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> out=Lists.newArrayList();
  for (int i=0; i < 2; i++) {
    out.add(bodyAsString(parser.readEvent()));
    parser.commit();
  }
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  for (int i=0; i < 2; i++) {
    out.add(bodyAsString(parser.readEvent()));
    parser.commit();
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testDestinationExistsAndSameFileNotOnWindows() throws IOException {
  System.setProperty("os.name","Some version of Linux");
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  File f1Completed=new File(tmpDir.getAbsolutePath() + "/file1" + completedSuffix);
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Files.write("file1line1\nfile1line2\n",f1Completed,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> out=Lists.newArrayList();
  for (int i=0; i < 2; i++) {
    out.add(bodyAsString(parser.readEvent()));
    parser.commit();
  }
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  for (int i=0; i < 2; i++) {
    out.add(bodyAsString(parser.readEvent()));
    parser.commit();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.clients.log4jappender.TestLoadBalancingLog4jAppender </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=EventDeliveryException.class) public void testRandomBackoffNotUnsafeMode() throws Throwable {
  File TESTFILE=new File(TestLoadBalancingLog4jAppender.class.getClassLoader().getResource("flume-loadbalancing-backoff-log4jtest.properties").getFile());
  startSources(TESTFILE,false,new int[]{25430,25431,25432});
  sources.get(0).setFail();
  sources.get(1).setFail();
  sources.get(2).setFail();
  try {
    sendAndAssertFail();
  }
 catch (  FlumeException ex) {
    throw ex.getCause();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRandomBackoffUnsafeMode() throws Exception {
  File TESTFILE=new File(TestLoadBalancingLog4jAppender.class.getClassLoader().getResource("flume-loadbalancing-backoff-log4jtest.properties").getFile());
  startSources(TESTFILE,true,new int[]{25430,25431,25432});
  sources.get(0).setFail();
  sources.get(1).setFail();
  sources.get(2).setFail();
  sendAndAssertFail();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=EventDeliveryException.class) public void testTimeout() throws Throwable {
  File TESTFILE=new File(TestLoadBalancingLog4jAppender.class.getClassLoader().getResource("flume-loadbalancinglog4jtest.properties").getFile());
  ch=new TestLog4jAppender.SlowMemoryChannel(2000);
  configureChannel();
  slowDown=true;
  startSources(TESTFILE,false,new int[]{25430,25431,25432});
  int level=20000;
  String msg="This is log message number" + String.valueOf(level);
  try {
    fixture.log(Level.toLevel(level),msg);
  }
 catch (  FlumeException ex) {
    throw ex.getCause();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.clients.log4jappender.TestLog4jAppender </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSlownessUnsafeMode() throws Throwable {
  props.setProperty("log4j.appender.out2.UnsafeMode",String.valueOf(true));
  testSlowness();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=EventDeliveryException.class) public void testLog4jAppenderFailureNotUnsafeMode() throws Throwable {
  configureSource();
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppender.class);
  source.stop();
  sendAndAssertFail(logger);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLog4jAppenderFailureUnsafeMode() throws Throwable {
  configureSource();
  props.setProperty("log4j.appender.out2.UnsafeMode",String.valueOf(true));
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppender.class);
  source.stop();
  sendAndAssertFail(logger);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=EventDeliveryException.class) public void testSlowness() throws Throwable {
  ch=new SlowMemoryChannel(2000);
  Configurables.configure(ch,new Context());
  configureSource();
  props.put("log4j.appender.out2.Timeout","1000");
  props.put("log4j.appender.out2.layout","org.apache.log4j.PatternLayout");
  props.put("log4j.appender.out2.layout.ConversionPattern","%-5p [%t]: %m%n");
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppender.class);
  Thread.currentThread().setName("Log4jAppenderTest");
  int level=10000;
  String msg="This is log message number" + String.valueOf(1);
  try {
    logger.log(Level.toLevel(level),msg);
  }
 catch (  FlumeException ex) {
    throw ex.getCause();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.conf.source.TestSourceConfiguration </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test fails without FLUME-1847
 */
@Test(expected=ConfigurationException.class) public void testFLUME1847() throws Exception {
  Context context=new Context();
  context.put("type","something");
  SourceConfiguration sourceConfig=new SourceConfiguration("src");
  sourceConfig.configure(context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.event.TestEventBuilder </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testJsonEventUnsupportedEncoding(){
  JSONEvent jsonEvent=new JSONEvent();
  jsonEvent.setCharset("dummy");
  jsonEvent.setBody("This is json event".getBytes());
  jsonEvent.getBody();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.instrumentation.http.TestHTTPMetricsServer </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOptions() throws Exception {
  doTestForbiddenMethods(4432,"OPTIONS");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJSON() throws Exception {
  memChannel.setName("memChannel");
  pmemChannel.setName("pmemChannel");
  Context c=new Context();
  Configurables.configure(memChannel,c);
  Configurables.configure(pmemChannel,c);
  memChannel.start();
  pmemChannel.start();
  Transaction txn=memChannel.getTransaction();
  txn.begin();
  memChannel.put(EventBuilder.withBody("blah".getBytes()));
  memChannel.put(EventBuilder.withBody("blah".getBytes()));
  txn.commit();
  txn.close();
  txn=memChannel.getTransaction();
  txn.begin();
  memChannel.take();
  txn.commit();
  txn.close();
  Transaction txn2=pmemChannel.getTransaction();
  txn2.begin();
  pmemChannel.put(EventBuilder.withBody("blah".getBytes()));
  pmemChannel.put(EventBuilder.withBody("blah".getBytes()));
  txn2.commit();
  txn2.close();
  txn2=pmemChannel.getTransaction();
  txn2.begin();
  pmemChannel.take();
  txn2.commit();
  txn2.close();
  testWithPort(5467);
  testWithPort(33434);
  testWithPort(44343);
  testWithPort(0);
  memChannel.stop();
  pmemChannel.stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTrace() throws Exception {
  doTestForbiddenMethods(4543,"TRACE");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestSearchAndReplaceInterceptor </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemovePrefix() throws Exception {
  Context context=new Context();
  context.put("searchPattern","^prefix");
  context.put("replaceString","");
  testSearchReplace(context,"prefix non-prefix suffix"," non-prefix suffix");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRepeatedRemoval() throws Exception {
  final String input="Email addresses: test@test.com and foo@test.com";
  final String output="Email addresses: REDACTED and REDACTED";
  Context context=new Context();
  context.put("searchPattern","[A-Za-z0-9_.]+@[A-Za-z0-9_-]+\\.com");
  context.put("replaceString","REDACTED");
  testSearchReplace(context,input,output);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReplaceEmpty() throws Exception {
  final String input="Abc123@test.com";
  final String output="@test.com";
  Context context=new Context();
  context.put("searchPattern","^[A-Za-z0-9_]+");
  testSearchReplace(context,input,output);
  context.put("replaceString","");
  testSearchReplace(context,input,output);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCapturedGroups() throws Exception {
  final String input="The quick brown fox jumped over the lazy dog.";
  final String output="The hungry dog ate the careless fox.";
  Context context=new Context();
  context.put("searchPattern","The quick brown ([a-z]+) jumped over the lazy ([a-z]+).");
  context.put("replaceString","The hungry $2 ate the careless $1.");
  testSearchReplace(context,input,output);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSyslogStripPriority() throws Exception {
  final String input="<13>Feb  5 17:32:18 10.0.0.99 Use the BFG!";
  final String output="Feb  5 17:32:18 10.0.0.99 Use the BFG!";
  Context context=new Context();
  context.put("searchPattern","^<[0-9]+>");
  context.put("replaceString","");
  testSearchReplace(context,input,output);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.lifecycle.TestLifecycleSupervisor </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLifecycle() throws LifecycleException, InterruptedException {
  supervisor.start();
  supervisor.stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuperviseBroken() throws LifecycleException, InterruptedException {
  supervisor.start();
  LifecycleAware node=new LifecycleAware(){
    @Override public void stop(){
    }
    @Override public void start(){
      throw new NullPointerException("Boom!");
    }
    @Override public LifecycleState getLifecycleState(){
      return LifecycleState.IDLE;
    }
  }
;
  SupervisorPolicy policy=new SupervisorPolicy.OnceOnlyPolicy();
  supervisor.supervise(node,policy,LifecycleState.START);
  Thread.sleep(5000);
  supervisor.stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUnsuperviseServce() throws LifecycleException, InterruptedException {
  supervisor.start();
  LifecycleAware service=new CountingLifecycleAware();
  SupervisorPolicy policy=new SupervisorPolicy.OnceOnlyPolicy();
  supervisor.supervise(service,policy,LifecycleState.START);
  supervisor.unsupervise(service);
  service.stop();
  supervisor.stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSupervise() throws LifecycleException, InterruptedException {
  supervisor.start();
  CountingLifecycleAware node=new CountingLifecycleAware();
  SupervisorPolicy policy=new SupervisorPolicy.OnceOnlyPolicy();
  supervisor.supervise(node,policy,LifecycleState.START);
  Thread.sleep(10000);
  node=new CountingLifecycleAware();
  policy=new SupervisorPolicy.OnceOnlyPolicy();
  supervisor.supervise(node,policy,LifecycleState.START);
  Thread.sleep(5000);
  supervisor.stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuperviseSupervisor() throws LifecycleException, InterruptedException {
  supervisor.start();
  LifecycleSupervisor supervisor2=new LifecycleSupervisor();
  CountingLifecycleAware node=new CountingLifecycleAware();
  SupervisorPolicy policy=new SupervisorPolicy.OnceOnlyPolicy();
  supervisor2.supervise(node,policy,LifecycleState.START);
  supervisor.supervise(supervisor2,new SupervisorPolicy.AlwaysRestartPolicy(),LifecycleState.START);
  Thread.sleep(10000);
  supervisor.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.node.TestApplication </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBasicConfiguration() throws Exception {
  EventBus eventBus=new EventBus("test-event-bus");
  MaterializedConfiguration materializedConfiguration=new SimpleMaterializedConfiguration();
  SourceRunner sourceRunner=mockLifeCycle(SourceRunner.class);
  materializedConfiguration.addSourceRunner("test",sourceRunner);
  SinkRunner sinkRunner=mockLifeCycle(SinkRunner.class);
  materializedConfiguration.addSinkRunner("test",sinkRunner);
  Channel channel=mockLifeCycle(Channel.class);
  materializedConfiguration.addChannel("test",channel);
  ConfigurationProvider configurationProvider=mock(ConfigurationProvider.class);
  when(configurationProvider.getConfiguration()).thenReturn(materializedConfiguration);
  Application application=new Application();
  eventBus.register(application);
  eventBus.post(materializedConfiguration);
  application.start();
  Thread.sleep(1000L);
  verify(sourceRunner).start();
  verify(sinkRunner).start();
  verify(channel).start();
  application.stop();
  Thread.sleep(1000L);
  verify(sourceRunner).stop();
  verify(sinkRunner).stop();
  verify(channel).stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFLUME1854() throws Exception {
  File configFile=new File(baseDir,"flume-conf.properties");
  Files.copy(new File(getClass().getClassLoader().getResource("flume-conf.properties").getFile()),configFile);
  Random random=new Random();
  for (int i=0; i < 3; i++) {
    EventBus eventBus=new EventBus("test-event-bus");
    PollingPropertiesFileConfigurationProvider configurationProvider=new PollingPropertiesFileConfigurationProvider("host1",configFile,eventBus,1);
    List<LifecycleAware> components=Lists.newArrayList();
    components.add(configurationProvider);
    Application application=new Application(components);
    eventBus.register(application);
    application.start();
    Thread.sleep(random.nextInt(10000));
    application.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.node.TestStaticZooKeeperConfigurationProvider </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPropertyRead() throws Exception {
  verifyProperties(configurationProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestFlumeEventAvroEventSerializer </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAvroSerializerNullCompression() throws FileNotFoundException, IOException {
  createAvroFile(TESTFILE,"null");
  validateAvroFile(TESTFILE);
  FileUtils.forceDelete(TESTFILE);
}

</code></pre>

<br>
<pre class="type-19 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAvroSerializerSnappyCompression() throws FileNotFoundException, IOException {
  Assume.assumeTrue(!"Mac OS X".equals(System.getProperty("os.name")) || !System.getProperty("java.version").startsWith("1.7."));
  createAvroFile(TESTFILE,"snappy");
  validateAvroFile(TESTFILE);
  FileUtils.forceDelete(TESTFILE);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAvroSerializer() throws FileNotFoundException, IOException {
  createAvroFile(TESTFILE,null);
  validateAvroFile(TESTFILE);
  FileUtils.forceDelete(TESTFILE);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAvroSerializerDeflateCompression() throws FileNotFoundException, IOException {
  createAvroFile(TESTFILE,"deflate");
  validateAvroFile(TESTFILE);
  FileUtils.forceDelete(TESTFILE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestLineDeserializer </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleViaBuilder() throws IOException {
  ResettableInputStream in=new ResettableTestStringInputStream(mini);
  EventDeserializer.Builder builder=new LineDeserializer.Builder();
  EventDeserializer des=builder.build(new Context(),in);
  validateMiniParse(des);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleViaFactory() throws IOException {
  ResettableInputStream in=new ResettableTestStringInputStream(mini);
  EventDeserializer des;
  des=EventDeserializerFactory.getInstance("LINE",new Context(),in);
  validateMiniParse(des);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimple() throws IOException {
  ResettableInputStream in=new ResettableTestStringInputStream(mini);
  EventDeserializer des=new LineDeserializer(new Context(),in);
  validateMiniParse(des);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestAvroSink </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRequestWithCompressionOnClientAndServerOnLevel6() throws InterruptedException, IOException, EventDeliveryException {
  doRequest(true,true,6);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRequestWithCompressionOnClientAndServerOnLevel0() throws InterruptedException, IOException, EventDeliveryException {
  doRequest(true,true,0);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRequestWithCompressionOnClientAndServerOnLevel9() throws InterruptedException, IOException, EventDeliveryException {
  doRequest(true,true,9);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRequestWithNoCompression() throws InterruptedException, IOException, EventDeliveryException {
  doRequest(false,false,6);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRequestWithCompressionOnClientAndServerOnLevel1() throws InterruptedException, IOException, EventDeliveryException {
  doRequest(true,true,1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestDefaultSinkFactory </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSinkCreation() throws Exception {
  verifySinkCreation("null-sink","null",NullSink.class);
  verifySinkCreation("logger-sink","logger",LoggerSink.class);
  verifySinkCreation("file-roll-sink","file_roll",RollingFileSink.class);
  verifySinkCreation("avro-sink","avro",AvroSink.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestLoggerSink </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Lack of exception test.
 */
@Test public void testAppend() throws InterruptedException, LifecycleException, EventDeliveryException {
  Channel channel=new PseudoTxnMemoryChannel();
  Context context=new Context();
  Configurables.configure(channel,context);
  Configurables.configure(sink,context);
  sink.setChannel(channel);
  sink.start();
  for (int i=0; i < 10; i++) {
    Event event=EventBuilder.withBody(("Test " + i).getBytes());
    channel.put(event);
    sink.process();
  }
  sink.stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppendWithCustomSize() throws InterruptedException, LifecycleException, EventDeliveryException {
  Channel channel=new PseudoTxnMemoryChannel();
  Context context=new Context();
  context.put(LoggerSink.MAX_BYTES_DUMP_KEY,String.valueOf(30));
  Configurables.configure(channel,context);
  Configurables.configure(sink,context);
  sink.setChannel(channel);
  sink.start();
  for (int i=0; i < 10; i++) {
    Event event=EventBuilder.withBody((Strings.padStart("Test " + i,30,'P')).getBytes());
    channel.put(event);
    sink.process();
  }
  sink.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestRollingFileSink </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppend2() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  Context context=new Context();
  context.put("sink.directory",tmpDir.getPath());
  context.put("sink.rollInterval","0");
  context.put("sink.batchSize","1");
  Configurables.configure(sink,context);
  Channel channel=new PseudoTxnMemoryChannel();
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.start();
  for (int i=0; i < 10; i++) {
    Event event=new SimpleEvent();
    event.setBody(("Test event " + i).getBytes());
    channel.put(event);
    sink.process();
    Thread.sleep(500);
  }
  sink.stop();
  for (  String file : sink.getDirectory().list()) {
    BufferedReader reader=new BufferedReader(new FileReader(new File(sink.getDirectory(),file)));
    String lastLine=null;
    String currentLine=null;
    while ((currentLine=reader.readLine()) != null) {
      lastLine=currentLine;
      logger.debug("Produced file:{} lastLine:{}",file,lastLine);
    }
    reader.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLifecycle() throws InterruptedException, LifecycleException {
  Context context=new Context();
  context.put("sink.directory",tmpDir.getPath());
  Configurables.configure(sink,context);
  sink.start();
  sink.stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppend() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  Context context=new Context();
  context.put("sink.directory",tmpDir.getPath());
  context.put("sink.rollInterval","1");
  context.put("sink.batchSize","1");
  Configurables.configure(sink,context);
  Channel channel=new PseudoTxnMemoryChannel();
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.start();
  for (int i=0; i < 10; i++) {
    Event event=new SimpleEvent();
    event.setBody(("Test event " + i).getBytes());
    channel.put(event);
    sink.process();
    Thread.sleep(500);
  }
  sink.stop();
  for (  String file : sink.getDirectory().list()) {
    BufferedReader reader=new BufferedReader(new FileReader(new File(sink.getDirectory(),file)));
    String lastLine=null;
    String currentLine=null;
    while ((currentLine=reader.readLine()) != null) {
      lastLine=currentLine;
    }
    logger.debug("Produced file:{} lastLine:{}",file,lastLine);
    reader.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TestElasticSearchSink </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldIndexComplexJsonEvent() throws Exception {
  Configurables.configure(fixture,new Context(parameters));
  Channel channel=bindAndStartChannel(fixture);
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event event=EventBuilder.withBody("{\"event\":\"json content\",\"num\":1}".getBytes());
  channel.put(event);
  tx.commit();
  tx.close();
  fixture.process();
  fixture.stop();
  client.admin().indices().refresh(Requests.refreshRequest(timestampedIndexName)).actionGet();
  Map<String,Object> expectedBody=new HashMap<String,Object>();
  expectedBody.put("event","json content");
  expectedBody.put("num",1);
  assertSearch(1,performSearch(QueryBuilders.matchAllQuery()),expectedBody,event);
  assertSearch(1,performSearch(QueryBuilders.fieldQuery("@message.event","json")),expectedBody,event);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldIndexOneEvent() throws Exception {
  Configurables.configure(fixture,new Context(parameters));
  Channel channel=bindAndStartChannel(fixture);
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event event=EventBuilder.withBody("event #1 or 1".getBytes());
  channel.put(event);
  tx.commit();
  tx.close();
  fixture.process();
  fixture.stop();
  client.admin().indices().refresh(Requests.refreshRequest(timestampedIndexName)).actionGet();
  assertMatchAllQuery(1,event);
  assertBodyQuery(1,event);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldIndexInvalidComplexJsonBody() throws Exception {
  parameters.put(BATCH_SIZE,"3");
  Configurables.configure(fixture,new Context(parameters));
  Channel channel=bindAndStartChannel(fixture);
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event event1=EventBuilder.withBody("TEST1 {test}".getBytes());
  channel.put(event1);
  Event event2=EventBuilder.withBody("{test: TEST2 }".getBytes());
  channel.put(event2);
  Event event3=EventBuilder.withBody("{\"test\":{ TEST3 {test} }}".getBytes());
  channel.put(event3);
  tx.commit();
  tx.close();
  fixture.process();
  fixture.stop();
  client.admin().indices().refresh(Requests.refreshRequest(timestampedIndexName)).actionGet();
  assertMatchAllQuery(3);
  assertSearch(1,performSearch(QueryBuilders.fieldQuery("@message","TEST1")),null,event1);
  assertSearch(1,performSearch(QueryBuilders.fieldQuery("@message","TEST2")),null,event2);
  assertSearch(1,performSearch(QueryBuilders.fieldQuery("@message","TEST3")),null,event3);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldIndexFiveEvents() throws Exception {
  parameters.put(BATCH_SIZE,"5");
  Configurables.configure(fixture,new Context(parameters));
  Channel channel=bindAndStartChannel(fixture);
  int numberOfEvents=5;
  Event[] events=new Event[numberOfEvents];
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < numberOfEvents; i++) {
    String body="event #" + i + " of "+ numberOfEvents;
    Event event=EventBuilder.withBody(body.getBytes());
    events[i]=event;
    channel.put(event);
  }
  tx.commit();
  tx.close();
  fixture.process();
  fixture.stop();
  client.admin().indices().refresh(Requests.refreshRequest(timestampedIndexName)).actionGet();
  assertMatchAllQuery(numberOfEvents,events);
  assertBodyQuery(5,events);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldFailToConfigureWithInvalidSerializerClass() throws Exception {
  parameters.put(SERIALIZER,"java.lang.String");
  try {
    Configurables.configure(fixture,new Context(parameters));
  }
 catch (  ClassCastException e) {
  }
  parameters.put(SERIALIZER,FakeConfigurable.class.getName());
  try {
    Configurables.configure(fixture,new Context(parameters));
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TestElasticSearchSinkCreation </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSinkCreation(){
  verifySinkCreation("elasticsearch-sink","elasticsearch",ElasticSearchSink.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.client.TestElasticSearchClientFactory </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NoSuchClientTypeException.class) public void shouldThrowNoSuchClientTypeException() throws NoSuchClientTypeException {
  String[] hostNames={"127.0.0.1"};
  factory.getClient("not_existing_client",hostNames,"test",null,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.client.TestElasticSearchRestClient </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=EventDeliveryException.class) public void shouldThrowEventDeliveryException() throws Exception {
  ArgumentCaptor<HttpPost> argument=ArgumentCaptor.forClass(HttpPost.class);
  when(httpStatus.getStatusCode()).thenReturn(HttpStatus.SC_INTERNAL_SERVER_ERROR);
  when(httpResponse.getStatusLine()).thenReturn(httpStatus);
  when(httpClient.execute(any(HttpUriRequest.class))).thenReturn(httpResponse);
  fixture.addEvent(event,nameBuilder,"bar_type",123);
  fixture.execute();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.client.TestElasticSearchTransportClient </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldAddNewEventWithoutTTL() throws Exception {
  fixture.addEvent(event,nameBuilder,"bar_type",-1);
  verify(indexRequestBuilder).setSource(serializer.getContentBuilder(event).bytes());
  verify(bulkRequestBuilder).add(indexRequestBuilder);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=EventDeliveryException.class) public void shouldThrowExceptionOnExecuteFailed() throws Exception {
  ListenableActionFuture<BulkResponse> action=(ListenableActionFuture<BulkResponse>)mock(ListenableActionFuture.class);
  BulkResponse response=mock(BulkResponse.class);
  when(bulkRequestBuilder.execute()).thenReturn(action);
  when(action.actionGet()).thenReturn(response);
  when(response.hasFailures()).thenReturn(true);
  fixture.addEvent(event,nameBuilder,"bar_type",10);
  fixture.execute();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldAddNewEventWithTTL() throws Exception {
  fixture.addEvent(event,nameBuilder,"bar_type",10);
  verify(indexRequestBuilder).setTTL(10);
  verify(indexRequestBuilder).setSource(serializer.getContentBuilder(event).bytes());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldExecuteBulkRequestBuilder() throws Exception {
  ListenableActionFuture<BulkResponse> action=(ListenableActionFuture<BulkResponse>)mock(ListenableActionFuture.class);
  BulkResponse response=mock(BulkResponse.class);
  when(bulkRequestBuilder.execute()).thenReturn(action);
  when(action.actionGet()).thenReturn(response);
  when(response.hasFailures()).thenReturn(false);
  fixture.addEvent(event,nameBuilder,"bar_type",10);
  fixture.execute();
  verify(bulkRequestBuilder).execute();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hbase.TestAsyncHBaseSink </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleBatchesBatchIncrementsNoCoalescing() throws Exception {
  doTestMultipleBatchesBatchIncrements(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleBatchesBatchIncrementsWithCoalescing() throws Exception {
  doTestMultipleBatchesBatchIncrements(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hbase.TestHBaseSink </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AssertionError.class) public void negativeTestCoalesce() throws EventDeliveryException {
  initContextForIncrementHBaseSerializer();
  ctx.put("batchSize","10");
  final Map<String,Long> expectedCounts=Maps.newHashMap();
  expectedCounts.put("r1:c1",10L);
  HBaseSink.DebugIncrementsCallback cb=new CoalesceValidator(expectedCounts);
  HBaseSink sink=new HBaseSink(testUtility.getConfiguration(),cb);
  Configurables.configure(sink,ctx);
  Channel channel=createAndConfigureMemoryChannel(sink);
  List<Event> events=Lists.newLinkedList();
  generateEvents(events,expectedCounts);
  putEvents(channel,events);
  sink.start();
  sink.process();
  sink.stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCoalesce() throws EventDeliveryException {
  initContextForIncrementHBaseSerializer();
  ctx.put("batchSize","100");
  ctx.put(HBaseSinkConfigurationConstants.CONFIG_COALESCE_INCREMENTS,String.valueOf(true));
  final Map<String,Long> expectedCounts=Maps.newHashMap();
  expectedCounts.put("r1:c1",10L);
  expectedCounts.put("r1:c2",20L);
  expectedCounts.put("r2:c1",7L);
  expectedCounts.put("r2:c3",63L);
  HBaseSink.DebugIncrementsCallback cb=new CoalesceValidator(expectedCounts);
  HBaseSink sink=new HBaseSink(testUtility.getConfiguration(),cb);
  Configurables.configure(sink,ctx);
  Channel channel=createAndConfigureMemoryChannel(sink);
  List<Event> events=Lists.newLinkedList();
  generateEvents(events,expectedCounts);
  putEvents(channel,events);
  sink.start();
  sink.process();
  sink.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hbase.TestHBaseSinkCreation </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSinkCreation(){
  verifySinkCreation("hbase-sink","hbase",HBaseSink.class);
  verifySinkCreation("asynchbase-sink","asynchbase",AsyncHBaseSink.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hdfs.TestAvroEventSerializer </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoCompression() throws IOException {
  createAvroFile(file,null,false);
  validateAvroFile(file);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSchemaUrl() throws IOException {
  createAvroFile(file,null,true);
  validateAvroFile(file);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSnappyCompression() throws IOException {
  createAvroFile(file,"snappy",false);
  validateAvroFile(file);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNullCompression() throws IOException {
  createAvroFile(file,"null",false);
  validateAvroFile(file);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeflateCompression() throws IOException {
  createAvroFile(file,"deflate",false);
  validateAvroFile(file);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hdfs.TestBucketWriter </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIntervalRollerBug() throws IOException, InterruptedException {
  final int ROLL_INTERVAL=1;
  final int NUM_EVENTS=10;
  HDFSWriter hdfsWriter=new HDFSWriter(){
    private volatile boolean open=false;
    public void configure(    Context context){
    }
    public void sync() throws IOException {
      if (!open) {
        throw new IOException("closed");
      }
    }
    public void open(    String filePath,    CompressionCodec codec,    CompressionType cType) throws IOException {
      open=true;
    }
    public void open(    String filePath) throws IOException {
      open=true;
    }
    public void close() throws IOException {
      open=false;
    }
    @Override public boolean isUnderReplicated(){
      return false;
    }
    public void append(    Event e) throws IOException {
      open=true;
    }
  }
;
  HDFSTextSerializer serializer=new HDFSTextSerializer();
  File tmpFile=File.createTempFile("flume","test");
  tmpFile.deleteOnExit();
  String path=tmpFile.getParent();
  String name=tmpFile.getName();
  BucketWriter bucketWriter=new BucketWriter(ROLL_INTERVAL,0,0,0,ctx,path,name,"",".tmp",null,null,SequenceFile.CompressionType.NONE,hdfsWriter,timedRollerPool,proxy,new SinkCounter("test-bucket-writer-" + System.currentTimeMillis()),0,null,null,30000,Executors.newSingleThreadExecutor(),0,0);
  Event e=EventBuilder.withBody("foo",Charsets.UTF_8);
  for (int i=0; i < NUM_EVENTS - 1; i++) {
    bucketWriter.append(e);
  }
  Thread.sleep(2 * ROLL_INTERVAL * 1000L);
  bucketWriter.flush();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSequenceFileRenameRetries() throws Exception {
  SequenceFileRenameRetryCoreTest(1,true);
  SequenceFileRenameRetryCoreTest(5,true);
  SequenceFileRenameRetryCoreTest(2,true);
  SequenceFileRenameRetryCoreTest(1,false);
  SequenceFileRenameRetryCoreTest(5,false);
  SequenceFileRenameRetryCoreTest(2,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hdfs.TestHDFSEventSink </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Ensure that when a write throws an IOException we are
 * able to continue to progress in the next process() call.
 * This relies on Transactional rollback semantics for durability and
 * the behavior of the BucketWriter class of close()ing upon IOException.
 */
@Test public void testCloseReopen() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  LOG.debug("Starting...");
  final int numBatches=4;
  final String fileName="FlumeData";
  final long rollCount=5;
  final long batchSize=2;
  String newPath=testPath + "/singleBucket";
  int i=1, j=1;
  HDFSTestWriterFactory badWriterFactory=new HDFSTestWriterFactory();
  sink=new HDFSEventSink(badWriterFactory);
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  Path dirPath=new Path(newPath);
  fs.delete(dirPath,true);
  fs.mkdirs(dirPath);
  Context context=new Context();
  context.put("hdfs.path",newPath);
  context.put("hdfs.filePrefix",fileName);
  context.put("hdfs.rollCount",String.valueOf(rollCount));
  context.put("hdfs.batchSize",String.valueOf(batchSize));
  context.put("hdfs.fileType",HDFSTestWriterFactory.TestSequenceFileType);
  Configurables.configure(sink,context);
  MemoryChannel channel=new MemoryChannel();
  Configurables.configure(channel,new Context());
  sink.setChannel(channel);
  sink.start();
  Calendar eventDate=Calendar.getInstance();
  List<String> bodies=Lists.newArrayList();
  for (i=1; i < numBatches; i++) {
    channel.getTransaction().begin();
    try {
      for (j=1; j <= batchSize; j++) {
        Event event=new SimpleEvent();
        eventDate.clear();
        eventDate.set(2011,i,i,i,0);
        event.getHeaders().put("timestamp",String.valueOf(eventDate.getTimeInMillis()));
        event.getHeaders().put("hostname","Host" + i);
        String body="Test." + i + "."+ j;
        event.setBody(body.getBytes());
        bodies.add(body);
        event.getHeaders().put("fault-until-reopen","");
        channel.put(event);
      }
      channel.getTransaction().commit();
    }
  finally {
      channel.getTransaction().close();
    }
    LOG.info("execute sink to process the events: " + sink.process());
  }
  LOG.info("clear any events pending due to errors: " + sink.process());
  sink.stop();
  verifyOutputSequenceFiles(fs,conf,dirPath.toUri().getPath(),fileName,bodies);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppend() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  LOG.debug("Starting...");
  final long rollCount=3;
  final long batchSize=2;
  final String fileName="FlumeData";
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  Path dirPath=new Path(testPath);
  fs.delete(dirPath,true);
  fs.mkdirs(dirPath);
  Context context=new Context();
  context.put("hdfs.path",testPath + "/%Y-%m-%d/%H");
  context.put("hdfs.timeZone","UTC");
  context.put("hdfs.filePrefix",fileName);
  context.put("hdfs.rollCount",String.valueOf(rollCount));
  context.put("hdfs.batchSize",String.valueOf(batchSize));
  Configurables.configure(sink,context);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.start();
  Calendar eventDate=Calendar.getInstance();
  List<String> bodies=Lists.newArrayList();
  for (int i=1; i < 4; i++) {
    Transaction txn=channel.getTransaction();
    txn.begin();
    for (int j=1; j <= batchSize; j++) {
      Event event=new SimpleEvent();
      eventDate.clear();
      eventDate.set(2011,i,i,i,0);
      event.getHeaders().put("timestamp",String.valueOf(eventDate.getTimeInMillis()));
      event.getHeaders().put("hostname","Host" + i);
      String body="Test." + i + "."+ j;
      event.setBody(body.getBytes());
      bodies.add(body);
      channel.put(event);
    }
    txn.commit();
    txn.close();
    sink.process();
  }
  sink.stop();
  verifyOutputSequenceFiles(fs,conf,dirPath.toUri().getPath(),fileName,bodies);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLifecycle() throws InterruptedException, LifecycleException {
  LOG.debug("Starting...");
  Context context=new Context();
  context.put("hdfs.path",testPath);
  Configurables.configure(sink,context);
  sink.setChannel(new MemoryChannel());
  sink.start();
  sink.stop();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSlowAppendWithoutTimeout() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  LOG.debug("Starting...");
  slowAppendTestHelper(0);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRetryRename() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  testRetryRename(true);
  testRetryRename(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSlowAppendWithLongTimeout() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  LOG.debug("Starting...");
  slowAppendTestHelper(3000);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTextBatchAppend() throws Exception {
  doTestTextBatchAppend(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBadSimpleAppend() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  LOG.debug("Starting...");
  final String fileName="FlumeData";
  final long rollCount=5;
  final long batchSize=2;
  final int numBatches=4;
  String newPath=testPath + "/singleBucket";
  int totalEvents=0;
  int i=1, j=1;
  HDFSTestWriterFactory badWriterFactory=new HDFSTestWriterFactory();
  sink=new HDFSEventSink(badWriterFactory);
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  Path dirPath=new Path(newPath);
  fs.delete(dirPath,true);
  fs.mkdirs(dirPath);
  Context context=new Context();
  context.put("hdfs.path",newPath);
  context.put("hdfs.filePrefix",fileName);
  context.put("hdfs.rollCount",String.valueOf(rollCount));
  context.put("hdfs.batchSize",String.valueOf(batchSize));
  context.put("hdfs.fileType",HDFSTestWriterFactory.TestSequenceFileType);
  Configurables.configure(sink,context);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.start();
  Calendar eventDate=Calendar.getInstance();
  List<String> bodies=Lists.newArrayList();
  for (i=1; i < numBatches; i++) {
    Transaction txn=channel.getTransaction();
    txn.begin();
    for (j=1; j <= batchSize; j++) {
      Event event=new SimpleEvent();
      eventDate.clear();
      eventDate.set(2011,i,i,i,0);
      event.getHeaders().put("timestamp",String.valueOf(eventDate.getTimeInMillis()));
      event.getHeaders().put("hostname","Host" + i);
      String body="Test." + i + "."+ j;
      event.setBody(body.getBytes());
      bodies.add(body);
      if ((totalEvents % 30) == 1) {
        event.getHeaders().put("fault-once","");
      }
      channel.put(event);
      totalEvents++;
    }
    txn.commit();
    txn.close();
    LOG.info("Process events: " + sink.process());
  }
  LOG.info("Process events to end of transaction max: " + sink.process());
  LOG.info("Process events to injected fault: " + sink.process());
  LOG.info("Process events remaining events: " + sink.process());
  sink.stop();
  verifyOutputSequenceFiles(fs,conf,dirPath.toUri().getPath(),fileName,bodies);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTextBatchAppendRawFS() throws Exception {
  doTestTextBatchAppend(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hive.TestHiveSink </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleWriterSimplePartitionedTable() throws EventDeliveryException, IOException, CommandNeedRetryException {
  int totalRecords=4;
  int batchSize=2;
  int batchCount=totalRecords / batchSize;
  Context context=new Context();
  context.put("hive.metastore",metaStoreURI);
  context.put("hive.database",dbName);
  context.put("hive.table",tblName);
  context.put("hive.partition",PART1_VALUE + "," + PART2_VALUE);
  context.put("autoCreatePartitions","false");
  context.put("batchSize","" + batchSize);
  context.put("serializer",HiveDelimitedTextSerializer.ALIAS);
  context.put("serializer.fieldnames",COL1 + ",," + COL2+ ",");
  context.put("heartBeatInterval","0");
  Channel channel=startSink(sink,context);
  List<String> bodies=Lists.newArrayList();
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int j=1; j <= totalRecords; j++) {
    Event event=new SimpleEvent();
    String body=j + ",blah,This is a log message,other stuff";
    event.setBody(body.getBytes());
    bodies.add(body);
    channel.put(event);
  }
  txn.commit();
  txn.close();
  checkRecordCountInTable(0,dbName,tblName);
  for (int i=0; i < batchCount; i++) {
    sink.process();
  }
  sink.stop();
  checkRecordCountInTable(totalRecords,dbName,tblName);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHeartBeat() throws EventDeliveryException, IOException, CommandNeedRetryException {
  int batchSize=2;
  int batchCount=3;
  int totalRecords=batchCount * batchSize;
  Context context=new Context();
  context.put("hive.metastore",metaStoreURI);
  context.put("hive.database",dbName);
  context.put("hive.table",tblName);
  context.put("hive.partition",PART1_VALUE + "," + PART2_VALUE);
  context.put("autoCreatePartitions","true");
  context.put("batchSize","" + batchSize);
  context.put("serializer",HiveDelimitedTextSerializer.ALIAS);
  context.put("serializer.fieldnames",COL1 + ",," + COL2+ ",");
  context.put("hive.txnsPerBatchAsk","20");
  context.put("heartBeatInterval","3");
  Channel channel=startSink(sink,context);
  List<String> bodies=Lists.newArrayList();
  for (int i=0; i < batchCount; i++) {
    Transaction txn=channel.getTransaction();
    txn.begin();
    for (int j=1; j <= batchSize; j++) {
      Event event=new SimpleEvent();
      String body=i * j + ",blah,This is a log message,other stuff";
      event.setBody(body.getBytes());
      bodies.add(body);
      channel.put(event);
    }
    txn.commit();
    txn.close();
    sink.process();
    sleep(3000);
  }
  sink.stop();
  checkRecordCountInTable(totalRecords,dbName,tblName);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleWriterSimpleUnPartitionedTable() throws Exception {
  TestUtil.dropDB(conf,dbName2);
  String dbLocation=dbFolder.newFolder(dbName2).getCanonicalPath() + ".db";
  dbLocation=dbLocation.replaceAll("\\\\","/");
  TestUtil.createDbAndTable(driver,dbName2,tblName2,null,colNames2,colTypes2,null,dbLocation);
  try {
    int totalRecords=4;
    int batchSize=2;
    int batchCount=totalRecords / batchSize;
    Context context=new Context();
    context.put("hive.metastore",metaStoreURI);
    context.put("hive.database",dbName2);
    context.put("hive.table",tblName2);
    context.put("autoCreatePartitions","false");
    context.put("batchSize","" + batchSize);
    context.put("serializer",HiveDelimitedTextSerializer.ALIAS);
    context.put("serializer.fieldnames",COL1 + ",," + COL2+ ",");
    context.put("heartBeatInterval","0");
    Channel channel=startSink(sink,context);
    List<String> bodies=Lists.newArrayList();
    Transaction txn=channel.getTransaction();
    txn.begin();
    for (int j=1; j <= totalRecords; j++) {
      Event event=new SimpleEvent();
      String body=j + ",blah,This is a log message,other stuff";
      event.setBody(body.getBytes());
      bodies.add(body);
      channel.put(event);
    }
    txn.commit();
    txn.close();
    checkRecordCountInTable(0,dbName2,tblName2);
    for (int i=0; i < batchCount; i++) {
      sink.process();
    }
    checkRecordCountInTable(totalRecords,dbName2,tblName2);
    sink.stop();
    checkRecordCountInTable(totalRecords,dbName2,tblName2);
  }
  finally {
    TestUtil.dropDB(conf,dbName2);
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJsonSerializer() throws Exception {
  int batchSize=2;
  int batchCount=2;
  int totalRecords=batchCount * batchSize;
  Context context=new Context();
  context.put("hive.metastore",metaStoreURI);
  context.put("hive.database",dbName);
  context.put("hive.table",tblName);
  context.put("hive.partition",PART1_VALUE + "," + PART2_VALUE);
  context.put("autoCreatePartitions","true");
  context.put("batchSize","" + batchSize);
  context.put("serializer",HiveJsonSerializer.ALIAS);
  context.put("serializer.fieldnames",COL1 + ",," + COL2+ ",");
  context.put("heartBeatInterval","0");
  Channel channel=startSink(sink,context);
  List<String> bodies=Lists.newArrayList();
  for (int i=0; i < batchCount; i++) {
    Transaction txn=channel.getTransaction();
    txn.begin();
    for (int j=1; j <= batchSize; j++) {
      Event event=new SimpleEvent();
      String body="{\"id\" : 1, \"msg\" : \"using json serializer\"}";
      event.setBody(body.getBytes());
      bodies.add(body);
      channel.put(event);
    }
    txn.commit();
    txn.close();
    sink.process();
  }
  checkRecordCountInTable(totalRecords,dbName,tblName);
  sink.stop();
  checkRecordCountInTable(totalRecords,dbName,tblName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hive.TestHiveWriter </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInstantiate() throws Exception {
  HiveEndPoint endPoint=new HiveEndPoint(metaStoreURI,dbName,tblName,partVals);
  SinkCounter sinkCounter=new SinkCounter(this.getClass().getName());
  HiveWriter writer=new HiveWriter(endPoint,10,true,timeout,callTimeoutPool,"flumetest",serializer,sinkCounter);
  writer.close();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteBasic() throws Exception {
  HiveEndPoint endPoint=new HiveEndPoint(metaStoreURI,dbName,tblName,partVals);
  SinkCounter sinkCounter=new SinkCounter(this.getClass().getName());
  HiveWriter writer=new HiveWriter(endPoint,10,true,timeout,callTimeoutPool,"flumetest",serializer,sinkCounter);
  writeEvents(writer,3);
  writer.flush(false);
  writer.close();
  checkRecordCountInTable(3);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSecondWriterBeforeFirstCommits() throws Exception {
  HiveEndPoint endPoint1=new HiveEndPoint(metaStoreURI,dbName,tblName,partVals);
  ArrayList<String> partVals2=new ArrayList<String>(2);
  partVals2.add(PART1_VALUE);
  partVals2.add("Nepal");
  HiveEndPoint endPoint2=new HiveEndPoint(metaStoreURI,dbName,tblName,partVals2);
  SinkCounter sinkCounter1=new SinkCounter(this.getClass().getName());
  SinkCounter sinkCounter2=new SinkCounter(this.getClass().getName());
  HiveWriter writer1=new HiveWriter(endPoint1,10,true,timeout,callTimeoutPool,"flumetest",serializer,sinkCounter1);
  writeEvents(writer1,3);
  HiveWriter writer2=new HiveWriter(endPoint2,10,true,timeout,callTimeoutPool,"flumetest",serializer,sinkCounter2);
  writeEvents(writer2,3);
  writer2.flush(false);
  writer1.flush(false);
  writer1.close();
  writer2.close();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSecondWriterAfterFirstCommits() throws Exception {
  HiveEndPoint endPoint1=new HiveEndPoint(metaStoreURI,dbName,tblName,partVals);
  ArrayList<String> partVals2=new ArrayList<String>(2);
  partVals2.add(PART1_VALUE);
  partVals2.add("Nepal");
  HiveEndPoint endPoint2=new HiveEndPoint(metaStoreURI,dbName,tblName,partVals2);
  SinkCounter sinkCounter1=new SinkCounter(this.getClass().getName());
  SinkCounter sinkCounter2=new SinkCounter(this.getClass().getName());
  HiveWriter writer1=new HiveWriter(endPoint1,10,true,timeout,callTimeoutPool,"flumetest",serializer,sinkCounter1);
  writeEvents(writer1,3);
  writer1.flush(false);
  HiveWriter writer2=new HiveWriter(endPoint2,10,true,timeout,callTimeoutPool,"flumetest",serializer,sinkCounter2);
  writeEvents(writer2,3);
  writer2.flush(false);
  writer1.close();
  writer2.close();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Sets up input fields to have same order as table columns,
 * Also sets the separator on serde to be same as i/p field separator
 * @throws Exception
 */
@Test public void testInOrderWrite() throws Exception {
  HiveEndPoint endPoint=new HiveEndPoint(metaStoreURI,dbName,tblName,partVals);
  SinkCounter sinkCounter=new SinkCounter(this.getClass().getName());
  int timeout=5000;
  HiveDelimitedTextSerializer serializer2=new HiveDelimitedTextSerializer();
  Context ctx=new Context();
  ctx.put("serializer.fieldnames",COL1 + "," + COL2);
  ctx.put("serializer.serdeSeparator",",");
  serializer2.configure(ctx);
  HiveWriter writer=new HiveWriter(endPoint,10,true,timeout,callTimeoutPool,"flumetest",serializer2,sinkCounter);
  SimpleEvent event=new SimpleEvent();
  event.setBody("1,Hello world 1".getBytes());
  writer.write(event);
  event.setBody("2,Hello world 2".getBytes());
  writer.write(event);
  event.setBody("3,Hello world 3".getBytes());
  writer.write(event);
  writer.flush(false);
  writer.close();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteMultiFlush() throws Exception {
  HiveEndPoint endPoint=new HiveEndPoint(metaStoreURI,dbName,tblName,partVals);
  SinkCounter sinkCounter=new SinkCounter(this.getClass().getName());
  HiveWriter writer=new HiveWriter(endPoint,10,true,timeout,callTimeoutPool,"flumetest",serializer,sinkCounter);
  checkRecordCountInTable(0);
  SimpleEvent event=new SimpleEvent();
  String REC1="1,xyz,Hello world,abc";
  event.setBody(REC1.getBytes());
  writer.write(event);
  checkRecordCountInTable(0);
  writer.flush(true);
  checkRecordCountInTable(1);
  String REC2="2,xyz,Hello world,abc";
  event.setBody(REC2.getBytes());
  writer.write(event);
  checkRecordCountInTable(1);
  writer.flush(true);
  checkRecordCountInTable(2);
  String REC3="3,xyz,Hello world,abc";
  event.setBody(REC3.getBytes());
  writer.write(event);
  writer.flush(true);
  checkRecordCountInTable(3);
  writer.close();
  checkRecordCountInTable(3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.kite.TestDatasetSink </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppendWriteExceptionInvokesPolicy() throws EventDeliveryException, NonRecoverableEventException {
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  Event mockEvent=mock(Event.class);
  when(mockEvent.getBody()).thenReturn(new byte[]{0x01});
  GenericRecord mockRecord=mock(GenericRecord.class);
  EntityParser<GenericRecord> mockParser=mock(EntityParser.class);
  when(mockParser.parse(eq(mockEvent),any(GenericRecord.class))).thenReturn(mockRecord);
  sink.setParser(mockParser);
  FailurePolicy mockFailurePolicy=mock(FailurePolicy.class);
  sink.setFailurePolicy(mockFailurePolicy);
  DatasetWriter<GenericRecord> mockWriter=mock(DatasetWriter.class);
  doThrow(new DataFileWriter.AppendWriteException(new IOException())).when(mockWriter).write(mockRecord);
  sink.setWriter(mockWriter);
  sink.write(mockEvent);
  verify(mockFailurePolicy).handle(eq(mockEvent),any(Throwable.class));
  sink.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.solr.morphline.TestBlobDeserializer </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleViaBuilder() throws IOException {
  ResettableInputStream in=new ResettableTestStringInputStream(mini);
  EventDeserializer.Builder builder=new BlobDeserializer.Builder();
  EventDeserializer des=builder.build(new Context(),in);
  validateMiniParse(des);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleViaFactory() throws IOException {
  ResettableInputStream in=new ResettableTestStringInputStream(mini);
  EventDeserializer des;
  des=EventDeserializerFactory.getInstance(BlobDeserializer.Builder.class.getName(),new Context(),in);
  validateMiniParse(des);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimple() throws IOException {
  ResettableInputStream in=new ResettableTestStringInputStream(mini);
  EventDeserializer des=new BlobDeserializer(new Context(),in);
  validateMiniParse(des);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.solr.morphline.TestMorphlineInterceptor </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIfDetectMimeTypeRouteToSouthPole() throws Exception {
  Context context=new Context();
  context.put(MorphlineHandlerImpl.MORPHLINE_FILE_PARAM,RESOURCES_DIR + "/test-morphlines/ifDetectMimeType.conf");
  context.put(MorphlineHandlerImpl.MORPHLINE_VARIABLE_PARAM + ".MY.MIME_TYPE","avro/binary");
  Event input=EventBuilder.withBody(Files.toByteArray(new File(RESOURCES_DIR + "/test-documents/sample-statuses-20120906-141433.avro")));
  Event actual=build(context).intercept(input);
  Map<String,String> expected=new HashMap();
  expected.put(Fields.ATTACHMENT_MIME_TYPE,"avro/binary");
  expected.put("flume.selector.header","goToSouthPole");
  Event expectedEvent=EventBuilder.withBody(input.getBody(),expected);
  assertEqualsEvent(expectedEvent,actual);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReadClob() throws Exception {
  Context context=new Context();
  context.put(MorphlineHandlerImpl.MORPHLINE_FILE_PARAM,RESOURCES_DIR + "/test-morphlines/readClob.conf");
  Event input=EventBuilder.withBody("foo",Charsets.UTF_8);
  input.getHeaders().put("name","nadja");
  Event actual=build(context).intercept(input);
  Event expected=EventBuilder.withBody(null,ImmutableMap.of("name","nadja",Fields.MESSAGE,"foo"));
  assertEqualsEvent(expected,actual);
  List<Event> actualList=build(context).intercept(Collections.singletonList(input));
  List<Event> expectedList=Collections.singletonList(expected);
  assertEqualsEventList(expectedList,actualList);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIfDetectMimeTypeRouteToNorthPole() throws Exception {
  Context context=new Context();
  context.put(MorphlineHandlerImpl.MORPHLINE_FILE_PARAM,RESOURCES_DIR + "/test-morphlines/ifDetectMimeType.conf");
  context.put(MorphlineHandlerImpl.MORPHLINE_VARIABLE_PARAM + ".MY.MIME_TYPE","avro/binary");
  Event input=EventBuilder.withBody(Files.toByteArray(new File(RESOURCES_DIR + "/test-documents/testPDF.pdf")));
  Event actual=build(context).intercept(input);
  Map<String,String> expected=new HashMap();
  expected.put(Fields.ATTACHMENT_MIME_TYPE,"application/pdf");
  expected.put("flume.selector.header","goToNorthPole");
  Event expectedEvent=EventBuilder.withBody(input.getBody(),expected);
  assertEqualsEvent(expectedEvent,actual);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoOperation() throws Exception {
  Context context=new Context();
  context.put(MorphlineHandlerImpl.MORPHLINE_FILE_PARAM,RESOURCES_DIR + "/test-morphlines/noOperation.conf");
  Event input=EventBuilder.withBody("foo",Charsets.UTF_8);
  input.getHeaders().put("name","nadja");
  MorphlineInterceptor interceptor=build(context);
  Event actual=interceptor.intercept(input);
  interceptor.close();
  Event expected=EventBuilder.withBody("foo".getBytes("UTF-8"),ImmutableMap.of("name","nadja"));
  assertEqualsEvent(expected,actual);
  List<Event> actualList=build(context).intercept(Collections.singletonList(input));
  List<Event> expectedList=Collections.singletonList(expected);
  assertEqualsEventList(expectedList,actualList);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGrokIfNotMatchDropEventRetain() throws Exception {
  Context context=new Context();
  context.put(MorphlineHandlerImpl.MORPHLINE_FILE_PARAM,RESOURCES_DIR + "/test-morphlines/grokIfNotMatchDropRecord.conf");
  String msg="<164>Feb  4 10:46:14 syslog sshd[607]: Server listening on 0.0.0.0 port 22.";
  Event input=EventBuilder.withBody(null,ImmutableMap.of(Fields.MESSAGE,msg));
  Event actual=build(context).intercept(input);
  Map<String,String> expected=new HashMap();
  expected.put(Fields.MESSAGE,msg);
  expected.put("syslog_pri","164");
  expected.put("syslog_timestamp","Feb  4 10:46:14");
  expected.put("syslog_hostname","syslog");
  expected.put("syslog_program","sshd");
  expected.put("syslog_pid","607");
  expected.put("syslog_message","Server listening on 0.0.0.0 port 22.");
  Event expectedEvent=EventBuilder.withBody(null,expected);
  assertEqualsEvent(expectedEvent,actual);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.solr.morphline.TestMorphlineSolrSink </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDocumentTypes2() throws Exception {
  String path=RESOURCES_DIR + "/test-documents";
  String[] files=new String[]{path + "/testPPT_various.ppt",path + "/testPPT_various.pptx",path + "/testEXCEL.xlsx",path + "/testEXCEL.xls",path + "/testPages.pages",path + "/testNumbers.numbers",path + "/testKeynote.key",path + "/testRTFVarious.rtf",path + "/complex.mbox",path + "/test-outlook.msg",path + "/testEMLX.emlx",path + "/rsstest.rss",path + "/testMP3i18n.mp3",path + "/testAIFF.aif",path + "/testFLAC.flac",path + "/testMP4.m4a",path + "/testWAV.wav",path + "/testFLV.flv",path + "/testBMP.bmp",path + "/testPNG.png",path + "/testPSD.psd",path + "/testSVG.svg",path + "/testTIFF.tif",path + "/testTrueType.ttf",path + "/testVISIO.vsd"};
  testDocumentTypesInternal(files);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDocumentTypes() throws Exception {
  String path=RESOURCES_DIR + "/test-documents";
  String[] files=new String[]{path + "/testBMPfp.txt",path + "/boilerplate.html",path + "/NullHeader.docx",path + "/testWORD_various.doc",path + "/testPDF.pdf",path + "/testJPEG_EXIF.jpg",path + "/testXML.xml",path + "/sample-statuses-20120906-141433.avro",path + "/sample-statuses-20120906-141433",path + "/sample-statuses-20120906-141433.gz",path + "/sample-statuses-20120906-141433.bz2"};
  testDocumentTypesInternal(files);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestAbstractPollableSource </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testExceptionStartup() throws Exception {
  source.configure(new Context());
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=EventDeliveryException.class) public void testNotStarted() throws Exception {
  source.process();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestAvroSource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRequestWithNoCompression() throws InterruptedException, IOException {
  doRequest(false,false,6);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRequestWithCompressionOnClientAndServerOnLevel6() throws InterruptedException, IOException {
  doRequest(true,true,6);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidIpFilterAllows() throws InterruptedException, IOException {
  doIpFilterTest(localhost,"allow:name:localhost,deny:ip:*",true,false);
  doIpFilterTest(localhost,"allow:ip:" + localhost.getHostAddress() + ",deny:ip:*",true,false);
  doIpFilterTest(localhost,"allow:ip:*",true,false);
  doIpFilterTest(localhost,"allow:ip:" + localhost.getHostAddress().substring(0,3) + "*,deny:ip:*",true,false);
  doIpFilterTest(localhost,"allow:ip:127.0.0.2,allow:ip:" + localhost.getHostAddress().substring(0,3) + "*,deny:ip:*",true,false);
  doIpFilterTest(localhost,"allow:name:localhost,deny:ip:*",true,true);
  doIpFilterTest(localhost,"allow:ip:*",true,true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRequestWithCompressionOnClientAndServerOnLevel1() throws InterruptedException, IOException {
  doRequest(true,true,1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidIpFilterDenys() throws InterruptedException, IOException {
  doIpFilterTest(localhost,"deny:ip:*",false,false);
  doIpFilterTest(localhost,"deny:name:localhost",false,false);
  doIpFilterTest(localhost,"deny:ip:" + localhost.getHostAddress() + ",allow:ip:*",false,false);
  doIpFilterTest(localhost,"deny:ip:*",false,false);
  doIpFilterTest(localhost,"allow:ip:45.2.2.2,deny:ip:*",false,false);
  doIpFilterTest(localhost,"deny:ip:" + localhost.getHostAddress().substring(0,3) + "*,allow:ip:*",false,false);
  doIpFilterTest(localhost,"deny:ip:*",false,true);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRequestWithCompressionOnClientAndServerOnLevel9() throws InterruptedException, IOException {
  doRequest(true,true,9);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=org.apache.avro.AvroRemoteException.class) public void testRequestWithCompressionOnServerOnly() throws InterruptedException, IOException {
  doRequest(true,false,6);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRequestWithCompressionOnClientAndServerOnLevel0() throws InterruptedException, IOException {
  doRequest(true,true,0);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=org.apache.avro.AvroRemoteException.class) public void testRequestWithCompressionOnClientOnly() throws InterruptedException, IOException {
  doRequest(false,true,6);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestDefaultSourceFactory </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSourceCreation() throws Exception {
  verifySourceCreation("seq-src","seq",SequenceGeneratorSource.class);
  verifySourceCreation("netcat-src","netcat",NetcatSource.class);
  verifySourceCreation("exec-src","exec",ExecSource.class);
  verifySourceCreation("avro-src","avro",AvroSource.class);
  verifySourceCreation("syslogtcp-src","syslogtcp",SyslogTcpSource.class);
  verifySourceCreation("multiport_syslogtcp-src","multiport_syslogtcp",MultiportSyslogTCPSource.class);
  verifySourceCreation("syslogudp-src","syslogudp",SyslogUDPSource.class);
  verifySourceCreation("spooldir-src","spooldir",SpoolDirectorySource.class);
  verifySourceCreation("http-src","http",HTTPSource.class);
  verifySourceCreation("thrift-src","thrift",ThriftSource.class);
  verifySourceCreation("custom-src",MockSource.class.getCanonicalName(),MockSource.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestExecSource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShellCommandBackTicks() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  if (SystemUtils.IS_OS_WINDOWS) {
    runTestShellCmdHelper("powershell -ExecutionPolicy Unrestricted -command","$(1..5)",new String[]{"1","2","3","4","5"});
  }
 else {
    runTestShellCmdHelper("/bin/bash -c","echo `seq 5`",new String[]{"1 2 3 4 5"});
    runTestShellCmdHelper("/bin/bash -c","echo $(seq 5)",new String[]{"1 2 3 4 5"});
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShellCommandSimple() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  if (SystemUtils.IS_OS_WINDOWS) {
    runTestShellCmdHelper("powershell -ExecutionPolicy Unrestricted -command","1..5",new String[]{"1","2","3","4","5"});
  }
 else {
    runTestShellCmdHelper("/bin/bash -c","seq 5",new String[]{"1","2","3","4","5"});
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShellCommandComplex() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  String[] expected={"1234","abcd","ijk","xyz","zzz"};
  if (SystemUtils.IS_OS_WINDOWS) {
    runTestShellCmdHelper("powershell -ExecutionPolicy Unrestricted -command","'zzz','1234','xyz','abcd','ijk' | sort",expected);
  }
 else {
    runTestShellCmdHelper("/bin/bash -c","echo zzz 1234 xyz abcd ijk | xargs -n1 echo | sort -f",expected);
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShellCommandScript() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  if (SystemUtils.IS_OS_WINDOWS) {
    runTestShellCmdHelper("powershell -ExecutionPolicy Unrestricted -command","foreach ($i in 1..5) { $i }",new String[]{"1","2","3","4","5"});
    runTestShellCmdHelper("powershell -ExecutionPolicy Unrestricted -command","if(2+2 -gt 3) { 'good' } else { 'not good' } ",new String[]{"good"});
  }
 else {
    runTestShellCmdHelper("/bin/bash -c","for i in {1..5}; do echo $i;done",new String[]{"1","2","3","4","5"});
    runTestShellCmdHelper("/bin/bash -c","if ((2+2>3)); " + "then  echo good; else echo not good; fi",new String[]{"good"});
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestPollableSourceRunner </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLifecycle() throws InterruptedException {
  final Channel channel=new MemoryChannel();
  final CountDownLatch latch=new CountDownLatch(50);
  Configurables.configure(channel,new Context());
  final ChannelSelector cs=new ReplicatingChannelSelector();
  cs.setChannels(Lists.newArrayList(channel));
  PollableSource source=new PollableSource(){
    private String name;
    private ChannelProcessor cp=new ChannelProcessor(cs);
    @Override public Status process() throws EventDeliveryException {
      Transaction transaction=channel.getTransaction();
      try {
        transaction.begin();
        Event event=EventBuilder.withBody(String.valueOf("Event " + latch.getCount()).getBytes());
        latch.countDown();
        if (latch.getCount() % 20 == 0) {
          throw new EventDeliveryException("I don't like event:" + event);
        }
        channel.put(event);
        transaction.commit();
        return Status.READY;
      }
 catch (      EventDeliveryException e) {
        logger.error("Unable to deliver event. Exception follows.",e);
        transaction.rollback();
        return Status.BACKOFF;
      }
 finally {
        transaction.close();
      }
    }
    @Override public long getBackOffSleepIncrement(){
      return PollableSourceConstants.DEFAULT_BACKOFF_SLEEP_INCREMENT;
    }
    @Override public long getMaxBackOffSleepInterval(){
      return PollableSourceConstants.DEFAULT_MAX_BACKOFF_SLEEP;
    }
    @Override public void start(){
    }
    @Override public void stop(){
    }
    @Override public LifecycleState getLifecycleState(){
      return null;
    }
    @Override public void setName(    String name){
      this.name=name;
    }
    @Override public String getName(){
      return name;
    }
    @Override public void setChannelProcessor(    ChannelProcessor channelProcessor){
      cp=channelProcessor;
    }
    @Override public ChannelProcessor getChannelProcessor(){
      return cp;
    }
  }
;
  sourceRunner.setSource(source);
  sourceRunner.start();
  latch.await();
  sourceRunner.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSpoolDirectorySource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidSortOrder(){
  Context context=new Context();
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  context.put(SpoolDirectorySourceConfigurationConstants.CONSUME_ORDER,"oLdESt");
  Configurables.configure(source,context);
  context.put(SpoolDirectorySourceConfigurationConstants.CONSUME_ORDER,"yoUnGest");
  Configurables.configure(source,context);
  context.put(SpoolDirectorySourceConfigurationConstants.CONSUME_ORDER,"rAnDom");
  Configurables.configure(source,context);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testInvalidSortOrder(){
  Context context=new Context();
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  context.put(SpoolDirectorySourceConfigurationConstants.CONSUME_ORDER,"undefined");
  Configurables.configure(source,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestStressSource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMaxSuccessfulEvents() throws InterruptedException, EventDeliveryException {
  StressSource source=new StressSource();
  source.setChannelProcessor(mockProcessor);
  Context context=new Context();
  context.put("maxSuccessfulEvents","35");
  source.configure(context);
  source.start();
  for (int i=0; i < 10; i++) {
    source.process();
  }
  doThrow(new ChannelException("stub")).when(mockProcessor).processEvent(getEvent(source));
  source.process();
  doNothing().when(mockProcessor).processEvent(getEvent(source));
  for (int i=0; i < 10; i++) {
    source.process();
  }
  doThrow(new ChannelException("stub")).when(mockProcessor).processEvent(getEvent(source));
  source.process();
  doNothing().when(mockProcessor).processEvent(getEvent(source));
  for (int i=0; i < 50; i++) {
    source.process();
  }
  verify(mockProcessor,times(37)).processEvent(getEvent(source));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMaxTotalEvents() throws InterruptedException, EventDeliveryException {
  StressSource source=new StressSource();
  source.setChannelProcessor(mockProcessor);
  Context context=new Context();
  context.put("maxTotalEvents","35");
  source.configure(context);
  source.start();
  for (int i=0; i < 50; i++) {
    source.process();
  }
  verify(mockProcessor,times(35)).processEvent(getEvent(source));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSyslogTcpSource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveFields() throws IOException {
  runKeepFieldsTest("none");
  runKeepFieldsTest("false");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKeepHostname() throws IOException {
  runKeepFieldsTest("hostname");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKeepTimestamp() throws IOException {
  runKeepFieldsTest("timestamp");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKeepFields() throws IOException {
  runKeepFieldsTest("all");
  runKeepFieldsTest("true");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSyslogUdpSource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKeepHostname() throws IOException {
  runKeepFieldsTest("hostname");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKeepFields() throws IOException {
  runKeepFieldsTest("all");
  runKeepFieldsTest("true");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKeepTimestamp() throws IOException {
  runKeepFieldsTest("timestamp");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveFields() throws IOException {
  runKeepFieldsTest("none");
  runKeepFieldsTest("false");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSyslogUtils </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader3() throws ParseException {
  String stamp1="2012-04-13T11:11:11";
  String format1="yyyy-MM-dd'T'HH:mm:ssZ";
  String host1="ubuntu-11.cloudera.com";
  String data1="some msg";
  String msg1="<10>1 " + stamp1 + "+08:00"+ " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,stamp1 + "+0800",format1,host1,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader1() throws ParseException {
  String stamp1="2012-04-13T11:11:11";
  String format1="yyyy-MM-dd'T'HH:mm:ss";
  String host1="ubuntu-11.cloudera.com";
  String data1="some msg";
  String msg1="<10>1 " + stamp1 + " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,stamp1,format1,host1,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader7() throws ParseException {
  String stamp1="2012-04-13T11:11:11";
  String format1="yyyy-MM-dd'T'HH:mm:ssZ";
  String host1="-";
  String data1="some msg";
  String msg1="<10>1 " + stamp1 + "+08:00"+ " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,stamp1 + "+0800",format1,null,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader5() throws ParseException {
  String stamp1="2012-04-13T11:11:11";
  String format1="yyyy-MM-dd'T'HH:mm:ss";
  String host1="-";
  String data1="some msg";
  String msg1="<10>1 " + stamp1 + " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,stamp1,format1,null,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader8() throws ParseException {
  String stamp1="2012-04-13T11:11:11.999";
  String format1="yyyy-MM-dd'T'HH:mm:ss.S";
  String host1="ubuntu-11.cloudera.com";
  String data1="some msg";
  String msg1="<10>1 " + stamp1 + " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,stamp1,format1,host1,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader10() throws ParseException {
  String stamp1="Apr  1 13:14:04";
  String format1="yyyyMMM d HH:mm:ss";
  String host1="ubuntu-11.cloudera.com";
  String data1="some msg";
  String msg1="<10>" + stamp1 + " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,String.valueOf(Calendar.getInstance().get(Calendar.YEAR)) + stamp1,format1,host1,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestRfc3164HeaderApacheLogWithNulls() throws ParseException {
  String stamp1="Apr  1 13:14:04";
  String format1="yyyyMMM d HH:mm:ss";
  String host1="ubuntu-11.cloudera.com";
  String data1="- hyphen_null_breaks_5424_pattern [07/Jun/2012:14:46:44 -0600]";
  String msg1="<10>" + stamp1 + " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,String.valueOf(Calendar.getInstance().get(Calendar.YEAR)) + stamp1,format1,host1,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader2() throws ParseException {
  String stamp1="2012-04-13T11:11:11";
  String format1="yyyy-MM-dd'T'HH:mm:ssZ";
  String host1="ubuntu-11.cloudera.com";
  String data1="some msg";
  String msg1="<10>1 " + stamp1 + "Z"+ " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,stamp1 + "+0000",format1,host1,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader0() throws ParseException {
  String stamp1="2012-04-13T11:11:11";
  String format1="yyyy-MM-dd'T'HH:mm:ssZ";
  String host1="ubuntu-11.cloudera.com";
  String data1="some msg";
  String msg1="<10>" + stamp1 + "+08:00"+ " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,stamp1 + "+0800",format1,host1,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader6() throws ParseException {
  String stamp1="2012-04-13T11:11:11";
  String format1="yyyy-MM-dd'T'HH:mm:ssZ";
  String host1="-";
  String data1="some msg";
  String msg1="<10>1 " + stamp1 + "Z"+ " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,stamp1 + "+0000",format1,null,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader4() throws ParseException {
  String host1="ubuntu-11.cloudera.com";
  String data1="some msg";
  String msg1="<10>1 " + "-" + " " + host1 + " "+ data1+ "\n";
  checkHeader(msg1,null,null,host1,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader11() throws ParseException {
  String inputStamp="2014-10-03T17:20:01.123456-07:00";
  String outputStamp="2014-10-03T17:20:01.123-07:00";
  String format1="yyyy-MM-dd'T'HH:mm:ss.S";
  String host1="ubuntu-11.cloudera.com";
  String data1="some msg";
  String msg1="<10>" + inputStamp + " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,outputStamp,format1,host1,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestHeader9() throws ParseException {
  String stamp1="Apr 11 13:14:04";
  String format1="yyyyMMM d HH:mm:ss";
  String host1="ubuntu-11.cloudera.com";
  String data1="some msg";
  String msg1="<10>" + stamp1 + " "+ host1+ " "+ data1+ "\n";
  checkHeader(msg1,String.valueOf(Calendar.getInstance().get(Calendar.YEAR)) + stamp1,format1,host1,data1);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKeepFields() throws Exception {
  String stamp1="2012-04-13T11:11:11";
  String format1="yyyy-MM-dd'T'HH:mm:ssZ";
  String host1="ubuntu-11.cloudera.com";
  String data1="some msg";
  String msg1="<10>1 " + stamp1 + "+08:00"+ " "+ host1+ " "+ data1+ "\n";
  checkHeader("none",msg1,stamp1 + "+0800",format1,host1,data1);
  checkHeader("false",msg1,stamp1 + "+0800",format1,host1,data1);
  String data2="ubuntu-11.cloudera.com some msg";
  checkHeader("hostname",msg1,stamp1 + "+0800",format1,host1,data2);
  String data3="2012-04-13T11:11:11+08:00 ubuntu-11.cloudera.com some msg";
  checkHeader("timestamp hostname",msg1,stamp1 + "+0800",format1,host1,data3);
  String data4="<10>2012-04-13T11:11:11+08:00 ubuntu-11.cloudera.com some msg";
  checkHeader("priority timestamp hostname",msg1,stamp1 + "+0800",format1,host1,data4);
  String data5="<10>1 2012-04-13T11:11:11+08:00 ubuntu-11.cloudera.com some msg";
  checkHeader("priority version timestamp hostname",msg1,stamp1 + "+0800",format1,host1,data5);
  checkHeader("all",msg1,stamp1 + "+0800",format1,host1,data5);
  checkHeader("true",msg1,stamp1 + "+0800",format1,host1,data5);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.http.TestBLOBHandler </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings({"rawtypes"}) @Test(expected=IllegalArgumentException.class) public void testMissingParameters() throws Exception {
  Map requestParameterMap=new HashMap();
  HttpServletRequest req=mock(HttpServletRequest.class);
  final String tabData="a\tb\tc";
  ServletInputStream servletInputStream=new DelegatingServletInputStream(new ByteArrayInputStream(tabData.getBytes()));
  when(req.getInputStream()).thenReturn(servletInputStream);
  when(req.getParameterMap()).thenReturn(requestParameterMap);
  Context context=mock(Context.class);
  when(context.getString(BLOBHandler.MANDATORY_PARAMETERS,BLOBHandler.DEFAULT_MANDATORY_PARAMETERS)).thenReturn("param1");
  handler.configure(context);
  handler.getEvents(req);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.http.TestHTTPSource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHttps() throws Exception {
  doTestHttps(null);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=javax.net.ssl.SSLHandshakeException.class) public void testHttpsSSLv3() throws Exception {
  doTestHttps("SSLv3");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBigBatchDeserializarionUTF32() throws Exception {
  testBatchWithVariousEncoding("UTF-32");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOptions() throws Exception {
  doTestForbidden(new HttpOptions("http://0.0.0.0:" + selectedPort));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBigBatchDeserializarionUTF16() throws Exception {
  testBatchWithVariousEncoding("UTF-16");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTrace() throws Exception {
  doTestForbidden(new HttpTrace("http://0.0.0.0:" + selectedPort));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBigBatchDeserializarionUTF8() throws Exception {
  testBatchWithVariousEncoding("UTF-8");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.jms.TestDefaultJMSMessageConverter </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=JMSException.class) public void testBytesMessagePartialReturn() throws Exception {
  createBytesMessage();
  when(((BytesMessage)message).readBytes(any(byte[].class))).thenReturn(BYTES.length + 1);
  createHeaders();
  converter.convert(message);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=JMSException.class) public void testBytesMessageTooLarge() throws Exception {
  createBytesMessage();
  when(((BytesMessage)message).getBodyLength()).thenReturn(Long.MAX_VALUE);
  createHeaders();
  converter.convert(message);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.jms.TestIntegrationActiveMQ </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testQueueLocatedWithJndi() throws Exception {
  context.put(JMSSourceConfiguration.DESTINATION_NAME,JNDI_PREFIX + DESTINATION_NAME);
  context.put(JMSSourceConfiguration.DESTINATION_LOCATOR,JMSDestinationLocator.JNDI.name());
  testQueue();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.jms.TestJMSMessageConsumer </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollback() throws Exception {
  consumer=create();
  consumer.rollback();
  verify(session,times(1)).rollback();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testCreateConsumerFails() throws Exception {
  when(session.createConsumer(any(Destination.class),anyString())).thenThrow(new JMSException(""));
  create();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testInvalidBatchSizeZero() throws Exception {
  batchSize=0;
  create();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testInvalidPollTime() throws Exception {
  pollTimeout=-1L;
  create();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testCreateTopicFails() throws Exception {
  destinationType=JMSDestinationType.TOPIC;
  when(session.createQueue(destinationName)).thenThrow(new AssertionError());
  when(session.createTopic(destinationName)).thenReturn(topic);
  when(session.createTopic(destinationName)).thenThrow(new JMSException(""));
  create();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testInvalidBatchSizeNegative() throws Exception {
  batchSize=-1;
  create();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testCreateConnectionFails() throws Exception {
  when(connectionFactory.createConnection(USERNAME,PASSWORD)).thenThrow(new JMSException(""));
  create();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClose() throws Exception {
  doThrow(new JMSException("")).when(session).close();
  consumer=create();
  consumer.close();
  verify(session,times(1)).close();
  verify(connection,times(1)).close();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testCreateQueueFails() throws Exception {
  when(session.createQueue(destinationName)).thenThrow(new JMSException(""));
  create();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testCreateSessionFails() throws Exception {
  when(connection.createSession(true,Session.SESSION_TRANSACTED)).thenThrow(new JMSException(""));
  create();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCommit() throws Exception {
  consumer=create();
  consumer.commit();
  verify(session,times(1)).commit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.jms.TestJMSSource </h4><pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testConfigureWithoutProviderURL() throws Exception {
  context.put(JMSSourceConfiguration.PROVIDER_URL,"");
  source.configure(context);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testConfigureWithEmptyDestinationType() throws Exception {
  context.put(JMSSourceConfiguration.DESTINATION_TYPE,"");
  source.configure(context);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testConfigureWithoutInitialContextFactory() throws Exception {
  context.put(JMSSourceConfiguration.INITIAL_CONTEXT_FACTORY,"");
  source.configure(context);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testConfigureWithoutDestinationName() throws Exception {
  context.put(JMSSourceConfiguration.DESTINATION_NAME,"");
  source.configure(context);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStop() throws Exception {
  source.configure(context);
  source.start();
  source.stop();
  verify(consumer).close();
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testConfigureWithInvalidBatchSize() throws Exception {
  context.put(JMSSourceConfiguration.BATCH_SIZE,"0");
  source.configure(context);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testConfigureWithContextLookupThrowsException() throws Exception {
  when(initialContext.lookup(anyString())).thenThrow(new NamingException());
  source.configure(context);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testConfigureWithBadDestinationType() throws Exception {
  context.put(JMSSourceConfiguration.DESTINATION_TYPE,"DUMMY");
  source.configure(context);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testConfigureWithInvalidConverterClass() throws Exception {
  context.put(JMSSourceConfiguration.CONVERTER_TYPE,"not a valid classname");
  source.configure(context);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testConfigureWithContextCreateThrowsException() throws Exception {
  when(contextFactory.create(any(Properties.class))).thenThrow(new NamingException());
  source.configure(context);
}

</code></pre>

<br>
<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FlumeException.class) public void testConfigureWithInvalidPasswordFile() throws Exception {
  context.put(JMSSourceConfiguration.PASSWORD_FILE,"/dev/does/not/exist/nor/will/ever/exist");
  source.configure(context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.jms.TestJMSSourceCreation </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJMSSourceCreation(){
  verifySourceCreation("jms-src","jms",JMSSource.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.thriftLegacy.TestThriftLegacySource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLifecycle() throws InterruptedException {
  bind();
  stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.twitter.TestTwitterSource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBasic() throws Exception {
  String consumerKey=System.getProperty("twitter.consumerKey");
  Assume.assumeNotNull(consumerKey);
  String consumerSecret=System.getProperty("twitter.consumerSecret");
  Assume.assumeNotNull(consumerSecret);
  String accessToken=System.getProperty("twitter.accessToken");
  Assume.assumeNotNull(accessToken);
  String accessTokenSecret=System.getProperty("twitter.accessTokenSecret");
  Assume.assumeNotNull(accessTokenSecret);
  Context context=new Context();
  context.put("consumerKey",consumerKey);
  context.put("consumerSecret",consumerSecret);
  context.put("accessToken",accessToken);
  context.put("accessTokenSecret",accessTokenSecret);
  context.put("maxBatchDurationMillis","1000");
  TwitterSource source=new TwitterSource();
  source.configure(context);
  Map<String,String> channelContext=new HashMap();
  channelContext.put("capacity","1000000");
  channelContext.put("keep-alive","0");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,new Context(channelContext));
  Sink sink=new LoggerSink();
  sink.setChannel(channel);
  sink.start();
  DefaultSinkProcessor proc=new DefaultSinkProcessor();
  proc.setSinks(Collections.singletonList(sink));
  SinkRunner sinkRunner=new SinkRunner(proc);
  sinkRunner.start();
  ChannelSelector rcs=new ReplicatingChannelSelector();
  rcs.setChannels(Collections.singletonList(channel));
  ChannelProcessor chp=new ChannelProcessor(rcs);
  source.setChannelProcessor(chp);
  source.start();
  Thread.sleep(5000);
  source.stop();
  sinkRunner.stop();
  sink.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.test.agent.TestRpcClient </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRpcClient() throws Exception {
  StagedInstall.waitUntilPortOpens("localhost",12121,20000);
  RpcClient client=RpcClientFactory.getDefaultInstance("localhost",12121);
  String[] text={"foo","bar","xyz","abc"};
  for (  String str : text) {
    client.append(EventBuilder.withBody(str.getBytes()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.test.agent.TestSpooldirSource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testManySpooldirs() throws Exception {
  LOGGER.debug("testManySpooldirs() started.");
  StagedInstall.getInstance().startAgent("agent",agentProps);
  final int NUM_FILES_PER_DIR=10;
  createInputTestFiles(spoolDirs,NUM_FILES_PER_DIR,0);
  TimeUnit.SECONDS.sleep(10);
  validateSeenEvents(sinkOutputDir,1,spoolDirs.size(),NUM_FILES_PER_DIR);
  LOGGER.debug("Processed all the events!");
  LOGGER.debug("testManySpooldirs() ended.");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.test.agent.TestSyslogSource </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKeepFields() throws Exception {
  LOGGER.debug("testKeepFields() started.");
  agent.start("all");
  agent.runKeepFieldsTest();
  LOGGER.debug("testKeepFields() ended.");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKeepTimestampAndHostname() throws Exception {
  LOGGER.debug("testKeepTimestampAndHostname() started.");
  agent.start("timestamp hostname");
  agent.runKeepFieldsTest();
  LOGGER.debug("testKeepTimestampAndHostname() ended.");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveFields() throws Exception {
  LOGGER.debug("testRemoveFields() started.");
  agent.start("none");
  agent.runKeepFieldsTest();
  LOGGER.debug("testRemoveFields() ended.");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.tools.TestFileChannelIntegrityTool </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFixInvalidRecords() throws Exception {
  doTestFixInvalidEvents(false,DummyEventVerifier.Builder.class.getName());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFixCorruptRecords() throws Exception {
  doTestFixCorruptEvents(false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFixInvalidRecordsWithCheckpoint() throws Exception {
  doTestFixInvalidEvents(true,DummyEventVerifier.Builder.class.getName());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFixCorruptRecordsWithCheckpoint() throws Exception {
  doTestFixCorruptEvents(true);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
