<h3><span class=" glyphicon glyphicon-tag"/>&nbspHybridVerifier</h3><kbd>Contains more than 2 JUnit-based stereotypes</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.flume.TestContext </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutGet(){
  assertEquals("Context is empty",0,context.getParameters().size());
  context.put("test","value");
  assertEquals("value",context.getString("test"));
  context.clear();
  assertNull(context.getString("test"));
  assertEquals("value",context.getString("test","value"));
  context.put("test","true");
  assertEquals(new Boolean(true),context.getBoolean("test"));
  context.clear();
  assertNull(context.getBoolean("test"));
  assertEquals(new Boolean(true),context.getBoolean("test",true));
  context.put("test","1");
  assertEquals(new Integer(1),context.getInteger("test"));
  context.clear();
  assertNull(context.getInteger("test"));
  assertEquals(new Integer(1),context.getInteger("test",1));
  context.put("test",String.valueOf(Long.MAX_VALUE));
  assertEquals(new Long(Long.MAX_VALUE),context.getLong("test"));
  context.clear();
  assertNull(context.getLong("test"));
  assertEquals(new Long(Long.MAX_VALUE),context.getLong("test",Long.MAX_VALUE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.TestCounterGroup </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCounter(){
  AtomicLong counter=counterGroup.getCounter("test");
  Assert.assertNotNull(counter);
  Assert.assertEquals(0,counter.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.agent.embedded.TestEmbeddedAgent </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testPutWithInterceptors() throws Exception {
  properties.put("source.interceptors","i1");
  properties.put("source.interceptors.i1.type","static");
  properties.put("source.interceptors.i1.key","key2");
  properties.put("source.interceptors.i1.value","value2");
  agent.configure(properties);
  agent.start();
  agent.put(EventBuilder.withBody(body,headers));
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Map<String,String> newHeaders=new HashMap<String,String>(headers);
  newHeaders.put("key2","value2");
  Assert.assertEquals(newHeaders,event.getHeaders());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testPut() throws Exception {
  agent.configure(properties);
  agent.start();
  agent.put(EventBuilder.withBody(body,headers));
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Assert.assertEquals(headers,event.getHeaders());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testEmbeddedAgentName() throws Exception {
  EmbeddedAgent embedAgent=new EmbeddedAgent("test 1 2" + serialNumber.incrementAndGet());
  List<Event> events=Lists.newArrayList();
  events.add(EventBuilder.withBody(body,headers));
  embedAgent.configure(properties);
  embedAgent.start();
  embedAgent.putAll(events);
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Assert.assertEquals(headers,event.getHeaders());
  if (embedAgent != null) {
    try {
      embedAgent.stop();
    }
 catch (    Exception e) {
      LOGGER.debug("Error shutting down agent",e);
    }
  }
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testPutAll() throws Exception {
  List<Event> events=Lists.newArrayList();
  events.add(EventBuilder.withBody(body,headers));
  agent.configure(properties);
  agent.start();
  agent.putAll(events);
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Assert.assertEquals(headers,event.getHeaders());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestLoadBalancingRpcClient </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwoHostFailover() throws Exception {
  Server s1=null, s2=null;
  RpcClient c=null;
  try {
    LoadBalancedAvroHandler h1=new LoadBalancedAvroHandler();
    LoadBalancedAvroHandler h2=new LoadBalancedAvroHandler();
    s1=RpcTestUtils.startServer(h1);
    s2=RpcTestUtils.startServer(h2);
    Properties p=new Properties();
    p.put("hosts","h1 h2");
    p.put("client.type","default_loadbalance");
    p.put("hosts.h1","127.0.0.1:" + s1.getPort());
    p.put("hosts.h2","127.0.0.1:" + s2.getPort());
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < 100; i++) {
      if (i == 20) {
        h2.setFailed();
      }
 else       if (i == 40) {
        h2.setOK();
      }
      c.append(getEvent(i));
    }
    Assert.assertEquals(60,h1.getAppendCount());
    Assert.assertEquals(40,h2.getAppendCount());
  }
  finally {
    if (s1 != null)     s1.close();
    if (s2 != null)     s2.close();
    if (c != null)     c.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLbDefaultClientTwoHostsBatch() throws Exception {
  Server s1=null, s2=null;
  RpcClient c=null;
  try {
    LoadBalancedAvroHandler h1=new LoadBalancedAvroHandler();
    LoadBalancedAvroHandler h2=new LoadBalancedAvroHandler();
    s1=RpcTestUtils.startServer(h1);
    s2=RpcTestUtils.startServer(h2);
    Properties p=new Properties();
    p.put("hosts","h1 h2");
    p.put("client.type","default_loadbalance");
    p.put("hosts.h1","127.0.0.1:" + s1.getPort());
    p.put("hosts.h2","127.0.0.1:" + s2.getPort());
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < 100; i++) {
      c.appendBatch(getBatchedEvent(i));
    }
    Assert.assertEquals(50,h1.getAppendBatchCount());
    Assert.assertEquals(50,h2.getAppendBatchCount());
  }
  finally {
    if (s1 != null)     s1.close();
    if (s2 != null)     s2.close();
    if (c != null)     c.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure that we can tolerate a host that is completely down.
 * @throws Exception
 */
@Test public void testTwoHostsOneDead() throws Exception {
  LOGGER.info("Running testTwoHostsOneDead...");
  Server s1=null;
  RpcClient c1=null, c2=null;
  try {
    LoadBalancedAvroHandler h1=new LoadBalancedAvroHandler();
    s1=RpcTestUtils.startServer(h1);
    Properties p=new Properties();
    p.put("hosts","h1 h2");
    p.put("client.type","default_loadbalance");
    p.put("hosts.h1","127.0.0.1:" + 0);
    p.put("hosts.h2","127.0.0.1:" + s1.getPort());
    c1=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c1 instanceof LoadBalancingRpcClient);
    for (int i=0; i < 10; i++) {
      c1.appendBatch(getBatchedEvent(i));
    }
    Assert.assertEquals(10,h1.getAppendBatchCount());
    c2=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c2 instanceof LoadBalancingRpcClient);
    for (int i=0; i < 10; i++) {
      c2.append(getEvent(i));
    }
    Assert.assertEquals(10,h1.getAppendCount());
  }
  finally {
    if (s1 != null)     s1.close();
    if (c1 != null)     c1.close();
    if (c2 != null)     c2.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoundRobinBackoffFailureRecovery() throws EventDeliveryException, InterruptedException {
  Properties p=new Properties();
  List<LoadBalancedAvroHandler> hosts=new ArrayList<LoadBalancedAvroHandler>();
  List<Server> servers=new ArrayList<Server>();
  StringBuilder hostList=new StringBuilder("");
  for (int i=0; i < 3; i++) {
    LoadBalancedAvroHandler s=new LoadBalancedAvroHandler();
    hosts.add(s);
    if (i == 1) {
      s.setFailed();
    }
    Server srv=RpcTestUtils.startServer(s);
    servers.add(srv);
    String name="h" + i;
    p.put("hosts." + name,"127.0.0.1:" + srv.getPort());
    hostList.append(name).append(" ");
  }
  p.put("hosts",hostList.toString().trim());
  p.put("client.type","default_loadbalance");
  p.put("host-selector","round_robin");
  p.put("backoff","true");
  RpcClient c=RpcClientFactory.getInstance(p);
  Assert.assertTrue(c instanceof LoadBalancingRpcClient);
  for (int i=0; i < 3; i++) {
    c.append(EventBuilder.withBody("recovery test".getBytes()));
  }
  hosts.get(1).setOK();
  Thread.sleep(3000);
  int numEvents=60;
  for (int i=0; i < numEvents; i++) {
    c.append(EventBuilder.withBody("testing".getBytes()));
  }
  Assert.assertEquals(2 + (numEvents / 3),hosts.get(0).getAppendCount());
  Assert.assertEquals(0 + (numEvents / 3),hosts.get(1).getAppendCount());
  Assert.assertEquals(1 + (numEvents / 3),hosts.get(2).getAppendCount());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwoHostFailoverBatch() throws Exception {
  Server s1=null, s2=null;
  RpcClient c=null;
  try {
    LoadBalancedAvroHandler h1=new LoadBalancedAvroHandler();
    LoadBalancedAvroHandler h2=new LoadBalancedAvroHandler();
    s1=RpcTestUtils.startServer(h1);
    s2=RpcTestUtils.startServer(h2);
    Properties p=new Properties();
    p.put("hosts","h1 h2");
    p.put("client.type","default_loadbalance");
    p.put("hosts.h1","127.0.0.1:" + s1.getPort());
    p.put("hosts.h2","127.0.0.1:" + s2.getPort());
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < 100; i++) {
      if (i == 20) {
        h2.setFailed();
      }
 else       if (i == 40) {
        h2.setOK();
      }
      c.appendBatch(getBatchedEvent(i));
    }
    Assert.assertEquals(60,h1.getAppendBatchCount());
    Assert.assertEquals(40,h2.getAppendBatchCount());
  }
  finally {
    if (s1 != null)     s1.close();
    if (s2 != null)     s2.close();
    if (c != null)     c.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoundRobinBackoffIncreasingBackoffs() throws Exception {
  Properties p=new Properties();
  List<LoadBalancedAvroHandler> hosts=new ArrayList<LoadBalancedAvroHandler>();
  List<Server> servers=new ArrayList<Server>();
  StringBuilder hostList=new StringBuilder("");
  for (int i=0; i < 3; i++) {
    LoadBalancedAvroHandler s=new LoadBalancedAvroHandler();
    hosts.add(s);
    if (i == 1) {
      s.setFailed();
    }
    Server srv=RpcTestUtils.startServer(s);
    servers.add(srv);
    String name="h" + i;
    p.put("hosts." + name,"127.0.0.1:" + srv.getPort());
    hostList.append(name).append(" ");
  }
  p.put("hosts",hostList.toString().trim());
  p.put("client.type","default_loadbalance");
  p.put("host-selector","round_robin");
  p.put("backoff","true");
  RpcClient c=RpcClientFactory.getInstance(p);
  Assert.assertTrue(c instanceof LoadBalancingRpcClient);
  for (int i=0; i < 3; i++) {
    c.append(EventBuilder.withBody("testing".getBytes()));
  }
  Assert.assertEquals(0,hosts.get(1).getAppendCount());
  Thread.sleep(2100);
  for (int i=0; i < 3; i++) {
    c.append(EventBuilder.withBody("testing".getBytes()));
  }
  Assert.assertEquals(0,hosts.get(1).getAppendCount());
  hosts.get(1).setOK();
  Thread.sleep(2100);
  for (int i=0; i < 3; i++) {
    c.append(EventBuilder.withBody("testing".getBytes()));
  }
  Assert.assertEquals(0,hosts.get(1).getAppendCount());
  Thread.sleep(2500);
  int numEvents=60;
  for (int i=0; i < numEvents; i++) {
    c.append(EventBuilder.withBody("testing".getBytes()));
  }
  Assert.assertEquals(2 + 2 + 1+ (numEvents / 3),hosts.get(0).getAppendCount());
  Assert.assertEquals((numEvents / 3),hosts.get(1).getAppendCount());
  Assert.assertEquals(1 + 1 + 2+ (numEvents / 3),hosts.get(2).getAppendCount());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoundRobinBackoffInitialFailure() throws EventDeliveryException {
  Properties p=new Properties();
  List<LoadBalancedAvroHandler> hosts=new ArrayList<LoadBalancedAvroHandler>();
  List<Server> servers=new ArrayList<Server>();
  StringBuilder hostList=new StringBuilder("");
  for (int i=0; i < 3; i++) {
    LoadBalancedAvroHandler s=new LoadBalancedAvroHandler();
    hosts.add(s);
    Server srv=RpcTestUtils.startServer(s);
    servers.add(srv);
    String name="h" + i;
    p.put("hosts." + name,"127.0.0.1:" + srv.getPort());
    hostList.append(name).append(" ");
  }
  p.put("hosts",hostList.toString().trim());
  p.put("client.type","default_loadbalance");
  p.put("host-selector","round_robin");
  p.put("backoff","true");
  RpcClient c=RpcClientFactory.getInstance(p);
  Assert.assertTrue(c instanceof LoadBalancingRpcClient);
  for (int i=0; i < 3; i++) {
    c.append(EventBuilder.withBody("testing".getBytes()));
  }
  hosts.get(1).setFailed();
  for (int i=0; i < 3; i++) {
    c.append(EventBuilder.withBody("testing".getBytes()));
  }
  hosts.get(1).setOK();
  for (int i=0; i < 3; i++) {
    c.append(EventBuilder.withBody("testing".getBytes()));
  }
  Assert.assertEquals(1 + 2 + 1,hosts.get(0).getAppendCount());
  Assert.assertEquals(1,hosts.get(1).getAppendCount());
  Assert.assertEquals(1 + 1 + 2,hosts.get(2).getAppendCount());
}

</code></pre>

<br>
<pre class="type-9 type-11 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomBackoff() throws Exception {
  Properties p=new Properties();
  List<LoadBalancedAvroHandler> hosts=new ArrayList<LoadBalancedAvroHandler>();
  List<Server> servers=new ArrayList<Server>();
  StringBuilder hostList=new StringBuilder("");
  for (int i=0; i < 3; i++) {
    LoadBalancedAvroHandler s=new LoadBalancedAvroHandler();
    hosts.add(s);
    Server srv=RpcTestUtils.startServer(s);
    servers.add(srv);
    String name="h" + i;
    p.put("hosts." + name,"127.0.0.1:" + srv.getPort());
    hostList.append(name).append(" ");
  }
  p.put("hosts",hostList.toString().trim());
  p.put("client.type","default_loadbalance");
  p.put("host-selector","random");
  p.put("backoff","true");
  hosts.get(0).setFailed();
  hosts.get(2).setFailed();
  RpcClient c=RpcClientFactory.getInstance(p);
  Assert.assertTrue(c instanceof LoadBalancingRpcClient);
  for (int i=0; i < 50; i++) {
    c.append(EventBuilder.withBody(("test" + String.valueOf(i)).getBytes()));
  }
  Assert.assertEquals(50,hosts.get(1).getAppendCount());
  Assert.assertEquals(0,hosts.get(0).getAppendCount());
  Assert.assertEquals(0,hosts.get(2).getAppendCount());
  hosts.get(0).setOK();
  hosts.get(1).setFailed();
  try {
    c.append(EventBuilder.withBody("shouldfail".getBytes()));
    Assert.fail("Expected EventDeliveryException");
  }
 catch (  EventDeliveryException e) {
  }
  Thread.sleep(2500);
  for (int i=0; i < 50; i++) {
    c.append(EventBuilder.withBody(("test" + String.valueOf(i)).getBytes()));
  }
  Assert.assertEquals(50,hosts.get(0).getAppendCount());
  Assert.assertEquals(50,hosts.get(1).getAppendCount());
  Assert.assertEquals(0,hosts.get(2).getAppendCount());
}

</code></pre>

<br>
<pre class="type-9 type-11 type-10 type-1 type-3 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=EventDeliveryException.class) public void testTwoHostFailoverThrowAfterClose() throws Exception {
  Server s1=null, s2=null;
  RpcClient c=null;
  try {
    LoadBalancedAvroHandler h1=new LoadBalancedAvroHandler();
    LoadBalancedAvroHandler h2=new LoadBalancedAvroHandler();
    s1=RpcTestUtils.startServer(h1);
    s2=RpcTestUtils.startServer(h2);
    Properties p=new Properties();
    p.put("hosts","h1 h2");
    p.put("client.type","default_loadbalance");
    p.put("hosts.h1","127.0.0.1:" + s1.getPort());
    p.put("hosts.h2","127.0.0.1:" + s2.getPort());
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < 100; i++) {
      if (i == 20) {
        h2.setFailed();
      }
 else       if (i == 40) {
        h2.setOK();
      }
      c.append(getEvent(i));
    }
    Assert.assertEquals(60,h1.getAppendCount());
    Assert.assertEquals(40,h2.getAppendCount());
    if (c != null)     c.close();
    c.append(getEvent(3));
    Assert.fail();
  }
  finally {
    if (s1 != null)     s1.close();
    if (s2 != null)     s2.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLbDefaultClientTwoHosts() throws Exception {
  Server s1=null, s2=null;
  RpcClient c=null;
  try {
    LoadBalancedAvroHandler h1=new LoadBalancedAvroHandler();
    LoadBalancedAvroHandler h2=new LoadBalancedAvroHandler();
    s1=RpcTestUtils.startServer(h1);
    s2=RpcTestUtils.startServer(h2);
    Properties p=new Properties();
    p.put("hosts","h1 h2");
    p.put("client.type","default_loadbalance");
    p.put("hosts.h1","127.0.0.1:" + s1.getPort());
    p.put("hosts.h2","127.0.0.1:" + s2.getPort());
    c=RpcClientFactory.getInstance(p);
    Assert.assertTrue(c instanceof LoadBalancingRpcClient);
    for (int i=0; i < 100; i++) {
      c.append(getEvent(i));
    }
    Assert.assertEquals(50,h1.getAppendCount());
    Assert.assertEquals(50,h2.getAppendCount());
  }
  finally {
    if (s1 != null)     s1.close();
    if (s2 != null)     s2.close();
    if (c != null)     c.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestNettyAvroRpcClient </h4><pre class="type-10 type-1 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * First connect the client, then close the client, then send a request.
 * @throws FlumeException
 * @throws EventDeliveryException
 */
@Test(expected=EventDeliveryException.class) public void testClientClosedRequest() throws FlumeException, EventDeliveryException {
  NettyAvroRpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  try {
    client=RpcTestUtils.getStockLocalClient(server.getPort());
    client.close();
    Assert.assertFalse("Client should not be active",client.isActive());
    System.out.println("Yaya! I am not active after client close!");
    client.append(EventBuilder.withBody("hello",Charset.forName("UTF8")));
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null)     client.close();
  }
}

</code></pre>

<br>
<pre class="type-10 type-1 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * First connect the client, then shut down the server, then send a request.
 * @throws FlumeException
 * @throws EventDeliveryException
 * @throws InterruptedException
 */
@Test(expected=EventDeliveryException.class) public void testServerDisconnect() throws FlumeException, EventDeliveryException, InterruptedException {
  NettyAvroRpcClient client=null;
  Server server=RpcTestUtils.startServer(new OKAvroHandler());
  try {
    client=RpcTestUtils.getStockLocalClient(server.getPort());
    server.close();
    Thread.sleep(1000L);
    try {
      server.join();
    }
 catch (    InterruptedException ex) {
      logger.warn("Thread interrupted during join()",ex);
      Thread.currentThread().interrupt();
    }
    try {
      client.append(EventBuilder.withBody("hello",Charset.forName("UTF8")));
    }
  finally {
      Assert.assertFalse("Client should not be active",client.isActive());
    }
  }
  finally {
    RpcTestUtils.stopServer(server);
    if (client != null)     client.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.api.TestThriftRpcClient </h4><pre class="type-11 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=EventDeliveryException.class) public void testFail() throws Exception {
  src=new ThriftTestingSource(ThriftTestingSource.HandlerType.FAIL.name(),port,ThriftRpcClient.COMPACT_PROTOCOL);
  client=(ThriftRpcClient)RpcClientFactory.getInstance(props);
  insertEvents(client,2);
  Assert.fail("Expected EventDeliveryException to be thrown.");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.auth.TestFlumeAuthenticator </h4><pre class="type-9 type-11 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlumeLoginPrincipalWithoutRealm() throws Exception {
  String principal="flume";
  File keytab=new File(workDir,"flume2.keytab");
  kdc.createPrincipal(keytab,principal);
  String expResult=principal + "@" + kdc.getRealm();
  FlumeAuthenticationUtil.clearCredentials();
  FlumeAuthenticator authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab.getAbsolutePath());
  assertTrue(authenticator.isAuthenticated());
  String result=((KerberosAuthenticator)authenticator).getUserName();
  assertEquals("Initial login failed",expResult,result);
  authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab.getAbsolutePath());
  result=((KerberosAuthenticator)authenticator).getUserName();
  assertEquals("Re-login failed",expResult,result);
  principal="alice";
  keytab=aliceKeytab;
  try {
    authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab.getAbsolutePath());
    result=((KerberosAuthenticator)authenticator).getUserName();
    fail("Login should have failed with a new principal: " + result);
  }
 catch (  Exception ex) {
    assertTrue("Login with a new principal failed, but for an unexpected " + "reason: " + ex.getMessage(),ex.getMessage().contains("Cannot use multiple kerberos principals"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-11 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlumeLogin() throws IOException {
  String principal=flumePrincipal;
  String keytab=flumeKeytab.getAbsolutePath();
  String expResult=principal;
  FlumeAuthenticationUtil.clearCredentials();
  FlumeAuthenticator authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab);
  assertTrue(authenticator.isAuthenticated());
  String result=((KerberosAuthenticator)authenticator).getUserName();
  assertEquals("Initial login failed",expResult,result);
  authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab);
  result=((KerberosAuthenticator)authenticator).getUserName();
  assertEquals("Re-login failed",expResult,result);
  principal=alicePrincipal;
  keytab=aliceKeytab.getAbsolutePath();
  try {
    authenticator=FlumeAuthenticationUtil.getAuthenticator(principal,keytab);
    result=((KerberosAuthenticator)authenticator).getUserName();
    fail("Login should have failed with a new principal: " + result);
  }
 catch (  Exception ex) {
    assertTrue("Login with a new principal failed, but for an unexpected " + "reason: " + ex.getMessage(),ex.getMessage().contains("Cannot use multiple kerberos principals"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestBasicChannelSemantics </h4><pre class="type-12 type-13 type-11 type-14 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiThreadedHappyPath() throws Exception {
  final int testLength=1000;
  Future<?> producer=executor.submit(new Runnable(){
    @Override public void run(){
      try {
        Thread.sleep(500);
        for (int i=0; i < testLength; ++i) {
          Transaction transaction=channel.getTransaction();
          transaction.begin();
          channel.put(events.get(i % events.size()));
          transaction.commit();
          transaction.close();
          Thread.sleep(1);
        }
        Thread.sleep(500);
      }
 catch (      InterruptedException e) {
        Assert.fail();
      }
    }
  }
);
  int i=0;
  while (!producer.isDone()) {
    Transaction transaction=channel.getTransaction();
    transaction.begin();
    Event event=channel.take();
    if (event != null) {
      Assert.assertSame(events.get(i % events.size()),event);
      ++i;
    }
    transaction.commit();
    transaction.close();
  }
  Assert.assertEquals(testLength,i);
  producer.get();
}

</code></pre>

<br>
<pre class="type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTake1() throws Exception {
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  Transaction transaction=channel.getTransaction();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  transaction.begin();
  Assert.assertNull(channel.take());
  for (int i=0; i < 1000; ++i) {
    channel.put(events.get(i % events.size()));
  }
  Assert.assertNotNull(channel.take());
  testWrongThread(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  testBasicExceptions(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  testMode(TestChannel.Mode.SLEEP,new Runnable(){
    @Override public void run(){
      interruptTest(new Runnable(){
        @Override public void run(){
          Assert.assertNull(channel.take());
          Assert.assertTrue(Thread.interrupted());
        }
      }
);
    }
  }
);
  Assert.assertNotNull(channel.take());
  transaction.commit();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestChannelProcessor </h4><pre class="type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure that we see the original NPE from the PreConditions check instead
 * of an auto-generated NPE, which could be masking something else.
 */
@Test public void testNullFromGetTransaction(){
  Channel ch=mock(Channel.class);
  when(ch.getTransaction()).thenReturn(null);
  ChannelSelector sel=new ReplicatingChannelSelector();
  sel.setChannels(Lists.newArrayList(ch));
  ChannelProcessor proc=new ChannelProcessor(sel);
  List<Event> events=Lists.newArrayList();
  events.add(EventBuilder.withBody("event 1",Charsets.UTF_8));
  boolean threw=false;
  try {
    proc.processEventBatch(events);
  }
 catch (  NullPointerException ex) {
    threw=true;
    Assert.assertNotNull("NPE must be manually thrown",ex.getMessage());
  }
  Assert.assertTrue("Must throw NPE",threw);
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiredAndOptionalChannels(){
  Context context=new Context();
  ArrayList<Channel> channels=new ArrayList<Channel>();
  for (int i=0; i < 4; i++) {
    Channel ch=new MemoryChannel();
    ch.setName("ch" + i);
    Configurables.configure(ch,context);
    channels.add(ch);
  }
  ChannelSelector selector=new ReplicatingChannelSelector();
  selector.setChannels(channels);
  context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch2 ch3");
  Configurables.configure(selector,context);
  ChannelProcessor processor=new ChannelProcessor(selector);
  context=new Context();
  Configurables.configure(processor,context);
  Event event1=EventBuilder.withBody("event 1",Charsets.UTF_8);
  processor.processEvent(event1);
  try {
    Thread.sleep(3000);
  }
 catch (  InterruptedException e) {
  }
  for (  Channel channel : channels) {
    Transaction transaction=channel.getTransaction();
    transaction.begin();
    Event event_ch=channel.take();
    Assert.assertEquals(event1,event_ch);
    transaction.commit();
    transaction.close();
  }
  List<Event> events=Lists.newArrayList();
  for (int i=0; i < 100; i++) {
    events.add(EventBuilder.withBody("event " + i,Charsets.UTF_8));
  }
  processor.processEventBatch(events);
  try {
    Thread.sleep(3000);
  }
 catch (  InterruptedException e) {
  }
  for (  Channel channel : channels) {
    Transaction transaction=channel.getTransaction();
    transaction.begin();
    for (int i=0; i < 100; i++) {
      Event event_ch=channel.take();
      Assert.assertNotNull(event_ch);
    }
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestChannelUtils </h4><pre class="type-12 type-10 type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHappyPath5(){
  int rounds=10;
  for (int i=0; i < rounds; ++i) {
    ChannelUtils.put(channel,events);
  }
  for (int i=0; i < rounds; ++i) {
    List<Event> takenEvents=ChannelUtils.take(channel,events.size());
    Assert.assertTrue(takenEvents.size() == events.size());
    for (int j=0; j < events.size(); ++j) {
      Assert.assertSame(events.get(j),takenEvents.get(j));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMemoryChannel </h4><pre class="type-11 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ChannelException.class) public void testByteCapacityOverload(){
  Context context=new Context();
  Map<String,String> parms=new HashMap<String,String>();
  parms.put("byteCapacity","2000");
  parms.put("byteCapacityBufferPercentage","20");
  context.putAll(parms);
  Configurables.configure(channel,context);
  byte[] eventBody=new byte[405];
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  channel.put(EventBuilder.withBody(eventBody));
  channel.put(EventBuilder.withBody(eventBody));
  channel.put(EventBuilder.withBody(eventBody));
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  channel.put(EventBuilder.withBody(eventBody));
  channel.put(EventBuilder.withBody(eventBody));
  transaction.commit();
  Assert.fail();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChannelResize(){
  Context context=new Context();
  Map<String,String> parms=new HashMap<String,String>();
  parms.put("capacity","5");
  parms.put("transactionCapacity","5");
  context.putAll(parms);
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 5; i++) {
    channel.put(EventBuilder.withBody(String.format("test event %d",i).getBytes()));
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  boolean overflowed=false;
  try {
    transaction.begin();
    channel.put(EventBuilder.withBody("overflow event".getBytes()));
    transaction.commit();
  }
 catch (  ChannelException e) {
    overflowed=true;
    transaction.rollback();
  }
 finally {
    transaction.close();
  }
  Assert.assertTrue(overflowed);
  parms.put("capacity","6");
  context.putAll(parms);
  Configurables.configure(channel,context);
  transaction=channel.getTransaction();
  transaction.begin();
  channel.put(EventBuilder.withBody("extended capacity event".getBytes()));
  transaction.commit();
  transaction.close();
  parms.put("capacity","2");
  parms.put("transactionCapacity","2");
  context.putAll(parms);
  Configurables.configure(channel,context);
  for (int i=0; i < 6; i++) {
    transaction=channel.getTransaction();
    transaction.begin();
    Assert.assertNotNull(channel.take());
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutTake() throws InterruptedException, EventDeliveryException {
  Event event=EventBuilder.withBody("test event".getBytes());
  Context context=new Context();
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  channel.put(event);
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  Event event2=channel.take();
  Assert.assertEquals(event,event2);
  transaction.commit();
}

</code></pre>

<br>
<pre class="type-11 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ChannelException.class) public void testTransactionPutCapacityOverload(){
  Context context=new Context();
  Map<String,String> parms=new HashMap<String,String>();
  parms.put("capacity","5");
  parms.put("transactionCapacity","2");
  context.putAll(parms);
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  Assert.fail();
}

</code></pre>

<br>
<pre class="type-11 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ChannelException.class) public void testCapacityOverload(){
  Context context=new Context();
  Map<String,String> parms=new HashMap<String,String>();
  parms.put("capacity","5");
  parms.put("transactionCapacity","3");
  context.putAll(parms);
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  channel.put(EventBuilder.withBody("test".getBytes()));
  transaction.commit();
  Assert.fail();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMemoryChannelConcurrency </h4><pre class="type-13 type-11 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransactionConcurrency() throws InterruptedException {
  final Channel channel=new MemoryChannel();
  barrier=new CyclicBarrier(2);
  Configurables.configure(channel,new Context());
  Thread t1=new Thread(new Runnable(){
    @Override public void run(){
      Transaction tx=channel.getTransaction();
      tx.begin();
      channel.put(EventBuilder.withBody("first event".getBytes()));
      try {
        barrier.await();
        barrier.await();
        tx.rollback();
        barrier.await();
        tx.close();
        barrier.await();
      }
 catch (      InterruptedException e) {
        Assert.fail();
      }
catch (      BrokenBarrierException e) {
        Assert.fail();
      }
    }
  }
);
  Thread t2=new Thread(new Runnable(){
    @Override public void run(){
      Transaction tx=channel.getTransaction();
      try {
        barrier.await();
        tx.begin();
        channel.put(EventBuilder.withBody("second event".getBytes()));
        barrier.await();
        barrier.await();
        tx.commit();
        tx.close();
        barrier.await();
      }
 catch (      InterruptedException e) {
        Assert.fail();
      }
catch (      BrokenBarrierException e) {
        Assert.fail();
      }
    }
  }
);
  t1.start();
  t2.start();
  t1.join(1000);
  if (t1.isAlive()) {
    Assert.fail("Thread1 failed to finish");
    t1.interrupt();
  }
  t2.join(1000);
  if (t2.isAlive()) {
    Assert.fail("Thread2 failed to finish");
    t2.interrupt();
  }
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertEquals("second event",new String(e.getBody()));
  Assert.assertNull(channel.take());
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMemoryChannelTransaction </h4><pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRollBack() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("BasicChannelSemantics doesn't support re-entrant transactions") @Test public void testReEntTxn() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    transaction.begin();
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
    transaction.commit();
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("BasicChannelSemantics doesn't support re-entrant transactions") @Test public void testReEntTxnRollBack() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (int i=0; i < 10; i++) {
    transaction.begin();
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
    transaction.commit();
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommit() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  context.put("capacity","100");
  context.put("transactionCapacity","50");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMultiplexingChannelSelector </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoSelection() throws Exception {
  config.put("mapping.foo","ch1 ch2");
  config.put("mapping.bar","ch2 ch3");
  config.put("mapping.xyz","ch1 ch2 ch3");
  config.put("default","ch1 ch3");
  selector=ChannelSelectorFactory.create(channels,config);
  Assert.assertTrue(selector instanceof MultiplexingChannelSelector);
  Event noHeaderEvent=new MockEvent();
  List<Channel> reqCh1=selector.getRequiredChannels(noHeaderEvent);
  List<Channel> optCh1=selector.getOptionalChannels(noHeaderEvent);
  Assert.assertEquals(2,reqCh1.size());
  Assert.assertTrue(reqCh1.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh1.get(1).getName().equals("ch3"));
  Assert.assertTrue(optCh1.isEmpty());
  Map<String,String> header2=new HashMap<String,String>();
  header2.put("someheader","foo");
  Event invalidHeaderEvent=new MockEvent();
  invalidHeaderEvent.setHeaders(header2);
  List<Channel> reqCh2=selector.getRequiredChannels(invalidHeaderEvent);
  List<Channel> optCh2=selector.getOptionalChannels(invalidHeaderEvent);
  Assert.assertEquals(2,reqCh2.size());
  Assert.assertTrue(reqCh2.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh2.get(1).getName().equals("ch3"));
  Assert.assertTrue(optCh2.isEmpty());
  Map<String,String> header3=new HashMap<String,String>();
  header3.put("myheader","bar1");
  Event unmatchedHeaderEvent=new MockEvent();
  unmatchedHeaderEvent.setHeaders(header3);
  List<Channel> reqCh3=selector.getRequiredChannels(unmatchedHeaderEvent);
  List<Channel> optCh3=selector.getOptionalChannels(unmatchedHeaderEvent);
  Assert.assertEquals(2,reqCh3.size());
  Assert.assertTrue(reqCh3.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh3.get(1).getName().equals("ch3"));
  Assert.assertTrue(optCh3.isEmpty());
  Map<String,String> header4=new HashMap<String,String>();
  header4.put("myheader","zebra");
  Event zebraEvent=new MockEvent();
  zebraEvent.setHeaders(header4);
  List<Channel> reqCh4=selector.getRequiredChannels(zebraEvent);
  List<Channel> optCh4=selector.getOptionalChannels(zebraEvent);
  Assert.assertEquals(2,reqCh4.size());
  Assert.assertTrue(reqCh4.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh4.get(1).getName().equals("ch3"));
  Assert.assertTrue(optCh4.size() == 1);
  Assert.assertTrue(optCh4.get(0).getName().equals("ch2"));
  List<Channel> allChannels=selector.getAllChannels();
  Assert.assertTrue(allChannels.size() == 3);
  Assert.assertTrue(allChannels.get(0).getName().equals("ch1"));
  Assert.assertTrue(allChannels.get(1).getName().equals("ch2"));
  Assert.assertTrue(allChannels.get(2).getName().equals("ch3"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoMandatory(){
  config.put("default","ch3");
  config.put("optional.foo","ch1 ch2");
  config.put("optional.zebra","ch2 ch3");
  selector=ChannelSelectorFactory.create(channels,config);
  Assert.assertTrue(selector instanceof MultiplexingChannelSelector);
  Event event1=new MockEvent();
  Map<String,String> header1=new HashMap<String,String>();
  header1.put("myheader","foo");
  event1.setHeaders(header1);
  List<Channel> reqCh1=selector.getRequiredChannels(event1);
  Assert.assertEquals(1,reqCh1.size());
  Assert.assertEquals("ch3",reqCh1.get(0).getName());
  List<Channel> optCh1=selector.getOptionalChannels(event1);
  Assert.assertEquals(2,optCh1.size());
  Assert.assertEquals("ch1",optCh1.get(0).getName());
  Assert.assertEquals("ch2",optCh1.get(1).getName());
  Event event4=new MockEvent();
  Map<String,String> header4=new HashMap<String,String>();
  header4.put("myheader","zebra");
  event4.setHeaders(header4);
  List<Channel> reqCh4=selector.getRequiredChannels(event4);
  Assert.assertEquals(1,reqCh4.size());
  Assert.assertTrue(reqCh4.get(0).getName().equals("ch3"));
  List<Channel> optCh4=selector.getOptionalChannels(event4);
  Assert.assertEquals(1,optCh4.size());
  Assert.assertEquals("ch2",optCh4.get(0).getName());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoDefault(){
  config.put("mapping.foo","ch1 ch2");
  config.put("mapping.bar","ch2 ch3");
  config.put("mapping.xyz","ch1 ch2 ch3");
  config.put("mapping.zebra","ch2");
  config.put("optional.zebra","ch1 ch3");
  selector=ChannelSelectorFactory.create(channels,config);
  Assert.assertTrue(selector instanceof MultiplexingChannelSelector);
  Event event1=new MockEvent();
  Map<String,String> header1=new HashMap<String,String>();
  header1.put("myheader","foo");
  event1.setHeaders(header1);
  List<Channel> reqCh1=selector.getRequiredChannels(event1);
  Assert.assertEquals(2,reqCh1.size());
  Assert.assertEquals("ch1",reqCh1.get(0).getName());
  Assert.assertEquals("ch2",reqCh1.get(1).getName());
  List<Channel> optCh1=selector.getOptionalChannels(event1);
  Assert.assertTrue(optCh1.size() == 1);
  Assert.assertEquals("ch3",optCh1.get(0).getName());
  Event event2=new MockEvent();
  Map<String,String> header2=new HashMap<String,String>();
  header2.put("myheader","bar");
  event2.setHeaders(header2);
  List<Channel> reqCh2=selector.getRequiredChannels(event2);
  Assert.assertEquals(2,reqCh2.size());
  Assert.assertEquals("ch2",reqCh2.get(0).getName());
  Assert.assertEquals("ch3",reqCh2.get(1).getName());
  List<Channel> optCh2=selector.getOptionalChannels(event2);
  Assert.assertTrue(optCh2.isEmpty());
  Event event3=new MockEvent();
  Map<String,String> header3=new HashMap<String,String>();
  header3.put("myheader","xyz");
  event3.setHeaders(header3);
  List<Channel> reqCh3=selector.getRequiredChannels(event3);
  Assert.assertEquals(3,reqCh3.size());
  Assert.assertEquals("ch1",reqCh3.get(0).getName());
  Assert.assertEquals("ch2",reqCh3.get(1).getName());
  Assert.assertEquals("ch3",reqCh3.get(2).getName());
  List<Channel> optCh3=selector.getOptionalChannels(event3);
  Assert.assertTrue(optCh3.isEmpty());
  Event event4=new MockEvent();
  Map<String,String> header4=new HashMap<String,String>();
  header4.put("myheader","zebra");
  event4.setHeaders(header4);
  List<Channel> reqCh4=selector.getRequiredChannels(event4);
  Assert.assertEquals(1,reqCh4.size());
  Assert.assertEquals("ch2",reqCh4.get(0).getName());
  List<Channel> optCh4=selector.getOptionalChannels(event4);
  Assert.assertEquals(2,optCh4.size());
  Assert.assertEquals("ch1",optCh4.get(0).getName());
  Assert.assertEquals("ch3",optCh4.get(1).getName());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnlyOptional(){
  config.put("optional.foo","ch1 ch2");
  config.put("optional.zebra","ch2 ch3");
  selector=ChannelSelectorFactory.create(channels,config);
  Assert.assertTrue(selector instanceof MultiplexingChannelSelector);
  Event event1=new MockEvent();
  Map<String,String> header1=new HashMap<String,String>();
  header1.put("myheader","foo");
  event1.setHeaders(header1);
  List<Channel> reqCh1=selector.getRequiredChannels(event1);
  Assert.assertTrue(reqCh1.isEmpty());
  List<Channel> optCh1=selector.getOptionalChannels(event1);
  Assert.assertEquals(2,optCh1.size());
  Event event4=new MockEvent();
  Map<String,String> header4=new HashMap<String,String>();
  header4.put("myheader","zebra");
  event4.setHeaders(header4);
  List<Channel> reqCh4=selector.getRequiredChannels(event4);
  Assert.assertTrue(reqCh4.isEmpty());
  List<Channel> optCh4=selector.getOptionalChannels(event4);
  Assert.assertEquals(2,optCh4.size());
  Assert.assertEquals("ch2",optCh4.get(0).getName());
  Assert.assertEquals("ch3",optCh4.get(1).getName());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSelection() throws Exception {
  config.put("mapping.foo","ch1 ch2");
  config.put("mapping.bar","ch2 ch3");
  config.put("mapping.xyz","ch1 ch2 ch3");
  config.put("default","ch1 ch3");
  selector=ChannelSelectorFactory.create(channels,config);
  Assert.assertTrue(selector instanceof MultiplexingChannelSelector);
  Event event1=new MockEvent();
  Map<String,String> header1=new HashMap<String,String>();
  header1.put("myheader","foo");
  event1.setHeaders(header1);
  List<Channel> reqCh1=selector.getRequiredChannels(event1);
  Assert.assertEquals(2,reqCh1.size());
  Assert.assertTrue(reqCh1.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh1.get(1).getName().equals("ch2"));
  List<Channel> optCh1=selector.getOptionalChannels(event1);
  Assert.assertTrue(optCh1.size() == 1);
  Assert.assertTrue(optCh1.get(0).getName().equals("ch3"));
  Event event2=new MockEvent();
  Map<String,String> header2=new HashMap<String,String>();
  header2.put("myheader","bar");
  event2.setHeaders(header2);
  List<Channel> reqCh2=selector.getRequiredChannels(event2);
  Assert.assertEquals(2,reqCh2.size());
  Assert.assertTrue(reqCh2.get(0).getName().equals("ch2"));
  Assert.assertTrue(reqCh2.get(1).getName().equals("ch3"));
  List<Channel> optCh2=selector.getOptionalChannels(event2);
  Assert.assertTrue(optCh2.isEmpty());
  Event event3=new MockEvent();
  Map<String,String> header3=new HashMap<String,String>();
  header3.put("myheader","xyz");
  event3.setHeaders(header3);
  List<Channel> reqCh3=selector.getRequiredChannels(event3);
  Assert.assertEquals(3,reqCh3.size());
  Assert.assertTrue(reqCh3.get(0).getName().equals("ch1"));
  Assert.assertTrue(reqCh3.get(1).getName().equals("ch2"));
  Assert.assertTrue(reqCh3.get(2).getName().equals("ch3"));
  List<Channel> optCh3=selector.getOptionalChannels(event3);
  Assert.assertTrue(optCh3.size() == 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestReplicatingChannelSelector </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOptionalChannels() throws Exception {
  Context context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch1");
  Configurables.configure(selector,context);
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(3,channels.size());
  Assert.assertEquals("ch2",channels.get(0).getName());
  Assert.assertEquals("ch3",channels.get(1).getName());
  Assert.assertEquals("ch4",channels.get(2).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(1,optCh.size());
  Assert.assertEquals("ch1",optCh.get(0).getName());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleOptionalChannelsSameChannelTwice() throws Exception {
  Context context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch1 ch4 ch1");
  Configurables.configure(selector,context);
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(2,channels.size());
  Assert.assertEquals("ch2",channels.get(0).getName());
  Assert.assertEquals("ch3",channels.get(1).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(2,optCh.size());
  Assert.assertEquals("ch1",optCh.get(0).getName());
  Assert.assertEquals("ch4",optCh.get(1).getName());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReplicatingSelector() throws Exception {
  selector.configure(new Context());
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(4,channels.size());
  Assert.assertEquals("ch1",channels.get(0).getName());
  Assert.assertEquals("ch2",channels.get(1).getName());
  Assert.assertEquals("ch3",channels.get(2).getName());
  Assert.assertEquals("ch4",channels.get(3).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(0,optCh.size());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleOptionalChannels() throws Exception {
  Context context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch1 ch4");
  Configurables.configure(selector,context);
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(2,channels.size());
  Assert.assertEquals("ch2",channels.get(0).getName());
  Assert.assertEquals("ch3",channels.get(1).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(2,optCh.size());
  Assert.assertEquals("ch1",optCh.get(0).getName());
  Assert.assertEquals("ch4",optCh.get(1).getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestSpillableMemoryChannel </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCounters() throws InterruptedException {
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","5000");
  params.put("overflowCapacity","5000");
  params.put("transactionCapacity","5000");
  params.put("overflowTimeout","0");
  startChannel(params);
  Thread sourceThd=makePutThread("src",1,5000,2500,channel);
  sourceThd.start();
  sourceThd.join();
  Assert.assertEquals(5000,channel.getTotalStored());
  Assert.assertEquals(5000,channel.channelCounter.getChannelSize());
  Assert.assertEquals(5000,channel.channelCounter.getEventPutAttemptCount());
  Assert.assertEquals(5000,channel.channelCounter.getEventPutSuccessCount());
  Thread sinkThd=makeTakeThread("sink",1,5000,1000,channel);
  sinkThd.start();
  sinkThd.join();
  Assert.assertEquals(0,channel.getTotalStored());
  Assert.assertEquals(0,channel.channelCounter.getChannelSize());
  Assert.assertEquals(5000,channel.channelCounter.getEventTakeAttemptCount());
  Assert.assertEquals(5000,channel.channelCounter.getEventTakeSuccessCount());
  sourceThd=makePutThread("src",1,10000,1000,channel);
  sourceThd.start();
  sourceThd.join();
  Assert.assertEquals(10000,channel.getTotalStored());
  Assert.assertEquals(10000,channel.channelCounter.getChannelSize());
  Assert.assertEquals(15000,channel.channelCounter.getEventPutAttemptCount());
  Assert.assertEquals(15000,channel.channelCounter.getEventPutSuccessCount());
  sinkThd=makeTakeThread("sink",1,5000,1000,channel);
  sinkThd.start();
  sinkThd.join();
  Assert.assertEquals(5000,channel.getTotalStored());
  Assert.assertEquals(5000,channel.channelCounter.getChannelSize());
  Assert.assertEquals(10000,channel.channelCounter.getEventTakeAttemptCount());
  Assert.assertEquals(10000,channel.channelCounter.getEventTakeSuccessCount());
  transactionalTakeN(5001,1000,channel);
  transactionalTakeN(6001,1000,channel);
  transactionalTakeN(7001,1000,channel);
  transactionalTakeN(8001,1000,channel);
  transactionalTakeN(9001,1000,channel);
  Assert.assertEquals(0,channel.getTotalStored());
  Assert.assertEquals(0,channel.channelCounter.getChannelSize());
  Assert.assertEquals(15000,channel.channelCounter.getEventTakeAttemptCount());
  Assert.assertEquals(15000,channel.channelCounter.getEventTakeSuccessCount());
  sourceThd=makePutThread("src1",1,5000,1000,channel);
  Thread sourceThd2=makePutThread("src2",1,5000,500,channel);
  sinkThd=makeTakeThread_noCheck("sink1",5000,1000,channel);
  sourceThd.start();
  sourceThd2.start();
  sinkThd.start();
  sourceThd.join();
  sourceThd2.join();
  sinkThd.join();
  Assert.assertEquals(5000,channel.getTotalStored());
  Assert.assertEquals(5000,channel.channelCounter.getChannelSize());
  Thread sinkThd2=makeTakeThread_noCheck("sink2",2500,500,channel);
  Thread sinkThd3=makeTakeThread_noCheck("sink3",2500,1000,channel);
  sinkThd2.start();
  sinkThd3.start();
  sinkThd2.join();
  sinkThd3.join();
  Assert.assertEquals(0,channel.getTotalStored());
  Assert.assertEquals(0,channel.channelCounter.getChannelSize());
  Assert.assertEquals(25000,channel.channelCounter.getEventTakeSuccessCount());
  Assert.assertEquals(25000,channel.channelCounter.getEventPutSuccessCount());
  Assert.assertTrue("TakeAttempt channel counter value larger than expected",25000 <= channel.channelCounter.getEventTakeAttemptCount());
  Assert.assertTrue("PutAttempt channel counter value larger than expected",25000 <= channel.channelCounter.getEventPutAttemptCount());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCapacityDisableOverflow(){
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","2");
  params.put("overflowCapacity","0");
  params.put("overflowTimeout","0");
  startChannel(params);
  transactionalPutN(0,2,channel);
  boolean threw=false;
  try {
    transactionalPutN(2,1,channel);
  }
 catch (  ChannelException e) {
    threw=true;
  }
  Assert.assertTrue("Expecting ChannelFullException to be thrown",threw);
  transactionalTakeN(0,2,channel);
  Transaction tx=channel.getTransaction();
  tx.begin();
  Assert.assertNull(channel.take());
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestCheckpoint </h4><pre class="type-4 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws IOException {
  file=File.createTempFile("Checkpoint","");
  inflightPuts=File.createTempFile("inflightPuts","");
  inflightTakes=File.createTempFile("inflightTakes","");
  queueSet=File.createTempFile("queueset","");
  Assert.assertTrue(file.isFile());
  Assert.assertTrue(file.canWrite());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSerialization() throws Exception {
  EventQueueBackingStore backingStore=new EventQueueBackingStoreFileV2(file,1,"test");
  FlumeEventPointer ptrIn=new FlumeEventPointer(10,20);
  FlumeEventQueue queueIn=new FlumeEventQueue(backingStore,inflightTakes,inflightPuts,queueSet);
  queueIn.addHead(ptrIn);
  FlumeEventQueue queueOut=new FlumeEventQueue(backingStore,inflightTakes,inflightPuts,queueSet);
  Assert.assertEquals(0,queueOut.getLogWriteOrderID());
  queueIn.checkpoint(false);
  FlumeEventQueue queueOut2=new FlumeEventQueue(backingStore,inflightTakes,inflightPuts,queueSet);
  FlumeEventPointer ptrOut=queueOut2.removeHead(0L);
  Assert.assertEquals(ptrIn,ptrOut);
  Assert.assertTrue(queueOut2.getLogWriteOrderID() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestEventQueueBackingStoreFactory </h4><pre class="type-11 type-10 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadCheckpointException.class) public void testDecreaseCapacity() throws Exception {
  Assert.assertTrue(checkpoint.delete());
  EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  backingStore.close();
  EventQueueBackingStoreFactory.get(checkpoint,9,"test");
  Assert.fail();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadCheckpointException.class) public void testCheckpointVersionNotEqualToMeta2() throws Exception {
  FileOutputStream os=null;
  try {
    EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
    backingStore.close();
    Assert.assertTrue(checkpoint.exists());
    Assert.assertTrue(Serialization.getMetaDataFile(checkpoint).length() != 0);
    FileInputStream is=new FileInputStream(Serialization.getMetaDataFile(checkpoint));
    ProtosFactory.Checkpoint meta=ProtosFactory.Checkpoint.parseDelimitedFrom(is);
    Assert.assertNotNull(meta);
    is.close();
    os=new FileOutputStream(Serialization.getMetaDataFile(checkpoint));
    meta.toBuilder().setVersion(2).build().writeDelimitedTo(os);
    os.flush();
    backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  }
  finally {
    os.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=InvalidProtocolBufferException.class) public void testCorruptMeta() throws Throwable {
  EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  backingStore.close();
  Assert.assertTrue(checkpoint.exists());
  File metaFile=Serialization.getMetaDataFile(checkpoint);
  Assert.assertTrue(metaFile.length() != 0);
  RandomAccessFile writer=new RandomAccessFile(metaFile,"rw");
  writer.seek(10);
  writer.writeLong(new Random().nextLong());
  writer.getFD().sync();
  writer.close();
  try {
    backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  }
 catch (  BadCheckpointException ex) {
    throw ex.getCause();
  }
}

</code></pre>

<br>
<pre class="type-11 type-10 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadCheckpointException.class) public void testIncreaseCapacity() throws Exception {
  Assert.assertTrue(checkpoint.delete());
  EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  backingStore.close();
  EventQueueBackingStoreFactory.get(checkpoint,11,"test");
  Assert.fail();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadCheckpointException.class) public void testCheckpointOrderIdNotEqualToMeta2() throws Exception {
  FileOutputStream os=null;
  try {
    EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
    backingStore.close();
    Assert.assertTrue(checkpoint.exists());
    Assert.assertTrue(Serialization.getMetaDataFile(checkpoint).length() != 0);
    FileInputStream is=new FileInputStream(Serialization.getMetaDataFile(checkpoint));
    ProtosFactory.Checkpoint meta=ProtosFactory.Checkpoint.parseDelimitedFrom(is);
    Assert.assertNotNull(meta);
    is.close();
    os=new FileOutputStream(Serialization.getMetaDataFile(checkpoint));
    meta.toBuilder().setWriteOrderID(1).build().writeDelimitedTo(os);
    os.flush();
    backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  }
  finally {
    os.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadCheckpointException.class) public void testTruncateMeta() throws Exception {
  EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  backingStore.close();
  Assert.assertTrue(checkpoint.exists());
  File metaFile=Serialization.getMetaDataFile(checkpoint);
  Assert.assertTrue(metaFile.length() != 0);
  RandomAccessFile writer=new RandomAccessFile(metaFile,"rw");
  writer.setLength(0);
  writer.getFD().sync();
  writer.close();
  backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestEventUtils </h4><pre class="type-9 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutEvent(){
  FlumeEvent event=new FlumeEvent(null,new byte[5]);
  Put put=new Put(1l,1l,event);
  Event returnEvent=EventUtils.getEventFromTransactionEvent(put);
  Assert.assertNotNull(returnEvent);
  Assert.assertEquals(5,returnEvent.getBody().length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFileChannel </h4><pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReconfigure() throws Exception {
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Set<String> in=Sets.newHashSet();
  try {
    while (true) {
      in.addAll(putEvents(channel,"reconfig",1,1));
    }
  }
 catch (  ChannelException e) {
    Assert.assertEquals("The channel has reached it's capacity. " + "This might be the result of a sink on the channel having too " + "low of batch size, a downstream system running slower than "+ "normal, or that the channel capacity is just too low. [channel=" + channel.getName() + "]",e.getMessage());
  }
  Configurables.configure(channel,createContext());
  Set<String> out=takeEvents(channel,1,Integer.MAX_VALUE);
  compareInputAndOut(in,out);
}

</code></pre>

<br>
<pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPut() throws Exception {
  channel.start();
  Assert.assertTrue(channel.isOpen());
  int found=takeEvents(channel,1,5).size();
  Assert.assertEquals(0,found);
  Set<String> expected=Sets.newHashSet();
  expected.addAll(putEvents(channel,"unbatched",1,5));
  expected.addAll(putEvents(channel,"batched",5,5));
  Set<String> actual=takeEvents(channel,1);
  compareInputAndOut(expected,actual);
}

</code></pre>

<br>
<pre class="type-10 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCapacity() throws Exception {
  Map<String,String> overrides=Maps.newHashMap();
  overrides.put(FileChannelConfiguration.CAPACITY,String.valueOf(5));
  overrides.put(FileChannelConfiguration.TRANSACTION_CAPACITY,String.valueOf(5));
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  fillChannel(channel,"fillup");
  Transaction transaction;
  transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  transaction.rollback();
  transaction.close();
  Assert.assertEquals(0,fillChannel(channel,"capacity").size());
  Assert.assertEquals(5,takeEvents(channel,1,5).size());
}

</code></pre>

<br>
<pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThreaded() throws IOException, InterruptedException {
  channel.start();
  Assert.assertTrue(channel.isOpen());
  int numThreads=10;
  final CountDownLatch producerStopLatch=new CountDownLatch(numThreads);
  final CountDownLatch consumerStopLatch=new CountDownLatch(numThreads);
  final List<Exception> errors=Collections.synchronizedList(new ArrayList<Exception>());
  final Set<String> expected=Collections.synchronizedSet(new HashSet<String>());
  final Set<String> actual=Collections.synchronizedSet(new HashSet<String>());
  for (int i=0; i < numThreads; i++) {
    final int id=i;
    Thread t=new Thread(){
      @Override public void run(){
        try {
          if (id % 2 == 0) {
            expected.addAll(putEvents(channel,Integer.toString(id),1,5));
          }
 else {
            expected.addAll(putEvents(channel,Integer.toString(id),5,5));
          }
          LOG.info("Completed some puts " + expected.size());
        }
 catch (        Exception e) {
          LOG.error("Error doing puts",e);
          errors.add(e);
        }
 finally {
          producerStopLatch.countDown();
        }
      }
    }
;
    t.setDaemon(true);
    t.start();
  }
  for (int i=0; i < numThreads; i++) {
    final int id=i;
    Thread t=new Thread(){
      @Override public void run(){
        try {
          while (!producerStopLatch.await(1,TimeUnit.SECONDS) || expected.size() > actual.size()) {
            if (id % 2 == 0) {
              actual.addAll(takeEvents(channel,1,Integer.MAX_VALUE));
            }
 else {
              actual.addAll(takeEvents(channel,5,Integer.MAX_VALUE));
            }
          }
          if (actual.isEmpty()) {
            LOG.error("Found nothing!");
          }
 else {
            LOG.info("Completed some takes " + actual.size());
          }
        }
 catch (        Exception e) {
          LOG.error("Error doing takes",e);
          errors.add(e);
        }
 finally {
          consumerStopLatch.countDown();
        }
      }
    }
;
    t.setDaemon(true);
    t.start();
  }
  Assert.assertTrue("Timed out waiting for producers",producerStopLatch.await(30,TimeUnit.SECONDS));
  Assert.assertTrue("Timed out waiting for consumer",consumerStopLatch.await(30,TimeUnit.SECONDS));
  Assert.assertEquals(Collections.EMPTY_LIST,errors);
  compareInputAndOut(expected,actual);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test is here to make sure we can replay a full queue
 * when we have a PUT with a lower txid than the take which
 * made that PUT possible. Here we fill up the queue so
 * puts will block. Start the put (which assigns a txid)
 * and while it's blocking initiate a take. That will
 * allow the PUT to take place but at a lower txid
 * than the take and additionally with pre-FLUME-1432 with
 * the same timestamp. After FLUME-1432 the PUT will have a
 * lower txid but a higher write order id and we can see
 * which event occurred first.
 */
@Test public void testRaceFoundInFLUME1432() throws Exception {
  Map<String,String> overrides=Maps.newHashMap();
  overrides.put(FileChannelConfiguration.KEEP_ALIVE,String.valueOf(10L));
  overrides.put(FileChannelConfiguration.CAPACITY,String.valueOf(10));
  overrides.put(FileChannelConfiguration.TRANSACTION_CAPACITY,String.valueOf(10));
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  fillChannel(channel,"fillup");
  Future<String> put=Executors.newSingleThreadExecutor().submit(new Callable<String>(){
    @Override public String call() throws Exception {
      Set<String> result=putEvents(channel,"blocked-put",1,1);
      Assert.assertTrue(result.toString(),result.size() == 1);
      Iterator<String> iter=result.iterator();
      return iter.next();
    }
  }
);
  Thread.sleep(1000L);
  Set<String> result=takeEvents(channel,1,1);
  Assert.assertTrue(result.toString(),result.size() == 1);
  String putmsg=put.get();
  Assert.assertNotNull(putmsg);
  String takemsg=result.iterator().next();
  Assert.assertNotNull(takemsg);
  LOG.info("Got: put " + putmsg + ", take "+ takemsg);
  channel.stop();
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
}

</code></pre>

<br>
<pre class="type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitAfterNoPutTake() throws Exception {
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Transaction transaction;
  transaction=channel.getTransaction();
  transaction.begin();
  transaction.commit();
  transaction.close();
  channel.stop();
  channel=createFileChannel();
  channel.start();
  Assert.assertTrue(channel.isOpen());
  transaction=channel.getTransaction();
  transaction.begin();
  Assert.assertNull(channel.take());
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFileChannelBase </h4><pre class="type-12 type-4 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  baseDir=Files.createTempDir();
  checkpointDir=new File(baseDir,"chkpt");
  backupDir=new File(baseDir,"backup");
  uncompressedBackupCheckpoint=new File(backupDir,"checkpoint");
  compressedBackupCheckpoint=new File(backupDir,"checkpoint.snappy");
  Assert.assertTrue(checkpointDir.mkdirs() || checkpointDir.isDirectory());
  Assert.assertTrue(backupDir.mkdirs() || backupDir.isDirectory());
  dataDirs=new File[3];
  dataDir="";
  for (int i=0; i < dataDirs.length; i++) {
    dataDirs[i]=new File(baseDir,"data" + (i + 1));
    Assert.assertTrue(dataDirs[i].mkdirs() || dataDirs[i].isDirectory());
    dataDir+=dataDirs[i].getAbsolutePath() + ",";
  }
  dataDir=dataDir.substring(0,dataDir.length() - 1);
  channel=createFileChannel();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFileChannelRestart </h4><pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCorruptCheckpointVersionMostSignificant4Bytes() throws Exception {
  Map<String,String> overrides=Maps.newHashMap();
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Set<String> in=putEvents(channel,"restart",10,100);
  Assert.assertEquals(100,in.size());
  forceCheckpoint(channel);
  channel.stop();
  File checkpoint=new File(checkpointDir,"checkpoint");
  RandomAccessFile writer=new RandomAccessFile(checkpoint,"rw");
  writer.seek(EventQueueBackingStoreFile.INDEX_VERSION * Serialization.SIZE_OF_LONG);
  writer.write(new byte[]{(byte)1,(byte)5});
  writer.getFD().sync();
  writer.close();
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Set<String> out=consumeChannel(channel);
  Assert.assertTrue(channel.didFullReplayDueToBadCheckpointException());
  compareInputAndOut(in,out);
}

</code></pre>

<br>
<pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCorruptCheckpointCompleteMarkerMostSignificant4Bytes() throws Exception {
  Map<String,String> overrides=Maps.newHashMap();
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Set<String> in=putEvents(channel,"restart",10,100);
  Assert.assertEquals(100,in.size());
  forceCheckpoint(channel);
  channel.stop();
  File checkpoint=new File(checkpointDir,"checkpoint");
  RandomAccessFile writer=new RandomAccessFile(checkpoint,"rw");
  writer.seek(EventQueueBackingStoreFile.INDEX_CHECKPOINT_MARKER * Serialization.SIZE_OF_LONG);
  writer.write(new byte[]{(byte)1,(byte)5});
  writer.getFD().sync();
  writer.close();
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Set<String> out=consumeChannel(channel);
  Assert.assertTrue(channel.didFullReplayDueToBadCheckpointException());
  compareInputAndOut(in,out);
}

</code></pre>

<br>
<pre class="type-10 type-3 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IOException.class) public void testSlowBackup() throws Throwable {
  Map<String,String> overrides=Maps.newHashMap();
  overrides.put(FileChannelConfiguration.USE_DUAL_CHECKPOINTS,"true");
  overrides.put(FileChannelConfiguration.MAX_FILE_SIZE,"1000");
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Set<String> in=putEvents(channel,"restart",10,100);
  Assert.assertEquals(100,in.size());
  slowdownBackup(channel);
  forceCheckpoint(channel);
  in=putEvents(channel,"restart",10,100);
  takeEvents(channel,10,100);
  Assert.assertEquals(100,in.size());
  try {
    forceCheckpoint(channel);
  }
 catch (  ReflectionError ex) {
    throw ex.getCause();
  }
 finally {
    channel.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFileChannelRollback </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRollbackSimulatedCrashWithSink() throws Exception {
  channel.start();
  Assert.assertTrue(channel.isOpen());
  int numEvents=100;
  LoggerSink sink=new LoggerSink();
  sink.setChannel(channel);
  CountingSinkRunner runner=new CountingSinkRunner(sink,numEvents - 1);
  runner.start();
  putEvents(channel,"rollback",10,numEvents);
  Transaction transaction;
  transaction=channel.getTransaction();
  transaction.begin();
  byte[] bytes="rolled back".getBytes(Charsets.UTF_8);
  channel.put(EventBuilder.withBody(bytes));
  transaction.rollback();
  transaction.close();
  while (runner.isAlive()) {
    Thread.sleep(10L);
  }
  Assert.assertEquals(numEvents - 1,runner.getCount());
  for (  Exception ex : runner.getErrors()) {
    LOG.warn("Sink had error",ex);
  }
  Assert.assertEquals(Collections.EMPTY_LIST,runner.getErrors());
  channel.stop();
  channel=createFileChannel();
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Set<String> out=takeEvents(channel,1,1);
  Assert.assertEquals(1,out.size());
  String s=out.iterator().next();
  Assert.assertTrue(s,s.startsWith("rollback-90-9"));
}

</code></pre>

<br>
<pre class="type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRollbackAfterNoPutTake() throws Exception {
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Transaction transaction;
  transaction=channel.getTransaction();
  transaction.begin();
  transaction.rollback();
  transaction.close();
  channel.stop();
  channel=createFileChannel();
  channel.start();
  Assert.assertTrue(channel.isOpen());
  transaction=channel.getTransaction();
  transaction.begin();
  Assert.assertNull(channel.take());
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFlumeEvent </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasics(){
  Map<String,String> headers=Maps.newHashMap();
  headers.put("key","value");
  byte[] body="flume".getBytes(Charsets.UTF_8);
  FlumeEvent event=new FlumeEvent(headers,body);
  Assert.assertEquals(headers,event.getHeaders());
  Assert.assertTrue(Arrays.equals(body,event.getBody()));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSerialization() throws IOException {
  Map<String,String> headers=Maps.newHashMap();
  headers.put("key","value");
  byte[] body="flume".getBytes(Charsets.UTF_8);
  FlumeEvent in=new FlumeEvent(headers,body);
  FlumeEvent out=FlumeEvent.from(TestUtils.toDataInput(in));
  Assert.assertEquals(headers,out.getHeaders());
  Assert.assertTrue(Arrays.equals(body,out.getBody()));
  in.setHeaders(null);
  in.setBody(null);
  out=FlumeEvent.from(TestUtils.toDataInput(in));
  Assert.assertEquals(Maps.newHashMap(),out.getHeaders());
  Assert.assertNull(out.getBody());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFlumeEventPointer </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquals(){
  FlumeEventPointer pointerA=new FlumeEventPointer(1,1);
  FlumeEventPointer pointerB=new FlumeEventPointer(1,1);
  Assert.assertEquals(pointerA,pointerB);
  Assert.assertEquals(pointerB,pointerA);
  pointerA=new FlumeEventPointer(1,1);
  pointerB=new FlumeEventPointer(2,2);
  Assert.assertFalse(pointerA.equals(pointerB));
  Assert.assertFalse(pointerB.equals(pointerA));
}

</code></pre>

<br>
<pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHashCode(){
  FlumeEventPointer pointerA=new FlumeEventPointer(1,1);
  FlumeEventPointer pointerB=new FlumeEventPointer(1,1);
  Assert.assertEquals(pointerA.hashCode(),pointerB.hashCode());
  pointerA=new FlumeEventPointer(1,1);
  pointerB=new FlumeEventPointer(2,2);
  Assert.assertFalse(pointerA.hashCode() == pointerB.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFlumeEventQueue </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTail1() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addTail(pointer1));
  Assert.assertEquals(pointer1,queue.removeHead(0));
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testInvalidCapacityNegative() throws Exception {
  backingStore.close();
  File checkpoint=backingStoreSupplier.getCheckpoint();
  Assert.assertTrue(checkpoint.delete());
  backingStore=new EventQueueBackingStoreFileV2(checkpoint,-1,"test");
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addHeadRemove1() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  queue.addHead(pointer1);
  Assert.assertTrue(queue.remove(pointer1));
  Assert.assertNull(queue.removeHead(0));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTailRemove1() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addTail(pointer1));
  Assert.assertEquals(Sets.newHashSet(1),queue.getFileIDs());
  Assert.assertTrue(queue.remove(pointer1));
  queue.replayComplete();
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
  Assert.assertNull(queue.removeHead(0));
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addHead1() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addHead(pointer1));
  Assert.assertEquals(Sets.newHashSet(1),queue.getFileIDs());
  Assert.assertEquals(pointer1,queue.removeHead(0));
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testInvalidCapacityZero() throws Exception {
  backingStore.close();
  File checkpoint=backingStoreSupplier.getCheckpoint();
  Assert.assertTrue(checkpoint.delete());
  backingStore=new EventQueueBackingStoreFileV2(checkpoint,0,"test");
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnknownPointerDoesNotCauseSearch() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addHead(pointer1));
  Assert.assertTrue(queue.addHead(pointer2));
  Assert.assertFalse(queue.remove(pointer3));
  Assert.assertTrue(queue.remove(pointer1));
  Assert.assertTrue(queue.remove(pointer2));
  queue.replayComplete();
  Assert.assertEquals(2,queue.getSearchCount());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadCheckpointException.class) public void testCorruptInflightPuts() throws Exception {
  RandomAccessFile inflight=null;
  try {
    queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
    long txnID1=new Random().nextInt(Integer.MAX_VALUE - 1);
    long txnID2=txnID1 + 1;
    queue.addWithoutCommit(new FlumeEventPointer(1,1),txnID1);
    queue.addWithoutCommit(new FlumeEventPointer(2,1),txnID1);
    queue.addWithoutCommit(new FlumeEventPointer(2,2),txnID2);
    queue.checkpoint(true);
    TimeUnit.SECONDS.sleep(3L);
    inflight=new RandomAccessFile(backingStoreSupplier.getInflightPuts(),"rw");
    inflight.seek(0);
    inflight.writeInt(new Random().nextInt());
    queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
    SetMultimap<Long,Long> deserializedMap=queue.deserializeInflightPuts();
    Assert.assertTrue(deserializedMap.get(txnID1).contains(new FlumeEventPointer(1,1).toLong()));
    Assert.assertTrue(deserializedMap.get(txnID1).contains(new FlumeEventPointer(2,1).toLong()));
    Assert.assertTrue(deserializedMap.get(txnID2).contains(new FlumeEventPointer(2,2).toLong()));
  }
  finally {
    inflight.close();
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTailLarge() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  int size=500;
  Set<Integer> fileIDs=Sets.newHashSet();
  for (int i=1; i <= size; i++) {
    Assert.assertTrue(queue.addTail(new FlumeEventPointer(i,i)));
    fileIDs.add(i);
    Assert.assertEquals(fileIDs,queue.getFileIDs());
  }
  for (int i=1; i <= size; i++) {
    Assert.assertEquals(new FlumeEventPointer(i,i),queue.removeHead(0));
    fileIDs.remove(i);
    Assert.assertEquals(fileIDs,queue.getFileIDs());
  }
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addHeadRemove2() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addHead(pointer1));
  Assert.assertTrue(queue.addHead(pointer2));
  Assert.assertTrue(queue.remove(pointer1));
  queue.replayComplete();
  Assert.assertEquals(pointer2,queue.removeHead(0));
}

</code></pre>

<br>
<pre class="type-12 type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addHeadLarge() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  queue.replayComplete();
  int size=500;
  Set<Integer> fileIDs=Sets.newHashSet();
  for (int i=1; i <= size; i++) {
    Assert.assertTrue(queue.addHead(new FlumeEventPointer(i,i)));
    fileIDs.add(i);
    Assert.assertEquals(fileIDs,queue.getFileIDs());
  }
  for (int i=size; i > 0; i--) {
    Assert.assertEquals(new FlumeEventPointer(i,i),queue.removeHead(0));
    fileIDs.remove(i);
    Assert.assertEquals(fileIDs,queue.getFileIDs());
  }
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTailRemove2() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addTail(pointer1));
  Assert.assertTrue(queue.addTail(pointer2));
  Assert.assertTrue(queue.remove(pointer1));
  queue.replayComplete();
  Assert.assertEquals(pointer2,queue.removeHead(0));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTail2() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addTail(pointer1));
  Assert.assertTrue(queue.addTail(pointer2));
  Assert.assertEquals(Sets.newHashSet(1,2),queue.getFileIDs());
  Assert.assertEquals(pointer1,queue.removeHead(0));
  Assert.assertEquals(Sets.newHashSet(2),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadCheckpointException.class) public void testCorruptInflightTakes() throws Exception {
  RandomAccessFile inflight=null;
  try {
    queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
    long txnID1=new Random().nextInt(Integer.MAX_VALUE - 1);
    long txnID2=txnID1 + 1;
    queue.addWithoutCommit(new FlumeEventPointer(1,1),txnID1);
    queue.addWithoutCommit(new FlumeEventPointer(2,1),txnID1);
    queue.addWithoutCommit(new FlumeEventPointer(2,2),txnID2);
    queue.checkpoint(true);
    TimeUnit.SECONDS.sleep(3L);
    inflight=new RandomAccessFile(backingStoreSupplier.getInflightTakes(),"rw");
    inflight.seek(0);
    inflight.writeInt(new Random().nextInt());
    queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
    SetMultimap<Long,Long> deserializedMap=queue.deserializeInflightTakes();
    Assert.assertTrue(deserializedMap.get(txnID1).contains(new FlumeEventPointer(1,1).toLong()));
    Assert.assertTrue(deserializedMap.get(txnID1).contains(new FlumeEventPointer(2,1).toLong()));
    Assert.assertTrue(deserializedMap.get(txnID2).contains(new FlumeEventPointer(2,2).toLong()));
  }
  finally {
    inflight.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addHead2() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  queue.replayComplete();
  Assert.assertTrue(queue.addHead(pointer1));
  Assert.assertTrue(queue.addHead(pointer2));
  Assert.assertEquals(Sets.newHashSet(1,2),queue.getFileIDs());
  Assert.assertEquals(pointer2,queue.removeHead(0));
  Assert.assertEquals(Sets.newHashSet(1),queue.getFileIDs());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestIntegration </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIntegration() throws IOException, InterruptedException {
  Context context=new Context();
  context.put(FileChannelConfiguration.CHECKPOINT_DIR,checkpointDir.getAbsolutePath());
  context.put(FileChannelConfiguration.DATA_DIRS,dataDir);
  context.put(FileChannelConfiguration.CAPACITY,String.valueOf(10000));
  context.put(FileChannelConfiguration.CHECKPOINT_INTERVAL,"5000");
  context.put(FileChannelConfiguration.MAX_FILE_SIZE,String.valueOf(1024 * 1024 * 5));
  channel=new FileChannel();
  channel.setName("FileChannel-" + UUID.randomUUID());
  Configurables.configure(channel,context);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  SequenceGeneratorSource source=new SequenceGeneratorSource();
  CountingSourceRunner sourceRunner=new CountingSourceRunner(source,channel);
  source.configure(context);
  source.start();
  NullSink sink=new NullSink();
  sink.setChannel(channel);
  CountingSinkRunner sinkRunner=new CountingSinkRunner(sink);
  sinkRunner.start();
  sourceRunner.start();
  TimeUnit.SECONDS.sleep(30);
  sourceRunner.shutdown();
  while (sourceRunner.isAlive()) {
    Thread.sleep(10L);
  }
  while (channel.getDepth() > 0) {
    Thread.sleep(10L);
  }
  sinkRunner.shutdown();
  TimeUnit.SECONDS.sleep(5);
  List<File> logs=Lists.newArrayList();
  for (int i=0; i < dataDirs.length; i++) {
    logs.addAll(LogUtils.getLogs(dataDirs[i]));
  }
  LOG.info("Total Number of Logs = " + logs.size());
  for (  File logFile : logs) {
    LOG.info("LogFile = " + logFile);
  }
  LOG.info("Source processed " + sinkRunner.getCount());
  LOG.info("Sink processed " + sourceRunner.getCount());
  for (  Exception ex : sourceRunner.getErrors()) {
    LOG.warn("Source had error",ex);
  }
  for (  Exception ex : sinkRunner.getErrors()) {
    LOG.warn("Sink had error",ex);
  }
  Assert.assertEquals(sinkRunner.getCount(),sinkRunner.getCount());
  Assert.assertEquals(Collections.EMPTY_LIST,sinkRunner.getErrors());
  Assert.assertEquals(Collections.EMPTY_LIST,sourceRunner.getErrors());
}

</code></pre>

<br>
<pre class="type-12 type-4 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup(){
  baseDir=Files.createTempDir();
  checkpointDir=new File(baseDir,"chkpt");
  Assert.assertTrue(checkpointDir.mkdirs() || checkpointDir.isDirectory());
  dataDirs=new File[3];
  dataDir="";
  for (int i=0; i < dataDirs.length; i++) {
    dataDirs[i]=new File(baseDir,"data" + (i + 1));
    Assert.assertTrue(dataDirs[i].mkdirs() || dataDirs[i].isDirectory());
    dataDir+=dataDirs[i].getAbsolutePath() + ",";
  }
  dataDir=dataDir.substring(0,dataDir.length() - 1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestLog </h4><pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoll() throws IOException, InterruptedException, NoopRecordException, CorruptEventException {
  log.shutdownWorker();
  Thread.sleep(1000);
  for (int i=0; i < 1000; i++) {
    FlumeEvent eventIn=TestUtils.newPersistableEvent();
    long transactionID=++this.transactionID;
    FlumeEventPointer eventPointer=log.put(transactionID,eventIn);
    FlumeEvent eventOut=log.get(eventPointer);
    Assert.assertNotNull(eventOut);
    Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
    Assert.assertArrayEquals(eventIn.getBody(),eventOut.getBody());
  }
  int logCount=0;
  for (  File dataDir : dataDirs) {
    for (    File logFile : dataDir.listFiles()) {
      if (logFile.getName().startsWith("log-")) {
        logCount++;
      }
    }
  }
  Assert.assertEquals(186,logCount);
}

</code></pre>

<br>
<pre class="type-11 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCachedFSUsableSpace() throws Exception {
  File fs=mock(File.class);
  when(fs.getUsableSpace()).thenReturn(Long.MAX_VALUE);
  LogFile.CachedFSUsableSpace cachedFS=new LogFile.CachedFSUsableSpace(fs,1000L);
  Assert.assertEquals(cachedFS.getUsableSpace(),Long.MAX_VALUE);
  cachedFS.decrement(Integer.MAX_VALUE);
  Assert.assertEquals(cachedFS.getUsableSpace(),Long.MAX_VALUE - Integer.MAX_VALUE);
  try {
    cachedFS.decrement(-1);
    Assert.fail();
  }
 catch (  IllegalArgumentException expected) {
  }
  when(fs.getUsableSpace()).thenReturn(Long.MAX_VALUE - 1L);
  Thread.sleep(1100);
  Assert.assertEquals(cachedFS.getUsableSpace(),Long.MAX_VALUE - 1L);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that we can put, commit and then get. Note that get is
 * not transactional so the commit is not required.
 */
@Test public void testPutGet() throws IOException, InterruptedException, NoopRecordException, CorruptEventException {
  FlumeEvent eventIn=TestUtils.newPersistableEvent();
  long transactionID=++this.transactionID;
  FlumeEventPointer eventPointer=log.put(transactionID,eventIn);
  log.commitPut(transactionID);
  FlumeEvent eventOut=log.get(eventPointer);
  Assert.assertNotNull(eventOut);
  Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
  Assert.assertArrayEquals(eventIn.getBody(),eventOut.getBody());
}

</code></pre>

<br>
<pre class="type-11 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMinimumRequiredSpaceTooSmallOnStartup() throws IOException, InterruptedException {
  log.close();
  log=new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(CAPACITY).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").setMinimumRequiredSpace(Long.MAX_VALUE).build();
  try {
    log.replay();
    Assert.fail();
  }
 catch (  IOException e) {
    Assert.assertTrue(e.getMessage(),e.getMessage().startsWith("Usable space exhausted"));
  }
}

</code></pre>

<br>
<pre class="type-12 type-4 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws IOException {
  transactionID=0;
  checkpointDir=Files.createTempDir();
  FileUtils.forceDeleteOnExit(checkpointDir);
  Assert.assertTrue(checkpointDir.isDirectory());
  dataDirs=new File[3];
  for (int i=0; i < dataDirs.length; i++) {
    dataDirs[i]=Files.createTempDir();
    Assert.assertTrue(dataDirs[i].isDirectory());
  }
  log=new Log.Builder().setCheckpointInterval(1L).setMaxFileSize(MAX_FILE_SIZE).setQueueSize(CAPACITY).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setCheckpointOnClose(false).setChannelName("testlog").build();
  log.replay();
}

</code></pre>

<br>
<pre class="type-12 type-9 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetLogs() throws IOException {
  File logDir=dataDirs[0];
  List<File> expected=Lists.newArrayList();
  for (int i=0; i < 10; i++) {
    File log=new File(logDir,Log.PREFIX + i);
    expected.add(log);
    Assert.assertTrue(log.isFile() || log.createNewFile());
    File metaDataFile=Serialization.getMetaDataFile(log);
    File metaDataTempFile=Serialization.getMetaDataTempFile(metaDataFile);
    File logGzip=new File(logDir,Log.PREFIX + i + ".gz");
    Assert.assertTrue(metaDataFile.isFile() || metaDataFile.createNewFile());
    Assert.assertTrue(metaDataTempFile.isFile() || metaDataTempFile.createNewFile());
    Assert.assertTrue(log.isFile() || logGzip.createNewFile());
  }
  List<File> actual=LogUtils.getLogs(logDir);
  LogUtils.sort(actual);
  LogUtils.sort(expected);
  Assert.assertEquals(expected,actual);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestLogFile </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGroupCommit() throws Exception {
  final FlumeEvent eventIn=TestUtils.newPersistableEvent(250);
  final CyclicBarrier barrier=new CyclicBarrier(20);
  ExecutorService executorService=Executors.newFixedThreadPool(20);
  ExecutorCompletionService<Void> completionService=new ExecutorCompletionService<Void>(executorService);
  final LogFile.Writer writer=logFileWriter;
  final AtomicLong txnId=new AtomicLong(++transactionID);
  for (int i=0; i < 20; i++) {
    completionService.submit(new Callable<Void>(){
      @Override public Void call(){
        try {
          Put put=new Put(txnId.incrementAndGet(),WriteOrderOracle.next(),eventIn);
          ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
          writer.put(bytes);
          writer.commit(TransactionEventRecord.toByteBuffer(new Commit(txnId.get(),WriteOrderOracle.next())));
          barrier.await();
          writer.sync();
        }
 catch (        Exception ex) {
          Throwables.propagate(ex);
        }
        return null;
      }
    }
);
  }
  for (int i=0; i < 20; i++) {
    completionService.take().get();
  }
  Assert.assertTrue(logFileWriter.position() >= 5000);
  Assert.assertEquals(1,writer.getSyncCount());
  Assert.assertTrue(logFileWriter.getLastCommitPosition() == logFileWriter.getLastSyncPosition());
  executorService.shutdown();
}

</code></pre>

<br>
<pre class="type-11 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriterFailsWithDirectory() throws IOException {
  FileUtils.deleteQuietly(dataFile);
  Assert.assertFalse(dataFile.exists());
  Assert.assertTrue(dataFile.mkdirs());
  try {
    LogFileFactory.getWriter(dataFile,fileID,Integer.MAX_VALUE,null,null,null,Long.MAX_VALUE,true,0);
    Assert.fail();
  }
 catch (  IllegalStateException e) {
    Assert.assertEquals("File already exists " + dataFile.getAbsolutePath(),e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-13 type-11 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReaderTempMetaFile() throws InterruptedException, IOException, CorruptEventException {
  Map<Integer,Put> puts=Maps.newHashMap();
  for (int i=0; i < 1000; i++) {
    FlumeEvent eventIn=TestUtils.newPersistableEvent();
    Put put=new Put(++transactionID,WriteOrderOracle.next(),eventIn);
    ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
    FlumeEventPointer ptr=logFileWriter.put(bytes);
    puts.put(ptr.getOffset(),put);
  }
  File metadataFile=Serialization.getMetaDataFile(dataFile);
  File tempMetadataFile=Serialization.getMetaDataTempFile(dataFile);
  File oldMetadataFile=Serialization.getOldMetaDataFile(dataFile);
  oldMetadataFile.createNewFile();
  if (!metadataFile.renameTo(tempMetadataFile)) {
    Assert.fail("Renaming to meta.temp failed");
  }
  LogFile.SequentialReader reader=LogFileFactory.getSequentialReader(dataFile,null,true);
  Assert.assertTrue(metadataFile.exists());
  Assert.assertFalse(tempMetadataFile.exists());
  Assert.assertFalse(oldMetadataFile.exists());
  LogRecord entry;
  while ((entry=reader.next()) != null) {
    Integer offset=entry.getOffset();
    TransactionEventRecord record=entry.getEvent();
    Put put=puts.get(offset);
    FlumeEvent eventIn=put.getEvent();
    Assert.assertEquals(put.getTransactionID(),record.getTransactionID());
    Assert.assertTrue(record instanceof Put);
    FlumeEvent eventOut=((Put)record).getEvent();
    Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
    Assert.assertTrue(Arrays.equals(eventIn.getBody(),eventOut.getBody()));
  }
}

</code></pre>

<br>
<pre class="type-11 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=CorruptEventException.class) public void testPutGetCorruptEvent() throws Exception {
  final LogFile.RandomReader logFileReader=LogFileFactory.getRandomReader(dataFile,null,true);
  final FlumeEvent eventIn=TestUtils.newPersistableEvent(2500);
  final Put put=new Put(++transactionID,WriteOrderOracle.next(),eventIn);
  ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
  FlumeEventPointer ptr=logFileWriter.put(bytes);
  logFileWriter.commit(TransactionEventRecord.toByteBuffer(new Commit(transactionID,WriteOrderOracle.next())));
  logFileWriter.sync();
  final int offset=ptr.getOffset();
  RandomAccessFile writer=new RandomAccessFile(dataFile,"rw");
  writer.seek(offset + 1500);
  writer.write((byte)45);
  writer.write((byte)12);
  writer.getFD().sync();
  logFileReader.get(offset);
  Assert.fail();
}

</code></pre>

<br>
<pre class="type-4 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws IOException {
  fileID=1;
  transactionID=1L;
  dataDir=Files.createTempDir();
  dataFile=new File(dataDir,String.valueOf(fileID));
  Assert.assertTrue(dataDir.isDirectory());
  logFileWriter=LogFileFactory.getWriter(dataFile,fileID,Integer.MAX_VALUE,null,null,null,Long.MAX_VALUE,true,0);
}

</code></pre>

<br>
<pre class="type-12 type-9 type-13 type-11 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReaderOldMetaFile() throws InterruptedException, IOException, CorruptEventException {
  Map<Integer,Put> puts=Maps.newHashMap();
  for (int i=0; i < 1000; i++) {
    FlumeEvent eventIn=TestUtils.newPersistableEvent();
    Put put=new Put(++transactionID,WriteOrderOracle.next(),eventIn);
    ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
    FlumeEventPointer ptr=logFileWriter.put(bytes);
    puts.put(ptr.getOffset(),put);
  }
  File metadataFile=Serialization.getMetaDataFile(dataFile);
  File oldMetadataFile=Serialization.getOldMetaDataFile(dataFile);
  if (!metadataFile.renameTo(oldMetadataFile)) {
    Assert.fail("Renaming to meta.old failed");
  }
  LogFile.SequentialReader reader=LogFileFactory.getSequentialReader(dataFile,null,true);
  Assert.assertTrue(metadataFile.exists());
  Assert.assertFalse(oldMetadataFile.exists());
  LogRecord entry;
  while ((entry=reader.next()) != null) {
    Integer offset=entry.getOffset();
    TransactionEventRecord record=entry.getEvent();
    Put put=puts.get(offset);
    FlumeEvent eventIn=put.getEvent();
    Assert.assertEquals(put.getTransactionID(),record.getTransactionID());
    Assert.assertTrue(record instanceof Put);
    FlumeEvent eventOut=((Put)record).getEvent();
    Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
    Assert.assertTrue(Arrays.equals(eventIn.getBody(),eventOut.getBody()));
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReader() throws InterruptedException, IOException, CorruptEventException {
  Map<Integer,Put> puts=Maps.newHashMap();
  for (int i=0; i < 1000; i++) {
    FlumeEvent eventIn=TestUtils.newPersistableEvent();
    Put put=new Put(++transactionID,WriteOrderOracle.next(),eventIn);
    ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
    FlumeEventPointer ptr=logFileWriter.put(bytes);
    puts.put(ptr.getOffset(),put);
  }
  LogFile.SequentialReader reader=LogFileFactory.getSequentialReader(dataFile,null,true);
  LogRecord entry;
  while ((entry=reader.next()) != null) {
    Integer offset=entry.getOffset();
    TransactionEventRecord record=entry.getEvent();
    Put put=puts.get(offset);
    FlumeEvent eventIn=put.getEvent();
    Assert.assertEquals(put.getTransactionID(),record.getTransactionID());
    Assert.assertTrue(record instanceof Put);
    FlumeEvent eventOut=((Put)record).getEvent();
    Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
    Assert.assertTrue(Arrays.equals(eventIn.getBody(),eventOut.getBody()));
  }
}

</code></pre>

<br>
<pre class="type-11 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=NoopRecordException.class) public void testPutGetNoopEvent() throws Exception {
  final LogFile.RandomReader logFileReader=LogFileFactory.getRandomReader(dataFile,null,true);
  final FlumeEvent eventIn=TestUtils.newPersistableEvent(2500);
  final Put put=new Put(++transactionID,WriteOrderOracle.next(),eventIn);
  ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
  FlumeEventPointer ptr=logFileWriter.put(bytes);
  logFileWriter.commit(TransactionEventRecord.toByteBuffer(new Commit(transactionID,WriteOrderOracle.next())));
  logFileWriter.sync();
  final int offset=ptr.getOffset();
  LogFile.OperationRecordUpdater updater=new LogFile.OperationRecordUpdater(dataFile);
  updater.markRecordAsNoop(offset);
  logFileReader.get(offset);
  Assert.fail();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutGet() throws InterruptedException, IOException {
  final List<Throwable> errors=Collections.synchronizedList(new ArrayList<Throwable>());
  ExecutorService executorService=Executors.newFixedThreadPool(10);
  CompletionService<Void> completionService=new ExecutorCompletionService<Void>(executorService);
  final LogFile.RandomReader logFileReader=LogFileFactory.getRandomReader(dataFile,null,true);
  for (int i=0; i < 1000; i++) {
synchronized (errors) {
      for (      Throwable throwable : errors) {
        Throwables.propagateIfInstanceOf(throwable,AssertionError.class);
      }
      for (      Throwable throwable : errors) {
        Throwables.propagate(throwable);
      }
    }
    final FlumeEvent eventIn=TestUtils.newPersistableEvent();
    final Put put=new Put(++transactionID,WriteOrderOracle.next(),eventIn);
    ByteBuffer bytes=TransactionEventRecord.toByteBuffer(put);
    FlumeEventPointer ptr=logFileWriter.put(bytes);
    final int offset=ptr.getOffset();
    completionService.submit(new Runnable(){
      @Override public void run(){
        try {
          FlumeEvent eventOut=logFileReader.get(offset);
          Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
          Assert.assertTrue(Arrays.equals(eventIn.getBody(),eventOut.getBody()));
        }
 catch (        Throwable throwable) {
synchronized (errors) {
            errors.add(throwable);
          }
        }
      }
    }
,null);
  }
  for (int i=0; i < 1000; i++) {
    completionService.take();
  }
  for (  Throwable throwable : errors) {
    Throwables.propagateIfInstanceOf(throwable,AssertionError.class);
  }
  for (  Throwable throwable : errors) {
    Throwables.propagate(throwable);
  }
}

</code></pre>

<br>
<pre class="type-13 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteDelimitedTo() throws IOException {
  if (dataFile.isFile()) {
    Assert.assertTrue(dataFile.delete());
  }
  Assert.assertTrue(dataFile.createNewFile());
  ProtosFactory.LogFileMetaData.Builder metaDataBuilder=ProtosFactory.LogFileMetaData.newBuilder();
  metaDataBuilder.setVersion(1);
  metaDataBuilder.setLogFileID(2);
  metaDataBuilder.setCheckpointPosition(3);
  metaDataBuilder.setCheckpointWriteOrderID(4);
  LogFileV3.writeDelimitedTo(metaDataBuilder.build(),dataFile);
  ProtosFactory.LogFileMetaData metaData=ProtosFactory.LogFileMetaData.parseDelimitedFrom(new FileInputStream(dataFile));
  Assert.assertEquals(1,metaData.getVersion());
  Assert.assertEquals(2,metaData.getLogFileID());
  Assert.assertEquals(3,metaData.getCheckpointPosition());
  Assert.assertEquals(4,metaData.getCheckpointWriteOrderID());
}

</code></pre>

<br>
<pre class="type-11 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriterRefusesToOverwriteFile() throws IOException {
  Assert.assertTrue(dataFile.isFile() || dataFile.createNewFile());
  try {
    LogFileFactory.getWriter(dataFile,fileID,Integer.MAX_VALUE,null,null,null,Long.MAX_VALUE,true,0);
    Assert.fail();
  }
 catch (  IllegalStateException e) {
    Assert.assertEquals("File already exists " + dataFile.getAbsolutePath(),e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestTransactionEventRecordV2 </h4><pre class="type-11 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadHeader() throws IOException {
  Put in=new Put(System.currentTimeMillis(),WriteOrderOracle.next(),new FlumeEvent(new HashMap<String,String>(),new byte[0]));
  try {
    TransactionEventRecord.fromDataInputV2(toDataInput(0,in));
    Assert.fail();
  }
 catch (  IOException e) {
    Assert.assertEquals("Header 0 is not the required value: deadbeef",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadType() throws IOException {
  TransactionEventRecord in=mock(TransactionEventRecord.class);
  when(in.getRecordType()).thenReturn(Short.MIN_VALUE);
  try {
    TransactionEventRecord.fromDataInputV2(toDataInput(in));
    Assert.fail();
  }
 catch (  NullPointerException e) {
    Assert.assertEquals("Unknown action ffff8000",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutSerialization() throws IOException {
  Put in=new Put(System.currentTimeMillis(),WriteOrderOracle.next(),new FlumeEvent(new HashMap<String,String>(),new byte[0]));
  Put out=(Put)TransactionEventRecord.fromDataInputV2(toDataInput(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
  Assert.assertEquals(in.getEvent().getHeaders(),out.getEvent().getHeaders());
  Assert.assertTrue(Arrays.equals(in.getEvent().getBody(),out.getEvent().getBody()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestTransactionEventRecordV3 </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutSerialization() throws IOException, CorruptEventException {
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("key","value");
  Put in=new Put(System.currentTimeMillis(),WriteOrderOracle.next(),new FlumeEvent(headers,new byte[0]));
  Put out=(Put)TransactionEventRecord.fromByteArray(toByteArray(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
  Assert.assertEquals(in.getEvent().getHeaders(),out.getEvent().getHeaders());
  Assert.assertEquals(headers,in.getEvent().getHeaders());
  Assert.assertEquals(headers,out.getEvent().getHeaders());
  Assert.assertTrue(Arrays.equals(in.getEvent().getBody(),out.getEvent().getBody()));
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadType() throws IOException, CorruptEventException {
  TransactionEventRecord in=mock(TransactionEventRecord.class);
  when(in.getRecordType()).thenReturn(Short.MIN_VALUE);
  try {
    TransactionEventRecord.fromByteArray(toByteArray(in));
    Assert.fail();
  }
 catch (  NullPointerException e) {
    Assert.assertEquals("Unknown action ffff8000",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutSerializationNullHeader() throws IOException, CorruptEventException {
  Put in=new Put(System.currentTimeMillis(),WriteOrderOracle.next(),new FlumeEvent(null,new byte[0]));
  Put out=(Put)TransactionEventRecord.fromByteArray(toByteArray(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
  Assert.assertNull(in.getEvent().getHeaders());
  Assert.assertNotNull(out.getEvent().getHeaders());
  Assert.assertTrue(Arrays.equals(in.getEvent().getBody(),out.getEvent().getBody()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.encryption.TestFileChannelEncryption </h4><pre class="type-13 type-11 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEncryptedChannelWithoutEncryptionConfigFails() throws Exception {
  Map<String,String> overrides=getOverridesForEncryption();
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  fillChannel(channel,"will-not-restart");
  channel.stop();
  Map<String,String> noEncryptionOverrides=getOverrides();
  channel=createFileChannel(noEncryptionOverrides);
  channel.start();
  if (channel.isOpen()) {
    try {
      takeEvents(channel,1,1);
      Assert.fail("Channel was opened and take did not throw exception");
    }
 catch (    ChannelException ex) {
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingKeyStoreFile() throws Exception {
  Map<String,String> overrides=getOverridesForEncryption();
  overrides.put(Joiner.on(".").join(EncryptionConfiguration.ENCRYPTION_PREFIX,EncryptionConfiguration.KEY_PROVIDER,EncryptionConfiguration.JCE_FILE_KEY_STORE_FILE),"/path/does/not/exist");
  try {
    channel=createFileChannel(overrides);
    Assert.fail();
  }
 catch (  RuntimeException ex) {
    Assert.assertTrue("Exception message is incorrect: " + ex.getMessage(),ex.getMessage().startsWith("java.io.FileNotFoundException: /path/does/not/exist "));
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadKeyProviderInvalidValue() throws Exception {
  Map<String,String> overrides=getOverridesForEncryption();
  overrides.put(Joiner.on(".").join(EncryptionConfiguration.ENCRYPTION_PREFIX,EncryptionConfiguration.KEY_PROVIDER),"invalid");
  try {
    channel=createFileChannel(overrides);
    Assert.fail();
  }
 catch (  FlumeException ex) {
    Assert.assertEquals("java.lang.ClassNotFoundException: invalid",ex.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-4 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  super.setup();
  keyStorePasswordFile=new File(baseDir,"keyStorePasswordFile");
  Files.write("keyStorePassword",keyStorePasswordFile,Charsets.UTF_8);
  keyStoreFile=new File(baseDir,"keyStoreFile");
  Assert.assertTrue(keyStoreFile.createNewFile());
  keyAliasPassword=Maps.newHashMap();
  keyAliasPassword.putAll(EncryptionTestUtils.configureTestKeyStore(baseDir,keyStoreFile));
}

</code></pre>

<br>
<pre class="type-11 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingKeyStorePasswordFile() throws Exception {
  Map<String,String> overrides=getOverridesForEncryption();
  overrides.put(Joiner.on(".").join(EncryptionConfiguration.ENCRYPTION_PREFIX,EncryptionConfiguration.KEY_PROVIDER,EncryptionConfiguration.JCE_FILE_KEY_STORE_PASSWORD_FILE),"/path/does/not/exist");
  try {
    channel=createFileChannel(overrides);
    Assert.fail();
  }
 catch (  RuntimeException ex) {
    Assert.assertTrue("Exception message is incorrect: " + ex.getMessage(),ex.getMessage().startsWith("java.io.FileNotFoundException: /path/does/not/exist "));
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadKeyStorePassword() throws Exception {
  Files.write("invalid",keyStorePasswordFile,Charsets.UTF_8);
  Map<String,String> overrides=getOverridesForEncryption();
  try {
    channel=TestUtils.createFileChannel(checkpointDir.getAbsolutePath(),dataDir,overrides);
    Assert.fail();
  }
 catch (  RuntimeException ex) {
    Assert.assertEquals("java.io.IOException: Keystore was tampered with, or " + "password was incorrect",ex.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadKeyProviderInvalidClass() throws Exception {
  Map<String,String> overrides=getOverridesForEncryption();
  overrides.put(Joiner.on(".").join(EncryptionConfiguration.ENCRYPTION_PREFIX,EncryptionConfiguration.KEY_PROVIDER),String.class.getName());
  try {
    channel=createFileChannel(overrides);
    Assert.fail();
  }
 catch (  FlumeException ex) {
    Assert.assertEquals("Unable to instantiate Builder from java.lang.String",ex.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.encryption.TestJCEFileKeyProvider </h4><pre class="type-4 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  baseDir=Files.createTempDir();
  keyStorePasswordFile=new File(baseDir,"keyStorePasswordFile");
  Files.write("keyStorePassword",keyStorePasswordFile,Charsets.UTF_8);
  keyAliasPassword=Maps.newHashMap();
  keyStoreFile=new File(baseDir,"keyStoreFile");
  Assert.assertTrue(keyStoreFile.createNewFile());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.jdbc.BaseJdbcChannelProviderTest </h4><pre class="type-12 type-9 type-13 type-11 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDerbyChannelCapacity(){
  provider=new JdbcChannelProviderImpl();
  derbyCtx.put(ConfigurationConstants.CONFIG_MAX_CAPACITY,"10");
  provider.initialize(derbyCtx);
  Set<MockEvent> events=new HashSet<MockEvent>();
  for (int i=1; i < 12; i++) {
    events.add(MockEventUtils.generateMockEvent(i,i,i,61 % i,1));
  }
  Iterator<MockEvent> meIt=events.iterator();
  int count=0;
  while (meIt.hasNext()) {
    count++;
    MockEvent me=meIt.next();
    String chName=me.getChannel();
    try {
      provider.persistEvent(chName,me);
      if (count == 11) {
        Assert.fail();
      }
    }
 catch (    JdbcChannelException ex) {
      Assert.assertEquals(11,count);
    }
    Event e=provider.removeEvent(chName);
    Assert.assertNotNull(e);
    provider.persistEvent(chName,me);
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * creates 80 events split over 5 channels, stores them
 */
@Test public void testPeristingEvents(){
  provider=new JdbcChannelProviderImpl();
  provider.initialize(derbyCtx);
  Map<String,List<MockEvent>> eventMap=new HashMap<String,List<MockEvent>>();
  Set<MockEvent> events=new HashSet<MockEvent>();
  for (int i=1; i < 81; i++) {
    events.add(MockEventUtils.generateMockEvent(i,i,i,61 % i,5));
  }
  Iterator<MockEvent> meIt=events.iterator();
  while (meIt.hasNext()) {
    MockEvent me=meIt.next();
    String chName=me.getChannel();
    List<MockEvent> eventList=eventMap.get(chName);
    if (eventList == null) {
      eventList=new ArrayList<MockEvent>();
      eventMap.put(chName,eventList);
    }
    eventList.add(me);
    provider.persistEvent(me.getChannel(),me);
  }
  for (  String chName : eventMap.keySet()) {
    List<MockEvent> meList=eventMap.get(chName);
    Iterator<MockEvent> it=meList.iterator();
    while (it.hasNext()) {
      MockEvent me=it.next();
      Event event=provider.removeEvent(chName);
      assertEquals(me,event);
    }
    Event nullEvent=provider.removeEvent(chName);
    Assert.assertNull(nullEvent);
  }
  provider.close();
  provider=null;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.jdbc.TestDatabaseTypeEnum </h4><pre class="type-9 type-1 type-14 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDatabaseTypeLookup(){
  for (  String key : enumMap.keySet()) {
    DatabaseType type=enumMap.get(key);
    DatabaseType lookupType=DatabaseType.valueOf(key);
    String lookupTypeName=lookupType.getName();
    Assert.assertEquals(lookupTypeName,lookupType.toString());
    Assert.assertSame(type,lookupType);
    Assert.assertEquals(key,lookupTypeName);
    DatabaseType lookupType2=DatabaseType.getByName(key.toLowerCase(Locale.ENGLISH));
    Assert.assertSame(type,lookupType2);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.jdbc.TestTransactionIsolationLevelEnum </h4><pre class="type-9 type-1 type-14 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReverseLookup(){
  for (  String key : enumMap.keySet()) {
    TransactionIsolation txIsolation=enumMap.get(key);
    TransactionIsolation lookupTxIsolation=TransactionIsolation.valueOf(key);
    String lookupTxIsolationName=lookupTxIsolation.getName();
    Assert.assertEquals(lookupTxIsolationName,lookupTxIsolation.toString());
    Assert.assertSame(txIsolation,lookupTxIsolation);
    Assert.assertEquals(key,lookupTxIsolationName);
    TransactionIsolation lookupTxIsolation2=TransactionIsolation.getByName(key.toLowerCase(Locale.ENGLISH));
    Assert.assertSame(txIsolation,lookupTxIsolation2);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.client.avro.TestBufferedLineReader </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchedReadsWithinAFile() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  SimpleTextLineEventReader reader=new SimpleTextLineEventReader(new FileReader(f1));
  List<String> out=bodiesAsStrings(reader.readEvents(5));
  assertEquals(5,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file1line3"));
  assertTrue(out.contains("file1line4"));
  assertTrue(out.contains("file1line5"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchedReadsAtFileBoundary() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  SimpleTextLineEventReader reader=new SimpleTextLineEventReader(new FileReader(f1));
  List<String> out=bodiesAsStrings(reader.readEvents(10));
  assertEquals(8,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file1line3"));
  assertTrue(out.contains("file1line4"));
  assertTrue(out.contains("file1line5"));
  assertTrue(out.contains("file1line6"));
  assertTrue(out.contains("file1line7"));
  assertTrue(out.contains("file1line8"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.client.avro.TestReliableSpoolingFileEventReader </h4><pre class="type-12 type-9 type-13 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepeatedCallsWithCommitOnSuccess() throws IOException {
  String trackerDirPath=SpoolDirectorySourceConfigurationConstants.DEFAULT_TRACKER_DIR;
  File trackerDir=new File(WORK_DIR,trackerDirPath);
  ReliableEventReader reader=new ReliableSpoolingFileEventReader.Builder().spoolDirectory(WORK_DIR).trackerDirPath(trackerDirPath).build();
  final int expectedLines=0 + 1 + 2+ 3+ 1;
  int seenLines=0;
  for (int i=0; i < 10; i++) {
    List<Event> events=reader.readEvents(10);
    int numEvents=events.size();
    if (numEvents > 0) {
      seenLines+=numEvents;
      reader.commit();
      File[] files=trackerDir.listFiles();
      Assert.assertNotNull(files);
      Assert.assertTrue("Expected tracker files in tracker dir " + trackerDir.getAbsolutePath(),files.length > 0);
    }
  }
  Assert.assertEquals(expectedLines,seenLines);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConsumeFileRandomlyNewFile() throws Exception {
  if (SystemUtils.IS_OS_WINDOWS) {
    return;
  }
  final ReliableEventReader reader=new ReliableSpoolingFileEventReader.Builder().spoolDirectory(WORK_DIR).consumeOrder(ConsumeOrder.RANDOM).build();
  File fileName=new File(WORK_DIR,"new-file");
  FileUtils.write(fileName,"New file created in the end. Shoud be read randomly.\n");
  Set<String> expected=Sets.newHashSet();
  int totalFiles=WORK_DIR.listFiles().length;
  final Set<String> actual=Sets.newHashSet();
  ExecutorService executor=Executors.newSingleThreadExecutor();
  final Semaphore semaphore1=new Semaphore(0);
  final Semaphore semaphore2=new Semaphore(0);
  Future<Void> wait=executor.submit(new Callable<Void>(){
    @Override public Void call() throws Exception {
      readEventsForFilesInDir(WORK_DIR,reader,actual,semaphore1,semaphore2);
      return null;
    }
  }
);
  semaphore1.acquire();
  File finalFile=new File(WORK_DIR,"t-file");
  FileUtils.write(finalFile,"Last file");
  semaphore2.release();
  wait.get();
  int listFilesCount=((ReliableSpoolingFileEventReader)reader).getListFilesCount();
  finalFile.delete();
  createExpectedFromFilesInSetup(expected);
  expected.add("");
  expected.add("New file created in the end. Shoud be read randomly.");
  expected.add("Last file");
  Assert.assertTrue(listFilesCount < (totalFiles + 2));
  Assert.assertEquals(expected,actual);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.client.avro.TestSpoolingFileLineReader </h4><pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBehaviorWithEmptyFile() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file0");
  Files.touch(f1);
  ReliableSpoolingFileEventReader parser=getParser();
  File f2=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f2,Charsets.UTF_8);
  List<String> out=bodiesAsStrings(parser.readEvents(8));
  parser.commit();
  assertEquals(8,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file1line3"));
  assertTrue(out.contains("file1line4"));
  assertTrue(out.contains("file1line5"));
  assertTrue(out.contains("file1line6"));
  assertTrue(out.contains("file1line7"));
  assertTrue(out.contains("file1line8"));
  assertNull(parser.readEvent());
  List<File> outFiles=Lists.newArrayList(tmpDir.listFiles(directoryFilter()));
  assertEquals(2,outFiles.size());
  assertTrue("Outfiles should have file0 & file1: " + outFiles,outFiles.contains(new File(tmpDir + "/file0" + completedSuffix)));
  assertTrue("Outfiles should have file0 & file1: " + outFiles,outFiles.contains(new File(tmpDir + "/file1" + completedSuffix)));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNameCorrespondsToLatestRead() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  parser.readEvents(5);
  parser.commit();
  assertNotNull(parser.getLastFileRead());
  assertTrue(parser.getLastFileRead().endsWith("file1"));
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  Files.write("file2line1\nfile2line2\nfile2line3\nfile2line4\n" + "file2line5\nfile2line6\nfile2line7\nfile2line8\n",f2,Charsets.UTF_8);
  parser.readEvents(5);
  parser.commit();
  assertNotNull(parser.getLastFileRead());
  assertTrue(parser.getLastFileRead().endsWith("file1"));
  parser.readEvents(5);
  parser.commit();
  assertNotNull(parser.getLastFileRead());
  assertTrue(parser.getLastFileRead().endsWith("file2"));
  parser.readEvents(5);
  assertTrue(parser.getLastFileRead().endsWith("file2"));
  parser.readEvents(5);
  assertTrue(parser.getLastFileRead().endsWith("file2"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDestinationExistsAndSameFileWindows() throws IOException {
  System.setProperty("os.name","Some version of Windows");
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  File f1Completed=new File(tmpDir.getAbsolutePath() + "/file1" + completedSuffix);
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Files.write("file1line1\nfile1line2\n",f1Completed,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> out=Lists.newArrayList();
  for (int i=0; i < 2; i++) {
    out.add(bodyAsString(parser.readEvent()));
    parser.commit();
  }
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  for (int i=0; i < 2; i++) {
    out.add(bodyAsString(parser.readEvent()));
    parser.commit();
  }
  assertEquals(4,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file2line1"));
  assertTrue(out.contains("file2line2"));
  List<File> outFiles=Lists.newArrayList(tmpDir.listFiles(directoryFilter()));
  assertEquals(2,outFiles.size());
  assertTrue(outFiles.contains(new File(tmpDir + "/file2")));
  assertTrue(outFiles.contains(new File(tmpDir + "/file1" + completedSuffix)));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchedReadsAcrossFileBoundary() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> out1=bodiesAsStrings(parser.readEvents(5));
  parser.commit();
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  Files.write("file2line1\nfile2line2\nfile2line3\nfile2line4\n" + "file2line5\nfile2line6\nfile2line7\nfile2line8\n",f2,Charsets.UTF_8);
  List<String> out2=bodiesAsStrings(parser.readEvents(5));
  parser.commit();
  List<String> out3=bodiesAsStrings(parser.readEvents(5));
  parser.commit();
  assertEquals(5,out1.size());
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  assertTrue(out1.contains("file1line5"));
  assertEquals(3,out2.size());
  assertTrue(out2.contains("file1line6"));
  assertTrue(out2.contains("file1line7"));
  assertTrue(out2.contains("file1line8"));
  assertEquals(5,out3.size());
  assertTrue(out3.contains("file2line1"));
  assertTrue(out3.contains("file2line2"));
  assertTrue(out3.contains("file2line3"));
  assertTrue(out3.contains("file2line4"));
  assertTrue(out3.contains("file2line5"));
  List<File> outFiles=Lists.newArrayList(tmpDir.listFiles(directoryFilter()));
  assertEquals(2,outFiles.size());
  assertTrue(outFiles.contains(new File(tmpDir + "/file1" + completedSuffix)));
  assertTrue(outFiles.contains(new File(tmpDir + "/file2")));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicCommitFailure() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n" + "file1line9\nfile1line10\nfile1line11\nfile1line12\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> out1=bodiesAsStrings(parser.readEvents(4));
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  List<String> out2=bodiesAsStrings(parser.readEvents(4));
  assertTrue(out2.contains("file1line1"));
  assertTrue(out2.contains("file1line2"));
  assertTrue(out2.contains("file1line3"));
  assertTrue(out2.contains("file1line4"));
  parser.commit();
  List<String> out3=bodiesAsStrings(parser.readEvents(4));
  assertTrue(out3.contains("file1line5"));
  assertTrue(out3.contains("file1line6"));
  assertTrue(out3.contains("file1line7"));
  assertTrue(out3.contains("file1line8"));
  parser.commit();
  List<String> out4=bodiesAsStrings(parser.readEvents(4));
  assertEquals(4,out4.size());
  assertTrue(out4.contains("file1line9"));
  assertTrue(out4.contains("file1line10"));
  assertTrue(out4.contains("file1line11"));
  assertTrue(out4.contains("file1line12"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicSpooling() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  File f3=new File(tmpDir.getAbsolutePath() + "/file3");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  Files.write("file3line1\nfile3line2\n",f3,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> out=Lists.newArrayList();
  for (int i=0; i < 6; i++) {
    logger.info("At line {}",i);
    String body=bodyAsString(parser.readEvent());
    logger.debug("Seen event with body: {}",body);
    out.add(body);
    parser.commit();
  }
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file2line1"));
  assertTrue(out.contains("file2line2"));
  assertTrue(out.contains("file3line1"));
  assertTrue(out.contains("file3line2"));
  List<File> outFiles=Lists.newArrayList(tmpDir.listFiles(directoryFilter()));
  assertEquals(3,outFiles.size());
  assertTrue(outFiles.contains(new File(tmpDir + "/file1" + completedSuffix)));
  assertTrue(outFiles.contains(new File(tmpDir + "/file2" + completedSuffix)));
  assertTrue(outFiles.contains(new File(tmpDir + "/file3")));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitiallyEmptyDirectory() throws IOException {
  ReliableSpoolingFileEventReader parser=getParser();
  assertNull(parser.readEvent());
  assertEquals(0,parser.readEvents(10).size());
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  List<String> out=bodiesAsStrings(parser.readEvents(2));
  parser.commit();
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  parser.readEvent();
  parser.commit();
  List<File> outFiles=Lists.newArrayList(tmpDir.listFiles(directoryFilter()));
  assertEquals(2,outFiles.size());
  assertTrue(outFiles.contains(new File(tmpDir + "/file1" + completedSuffix)));
  assertTrue(outFiles.contains(new File(tmpDir + "/file2")));
}

</code></pre>

<br>
<pre class="type-10 type-3 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalStateException.class) public void testFileChangesDuringRead() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser1=getParser();
  List<String> out=Lists.newArrayList();
  out.addAll(bodiesAsStrings(parser1.readEvents(2)));
  parser1.commit();
  assertEquals(2,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  Files.append("file1line3\n",f1,Charsets.UTF_8);
  out.add(bodyAsString(parser1.readEvent()));
  parser1.commit();
  out.add(bodyAsString(parser1.readEvent()));
  parser1.commit();
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchedReadsWithinAFile() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  List<String> out=bodiesAsStrings(parser.readEvents(5));
  parser.commit();
  assertEquals(5,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file1line3"));
  assertTrue(out.contains("file1line4"));
  assertTrue(out.contains("file1line5"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLineExceedsMaxLineLength() throws IOException {
  final int maxLineLength=12;
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n" + "reallyreallyreallyreallyLongLineHerefile1line9\n"+ "file1line10\nfile1line11\nfile1line12\nfile1line13\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser(maxLineLength);
  List<String> out1=bodiesAsStrings(parser.readEvents(5));
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  assertTrue(out1.contains("file1line5"));
  parser.commit();
  List<String> out2=bodiesAsStrings(parser.readEvents(4));
  assertTrue(out2.contains("file1line6"));
  assertTrue(out2.contains("file1line7"));
  assertTrue(out2.contains("file1line8"));
  assertTrue(out2.contains("reallyreally"));
  parser.commit();
  List<String> out3=bodiesAsStrings(parser.readEvents(5));
  assertTrue(out3.contains("reallyreally"));
  assertTrue(out3.contains("LongLineHere"));
  assertTrue(out3.contains("file1line9"));
  assertTrue(out3.contains("file1line10"));
  assertTrue(out3.contains("file1line11"));
  parser.commit();
  List<String> out4=bodiesAsStrings(parser.readEvents(5));
  assertTrue(out4.contains("file1line12"));
  assertTrue(out4.contains("file1line13"));
  assertEquals(2,out4.size());
  parser.commit();
  assertEquals(0,parser.readEvents(5).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.clients.log4jappender.TestLoadBalancingLog4jAppender </h4><pre class="type-11 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomBackoff() throws Exception {
  File TESTFILE=new File(TestLoadBalancingLog4jAppender.class.getClassLoader().getResource("flume-loadbalancing-backoff-log4jtest.properties").getFile());
  startSources(TESTFILE,false,new int[]{25430,25431,25432});
  sources.get(0).setFail();
  sources.get(2).setFail();
  sendAndAssertMessages(50);
  Assert.assertEquals(50,sources.get(1).appendCount.intValue());
  Assert.assertEquals(0,sources.get(0).appendCount.intValue());
  Assert.assertEquals(0,sources.get(2).appendCount.intValue());
  sources.get(0).setOk();
  sources.get(1).setFail();
  try {
    send(1);
    Assert.fail("Expected EventDeliveryException");
  }
 catch (  FlumeException e) {
    Assert.assertTrue(e.getCause() instanceof EventDeliveryException);
  }
  Thread.sleep(2500);
  sendAndAssertMessages(50);
  Assert.assertEquals(50,sources.get(0).appendCount.intValue());
  Assert.assertEquals(50,sources.get(1).appendCount.intValue());
  Assert.assertEquals(0,sources.get(2).appendCount.intValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.clients.log4jappender.TestLog4jAppender </h4><pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLog4jAppender() throws IOException {
  configureSource();
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppender.class);
  for (int count=0; count <= 1000; count++) {
    int level=((count % 5) + 1) * 10000;
    String msg="This is log message number" + String.valueOf(count);
    logger.log(Level.toLevel(level),msg);
    Transaction transaction=ch.getTransaction();
    transaction.begin();
    Event event=ch.take();
    Assert.assertNotNull(event);
    Assert.assertEquals(new String(event.getBody(),"UTF8"),msg);
    Map<String,String> hdrs=event.getHeaders();
    Assert.assertNotNull(hdrs.get(Log4jAvroHeaders.TIMESTAMP.toString()));
    Assert.assertEquals(Level.toLevel(level),Level.toLevel(Integer.valueOf(hdrs.get(Log4jAvroHeaders.LOG_LEVEL.toString()))));
    Assert.assertEquals(logger.getName(),hdrs.get(Log4jAvroHeaders.LOGGER_NAME.toString()));
    Assert.assertEquals("UTF8",hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLayout() throws IOException {
  configureSource();
  props.put("log4j.appender.out2.layout","org.apache.log4j.PatternLayout");
  props.put("log4j.appender.out2.layout.ConversionPattern","%-5p [%t]: %m%n");
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppender.class);
  Thread.currentThread().setName("Log4jAppenderTest");
  for (int count=0; count <= 100; count++) {
    int level=((count % 5) + 1) * 10000;
    String msg="This is log message number" + String.valueOf(count);
    logger.log(Level.toLevel(level),msg);
    Transaction transaction=ch.getTransaction();
    transaction.begin();
    Event event=ch.take();
    Assert.assertNotNull(event);
    StringBuilder builder=new StringBuilder();
    builder.append("[").append("Log4jAppenderTest").append("]: ").append(msg);
    String eventBody=new String(event.getBody(),"UTF-8");
    String eventLevel=eventBody.split("\\s+")[0];
    Assert.assertEquals(Level.toLevel(level).toString(),eventLevel);
    Assert.assertEquals(new String(event.getBody(),"UTF8").trim().substring(eventLevel.length()).trim(),builder.toString());
    Map<String,String> hdrs=event.getHeaders();
    Assert.assertNotNull(hdrs.get(Log4jAvroHeaders.TIMESTAMP.toString()));
    Assert.assertEquals(Level.toLevel(level),Level.toLevel(Integer.parseInt(hdrs.get(Log4jAvroHeaders.LOG_LEVEL.toString()))));
    Assert.assertEquals(logger.getName(),hdrs.get(Log4jAvroHeaders.LOGGER_NAME.toString()));
    Assert.assertEquals("UTF8",hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.clients.log4jappender.TestLog4jAppenderWithAvro </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAvroGeneric() throws IOException {
  loadProperties("flume-log4jtest-avro-generic.properties");
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppenderWithAvro.class);
  String msg="This is log message number " + String.valueOf(0);
  Schema schema=new Schema.Parser().parse(getClass().getClassLoader().getResource("myrecord.avsc").openStream());
  GenericRecordBuilder builder=new GenericRecordBuilder(schema);
  GenericRecord record=builder.set("message",msg).build();
  logger.info(record);
  Transaction transaction=ch.getTransaction();
  transaction.begin();
  Event event=ch.take();
  Assert.assertNotNull(event);
  GenericDatumReader<GenericRecord> reader=new GenericDatumReader<GenericRecord>(schema);
  BinaryDecoder decoder=DecoderFactory.get().binaryDecoder(event.getBody(),null);
  GenericRecord recordFromEvent=reader.read(null,decoder);
  Assert.assertEquals(msg,recordFromEvent.get("message").toString());
  Map<String,String> hdrs=event.getHeaders();
  Assert.assertNull(hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
  Assert.assertEquals("Schema URL should be set","file:///tmp/myrecord.avsc",hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_URL.toString()));
  Assert.assertNull("Schema string should not be set",hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_LITERAL.toString()));
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAvroReflect() throws IOException {
  loadProperties("flume-log4jtest-avro-reflect.properties");
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppenderWithAvro.class);
  String msg="This is log message number " + String.valueOf(0);
  AppEvent appEvent=new AppEvent();
  appEvent.setMessage(msg);
  logger.info(appEvent);
  Transaction transaction=ch.getTransaction();
  transaction.begin();
  Event event=ch.take();
  Assert.assertNotNull(event);
  Schema schema=ReflectData.get().getSchema(appEvent.getClass());
  ReflectDatumReader<AppEvent> reader=new ReflectDatumReader<AppEvent>(AppEvent.class);
  BinaryDecoder decoder=DecoderFactory.get().binaryDecoder(event.getBody(),null);
  AppEvent recordFromEvent=reader.read(null,decoder);
  Assert.assertEquals(msg,recordFromEvent.getMessage());
  Map<String,String> hdrs=event.getHeaders();
  Assert.assertNull(hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
  Assert.assertNull("Schema URL should not be set",hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_URL.toString()));
  Assert.assertEquals("Schema string should be set",schema.toString(),hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_LITERAL.toString()));
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.conf.TestFlumeConfiguration </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test fails without FLUME-1743
 */
@Test public void testFLUME1743() throws Exception {
  Properties properties=new Properties();
  properties.put("agent1.channels","ch0");
  properties.put("agent1.channels.ch0.type","memory");
  properties.put("agent1.sources","src0");
  properties.put("agent1.sources.src0.type","multiport_syslogtcp");
  properties.put("agent1.sources.src0.channels","ch0");
  properties.put("agent1.sources.src0.host","localhost");
  properties.put("agent1.sources.src0.ports","10001 10002 10003");
  properties.put("agent1.sources.src0.portHeader","port");
  properties.put("agent1.sinks","sink0");
  properties.put("agent1.sinks.sink0.type","null");
  properties.put("agent1.sinks.sink0.channel","ch0");
  FlumeConfiguration conf=new FlumeConfiguration(properties);
  AgentConfiguration agentConfiguration=conf.getConfigurationFor("agent1");
  Assert.assertEquals(String.valueOf(agentConfiguration.getSourceSet()),1,agentConfiguration.getSourceSet().size());
  Assert.assertEquals(String.valueOf(agentConfiguration.getChannelSet()),1,agentConfiguration.getChannelSet().size());
  Assert.assertEquals(String.valueOf(agentConfiguration.getSinkSet()),1,agentConfiguration.getSinkSet().size());
  Assert.assertTrue(agentConfiguration.getSourceSet().contains("src0"));
  Assert.assertTrue(agentConfiguration.getChannelSet().contains("ch0"));
  Assert.assertTrue(agentConfiguration.getSinkSet().contains("sink0"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.event.TestEventBuilder </h4><pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBody(){
  Event e1=EventBuilder.withBody("e1".getBytes());
  Assert.assertNotNull(e1);
  Assert.assertArrayEquals("body is correct","e1".getBytes(),e1.getBody());
  Event e2=EventBuilder.withBody(Long.valueOf(2).toString().getBytes());
  Assert.assertNotNull(e2);
  Assert.assertArrayEquals("body is correct",Long.valueOf(2L).toString().getBytes(),e2.getBody());
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeaders(){
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("one","1");
  headers.put("two","2");
  Event e1=EventBuilder.withBody("e1".getBytes(),headers);
  Assert.assertNotNull(e1);
  Assert.assertArrayEquals("e1 has the proper body","e1".getBytes(),e1.getBody());
  Assert.assertEquals("e1 has the proper headers",2,e1.getHeaders().size());
  Assert.assertEquals("e1 has a one key","1",e1.getHeaders().get("one"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.instrumentation.TestMonitoredCounterGroup </h4><pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterTwice() throws Exception {
  String name="re-register-" + getRandomName();
  SourceCounter c1=new SourceCounter(name);
  c1.register();
  ObjectName on=new ObjectName(SOURCE_OBJ_NAME_PREFIX + name);
  Assert.assertEquals("StartTime",0L,getStartTime(on));
  Assert.assertEquals("StopTime",0L,getStopTime(on));
  c1.start();
  c1.stop();
  Assert.assertTrue("StartTime",getStartTime(on) > 0L);
  Assert.assertTrue("StopTime",getStopTime(on) > 0L);
  SourceCounter c2=new SourceCounter(name);
  c2.register();
  Assert.assertEquals("StartTime",0L,getStartTime(on));
  Assert.assertEquals("StopTime",0L,getStopTime(on));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestCensoringInterceptor </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCensor(){
  MemoryChannel memCh=new MemoryChannel();
  memCh.configure(new Context());
  memCh.start();
  ChannelSelector cs=new ReplicatingChannelSelector();
  cs.setChannels(Lists.<Channel>newArrayList(memCh));
  ChannelProcessor cp=new ChannelProcessor(cs);
  Map<String,String> cfgMap=Maps.newHashMap();
  cfgMap.put("interceptors","a");
  String builderClass=CensoringInterceptor.Builder.class.getName();
  cfgMap.put("interceptors.a.type",builderClass);
  Context ctx=new Context(cfgMap);
  cp.configure(ctx);
  cp.initialize();
  Map<String,String> headers=Maps.newHashMap();
  String badWord="scribe";
  headers.put("Bad-Words",badWord);
  Event event1=EventBuilder.withBody("test",Charsets.UTF_8,headers);
  Assert.assertEquals(badWord,event1.getHeaders().get("Bad-Words"));
  cp.processEvent(event1);
  Transaction tx=memCh.getTransaction();
  tx.begin();
  Event event1a=memCh.take();
  Assert.assertNull(event1a.getHeaders().get("Bad-Words"));
  tx.commit();
  tx.close();
  cp.close();
  memCh.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestHostInterceptor </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host name can be used instead of host IP.
 */
@Test public void testUseHostname() throws Exception {
  Context ctx=new Context();
  ctx.put("useIP","false");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=InetAddress.getLocalHost().getCanonicalHostName();
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host is NOT overwritten when preserveExisting=true.
 */
@Test public void testPreserve() throws Exception {
  Context ctx=new Context();
  ctx.put("preserveExisting","true");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=ORIGINAL_HOST;
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomHeader() throws Exception {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  Context ctx=new Context();
  ctx.put("preserveExisting","false");
  ctx.put("hostHeader","hostname");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  Assert.assertNull(eventBeforeIntercept.getHeaders().get("hostname"));
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get("hostname");
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(InetAddress.getLocalHost().getHostAddress(),actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host IP is used by default instead of host name.
 */
@Test public void testUseIP() throws Exception {
  Context ctx=new Context();
  ctx.put("useIP","true");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=InetAddress.getLocalHost().getHostAddress();
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host IS overwritten when preserveExisting=false.
 */
@Test public void testClobber() throws Exception {
  Context ctx=new Context();
  ctx.put("preserveExisting","false");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=InetAddress.getLocalHost().getHostAddress();
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestRegexFilteringInterceptor </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultBehavior() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.REGEX_FILTER.toString());
  builder.configure(new Context());
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  Event filteredEvent=interceptor.intercept(event);
  Assert.assertNotNull(filteredEvent);
  Assert.assertEquals(event,filteredEvent);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestStaticInterceptor </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomKeyValue() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  Context ctx=new Context();
  ctx.put(Constants.KEY,"myKey");
  ctx.put(Constants.VALUE,"myVal");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  Assert.assertNull(event.getHeaders().get("myKey"));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get("myKey");
  Assert.assertNotNull(val);
  Assert.assertEquals("myVal",val);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultKeyValue() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  builder.configure(new Context());
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  Assert.assertNull(event.getHeaders().get(Constants.KEY));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get(Constants.KEY);
  Assert.assertNotNull(val);
  Assert.assertEquals(Constants.VALUE,val);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPreserve() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  Context ctx=new Context();
  ctx.put(Constants.PRESERVE,"true");
  ctx.put(Constants.VALUE,"replacement value");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  event.getHeaders().put(Constants.KEY,"incumbent value");
  Assert.assertNotNull(event.getHeaders().get(Constants.KEY));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get(Constants.KEY);
  Assert.assertNotNull(val);
  Assert.assertEquals("incumbent value",val);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReplace() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  Context ctx=new Context();
  ctx.put(Constants.PRESERVE,"false");
  ctx.put(Constants.VALUE,"replacement value");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  event.getHeaders().put(Constants.KEY,"incumbent value");
  Assert.assertNotNull(event.getHeaders().get(Constants.KEY));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get(Constants.KEY);
  Assert.assertNotNull(val);
  Assert.assertEquals("replacement value",val);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestTimestampInterceptor </h4><pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure that the "timestamp" header gets set (to something)
 */
@Test public void testBasic() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  InterceptorBuilderFactory factory=new InterceptorBuilderFactory();
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.TIMESTAMP.toString());
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test event",Charsets.UTF_8);
  Assert.assertNull(event.getHeaders().get(Constants.TIMESTAMP));
  Long now=System.currentTimeMillis();
  event=interceptor.intercept(event);
  String timestampStr=event.getHeaders().get(Constants.TIMESTAMP);
  Assert.assertNotNull(timestampStr);
  Assert.assertTrue(Long.parseLong(timestampStr) >= now);
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure timestamp is NOT overwritten when preserveExistingTimestamp == true
 */
@Test public void testPreserve() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Context ctx=new Context();
  ctx.put("preserveExisting","true");
  InterceptorBuilderFactory factory=new InterceptorBuilderFactory();
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.TIMESTAMP.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  long originalTs=1L;
  Event event=EventBuilder.withBody("test event",Charsets.UTF_8);
  event.getHeaders().put(Constants.TIMESTAMP,Long.toString(originalTs));
  Assert.assertEquals(Long.toString(originalTs),event.getHeaders().get(Constants.TIMESTAMP));
  Long now=System.currentTimeMillis();
  event=interceptor.intercept(event);
  String timestampStr=event.getHeaders().get(Constants.TIMESTAMP);
  Assert.assertNotNull(timestampStr);
  Assert.assertTrue(Long.parseLong(timestampStr) == originalTs);
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure timestamp IS overwritten when preserveExistingTimestamp == false
 */
@Test public void testClobber() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Context ctx=new Context();
  ctx.put("preserveExisting","false");
  InterceptorBuilderFactory factory=new InterceptorBuilderFactory();
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.TIMESTAMP.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  long originalTs=1L;
  Event event=EventBuilder.withBody("test event",Charsets.UTF_8);
  event.getHeaders().put(Constants.TIMESTAMP,Long.toString(originalTs));
  Assert.assertEquals(Long.toString(originalTs),event.getHeaders().get(Constants.TIMESTAMP));
  Long now=System.currentTimeMillis();
  event=interceptor.intercept(event);
  String timestampStr=event.getHeaders().get(Constants.TIMESTAMP);
  Assert.assertNotNull(timestampStr);
  Assert.assertTrue(Long.parseLong(timestampStr) >= now);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.lifecycle.TestLifecycleController </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWaitForState() throws LifecycleException, InterruptedException {
  LifecycleAware delegate=new SleeperLifecycleDelegate();
  Assert.assertTrue(delegate.getLifecycleState().equals(LifecycleState.IDLE));
  delegate.start();
  boolean reached=LifecycleController.waitForState(delegate,LifecycleState.START,2000);
  Assert.assertEquals(true,reached);
  Assert.assertEquals(LifecycleState.START,delegate.getLifecycleState());
  delegate.stop();
  reached=LifecycleController.waitForState(delegate,LifecycleState.STOP,2000);
  Assert.assertEquals(true,reached);
  Assert.assertEquals(LifecycleState.STOP,delegate.getLifecycleState());
  delegate.start();
  reached=LifecycleController.waitForState(delegate,LifecycleState.IDLE,500);
  Assert.assertEquals(false,reached);
  Assert.assertEquals(LifecycleState.START,delegate.getLifecycleState());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWaitForOneOf() throws LifecycleException, InterruptedException {
  LifecycleAware delegate=new SleeperLifecycleDelegate();
  Assert.assertEquals(LifecycleState.IDLE,delegate.getLifecycleState());
  delegate.start();
  boolean reached=LifecycleController.waitForOneOf(delegate,new LifecycleState[]{LifecycleState.STOP,LifecycleState.START},2000);
  Assert.assertTrue("Matched a state change",reached);
  Assert.assertEquals(LifecycleState.START,delegate.getLifecycleState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.node.TestAbstractConfigurationProvider </h4><pre class="type-9 type-10 type-1 type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnspecifiedChannel() throws Exception {
  String agentName="agent1";
  Map<String,String> properties=getPropertiesForChannel(agentName,UnspecifiedChannel.class.getName());
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,properties);
  MaterializedConfiguration config1=provider.getConfiguration();
  Channel channel1=config1.getChannels().values().iterator().next();
  Assert.assertTrue(channel1 instanceof UnspecifiedChannel);
  MaterializedConfiguration config2=provider.getConfiguration();
  Channel channel2=config2.getChannels().values().iterator().next();
  Assert.assertTrue(channel2 instanceof UnspecifiedChannel);
  Assert.assertSame(channel1,channel2);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReusableChannel() throws Exception {
  String agentName="agent1";
  Map<String,String> properties=getPropertiesForChannel(agentName,RecyclableChannel.class.getName());
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,properties);
  MaterializedConfiguration config1=provider.getConfiguration();
  Channel channel1=config1.getChannels().values().iterator().next();
  Assert.assertTrue(channel1 instanceof RecyclableChannel);
  MaterializedConfiguration config2=provider.getConfiguration();
  Channel channel2=config2.getChannels().values().iterator().next();
  Assert.assertTrue(channel2 instanceof RecyclableChannel);
  Assert.assertSame(channel1,channel2);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDispoableChannel() throws Exception {
  String agentName="agent1";
  Map<String,String> properties=getPropertiesForChannel(agentName,DisposableChannel.class.getName());
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,properties);
  MaterializedConfiguration config1=provider.getConfiguration();
  Channel channel1=config1.getChannels().values().iterator().next();
  Assert.assertTrue(channel1 instanceof DisposableChannel);
  MaterializedConfiguration config2=provider.getConfiguration();
  Channel channel2=config2.getChannels().values().iterator().next();
  Assert.assertTrue(channel2 instanceof DisposableChannel);
  Assert.assertNotSame(channel1,channel2);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReusableChannelNotReusedLater() throws Exception {
  String agentName="agent1";
  Map<String,String> propertiesReusable=getPropertiesForChannel(agentName,RecyclableChannel.class.getName());
  Map<String,String> propertiesDispoable=getPropertiesForChannel(agentName,DisposableChannel.class.getName());
  MemoryConfigurationProvider provider=new MemoryConfigurationProvider(agentName,propertiesReusable);
  MaterializedConfiguration config1=provider.getConfiguration();
  Channel channel1=config1.getChannels().values().iterator().next();
  Assert.assertTrue(channel1 instanceof RecyclableChannel);
  provider.setProperties(propertiesDispoable);
  MaterializedConfiguration config2=provider.getConfiguration();
  Channel channel2=config2.getChannels().values().iterator().next();
  Assert.assertTrue(channel2 instanceof DisposableChannel);
  provider.setProperties(propertiesReusable);
  MaterializedConfiguration config3=provider.getConfiguration();
  Channel channel3=config3.getChannels().values().iterator().next();
  Assert.assertTrue(channel3 instanceof RecyclableChannel);
  Assert.assertNotSame(channel1,channel3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.node.TestPollingZooKeeperConfigurationProvider </h4><pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPolling() throws Exception {
  es.awaitEvent();
  es.reset();
  FlumeConfiguration fc=cp.getFlumeConfiguration();
  Assert.assertTrue(fc.getConfigurationErrors().isEmpty());
  AgentConfiguration ac=fc.getConfigurationFor(AGENT_NAME);
  Assert.assertNull(ac);
  addData();
  es.awaitEvent();
  es.reset();
  verifyProperties(cp);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.node.TestPropertiesFileConfigurationProvider </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyRead() throws Exception {
  FlumeConfiguration configuration=provider.getFlumeConfiguration();
  Assert.assertNotNull(configuration);
  List<String> expected=Lists.newArrayList();
  expected.add("host5 CONFIG_ERROR");
  expected.add("host5 INVALID_PROPERTY");
  expected.add("host4 CONFIG_ERROR");
  expected.add("host4 CONFIG_ERROR");
  expected.add("host4 PROPERTY_VALUE_NULL");
  expected.add("host4 PROPERTY_VALUE_NULL");
  expected.add("host4 PROPERTY_VALUE_NULL");
  expected.add("host4 AGENT_CONFIGURATION_INVALID");
  expected.add("ch2 ATTRS_MISSING");
  expected.add("host3 CONFIG_ERROR");
  expected.add("host3 PROPERTY_VALUE_NULL");
  expected.add("host3 AGENT_CONFIGURATION_INVALID");
  expected.add("host2 PROPERTY_VALUE_NULL");
  expected.add("host2 AGENT_CONFIGURATION_INVALID");
  List<String> actual=Lists.newArrayList();
  for (  FlumeConfigurationError error : configuration.getConfigurationErrors()) {
    actual.add(error.getComponentName() + " " + error.getErrorType().toString());
  }
  Collections.sort(expected);
  Collections.sort(actual);
  Assert.assertEquals(expected,actual);
  AgentConfiguration agentConfiguration=configuration.getConfigurationFor("host1");
  Assert.assertNotNull(agentConfiguration);
  LOGGER.info(agentConfiguration.getPrevalidationConfig());
  LOGGER.info(agentConfiguration.getPostvalidationConfig());
  Set<String> sources=Sets.newHashSet("source1");
  Set<String> sinks=Sets.newHashSet("sink1");
  Set<String> channels=Sets.newHashSet("channel1");
  Assert.assertEquals(sources,agentConfiguration.getSourceSet());
  Assert.assertEquals(sinks,agentConfiguration.getSinkSet());
  Assert.assertEquals(channels,agentConfiguration.getChannelSet());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestAvroEventDeserializer </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void resetTest() throws IOException {
  File tempFile=newTestFile(true);
  String target=tempFile.getAbsolutePath();
  logger.info("Target: {}",target);
  TransientPositionTracker tracker=new TransientPositionTracker(target);
  AvroEventDeserializer.Builder desBuilder=new AvroEventDeserializer.Builder();
  EventDeserializer deserializer=desBuilder.build(new Context(),new ResettableFileInputStream(tempFile,tracker));
  BinaryDecoder decoder=null;
  DatumReader<GenericRecord> reader=new GenericDatumReader<GenericRecord>(schema);
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("bar",reader.read(null,decoder).get("foo").toString());
  deserializer.reset();
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("bar",reader.read(null,decoder).get("foo").toString());
  deserializer.mark();
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("baz",reader.read(null,decoder).get("foo").toString());
  deserializer.reset();
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("baz",reader.read(null,decoder).get("foo").toString());
  assertNull(deserializer.readEvent());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestBodyTextEventSerializer </h4><pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithNewline() throws FileNotFoundException, IOException {
  OutputStream out=new FileOutputStream(testFile);
  EventSerializer serializer=EventSerializerFactory.getInstance("text",new Context(),out);
  serializer.afterCreate();
  serializer.write(EventBuilder.withBody("event 1",Charsets.UTF_8));
  serializer.write(EventBuilder.withBody("event 2",Charsets.UTF_8));
  serializer.write(EventBuilder.withBody("event 3",Charsets.UTF_8));
  serializer.flush();
  serializer.beforeClose();
  out.flush();
  out.close();
  BufferedReader reader=new BufferedReader(new FileReader(testFile));
  Assert.assertEquals("event 1",reader.readLine());
  Assert.assertEquals("event 2",reader.readLine());
  Assert.assertEquals("event 3",reader.readLine());
  Assert.assertNull(reader.readLine());
  reader.close();
  FileUtils.forceDelete(testFile);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoNewline() throws FileNotFoundException, IOException {
  OutputStream out=new FileOutputStream(testFile);
  Context context=new Context();
  context.put("appendNewline","false");
  EventSerializer serializer=EventSerializerFactory.getInstance("text",context,out);
  serializer.afterCreate();
  serializer.write(EventBuilder.withBody("event 1\n",Charsets.UTF_8));
  serializer.write(EventBuilder.withBody("event 2\n",Charsets.UTF_8));
  serializer.write(EventBuilder.withBody("event 3\n",Charsets.UTF_8));
  serializer.flush();
  serializer.beforeClose();
  out.flush();
  out.close();
  BufferedReader reader=new BufferedReader(new FileReader(testFile));
  Assert.assertEquals("event 1",reader.readLine());
  Assert.assertEquals("event 2",reader.readLine());
  Assert.assertEquals("event 3",reader.readLine());
  Assert.assertNull(reader.readLine());
  reader.close();
  FileUtils.forceDelete(testFile);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestDurablePositionTracker </h4><pre class="type-9 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGoodTrackerFile() throws IOException, URISyntaxException {
  String fileName="/TestResettableFileInputStream_1.avro";
  File trackerFile=new File(getClass().getResource(fileName).toURI());
  Assert.assertTrue(trackerFile.exists());
  PositionTracker tracker;
  tracker=new DurablePositionTracker(trackerFile,"foo");
  Assert.assertEquals(62,tracker.getPosition());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPartialTrackerFile() throws IOException, URISyntaxException {
  String fileName="/TestResettableFileInputStream_1.truncated.avro";
  File trackerFile=new File(getClass().getResource(fileName).toURI());
  Assert.assertTrue(trackerFile.exists());
  PositionTracker tracker;
  tracker=new DurablePositionTracker(trackerFile,"foo");
  Assert.assertEquals(25,tracker.getPosition());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestHeaderAndBodyTextEventSerializer </h4><pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoNewline() throws FileNotFoundException, IOException {
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header1","value1");
  headers.put("header2","value2");
  OutputStream out=new FileOutputStream(testFile);
  Context context=new Context();
  context.put("appendNewline","false");
  EventSerializer serializer=EventSerializerFactory.getInstance("header_and_text",context,out);
  serializer.afterCreate();
  serializer.write(EventBuilder.withBody("event 1\n",Charsets.UTF_8,headers));
  serializer.write(EventBuilder.withBody("event 2\n",Charsets.UTF_8,headers));
  serializer.write(EventBuilder.withBody("event 3\n",Charsets.UTF_8,headers));
  serializer.flush();
  serializer.beforeClose();
  out.flush();
  out.close();
  BufferedReader reader=new BufferedReader(new FileReader(testFile));
  Assert.assertEquals("{header2=value2, header1=value1} event 1",reader.readLine());
  Assert.assertEquals("{header2=value2, header1=value1} event 2",reader.readLine());
  Assert.assertEquals("{header2=value2, header1=value1} event 3",reader.readLine());
  Assert.assertNull(reader.readLine());
  reader.close();
  FileUtils.forceDelete(testFile);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithNewline() throws FileNotFoundException, IOException {
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header1","value1");
  headers.put("header2","value2");
  OutputStream out=new FileOutputStream(testFile);
  EventSerializer serializer=EventSerializerFactory.getInstance("header_and_text",new Context(),out);
  serializer.afterCreate();
  serializer.write(EventBuilder.withBody("event 1",Charsets.UTF_8,headers));
  serializer.write(EventBuilder.withBody("event 2",Charsets.UTF_8,headers));
  serializer.write(EventBuilder.withBody("event 3",Charsets.UTF_8,headers));
  serializer.flush();
  serializer.beforeClose();
  out.flush();
  out.close();
  BufferedReader reader=new BufferedReader(new FileReader(testFile));
  Assert.assertEquals("{header2=value2, header1=value1} event 1",reader.readLine());
  Assert.assertEquals("{header2=value2, header1=value1} event 2",reader.readLine());
  Assert.assertEquals("{header2=value2, header1=value1} event 3",reader.readLine());
  Assert.assertNull(reader.readLine());
  reader.close();
  FileUtils.forceDelete(testFile);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestResettableFileInputStream </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure a reset() brings us back to the default mark (beginning of file)
 * @throws IOException
 */
@Test public void testReset() throws IOException {
  String output=singleLineFileInit(file,Charsets.UTF_8);
  PositionTracker tracker=new DurablePositionTracker(meta,file.getPath());
  ResettableInputStream in=new ResettableFileInputStream(file,tracker);
  String result1=readLine(in,output.length());
  assertEquals(output,result1);
  in.reset();
  String result2=readLine(in,output.length());
  assertEquals(output,result2);
  String result3=readLine(in,output.length());
  assertNull("Should be null: " + result3,result3);
  in.close();
}

</code></pre>

<br>
<pre class="type-11 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=MalformedInputException.class) public void testUtf8DecodeErrorHandlingFailMalformed() throws IOException {
  ResettableInputStream in=initUtf8DecodeTest(DecodeErrorPolicy.FAIL);
  while (in.readChar() != -1) {
  }
  fail("Expected MalformedInputException!");
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure that we can simply read bytes from a file.
 * @throws IOException
 */
@Test public void testBasicRead() throws IOException {
  String output=singleLineFileInit(file,Charsets.UTF_8);
  PositionTracker tracker=new DurablePositionTracker(meta,file.getPath());
  ResettableInputStream in=new ResettableFileInputStream(file,tracker);
  String result=readLine(in,output.length());
  assertEquals(output,result);
  String afterEOF=readLine(in,output.length());
  assertNull(afterEOF);
  in.close();
}

</code></pre>

<br>
<pre class="type-11 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=MalformedInputException.class) public void testLatin1DecodeErrorHandlingFailMalformed() throws IOException {
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  generateLatin1InvalidSequence(out);
  Files.write(out.toByteArray(),file);
  ResettableInputStream in=initInputStream(DecodeErrorPolicy.FAIL);
  while (in.readChar() != -1) {
  }
  fail("Expected MalformedInputException!");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestSyslogAvroEventSerializer </h4><pre class="type-12 type-1 type-19 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws FileNotFoundException, IOException {
  Assume.assumeTrue(!"Mac OS X".equals(System.getProperty("os.name")) || !System.getProperty("java.version").startsWith("1.7."));
  OutputStream out=new FileOutputStream(testFile);
  String builderName=SyslogAvroEventSerializer.Builder.class.getName();
  Context ctx=new Context();
  ctx.put("syncInterval","4096");
  ctx.put("compressionCodec","snappy");
  EventSerializer serializer=EventSerializerFactory.getInstance(builderName,ctx,out);
  serializer.afterCreate();
  List<Event> events=generateSyslogEvents();
  for (  Event e : events) {
    serializer.write(e);
  }
  serializer.flush();
  serializer.beforeClose();
  out.flush();
  out.close();
  DatumReader<GenericRecord> reader=new GenericDatumReader<GenericRecord>();
  DataFileReader<GenericRecord> fileReader=new DataFileReader<GenericRecord>(testFile,reader);
  GenericRecord record=new GenericData.Record(fileReader.getSchema());
  int numEvents=0;
  while (fileReader.hasNext()) {
    fileReader.next(record);
    int facility=(Integer)record.get("facility");
    int severity=(Integer)record.get("severity");
    long timestamp=(Long)record.get("timestamp");
    String hostname=record.get("hostname").toString();
    String message=record.get("message").toString();
    Assert.assertEquals("Facility should be 1",1,facility);
    System.out.println(timestamp + ": " + message);
    numEvents++;
  }
  fileReader.close();
  Assert.assertEquals("Should have found a total of 3 events",3,numEvents);
  FileUtils.forceDelete(testFile);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestAvroSink </h4><pre class="type-13 type-11 type-10 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslSinkWithNonSslServer() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  Server server=createServer(new MockAvroServer());
  server.start();
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("trust-all-certs",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  Configurables.configure(sink,context);
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  boolean failed=false;
  try {
    for (int i=0; i < 5; i++) {
      sink.process();
      failed=true;
    }
  }
 catch (  EventDeliveryException ex) {
    logger.info("Correctly failed to send event",ex);
  }
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
  if (failed) {
    Assert.fail("SSL-enabled sink successfully connected to a non-SSL-enabled server, that's wrong.");
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslWithCompression() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp("deflate",6);
  boolean bound=false;
  AvroSource source;
  Channel sourceChannel;
  int selectedPort;
  source=new AvroSource();
  sourceChannel=new MemoryChannel();
  Configurables.configure(sourceChannel,new Context());
  List<Channel> channels=new ArrayList<Channel>();
  channels.add(sourceChannel);
  ChannelSelector rcs=new ReplicatingChannelSelector();
  rcs.setChannels(channels);
  source.setChannelProcessor(new ChannelProcessor(rcs));
  Context context=new Context();
  context.put("port",port.toString());
  context.put("bind",hostname);
  context.put("threads","50");
  context.put("compression-type","deflate");
  context.put("ssl",String.valueOf(true));
  context.put("keystore","src/test/resources/server.p12");
  context.put("keystore-password","password");
  context.put("keystore-type","PKCS12");
  Configurables.configure(source,context);
  source.start();
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  Event event=EventBuilder.withBody("Hello avro",Charset.forName("UTF8"));
  context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("trust-all-certs",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  context.put("compression-type","deflate");
  context.put("compression-level",Integer.toString(6));
  Configurables.configure(sink,context);
  sink.start();
  Transaction sickTransaction=channel.getTransaction();
  sickTransaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  sickTransaction.commit();
  sickTransaction.close();
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    logger.debug("Calling Process " + i + " times:"+ status);
    Assert.assertEquals(Sink.Status.READY,status);
  }
  sink.stop();
  Transaction sourceTransaction=sourceChannel.getTransaction();
  sourceTransaction.begin();
  Event sourceEvent=sourceChannel.take();
  Assert.assertNotNull(sourceEvent);
  Assert.assertEquals("Channel contained our event","Hello avro",new String(sourceEvent.getBody()));
  sourceTransaction.commit();
  sourceTransaction.close();
  logger.debug("Round trip event:{}",sourceEvent);
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslProcess() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  Server server=createSslServer(new MockAvroServer());
  server.start();
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("trust-all-certs",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  Configurables.configure(sink,context);
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProcess() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  Server server=createServer(new MockAvroServer());
  server.start();
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslProcessWithTrustStore() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  Server server=createSslServer(new MockAvroServer());
  server.start();
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("truststore","src/test/resources/truststore.jks");
  context.put("truststore-password","password");
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  Configurables.configure(sink,context);
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailedConnect() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charset.forName("UTF8"));
  Server server=createServer(new MockAvroServer());
  server.start();
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Thread.sleep(500L);
  server.close();
  Thread.sleep(500L);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 5; i++) {
    boolean threwException=false;
    try {
      sink.process();
    }
 catch (    EventDeliveryException e) {
      threwException=true;
    }
    Assert.assertTrue("Must throw EventDeliveryException if disconnected",threwException);
  }
  server=createServer(new MockAvroServer());
  server.start();
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
}

</code></pre>

<br>
<pre class="type-13 type-11 type-10 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslSinkWithNonTrustedCert() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp();
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  Server server=createSslServer(new MockAvroServer());
  server.start();
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  Configurables.configure(sink,context);
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  boolean failed=false;
  try {
    for (int i=0; i < 5; i++) {
      sink.process();
      failed=true;
    }
  }
 catch (  EventDeliveryException ex) {
    logger.info("Correctly failed to send event",ex);
  }
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  server.close();
  if (failed) {
    Assert.fail("SSL-enabled sink successfully connected to a server with an untrusted certificate when it should have failed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestDefaultSinkFactory </h4><pre class="type-10 type-1 type-14 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDuplicateCreate(){
  Sink avroSink1=sinkFactory.create("avroSink1","avro");
  Sink avroSink2=sinkFactory.create("avroSink2","avro");
  Assert.assertNotNull(avroSink1);
  Assert.assertNotNull(avroSink2);
  Assert.assertNotSame(avroSink1,avroSink2);
  Assert.assertTrue(avroSink1 instanceof AvroSink);
  Assert.assertTrue(avroSink2 instanceof AvroSink);
  Sink s1=sinkFactory.create("avroSink1","avro");
  Sink s2=sinkFactory.create("avroSink2","avro");
  Assert.assertNotSame(avroSink1,s1);
  Assert.assertNotSame(avroSink2,s2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestLoadBalancingSinkProcessor </h4><pre class="type-9 type-11 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomBackoff() throws Exception {
  Channel ch=new MockChannel();
  int n=100;
  int numEvents=n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  s1.setFail(true);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  s3.setFail(true);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  LoadBalancingSinkProcessor lbsp=getProcessor("random",sinks,true);
  for (int i=0; i < 50; i++) {
    lbsp.process();
  }
  Assert.assertEquals(50,s2.getEvents().size());
  s2.setFail(true);
  s1.setFail(false);
  try {
    lbsp.process();
    Assert.fail("Expected EventDeliveryException");
  }
 catch (  EventDeliveryException e) {
  }
  Thread.sleep(2100);
  Sink.Status s=Sink.Status.READY;
  while (s != Sink.Status.BACKOFF) {
    s=lbsp.process();
  }
  Assert.assertEquals(50,s1.getEvents().size());
  Assert.assertEquals(50,s2.getEvents().size());
  Assert.assertEquals(0,s3.getEvents().size());
}

</code></pre>

<br>
<pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomNoFailure() throws Exception {
  Channel ch=new MockChannel();
  int n=10000;
  int numEvents=n;
  for (int i=0; i < numEvents; i++) {
    ch.put(new MockEvent("test" + i));
  }
  MockSink s1=new MockSink(1);
  s1.setChannel(ch);
  MockSink s2=new MockSink(2);
  s2.setChannel(ch);
  MockSink s3=new MockSink(3);
  s3.setChannel(ch);
  MockSink s4=new MockSink(4);
  s4.setChannel(ch);
  MockSink s5=new MockSink(5);
  s5.setChannel(ch);
  MockSink s6=new MockSink(6);
  s6.setChannel(ch);
  MockSink s7=new MockSink(7);
  s7.setChannel(ch);
  MockSink s8=new MockSink(8);
  s8.setChannel(ch);
  MockSink s9=new MockSink(9);
  s9.setChannel(ch);
  MockSink s0=new MockSink(0);
  s0.setChannel(ch);
  List<Sink> sinks=new ArrayList<Sink>();
  sinks.add(s1);
  sinks.add(s2);
  sinks.add(s3);
  sinks.add(s4);
  sinks.add(s5);
  sinks.add(s6);
  sinks.add(s7);
  sinks.add(s8);
  sinks.add(s9);
  sinks.add(s0);
  LoadBalancingSinkProcessor lbsp=getProcessor("random",sinks,false);
  Status s=Status.READY;
  while (s != Status.BACKOFF) {
    s=lbsp.process();
  }
  Set<Integer> sizeSet=new HashSet<Integer>();
  int sum=0;
  for (  Sink ms : sinks) {
    int count=((MockSink)ms).getEvents().size();
    sum+=count;
    sizeSet.add(count);
  }
  Assert.assertEquals(n,sum);
  Assert.assertTrue("Miraculous distribution",sizeSet.size() > 1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestThriftSink </h4><pre class="type-13 type-11 type-10 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslSinkWithNonSslServer() throws Exception {
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  src=new ThriftTestingSource(ThriftTestingSource.HandlerType.OK.name(),port,ThriftRpcClient.COMPACT_PROTOCOL);
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  context.put("truststore","src/test/resources/truststorefile.jks");
  context.put("truststore-password","password");
  context.put("trustmanager-type",TrustManagerFactory.getDefaultAlgorithm());
  Configurables.configure(sink,context);
  channel.start();
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 11; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  boolean failed=false;
  try {
    for (int i=0; i < 6; i++) {
      Sink.Status status=sink.process();
      failed=true;
    }
  }
 catch (  EventDeliveryException ex) {
  }
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  if (failed) {
    Assert.fail("SSL-enabled sink successfully connected to a non-SSL-enabled server, that's wrong.");
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailedConnect() throws Exception {
  Event event=EventBuilder.withBody("test event 1",Charset.forName("UTF8"));
  sink.start();
  Thread.sleep(500L);
  Thread.sleep(500L);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  for (int i=0; i < 5; i++) {
    boolean threwException=false;
    try {
      sink.process();
    }
 catch (    EventDeliveryException e) {
      threwException=true;
    }
    Assert.assertTrue("Must throw EventDeliveryException if disconnected",threwException);
  }
  src=new ThriftTestingSource(ThriftTestingSource.HandlerType.OK.name(),port,ThriftRpcClient.COMPACT_PROTOCOL);
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    Assert.assertEquals(Sink.Status.READY,status);
  }
  Assert.assertEquals(Sink.Status.BACKOFF,sink.process());
  sink.stop();
}

</code></pre>

<br>
<pre class="type-13 type-11 type-10 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslSinkWithNonTrustedCert() throws Exception {
  Event event=EventBuilder.withBody("test event 1",Charsets.UTF_8);
  src=new ThriftTestingSource(ThriftTestingSource.HandlerType.OK.name(),port,ThriftRpcClient.COMPACT_PROTOCOL,"src/test/resources/keystorefile.jks","password",KeyManagerFactory.getDefaultAlgorithm(),"JKS");
  Context context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  Configurables.configure(sink,context);
  channel.start();
  sink.start();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.START_OR_ERROR,5000));
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 11; i++) {
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  boolean failed=false;
  try {
    for (int i=0; i < 6; i++) {
      Sink.Status status=sink.process();
      failed=true;
    }
  }
 catch (  EventDeliveryException ex) {
  }
  sink.stop();
  Assert.assertTrue(LifecycleController.waitForOneOf(sink,LifecycleState.STOP_OR_ERROR,5000));
  if (failed) {
    Assert.fail("SSL-enabled sink successfully connected to a server with an untrusted certificate when it should have failed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TestElasticSearchIndexRequestBuilderFactory </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseExistingAtTimestampHeaderInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  Map<String,String> headersWithTimestamp=Maps.newHashMap();
  headersWithTimestamp.put("@timestamp","-999");
  base.setHeaders(headersWithTimestamp);
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals(-999L,timestampedEvent.getTimestamp());
  assertEquals("-999",timestampedEvent.getHeaders().get("@timestamp"));
  assertNull(timestampedEvent.getHeaders().get("timestamp"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TestElasticSearchSink </h4><pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseSpecifiedIndexNameBuilder() throws Exception {
  Context context=new Context();
  context.put(ElasticSearchSinkConstants.INDEX_NAME_BUILDER,"org.apache.flume.sink.elasticsearch.FakeIndexNameBuilder");
  assertNull(fixture.getIndexNameBuilder());
  fixture.configure(context);
  assertTrue(fixture.getIndexNameBuilder() instanceof FakeIndexNameBuilder);
}

</code></pre>

<br>
<pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseSpecifiedSerializer() throws Exception {
  Context context=new Context();
  context.put(SERIALIZER,"org.apache.flume.sink.elasticsearch.FakeEventSerializer");
  assertNull(fixture.getEventSerializer());
  fixture.configure(context);
  assertTrue(fixture.getEventSerializer() instanceof FakeEventSerializer);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldAllowCustomElasticSearchIndexRequestBuilderFactory() throws Exception {
  parameters.put(SERIALIZER,CustomElasticSearchIndexRequestBuilderFactory.class.getName());
  fixture.configure(new Context(parameters));
  Channel channel=bindAndStartChannel(fixture);
  Transaction tx=channel.getTransaction();
  tx.begin();
  String body="{ foo: \"bar\" }";
  Event event=EventBuilder.withBody(body.getBytes());
  channel.put(event);
  tx.commit();
  tx.close();
  fixture.process();
  fixture.stop();
  assertEquals(fixture.getIndexName() + "-05_17_36_789",CustomElasticSearchIndexRequestBuilderFactory.actualIndexName);
  assertEquals(fixture.getIndexType(),CustomElasticSearchIndexRequestBuilderFactory.actualIndexType);
  assertArrayEquals(event.getBody(),CustomElasticSearchIndexRequestBuilderFactory.actualEventBody);
  assertTrue(CustomElasticSearchIndexRequestBuilderFactory.hasContext);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TimestampedEventTest </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseExistingAtTimestampHeaderInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  Map<String,String> headersWithTimestamp=Maps.newHashMap();
  headersWithTimestamp.put("@timestamp","-999");
  base.setHeaders(headersWithTimestamp);
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals(-999L,timestampedEvent.getTimestamp());
  assertEquals("-999",timestampedEvent.getHeaders().get("@timestamp"));
  assertNull(timestampedEvent.getHeaders().get("timestamp"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.client.TestElasticSearchRestClient </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldAddNewEventWithTTL() throws Exception {
  ArgumentCaptor<HttpPost> argument=ArgumentCaptor.forClass(HttpPost.class);
  when(httpStatus.getStatusCode()).thenReturn(HttpStatus.SC_OK);
  when(httpResponse.getStatusLine()).thenReturn(httpStatus);
  when(httpClient.execute(any(HttpUriRequest.class))).thenReturn(httpResponse);
  fixture.addEvent(event,nameBuilder,"bar_type",123);
  fixture.execute();
  verify(httpClient).execute(isA(HttpUriRequest.class));
  verify(httpClient).execute(argument.capture());
  assertEquals("http://host1/_bulk",argument.getValue().getURI().toString());
  assertTrue(verifyJsonEvents("{\"index\":{\"_type\":\"bar_type\",\"_index\":\"foo_index\",\"_ttl\":\"123\"}}\n",MESSAGE_CONTENT,EntityUtils.toString(argument.getValue().getEntity())));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldAddNewEventWithoutTTL() throws Exception {
  ArgumentCaptor<HttpPost> argument=ArgumentCaptor.forClass(HttpPost.class);
  when(httpStatus.getStatusCode()).thenReturn(HttpStatus.SC_OK);
  when(httpResponse.getStatusLine()).thenReturn(httpStatus);
  when(httpClient.execute(any(HttpUriRequest.class))).thenReturn(httpResponse);
  fixture.addEvent(event,nameBuilder,"bar_type",-1);
  fixture.execute();
  verify(httpClient).execute(isA(HttpUriRequest.class));
  verify(httpClient).execute(argument.capture());
  assertEquals("http://host1/_bulk",argument.getValue().getURI().toString());
  assertTrue(verifyJsonEvents("{\"index\":{\"_type\":\"bar_type\", \"_index\":\"foo_index\"}}\n",MESSAGE_CONTENT,EntityUtils.toString(argument.getValue().getEntity())));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hbase.TestAsyncHBaseSink </h4><pre class="type-9 type-10 type-1 type-3 type-8 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * This test must run last - it shuts down the minicluster :D
 * @throws Exception
 */
@Ignore("For dev builds only:" + "This test takes too long, and this has to be run after all other" + "tests, since it shuts down the minicluster. "+ "Comment out all other tests"+ "and uncomment this annotation to run this test.") @Test(expected=EventDeliveryException.class) public void testHBaseFailure() throws Exception {
  ctx.put("batchSize","2");
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=false;
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,ctx);
  ctx.put("batchSize","100");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  sink.process();
  Assert.assertFalse(sink.isConfNull());
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,2);
  byte[] out;
  int found=0;
  for (int i=0; i < 2; i++) {
    for (int j=0; j < 2; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(2,found);
  out=results[2];
  Assert.assertArrayEquals(Longs.toByteArray(2),out);
  testUtility.shutdownMiniCluster();
  sink.process();
  sink.stop();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneEventWithDefaults() throws Exception {
  Map<String,String> ctxMap=new HashMap<String,String>();
  ctxMap.put("table",tableName);
  ctxMap.put("columnFamily",columnFamily);
  ctxMap.put("serializer","org.apache.flume.sink.hbase.SimpleAsyncHbaseEventSerializer");
  ctxMap.put("keep-alive","0");
  ctxMap.put("timeout","10000");
  Context tmpctx=new Context();
  tmpctx.putAll(ctxMap);
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,tmpctx);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,tmpctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=EventBuilder.withBody(Bytes.toBytes(valBase));
  channel.put(e);
  tx.commit();
  tx.close();
  Assert.assertFalse(sink.isConfNull());
  sink.process();
  sink.stop();
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,1);
  byte[] out=results[0];
  Assert.assertArrayEquals(e.getBody(),out);
  out=results[1];
  Assert.assertArrayEquals(Longs.toByteArray(1),out);
}

</code></pre>

<br>
<pre class="type-11 type-10 type-1 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=EventDeliveryException.class) public void testTimeOut() throws Exception {
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration(),true,false);
  Configurables.configure(sink,ctx);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  channel.start();
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  Assert.assertFalse(sink.isConfNull());
  sink.process();
  Assert.fail();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThreeEvents() throws Exception {
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,ctx);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  Assert.assertFalse(sink.isConfNull());
  sink.process();
  sink.stop();
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,3);
  byte[] out;
  int found=0;
  for (int i=0; i < 3; i++) {
    for (int j=0; j < 3; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(3,found);
  out=results[3];
  Assert.assertArrayEquals(Longs.toByteArray(3),out);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleBatches() throws Exception {
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  ctx.put("batchSize","2");
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,ctx);
  ctx.put("batchSize","100");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  int count=0;
  Status status=Status.READY;
  while (status != Status.BACKOFF) {
    count++;
    status=sink.process();
  }
  Assert.assertFalse(sink.isConfNull());
  sink.stop();
  Assert.assertEquals(2,count);
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,3);
  byte[] out;
  int found=0;
  for (int i=0; i < 3; i++) {
    for (int j=0; j < 3; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(3,found);
  out=results[3];
  Assert.assertArrayEquals(Longs.toByteArray(3),out);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneEvent() throws Exception {
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,ctx);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=EventBuilder.withBody(Bytes.toBytes(valBase));
  channel.put(e);
  tx.commit();
  tx.close();
  Assert.assertFalse(sink.isConfNull());
  sink.process();
  sink.stop();
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,1);
  byte[] out=results[0];
  Assert.assertArrayEquals(e.getBody(),out);
  out=results[1];
  Assert.assertArrayEquals(Longs.toByteArray(1),out);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=FlumeException.class) public void testMissingTable() throws Exception {
  deleteTable=false;
  ctx.put("batchSize","2");
  AsyncHBaseSink sink=new AsyncHBaseSink(testUtility.getConfiguration());
  Configurables.configure(sink,ctx);
  ctx.put("batchSize","100");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  sink.process();
  Assert.assertFalse(sink.isConfNull());
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,2);
  byte[] out;
  int found=0;
  for (int i=0; i < 2; i++) {
    for (int j=0; j < 2; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(2,found);
  out=results[2];
  Assert.assertArrayEquals(Longs.toByteArray(2),out);
  sink.process();
  sink.stop();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithoutConfigurationObject() throws Exception {
  testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  deleteTable=true;
  ctx.put("batchSize","2");
  ctx.put(HBaseSinkConfigurationConstants.ZK_QUORUM,ZKConfig.getZKQuorumServersString(testUtility.getConfiguration()));
  ctx.put(HBaseSinkConfigurationConstants.ZK_ZNODE_PARENT,testUtility.getConfiguration().get(HConstants.ZOOKEEPER_ZNODE_PARENT));
  AsyncHBaseSink sink=new AsyncHBaseSink();
  Configurables.configure(sink,ctx);
  ctx.put(HBaseSinkConfigurationConstants.ZK_QUORUM,null);
  ctx.put(HBaseSinkConfigurationConstants.ZK_ZNODE_PARENT,null);
  ctx.put("batchSize","100");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,ctx);
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  int count=0;
  Status status=Status.READY;
  while (status != Status.BACKOFF) {
    count++;
    status=sink.process();
  }
  Assert.assertTrue(sink.isConfNull());
  sink.stop();
  Assert.assertEquals(2,count);
  HTable table=new HTable(testUtility.getConfiguration(),tableName);
  byte[][] results=getResults(table,3);
  byte[] out;
  int found=0;
  for (int i=0; i < 3; i++) {
    for (int j=0; j < 3; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(3,found);
  out=results[3];
  Assert.assertArrayEquals(Longs.toByteArray(3),out);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hbase.TestHBaseSink </h4><pre class="type-9 type-11 type-3 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=FlumeException.class) public void testMissingTable() throws Exception {
  logger.info("Running testMissingTable()");
  initContextForSimpleHbaseEventSerializer();
  logger.info("Deleting table {}",tableName);
  testUtility.deleteTable(tableName.getBytes());
  ctx.put("batchSize","2");
  HBaseSink sink=new HBaseSink(conf);
  Configurables.configure(sink,ctx);
  ctx.put("batchSize","100");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,new Context());
  sink.setChannel(channel);
  logger.info("Writing data into channel");
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  logger.info("Starting sink and processing events");
  try {
    logger.info("Calling sink.start()");
    sink.start();
    logger.error("Unexpected error: Calling sink.process()");
    sink.process();
    logger.error("Unexpected error: Calling sink.stop()");
    sink.stop();
  }
  finally {
    testUtility.createTable(tableName.getBytes(),columnFamily.getBytes());
  }
  Assert.fail();
  HTable table=new HTable(conf,tableName);
  byte[][] results=getResults(table,2);
  byte[] out;
  int found=0;
  for (int i=0; i < 2; i++) {
    for (int j=0; j < 2; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(2,found);
  out=results[2];
  Assert.assertArrayEquals(Longs.toByteArray(2),out);
  sink.process();
}

</code></pre>

<br>
<pre class="type-9 type-11 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransactionStateOnSerializationException() throws Exception {
  initContextForSimpleHbaseEventSerializer();
  ctx.put("batchSize","1");
  ctx.put(HBaseSinkConfigurationConstants.CONFIG_SERIALIZER,"org.apache.flume.sink.hbase.MockSimpleHbaseEventSerializer");
  HBaseSink sink=new HBaseSink(conf);
  Configurables.configure(sink,ctx);
  ctx.put("batchSize","100");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,new Context());
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + 0));
  channel.put(e);
  tx.commit();
  tx.close();
  try {
    MockSimpleHbaseEventSerializer.throwException=true;
    sink.process();
    Assert.fail("FlumeException expected from serilazer");
  }
 catch (  FlumeException ex) {
    Assert.assertEquals("Exception for testing",ex.getMessage());
  }
  MockSimpleHbaseEventSerializer.throwException=false;
  sink.process();
  sink.stop();
  HTable table=new HTable(conf,tableName);
  byte[][] results=getResults(table,1);
  byte[] out=results[0];
  Assert.assertArrayEquals(e.getBody(),out);
  out=results[1];
  Assert.assertArrayEquals(Longs.toByteArray(1),out);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-8 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * This test must run last - it shuts down the minicluster :D
 * @throws Exception
 */
@Ignore("For dev builds only:" + "This test takes too long, and this has to be run after all other" + "tests, since it shuts down the minicluster. "+ "Comment out all other tests"+ "and uncomment this annotation to run this test.") @Test(expected=EventDeliveryException.class) public void testHBaseFailure() throws Exception {
  initContextForSimpleHbaseEventSerializer();
  ctx.put("batchSize","2");
  HBaseSink sink=new HBaseSink(conf);
  Configurables.configure(sink,ctx);
  ctx.put("batchSize","100");
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,new Context());
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  for (int i=0; i < 3; i++) {
    Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + i));
    channel.put(e);
  }
  tx.commit();
  tx.close();
  sink.process();
  HTable table=new HTable(conf,tableName);
  byte[][] results=getResults(table,2);
  byte[] out;
  int found=0;
  for (int i=0; i < 2; i++) {
    for (int j=0; j < 2; j++) {
      if (Arrays.equals(results[j],Bytes.toBytes(valBase + "-" + i))) {
        found++;
        break;
      }
    }
  }
  Assert.assertEquals(2,found);
  out=results[2];
  Assert.assertArrayEquals(Longs.toByteArray(2),out);
  testUtility.shutdownMiniCluster();
  sink.process();
  sink.stop();
}

</code></pre>

<br>
<pre class="type-9 type-11 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransactionStateOnChannelException() throws Exception {
  initContextForSimpleHbaseEventSerializer();
  ctx.put("batchSize","1");
  HBaseSink sink=new HBaseSink(conf);
  Configurables.configure(sink,ctx);
  Channel channel=spy(new MemoryChannel());
  Configurables.configure(channel,new Context());
  sink.setChannel(channel);
  sink.start();
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=EventBuilder.withBody(Bytes.toBytes(valBase + "-" + 0));
  channel.put(e);
  tx.commit();
  tx.close();
  doThrow(new ChannelException("Mock Exception")).when(channel).take();
  try {
    sink.process();
    Assert.fail("take() method should throw exception");
  }
 catch (  ChannelException ex) {
    Assert.assertEquals("Mock Exception",ex.getMessage());
  }
  doReturn(e).when(channel).take();
  sink.process();
  sink.stop();
  HTable table=new HTable(conf,tableName);
  byte[][] results=getResults(table,1);
  byte[] out=results[0];
  Assert.assertArrayEquals(e.getBody(),out);
  out=results[1];
  Assert.assertArrayEquals(Longs.toByteArray(1),out);
}

</code></pre>

<br>
<pre class="type-11 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=FlumeException.class) public void testZKQuorumIncorrectPorts() throws Exception {
  initContextForSimpleHbaseEventSerializer();
  Context tmpContext=new Context(ctx.getParameters());
  String zkQuorum="zk1.flume.apache.org:3345, zk2.flume.apache.org:3342, " + "zk3.flume.apache.org:3342";
  tmpContext.put("batchSize","2");
  tmpContext.put(HBaseSinkConfigurationConstants.ZK_QUORUM,zkQuorum);
  tmpContext.put(HBaseSinkConfigurationConstants.ZK_ZNODE_PARENT,conf.get(HConstants.ZOOKEEPER_ZNODE_PARENT,HConstants.DEFAULT_ZOOKEEPER_ZNODE_PARENT));
  HBaseSink sink=new HBaseSink();
  Configurables.configure(sink,tmpContext);
  Assert.fail();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hbase.TestRegexHbaseEventSerializer </h4><pre class="type-9 type-10 type-1 type-3 type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testApacheRegex() throws Exception {
  RegexHbaseEventSerializer s=new RegexHbaseEventSerializer();
  Context context=new Context();
  context.put(RegexHbaseEventSerializer.REGEX_CONFIG,"([^ ]*) ([^ ]*) ([^ ]*) (-|\\[[^\\]]*\\]) \"([^ ]+) ([^ ]+)" + " ([^\"]+)\" (-|[0-9]*) (-|[0-9]*)(?: ([^ \"]*|\"[^\"]*\")" + " ([^ \"]*|\"[^\"]*\"))?");
  context.put(RegexHbaseEventSerializer.COL_NAME_CONFIG,"host,identity,user,time,method,request,protocol,status,size," + "referer,agent");
  s.configure(context);
  String logMsg="33.22.11.00 - - [20/May/2011:07:01:19 +0000] " + "\"GET /wp-admin/css/install.css HTTP/1.0\" 200 813 " + "\"http://www.cloudera.com/wp-admin/install.php\" \"Mozilla/5.0 (comp"+ "atible; Yahoo! Slurp; http://help.yahoo.com/help/us/ysearch/slurp)\"";
  Event e=EventBuilder.withBody(Bytes.toBytes(logMsg));
  s.initialize(e,"CF".getBytes());
  List<Row> actions=s.getActions();
  assertEquals(1,s.getActions().size());
  assertTrue(actions.get(0) instanceof Put);
  Put put=(Put)actions.get(0);
  assertTrue(put.getFamilyMap().containsKey(s.cf));
  List<KeyValue> kvPairs=put.getFamilyMap().get(s.cf);
  assertTrue(kvPairs.size() == 11);
  Map<String,String> resultMap=Maps.newHashMap();
  for (  KeyValue kv : kvPairs) {
    resultMap.put(new String(kv.getQualifier()),new String(kv.getValue()));
  }
  assertEquals("33.22.11.00",resultMap.get("host"));
  assertEquals("-",resultMap.get("identity"));
  assertEquals("-",resultMap.get("user"));
  assertEquals("[20/May/2011:07:01:19 +0000]",resultMap.get("time"));
  assertEquals("GET",resultMap.get("method"));
  assertEquals("/wp-admin/css/install.css",resultMap.get("request"));
  assertEquals("HTTP/1.0",resultMap.get("protocol"));
  assertEquals("200",resultMap.get("status"));
  assertEquals("813",resultMap.get("size"));
  assertEquals("\"http://www.cloudera.com/wp-admin/install.php\"",resultMap.get("referer"));
  assertEquals("\"Mozilla/5.0 (compatible; Yahoo! Slurp; " + "http://help.yahoo.com/help/us/ysearch/slurp)\"",resultMap.get("agent"));
  List<Increment> increments=s.getIncrements();
  assertEquals(0,increments.size());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRowIndexKey() throws Exception {
  RegexHbaseEventSerializer s=new RegexHbaseEventSerializer();
  Context context=new Context();
  context.put(RegexHbaseEventSerializer.REGEX_CONFIG,"^([^\t]+)\t([^\t]+)\t" + "([^\t]+)$");
  context.put(RegexHbaseEventSerializer.COL_NAME_CONFIG,"col1,col2,ROW_KEY");
  context.put("rowKeyIndex","2");
  s.configure(context);
  String body="val1\tval2\trow1";
  Event e=EventBuilder.withBody(Bytes.toBytes(body));
  s.initialize(e,"CF".getBytes());
  List<Row> actions=s.getActions();
  Put put=(Put)actions.get(0);
  List<KeyValue> kvPairs=put.getFamilyMap().get(s.cf);
  assertTrue(kvPairs.size() == 2);
  Map<String,String> resultMap=Maps.newHashMap();
  for (  KeyValue kv : kvPairs) {
    resultMap.put(new String(kv.getQualifier()),new String(kv.getValue()));
  }
  assertEquals("val1",resultMap.get("col1"));
  assertEquals("val2",resultMap.get("col2"));
  assertEquals("row1",Bytes.toString(put.getRow()));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDepositHeaders() throws Exception {
  Charset charset=Charset.forName("KOI8-R");
  RegexHbaseEventSerializer s=new RegexHbaseEventSerializer();
  Context context=new Context();
  context.put(RegexHbaseEventSerializer.DEPOSIT_HEADERS_CONFIG,"true");
  context.put(RegexHbaseEventSerializer.CHARSET_CONFIG,charset.toString());
  s.configure(context);
  String body="body";
  Map<String,String> headers=Maps.newHashMap();
  headers.put("header1","value1");
  headers.put("заголовок2","значение2");
  Event e=EventBuilder.withBody(Bytes.toBytes(body),headers);
  s.initialize(e,"CF".getBytes());
  List<Row> actions=s.getActions();
  assertEquals(1,s.getActions().size());
  assertTrue(actions.get(0) instanceof Put);
  Put put=(Put)actions.get(0);
  assertTrue(put.getFamilyMap().containsKey(s.cf));
  List<KeyValue> kvPairs=put.getFamilyMap().get(s.cf);
  assertTrue(kvPairs.size() == 3);
  Map<String,byte[]> resultMap=Maps.newHashMap();
  for (  KeyValue kv : kvPairs) {
    resultMap.put(new String(kv.getQualifier(),charset),kv.getValue());
  }
  assertEquals(body,new String(resultMap.get(RegexHbaseEventSerializer.COLUMN_NAME_DEFAULT),charset));
  assertEquals("value1",new String(resultMap.get("header1"),charset));
  assertArrayEquals("значение2".getBytes(charset),resultMap.get("заголовок2"));
  assertEquals("значение2".length(),resultMap.get("заголовок2").length);
  List<Increment> increments=s.getIncrements();
  assertEquals(0,increments.size());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultBehavior() throws Exception {
  RegexHbaseEventSerializer s=new RegexHbaseEventSerializer();
  Context context=new Context();
  s.configure(context);
  String logMsg="The sky is falling!";
  Event e=EventBuilder.withBody(Bytes.toBytes(logMsg));
  s.initialize(e,"CF".getBytes());
  List<Row> actions=s.getActions();
  assertTrue(actions.size() == 1);
  assertTrue(actions.get(0) instanceof Put);
  Put put=(Put)actions.get(0);
  assertTrue(put.getFamilyMap().containsKey(s.cf));
  List<KeyValue> kvPairs=put.getFamilyMap().get(s.cf);
  assertTrue(kvPairs.size() == 1);
  Map<String,String> resultMap=Maps.newHashMap();
  for (  KeyValue kv : kvPairs) {
    resultMap.put(new String(kv.getQualifier()),new String(kv.getValue()));
  }
  assertTrue(resultMap.containsKey(RegexHbaseEventSerializer.COLUMN_NAME_DEFAULT));
  assertEquals("The sky is falling!",resultMap.get(RegexHbaseEventSerializer.COLUMN_NAME_DEFAULT));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hdfs.TestBucketWriter </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIntervalRoller() throws IOException, InterruptedException {
  final int ROLL_INTERVAL=1;
  final int NUM_EVENTS=10;
  final AtomicBoolean calledBack=new AtomicBoolean(false);
  MockHDFSWriter hdfsWriter=new MockHDFSWriter();
  BucketWriter bucketWriter=new BucketWriter(ROLL_INTERVAL,0,0,0,ctx,"/tmp","file","",".tmp",null,null,SequenceFile.CompressionType.NONE,hdfsWriter,timedRollerPool,proxy,new SinkCounter("test-bucket-writer-" + System.currentTimeMillis()),0,new HDFSEventSink.WriterCallback(){
    @Override public void run(    String filePath){
      calledBack.set(true);
    }
  }
,null,30000,Executors.newSingleThreadExecutor(),0,0);
  Event e=EventBuilder.withBody("foo",Charsets.UTF_8);
  long startNanos=System.nanoTime();
  for (int i=0; i < NUM_EVENTS - 1; i++) {
    bucketWriter.append(e);
  }
  Thread.sleep(2 * ROLL_INTERVAL * 1000L);
  Assert.assertTrue(bucketWriter.closed);
  Assert.assertTrue(calledBack.get());
  bucketWriter=new BucketWriter(ROLL_INTERVAL,0,0,0,ctx,"/tmp","file","",".tmp",null,null,SequenceFile.CompressionType.NONE,hdfsWriter,timedRollerPool,proxy,new SinkCounter("test-bucket-writer-" + System.currentTimeMillis()),0,null,null,30000,Executors.newSingleThreadExecutor(),0,0);
  bucketWriter.append(e);
  long elapsedMillis=TimeUnit.MILLISECONDS.convert(System.nanoTime() - startNanos,TimeUnit.NANOSECONDS);
  long elapsedSeconds=elapsedMillis / 1000L;
  logger.info("Time elapsed: {} milliseconds",elapsedMillis);
  logger.info("Number of events written: {}",hdfsWriter.getEventsWritten());
  logger.info("Number of bytes written: {}",hdfsWriter.getBytesWritten());
  logger.info("Number of files opened: {}",hdfsWriter.getFilesOpened());
  logger.info("Number of files closed: {}",hdfsWriter.getFilesClosed());
  Assert.assertEquals("events written",NUM_EVENTS,hdfsWriter.getEventsWritten());
  Assert.assertEquals("bytes written",e.getBody().length * NUM_EVENTS,hdfsWriter.getBytesWritten());
  Assert.assertEquals("files opened",2,hdfsWriter.getFilesOpened());
  Assert.assertEquals("files closed",1,hdfsWriter.getFilesClosed());
  logger.info("Waiting for roll...");
  Thread.sleep(2 * ROLL_INTERVAL * 1000L);
  logger.info("Number of files closed: {}",hdfsWriter.getFilesClosed());
  Assert.assertEquals("files closed",2,hdfsWriter.getFilesClosed());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hdfs.TestHDFSEventSink </h4><pre class="type-11 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKerbFileAccess() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  LOG.debug("Starting testKerbFileAccess() ...");
  final String fileName="FlumeData";
  final long rollCount=5;
  final long batchSize=2;
  String newPath=testPath + "/singleBucket";
  String kerbConfPrincipal="user1/localhost@EXAMPLE.COM";
  String kerbKeytab="/usr/lib/flume/nonexistkeytabfile";
  Configuration conf=new Configuration();
  conf.set(CommonConfigurationKeys.HADOOP_SECURITY_AUTHENTICATION,"kerberos");
  UserGroupInformation.setConfiguration(conf);
  Context context=new Context();
  context.put("hdfs.path",newPath);
  context.put("hdfs.filePrefix",fileName);
  context.put("hdfs.rollCount",String.valueOf(rollCount));
  context.put("hdfs.batchSize",String.valueOf(batchSize));
  context.put("hdfs.kerberosPrincipal",kerbConfPrincipal);
  context.put("hdfs.kerberosKeytab",kerbKeytab);
  try {
    Configurables.configure(sink,context);
    Assert.fail("no exception thrown");
  }
 catch (  IllegalArgumentException expected) {
    Assert.assertTrue(expected.getMessage().contains("Keytab is not a readable file"));
  }
 finally {
    conf.set(CommonConfigurationKeys.HADOOP_SECURITY_AUTHENTICATION,"simple");
    UserGroupInformation.setConfiguration(conf);
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCloseOnIdle() throws IOException, EventDeliveryException, InterruptedException {
  String hdfsPath=testPath + "/idleClose";
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  Path dirPath=new Path(hdfsPath);
  fs.delete(dirPath,true);
  fs.mkdirs(dirPath);
  Context context=new Context();
  context.put("hdfs.path",hdfsPath);
  context.put("hdfs.rollCount","0");
  context.put("hdfs.rollSize","0");
  context.put("hdfs.rollInterval","0");
  context.put("hdfs.batchSize","2");
  context.put("hdfs.idleTimeout","1");
  Configurables.configure(sink,context);
  Channel channel=new MemoryChannel();
  Configurables.configure(channel,context);
  sink.setChannel(channel);
  sink.start();
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int i=0; i < 10; i++) {
    Event event=new SimpleEvent();
    event.setBody(("test event " + i).getBytes());
    channel.put(event);
  }
  txn.commit();
  txn.close();
  sink.process();
  sink.process();
  Thread.sleep(1001);
  sink.process();
  sink.process();
  Thread.sleep(500);
  sink.process();
  sink.process();
  sink.stop();
  FileStatus[] dirStat=fs.listStatus(dirPath);
  Path[] fList=FileUtil.stat2Paths(dirStat);
  Assert.assertEquals("Incorrect content of the directory " + StringUtils.join(fList,","),2,fList.length);
  Assert.assertTrue(!fList[0].getName().endsWith(".tmp") && !fList[1].getName().endsWith(".tmp"));
  fs.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hdfs.TestHDFSEventSinkOnMiniCluster </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This is a very basic test that writes one event to HDFS and reads it back.
 */
@Test public void simpleHDFSTest() throws EventDeliveryException, IOException {
  cluster=new MiniDFSCluster(new Configuration(),1,true,null);
  cluster.waitActive();
  String outputDir="/flume/simpleHDFSTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.DataStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  String EVENT_BODY="yarg!";
  channel.getTransaction().begin();
  try {
    channel.put(EventBuilder.withBody(EVENT_BODY,Charsets.UTF_8));
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  sink.process();
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  Assert.assertEquals("Only one file expected",1,statuses.length);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(stream));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertEquals(EVENT_BODY,line);
  }
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This is a very basic test that writes one event to HDFS and reads it back.
 */
@Test public void underReplicationTest() throws EventDeliveryException, IOException {
  Configuration conf=new Configuration();
  conf.set("dfs.replication",String.valueOf(3));
  cluster=new MiniDFSCluster(conf,3,true,null);
  cluster.waitActive();
  String outputDir="/flume/underReplicationTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.DataStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  channel.getTransaction().begin();
  try {
    channel.put(EventBuilder.withBody("yarg 1",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 2",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 3",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 4",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 5",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 5",Charsets.UTF_8));
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Same file.");
  sink.process();
  logger.info("Killing datanode #1...");
  cluster.stopDataNode(0);
  logger.info("Running process(). Create new file? (racy)");
  sink.process();
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Create new file.");
  sink.process();
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(stream));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertTrue(line.startsWith("yarg"));
  }
  Assert.assertTrue("4 or 5 files expected, found " + statuses.length,statuses.length == 4 || statuses.length == 5);
  System.out.println("There are " + statuses.length + " files.");
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Writes two events in GZIP-compressed serialize.
 */
@Test public void simpleHDFSGZipCompressedTest() throws EventDeliveryException, IOException {
  cluster=new MiniDFSCluster(new Configuration(),1,true,null);
  cluster.waitActive();
  String outputDir="/flume/simpleHDFSGZipCompressedTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.CompStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  sinkCtx.put("hdfs.codeC","gzip");
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  String EVENT_BODY_1="yarg1";
  String EVENT_BODY_2="yarg2";
  channel.getTransaction().begin();
  try {
    channel.put(EventBuilder.withBody(EVENT_BODY_1,Charsets.UTF_8));
    channel.put(EventBuilder.withBody(EVENT_BODY_2,Charsets.UTF_8));
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  sink.process();
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  Assert.assertEquals("Only one file expected",1,statuses.length);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(new GZIPInputStream(stream)));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertEquals(EVENT_BODY_1,line);
  }
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * This is a very basic test that writes one event to HDFS and reads it back.
 */
@Ignore("This test is flakey and causes tests to fail pretty often.") @Test public void maxUnderReplicationTest() throws EventDeliveryException, IOException {
  Configuration conf=new Configuration();
  conf.set("dfs.replication",String.valueOf(3));
  cluster=new MiniDFSCluster(conf,3,true,null);
  cluster.waitActive();
  String outputDir="/flume/underReplicationTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.DataStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  channel.getTransaction().begin();
  try {
    for (int i=0; i < 50; i++) {
      channel.put(EventBuilder.withBody("yarg " + i,Charsets.UTF_8));
    }
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Same file.");
  sink.process();
  logger.info("Killing datanode #1...");
  cluster.stopDataNode(0);
  logger.info("Running process(). Create new file? (racy)");
  sink.process();
  for (int i=3; i < 50; i++) {
    logger.info("Running process().");
    sink.process();
  }
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(stream));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertTrue(line.startsWith("yarg"));
  }
  System.out.println("There are " + statuses.length + " files.");
  Assert.assertEquals("31 files expected, found " + statuses.length,31,statuses.length);
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.kafka.TestKafkaSink </h4><pre class="type-13 type-11 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStaticTopic(){
  Context context=prepareDefaultContext();
  context.put(KafkaSinkConstants.TOPIC,TestConstants.STATIC_TOPIC);
  String msg="static-topic-test";
  try {
    Sink.Status status=prepareAndSend(context,msg);
    if (status == Sink.Status.BACKOFF) {
      fail("Error Occurred");
    }
  }
 catch (  EventDeliveryException ex) {
  }
  String fetchedMsg=new String((byte[])testUtil.getNextMessageFromConsumer(TestConstants.STATIC_TOPIC).message());
  assertEquals(msg,fetchedMsg);
}

</code></pre>

<br>
<pre class="type-13 type-11 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTopicAndKeyFromHeader() throws UnsupportedEncodingException {
  Sink kafkaSink=new KafkaSink();
  Context context=prepareDefaultContext();
  Configurables.configure(kafkaSink,context);
  Channel memoryChannel=new MemoryChannel();
  Configurables.configure(memoryChannel,context);
  kafkaSink.setChannel(memoryChannel);
  kafkaSink.start();
  String msg="test-topic-and-key-from-header";
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("topic",TestConstants.CUSTOM_TOPIC);
  headers.put("key",TestConstants.CUSTOM_KEY);
  Transaction tx=memoryChannel.getTransaction();
  tx.begin();
  Event event=EventBuilder.withBody(msg.getBytes(),headers);
  memoryChannel.put(event);
  tx.commit();
  tx.close();
  try {
    Sink.Status status=kafkaSink.process();
    if (status == Sink.Status.BACKOFF) {
      fail("Error Occurred");
    }
  }
 catch (  EventDeliveryException ex) {
  }
  MessageAndMetadata fetchedMsg=testUtil.getNextMessageFromConsumer(TestConstants.CUSTOM_TOPIC);
  assertEquals(msg,new String((byte[])fetchedMsg.message(),"UTF-8"));
  assertEquals(TestConstants.CUSTOM_KEY,new String((byte[])fetchedMsg.key(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-13 type-11 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyChannel() throws UnsupportedEncodingException, EventDeliveryException {
  Sink kafkaSink=new KafkaSink();
  Context context=prepareDefaultContext();
  Configurables.configure(kafkaSink,context);
  Channel memoryChannel=new MemoryChannel();
  Configurables.configure(memoryChannel,context);
  kafkaSink.setChannel(memoryChannel);
  kafkaSink.start();
  Sink.Status status=kafkaSink.process();
  if (status != Sink.Status.BACKOFF) {
    fail("Error Occurred");
  }
  assertNull(testUtil.getNextMessageFromConsumer(KafkaSinkConstants.DEFAULT_TOPIC));
}

</code></pre>

<br>
<pre class="type-13 type-11 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultTopic(){
  Sink kafkaSink=new KafkaSink();
  Context context=prepareDefaultContext();
  Configurables.configure(kafkaSink,context);
  Channel memoryChannel=new MemoryChannel();
  Configurables.configure(memoryChannel,context);
  kafkaSink.setChannel(memoryChannel);
  kafkaSink.start();
  String msg="default-topic-test";
  Transaction tx=memoryChannel.getTransaction();
  tx.begin();
  Event event=EventBuilder.withBody(msg.getBytes());
  memoryChannel.put(event);
  tx.commit();
  tx.close();
  try {
    Sink.Status status=kafkaSink.process();
    if (status == Sink.Status.BACKOFF) {
      fail("Error Occurred");
    }
  }
 catch (  EventDeliveryException ex) {
  }
  String fetchedMsg=new String((byte[])testUtil.getNextMessageFromConsumer(KafkaSinkConstants.DEFAULT_TOPIC).message());
  assertEquals(msg,fetchedMsg);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.kite.TestDatasetSink </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCloseWriter() throws EventDeliveryException {
  config.put(DatasetSinkConstants.CONFIG_FLUSHABLE_COMMIT_ON_BATCH,Boolean.toString(false));
  config.put(DatasetSinkConstants.CONFIG_SYNCABLE_SYNC_ON_BATCH,Boolean.toString(false));
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  sink.closeWriter();
  sink.commitTransaction();
  Assert.assertNull("Writer should be null",sink.getWriter());
  Assert.assertEquals("Should have committed",0,remaining(in));
  sink.stop();
  Assert.assertEquals(Sets.newHashSet(expected),read(Datasets.load(FILE_DATASET_URI)));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCloseAndCreateWriter() throws EventDeliveryException {
  config.put(DatasetSinkConstants.CONFIG_FLUSHABLE_COMMIT_ON_BATCH,Boolean.toString(false));
  config.put(DatasetSinkConstants.CONFIG_SYNCABLE_SYNC_ON_BATCH,Boolean.toString(false));
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  sink.closeWriter();
  sink.commitTransaction();
  sink.createWriter();
  Assert.assertNotNull("Writer should not be null",sink.getWriter());
  Assert.assertEquals("Should have committed",0,remaining(in));
  sink.stop();
  Assert.assertEquals(Sets.newHashSet(expected),read(Datasets.load(FILE_DATASET_URI)));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateWriter() throws EventDeliveryException {
  config.put(DatasetSinkConstants.CONFIG_FLUSHABLE_COMMIT_ON_BATCH,Boolean.toString(false));
  config.put(DatasetSinkConstants.CONFIG_SYNCABLE_SYNC_ON_BATCH,Boolean.toString(false));
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  sink.commitTransaction();
  sink.createWriter();
  Assert.assertNotNull("Writer should not be null",sink.getWriter());
  Assert.assertEquals("Should have committed",0,remaining(in));
  sink.stop();
  Assert.assertEquals(0,read(Datasets.load(FILE_DATASET_URI)).size());
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStartBeforeDatasetCreated() throws EventDeliveryException {
  Datasets.delete(FILE_DATASET_URI);
  DatasetSink sink=sink(in,config);
  sink.start();
  try {
    sink.process();
    Assert.fail("Should have thrown an exception: no such dataset");
  }
 catch (  EventDeliveryException e) {
  }
  Datasets.create(FILE_DATASET_URI,DESCRIPTOR);
  sink.process();
  sink.stop();
  Assert.assertEquals(Sets.newHashSet(expected),read(Datasets.load(FILE_DATASET_URI)));
  Assert.assertEquals("Should have committed",0,remaining(in));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.solr.morphline.TestMorphlineSolrSink </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAvroRoundTrip() throws Exception {
  String file=RESOURCES_DIR + "/test-documents" + "/sample-statuses-20120906-141433.avro";
  testDocumentTypesInternal(file);
  QueryResponse rsp=query("*:*");
  Iterator<SolrDocument> iter=rsp.getResults().iterator();
  ListMultimap<String,String> expectedFieldValues;
  expectedFieldValues=ImmutableListMultimap.of("id","1234567890","text","sample tweet one","user_screen_name","fake_user1");
  assertEquals(expectedFieldValues,next(iter));
  expectedFieldValues=ImmutableListMultimap.of("id","2345678901","text","sample tweet two","user_screen_name","fake_user2");
  assertEquals(expectedFieldValues,next(iter));
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestAvroSource </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifecycle() throws InterruptedException {
  boolean bound=false;
  for (int i=0; i < 100 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("port",String.valueOf(selectedPort=41414 + i));
      context.put("bind","0.0.0.0");
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    ChannelException e) {
    }
  }
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslRequest() throws InterruptedException, IOException {
  boolean bound=false;
  for (int i=0; i < 10 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("port",String.valueOf(selectedPort=41414 + i));
      context.put("bind","0.0.0.0");
      context.put("ssl","true");
      context.put("keystore","src/test/resources/server.p12");
      context.put("keystore-password","password");
      context.put("keystore-type","PKCS12");
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    ChannelException e) {
      Thread.sleep(100);
    }
  }
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  AvroSourceProtocol client=SpecificRequestor.getClient(AvroSourceProtocol.class,new NettyTransceiver(new InetSocketAddress(selectedPort),new SSLChannelFactory()));
  AvroFlumeEvent avroEvent=new AvroFlumeEvent();
  avroEvent.setHeaders(new HashMap<CharSequence,CharSequence>());
  avroEvent.setBody(ByteBuffer.wrap("Hello avro ssl".getBytes()));
  Status status=client.append(avroEvent);
  Assert.assertEquals(Status.OK,status);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Channel contained our event","Hello avro ssl",new String(event.getBody()));
  transaction.commit();
  transaction.close();
  logger.debug("Round trip event:{}",event);
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestBasicSourceSemantics </h4><pre class="type-11 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigureCalledWhenStarted() throws Exception {
  source=spyAndConfigure(new DoNothingSource());
  source.start();
  try {
    source.configure(context);
    Assert.fail();
  }
 catch (  IllegalStateException expected) {
  }
  Assert.assertTrue(source.isStarted());
  Assert.assertNull(source.getStartException());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoStartThrowsException() throws Exception {
  source=spyAndConfigure(new DoNothingSource(){
    @Override protected void doStart() throws FlumeException {
      throw new FlumeException("dummy");
    }
  }
);
  source.start();
  Assert.assertFalse(source.isStarted());
  Assert.assertEquals(LifecycleState.ERROR,source.getLifecycleState());
  Assert.assertNotNull(source.getStartException());
}

</code></pre>

<br>
<pre class="type-11 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoConfigureThrowsException() throws Exception {
  source=spy(new DoNothingSource(){
    @Override protected void doConfigure(    Context context) throws FlumeException {
      throw new FlumeException("dummy");
    }
  }
);
  source.setChannelProcessor(channelProcessor);
  try {
    source.configure(context);
    Assert.fail();
  }
 catch (  FlumeException expected) {
  }
  Assert.assertFalse(source.isStarted());
  Assert.assertEquals(LifecycleState.ERROR,source.getLifecycleState());
  Assert.assertNotNull(source.getStartException());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoStopThrowsException() throws Exception {
  source=spyAndConfigure(new DoNothingSource(){
    @Override protected void doStop() throws FlumeException {
      throw new FlumeException("dummy");
    }
  }
);
  source.start();
  source.stop();
  Assert.assertFalse(source.isStarted());
  Assert.assertEquals(LifecycleState.ERROR,source.getLifecycleState());
  Assert.assertNull(source.getStartException());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestDefaultSourceFactory </h4><pre class="type-10 type-1 type-14 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDuplicateCreate(){
  Source avroSource1=sourceFactory.create("avroSource1","avro");
  Source avroSource2=sourceFactory.create("avroSource2","avro");
  Assert.assertNotNull(avroSource1);
  Assert.assertNotNull(avroSource2);
  Assert.assertNotSame(avroSource1,avroSource2);
  Assert.assertTrue(avroSource1 instanceof AvroSource);
  Assert.assertTrue(avroSource2 instanceof AvroSource);
  Source s1=sourceFactory.create("avroSource1","avro");
  Source s2=sourceFactory.create("avroSource2","avro");
  Assert.assertNotSame(avroSource1,s1);
  Assert.assertNotSame(avroSource2,s2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestExecSource </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMonitoredCounterGroup() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  if (SystemUtils.IS_OS_WINDOWS) {
    runTestShellCmdHelper("powershell -ExecutionPolicy Unrestricted -command","foreach ($i in 1..5) { $i }",new String[]{"1","2","3","4","5"});
  }
 else {
    runTestShellCmdHelper("/bin/bash -c","for i in {1..5}; do echo $i;done",new String[]{"1","2","3","4","5"});
  }
  ObjectName objName=null;
  try {
    objName=new ObjectName("org.apache.flume.source" + ":type=" + source.getName());
    MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
    String strAtts[]={"Type","EventReceivedCount","EventAcceptedCount"};
    AttributeList attrList=mbeanServer.getAttributes(objName,strAtts);
    Assert.assertNotNull(attrList.get(0));
    Assert.assertEquals("Expected Value: Type","Type",((Attribute)attrList.get(0)).getName());
    Assert.assertEquals("Expected Value: SOURCE","SOURCE",((Attribute)attrList.get(0)).getValue());
    Assert.assertNotNull(attrList.get(1));
    Assert.assertEquals("Expected Value: EventReceivedCount","EventReceivedCount",((Attribute)attrList.get(1)).getName());
    Assert.assertEquals("Expected Value: 5","5",((Attribute)attrList.get(1)).getValue().toString());
    Assert.assertNotNull(attrList.get(2));
    Assert.assertEquals("Expected Value: EventAcceptedCount","EventAcceptedCount",((Attribute)attrList.get(2)).getName());
    Assert.assertEquals("Expected Value: 5","5",((Attribute)attrList.get(2)).getValue().toString());
  }
 catch (  Exception ex) {
    System.out.println("Unable to retreive the monitored counter: " + objName + ex.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchTimeout() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  String filePath="/tmp/flume-execsource." + Thread.currentThread().getId();
  String eventBody="TestMessage";
  FileOutputStream outputStream=new FileOutputStream(filePath);
  context.put(ExecSourceConfigurationConstants.CONFIG_BATCH_SIZE,"50000");
  context.put(ExecSourceConfigurationConstants.CONFIG_BATCH_TIME_OUT,"750");
  context.put("shell",SystemUtils.IS_OS_WINDOWS ? "powershell -ExecutionPolicy Unrestricted -command" : "/bin/bash -c");
  context.put("command",SystemUtils.IS_OS_WINDOWS ? "Get-Content " + filePath + " | Select-Object -Last 10" : ("tail -f " + filePath));
  Configurables.configure(source,context);
  source.start();
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int lineNumber=0; lineNumber < 3; lineNumber++) {
    outputStream.write((eventBody).getBytes());
    outputStream.write(String.valueOf(lineNumber).getBytes());
    outputStream.write('\n');
    outputStream.flush();
  }
  outputStream.close();
  Thread.sleep(1500);
  for (int i=0; i < 3; i++) {
    Event event=channel.take();
    assertNotNull(event);
    assertNotNull(event.getBody());
    assertEquals(eventBody + String.valueOf(i),new String(event.getBody()));
  }
  transaction.commit();
  transaction.close();
  source.stop();
  File file=new File(filePath);
  FileUtils.forceDelete(file);
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestart() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  context.put(ExecSourceConfigurationConstants.CONFIG_RESTART_THROTTLE,"10");
  context.put(ExecSourceConfigurationConstants.CONFIG_RESTART,"true");
  context.put("command",SystemUtils.IS_OS_WINDOWS ? "cmd /c echo flume" : "echo flume");
  Configurables.configure(source,context);
  source.start();
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long start=System.currentTimeMillis();
  for (int i=0; i < 5; i++) {
    Event event=channel.take();
    assertNotNull(event);
    assertNotNull(event.getBody());
    assertEquals("flume",new String(event.getBody(),Charsets.UTF_8));
  }
  assertTrue(System.currentTimeMillis() - start < 10000L);
  transaction.commit();
  transaction.close();
  source.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestMultiportSyslogTCPSource </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the reassembly of a single line across multiple packets.
 */
@Test public void testFragmented() throws CharacterCodingException {
  final int maxLen=100;
  IoBuffer savedBuf=IoBuffer.allocate(maxLen);
  String origMsg="<1>- - blah blam foo\n";
  IoBuffer buf1=IoBuffer.wrap(origMsg.substring(0,11).getBytes(Charsets.UTF_8));
  IoBuffer buf2=IoBuffer.wrap(origMsg.substring(11,16).getBytes(Charsets.UTF_8));
  IoBuffer buf3=IoBuffer.wrap(origMsg.substring(16,21).getBytes(Charsets.UTF_8));
  LineSplitter lineSplitter=new LineSplitter(maxLen);
  ParsedBuffer parsedLine=new ParsedBuffer();
  Assert.assertFalse("Incomplete line should not be parsed",lineSplitter.parseLine(buf1,savedBuf,parsedLine));
  Assert.assertFalse("Incomplete line should not be parsed",lineSplitter.parseLine(buf2,savedBuf,parsedLine));
  Assert.assertTrue("Completed line should be parsed",lineSplitter.parseLine(buf3,savedBuf,parsedLine));
  Assert.assertEquals(origMsg.trim(),parsedLine.buffer.getString(Charsets.UTF_8.newDecoder()));
  parsedLine.buffer.rewind();
  MultiportSyslogTCPSource.MultiportSyslogHandler handler=new MultiportSyslogTCPSource.MultiportSyslogHandler(maxLen,100,null,null,SyslogSourceConfigurationConstants.DEFAULT_PORT_HEADER,new ThreadSafeDecoder(Charsets.UTF_8),new ConcurrentHashMap<Integer,ThreadSafeDecoder>(),null);
  Event event=handler.parseEvent(parsedLine,Charsets.UTF_8.newDecoder());
  String body=new String(event.getBody(),Charsets.UTF_8);
  Assert.assertEquals("Event body incorrect",origMsg.trim().substring(7),body);
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that different charsets are parsed by different ports correctly.
 */
@Test public void testPortCharsetHandling() throws UnknownHostException, Exception {
  InetAddress localAddr=InetAddress.getLocalHost();
  DefaultIoSessionDataStructureFactory dsFactory=new DefaultIoSessionDataStructureFactory();
  int port1=10001;
  NioSession session1=mock(NioSession.class);
  session1.setAttributeMap(dsFactory.getAttributeMap(session1));
  SocketAddress sockAddr1=new InetSocketAddress(localAddr,port1);
  when(session1.getLocalAddress()).thenReturn(sockAddr1);
  int port2=10002;
  NioSession session2=mock(NioSession.class);
  session2.setAttributeMap(dsFactory.getAttributeMap(session2));
  SocketAddress sockAddr2=new InetSocketAddress(localAddr,port2);
  when(session2.getLocalAddress()).thenReturn(sockAddr2);
  ConcurrentMap<Integer,ThreadSafeDecoder> portCharsets=new ConcurrentHashMap<Integer,ThreadSafeDecoder>();
  portCharsets.put(port1,new ThreadSafeDecoder(Charsets.ISO_8859_1));
  portCharsets.put(port2,new ThreadSafeDecoder(Charsets.UTF_8));
  MemoryChannel chan=new MemoryChannel();
  chan.configure(new Context());
  chan.start();
  ReplicatingChannelSelector sel=new ReplicatingChannelSelector();
  sel.setChannels(Lists.<Channel>newArrayList(chan));
  ChannelProcessor chanProc=new ChannelProcessor(sel);
  MultiportSyslogHandler handler=new MultiportSyslogHandler(1000,10,chanProc,new SourceCounter("test"),"port",new ThreadSafeDecoder(Charsets.UTF_8),portCharsets,null);
  handler.sessionCreated(session1);
  handler.sessionCreated(session2);
  String header="<10>2012-08-17T02:14:00-07:00 192.168.1.110 ";
  String dangerousChars="þÿÀÁ";
  String msg;
  IoBuffer buf;
  Event evt;
  msg=header + dangerousChars + "\n";
  buf=IoBuffer.wrap(msg.getBytes(Charsets.ISO_8859_1));
  handler.messageReceived(session1,buf);
  evt=takeEvent(chan);
  Assert.assertNotNull("Event vanished!",evt);
  Assert.assertNull(evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
  msg=header + dangerousChars + "\n";
  buf=IoBuffer.wrap(msg.getBytes(Charsets.ISO_8859_1));
  handler.messageReceived(session2,buf);
  evt=takeEvent(chan);
  Assert.assertNotNull("Event vanished!",evt);
  Assert.assertEquals("Expected invalid event due to character encoding",SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
  msg=header + dangerousChars + "\n";
  buf=IoBuffer.wrap(msg.getBytes(Charsets.UTF_8));
  handler.messageReceived(session2,buf);
  evt=takeEvent(chan);
  Assert.assertNotNull("Event vanished!",evt);
  Assert.assertNull(evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test parser handling of different character sets.
 */
@Test public void testCharsetParsing() throws FileNotFoundException, IOException {
  String header="<10>2012-08-11T01:01:01Z localhost ";
  String enBody="Yarf yarf yarf";
  String enMsg=header + enBody;
  String frBody="Comment " + "\u00EA" + "tes-vous?";
  String frMsg=header + frBody;
  String esBody="¿Cómo estás?";
  String esMsg=header + esBody;
  MultiportSyslogHandler handler=new MultiportSyslogHandler(1000,10,new ChannelProcessor(new ReplicatingChannelSelector()),new SourceCounter("test"),"port",new ThreadSafeDecoder(Charsets.UTF_8),new ConcurrentHashMap<Integer,ThreadSafeDecoder>(),null);
  ParsedBuffer parsedBuf=new ParsedBuffer();
  parsedBuf.incomplete=false;
  String[] bodies={enBody,esBody,frBody};
  String[] msgs={enMsg,esMsg,frMsg};
  Charset[] charsets={Charsets.UTF_8,Charsets.ISO_8859_1};
  for (  Charset charset : charsets) {
    for (int i=0; i < msgs.length; i++) {
      String msg=msgs[i];
      String body=bodies[i];
      parsedBuf.buffer=IoBuffer.wrap(msg.getBytes(charset));
      Event evt=handler.parseEvent(parsedBuf,charset.newDecoder());
      String result=new String(evt.getBody(),charset);
      Assert.assertEquals(charset + " parse error: " + msg,body,result);
      Assert.assertNull(evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
    }
  }
  byte[] badUtf8Seq=enMsg.getBytes(Charsets.ISO_8859_1);
  int badMsgLen=badUtf8Seq.length;
  badUtf8Seq[badMsgLen - 2]=(byte)0xFE;
  badUtf8Seq[badMsgLen - 1]=(byte)0xFF;
  parsedBuf.buffer=IoBuffer.wrap(badUtf8Seq);
  Event evt=handler.parseEvent(parsedBuf,Charsets.UTF_8.newDecoder());
  Assert.assertEquals("event body: " + new String(evt.getBody(),Charsets.ISO_8859_1) + " and my default charset = "+ Charset.defaultCharset()+ " with event = "+ evt,SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
  Assert.assertArrayEquals("Raw message data should be kept in body of event",badUtf8Seq,evt.getBody());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestNetcatSource </h4><pre class="type-12 type-9 type-13 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifecycle() throws InterruptedException, LifecycleException, EventDeliveryException {
  ExecutorService executor=Executors.newFixedThreadPool(3);
  boolean bound=false;
  for (int i=0; i < 100 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("bind","0.0.0.0");
      context.put("port","41414");
      context.put("ack-every-event",String.valueOf(ackEveryEvent));
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    FlumeException e) {
    }
  }
  Runnable clientRequestRunnable=new Runnable(){
    @Override public void run(){
      try {
        SocketChannel clientChannel=SocketChannel.open(new InetSocketAddress(41414));
        Writer writer=Channels.newWriter(clientChannel,"utf-8");
        BufferedReader reader=new BufferedReader(Channels.newReader(clientChannel,"utf-8"));
        writer.write("Test message\n");
        writer.flush();
        if (ackEveryEvent) {
          String response=reader.readLine();
          Assert.assertEquals("Server should return OK","OK",response);
        }
 else {
          Assert.assertFalse("Server should not return anything",reader.ready());
        }
        clientChannel.close();
      }
 catch (      IOException e) {
        logger.error("Caught exception: ",e);
      }
    }
  }
;
  ChannelSelector selector=source.getChannelProcessor().getSelector();
  Transaction tx=selector.getAllChannels().get(0).getTransaction();
  tx.begin();
  for (int i=0; i < 100; i++) {
    logger.info("Sending request");
    executor.submit(clientRequestRunnable);
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertArrayEquals("Test message".getBytes(),event.getBody());
  }
  tx.commit();
  tx.close();
  executor.shutdown();
  while (!executor.isTerminated()) {
    executor.awaitTermination(500,TimeUnit.MILLISECONDS);
  }
  source.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSpoolDirectorySource </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutBasenameHeader() throws IOException, InterruptedException {
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  context.put(SpoolDirectorySourceConfigurationConstants.BASENAME_HEADER,"true");
  context.put(SpoolDirectorySourceConfigurationConstants.BASENAME_HEADER_KEY,"basenameHeaderKeyTest");
  Configurables.configure(source,context);
  source.start();
  while (source.getSourceCounter().getEventAcceptedCount() < 8) {
    Thread.sleep(10);
  }
  Transaction txn=channel.getTransaction();
  txn.begin();
  Event e=channel.take();
  Assert.assertNotNull("Event must not be null",e);
  Assert.assertNotNull("Event headers must not be null",e.getHeaders());
  Assert.assertNotNull(e.getHeaders().get("basenameHeaderKeyTest"));
  Assert.assertEquals(f1.getName(),e.getHeaders().get("basenameHeaderKeyTest"));
  txn.commit();
  txn.close();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReconfigure() throws InterruptedException, IOException {
  final int NUM_RECONFIGS=20;
  for (int i=0; i < NUM_RECONFIGS; i++) {
    Context context=new Context();
    File file=new File(tmpDir.getAbsolutePath() + "/file-" + i);
    Files.write("File " + i,file,Charsets.UTF_8);
    context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
    Configurables.configure(source,context);
    source.start();
    Thread.sleep(TimeUnit.SECONDS.toMillis(1));
    Transaction txn=channel.getTransaction();
    txn.begin();
    try {
      Event event=channel.take();
      String content=new String(event.getBody(),Charsets.UTF_8);
      Assert.assertEquals("File " + i,content);
      txn.commit();
    }
 catch (    Throwable t) {
      txn.rollback();
    }
 finally {
      txn.close();
    }
    source.stop();
    Assert.assertFalse("Fatal error on iteration " + i,source.hasFatalError());
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifecycle() throws IOException, InterruptedException {
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  Configurables.configure(source,context);
  for (int i=0; i < 10; i++) {
    source.start();
    Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
    Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
    source.stop();
    Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
    Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
  }
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEndWithZeroByteFiles() throws IOException, InterruptedException {
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\n",f1,Charsets.UTF_8);
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  File f3=new File(tmpDir.getAbsolutePath() + "/file3");
  File f4=new File(tmpDir.getAbsolutePath() + "/file4");
  Files.touch(f2);
  Files.touch(f3);
  Files.touch(f4);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  Configurables.configure(source,context);
  source.start();
  Thread.sleep(5000);
  Assert.assertFalse("Server did not error",source.hasFatalError());
  Assert.assertEquals("One message was read",1,source.getSourceCounter().getEventAcceptedCount());
  source.stop();
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSourceDoesNotDieOnFullChannel() throws Exception {
  Context chContext=new Context();
  chContext.put("capacity","2");
  chContext.put("transactionCapacity","2");
  chContext.put("keep-alive","0");
  channel.stop();
  Configurables.configure(channel,chContext);
  channel.start();
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  context.put(SpoolDirectorySourceConfigurationConstants.BATCH_SIZE,"2");
  Configurables.configure(source,context);
  source.setBackOff(false);
  source.start();
  while (!source.hitChannelException()) {
    Thread.sleep(50);
  }
  List<String> dataOut=Lists.newArrayList();
  for (int i=0; i < 8; ) {
    Transaction tx=channel.getTransaction();
    tx.begin();
    Event e=channel.take();
    if (e != null) {
      dataOut.add(new String(e.getBody(),"UTF-8"));
      i++;
    }
    e=channel.take();
    if (e != null) {
      dataOut.add(new String(e.getBody(),"UTF-8"));
      i++;
    }
    tx.commit();
    tx.close();
  }
  Assert.assertTrue("Expected to hit ChannelException, but did not!",source.hitChannelException());
  Assert.assertEquals(8,dataOut.size());
  source.stop();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutFilenameHeader() throws IOException, InterruptedException {
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  context.put(SpoolDirectorySourceConfigurationConstants.FILENAME_HEADER,"true");
  context.put(SpoolDirectorySourceConfigurationConstants.FILENAME_HEADER_KEY,"fileHeaderKeyTest");
  Configurables.configure(source,context);
  source.start();
  while (source.getSourceCounter().getEventAcceptedCount() < 8) {
    Thread.sleep(10);
  }
  Transaction txn=channel.getTransaction();
  txn.begin();
  Event e=channel.take();
  Assert.assertNotNull("Event must not be null",e);
  Assert.assertNotNull("Event headers must not be null",e.getHeaders());
  Assert.assertNotNull(e.getHeaders().get("fileHeaderKeyTest"));
  Assert.assertEquals(f1.getAbsolutePath(),e.getHeaders().get("fileHeaderKeyTest"));
  txn.commit();
  txn.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSyslogParser </h4><pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMessageParsing(){
  SyslogParser parser=new SyslogParser();
  Charset charset=Charsets.UTF_8;
  List<String> messages=Lists.newArrayList();
  messages.add("<34>Oct 11 22:14:15 mymachine su: 'su root' failed for " + "lonvick on /dev/pts/8");
  messages.add("<13>Feb  5 17:32:18 10.0.0.99 Use the BFG!");
  messages.add("<165>Aug 24 05:34:00 CST 1987 mymachine myproc[10]: %% " + "It's time to make the do-nuts.  %%  Ingredients: Mix=OK, Jelly=OK # " + "Devices: Mixer=OK, Jelly_Injector=OK, Frier=OK # Transport: "+ "Conveyer1=OK, Conveyer2=OK # %%");
  messages.add("<0>Oct 22 10:52:12 scapegoat 1990 Oct 22 10:52:01 TZ-6 " + "scapegoat.dmz.example.org 10.1.2.3 sched[0]: That's All Folks!");
  messages.add("<34>1 2003-10-11T22:14:15.003Z mymachine.example.com su - " + "ID47 - BOM'su root' failed for lonvick on /dev/pts/8");
  messages.add("<165>1 2003-08-24T05:14:15.000003-07:00 192.0.2.1 myproc " + "8710 - - %% It's time to make the do-nuts.");
  messages.add("<13>2003-08-24T05:14:15Z localhost snarf?");
  messages.add("<13>2012-08-16T14:34:03-08:00 127.0.0.1 test shnap!");
  for (  String msg : messages) {
    Set<String> keepFields=new HashSet<String>();
    Event event=parser.parseMessage(msg,charset,keepFields);
    Assert.assertNull("Failure to parse known-good syslog message",event.getHeaders().get(SyslogUtils.EVENT_STATUS));
  }
  for (  String msg : messages) {
    Set<String> keepFields=new HashSet<String>();
    keepFields.add(SyslogUtils.KEEP_FIELDS_ALL);
    Event event=parser.parseMessage(msg,charset,keepFields);
    Assert.assertArrayEquals(event.getBody(),msg.getBytes());
    Assert.assertNull("Failure to parse known-good syslog message",event.getHeaders().get(SyslogUtils.EVENT_STATUS));
  }
  for (  String msg : messages) {
    Set<String> keepFields=new HashSet<String>();
    keepFields.add(SyslogSourceConfigurationConstants.CONFIG_KEEP_FIELDS_HOSTNAME);
    Event event=parser.parseMessage(msg,charset,keepFields);
    Assert.assertTrue("Failure to persist hostname",new String(event.getBody()).contains(event.getHeaders().get("host")));
    Assert.assertNull("Failure to parse known-good syslog message",event.getHeaders().get(SyslogUtils.EVENT_STATUS));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSyslogUdpSource </h4><pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLargePayload() throws Exception {
  init("true");
  source.start();
  byte[] largePayload=getPayload(1000).getBytes();
  DatagramSocket syslogSocket;
  DatagramPacket datagramPacket;
  datagramPacket=new DatagramPacket(largePayload,1000,InetAddress.getLocalHost(),source.getSourcePort());
  for (int i=0; i < 10; i++) {
    syslogSocket=new DatagramSocket();
    syslogSocket.send(datagramPacket);
    syslogSocket.close();
  }
  List<Event> channelEvents=new ArrayList<Event>();
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int i=0; i < 10; i++) {
    Event e=channel.take();
    Assert.assertNotNull(e);
    channelEvents.add(e);
  }
  try {
    txn.commit();
  }
 catch (  Throwable t) {
    txn.rollback();
  }
 finally {
    txn.close();
  }
  source.stop();
  for (  Event e : channelEvents) {
    Assert.assertNotNull(e);
    Assert.assertArrayEquals(largePayload,e.getBody());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestThriftSource </h4><pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendBigBatch() throws Exception {
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  context.put("capacity","3000");
  context.put("transactionCapacity","3000");
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 5; i++) {
    List<Event> events=Lists.newArrayList();
    for (int j=0; j < 500; j++) {
      Map<String,String> hdrs=Maps.newHashMap();
      hdrs.put("time",String.valueOf(System.currentTimeMillis()));
      events.add(EventBuilder.withBody(String.valueOf(i).getBytes(),hdrs));
    }
    client.appendBatch(events);
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long after=System.currentTimeMillis();
  List<Integer> events=Lists.newArrayList();
  for (int i=0; i < 2500; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertTrue(Long.valueOf(event.getHeaders().get("time")) < after);
    events.add(Integer.parseInt(new String(event.getBody())));
  }
  transaction.commit();
  transaction.close();
  Collections.sort(events);
  int index=0;
  for (int i=0; i < 5; i++) {
    for (int j=0; j < 500; j++) {
      Assert.assertEquals(i,events.get(index++).intValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendBatch() throws Exception {
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  context.put("capacity","1000");
  context.put("transactionCapacity","1000");
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 30; i++) {
    List<Event> events=Lists.newArrayList();
    for (int j=0; j < 10; j++) {
      Map<String,String> hdrs=Maps.newHashMap();
      hdrs.put("time",String.valueOf(System.currentTimeMillis()));
      events.add(EventBuilder.withBody(String.valueOf(i).getBytes(),hdrs));
    }
    client.appendBatch(events);
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long after=System.currentTimeMillis();
  List<Integer> events=Lists.newArrayList();
  for (int i=0; i < 300; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertTrue(Long.valueOf(event.getHeaders().get("time")) <= after);
    events.add(Integer.parseInt(new String(event.getBody())));
  }
  transaction.commit();
  transaction.close();
  Collections.sort(events);
  int index=0;
  for (int i=0; i < 30; i++) {
    for (int j=0; j < 10; j++) {
      Assert.assertEquals(i,events.get(index++).intValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleClients() throws Exception {
  ExecutorService submitter=Executors.newCachedThreadPool();
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  context.put("capacity","1000");
  context.put("transactionCapacity","1000");
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  ExecutorCompletionService<Void> completionService=new ExecutorCompletionService(submitter);
  for (int i=0; i < 30; i++) {
    completionService.submit(new SubmitHelper(i),null);
  }
  for (int i=0; i < 30; i++) {
    completionService.take();
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long after=System.currentTimeMillis();
  List<Integer> events=Lists.newArrayList();
  for (int i=0; i < 300; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertTrue(Long.valueOf(event.getHeaders().get("time")) < after);
    events.add(Integer.parseInt(new String(event.getBody())));
  }
  transaction.commit();
  transaction.close();
  Collections.sort(events);
  int index=0;
  for (int i=0; i < 30; i++) {
    for (int j=0; j < 10; j++) {
      Assert.assertEquals(i,events.get(index++).intValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendSSL() throws Exception {
  Properties sslprops=(Properties)props.clone();
  sslprops.put("ssl","true");
  sslprops.put("truststore","src/test/resources/truststorefile.jks");
  sslprops.put("truststore-password","password");
  sslprops.put("trustmanager-type",TrustManagerFactory.getDefaultAlgorithm());
  client=RpcClientFactory.getThriftInstance(sslprops);
  Context context=new Context();
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  context.put("ssl","true");
  context.put("keystore","src/test/resources/keystorefile.jks");
  context.put("keystore-password","password");
  context.put("keymanager-type",KeyManagerFactory.getDefaultAlgorithm());
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 30; i++) {
    client.append(EventBuilder.withBody(String.valueOf(i).getBytes()));
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 30; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertEquals(String.valueOf(i),new String(event.getBody()));
  }
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppend() throws Exception {
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 30; i++) {
    client.append(EventBuilder.withBody(String.valueOf(i).getBytes()));
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 30; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertEquals(String.valueOf(i),new String(event.getBody()));
  }
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.avroLegacy.TestLegacyAvroSource </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifecycle() throws InterruptedException {
  boolean bound=false;
  for (int i=0; i < 100 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("port",String.valueOf(selectedPort=41414 + i));
      context.put("host","0.0.0.0");
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    ChannelException e) {
    }
  }
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequest() throws InterruptedException, IOException {
  boolean bound=false;
  int i;
  for (i=0; i < 100 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("port",String.valueOf(selectedPort=41414 + i));
      context.put("host","0.0.0.0");
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    ChannelException e) {
    }
  }
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  URL url=new URL("http","0.0.0.0",selectedPort,"/");
  Transceiver http=new HttpTransceiver(url);
  FlumeOGEventAvroServer client=SpecificRequestor.getClient(FlumeOGEventAvroServer.class,http);
  AvroFlumeOGEvent avroEvent=AvroFlumeOGEvent.newBuilder().setHost("foo").setPriority(Priority.INFO).setNanos(0).setTimestamp(1).setFields(new HashMap<CharSequence,ByteBuffer>()).setBody(ByteBuffer.wrap("foo".getBytes())).build();
  client.append(avroEvent);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Channel contained our event","foo",new String(event.getBody()));
  transaction.commit();
  transaction.close();
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.http.TestHTTPSource </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws IOException, InterruptedException {
  StringEntity input=new StringEntity("[{\"headers\":{\"a\": \"b\"},\"body\": \"random_body\"}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"random_body2\"}]");
  input.setContentType("application/json");
  postRequest.setEntity(input);
  HttpResponse response=httpClient.execute(postRequest);
  Assert.assertEquals(HttpServletResponse.SC_OK,response.getStatusLine().getStatusCode());
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
  e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-8"));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-11 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHttpsSourceNonHttpsClient() throws Exception {
  Type listType=new TypeToken<List<JSONEvent>>(){
  }
.getType();
  List<JSONEvent> events=Lists.newArrayList();
  Random rand=new Random();
  for (int i=0; i < 10; i++) {
    Map<String,String> input=Maps.newHashMap();
    for (int j=0; j < 10; j++) {
      input.put(String.valueOf(i) + String.valueOf(j),String.valueOf(i));
    }
    input.put("MsgNum",String.valueOf(i));
    JSONEvent e=new JSONEvent();
    e.setHeaders(input);
    e.setBody(String.valueOf(rand.nextGaussian()).getBytes("UTF-8"));
    events.add(e);
  }
  Gson gson=new Gson();
  String json=gson.toJson(events,listType);
  HttpURLConnection httpURLConnection=null;
  try {
    URL url=new URL("http://0.0.0.0:" + sslPort);
    httpURLConnection=(HttpURLConnection)url.openConnection();
    httpURLConnection.setDoInput(true);
    httpURLConnection.setDoOutput(true);
    httpURLConnection.setRequestMethod("POST");
    httpURLConnection.getOutputStream().write(json.getBytes());
    httpURLConnection.getResponseCode();
    Assert.fail("HTTP Client cannot connect to HTTPS source");
  }
 catch (  Exception exception) {
    Assert.assertTrue("Exception expected",true);
  }
 finally {
    httpURLConnection.disconnect();
  }
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleUTF16() throws IOException, InterruptedException {
  StringEntity input=new StringEntity("[{\"headers\":{\"a\": \"b\"},\"body\": \"random_body\"}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"random_body2\"}]","UTF-16");
  input.setContentType("application/json; charset=utf-16");
  postRequest.setEntity(input);
  HttpResponse response=httpClient.execute(postRequest);
  Assert.assertEquals(HttpServletResponse.SC_OK,response.getStatusLine().getStatusCode());
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-16"));
  e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-16"));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleEvent() throws Exception {
  StringEntity input=new StringEntity("[{\"headers\" : {\"a\": \"b\"},\"body\":" + " \"random_body\"}]");
  input.setContentType("application/json");
  postRequest.setEntity(input);
  httpClient.execute(postRequest);
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.http.TestJSONHandler </h4><pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoBody() throws Exception {
  String json="[{\"headers\" : {\"a\": \"b\"}}," + "{\"headers\" : {\"e\": \"f\"},\"body\": \"random_body2\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertTrue(e.getBody().length == 0);
  e=deserialized.get(1);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-11 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=UnsupportedCharsetException.class) public void testError() throws Exception {
  String json="[{\"headers\" : {\"a\": \"b\"},\"body\": \"random_body\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json,"ISO-8859-1");
  handler.getEvents(req);
  Assert.fail();
}

</code></pre>

<br>
<pre class="type-11 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=HTTPBadRequestException.class) public void testBadEvent() throws Exception {
  String json="{[\"a\": \"b\"],\"body\": \"random_body\"}";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  handler.getEvents(req);
  Assert.fail();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEscapedJSON() throws Exception {
  String json="[{\"headers\":{\"a\": \"b\"}}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"rand\\\"om_body2\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertTrue(e.getBody().length == 0);
  e=deserialized.get(1);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("rand\"om_body2",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleLargeEvents() throws Exception {
  String json="[{\"headers\" : {\"a\": \"b\", \"a2\": \"b2\"," + "\"a3\": \"b3\",\"a4\": \"b4\"},\"body\": \"random_body\"}," + "{\"headers\" :{\"e\": \"f\",\"e2\": \"f2\","+ "\"e3\": \"f3\",\"e4\": \"f4\",\"e5\": \"f5\"},"+ "\"body\": \"random_body2\"},"+ "{\"headers\" :{\"q1\": \"b\",\"q2\": \"b2\",\"q3\": \"b3\",\"q4\": \"b4\"},"+ "\"body\": \"random_bodyq\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("b2",e.getHeaders().get("a2"));
  Assert.assertEquals("b3",e.getHeaders().get("a3"));
  Assert.assertEquals("b4",e.getHeaders().get("a4"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
  e=deserialized.get(1);
  Assert.assertNotNull(e);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("f2",e.getHeaders().get("e2"));
  Assert.assertEquals("f3",e.getHeaders().get("e3"));
  Assert.assertEquals("f4",e.getHeaders().get("e4"));
  Assert.assertEquals("f5",e.getHeaders().get("e5"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-8"));
  e=deserialized.get(2);
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("q1"));
  Assert.assertEquals("b2",e.getHeaders().get("q2"));
  Assert.assertEquals("b3",e.getHeaders().get("q3"));
  Assert.assertEquals("b4",e.getHeaders().get("q4"));
  Assert.assertEquals("random_bodyq",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.jms.TestIntegrationActiveMQ </h4><pre class="type-4 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Before public void setup() throws Exception {
  baseDir=Files.createTempDir();
  tmpDir=new File(baseDir,"tmp");
  dataDir=new File(baseDir,"data");
  Assert.assertTrue(tmpDir.mkdir());
  passwordFile=new File(baseDir,"password");
  Files.write(PASSWORD.getBytes(Charsets.UTF_8),passwordFile);
  broker=new BrokerService();
  broker.addConnector(BROKER_BIND_URL);
  broker.setTmpDataDirectory(tmpDir);
  broker.setDataDirectoryFile(dataDir);
  List<AuthenticationUser> users=Lists.newArrayList();
  users.add(new AuthenticationUser(USERNAME,PASSWORD,""));
  SimpleAuthenticationPlugin authentication=new SimpleAuthenticationPlugin(users);
  broker.setPlugins(new BrokerPlugin[]{authentication});
  broker.start();
  context=new Context();
  context.put(JMSSourceConfiguration.INITIAL_CONTEXT_FACTORY,INITIAL_CONTEXT_FACTORY);
  context.put(JMSSourceConfiguration.PROVIDER_URL,BROKER_BIND_URL);
  context.put(JMSSourceConfiguration.DESTINATION_NAME,DESTINATION_NAME);
  context.put(JMSSourceConfiguration.USERNAME,USERNAME);
  context.put(JMSSourceConfiguration.PASSWORD_FILE,passwordFile.getAbsolutePath());
  events=Lists.newArrayList();
  source=new JMSSource();
  source.setName("JMSSource-" + UUID.randomUUID());
  ChannelProcessor channelProcessor=mock(ChannelProcessor.class);
  doAnswer(new Answer<Void>(){
    @Override public Void answer(    InvocationOnMock invocation) throws Throwable {
      events.addAll((List<Event>)invocation.getArguments()[0]);
      return null;
    }
  }
).when(channelProcessor).processEventBatch(any(List.class));
  source.setChannelProcessor(channelProcessor);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.kafka.TestKafkaSource </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchTime() throws InterruptedException, EventDeliveryException {
  context.put(KafkaSourceConstants.BATCH_DURATION_MS,"250");
  kafkaSource.configure(context);
  kafkaSource.start();
  Thread.sleep(500L);
  for (int i=1; i < 5000; i++) {
    kafkaServer.produce(topicName,"","hello, world " + i);
  }
  Thread.sleep(500L);
  long startTime=System.currentTimeMillis();
  Status status=kafkaSource.process();
  long endTime=System.currentTimeMillis();
  assertEquals(Status.READY,status);
  assertTrue(endTime - startTime < (context.getLong(KafkaSourceConstants.BATCH_DURATION_MS) + context.getLong("kafka.consumer.timeout.ms")));
}

</code></pre>

<br>
<pre class="type-1 type-3 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test(expected=FlumeException.class) public void testNonExistingZk() throws EventDeliveryException, SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException, InterruptedException {
  context.put(KafkaSourceConstants.ZOOKEEPER_CONNECT_FLUME,"blabla:666");
  kafkaSource.configure(context);
  kafkaSource.start();
  Thread.sleep(500L);
  Status status=kafkaSource.process();
  assertEquals(Status.BACKOFF,status);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.scribe.TestScribeSource </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScribeMessage() throws Exception {
  TTransport transport=new TFramedTransport(new TSocket("localhost",port));
  TProtocol protocol=new TBinaryProtocol(transport);
  Scribe.Client client=new Scribe.Client(protocol);
  transport.open();
  LogEntry logEntry=new LogEntry("INFO","Sending info msg to scribe source");
  List<LogEntry> logEntries=new ArrayList<LogEntry>(1);
  logEntries.add(logEntry);
  client.Log(logEntries);
  Transaction tx=memoryChannel.getTransaction();
  tx.begin();
  Event e=memoryChannel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("Sending info msg to scribe source",new String(e.getBody()));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScribeMultipleMessages() throws Exception {
  TTransport transport=new TFramedTransport(new TSocket("localhost",port));
  TProtocol protocol=new TBinaryProtocol(transport);
  Scribe.Client client=new Scribe.Client(protocol);
  transport.open();
  List<LogEntry> logEntries=new ArrayList<LogEntry>(10);
  for (int i=0; i < 10; i++) {
    LogEntry logEntry=new LogEntry("INFO",String.format("Sending info msg# %d to scribe source",i));
    logEntries.add(logEntry);
  }
  client.Log(logEntries);
  Transaction tx=memoryChannel.getTransaction();
  tx.begin();
  for (int i=0; i < 10; i++) {
    Event e=memoryChannel.take();
    Assert.assertNotNull(e);
    Assert.assertEquals(String.format("Sending info msg# %d to scribe source",i),new String(e.getBody()));
  }
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.taildir.TestTaildirEventReader </h4><pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicCommitFailure() throws IOException {
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n" + "file1line9\nfile1line10\nfile1line11\nfile1line12\n",f1,Charsets.UTF_8);
  ReliableTaildirEventReader reader=getReader();
  List<String> out1=null;
  for (  TailFile tf : reader.getTailFiles().values()) {
    out1=bodiesAsStrings(reader.readEvents(tf,4));
  }
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  List<String> out2=bodiesAsStrings(reader.readEvents(4));
  assertTrue(out2.contains("file1line1"));
  assertTrue(out2.contains("file1line2"));
  assertTrue(out2.contains("file1line3"));
  assertTrue(out2.contains("file1line4"));
  reader.commit();
  List<String> out3=bodiesAsStrings(reader.readEvents(4));
  assertTrue(out3.contains("file1line5"));
  assertTrue(out3.contains("file1line6"));
  assertTrue(out3.contains("file1line7"));
  assertTrue(out3.contains("file1line8"));
  reader.commit();
  List<String> out4=bodiesAsStrings(reader.readEvents(4));
  assertEquals(4,out4.size());
  assertTrue(out4.contains("file1line9"));
  assertTrue(out4.contains("file1line10"));
  assertTrue(out4.contains("file1line11"));
  assertTrue(out4.contains("file1line12"));
}

</code></pre>

<br>
<pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNewLineBoundaries() throws IOException {
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1line2\rfile1line2\nfile1line3\r\nfile1line4\n",f1,Charsets.UTF_8);
  ReliableTaildirEventReader reader=getReader();
  List<String> out=Lists.newArrayList();
  for (  TailFile tf : reader.getTailFiles().values()) {
    out.addAll(bodiesAsStrings(reader.readEvents(tf,5)));
    reader.commit();
  }
  assertEquals(4,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2\rfile1line2"));
  assertTrue(out.contains("file1line3"));
  assertTrue(out.contains("file1line4"));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testByteOffsetHeader() throws IOException {
  File f1=new File(tmpDir,"file1");
  String line1="file1line1\n";
  String line2="file1line2\n";
  String line3="file1line3\n";
  Files.write(line1 + line2 + line3,f1,Charsets.UTF_8);
  ReliableTaildirEventReader reader=getReader(true);
  List<String> headers=null;
  for (  TailFile tf : reader.getTailFiles().values()) {
    headers=headersAsStrings(reader.readEvents(tf,5),BYTE_OFFSET_HEADER_KEY);
    reader.commit();
  }
  assertEquals(3,headers.size());
  assertTrue(headers.contains(String.valueOf(0)));
  assertTrue(headers.contains(String.valueOf(line1.length())));
  assertTrue(headers.contains(String.valueOf((line1 + line2).length())));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitiallyEmptyDirAndBehaviorAfterReadingAll() throws IOException {
  ReliableTaildirEventReader reader=getReader();
  List<Long> fileInodes=reader.updateTailFiles();
  assertEquals(0,fileInodes.size());
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  reader.updateTailFiles();
  List<String> out=null;
  for (  TailFile tf : reader.getTailFiles().values()) {
    out=bodiesAsStrings(reader.readEvents(tf,2));
    reader.commit();
  }
  assertEquals(2,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  reader.updateTailFiles();
  List<String> empty=null;
  for (  TailFile tf : reader.getTailFiles().values()) {
    empty=bodiesAsStrings(reader.readEvents(tf,15));
    reader.commit();
  }
  assertEquals(0,empty.size());
}

</code></pre>

<br>
<pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBackoffWithoutNewLine() throws IOException {
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1",f1,Charsets.UTF_8);
  ReliableTaildirEventReader reader=getReader();
  List<String> out=Lists.newArrayList();
  for (  TailFile tf : reader.getTailFiles().values()) {
    out.addAll(bodiesAsStrings(reader.readEvents(tf,5)));
    reader.commit();
  }
  assertEquals(1,out.size());
  assertTrue(out.contains("file1line1"));
  Files.append("line2\nfile1line3\nfile1line4",f1,Charsets.UTF_8);
  for (  TailFile tf : reader.getTailFiles().values()) {
    out.addAll(bodiesAsStrings(reader.readEvents(tf,5)));
    reader.commit();
  }
  assertEquals(3,out.size());
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file1line3"));
  out.addAll(bodiesAsStrings(reader.readEvents(5,false)));
  reader.commit();
  assertEquals(4,out.size());
  assertTrue(out.contains("file1line4"));
}

</code></pre>

<br>
<pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicReadFiles() throws IOException {
  File f1=new File(tmpDir,"file1");
  File f2=new File(tmpDir,"file2");
  File f3=new File(tmpDir,"file3");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  Files.write("file3line1\nfile3line2\n",f3,Charsets.UTF_8);
  ReliableTaildirEventReader reader=getReader();
  List<String> out=Lists.newArrayList();
  for (  TailFile tf : reader.getTailFiles().values()) {
    List<String> bodies=bodiesAsStrings(reader.readEvents(tf,2));
    out.addAll(bodies);
    reader.commit();
  }
  assertEquals(6,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file2line1"));
  assertTrue(out.contains("file2line2"));
  assertTrue(out.contains("file3line1"));
  assertTrue(out.contains("file3line2"));
  Files.append("file3line3\nfile3line4\n",f3,Charsets.UTF_8);
  reader.updateTailFiles();
  for (  TailFile tf : reader.getTailFiles().values()) {
    List<String> bodies=bodiesAsStrings(reader.readEvents(tf,2));
    out.addAll(bodies);
    reader.commit();
  }
  assertEquals(8,out.size());
  assertTrue(out.contains("file3line3"));
  assertTrue(out.contains("file3line4"));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIncludeEmptyFile() throws IOException {
  File f1=new File(tmpDir,"file1");
  File f2=new File(tmpDir,"file2");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Files.touch(f2);
  ReliableTaildirEventReader reader=getReader();
  List<String> out=Lists.newArrayList();
  for (  TailFile tf : reader.getTailFiles().values()) {
    out.addAll(bodiesAsStrings(reader.readEvents(tf,5)));
    reader.commit();
  }
  assertEquals(2,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertNull(reader.readEvent());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchedReadsAcrossFileBoundary() throws IOException {
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  ReliableTaildirEventReader reader=getReader();
  List<String> out1=Lists.newArrayList();
  for (  TailFile tf : reader.getTailFiles().values()) {
    out1.addAll(bodiesAsStrings(reader.readEvents(tf,5)));
    reader.commit();
  }
  File f2=new File(tmpDir,"file2");
  Files.write("file2line1\nfile2line2\nfile2line3\nfile2line4\n" + "file2line5\nfile2line6\nfile2line7\nfile2line8\n",f2,Charsets.UTF_8);
  List<String> out2=bodiesAsStrings(reader.readEvents(5));
  reader.commit();
  reader.updateTailFiles();
  List<String> out3=Lists.newArrayList();
  for (  TailFile tf : reader.getTailFiles().values()) {
    out3.addAll(bodiesAsStrings(reader.readEvents(tf,5)));
    reader.commit();
  }
  assertEquals(5,out1.size());
  assertTrue(out1.contains("file1line1"));
  assertTrue(out1.contains("file1line2"));
  assertTrue(out1.contains("file1line3"));
  assertTrue(out1.contains("file1line4"));
  assertTrue(out1.contains("file1line5"));
  assertEquals(3,out2.size());
  assertTrue(out2.contains("file1line6"));
  assertTrue(out2.contains("file1line7"));
  assertTrue(out2.contains("file1line8"));
  assertEquals(5,out3.size());
  assertTrue(out3.contains("file2line1"));
  assertTrue(out3.contains("file2line2"));
  assertTrue(out3.contains("file2line3"));
  assertTrue(out3.contains("file2line4"));
  assertTrue(out3.contains("file2line5"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.taildir.TestTaildirSource </h4><pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegexFileNameFiltering() throws IOException {
  File f1=new File(tmpDir,"a.log");
  File f2=new File(tmpDir,"a.log.1");
  File f3=new File(tmpDir,"b.log");
  File f4=new File(tmpDir,"c.log.yyyy-MM-01");
  File f5=new File(tmpDir,"c.log.yyyy-MM-02");
  Files.write("a.log\n",f1,Charsets.UTF_8);
  Files.write("a.log.1\n",f2,Charsets.UTF_8);
  Files.write("b.log\n",f3,Charsets.UTF_8);
  Files.write("c.log.yyyy-MM-01\n",f4,Charsets.UTF_8);
  Files.write("c.log.yyyy-MM-02\n",f5,Charsets.UTF_8);
  Context context=new Context();
  context.put(POSITION_FILE,posFilePath);
  context.put(FILE_GROUPS,"ab c");
  context.put(FILE_GROUPS_PREFIX + "ab",tmpDir.getAbsolutePath() + "/[ab].log");
  context.put(FILE_GROUPS_PREFIX + "c",tmpDir.getAbsolutePath() + "/c.log.*");
  Configurables.configure(source,context);
  source.start();
  source.process();
  Transaction txn=channel.getTransaction();
  txn.begin();
  List<String> out=Lists.newArrayList();
  for (int i=0; i < 5; i++) {
    Event e=channel.take();
    if (e != null) {
      out.add(TestTaildirEventReader.bodyAsString(e));
    }
  }
  txn.commit();
  txn.close();
  assertEquals(4,out.size());
  assertTrue(out.contains("a.log"));
  assertFalse(out.contains("a.log.1"));
  assertTrue(out.contains("b.log"));
  assertTrue(out.contains("c.log.yyyy-MM-01"));
  assertTrue(out.contains("c.log.yyyy-MM-02"));
}

</code></pre>

<br>
<pre class="type-12 type-13 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeaderMapping() throws IOException {
  File f1=new File(tmpDir,"file1");
  File f2=new File(tmpDir,"file2");
  File f3=new File(tmpDir,"file3");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  Files.write("file3line1\nfile3line2\n",f3,Charsets.UTF_8);
  Context context=new Context();
  context.put(POSITION_FILE,posFilePath);
  context.put(FILE_GROUPS,"f1 f2 f3");
  context.put(FILE_GROUPS_PREFIX + "f1",tmpDir.getAbsolutePath() + "/file1$");
  context.put(FILE_GROUPS_PREFIX + "f2",tmpDir.getAbsolutePath() + "/file2$");
  context.put(FILE_GROUPS_PREFIX + "f3",tmpDir.getAbsolutePath() + "/file3$");
  context.put(HEADERS_PREFIX + "f1.headerKeyTest","value1");
  context.put(HEADERS_PREFIX + "f2.headerKeyTest","value2");
  context.put(HEADERS_PREFIX + "f2.headerKeyTest2","value2-2");
  Configurables.configure(source,context);
  source.start();
  source.process();
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int i=0; i < 6; i++) {
    Event e=channel.take();
    String body=new String(e.getBody(),Charsets.UTF_8);
    String headerValue=e.getHeaders().get("headerKeyTest");
    String headerValue2=e.getHeaders().get("headerKeyTest2");
    if (body.startsWith("file1")) {
      assertEquals("value1",headerValue);
      assertNull(headerValue2);
    }
 else     if (body.startsWith("file2")) {
      assertEquals("value2",headerValue);
      assertEquals("value2-2",headerValue2);
    }
 else     if (body.startsWith("file3")) {
      assertNull(headerValue);
      assertNull(headerValue2);
    }
  }
  txn.commit();
  txn.close();
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifecycle() throws IOException, InterruptedException {
  File f1=new File(tmpDir,"file1");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Context context=new Context();
  context.put(POSITION_FILE,posFilePath);
  context.put(FILE_GROUPS,"f1");
  context.put(FILE_GROUPS_PREFIX + "f1",tmpDir.getAbsolutePath() + "/file1$");
  Configurables.configure(source,context);
  for (int i=0; i < 3; i++) {
    source.start();
    source.process();
    assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
    assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
    source.stop();
    assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
    assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.thriftLegacy.TestThriftLegacySource </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeaders() throws InterruptedException, IOException {
  bind();
  Map flumeHeaders=new HashMap<CharSequence,ByteBuffer>();
  flumeHeaders.put("hello",ByteBuffer.wrap("world".getBytes("UTF-8")));
  ThriftFlumeEvent thriftEvent=new ThriftFlumeEvent(1,Priority.INFO,ByteBuffer.wrap("foo".getBytes()),0,"fooHost",flumeHeaders);
  FlumeClient fClient=new FlumeClient("0.0.0.0",selectedPort);
  fClient.append(thriftEvent);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Event in channel has our header","world",event.getHeaders().get("hello"));
  transaction.commit();
  transaction.close();
  stop();
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequest() throws InterruptedException, IOException {
  bind();
  Map flumeMap=new HashMap<CharSequence,ByteBuffer>();
  ThriftFlumeEvent thriftEvent=new ThriftFlumeEvent(1,Priority.INFO,ByteBuffer.wrap("foo".getBytes()),0,"fooHost",flumeMap);
  FlumeClient fClient=new FlumeClient("0.0.0.0",selectedPort);
  fClient.append(thriftEvent);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Channel contained our event","foo",new String(event.getBody()));
  transaction.commit();
  transaction.close();
  stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.test.agent.TestSpooldirSource </h4><pre class="type-12 type-9 type-4 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  File agentDir=StagedInstall.getInstance().getStageDir();
  LOGGER.debug("Using agent stage dir: {}",agentDir);
  File testDir=new File(agentDir,TestSpooldirSource.class.getName());
  assertTrue(testDir.mkdirs());
  File spoolParentDir=new File(testDir,"spools");
  assertTrue("Unable to create sink output dir: " + spoolParentDir.getPath(),spoolParentDir.mkdir());
  final int NUM_SOURCES=100;
  agentProps=new Properties();
  List<String> spooldirSrcNames=Lists.newArrayList();
  String channelName="mem-01";
  for (int i=0; i < NUM_SOURCES; i++) {
    String srcName=String.format("spooldir-%03d",i);
    File spoolDir=new File(spoolParentDir,srcName);
    assertTrue(spoolDir.mkdir());
    spooldirSrcNames.add(srcName);
    spoolDirs.add(spoolDir);
    agentProps.put(String.format("agent.sources.%s.type",srcName),"SPOOLDIR");
    agentProps.put(String.format("agent.sources.%s.spoolDir",srcName),spoolDir.getPath());
    agentProps.put(String.format("agent.sources.%s.channels",srcName),channelName);
  }
  agentProps.put("agent.channels.mem-01.type","MEMORY");
  agentProps.put("agent.channels.mem-01.capacity",String.valueOf(100000));
  sinkOutputDir=new File(testDir,"out");
  assertTrue("Unable to create sink output dir: " + sinkOutputDir.getPath(),sinkOutputDir.mkdir());
  agentProps.put("agent.sinks.roll-01.channel",channelName);
  agentProps.put("agent.sinks.roll-01.type","FILE_ROLL");
  agentProps.put("agent.sinks.roll-01.sink.directory",sinkOutputDir.getPath());
  agentProps.put("agent.sinks.roll-01.sink.rollInterval","0");
  agentProps.put("agent.sources",Joiner.on(" ").join(spooldirSrcNames));
  agentProps.put("agent.channels",channelName);
  agentProps.put("agent.sinks","roll-01");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.tools.TestFileChannelIntegrityTool </h4><pre class="type-4 type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws Exception {
  checkpointDir=new File(baseDir,"checkpoint");
  dataDir=new File(baseDir,"dataDir");
  Assert.assertTrue(checkpointDir.mkdirs() || checkpointDir.isDirectory());
  Assert.assertTrue(dataDir.mkdirs() || dataDir.isDirectory());
  File[] dataFiles=origDataDir.listFiles(new FilenameFilter(){
    @Override public boolean accept(    File dir,    String name){
      if (name.contains("lock")) {
        return false;
      }
      return true;
    }
  }
);
  for (  File dataFile : dataFiles) {
    Serialization.copyFile(dataFile,new File(dataDir,dataFile.getName()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.tools.TestVersionInfo </h4><pre class="type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Make sure that Unknown is expected when no version info
 */
@Test public void testVersionInfoUnknown(){
  logger.debug("Flume " + VersionInfo.getVersion());
  logger.debug("Subversion " + VersionInfo.getUrl() + " -r "+ VersionInfo.getRevision());
  logger.debug("Compiled by " + VersionInfo.getUser() + " on "+ VersionInfo.getDate());
  logger.debug("From source with checksum " + VersionInfo.getSrcChecksum());
  logger.debug("Flume " + VersionInfo.getBuildVersion());
  assertTrue("getVersion returned Unknown",!VersionInfo.getVersion().equals("Unknown"));
  assertTrue("getUser returned Unknown",!VersionInfo.getUser().equals("Unknown"));
  assertTrue("getUrl returned Unknown",!VersionInfo.getUrl().equals("Unknown"));
  assertTrue("getSrcChecksum returned Unknown",!VersionInfo.getSrcChecksum().equals("Unknown"));
  assertTrue("getBuildVersion returned unexpected format",VersionInfo.getBuildVersion().matches(".+from.+by.+on.+source checksum.+"));
  assertNotNull("getRevision returned null",VersionInfo.getRevision());
  assertNotNull("getBranch returned null",VersionInfo.getBranch());
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
