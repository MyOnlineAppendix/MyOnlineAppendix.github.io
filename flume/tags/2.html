<h3><span class=" glyphicon glyphicon-tag"/>&nbspNullVerifier</h3><kbd>Verifies whether objects are null</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.flume.TestContext </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testClear(){
  context.put("test","1");
  context.clear();
  assertNull(context.getInteger("test"));
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutGet(){
  assertEquals("Context is empty",0,context.getParameters().size());
  context.put("test","value");
  assertEquals("value",context.getString("test"));
  context.clear();
  assertNull(context.getString("test"));
  assertEquals("value",context.getString("test","value"));
  context.put("test","true");
  assertEquals(new Boolean(true),context.getBoolean("test"));
  context.clear();
  assertNull(context.getBoolean("test"));
  assertEquals(new Boolean(true),context.getBoolean("test",true));
  context.put("test","1");
  assertEquals(new Integer(1),context.getInteger("test"));
  context.clear();
  assertNull(context.getInteger("test"));
  assertEquals(new Integer(1),context.getInteger("test",1));
  context.put("test",String.valueOf(Long.MAX_VALUE));
  assertEquals(new Long(Long.MAX_VALUE),context.getLong("test"));
  context.clear();
  assertNull(context.getLong("test"));
  assertEquals(new Long(Long.MAX_VALUE),context.getLong("test",Long.MAX_VALUE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.TestCounterGroup </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCounter(){
  AtomicLong counter=counterGroup.getCounter("test");
  Assert.assertNotNull(counter);
  Assert.assertEquals(0,counter.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.agent.embedded.TestEmbeddedAgent </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testPutWithInterceptors() throws Exception {
  properties.put("source.interceptors","i1");
  properties.put("source.interceptors.i1.type","static");
  properties.put("source.interceptors.i1.key","key2");
  properties.put("source.interceptors.i1.value","value2");
  agent.configure(properties);
  agent.start();
  agent.put(EventBuilder.withBody(body,headers));
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Map<String,String> newHeaders=new HashMap<String,String>(headers);
  newHeaders.put("key2","value2");
  Assert.assertEquals(newHeaders,event.getHeaders());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testPut() throws Exception {
  agent.configure(properties);
  agent.start();
  agent.put(EventBuilder.withBody(body,headers));
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Assert.assertEquals(headers,event.getHeaders());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testEmbeddedAgentName() throws Exception {
  EmbeddedAgent embedAgent=new EmbeddedAgent("test 1 2" + serialNumber.incrementAndGet());
  List<Event> events=Lists.newArrayList();
  events.add(EventBuilder.withBody(body,headers));
  embedAgent.configure(properties);
  embedAgent.start();
  embedAgent.putAll(events);
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Assert.assertEquals(headers,event.getHeaders());
  if (embedAgent != null) {
    try {
      embedAgent.stop();
    }
 catch (    Exception e) {
      LOGGER.debug("Error shutting down agent",e);
    }
  }
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000L) public void testPutAll() throws Exception {
  List<Event> events=Lists.newArrayList();
  events.add(EventBuilder.withBody(body,headers));
  agent.configure(properties);
  agent.start();
  agent.putAll(events);
  Event event;
  while ((event=eventCollector.poll()) == null) {
    Thread.sleep(500L);
  }
  Assert.assertNotNull(event);
  Assert.assertArrayEquals(body,event.getBody());
  Assert.assertEquals(headers,event.getHeaders());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.agent.embedded.TestEmbeddedAgentConfiguration </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testMissingSourceType() throws Exception {
  Assert.assertNotNull(properties.remove("source.type"));
  doTestExcepted(EmbeddedAgentConfiguration.configure("test1",properties));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestBasicChannelSemantics </h4><pre class="type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTake1() throws Exception {
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  Transaction transaction=channel.getTransaction();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  transaction.begin();
  Assert.assertNull(channel.take());
  for (int i=0; i < 1000; ++i) {
    channel.put(events.get(i % events.size()));
  }
  Assert.assertNotNull(channel.take());
  testWrongThread(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  testBasicExceptions(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  testMode(TestChannel.Mode.SLEEP,new Runnable(){
    @Override public void run(){
      interruptTest(new Runnable(){
        @Override public void run(){
          Assert.assertNull(channel.take());
          Assert.assertTrue(Thread.interrupted());
        }
      }
);
    }
  }
);
  Assert.assertNotNull(channel.take());
  transaction.commit();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
  transaction.close();
  testIllegalState(new Runnable(){
    @Override public void run(){
      channel.take();
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestChannelProcessor </h4><pre class="type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure that we see the original NPE from the PreConditions check instead
 * of an auto-generated NPE, which could be masking something else.
 */
@Test public void testNullFromGetTransaction(){
  Channel ch=mock(Channel.class);
  when(ch.getTransaction()).thenReturn(null);
  ChannelSelector sel=new ReplicatingChannelSelector();
  sel.setChannels(Lists.newArrayList(ch));
  ChannelProcessor proc=new ChannelProcessor(sel);
  List<Event> events=Lists.newArrayList();
  events.add(EventBuilder.withBody("event 1",Charsets.UTF_8));
  boolean threw=false;
  try {
    proc.processEventBatch(events);
  }
 catch (  NullPointerException ex) {
    threw=true;
    Assert.assertNotNull("NPE must be manually thrown",ex.getMessage());
  }
  Assert.assertTrue("Must throw NPE",threw);
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiredAndOptionalChannels(){
  Context context=new Context();
  ArrayList<Channel> channels=new ArrayList<Channel>();
  for (int i=0; i < 4; i++) {
    Channel ch=new MemoryChannel();
    ch.setName("ch" + i);
    Configurables.configure(ch,context);
    channels.add(ch);
  }
  ChannelSelector selector=new ReplicatingChannelSelector();
  selector.setChannels(channels);
  context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch2 ch3");
  Configurables.configure(selector,context);
  ChannelProcessor processor=new ChannelProcessor(selector);
  context=new Context();
  Configurables.configure(processor,context);
  Event event1=EventBuilder.withBody("event 1",Charsets.UTF_8);
  processor.processEvent(event1);
  try {
    Thread.sleep(3000);
  }
 catch (  InterruptedException e) {
  }
  for (  Channel channel : channels) {
    Transaction transaction=channel.getTransaction();
    transaction.begin();
    Event event_ch=channel.take();
    Assert.assertEquals(event1,event_ch);
    transaction.commit();
    transaction.close();
  }
  List<Event> events=Lists.newArrayList();
  for (int i=0; i < 100; i++) {
    events.add(EventBuilder.withBody("event " + i,Charsets.UTF_8));
  }
  processor.processEventBatch(events);
  try {
    Thread.sleep(3000);
  }
 catch (  InterruptedException e) {
  }
  for (  Channel channel : channels) {
    Transaction transaction=channel.getTransaction();
    transaction.begin();
    for (int i=0; i < 100; i++) {
      Event event_ch=channel.take();
      Assert.assertNotNull(event_ch);
    }
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMemoryChannel </h4><pre class="type-12 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChannelResize(){
  Context context=new Context();
  Map<String,String> parms=new HashMap<String,String>();
  parms.put("capacity","5");
  parms.put("transactionCapacity","5");
  context.putAll(parms);
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 5; i++) {
    channel.put(EventBuilder.withBody(String.format("test event %d",i).getBytes()));
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  boolean overflowed=false;
  try {
    transaction.begin();
    channel.put(EventBuilder.withBody("overflow event".getBytes()));
    transaction.commit();
  }
 catch (  ChannelException e) {
    overflowed=true;
    transaction.rollback();
  }
 finally {
    transaction.close();
  }
  Assert.assertTrue(overflowed);
  parms.put("capacity","6");
  context.putAll(parms);
  Configurables.configure(channel,context);
  transaction=channel.getTransaction();
  transaction.begin();
  channel.put(EventBuilder.withBody("extended capacity event".getBytes()));
  transaction.commit();
  transaction.close();
  parms.put("capacity","2");
  parms.put("transactionCapacity","2");
  context.putAll(parms);
  Configurables.configure(channel,context);
  for (int i=0; i < 6; i++) {
    transaction=channel.getTransaction();
    transaction.begin();
    Assert.assertNotNull(channel.take());
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutTake() throws InterruptedException, EventDeliveryException {
  Event event=EventBuilder.withBody("test event".getBytes());
  Context context=new Context();
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  channel.put(event);
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  Event event2=channel.take();
  Assert.assertEquals(event,event2);
  transaction.commit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMemoryChannelConcurrency </h4><pre class="type-13 type-11 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransactionConcurrency() throws InterruptedException {
  final Channel channel=new MemoryChannel();
  barrier=new CyclicBarrier(2);
  Configurables.configure(channel,new Context());
  Thread t1=new Thread(new Runnable(){
    @Override public void run(){
      Transaction tx=channel.getTransaction();
      tx.begin();
      channel.put(EventBuilder.withBody("first event".getBytes()));
      try {
        barrier.await();
        barrier.await();
        tx.rollback();
        barrier.await();
        tx.close();
        barrier.await();
      }
 catch (      InterruptedException e) {
        Assert.fail();
      }
catch (      BrokenBarrierException e) {
        Assert.fail();
      }
    }
  }
);
  Thread t2=new Thread(new Runnable(){
    @Override public void run(){
      Transaction tx=channel.getTransaction();
      try {
        barrier.await();
        tx.begin();
        channel.put(EventBuilder.withBody("second event".getBytes()));
        barrier.await();
        barrier.await();
        tx.commit();
        tx.close();
        barrier.await();
      }
 catch (      InterruptedException e) {
        Assert.fail();
      }
catch (      BrokenBarrierException e) {
        Assert.fail();
      }
    }
  }
);
  t1.start();
  t2.start();
  t1.join(1000);
  if (t1.isAlive()) {
    Assert.fail("Thread1 failed to finish");
    t1.interrupt();
  }
  t2.join(1000);
  if (t2.isAlive()) {
    Assert.fail("Thread2 failed to finish");
    t2.interrupt();
  }
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertEquals("second event",new String(e.getBody()));
  Assert.assertNull(channel.take());
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestMemoryChannelTransaction </h4><pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRollBack() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("BasicChannelSemantics doesn't support re-entrant transactions") @Test public void testReEntTxn() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    transaction.begin();
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
    transaction.commit();
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("BasicChannelSemantics doesn't support re-entrant transactions") @Test public void testReEntTxnRollBack() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (int i=0; i < 10; i++) {
    transaction.begin();
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
    transaction.commit();
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
  transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.rollback();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommit() throws InterruptedException, EventDeliveryException {
  Event event, event2;
  Context context=new Context();
  int putCounter=0;
  context.put("keep-alive","1");
  context.put("capacity","100");
  context.put("transactionCapacity","50");
  Configurables.configure(channel,context);
  Transaction transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction.begin();
  for (putCounter=0; putCounter < 10; putCounter++) {
    event=EventBuilder.withBody(("test event" + putCounter).getBytes());
    channel.put(event);
  }
  transaction.commit();
  transaction.close();
  transaction=channel.getTransaction();
  Assert.assertNotNull(transaction);
  transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 10; i++) {
    event2=channel.take();
    Assert.assertNotNull("lost an event",event2);
    Assert.assertArrayEquals(event2.getBody(),("test event" + i).getBytes());
  }
  event2=channel.take();
  Assert.assertNull("extra event found",event2);
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestReplicatingChannelSelector </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOptionalChannels() throws Exception {
  Context context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch1");
  Configurables.configure(selector,context);
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(3,channels.size());
  Assert.assertEquals("ch2",channels.get(0).getName());
  Assert.assertEquals("ch3",channels.get(1).getName());
  Assert.assertEquals("ch4",channels.get(2).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(1,optCh.size());
  Assert.assertEquals("ch1",optCh.get(0).getName());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleOptionalChannelsSameChannelTwice() throws Exception {
  Context context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch1 ch4 ch1");
  Configurables.configure(selector,context);
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(2,channels.size());
  Assert.assertEquals("ch2",channels.get(0).getName());
  Assert.assertEquals("ch3",channels.get(1).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(2,optCh.size());
  Assert.assertEquals("ch1",optCh.get(0).getName());
  Assert.assertEquals("ch4",optCh.get(1).getName());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReplicatingSelector() throws Exception {
  selector.configure(new Context());
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(4,channels.size());
  Assert.assertEquals("ch1",channels.get(0).getName());
  Assert.assertEquals("ch2",channels.get(1).getName());
  Assert.assertEquals("ch3",channels.get(2).getName());
  Assert.assertEquals("ch4",channels.get(3).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(0,optCh.size());
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleOptionalChannels() throws Exception {
  Context context=new Context();
  context.put(ReplicatingChannelSelector.CONFIG_OPTIONAL,"ch1 ch4");
  Configurables.configure(selector,context);
  List<Channel> channels=selector.getRequiredChannels(new MockEvent());
  Assert.assertNotNull(channels);
  Assert.assertEquals(2,channels.size());
  Assert.assertEquals("ch2",channels.get(0).getName());
  Assert.assertEquals("ch3",channels.get(1).getName());
  List<Channel> optCh=selector.getOptionalChannels(new MockEvent());
  Assert.assertEquals(2,optCh.size());
  Assert.assertEquals("ch1",optCh.get(0).getName());
  Assert.assertEquals("ch4",optCh.get(1).getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.TestSpillableMemoryChannel </h4><pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCapacityDisableOverflow(){
  Map<String,String> params=new HashMap<String,String>();
  params.put("memoryCapacity","2");
  params.put("overflowCapacity","0");
  params.put("overflowTimeout","0");
  startChannel(params);
  transactionalPutN(0,2,channel);
  boolean threw=false;
  try {
    transactionalPutN(2,1,channel);
  }
 catch (  ChannelException e) {
    threw=true;
  }
  Assert.assertTrue("Expecting ChannelFullException to be thrown",threw);
  transactionalTakeN(0,2,channel);
  Transaction tx=channel.getTransaction();
  tx.begin();
  Assert.assertNull(channel.take());
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestEventQueueBackingStoreFactory </h4><pre class="type-9 type-10 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadCheckpointException.class) public void testCheckpointVersionNotEqualToMeta2() throws Exception {
  FileOutputStream os=null;
  try {
    EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
    backingStore.close();
    Assert.assertTrue(checkpoint.exists());
    Assert.assertTrue(Serialization.getMetaDataFile(checkpoint).length() != 0);
    FileInputStream is=new FileInputStream(Serialization.getMetaDataFile(checkpoint));
    ProtosFactory.Checkpoint meta=ProtosFactory.Checkpoint.parseDelimitedFrom(is);
    Assert.assertNotNull(meta);
    is.close();
    os=new FileOutputStream(Serialization.getMetaDataFile(checkpoint));
    meta.toBuilder().setVersion(2).build().writeDelimitedTo(os);
    os.flush();
    backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  }
  finally {
    os.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadCheckpointException.class) public void testCheckpointOrderIdNotEqualToMeta2() throws Exception {
  FileOutputStream os=null;
  try {
    EventQueueBackingStore backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
    backingStore.close();
    Assert.assertTrue(checkpoint.exists());
    Assert.assertTrue(Serialization.getMetaDataFile(checkpoint).length() != 0);
    FileInputStream is=new FileInputStream(Serialization.getMetaDataFile(checkpoint));
    ProtosFactory.Checkpoint meta=ProtosFactory.Checkpoint.parseDelimitedFrom(is);
    Assert.assertNotNull(meta);
    is.close();
    os=new FileOutputStream(Serialization.getMetaDataFile(checkpoint));
    meta.toBuilder().setWriteOrderID(1).build().writeDelimitedTo(os);
    os.flush();
    backingStore=EventQueueBackingStoreFactory.get(checkpoint,10,"test");
  }
  finally {
    os.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestEventUtils </h4><pre class="type-9 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutEvent(){
  FlumeEvent event=new FlumeEvent(null,new byte[5]);
  Put put=new Put(1l,1l,event);
  Event returnEvent=EventUtils.getEventFromTransactionEvent(put);
  Assert.assertNotNull(returnEvent);
  Assert.assertEquals(5,returnEvent.getBody().length);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testInvalidEvent(){
  Take take=new Take(1l,1l);
  Event returnEvent=EventUtils.getEventFromTransactionEvent(take);
  Assert.assertNull(returnEvent);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFileChannel </h4><pre class="type-10 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCapacity() throws Exception {
  Map<String,String> overrides=Maps.newHashMap();
  overrides.put(FileChannelConfiguration.CAPACITY,String.valueOf(5));
  overrides.put(FileChannelConfiguration.TRANSACTION_CAPACITY,String.valueOf(5));
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  fillChannel(channel,"fillup");
  Transaction transaction;
  transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  transaction.rollback();
  transaction.close();
  Assert.assertEquals(0,fillChannel(channel,"capacity").size());
  Assert.assertEquals(5,takeEvents(channel,1,5).size());
}

</code></pre>

<br>
<pre class="type-9 type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test is here to make sure we can replay a full queue
 * when we have a PUT with a lower txid than the take which
 * made that PUT possible. Here we fill up the queue so
 * puts will block. Start the put (which assigns a txid)
 * and while it's blocking initiate a take. That will
 * allow the PUT to take place but at a lower txid
 * than the take and additionally with pre-FLUME-1432 with
 * the same timestamp. After FLUME-1432 the PUT will have a
 * lower txid but a higher write order id and we can see
 * which event occurred first.
 */
@Test public void testRaceFoundInFLUME1432() throws Exception {
  Map<String,String> overrides=Maps.newHashMap();
  overrides.put(FileChannelConfiguration.KEEP_ALIVE,String.valueOf(10L));
  overrides.put(FileChannelConfiguration.CAPACITY,String.valueOf(10));
  overrides.put(FileChannelConfiguration.TRANSACTION_CAPACITY,String.valueOf(10));
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
  fillChannel(channel,"fillup");
  Future<String> put=Executors.newSingleThreadExecutor().submit(new Callable<String>(){
    @Override public String call() throws Exception {
      Set<String> result=putEvents(channel,"blocked-put",1,1);
      Assert.assertTrue(result.toString(),result.size() == 1);
      Iterator<String> iter=result.iterator();
      return iter.next();
    }
  }
);
  Thread.sleep(1000L);
  Set<String> result=takeEvents(channel,1,1);
  Assert.assertTrue(result.toString(),result.size() == 1);
  String putmsg=put.get();
  Assert.assertNotNull(putmsg);
  String takemsg=result.iterator().next();
  Assert.assertNotNull(takemsg);
  LOG.info("Got: put " + putmsg + ", take "+ takemsg);
  channel.stop();
  channel=createFileChannel(overrides);
  channel.start();
  Assert.assertTrue(channel.isOpen());
}

</code></pre>

<br>
<pre class="type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitAfterNoPutTake() throws Exception {
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Transaction transaction;
  transaction=channel.getTransaction();
  transaction.begin();
  transaction.commit();
  transaction.close();
  channel.stop();
  channel=createFileChannel();
  channel.start();
  Assert.assertTrue(channel.isOpen());
  transaction=channel.getTransaction();
  transaction.begin();
  Assert.assertNull(channel.take());
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFileChannelRollback </h4><pre class="type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRollbackAfterNoPutTake() throws Exception {
  channel.start();
  Assert.assertTrue(channel.isOpen());
  Transaction transaction;
  transaction=channel.getTransaction();
  transaction.begin();
  transaction.rollback();
  transaction.close();
  channel.stop();
  channel=createFileChannel();
  channel.start();
  Assert.assertTrue(channel.isOpen());
  transaction=channel.getTransaction();
  transaction.begin();
  Assert.assertNull(channel.take());
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFlumeEvent </h4><pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSerialization() throws IOException {
  Map<String,String> headers=Maps.newHashMap();
  headers.put("key","value");
  byte[] body="flume".getBytes(Charsets.UTF_8);
  FlumeEvent in=new FlumeEvent(headers,body);
  FlumeEvent out=FlumeEvent.from(TestUtils.toDataInput(in));
  Assert.assertEquals(headers,out.getHeaders());
  Assert.assertTrue(Arrays.equals(body,out.getBody()));
  in.setHeaders(null);
  in.setBody(null);
  out=FlumeEvent.from(TestUtils.toDataInput(in));
  Assert.assertEquals(Maps.newHashMap(),out.getHeaders());
  Assert.assertNull(out.getBody());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestFlumeEventQueue </h4><pre class="type-12 type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testWrappingCorrectly() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  int size=Integer.MAX_VALUE;
  for (int i=1; i <= size; i++) {
    if (!queue.addHead(new FlumeEventPointer(i,i))) {
      break;
    }
  }
  for (int i=queue.getSize() / 2; i > 0; i--) {
    Assert.assertNotNull(queue.removeHead(0));
  }
  for (int i=1; i <= size; i++) {
    if (!queue.addHead(new FlumeEventPointer(i,i))) {
      break;
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addHeadRemove1() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  queue.addHead(pointer1);
  Assert.assertTrue(queue.remove(pointer1));
  Assert.assertNull(queue.removeHead(0));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTailRemove1() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertTrue(queue.addTail(pointer1));
  Assert.assertEquals(Sets.newHashSet(1),queue.getFileIDs());
  Assert.assertTrue(queue.remove(pointer1));
  queue.replayComplete();
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
  Assert.assertNull(queue.removeHead(0));
  Assert.assertEquals(Sets.newHashSet(),queue.getFileIDs());
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testQueueIsEmptyAfterCreation() throws Exception {
  queue=new FlumeEventQueue(backingStore,backingStoreSupplier.getInflightTakes(),backingStoreSupplier.getInflightPuts(),backingStoreSupplier.getQueueSetDir());
  Assert.assertNull(queue.removeHead(0L));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestLog </h4><pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoll() throws IOException, InterruptedException, NoopRecordException, CorruptEventException {
  log.shutdownWorker();
  Thread.sleep(1000);
  for (int i=0; i < 1000; i++) {
    FlumeEvent eventIn=TestUtils.newPersistableEvent();
    long transactionID=++this.transactionID;
    FlumeEventPointer eventPointer=log.put(transactionID,eventIn);
    FlumeEvent eventOut=log.get(eventPointer);
    Assert.assertNotNull(eventOut);
    Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
    Assert.assertArrayEquals(eventIn.getBody(),eventOut.getBody());
  }
  int logCount=0;
  for (  File dataDir : dataDirs) {
    for (    File logFile : dataDir.listFiles()) {
      if (logFile.getName().startsWith("log-")) {
        logCount++;
      }
    }
  }
  Assert.assertEquals(186,logCount);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testCommitNoTake() throws IOException, InterruptedException {
  long putTransactionID=++transactionID;
  log.commitTake(putTransactionID);
  log.close();
  new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(1).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  log.replay();
  FlumeEventQueue queue=log.getFlumeEventQueue();
  FlumeEventPointer eventPointerOut=queue.removeHead(0);
  Assert.assertNull(eventPointerOut);
}

</code></pre>

<br>
<pre class="type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * After replay of the log, we should not find the event because the
 * put was rolled back
 */
@Test public void testPutRollback() throws IOException, InterruptedException {
  FlumeEvent eventIn=TestUtils.newPersistableEvent();
  long transactionID=++this.transactionID;
  log.put(transactionID,eventIn);
  log.rollback(transactionID);
  log.close();
  log=new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(CAPACITY).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  log.replay();
  FlumeEventQueue queue=log.getFlumeEventQueue();
  Assert.assertNull(queue.removeHead(transactionID));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testCommitNoPut() throws IOException, InterruptedException {
  long putTransactionID=++transactionID;
  log.commitPut(putTransactionID);
  log.close();
  new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(1).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  log.replay();
  FlumeEventQueue queue=log.getFlumeEventQueue();
  FlumeEventPointer eventPointerOut=queue.removeHead(0);
  Assert.assertNull(eventPointerOut);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRollbackNoPutTake() throws IOException, InterruptedException {
  long putTransactionID=++transactionID;
  log.rollback(putTransactionID);
  log.close();
  new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(1).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  log.replay();
  FlumeEventQueue queue=log.getFlumeEventQueue();
  FlumeEventPointer eventPointerOut=queue.removeHead(0);
  Assert.assertNull(eventPointerOut);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * After replay of the log, we should not find the event because the take
 * was committed
 */
@Test public void testPutTakeCommit() throws IOException, InterruptedException {
  FlumeEvent eventIn=TestUtils.newPersistableEvent();
  long putTransactionID=++transactionID;
  FlumeEventPointer eventPointer=log.put(putTransactionID,eventIn);
  log.commitPut(putTransactionID);
  long takeTransactionID=++transactionID;
  log.take(takeTransactionID,eventPointer);
  log.commitTake(takeTransactionID);
  log.close();
  new Log.Builder().setCheckpointInterval(Long.MAX_VALUE).setMaxFileSize(FileChannelConfiguration.DEFAULT_MAX_FILE_SIZE).setQueueSize(1).setCheckpointDir(checkpointDir).setLogDirs(dataDirs).setChannelName("testlog").build();
  log.replay();
  FlumeEventQueue queue=log.getFlumeEventQueue();
  Assert.assertNull(queue.removeHead(0));
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that we can put, commit and then get. Note that get is
 * not transactional so the commit is not required.
 */
@Test public void testPutGet() throws IOException, InterruptedException, NoopRecordException, CorruptEventException {
  FlumeEvent eventIn=TestUtils.newPersistableEvent();
  long transactionID=++this.transactionID;
  FlumeEventPointer eventPointer=log.put(transactionID,eventIn);
  log.commitPut(transactionID);
  FlumeEvent eventOut=log.get(eventPointer);
  Assert.assertNotNull(eventOut);
  Assert.assertEquals(eventIn.getHeaders(),eventOut.getHeaders());
  Assert.assertArrayEquals(eventIn.getBody(),eventOut.getBody());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.file.TestTransactionEventRecordV3 </h4><pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutSerializationNullHeader() throws IOException, CorruptEventException {
  Put in=new Put(System.currentTimeMillis(),WriteOrderOracle.next(),new FlumeEvent(null,new byte[0]));
  Put out=(Put)TransactionEventRecord.fromByteArray(toByteArray(in));
  Assert.assertEquals(in.getClass(),out.getClass());
  Assert.assertEquals(in.getRecordType(),out.getRecordType());
  Assert.assertEquals(in.getTransactionID(),out.getTransactionID());
  Assert.assertEquals(in.getLogWriteOrderID(),out.getLogWriteOrderID());
  Assert.assertNull(in.getEvent().getHeaders());
  Assert.assertNotNull(out.getEvent().getHeaders());
  Assert.assertTrue(Arrays.equals(in.getEvent().getBody(),out.getEvent().getBody()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.channel.jdbc.BaseJdbcChannelProviderTest </h4><pre class="type-12 type-9 type-13 type-11 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDerbyChannelCapacity(){
  provider=new JdbcChannelProviderImpl();
  derbyCtx.put(ConfigurationConstants.CONFIG_MAX_CAPACITY,"10");
  provider.initialize(derbyCtx);
  Set<MockEvent> events=new HashSet<MockEvent>();
  for (int i=1; i < 12; i++) {
    events.add(MockEventUtils.generateMockEvent(i,i,i,61 % i,1));
  }
  Iterator<MockEvent> meIt=events.iterator();
  int count=0;
  while (meIt.hasNext()) {
    count++;
    MockEvent me=meIt.next();
    String chName=me.getChannel();
    try {
      provider.persistEvent(chName,me);
      if (count == 11) {
        Assert.fail();
      }
    }
 catch (    JdbcChannelException ex) {
      Assert.assertEquals(11,count);
    }
    Event e=provider.removeEvent(chName);
    Assert.assertNotNull(e);
    provider.persistEvent(chName,me);
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * creates 80 events split over 5 channels, stores them
 */
@Test public void testPeristingEvents(){
  provider=new JdbcChannelProviderImpl();
  provider.initialize(derbyCtx);
  Map<String,List<MockEvent>> eventMap=new HashMap<String,List<MockEvent>>();
  Set<MockEvent> events=new HashSet<MockEvent>();
  for (int i=1; i < 81; i++) {
    events.add(MockEventUtils.generateMockEvent(i,i,i,61 % i,5));
  }
  Iterator<MockEvent> meIt=events.iterator();
  while (meIt.hasNext()) {
    MockEvent me=meIt.next();
    String chName=me.getChannel();
    List<MockEvent> eventList=eventMap.get(chName);
    if (eventList == null) {
      eventList=new ArrayList<MockEvent>();
      eventMap.put(chName,eventList);
    }
    eventList.add(me);
    provider.persistEvent(me.getChannel(),me);
  }
  for (  String chName : eventMap.keySet()) {
    List<MockEvent> meList=eventMap.get(chName);
    Iterator<MockEvent> it=meList.iterator();
    while (it.hasNext()) {
      MockEvent me=it.next();
      Event event=provider.removeEvent(chName);
      assertEquals(me,event);
    }
    Event nullEvent=provider.removeEvent(chName);
    Assert.assertNull(nullEvent);
  }
  provider.close();
  provider=null;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.client.avro.TestReliableSpoolingFileEventReader </h4><pre class="type-12 type-9 type-13 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepeatedCallsWithCommitOnSuccess() throws IOException {
  String trackerDirPath=SpoolDirectorySourceConfigurationConstants.DEFAULT_TRACKER_DIR;
  File trackerDir=new File(WORK_DIR,trackerDirPath);
  ReliableEventReader reader=new ReliableSpoolingFileEventReader.Builder().spoolDirectory(WORK_DIR).trackerDirPath(trackerDirPath).build();
  final int expectedLines=0 + 1 + 2+ 3+ 1;
  int seenLines=0;
  for (int i=0; i < 10; i++) {
    List<Event> events=reader.readEvents(10);
    int numEvents=events.size();
    if (numEvents > 0) {
      seenLines+=numEvents;
      reader.commit();
      File[] files=trackerDir.listFiles();
      Assert.assertNotNull(files);
      Assert.assertTrue("Expected tracker files in tracker dir " + trackerDir.getAbsolutePath(),files.length > 0);
    }
  }
  Assert.assertEquals(expectedLines,seenLines);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.client.avro.TestSpoolingFileLineReader </h4><pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBehaviorWithEmptyFile() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file0");
  Files.touch(f1);
  ReliableSpoolingFileEventReader parser=getParser();
  File f2=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f2,Charsets.UTF_8);
  List<String> out=bodiesAsStrings(parser.readEvents(8));
  parser.commit();
  assertEquals(8,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertTrue(out.contains("file1line3"));
  assertTrue(out.contains("file1line4"));
  assertTrue(out.contains("file1line5"));
  assertTrue(out.contains("file1line6"));
  assertTrue(out.contains("file1line7"));
  assertTrue(out.contains("file1line8"));
  assertNull(parser.readEvent());
  List<File> outFiles=Lists.newArrayList(tmpDir.listFiles(directoryFilter()));
  assertEquals(2,outFiles.size());
  assertTrue("Outfiles should have file0 & file1: " + outFiles,outFiles.contains(new File(tmpDir + "/file0" + completedSuffix)));
  assertTrue("Outfiles should have file0 & file1: " + outFiles,outFiles.contains(new File(tmpDir + "/file1" + completedSuffix)));
}

</code></pre>

<br>
<pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNameCorrespondsToLatestRead() throws IOException {
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  ReliableSpoolingFileEventReader parser=getParser();
  parser.readEvents(5);
  parser.commit();
  assertNotNull(parser.getLastFileRead());
  assertTrue(parser.getLastFileRead().endsWith("file1"));
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  Files.write("file2line1\nfile2line2\nfile2line3\nfile2line4\n" + "file2line5\nfile2line6\nfile2line7\nfile2line8\n",f2,Charsets.UTF_8);
  parser.readEvents(5);
  parser.commit();
  assertNotNull(parser.getLastFileRead());
  assertTrue(parser.getLastFileRead().endsWith("file1"));
  parser.readEvents(5);
  parser.commit();
  assertNotNull(parser.getLastFileRead());
  assertTrue(parser.getLastFileRead().endsWith("file2"));
  parser.readEvents(5);
  assertTrue(parser.getLastFileRead().endsWith("file2"));
  parser.readEvents(5);
  assertTrue(parser.getLastFileRead().endsWith("file2"));
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitiallyEmptyDirectory() throws IOException {
  ReliableSpoolingFileEventReader parser=getParser();
  assertNull(parser.readEvent());
  assertEquals(0,parser.readEvents(10).size());
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  List<String> out=bodiesAsStrings(parser.readEvents(2));
  parser.commit();
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  File f2=new File(tmpDir.getAbsolutePath() + "/file2");
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  parser.readEvent();
  parser.commit();
  List<File> outFiles=Lists.newArrayList(tmpDir.listFiles(directoryFilter()));
  assertEquals(2,outFiles.size());
  assertTrue(outFiles.contains(new File(tmpDir + "/file1" + completedSuffix)));
  assertTrue(outFiles.contains(new File(tmpDir + "/file2")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.clients.log4jappender.TestLog4jAppender </h4><pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLog4jAppender() throws IOException {
  configureSource();
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppender.class);
  for (int count=0; count <= 1000; count++) {
    int level=((count % 5) + 1) * 10000;
    String msg="This is log message number" + String.valueOf(count);
    logger.log(Level.toLevel(level),msg);
    Transaction transaction=ch.getTransaction();
    transaction.begin();
    Event event=ch.take();
    Assert.assertNotNull(event);
    Assert.assertEquals(new String(event.getBody(),"UTF8"),msg);
    Map<String,String> hdrs=event.getHeaders();
    Assert.assertNotNull(hdrs.get(Log4jAvroHeaders.TIMESTAMP.toString()));
    Assert.assertEquals(Level.toLevel(level),Level.toLevel(Integer.valueOf(hdrs.get(Log4jAvroHeaders.LOG_LEVEL.toString()))));
    Assert.assertEquals(logger.getName(),hdrs.get(Log4jAvroHeaders.LOGGER_NAME.toString()));
    Assert.assertEquals("UTF8",hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLayout() throws IOException {
  configureSource();
  props.put("log4j.appender.out2.layout","org.apache.log4j.PatternLayout");
  props.put("log4j.appender.out2.layout.ConversionPattern","%-5p [%t]: %m%n");
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppender.class);
  Thread.currentThread().setName("Log4jAppenderTest");
  for (int count=0; count <= 100; count++) {
    int level=((count % 5) + 1) * 10000;
    String msg="This is log message number" + String.valueOf(count);
    logger.log(Level.toLevel(level),msg);
    Transaction transaction=ch.getTransaction();
    transaction.begin();
    Event event=ch.take();
    Assert.assertNotNull(event);
    StringBuilder builder=new StringBuilder();
    builder.append("[").append("Log4jAppenderTest").append("]: ").append(msg);
    String eventBody=new String(event.getBody(),"UTF-8");
    String eventLevel=eventBody.split("\\s+")[0];
    Assert.assertEquals(Level.toLevel(level).toString(),eventLevel);
    Assert.assertEquals(new String(event.getBody(),"UTF8").trim().substring(eventLevel.length()).trim(),builder.toString());
    Map<String,String> hdrs=event.getHeaders();
    Assert.assertNotNull(hdrs.get(Log4jAvroHeaders.TIMESTAMP.toString()));
    Assert.assertEquals(Level.toLevel(level),Level.toLevel(Integer.parseInt(hdrs.get(Log4jAvroHeaders.LOG_LEVEL.toString()))));
    Assert.assertEquals(logger.getName(),hdrs.get(Log4jAvroHeaders.LOGGER_NAME.toString()));
    Assert.assertEquals("UTF8",hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
    transaction.commit();
    transaction.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.clients.log4jappender.TestLog4jAppenderWithAvro </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAvroGeneric() throws IOException {
  loadProperties("flume-log4jtest-avro-generic.properties");
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppenderWithAvro.class);
  String msg="This is log message number " + String.valueOf(0);
  Schema schema=new Schema.Parser().parse(getClass().getClassLoader().getResource("myrecord.avsc").openStream());
  GenericRecordBuilder builder=new GenericRecordBuilder(schema);
  GenericRecord record=builder.set("message",msg).build();
  logger.info(record);
  Transaction transaction=ch.getTransaction();
  transaction.begin();
  Event event=ch.take();
  Assert.assertNotNull(event);
  GenericDatumReader<GenericRecord> reader=new GenericDatumReader<GenericRecord>(schema);
  BinaryDecoder decoder=DecoderFactory.get().binaryDecoder(event.getBody(),null);
  GenericRecord recordFromEvent=reader.read(null,decoder);
  Assert.assertEquals(msg,recordFromEvent.get("message").toString());
  Map<String,String> hdrs=event.getHeaders();
  Assert.assertNull(hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
  Assert.assertEquals("Schema URL should be set","file:///tmp/myrecord.avsc",hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_URL.toString()));
  Assert.assertNull("Schema string should not be set",hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_LITERAL.toString()));
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAvroReflect() throws IOException {
  loadProperties("flume-log4jtest-avro-reflect.properties");
  PropertyConfigurator.configure(props);
  Logger logger=LogManager.getLogger(TestLog4jAppenderWithAvro.class);
  String msg="This is log message number " + String.valueOf(0);
  AppEvent appEvent=new AppEvent();
  appEvent.setMessage(msg);
  logger.info(appEvent);
  Transaction transaction=ch.getTransaction();
  transaction.begin();
  Event event=ch.take();
  Assert.assertNotNull(event);
  Schema schema=ReflectData.get().getSchema(appEvent.getClass());
  ReflectDatumReader<AppEvent> reader=new ReflectDatumReader<AppEvent>(AppEvent.class);
  BinaryDecoder decoder=DecoderFactory.get().binaryDecoder(event.getBody(),null);
  AppEvent recordFromEvent=reader.read(null,decoder);
  Assert.assertEquals(msg,recordFromEvent.getMessage());
  Map<String,String> hdrs=event.getHeaders();
  Assert.assertNull(hdrs.get(Log4jAvroHeaders.MESSAGE_ENCODING.toString()));
  Assert.assertNull("Schema URL should not be set",hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_URL.toString()));
  Assert.assertEquals("Schema string should be set",schema.toString(),hdrs.get(Log4jAvroHeaders.AVRO_SCHEMA_LITERAL.toString()));
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.event.TestEventBuilder </h4><pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBody(){
  Event e1=EventBuilder.withBody("e1".getBytes());
  Assert.assertNotNull(e1);
  Assert.assertArrayEquals("body is correct","e1".getBytes(),e1.getBody());
  Event e2=EventBuilder.withBody(Long.valueOf(2).toString().getBytes());
  Assert.assertNotNull(e2);
  Assert.assertArrayEquals("body is correct",Long.valueOf(2L).toString().getBytes(),e2.getBody());
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeaders(){
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("one","1");
  headers.put("two","2");
  Event e1=EventBuilder.withBody("e1".getBytes(),headers);
  Assert.assertNotNull(e1);
  Assert.assertArrayEquals("e1 has the proper body","e1".getBytes(),e1.getBody());
  Assert.assertEquals("e1 has the proper headers",2,e1.getHeaders().size());
  Assert.assertEquals("e1 has a one key","1",e1.getHeaders().get("one"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.instrumentation.util.TestJMXPollUtil </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testJMXPoll(){
  memChannel.setName("memChannel");
  pmemChannel.setName("pmemChannel");
  Context c=new Context();
  Configurables.configure(memChannel,c);
  Configurables.configure(pmemChannel,c);
  memChannel.start();
  pmemChannel.start();
  Transaction txn=memChannel.getTransaction();
  txn.begin();
  memChannel.put(EventBuilder.withBody("blah".getBytes()));
  memChannel.put(EventBuilder.withBody("blah".getBytes()));
  txn.commit();
  txn.close();
  txn=memChannel.getTransaction();
  txn.begin();
  memChannel.take();
  txn.commit();
  txn.close();
  Transaction txn2=pmemChannel.getTransaction();
  txn2.begin();
  pmemChannel.put(EventBuilder.withBody("blah".getBytes()));
  pmemChannel.put(EventBuilder.withBody("blah".getBytes()));
  txn2.commit();
  txn2.close();
  txn2=pmemChannel.getTransaction();
  txn2.begin();
  pmemChannel.take();
  txn2.commit();
  txn2.close();
  Map<String,Map<String,String>> mbeans=JMXPollUtil.getAllMBeans();
  Assert.assertNotNull(mbeans);
  Map<String,String> memBean=mbeans.get("CHANNEL.memChannel");
  Assert.assertNotNull(memBean);
  JMXTestUtils.checkChannelCounterParams(memBean);
  Map<String,String> pmemBean=mbeans.get("CHANNEL.pmemChannel");
  Assert.assertNotNull(pmemBean);
  JMXTestUtils.checkChannelCounterParams(pmemBean);
  memChannel.stop();
  pmemChannel.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestCensoringInterceptor </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCensor(){
  MemoryChannel memCh=new MemoryChannel();
  memCh.configure(new Context());
  memCh.start();
  ChannelSelector cs=new ReplicatingChannelSelector();
  cs.setChannels(Lists.<Channel>newArrayList(memCh));
  ChannelProcessor cp=new ChannelProcessor(cs);
  Map<String,String> cfgMap=Maps.newHashMap();
  cfgMap.put("interceptors","a");
  String builderClass=CensoringInterceptor.Builder.class.getName();
  cfgMap.put("interceptors.a.type",builderClass);
  Context ctx=new Context(cfgMap);
  cp.configure(ctx);
  cp.initialize();
  Map<String,String> headers=Maps.newHashMap();
  String badWord="scribe";
  headers.put("Bad-Words",badWord);
  Event event1=EventBuilder.withBody("test",Charsets.UTF_8,headers);
  Assert.assertEquals(badWord,event1.getHeaders().get("Bad-Words"));
  cp.processEvent(event1);
  Transaction tx=memCh.getTransaction();
  tx.begin();
  Event event1a=memCh.take();
  Assert.assertNull(event1a.getHeaders().get("Bad-Words"));
  tx.commit();
  tx.close();
  cp.close();
  memCh.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestHostInterceptor </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host name can be used instead of host IP.
 */
@Test public void testUseHostname() throws Exception {
  Context ctx=new Context();
  ctx.put("useIP","false");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=InetAddress.getLocalHost().getCanonicalHostName();
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host is NOT overwritten when preserveExisting=true.
 */
@Test public void testPreserve() throws Exception {
  Context ctx=new Context();
  ctx.put("preserveExisting","true");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=ORIGINAL_HOST;
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomHeader() throws Exception {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  Context ctx=new Context();
  ctx.put("preserveExisting","false");
  ctx.put("hostHeader","hostname");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  Assert.assertNull(eventBeforeIntercept.getHeaders().get("hostname"));
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get("hostname");
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(InetAddress.getLocalHost().getHostAddress(),actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Ensure that the "host" header gets set (to something)
 */
@Test public void testBasic() throws Exception {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  Interceptor interceptor=builder.build();
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  Assert.assertNull(eventBeforeIntercept.getHeaders().get(Constants.HOST));
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host IP is used by default instead of host name.
 */
@Test public void testUseIP() throws Exception {
  Context ctx=new Context();
  ctx.put("useIP","true");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=InetAddress.getLocalHost().getHostAddress();
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure host IS overwritten when preserveExisting=false.
 */
@Test public void testClobber() throws Exception {
  Context ctx=new Context();
  ctx.put("preserveExisting","false");
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.HOST.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  final String ORIGINAL_HOST="originalhost";
  Event eventBeforeIntercept=EventBuilder.withBody("test event",Charsets.UTF_8);
  eventBeforeIntercept.getHeaders().put(Constants.HOST,ORIGINAL_HOST);
  Assert.assertEquals(ORIGINAL_HOST,eventBeforeIntercept.getHeaders().get(Constants.HOST));
  String expectedHost=InetAddress.getLocalHost().getHostAddress();
  Event eventAfterIntercept=interceptor.intercept(eventBeforeIntercept);
  String actualHost=eventAfterIntercept.getHeaders().get(Constants.HOST);
  Assert.assertNotNull(actualHost);
  Assert.assertEquals(expectedHost,actualHost);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestRegexFilteringInterceptor </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testInclusion() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.REGEX_FILTER.toString());
  Context ctx=new Context();
  ctx.put(Constants.REGEX,"(INFO.*)|(WARNING.*)");
  ctx.put(Constants.EXCLUDE_EVENTS,"false");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event shouldPass1=EventBuilder.withBody("INFO: some message",Charsets.UTF_8);
  Assert.assertNotNull(interceptor.intercept(shouldPass1));
  Event shouldPass2=EventBuilder.withBody("WARNING: some message",Charsets.UTF_8);
  Assert.assertNotNull(interceptor.intercept(shouldPass2));
  Event shouldNotPass=EventBuilder.withBody("DEBUG: some message",Charsets.UTF_8);
  Assert.assertNull(interceptor.intercept(shouldNotPass));
  builder.configure(ctx);
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testExclusion() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.REGEX_FILTER.toString());
  Context ctx=new Context();
  ctx.put(Constants.REGEX,".*DEBUG.*");
  ctx.put(Constants.EXCLUDE_EVENTS,"true");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event shouldPass1=EventBuilder.withBody("INFO: some message",Charsets.UTF_8);
  Assert.assertNotNull(interceptor.intercept(shouldPass1));
  Event shouldPass2=EventBuilder.withBody("WARNING: some message",Charsets.UTF_8);
  Assert.assertNotNull(interceptor.intercept(shouldPass2));
  Event shouldNotPass=EventBuilder.withBody("this message has DEBUG in it",Charsets.UTF_8);
  Assert.assertNull(interceptor.intercept(shouldNotPass));
  builder.configure(ctx);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultBehavior() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.REGEX_FILTER.toString());
  builder.configure(new Context());
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  Event filteredEvent=interceptor.intercept(event);
  Assert.assertNotNull(filteredEvent);
  Assert.assertEquals(event,filteredEvent);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestStaticInterceptor </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomKeyValue() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  Context ctx=new Context();
  ctx.put(Constants.KEY,"myKey");
  ctx.put(Constants.VALUE,"myVal");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  Assert.assertNull(event.getHeaders().get("myKey"));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get("myKey");
  Assert.assertNotNull(val);
  Assert.assertEquals("myVal",val);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultKeyValue() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  builder.configure(new Context());
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  Assert.assertNull(event.getHeaders().get(Constants.KEY));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get(Constants.KEY);
  Assert.assertNotNull(val);
  Assert.assertEquals(Constants.VALUE,val);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPreserve() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  Context ctx=new Context();
  ctx.put(Constants.PRESERVE,"true");
  ctx.put(Constants.VALUE,"replacement value");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  event.getHeaders().put(Constants.KEY,"incumbent value");
  Assert.assertNotNull(event.getHeaders().get(Constants.KEY));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get(Constants.KEY);
  Assert.assertNotNull(val);
  Assert.assertEquals("incumbent value",val);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReplace() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.STATIC.toString());
  Context ctx=new Context();
  ctx.put(Constants.PRESERVE,"false");
  ctx.put(Constants.VALUE,"replacement value");
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test",Charsets.UTF_8);
  event.getHeaders().put(Constants.KEY,"incumbent value");
  Assert.assertNotNull(event.getHeaders().get(Constants.KEY));
  event=interceptor.intercept(event);
  String val=event.getHeaders().get(Constants.KEY);
  Assert.assertNotNull(val);
  Assert.assertEquals("replacement value",val);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.interceptor.TestTimestampInterceptor </h4><pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure that the "timestamp" header gets set (to something)
 */
@Test public void testBasic() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  InterceptorBuilderFactory factory=new InterceptorBuilderFactory();
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.TIMESTAMP.toString());
  Interceptor interceptor=builder.build();
  Event event=EventBuilder.withBody("test event",Charsets.UTF_8);
  Assert.assertNull(event.getHeaders().get(Constants.TIMESTAMP));
  Long now=System.currentTimeMillis();
  event=interceptor.intercept(event);
  String timestampStr=event.getHeaders().get(Constants.TIMESTAMP);
  Assert.assertNotNull(timestampStr);
  Assert.assertTrue(Long.parseLong(timestampStr) >= now);
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure timestamp is NOT overwritten when preserveExistingTimestamp == true
 */
@Test public void testPreserve() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Context ctx=new Context();
  ctx.put("preserveExisting","true");
  InterceptorBuilderFactory factory=new InterceptorBuilderFactory();
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.TIMESTAMP.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  long originalTs=1L;
  Event event=EventBuilder.withBody("test event",Charsets.UTF_8);
  event.getHeaders().put(Constants.TIMESTAMP,Long.toString(originalTs));
  Assert.assertEquals(Long.toString(originalTs),event.getHeaders().get(Constants.TIMESTAMP));
  Long now=System.currentTimeMillis();
  event=interceptor.intercept(event);
  String timestampStr=event.getHeaders().get(Constants.TIMESTAMP);
  Assert.assertNotNull(timestampStr);
  Assert.assertTrue(Long.parseLong(timestampStr) == originalTs);
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure timestamp IS overwritten when preserveExistingTimestamp == false
 */
@Test public void testClobber() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
  Context ctx=new Context();
  ctx.put("preserveExisting","false");
  InterceptorBuilderFactory factory=new InterceptorBuilderFactory();
  Interceptor.Builder builder=InterceptorBuilderFactory.newInstance(InterceptorType.TIMESTAMP.toString());
  builder.configure(ctx);
  Interceptor interceptor=builder.build();
  long originalTs=1L;
  Event event=EventBuilder.withBody("test event",Charsets.UTF_8);
  event.getHeaders().put(Constants.TIMESTAMP,Long.toString(originalTs));
  Assert.assertEquals(Long.toString(originalTs),event.getHeaders().get(Constants.TIMESTAMP));
  Long now=System.currentTimeMillis();
  event=interceptor.intercept(event);
  String timestampStr=event.getHeaders().get(Constants.TIMESTAMP);
  Assert.assertNotNull(timestampStr);
  Assert.assertTrue(Long.parseLong(timestampStr) >= now);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.node.TestPollingZooKeeperConfigurationProvider </h4><pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPolling() throws Exception {
  es.awaitEvent();
  es.reset();
  FlumeConfiguration fc=cp.getFlumeConfiguration();
  Assert.assertTrue(fc.getConfigurationErrors().isEmpty());
  AgentConfiguration ac=fc.getConfigurationFor(AGENT_NAME);
  Assert.assertNull(ac);
  addData();
  es.awaitEvent();
  es.reset();
  verifyProperties(cp);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.node.TestPropertiesFileConfigurationProvider </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyRead() throws Exception {
  FlumeConfiguration configuration=provider.getFlumeConfiguration();
  Assert.assertNotNull(configuration);
  List<String> expected=Lists.newArrayList();
  expected.add("host5 CONFIG_ERROR");
  expected.add("host5 INVALID_PROPERTY");
  expected.add("host4 CONFIG_ERROR");
  expected.add("host4 CONFIG_ERROR");
  expected.add("host4 PROPERTY_VALUE_NULL");
  expected.add("host4 PROPERTY_VALUE_NULL");
  expected.add("host4 PROPERTY_VALUE_NULL");
  expected.add("host4 AGENT_CONFIGURATION_INVALID");
  expected.add("ch2 ATTRS_MISSING");
  expected.add("host3 CONFIG_ERROR");
  expected.add("host3 PROPERTY_VALUE_NULL");
  expected.add("host3 AGENT_CONFIGURATION_INVALID");
  expected.add("host2 PROPERTY_VALUE_NULL");
  expected.add("host2 AGENT_CONFIGURATION_INVALID");
  List<String> actual=Lists.newArrayList();
  for (  FlumeConfigurationError error : configuration.getConfigurationErrors()) {
    actual.add(error.getComponentName() + " " + error.getErrorType().toString());
  }
  Collections.sort(expected);
  Collections.sort(actual);
  Assert.assertEquals(expected,actual);
  AgentConfiguration agentConfiguration=configuration.getConfigurationFor("host1");
  Assert.assertNotNull(agentConfiguration);
  LOGGER.info(agentConfiguration.getPrevalidationConfig());
  LOGGER.info(agentConfiguration.getPostvalidationConfig());
  Set<String> sources=Sets.newHashSet("source1");
  Set<String> sinks=Sets.newHashSet("sink1");
  Set<String> channels=Sets.newHashSet("channel1");
  Assert.assertEquals(sources,agentConfiguration.getSourceSet());
  Assert.assertEquals(sinks,agentConfiguration.getSinkSet());
  Assert.assertEquals(channels,agentConfiguration.getChannelSet());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestAvroEventDeserializer </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void resetTest() throws IOException {
  File tempFile=newTestFile(true);
  String target=tempFile.getAbsolutePath();
  logger.info("Target: {}",target);
  TransientPositionTracker tracker=new TransientPositionTracker(target);
  AvroEventDeserializer.Builder desBuilder=new AvroEventDeserializer.Builder();
  EventDeserializer deserializer=desBuilder.build(new Context(),new ResettableFileInputStream(tempFile,tracker));
  BinaryDecoder decoder=null;
  DatumReader<GenericRecord> reader=new GenericDatumReader<GenericRecord>(schema);
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("bar",reader.read(null,decoder).get("foo").toString());
  deserializer.reset();
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("bar",reader.read(null,decoder).get("foo").toString());
  deserializer.mark();
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("baz",reader.read(null,decoder).get("foo").toString());
  deserializer.reset();
  decoder=DecoderFactory.get().binaryDecoder(deserializer.readEvent().getBody(),decoder);
  assertEquals("baz",reader.read(null,decoder).get("foo").toString());
  assertNull(deserializer.readEvent());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestBodyTextEventSerializer </h4><pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithNewline() throws FileNotFoundException, IOException {
  OutputStream out=new FileOutputStream(testFile);
  EventSerializer serializer=EventSerializerFactory.getInstance("text",new Context(),out);
  serializer.afterCreate();
  serializer.write(EventBuilder.withBody("event 1",Charsets.UTF_8));
  serializer.write(EventBuilder.withBody("event 2",Charsets.UTF_8));
  serializer.write(EventBuilder.withBody("event 3",Charsets.UTF_8));
  serializer.flush();
  serializer.beforeClose();
  out.flush();
  out.close();
  BufferedReader reader=new BufferedReader(new FileReader(testFile));
  Assert.assertEquals("event 1",reader.readLine());
  Assert.assertEquals("event 2",reader.readLine());
  Assert.assertEquals("event 3",reader.readLine());
  Assert.assertNull(reader.readLine());
  reader.close();
  FileUtils.forceDelete(testFile);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoNewline() throws FileNotFoundException, IOException {
  OutputStream out=new FileOutputStream(testFile);
  Context context=new Context();
  context.put("appendNewline","false");
  EventSerializer serializer=EventSerializerFactory.getInstance("text",context,out);
  serializer.afterCreate();
  serializer.write(EventBuilder.withBody("event 1\n",Charsets.UTF_8));
  serializer.write(EventBuilder.withBody("event 2\n",Charsets.UTF_8));
  serializer.write(EventBuilder.withBody("event 3\n",Charsets.UTF_8));
  serializer.flush();
  serializer.beforeClose();
  out.flush();
  out.close();
  BufferedReader reader=new BufferedReader(new FileReader(testFile));
  Assert.assertEquals("event 1",reader.readLine());
  Assert.assertEquals("event 2",reader.readLine());
  Assert.assertEquals("event 3",reader.readLine());
  Assert.assertNull(reader.readLine());
  reader.close();
  FileUtils.forceDelete(testFile);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestHeaderAndBodyTextEventSerializer </h4><pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoNewline() throws FileNotFoundException, IOException {
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header1","value1");
  headers.put("header2","value2");
  OutputStream out=new FileOutputStream(testFile);
  Context context=new Context();
  context.put("appendNewline","false");
  EventSerializer serializer=EventSerializerFactory.getInstance("header_and_text",context,out);
  serializer.afterCreate();
  serializer.write(EventBuilder.withBody("event 1\n",Charsets.UTF_8,headers));
  serializer.write(EventBuilder.withBody("event 2\n",Charsets.UTF_8,headers));
  serializer.write(EventBuilder.withBody("event 3\n",Charsets.UTF_8,headers));
  serializer.flush();
  serializer.beforeClose();
  out.flush();
  out.close();
  BufferedReader reader=new BufferedReader(new FileReader(testFile));
  Assert.assertEquals("{header2=value2, header1=value1} event 1",reader.readLine());
  Assert.assertEquals("{header2=value2, header1=value1} event 2",reader.readLine());
  Assert.assertEquals("{header2=value2, header1=value1} event 3",reader.readLine());
  Assert.assertNull(reader.readLine());
  reader.close();
  FileUtils.forceDelete(testFile);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithNewline() throws FileNotFoundException, IOException {
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header1","value1");
  headers.put("header2","value2");
  OutputStream out=new FileOutputStream(testFile);
  EventSerializer serializer=EventSerializerFactory.getInstance("header_and_text",new Context(),out);
  serializer.afterCreate();
  serializer.write(EventBuilder.withBody("event 1",Charsets.UTF_8,headers));
  serializer.write(EventBuilder.withBody("event 2",Charsets.UTF_8,headers));
  serializer.write(EventBuilder.withBody("event 3",Charsets.UTF_8,headers));
  serializer.flush();
  serializer.beforeClose();
  out.flush();
  out.close();
  BufferedReader reader=new BufferedReader(new FileReader(testFile));
  Assert.assertEquals("{header2=value2, header1=value1} event 1",reader.readLine());
  Assert.assertEquals("{header2=value2, header1=value1} event 2",reader.readLine());
  Assert.assertEquals("{header2=value2, header1=value1} event 3",reader.readLine());
  Assert.assertNull(reader.readLine());
  reader.close();
  FileUtils.forceDelete(testFile);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestLineDeserializer </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testMaxLineLength() throws IOException {
  String longLine="abcdefghijklmnopqrstuvwxyz\n";
  Context ctx=new Context();
  ctx.put(LineDeserializer.MAXLINE_KEY,"10");
  ResettableInputStream in=new ResettableTestStringInputStream(longLine);
  EventDeserializer des=new LineDeserializer(ctx,in);
  assertEventBodyEquals("abcdefghij",des.readEvent());
  assertEventBodyEquals("klmnopqrst",des.readEvent());
  assertEventBodyEquals("uvwxyz",des.readEvent());
  Assert.assertNull(des.readEvent());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.serialization.TestResettableFileInputStream </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure a reset() brings us back to the default mark (beginning of file)
 * @throws IOException
 */
@Test public void testReset() throws IOException {
  String output=singleLineFileInit(file,Charsets.UTF_8);
  PositionTracker tracker=new DurablePositionTracker(meta,file.getPath());
  ResettableInputStream in=new ResettableFileInputStream(file,tracker);
  String result1=readLine(in,output.length());
  assertEquals(output,result1);
  in.reset();
  String result2=readLine(in,output.length());
  assertEquals(output,result2);
  String result3=readLine(in,output.length());
  assertNull("Should be null: " + result3,result3);
  in.close();
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure that we can simply read bytes from a file.
 * @throws IOException
 */
@Test public void testBasicRead() throws IOException {
  String output=singleLineFileInit(file,Charsets.UTF_8);
  PositionTracker tracker=new DurablePositionTracker(meta,file.getPath());
  ResettableInputStream in=new ResettableFileInputStream(file,tracker);
  String result=readLine(in,output.length());
  assertEquals(output,result);
  String afterEOF=readLine(in,output.length());
  assertNull(afterEOF);
  in.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestAvroSink </h4><pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslWithCompression() throws InterruptedException, EventDeliveryException, InstantiationException, IllegalAccessException {
  setUp("deflate",6);
  boolean bound=false;
  AvroSource source;
  Channel sourceChannel;
  int selectedPort;
  source=new AvroSource();
  sourceChannel=new MemoryChannel();
  Configurables.configure(sourceChannel,new Context());
  List<Channel> channels=new ArrayList<Channel>();
  channels.add(sourceChannel);
  ChannelSelector rcs=new ReplicatingChannelSelector();
  rcs.setChannels(channels);
  source.setChannelProcessor(new ChannelProcessor(rcs));
  Context context=new Context();
  context.put("port",port.toString());
  context.put("bind",hostname);
  context.put("threads","50");
  context.put("compression-type","deflate");
  context.put("ssl",String.valueOf(true));
  context.put("keystore","src/test/resources/server.p12");
  context.put("keystore-password","password");
  context.put("keystore-type","PKCS12");
  Configurables.configure(source,context);
  source.start();
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  Event event=EventBuilder.withBody("Hello avro",Charset.forName("UTF8"));
  context=new Context();
  context.put("hostname",hostname);
  context.put("port",String.valueOf(port));
  context.put("ssl",String.valueOf(true));
  context.put("trust-all-certs",String.valueOf(true));
  context.put("batch-size",String.valueOf(2));
  context.put("connect-timeout",String.valueOf(2000L));
  context.put("request-timeout",String.valueOf(3000L));
  context.put("compression-type","deflate");
  context.put("compression-level",Integer.toString(6));
  Configurables.configure(sink,context);
  sink.start();
  Transaction sickTransaction=channel.getTransaction();
  sickTransaction.begin();
  for (int i=0; i < 10; i++) {
    channel.put(event);
  }
  sickTransaction.commit();
  sickTransaction.close();
  for (int i=0; i < 5; i++) {
    Sink.Status status=sink.process();
    logger.debug("Calling Process " + i + " times:"+ status);
    Assert.assertEquals(Sink.Status.READY,status);
  }
  sink.stop();
  Transaction sourceTransaction=sourceChannel.getTransaction();
  sourceTransaction.begin();
  Event sourceEvent=sourceChannel.take();
  Assert.assertNotNull(sourceEvent);
  Assert.assertEquals("Channel contained our event","Hello avro",new String(sourceEvent.getBody()));
  sourceTransaction.commit();
  sourceTransaction.close();
  logger.debug("Round trip event:{}",sourceEvent);
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.TestDefaultSinkFactory </h4><pre class="type-10 type-1 type-14 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDuplicateCreate(){
  Sink avroSink1=sinkFactory.create("avroSink1","avro");
  Sink avroSink2=sinkFactory.create("avroSink2","avro");
  Assert.assertNotNull(avroSink1);
  Assert.assertNotNull(avroSink2);
  Assert.assertNotSame(avroSink1,avroSink2);
  Assert.assertTrue(avroSink1 instanceof AvroSink);
  Assert.assertTrue(avroSink2 instanceof AvroSink);
  Sink s1=sinkFactory.create("avroSink1","avro");
  Sink s2=sinkFactory.create("avroSink2","avro");
  Assert.assertNotSame(avroSink1,s1);
  Assert.assertNotSame(avroSink2,s2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TestElasticSearchIndexRequestBuilderFactory </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseExistingAtTimestampHeaderInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  Map<String,String> headersWithTimestamp=Maps.newHashMap();
  headersWithTimestamp.put("@timestamp","-999");
  base.setHeaders(headersWithTimestamp);
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals(-999L,timestampedEvent.getTimestamp());
  assertEquals("-999",timestampedEvent.getHeaders().get("@timestamp"));
  assertNull(timestampedEvent.getHeaders().get("timestamp"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TestElasticSearchSink </h4><pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseSpecifiedIndexNameBuilder() throws Exception {
  Context context=new Context();
  context.put(ElasticSearchSinkConstants.INDEX_NAME_BUILDER,"org.apache.flume.sink.elasticsearch.FakeIndexNameBuilder");
  assertNull(fixture.getIndexNameBuilder());
  fixture.configure(context);
  assertTrue(fixture.getIndexNameBuilder() instanceof FakeIndexNameBuilder);
}

</code></pre>

<br>
<pre class="type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseSpecifiedSerializer() throws Exception {
  Context context=new Context();
  context.put(SERIALIZER,"org.apache.flume.sink.elasticsearch.FakeEventSerializer");
  assertNull(fixture.getEventSerializer());
  fixture.configure(context);
  assertTrue(fixture.getEventSerializer() instanceof FakeEventSerializer);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.elasticsearch.TimestampedEventTest </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldUseExistingAtTimestampHeaderInTimestampedEvent(){
  SimpleEvent base=new SimpleEvent();
  Map<String,String> headersWithTimestamp=Maps.newHashMap();
  headersWithTimestamp.put("@timestamp","-999");
  base.setHeaders(headersWithTimestamp);
  TimestampedEvent timestampedEvent=new TimestampedEvent(base);
  assertEquals(-999L,timestampedEvent.getTimestamp());
  assertEquals("-999",timestampedEvent.getHeaders().get("@timestamp"));
  assertNull(timestampedEvent.getHeaders().get("timestamp"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.hdfs.TestHDFSEventSinkOnMiniCluster </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This is a very basic test that writes one event to HDFS and reads it back.
 */
@Test public void simpleHDFSTest() throws EventDeliveryException, IOException {
  cluster=new MiniDFSCluster(new Configuration(),1,true,null);
  cluster.waitActive();
  String outputDir="/flume/simpleHDFSTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.DataStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  String EVENT_BODY="yarg!";
  channel.getTransaction().begin();
  try {
    channel.put(EventBuilder.withBody(EVENT_BODY,Charsets.UTF_8));
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  sink.process();
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  Assert.assertEquals("Only one file expected",1,statuses.length);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(stream));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertEquals(EVENT_BODY,line);
  }
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This is a very basic test that writes one event to HDFS and reads it back.
 */
@Test public void underReplicationTest() throws EventDeliveryException, IOException {
  Configuration conf=new Configuration();
  conf.set("dfs.replication",String.valueOf(3));
  cluster=new MiniDFSCluster(conf,3,true,null);
  cluster.waitActive();
  String outputDir="/flume/underReplicationTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.DataStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  channel.getTransaction().begin();
  try {
    channel.put(EventBuilder.withBody("yarg 1",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 2",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 3",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 4",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 5",Charsets.UTF_8));
    channel.put(EventBuilder.withBody("yarg 5",Charsets.UTF_8));
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Same file.");
  sink.process();
  logger.info("Killing datanode #1...");
  cluster.stopDataNode(0);
  logger.info("Running process(). Create new file? (racy)");
  sink.process();
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Create new file.");
  sink.process();
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(stream));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertTrue(line.startsWith("yarg"));
  }
  Assert.assertTrue("4 or 5 files expected, found " + statuses.length,statuses.length == 4 || statuses.length == 5);
  System.out.println("There are " + statuses.length + " files.");
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Writes two events in GZIP-compressed serialize.
 */
@Test public void simpleHDFSGZipCompressedTest() throws EventDeliveryException, IOException {
  cluster=new MiniDFSCluster(new Configuration(),1,true,null);
  cluster.waitActive();
  String outputDir="/flume/simpleHDFSGZipCompressedTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.CompStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  sinkCtx.put("hdfs.codeC","gzip");
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  String EVENT_BODY_1="yarg1";
  String EVENT_BODY_2="yarg2";
  channel.getTransaction().begin();
  try {
    channel.put(EventBuilder.withBody(EVENT_BODY_1,Charsets.UTF_8));
    channel.put(EventBuilder.withBody(EVENT_BODY_2,Charsets.UTF_8));
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  sink.process();
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  Assert.assertEquals("Only one file expected",1,statuses.length);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(new GZIPInputStream(stream)));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertEquals(EVENT_BODY_1,line);
  }
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<pre class="type-9 type-10 type-1 type-3 type-2 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * This is a very basic test that writes one event to HDFS and reads it back.
 */
@Ignore("This test is flakey and causes tests to fail pretty often.") @Test public void maxUnderReplicationTest() throws EventDeliveryException, IOException {
  Configuration conf=new Configuration();
  conf.set("dfs.replication",String.valueOf(3));
  cluster=new MiniDFSCluster(conf,3,true,null);
  cluster.waitActive();
  String outputDir="/flume/underReplicationTest";
  Path outputDirPath=new Path(outputDir);
  logger.info("Running test with output dir: {}",outputDir);
  FileSystem fs=cluster.getFileSystem();
  if (fs.exists(outputDirPath)) {
    fs.delete(outputDirPath,true);
  }
  String nnURL=getNameNodeURL(cluster);
  logger.info("Namenode address: {}",nnURL);
  Context chanCtx=new Context();
  MemoryChannel channel=new MemoryChannel();
  channel.setName("simpleHDFSTest-mem-chan");
  channel.configure(chanCtx);
  channel.start();
  Context sinkCtx=new Context();
  sinkCtx.put("hdfs.path",nnURL + outputDir);
  sinkCtx.put("hdfs.fileType",HDFSWriterFactory.DataStreamType);
  sinkCtx.put("hdfs.batchSize",Integer.toString(1));
  HDFSEventSink sink=new HDFSEventSink();
  sink.setName("simpleHDFSTest-hdfs-sink");
  sink.configure(sinkCtx);
  sink.setChannel(channel);
  sink.start();
  channel.getTransaction().begin();
  try {
    for (int i=0; i < 50; i++) {
      channel.put(EventBuilder.withBody("yarg " + i,Charsets.UTF_8));
    }
    channel.getTransaction().commit();
  }
  finally {
    channel.getTransaction().close();
  }
  logger.info("Running process(). Create new file.");
  sink.process();
  logger.info("Running process(). Same file.");
  sink.process();
  logger.info("Killing datanode #1...");
  cluster.stopDataNode(0);
  logger.info("Running process(). Create new file? (racy)");
  sink.process();
  for (int i=3; i < 50; i++) {
    logger.info("Running process().");
    sink.process();
  }
  sink.stop();
  channel.stop();
  FileStatus[] statuses=fs.listStatus(outputDirPath);
  Assert.assertNotNull("No files found written to HDFS",statuses);
  for (  FileStatus status : statuses) {
    Path filePath=status.getPath();
    logger.info("Found file on DFS: {}",filePath);
    FSDataInputStream stream=fs.open(filePath);
    BufferedReader reader=new BufferedReader(new InputStreamReader(stream));
    String line=reader.readLine();
    logger.info("First line in file {}: {}",filePath,line);
    Assert.assertTrue(line.startsWith("yarg"));
  }
  System.out.println("There are " + statuses.length + " files.");
  Assert.assertEquals("31 files expected, found " + statuses.length,31,statuses.length);
  if (!KEEP_DATA) {
    fs.delete(outputDirPath,true);
  }
  cluster.shutdown();
  cluster=null;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.kafka.TestKafkaSink </h4><pre class="type-13 type-11 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyChannel() throws UnsupportedEncodingException, EventDeliveryException {
  Sink kafkaSink=new KafkaSink();
  Context context=prepareDefaultContext();
  Configurables.configure(kafkaSink,context);
  Channel memoryChannel=new MemoryChannel();
  Configurables.configure(memoryChannel,context);
  kafkaSink.setChannel(memoryChannel);
  kafkaSink.start();
  Sink.Status status=kafkaSink.process();
  if (status != Sink.Status.BACKOFF) {
    fail("Error Occurred");
  }
  assertNull(testUtil.getNextMessageFromConsumer(KafkaSinkConstants.DEFAULT_TOPIC));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.kite.TestDatasetSink </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCloseWriter() throws EventDeliveryException {
  config.put(DatasetSinkConstants.CONFIG_FLUSHABLE_COMMIT_ON_BATCH,Boolean.toString(false));
  config.put(DatasetSinkConstants.CONFIG_SYNCABLE_SYNC_ON_BATCH,Boolean.toString(false));
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  sink.closeWriter();
  sink.commitTransaction();
  Assert.assertNull("Writer should be null",sink.getWriter());
  Assert.assertEquals("Should have committed",0,remaining(in));
  sink.stop();
  Assert.assertEquals(Sets.newHashSet(expected),read(Datasets.load(FILE_DATASET_URI)));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCloseAndCreateWriter() throws EventDeliveryException {
  config.put(DatasetSinkConstants.CONFIG_FLUSHABLE_COMMIT_ON_BATCH,Boolean.toString(false));
  config.put(DatasetSinkConstants.CONFIG_SYNCABLE_SYNC_ON_BATCH,Boolean.toString(false));
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  sink.closeWriter();
  sink.commitTransaction();
  sink.createWriter();
  Assert.assertNotNull("Writer should not be null",sink.getWriter());
  Assert.assertEquals("Should have committed",0,remaining(in));
  sink.stop();
  Assert.assertEquals(Sets.newHashSet(expected),read(Datasets.load(FILE_DATASET_URI)));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateWriter() throws EventDeliveryException {
  config.put(DatasetSinkConstants.CONFIG_FLUSHABLE_COMMIT_ON_BATCH,Boolean.toString(false));
  config.put(DatasetSinkConstants.CONFIG_SYNCABLE_SYNC_ON_BATCH,Boolean.toString(false));
  DatasetSink sink=sink(in,config);
  sink.start();
  sink.process();
  sink.commitTransaction();
  sink.createWriter();
  Assert.assertNotNull("Writer should not be null",sink.getWriter());
  Assert.assertEquals("Should have committed",0,remaining(in));
  sink.stop();
  Assert.assertEquals(0,read(Datasets.load(FILE_DATASET_URI)).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.solr.morphline.TestBlobDeserializer </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testMaxLineLength() throws IOException {
  String longLine="abcdefghijklmnopqrstuvwxyz\n";
  Context ctx=new Context();
  ctx.put(BlobDeserializer.MAX_BLOB_LENGTH_KEY,"10");
  ResettableInputStream in=new ResettableTestStringInputStream(longLine);
  EventDeserializer des=new BlobDeserializer(ctx,in);
  assertEventBodyEquals("abcdefghij",des.readEvent());
  assertEventBodyEquals("klmnopqrst",des.readEvent());
  assertEventBodyEquals("uvwxyz\n",des.readEvent());
  assertNull(des.readEvent());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.sink.solr.morphline.TestMorphlineInterceptor </h4><pre class="type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGrokIfNotMatchDropEventDrop() throws Exception {
  Context context=new Context();
  context.put(MorphlineHandlerImpl.MORPHLINE_FILE_PARAM,RESOURCES_DIR + "/test-morphlines/grokIfNotMatchDropRecord.conf");
  String msg="<XXXXXXXXXXXXX164>Feb  4 10:46:14 syslog sshd[607]: Server listening on 0.0.0.0 port 22.";
  Event input=EventBuilder.withBody(null,ImmutableMap.of(Fields.MESSAGE,msg));
  Event actual=build(context).intercept(input);
  assertNull(actual);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestAvroSource </h4><pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslRequest() throws InterruptedException, IOException {
  boolean bound=false;
  for (int i=0; i < 10 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("port",String.valueOf(selectedPort=41414 + i));
      context.put("bind","0.0.0.0");
      context.put("ssl","true");
      context.put("keystore","src/test/resources/server.p12");
      context.put("keystore-password","password");
      context.put("keystore-type","PKCS12");
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    ChannelException e) {
      Thread.sleep(100);
    }
  }
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  AvroSourceProtocol client=SpecificRequestor.getClient(AvroSourceProtocol.class,new NettyTransceiver(new InetSocketAddress(selectedPort),new SSLChannelFactory()));
  AvroFlumeEvent avroEvent=new AvroFlumeEvent();
  avroEvent.setHeaders(new HashMap<CharSequence,CharSequence>());
  avroEvent.setBody(ByteBuffer.wrap("Hello avro ssl".getBytes()));
  Status status=client.append(avroEvent);
  Assert.assertEquals(Status.OK,status);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Channel contained our event","Hello avro ssl",new String(event.getBody()));
  transaction.commit();
  transaction.close();
  logger.debug("Round trip event:{}",event);
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestBasicSourceSemantics </h4><pre class="type-11 type-10 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigureCalledWhenStarted() throws Exception {
  source=spyAndConfigure(new DoNothingSource());
  source.start();
  try {
    source.configure(context);
    Assert.fail();
  }
 catch (  IllegalStateException expected) {
  }
  Assert.assertTrue(source.isStarted());
  Assert.assertNull(source.getStartException());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoStartThrowsException() throws Exception {
  source=spyAndConfigure(new DoNothingSource(){
    @Override protected void doStart() throws FlumeException {
      throw new FlumeException("dummy");
    }
  }
);
  source.start();
  Assert.assertFalse(source.isStarted());
  Assert.assertEquals(LifecycleState.ERROR,source.getLifecycleState());
  Assert.assertNotNull(source.getStartException());
}

</code></pre>

<br>
<pre class="type-11 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoConfigureThrowsException() throws Exception {
  source=spy(new DoNothingSource(){
    @Override protected void doConfigure(    Context context) throws FlumeException {
      throw new FlumeException("dummy");
    }
  }
);
  source.setChannelProcessor(channelProcessor);
  try {
    source.configure(context);
    Assert.fail();
  }
 catch (  FlumeException expected) {
  }
  Assert.assertFalse(source.isStarted());
  Assert.assertEquals(LifecycleState.ERROR,source.getLifecycleState());
  Assert.assertNotNull(source.getStartException());
}

</code></pre>

<br>
<pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoStopThrowsException() throws Exception {
  source=spyAndConfigure(new DoNothingSource(){
    @Override protected void doStop() throws FlumeException {
      throw new FlumeException("dummy");
    }
  }
);
  source.start();
  source.stop();
  Assert.assertFalse(source.isStarted());
  Assert.assertEquals(LifecycleState.ERROR,source.getLifecycleState());
  Assert.assertNull(source.getStartException());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestDefaultSourceFactory </h4><pre class="type-10 type-1 type-14 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDuplicateCreate(){
  Source avroSource1=sourceFactory.create("avroSource1","avro");
  Source avroSource2=sourceFactory.create("avroSource2","avro");
  Assert.assertNotNull(avroSource1);
  Assert.assertNotNull(avroSource2);
  Assert.assertNotSame(avroSource1,avroSource2);
  Assert.assertTrue(avroSource1 instanceof AvroSource);
  Assert.assertTrue(avroSource2 instanceof AvroSource);
  Source s1=sourceFactory.create("avroSource1","avro");
  Source s2=sourceFactory.create("avroSource2","avro");
  Assert.assertNotSame(avroSource1,s1);
  Assert.assertNotSame(avroSource2,s2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestExecSource </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMonitoredCounterGroup() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  if (SystemUtils.IS_OS_WINDOWS) {
    runTestShellCmdHelper("powershell -ExecutionPolicy Unrestricted -command","foreach ($i in 1..5) { $i }",new String[]{"1","2","3","4","5"});
  }
 else {
    runTestShellCmdHelper("/bin/bash -c","for i in {1..5}; do echo $i;done",new String[]{"1","2","3","4","5"});
  }
  ObjectName objName=null;
  try {
    objName=new ObjectName("org.apache.flume.source" + ":type=" + source.getName());
    MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
    String strAtts[]={"Type","EventReceivedCount","EventAcceptedCount"};
    AttributeList attrList=mbeanServer.getAttributes(objName,strAtts);
    Assert.assertNotNull(attrList.get(0));
    Assert.assertEquals("Expected Value: Type","Type",((Attribute)attrList.get(0)).getName());
    Assert.assertEquals("Expected Value: SOURCE","SOURCE",((Attribute)attrList.get(0)).getValue());
    Assert.assertNotNull(attrList.get(1));
    Assert.assertEquals("Expected Value: EventReceivedCount","EventReceivedCount",((Attribute)attrList.get(1)).getName());
    Assert.assertEquals("Expected Value: 5","5",((Attribute)attrList.get(1)).getValue().toString());
    Assert.assertNotNull(attrList.get(2));
    Assert.assertEquals("Expected Value: EventAcceptedCount","EventAcceptedCount",((Attribute)attrList.get(2)).getName());
    Assert.assertEquals("Expected Value: 5","5",((Attribute)attrList.get(2)).getValue().toString());
  }
 catch (  Exception ex) {
    System.out.println("Unable to retreive the monitored counter: " + objName + ex.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBatchTimeout() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  String filePath="/tmp/flume-execsource." + Thread.currentThread().getId();
  String eventBody="TestMessage";
  FileOutputStream outputStream=new FileOutputStream(filePath);
  context.put(ExecSourceConfigurationConstants.CONFIG_BATCH_SIZE,"50000");
  context.put(ExecSourceConfigurationConstants.CONFIG_BATCH_TIME_OUT,"750");
  context.put("shell",SystemUtils.IS_OS_WINDOWS ? "powershell -ExecutionPolicy Unrestricted -command" : "/bin/bash -c");
  context.put("command",SystemUtils.IS_OS_WINDOWS ? "Get-Content " + filePath + " | Select-Object -Last 10" : ("tail -f " + filePath));
  Configurables.configure(source,context);
  source.start();
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int lineNumber=0; lineNumber < 3; lineNumber++) {
    outputStream.write((eventBody).getBytes());
    outputStream.write(String.valueOf(lineNumber).getBytes());
    outputStream.write('\n');
    outputStream.flush();
  }
  outputStream.close();
  Thread.sleep(1500);
  for (int i=0; i < 3; i++) {
    Event event=channel.take();
    assertNotNull(event);
    assertNotNull(event.getBody());
    assertEquals(eventBody + String.valueOf(i),new String(event.getBody()));
  }
  transaction.commit();
  transaction.close();
  source.stop();
  File file=new File(filePath);
  FileUtils.forceDelete(file);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testShellCommandEmbeddingAndEscaping() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  String fileName=SystemUtils.IS_OS_WINDOWS ? "src\\test\\resources\\test_command.ps1" : "src/test/resources/test_command.txt";
  BufferedReader reader=new BufferedReader(new FileReader(fileName));
  try {
    String shell=SystemUtils.IS_OS_WINDOWS ? "powershell -ExecutionPolicy Unrestricted -command" : "/bin/bash -c";
    String command1=reader.readLine();
    Assert.assertNotNull(command1);
    String[] output1=new String[]{"'1'","\"2\"","\\3","\\4"};
    runTestShellCmdHelper(shell,command1,output1);
    String command2=reader.readLine();
    Assert.assertNotNull(command2);
    String[] output2=new String[]{"1","2","3","4","5"};
    runTestShellCmdHelper(shell,command2,output2);
    String command3=reader.readLine();
    Assert.assertNotNull(command3);
    String[] output3=new String[]{"2","3","4","5","6"};
    runTestShellCmdHelper(shell,command3,output3);
  }
  finally {
    reader.close();
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestart() throws InterruptedException, LifecycleException, EventDeliveryException, IOException {
  context.put(ExecSourceConfigurationConstants.CONFIG_RESTART_THROTTLE,"10");
  context.put(ExecSourceConfigurationConstants.CONFIG_RESTART,"true");
  context.put("command",SystemUtils.IS_OS_WINDOWS ? "cmd /c echo flume" : "echo flume");
  Configurables.configure(source,context);
  source.start();
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long start=System.currentTimeMillis();
  for (int i=0; i < 5; i++) {
    Event event=channel.take();
    assertNotNull(event);
    assertNotNull(event.getBody());
    assertEquals("flume",new String(event.getBody(),Charsets.UTF_8));
  }
  assertTrue(System.currentTimeMillis() - start < 10000L);
  transaction.commit();
  transaction.close();
  source.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestMultiportSyslogTCPSource </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that different charsets are parsed by different ports correctly.
 */
@Test public void testPortCharsetHandling() throws UnknownHostException, Exception {
  InetAddress localAddr=InetAddress.getLocalHost();
  DefaultIoSessionDataStructureFactory dsFactory=new DefaultIoSessionDataStructureFactory();
  int port1=10001;
  NioSession session1=mock(NioSession.class);
  session1.setAttributeMap(dsFactory.getAttributeMap(session1));
  SocketAddress sockAddr1=new InetSocketAddress(localAddr,port1);
  when(session1.getLocalAddress()).thenReturn(sockAddr1);
  int port2=10002;
  NioSession session2=mock(NioSession.class);
  session2.setAttributeMap(dsFactory.getAttributeMap(session2));
  SocketAddress sockAddr2=new InetSocketAddress(localAddr,port2);
  when(session2.getLocalAddress()).thenReturn(sockAddr2);
  ConcurrentMap<Integer,ThreadSafeDecoder> portCharsets=new ConcurrentHashMap<Integer,ThreadSafeDecoder>();
  portCharsets.put(port1,new ThreadSafeDecoder(Charsets.ISO_8859_1));
  portCharsets.put(port2,new ThreadSafeDecoder(Charsets.UTF_8));
  MemoryChannel chan=new MemoryChannel();
  chan.configure(new Context());
  chan.start();
  ReplicatingChannelSelector sel=new ReplicatingChannelSelector();
  sel.setChannels(Lists.<Channel>newArrayList(chan));
  ChannelProcessor chanProc=new ChannelProcessor(sel);
  MultiportSyslogHandler handler=new MultiportSyslogHandler(1000,10,chanProc,new SourceCounter("test"),"port",new ThreadSafeDecoder(Charsets.UTF_8),portCharsets,null);
  handler.sessionCreated(session1);
  handler.sessionCreated(session2);
  String header="<10>2012-08-17T02:14:00-07:00 192.168.1.110 ";
  String dangerousChars="";
  String msg;
  IoBuffer buf;
  Event evt;
  msg=header + dangerousChars + "\n";
  buf=IoBuffer.wrap(msg.getBytes(Charsets.ISO_8859_1));
  handler.messageReceived(session1,buf);
  evt=takeEvent(chan);
  Assert.assertNotNull("Event vanished!",evt);
  Assert.assertNull(evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
  msg=header + dangerousChars + "\n";
  buf=IoBuffer.wrap(msg.getBytes(Charsets.ISO_8859_1));
  handler.messageReceived(session2,buf);
  evt=takeEvent(chan);
  Assert.assertNotNull("Event vanished!",evt);
  Assert.assertEquals("Expected invalid event due to character encoding",SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
  msg=header + dangerousChars + "\n";
  buf=IoBuffer.wrap(msg.getBytes(Charsets.UTF_8));
  handler.messageReceived(session2,buf);
  evt=takeEvent(chan);
  Assert.assertNotNull("Event vanished!",evt);
  Assert.assertNull(evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
}

</code></pre>

<br>
<pre class="type-12 type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test parser handling of different character sets.
 */
@Test public void testCharsetParsing() throws FileNotFoundException, IOException {
  String header="<10>2012-08-11T01:01:01Z localhost ";
  String enBody="Yarf yarf yarf";
  String enMsg=header + enBody;
  String frBody="Comment " + "\u00EA" + "tes-vous?";
  String frMsg=header + frBody;
  String esBody="Cmo ests?";
  String esMsg=header + esBody;
  MultiportSyslogHandler handler=new MultiportSyslogHandler(1000,10,new ChannelProcessor(new ReplicatingChannelSelector()),new SourceCounter("test"),"port",new ThreadSafeDecoder(Charsets.UTF_8),new ConcurrentHashMap<Integer,ThreadSafeDecoder>(),null);
  ParsedBuffer parsedBuf=new ParsedBuffer();
  parsedBuf.incomplete=false;
  String[] bodies={enBody,esBody,frBody};
  String[] msgs={enMsg,esMsg,frMsg};
  Charset[] charsets={Charsets.UTF_8,Charsets.ISO_8859_1};
  for (  Charset charset : charsets) {
    for (int i=0; i < msgs.length; i++) {
      String msg=msgs[i];
      String body=bodies[i];
      parsedBuf.buffer=IoBuffer.wrap(msg.getBytes(charset));
      Event evt=handler.parseEvent(parsedBuf,charset.newDecoder());
      String result=new String(evt.getBody(),charset);
      Assert.assertEquals(charset + " parse error: " + msg,body,result);
      Assert.assertNull(evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
    }
  }
  byte[] badUtf8Seq=enMsg.getBytes(Charsets.ISO_8859_1);
  int badMsgLen=badUtf8Seq.length;
  badUtf8Seq[badMsgLen - 2]=(byte)0xFE;
  badUtf8Seq[badMsgLen - 1]=(byte)0xFF;
  parsedBuf.buffer=IoBuffer.wrap(badUtf8Seq);
  Event evt=handler.parseEvent(parsedBuf,Charsets.UTF_8.newDecoder());
  Assert.assertEquals("event body: " + new String(evt.getBody(),Charsets.ISO_8859_1) + " and my default charset = "+ Charset.defaultCharset()+ " with event = "+ evt,SyslogUtils.SyslogStatus.INVALID.getSyslogStatus(),evt.getHeaders().get(SyslogUtils.EVENT_STATUS));
  Assert.assertArrayEquals("Raw message data should be kept in body of event",badUtf8Seq,evt.getBody());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestNetcatSource </h4><pre class="type-12 type-9 type-13 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifecycle() throws InterruptedException, LifecycleException, EventDeliveryException {
  ExecutorService executor=Executors.newFixedThreadPool(3);
  boolean bound=false;
  for (int i=0; i < 100 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("bind","0.0.0.0");
      context.put("port","41414");
      context.put("ack-every-event",String.valueOf(ackEveryEvent));
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    FlumeException e) {
    }
  }
  Runnable clientRequestRunnable=new Runnable(){
    @Override public void run(){
      try {
        SocketChannel clientChannel=SocketChannel.open(new InetSocketAddress(41414));
        Writer writer=Channels.newWriter(clientChannel,"utf-8");
        BufferedReader reader=new BufferedReader(Channels.newReader(clientChannel,"utf-8"));
        writer.write("Test message\n");
        writer.flush();
        if (ackEveryEvent) {
          String response=reader.readLine();
          Assert.assertEquals("Server should return OK","OK",response);
        }
 else {
          Assert.assertFalse("Server should not return anything",reader.ready());
        }
        clientChannel.close();
      }
 catch (      IOException e) {
        logger.error("Caught exception: ",e);
      }
    }
  }
;
  ChannelSelector selector=source.getChannelProcessor().getSelector();
  Transaction tx=selector.getAllChannels().get(0).getTransaction();
  tx.begin();
  for (int i=0; i < 100; i++) {
    logger.info("Sending request");
    executor.submit(clientRequestRunnable);
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertArrayEquals("Test message".getBytes(),event.getBody());
  }
  tx.commit();
  tx.close();
  executor.shutdown();
  while (!executor.isTerminated()) {
    executor.awaitTermination(500,TimeUnit.MILLISECONDS);
  }
  source.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSpoolDirectorySource </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutBasenameHeader() throws IOException, InterruptedException {
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  context.put(SpoolDirectorySourceConfigurationConstants.BASENAME_HEADER,"true");
  context.put(SpoolDirectorySourceConfigurationConstants.BASENAME_HEADER_KEY,"basenameHeaderKeyTest");
  Configurables.configure(source,context);
  source.start();
  while (source.getSourceCounter().getEventAcceptedCount() < 8) {
    Thread.sleep(10);
  }
  Transaction txn=channel.getTransaction();
  txn.begin();
  Event e=channel.take();
  Assert.assertNotNull("Event must not be null",e);
  Assert.assertNotNull("Event headers must not be null",e.getHeaders());
  Assert.assertNotNull(e.getHeaders().get("basenameHeaderKeyTest"));
  Assert.assertEquals(f1.getName(),e.getHeaders().get("basenameHeaderKeyTest"));
  txn.commit();
  txn.close();
}

</code></pre>

<br>
<pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutFilenameHeader() throws IOException, InterruptedException {
  Context context=new Context();
  File f1=new File(tmpDir.getAbsolutePath() + "/file1");
  Files.write("file1line1\nfile1line2\nfile1line3\nfile1line4\n" + "file1line5\nfile1line6\nfile1line7\nfile1line8\n",f1,Charsets.UTF_8);
  context.put(SpoolDirectorySourceConfigurationConstants.SPOOL_DIRECTORY,tmpDir.getAbsolutePath());
  context.put(SpoolDirectorySourceConfigurationConstants.FILENAME_HEADER,"true");
  context.put(SpoolDirectorySourceConfigurationConstants.FILENAME_HEADER_KEY,"fileHeaderKeyTest");
  Configurables.configure(source,context);
  source.start();
  while (source.getSourceCounter().getEventAcceptedCount() < 8) {
    Thread.sleep(10);
  }
  Transaction txn=channel.getTransaction();
  txn.begin();
  Event e=channel.take();
  Assert.assertNotNull("Event must not be null",e);
  Assert.assertNotNull("Event headers must not be null",e.getHeaders());
  Assert.assertNotNull(e.getHeaders().get("fileHeaderKeyTest"));
  Assert.assertEquals(f1.getAbsolutePath(),e.getHeaders().get("fileHeaderKeyTest"));
  txn.commit();
  txn.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSyslogParser </h4><pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMessageParsing(){
  SyslogParser parser=new SyslogParser();
  Charset charset=Charsets.UTF_8;
  List<String> messages=Lists.newArrayList();
  messages.add("<34>Oct 11 22:14:15 mymachine su: 'su root' failed for " + "lonvick on /dev/pts/8");
  messages.add("<13>Feb  5 17:32:18 10.0.0.99 Use the BFG!");
  messages.add("<165>Aug 24 05:34:00 CST 1987 mymachine myproc[10]: %% " + "It's time to make the do-nuts.  %%  Ingredients: Mix=OK, Jelly=OK # " + "Devices: Mixer=OK, Jelly_Injector=OK, Frier=OK # Transport: "+ "Conveyer1=OK, Conveyer2=OK # %%");
  messages.add("<0>Oct 22 10:52:12 scapegoat 1990 Oct 22 10:52:01 TZ-6 " + "scapegoat.dmz.example.org 10.1.2.3 sched[0]: That's All Folks!");
  messages.add("<34>1 2003-10-11T22:14:15.003Z mymachine.example.com su - " + "ID47 - BOM'su root' failed for lonvick on /dev/pts/8");
  messages.add("<165>1 2003-08-24T05:14:15.000003-07:00 192.0.2.1 myproc " + "8710 - - %% It's time to make the do-nuts.");
  messages.add("<13>2003-08-24T05:14:15Z localhost snarf?");
  messages.add("<13>2012-08-16T14:34:03-08:00 127.0.0.1 test shnap!");
  for (  String msg : messages) {
    Set<String> keepFields=new HashSet<String>();
    Event event=parser.parseMessage(msg,charset,keepFields);
    Assert.assertNull("Failure to parse known-good syslog message",event.getHeaders().get(SyslogUtils.EVENT_STATUS));
  }
  for (  String msg : messages) {
    Set<String> keepFields=new HashSet<String>();
    keepFields.add(SyslogUtils.KEEP_FIELDS_ALL);
    Event event=parser.parseMessage(msg,charset,keepFields);
    Assert.assertArrayEquals(event.getBody(),msg.getBytes());
    Assert.assertNull("Failure to parse known-good syslog message",event.getHeaders().get(SyslogUtils.EVENT_STATUS));
  }
  for (  String msg : messages) {
    Set<String> keepFields=new HashSet<String>();
    keepFields.add(SyslogSourceConfigurationConstants.CONFIG_KEEP_FIELDS_HOSTNAME);
    Event event=parser.parseMessage(msg,charset,keepFields);
    Assert.assertTrue("Failure to persist hostname",new String(event.getBody()).contains(event.getHeaders().get("host")));
    Assert.assertNull("Failure to parse known-good syslog message",event.getHeaders().get(SyslogUtils.EVENT_STATUS));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestSyslogUdpSource </h4><pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLargePayload() throws Exception {
  init("true");
  source.start();
  byte[] largePayload=getPayload(1000).getBytes();
  DatagramSocket syslogSocket;
  DatagramPacket datagramPacket;
  datagramPacket=new DatagramPacket(largePayload,1000,InetAddress.getLocalHost(),source.getSourcePort());
  for (int i=0; i < 10; i++) {
    syslogSocket=new DatagramSocket();
    syslogSocket.send(datagramPacket);
    syslogSocket.close();
  }
  List<Event> channelEvents=new ArrayList<Event>();
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int i=0; i < 10; i++) {
    Event e=channel.take();
    Assert.assertNotNull(e);
    channelEvents.add(e);
  }
  try {
    txn.commit();
  }
 catch (  Throwable t) {
    txn.rollback();
  }
 finally {
    txn.close();
  }
  source.stop();
  for (  Event e : channelEvents) {
    Assert.assertNotNull(e);
    Assert.assertArrayEquals(largePayload,e.getBody());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.TestThriftSource </h4><pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendBigBatch() throws Exception {
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  context.put("capacity","3000");
  context.put("transactionCapacity","3000");
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 5; i++) {
    List<Event> events=Lists.newArrayList();
    for (int j=0; j < 500; j++) {
      Map<String,String> hdrs=Maps.newHashMap();
      hdrs.put("time",String.valueOf(System.currentTimeMillis()));
      events.add(EventBuilder.withBody(String.valueOf(i).getBytes(),hdrs));
    }
    client.appendBatch(events);
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long after=System.currentTimeMillis();
  List<Integer> events=Lists.newArrayList();
  for (int i=0; i < 2500; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertTrue(Long.valueOf(event.getHeaders().get("time")) < after);
    events.add(Integer.parseInt(new String(event.getBody())));
  }
  transaction.commit();
  transaction.close();
  Collections.sort(events);
  int index=0;
  for (int i=0; i < 5; i++) {
    for (int j=0; j < 500; j++) {
      Assert.assertEquals(i,events.get(index++).intValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendBatch() throws Exception {
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  context.put("capacity","1000");
  context.put("transactionCapacity","1000");
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 30; i++) {
    List<Event> events=Lists.newArrayList();
    for (int j=0; j < 10; j++) {
      Map<String,String> hdrs=Maps.newHashMap();
      hdrs.put("time",String.valueOf(System.currentTimeMillis()));
      events.add(EventBuilder.withBody(String.valueOf(i).getBytes(),hdrs));
    }
    client.appendBatch(events);
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long after=System.currentTimeMillis();
  List<Integer> events=Lists.newArrayList();
  for (int i=0; i < 300; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertTrue(Long.valueOf(event.getHeaders().get("time")) <= after);
    events.add(Integer.parseInt(new String(event.getBody())));
  }
  transaction.commit();
  transaction.close();
  Collections.sort(events);
  int index=0;
  for (int i=0; i < 30; i++) {
    for (int j=0; j < 10; j++) {
      Assert.assertEquals(i,events.get(index++).intValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleClients() throws Exception {
  ExecutorService submitter=Executors.newCachedThreadPool();
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  context.put("capacity","1000");
  context.put("transactionCapacity","1000");
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  ExecutorCompletionService<Void> completionService=new ExecutorCompletionService(submitter);
  for (int i=0; i < 30; i++) {
    completionService.submit(new SubmitHelper(i),null);
  }
  for (int i=0; i < 30; i++) {
    completionService.take();
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  long after=System.currentTimeMillis();
  List<Integer> events=Lists.newArrayList();
  for (int i=0; i < 300; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertTrue(Long.valueOf(event.getHeaders().get("time")) < after);
    events.add(Integer.parseInt(new String(event.getBody())));
  }
  transaction.commit();
  transaction.close();
  Collections.sort(events);
  int index=0;
  for (int i=0; i < 30; i++) {
    for (int j=0; j < 10; j++) {
      Assert.assertEquals(i,events.get(index++).intValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendSSL() throws Exception {
  Properties sslprops=(Properties)props.clone();
  sslprops.put("ssl","true");
  sslprops.put("truststore","src/test/resources/truststorefile.jks");
  sslprops.put("truststore-password","password");
  sslprops.put("trustmanager-type",TrustManagerFactory.getDefaultAlgorithm());
  client=RpcClientFactory.getThriftInstance(sslprops);
  Context context=new Context();
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  context.put("ssl","true");
  context.put("keystore","src/test/resources/keystorefile.jks");
  context.put("keystore-password","password");
  context.put("keymanager-type",KeyManagerFactory.getDefaultAlgorithm());
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 30; i++) {
    client.append(EventBuilder.withBody(String.valueOf(i).getBytes()));
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 30; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertEquals(String.valueOf(i),new String(event.getBody()));
  }
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppend() throws Exception {
  client=RpcClientFactory.getThriftInstance(props);
  Context context=new Context();
  channel.configure(context);
  configureSource();
  context.put(ThriftSource.CONFIG_BIND,"0.0.0.0");
  context.put(ThriftSource.CONFIG_PORT,String.valueOf(port));
  Configurables.configure(source,context);
  source.start();
  for (int i=0; i < 30; i++) {
    client.append(EventBuilder.withBody(String.valueOf(i).getBytes()));
  }
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  for (int i=0; i < 30; i++) {
    Event event=channel.take();
    Assert.assertNotNull(event);
    Assert.assertEquals(String.valueOf(i),new String(event.getBody()));
  }
  transaction.commit();
  transaction.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.avroLegacy.TestLegacyAvroSource </h4><pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequest() throws InterruptedException, IOException {
  boolean bound=false;
  int i;
  for (i=0; i < 100 && !bound; i++) {
    try {
      Context context=new Context();
      context.put("port",String.valueOf(selectedPort=41414 + i));
      context.put("host","0.0.0.0");
      Configurables.configure(source,context);
      source.start();
      bound=true;
    }
 catch (    ChannelException e) {
    }
  }
  Assert.assertTrue("Reached start or error",LifecycleController.waitForOneOf(source,LifecycleState.START_OR_ERROR));
  Assert.assertEquals("Server is started",LifecycleState.START,source.getLifecycleState());
  URL url=new URL("http","0.0.0.0",selectedPort,"/");
  Transceiver http=new HttpTransceiver(url);
  FlumeOGEventAvroServer client=SpecificRequestor.getClient(FlumeOGEventAvroServer.class,http);
  AvroFlumeOGEvent avroEvent=AvroFlumeOGEvent.newBuilder().setHost("foo").setPriority(Priority.INFO).setNanos(0).setTimestamp(1).setFields(new HashMap<CharSequence,ByteBuffer>()).setBody(ByteBuffer.wrap("foo".getBytes())).build();
  client.append(avroEvent);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Channel contained our event","foo",new String(event.getBody()));
  transaction.commit();
  transaction.close();
  source.stop();
  Assert.assertTrue("Reached stop or error",LifecycleController.waitForOneOf(source,LifecycleState.STOP_OR_ERROR));
  Assert.assertEquals("Server is stopped",LifecycleState.STOP,source.getLifecycleState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.http.TestHTTPSource </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws IOException, InterruptedException {
  StringEntity input=new StringEntity("[{\"headers\":{\"a\": \"b\"},\"body\": \"random_body\"}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"random_body2\"}]");
  input.setContentType("application/json");
  postRequest.setEntity(input);
  HttpResponse response=httpClient.execute(postRequest);
  Assert.assertEquals(HttpServletResponse.SC_OK,response.getStatusLine().getStatusCode());
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
  e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-8"));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleUTF16() throws IOException, InterruptedException {
  StringEntity input=new StringEntity("[{\"headers\":{\"a\": \"b\"},\"body\": \"random_body\"}," + "{\"headers\":{\"e\": \"f\"},\"body\": \"random_body2\"}]","UTF-16");
  input.setContentType("application/json; charset=utf-16");
  postRequest.setEntity(input);
  HttpResponse response=httpClient.execute(postRequest);
  Assert.assertEquals(HttpServletResponse.SC_OK,response.getStatusLine().getStatusCode());
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-16"));
  e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-16"));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleEvent() throws Exception {
  StringEntity input=new StringEntity("[{\"headers\" : {\"a\": \"b\"},\"body\":" + " \"random_body\"}]");
  input.setContentType("application/json");
  postRequest.setEntity(input);
  httpClient.execute(postRequest);
  Transaction tx=channel.getTransaction();
  tx.begin();
  Event e=channel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.http.TestJSONHandler </h4><pre class="type-9 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleLargeEvents() throws Exception {
  String json="[{\"headers\" : {\"a\": \"b\", \"a2\": \"b2\"," + "\"a3\": \"b3\",\"a4\": \"b4\"},\"body\": \"random_body\"}," + "{\"headers\" :{\"e\": \"f\",\"e2\": \"f2\","+ "\"e3\": \"f3\",\"e4\": \"f4\",\"e5\": \"f5\"},"+ "\"body\": \"random_body2\"},"+ "{\"headers\" :{\"q1\": \"b\",\"q2\": \"b2\",\"q3\": \"b3\",\"q4\": \"b4\"},"+ "\"body\": \"random_bodyq\"}]";
  HttpServletRequest req=new FlumeHttpServletRequestWrapper(json);
  List<Event> deserialized=handler.getEvents(req);
  Event e=deserialized.get(0);
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("a"));
  Assert.assertEquals("b2",e.getHeaders().get("a2"));
  Assert.assertEquals("b3",e.getHeaders().get("a3"));
  Assert.assertEquals("b4",e.getHeaders().get("a4"));
  Assert.assertEquals("random_body",new String(e.getBody(),"UTF-8"));
  e=deserialized.get(1);
  Assert.assertNotNull(e);
  Assert.assertEquals("f",e.getHeaders().get("e"));
  Assert.assertEquals("f2",e.getHeaders().get("e2"));
  Assert.assertEquals("f3",e.getHeaders().get("e3"));
  Assert.assertEquals("f4",e.getHeaders().get("e4"));
  Assert.assertEquals("f5",e.getHeaders().get("e5"));
  Assert.assertEquals("random_body2",new String(e.getBody(),"UTF-8"));
  e=deserialized.get(2);
  Assert.assertNotNull(e);
  Assert.assertEquals("b",e.getHeaders().get("q1"));
  Assert.assertEquals("b2",e.getHeaders().get("q2"));
  Assert.assertEquals("b3",e.getHeaders().get("q3"));
  Assert.assertEquals("b4",e.getHeaders().get("q4"));
  Assert.assertEquals("random_bodyq",new String(e.getBody(),"UTF-8"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.kafka.TestKafkaSourceUtil </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testGetConsumer(){
  ConsumerConnector cc=KafkaSourceUtil.getConsumer(props);
  assertNotNull(cc);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.scribe.TestScribeSource </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScribeMessage() throws Exception {
  TTransport transport=new TFramedTransport(new TSocket("localhost",port));
  TProtocol protocol=new TBinaryProtocol(transport);
  Scribe.Client client=new Scribe.Client(protocol);
  transport.open();
  LogEntry logEntry=new LogEntry("INFO","Sending info msg to scribe source");
  List<LogEntry> logEntries=new ArrayList<LogEntry>(1);
  logEntries.add(logEntry);
  client.Log(logEntries);
  Transaction tx=memoryChannel.getTransaction();
  tx.begin();
  Event e=memoryChannel.take();
  Assert.assertNotNull(e);
  Assert.assertEquals("Sending info msg to scribe source",new String(e.getBody()));
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<pre class="type-12 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScribeMultipleMessages() throws Exception {
  TTransport transport=new TFramedTransport(new TSocket("localhost",port));
  TProtocol protocol=new TBinaryProtocol(transport);
  Scribe.Client client=new Scribe.Client(protocol);
  transport.open();
  List<LogEntry> logEntries=new ArrayList<LogEntry>(10);
  for (int i=0; i < 10; i++) {
    LogEntry logEntry=new LogEntry("INFO",String.format("Sending info msg# %d to scribe source",i));
    logEntries.add(logEntry);
  }
  client.Log(logEntries);
  Transaction tx=memoryChannel.getTransaction();
  tx.begin();
  for (int i=0; i < 10; i++) {
    Event e=memoryChannel.take();
    Assert.assertNotNull(e);
    Assert.assertEquals(String.format("Sending info msg# %d to scribe source",i),new String(e.getBody()));
  }
  tx.commit();
  tx.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.taildir.TestTaildirEventReader </h4><pre class="type-10 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIncludeEmptyFile() throws IOException {
  File f1=new File(tmpDir,"file1");
  File f2=new File(tmpDir,"file2");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Files.touch(f2);
  ReliableTaildirEventReader reader=getReader();
  List<String> out=Lists.newArrayList();
  for (  TailFile tf : reader.getTailFiles().values()) {
    out.addAll(bodiesAsStrings(reader.readEvents(tf,5)));
    reader.commit();
  }
  assertEquals(2,out.size());
  assertTrue(out.contains("file1line1"));
  assertTrue(out.contains("file1line2"));
  assertNull(reader.readEvent());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.taildir.TestTaildirSource </h4><pre class="type-12 type-13 type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeaderMapping() throws IOException {
  File f1=new File(tmpDir,"file1");
  File f2=new File(tmpDir,"file2");
  File f3=new File(tmpDir,"file3");
  Files.write("file1line1\nfile1line2\n",f1,Charsets.UTF_8);
  Files.write("file2line1\nfile2line2\n",f2,Charsets.UTF_8);
  Files.write("file3line1\nfile3line2\n",f3,Charsets.UTF_8);
  Context context=new Context();
  context.put(POSITION_FILE,posFilePath);
  context.put(FILE_GROUPS,"f1 f2 f3");
  context.put(FILE_GROUPS_PREFIX + "f1",tmpDir.getAbsolutePath() + "/file1$");
  context.put(FILE_GROUPS_PREFIX + "f2",tmpDir.getAbsolutePath() + "/file2$");
  context.put(FILE_GROUPS_PREFIX + "f3",tmpDir.getAbsolutePath() + "/file3$");
  context.put(HEADERS_PREFIX + "f1.headerKeyTest","value1");
  context.put(HEADERS_PREFIX + "f2.headerKeyTest","value2");
  context.put(HEADERS_PREFIX + "f2.headerKeyTest2","value2-2");
  Configurables.configure(source,context);
  source.start();
  source.process();
  Transaction txn=channel.getTransaction();
  txn.begin();
  for (int i=0; i < 6; i++) {
    Event e=channel.take();
    String body=new String(e.getBody(),Charsets.UTF_8);
    String headerValue=e.getHeaders().get("headerKeyTest");
    String headerValue2=e.getHeaders().get("headerKeyTest2");
    if (body.startsWith("file1")) {
      assertEquals("value1",headerValue);
      assertNull(headerValue2);
    }
 else     if (body.startsWith("file2")) {
      assertEquals("value2",headerValue);
      assertEquals("value2-2",headerValue2);
    }
 else     if (body.startsWith("file3")) {
      assertNull(headerValue);
      assertNull(headerValue2);
    }
  }
  txn.commit();
  txn.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.source.thriftLegacy.TestThriftLegacySource </h4><pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeaders() throws InterruptedException, IOException {
  bind();
  Map flumeHeaders=new HashMap<CharSequence,ByteBuffer>();
  flumeHeaders.put("hello",ByteBuffer.wrap("world".getBytes("UTF-8")));
  ThriftFlumeEvent thriftEvent=new ThriftFlumeEvent(1,Priority.INFO,ByteBuffer.wrap("foo".getBytes()),0,"fooHost",flumeHeaders);
  FlumeClient fClient=new FlumeClient("0.0.0.0",selectedPort);
  fClient.append(thriftEvent);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Event in channel has our header","world",event.getHeaders().get("hello"));
  transaction.commit();
  transaction.close();
  stop();
}

</code></pre>

<br>
<pre class="type-1 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequest() throws InterruptedException, IOException {
  bind();
  Map flumeMap=new HashMap<CharSequence,ByteBuffer>();
  ThriftFlumeEvent thriftEvent=new ThriftFlumeEvent(1,Priority.INFO,ByteBuffer.wrap("foo".getBytes()),0,"fooHost",flumeMap);
  FlumeClient fClient=new FlumeClient("0.0.0.0",selectedPort);
  fClient.append(thriftEvent);
  Transaction transaction=channel.getTransaction();
  transaction.begin();
  Event event=channel.take();
  Assert.assertNotNull(event);
  Assert.assertEquals("Channel contained our event","foo",new String(event.getBody()));
  transaction.commit();
  transaction.close();
  stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.flume.tools.TestVersionInfo </h4><pre class="type-10 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Make sure that Unknown is expected when no version info
 */
@Test public void testVersionInfoUnknown(){
  logger.debug("Flume " + VersionInfo.getVersion());
  logger.debug("Subversion " + VersionInfo.getUrl() + " -r "+ VersionInfo.getRevision());
  logger.debug("Compiled by " + VersionInfo.getUser() + " on "+ VersionInfo.getDate());
  logger.debug("From source with checksum " + VersionInfo.getSrcChecksum());
  logger.debug("Flume " + VersionInfo.getBuildVersion());
  assertTrue("getVersion returned Unknown",!VersionInfo.getVersion().equals("Unknown"));
  assertTrue("getUser returned Unknown",!VersionInfo.getUser().equals("Unknown"));
  assertTrue("getUrl returned Unknown",!VersionInfo.getUrl().equals("Unknown"));
  assertTrue("getSrcChecksum returned Unknown",!VersionInfo.getSrcChecksum().equals("Unknown"));
  assertTrue("getBuildVersion returned unexpected format",VersionInfo.getBuildVersion().matches(".+from.+by.+on.+source checksum.+"));
  assertNotNull("getRevision returned null",VersionInfo.getRevision());
  assertNotNull("getBranch returned null",VersionInfo.getBranch());
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
