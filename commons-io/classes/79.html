<h3 style="margin:0px">Class: org.apache.commons.io.output.DeferredFileOutputStreamTest (10 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(10)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values related to public fields."><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >PublicFieldVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(3)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-4 type-3 type-2 type-1 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests the case where the amount of data is exactly the same as the
 * threshold. The behavior should be the same as that for the amount of
 * data being below (i.e. not exceeding) the threshold.
 */
@Test public void testAtThreshold(){
  final DeferredFileOutputStream dfos=new DeferredFileOutputStream(testBytes.length,null);
  try {
    dfos.write(testBytes,0,testBytes.length);
    dfos.close();
  }
 catch (  final IOException e) {
    fail("Unexpected IOException");
  }
  assertTrue(dfos.isInMemory());
  final byte[] resultBytes=dfos.getData();
  assertEquals(testBytes.length,resultBytes.length);
  assertTrue(Arrays.equals(resultBytes,testBytes));
}

</code></pre>

<pre class="type-4 type-3 type-2 type-5 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests the case where there are multiple writes beyond the threshold, to
 * ensure that the <code>thresholdReached()</code> method is only called
 * once, as the threshold is crossed for the first time.
 */
@Test public void testThresholdReached(){
  final File testFile=new File("testThresholdReached.dat");
  testFile.delete();
  final DeferredFileOutputStream dfos=new DeferredFileOutputStream(testBytes.length / 2,testFile);
  final int chunkSize=testBytes.length / 3;
  try {
    dfos.write(testBytes,0,chunkSize);
    dfos.write(testBytes,chunkSize,chunkSize);
    dfos.write(testBytes,chunkSize * 2,testBytes.length - chunkSize * 2);
    dfos.close();
  }
 catch (  final IOException e) {
    fail("Unexpected IOException");
  }
  assertFalse(dfos.isInMemory());
  assertNull(dfos.getData());
  verifyResultFile(testFile);
  testFile.delete();
}

</code></pre>

<pre class="type-4 type-3 type-2 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test wether writeTo() properly writes large content.
 */
@Test public void testWriteToLarge(){
  final File testFile=new File("testWriteToFile.dat");
  final ByteArrayOutputStream baos=new ByteArrayOutputStream();
  testFile.delete();
  final DeferredFileOutputStream dfos=new DeferredFileOutputStream(testBytes.length / 2,testFile);
  try {
    dfos.write(testBytes);
    assertTrue(testFile.exists());
    assertFalse(dfos.isInMemory());
    try {
      dfos.writeTo(baos);
      fail("Should not have been able to write before closeing");
    }
 catch (    final IOException ioe) {
    }
    dfos.close();
    dfos.writeTo(baos);
  }
 catch (  final IOException ioe) {
    fail("Unexpected IOException");
  }
  final byte[] copiedBytes=baos.toByteArray();
  assertTrue(Arrays.equals(testBytes,copiedBytes));
  verifyResultFile(testFile);
  testFile.delete();
}

</code></pre>

<pre class="type-4 type-3 type-2 type-1 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests the case where the amount of data falls below the threshold, and
 * is therefore confined to memory.
 */
@Test public void testBelowThreshold(){
  final DeferredFileOutputStream dfos=new DeferredFileOutputStream(testBytes.length + 42,null);
  try {
    dfos.write(testBytes,0,testBytes.length);
    dfos.close();
  }
 catch (  final IOException e) {
    fail("Unexpected IOException");
  }
  assertTrue(dfos.isInMemory());
  final byte[] resultBytes=dfos.getData();
  assertEquals(testBytes.length,resultBytes.length);
  assertTrue(Arrays.equals(resultBytes,testBytes));
}

</code></pre>

<pre class="type-4 type-3 type-2 type-1 type-5 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test specifying a temporary file and the threshold is reached.
 */
@Test public void testTempFileAboveThreshold(){
  final String prefix="commons-io-test";
  final String suffix=".out";
  final File tempDir=new File(".");
  final DeferredFileOutputStream dfos=new DeferredFileOutputStream(testBytes.length - 5,prefix,suffix,tempDir);
  assertNull("Check file is null-A",dfos.getFile());
  try {
    dfos.write(testBytes,0,testBytes.length);
    dfos.close();
  }
 catch (  final IOException e) {
    fail("Unexpected IOException");
  }
  assertFalse(dfos.isInMemory());
  assertNull(dfos.getData());
  assertNotNull("Check file not null",dfos.getFile());
  assertTrue("Check file exists",dfos.getFile().exists());
  assertTrue("Check prefix",dfos.getFile().getName().startsWith(prefix));
  assertTrue("Check suffix",dfos.getFile().getName().endsWith(suffix));
  assertEquals("Check dir",tempDir.getPath(),dfos.getFile().getParent());
  verifyResultFile(dfos.getFile());
  dfos.getFile().delete();
}

</code></pre>

<pre class="type-4 type-3 type-2 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test wether writeTo() properly writes small content.
 */
@Test public void testWriteToSmall(){
  final File testFile=new File("testWriteToMem.dat");
  final ByteArrayOutputStream baos=new ByteArrayOutputStream();
  testFile.delete();
  final DeferredFileOutputStream dfos=new DeferredFileOutputStream(testBytes.length * 2,testFile);
  try {
    dfos.write(testBytes);
    assertFalse(testFile.exists());
    assertTrue(dfos.isInMemory());
    try {
      dfos.writeTo(baos);
      fail("Should not have been able to write before closing");
    }
 catch (    final IOException ioe) {
    }
    dfos.close();
    dfos.writeTo(baos);
  }
 catch (  final IOException ioe) {
    fail("Unexpected IOException");
  }
  final byte[] copiedBytes=baos.toByteArray();
  assertTrue(Arrays.equals(testBytes,copiedBytes));
  testFile.delete();
}

</code></pre>

<pre class="type-4 type-3 type-2 type-5 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests the case where the amount of data exceeds the threshold, and is
 * therefore written to disk. The actual data written to disk is verified,
 * as is the file itself.
 */
@Test public void testAboveThreshold(){
  final File testFile=new File("testAboveThreshold.dat");
  testFile.delete();
  final DeferredFileOutputStream dfos=new DeferredFileOutputStream(testBytes.length - 5,testFile);
  try {
    dfos.write(testBytes,0,testBytes.length);
    dfos.close();
  }
 catch (  final IOException e) {
    fail("Unexpected IOException");
  }
  assertFalse(dfos.isInMemory());
  assertNull(dfos.getData());
  verifyResultFile(testFile);
  testFile.delete();
}

</code></pre>

<pre class="type-4 type-3 type-2 type-5 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test specifying a temporary file and the threshold is reached.
 */
@Test public void testTempFileAboveThresholdPrefixOnly(){
  final String prefix="commons-io-test";
  final String suffix=null;
  final File tempDir=null;
  final DeferredFileOutputStream dfos=new DeferredFileOutputStream(testBytes.length - 5,prefix,suffix,tempDir);
  assertNull("Check file is null-A",dfos.getFile());
  try {
    dfos.write(testBytes,0,testBytes.length);
    dfos.close();
  }
 catch (  final IOException e) {
    fail("Unexpected IOException");
  }
  assertFalse(dfos.isInMemory());
  assertNull(dfos.getData());
  assertNotNull("Check file not null",dfos.getFile());
  assertTrue("Check file exists",dfos.getFile().exists());
  assertTrue("Check prefix",dfos.getFile().getName().startsWith(prefix));
  assertTrue("Check suffix",dfos.getFile().getName().endsWith(".tmp"));
  verifyResultFile(dfos.getFile());
  dfos.getFile().delete();
}

</code></pre>

<pre class="type-4 type-3 type-2 type-5 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test specifying a temporary file and the threshold not reached.
 */
@Test public void testTempFileBelowThreshold(){
  final String prefix="commons-io-test";
  final String suffix=".out";
  final File tempDir=new File(".");
  final DeferredFileOutputStream dfos=new DeferredFileOutputStream(testBytes.length + 42,prefix,suffix,tempDir);
  assertNull("Check file is null-A",dfos.getFile());
  try {
    dfos.write(testBytes,0,testBytes.length);
    dfos.close();
  }
 catch (  final IOException e) {
    fail("Unexpected IOException");
  }
  assertTrue(dfos.isInMemory());
  assertNull("Check file is null-B",dfos.getFile());
}

</code></pre>

<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * Test specifying a temporary file and the threshold is reached.
 * @throws Exception 
 */
@Test public void testTempFileError() throws Exception {
  final String prefix=null;
  final String suffix=".out";
  final File tempDir=new File(".");
  try {
    (new DeferredFileOutputStream(testBytes.length - 5,prefix,suffix,tempDir)).close();
    fail("Expected IllegalArgumentException ");
  }
 catch (  final IllegalArgumentException e) {
  }
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
