<h3><span class=" glyphicon glyphicon-tag"/>&nbspExecutionTester</h3><kbd>Executes methods or other tests from the same test unit</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.jackrabbit.vault.packaging.impl.JcrPackageManagerImplTest </h4><pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void mkdDirStressTest() throws Exception {
  JcrPackageManagerImpl jcrPackageManager=new JcrPackageManagerImpl(admin);
  String path=admin.getRootNode().getPath();
  while (path != null) {
    jcrPackageManager.mkdir(path,true);
    jcrPackageManager.mkdir(path,false);
    path=getNextPath(path);
  }
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkDirWithAnonymousSession() throws Exception {
  Session session=repository.login(new GuestCredentials());
  JcrPackageManagerImpl jcrPackageManager=new JcrPackageManagerImpl(session);
  jcrPackageManager.mkdir("/something/that/is/not/going/to/be/found/anywhere/in/this/repository/even/if/searching/in/very/long/paths/like/this",false);
  jcrPackageManager.mkdir("/something/that/is/not/going/to/be/found/anywhere/in/this/repository/even/if/searching/in/very/long/paths/like/this",false);
  jcrPackageManager.mkdir("/something/that/is/not/going/to/be/found/anywhere/in/this/repository/even/if/searching/in/very/long/paths/like/this",false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.vault.packaging.integration.DumpCoverageTests </h4><pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoJcrContentCoverage() throws IOException, RepositoryException, ConfigurationException {
  DefaultWorkspaceFilter filter=new DefaultWorkspaceFilter();
  PathFilterSet set1=new PathFilterSet(TEST_ROOT + "/content");
  filter.add(set1);
  Collector listener=new Collector();
  filter.dumpCoverage(admin,listener,true);
  checkResults("Partial coverage needs to include all pages",ALL_PAGES,listener.paths);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFullCoverage() throws IOException, RepositoryException, ConfigurationException {
  DefaultWorkspaceFilter filter=new DefaultWorkspaceFilter();
  PathFilterSet set1=new PathFilterSet(TEST_ROOT + "/content");
  filter.add(set1);
  Collector listener=new Collector();
  filter.dumpCoverage(admin,listener,false);
  checkResults("Full coverage needs to include all paths",ALL_PATHS,listener.paths);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSplitRootsCoverage() throws IOException, RepositoryException, ConfigurationException {
  DefaultWorkspaceFilter filter=new DefaultWorkspaceFilter();
  PathFilterSet set1=new PathFilterSet(TEST_ROOT + "/content/en");
  PathFilterSet set2=new PathFilterSet(TEST_ROOT + "/content/fr");
  filter.add(set1);
  filter.add(set2);
  Collector listener=new Collector();
  filter.dumpCoverage(admin,listener,true);
  checkResults("Split roots",LANGUAGE_PAGES,listener.paths);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.vault.packaging.integration.ImportTests </h4><pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImport() throws IOException, RepositoryException, ConfigurationException {
  ZipArchive archive=new ZipArchive(getTempFile("testpackages/tmp.zip"));
  archive.open(true);
  Node rootNode=admin.getRootNode();
  ImportOptions opts=getDefaultOptions();
  Importer importer=new Importer(opts);
  importer.run(archive,rootNode);
  assertNodeExists("/tmp/foo/bar/tobi");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Creates an jcr archive at /archiveroot mapped to /testroot and imports it.
 */
@Test public void testJcrArchiveImport() throws IOException, RepositoryException, ConfigurationException {
  Node archiveNode=admin.getRootNode().addNode(ARCHIVE_ROOT.substring(1,ARCHIVE_ROOT.length()));
  admin.save();
  createNodes(archiveNode,2,4);
  admin.save();
  assertNodeExists(ARCHIVE_ROOT + "/n3/n3/n3");
  JcrArchive archive=new JcrArchive(archiveNode,TEST_ROOT);
  Node testRoot=admin.getRootNode().addNode(TEST_ROOT.substring(1,TEST_ROOT.length()));
  testRoot.addNode("dummy","nt:folder");
  admin.save();
  archive.open(true);
  Node rootNode=admin.getNode(TEST_ROOT);
  ImportOptions opts=getDefaultOptions();
  Importer importer=new Importer(opts);
  importer.run(archive,rootNode);
  admin.save();
  assertNodeExists(TEST_ROOT + "/n3/n3/n3");
  assertNodeMissing(TEST_ROOT + "dummy");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReimportLess() throws IOException, RepositoryException, ConfigurationException {
  ZipArchive archive=new ZipArchive(getTempFile("testpackages/tmp.zip"));
  archive.open(true);
  Node rootNode=admin.getRootNode();
  ImportOptions opts=getDefaultOptions();
  Importer importer=new Importer(opts);
  importer.run(archive,rootNode);
  assertNodeExists("/tmp/foo/bar/tobi");
  ZipArchive archive2=new ZipArchive(getTempFile("testpackages/tmp_less.zip"));
  archive2.open(true);
  importer.run(archive2,rootNode);
  assertNodeMissing("/tmp/foo/bar/tobi");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUnFilteredImport() throws IOException, RepositoryException, ConfigurationException {
  ZipArchive archive=new ZipArchive(getTempFile("testpackages/unfiltered_package.zip"));
  archive.open(true);
  Node rootNode=admin.getRootNode();
  ImportOptions opts=getDefaultOptions();
  Importer importer=new Importer(opts);
  importer.run(archive,rootNode);
  assertNodeExists("/tmp");
  assertNodeExists("/tmp/foo");
  assertNodeExists("/tmp/foo/bar");
  assertNodeExists("/tmp/foo/bar/tobi");
  assertNodeExists("/tmp/foo/bar/tom");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRelativeImport() throws IOException, RepositoryException, ConfigurationException {
  ZipArchive archive=new ZipArchive(getTempFile("testpackages/tmp.zip"));
  admin.getRootNode().addNode(TEST_ROOT.substring(1,TEST_ROOT.length()));
  admin.save();
  archive.open(true);
  Node rootNode=admin.getNode(TEST_ROOT);
  ImportOptions opts=getDefaultOptions();
  WorkspaceFilter filter=archive.getMetaInf().getFilter();
  for (  PathFilterSet pathFilterSet : filter.getFilterSets()) {
    pathFilterSet.setRoot(TEST_ROOT + pathFilterSet.getRoot());
  }
  opts.setFilter(filter);
  Importer importer=new Importer(opts);
  importer.run(archive,rootNode);
  assertNodeExists(TEST_ROOT + "/tmp/foo/bar/tobi");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Imports an empty package with a filter "/testnode" relative to "/testnode". Since this is a relative import,
 * the "/testnode" would map to "/testnode/testnode". So the import should not remove "/testnode".
 */
@Test public void testRelativeEmptyImport() throws IOException, RepositoryException, ConfigurationException {
  ZipArchive archive=new ZipArchive(getTempFile("testpackages/empty_testnode.zip"));
  admin.getRootNode().addNode(TEST_ROOT.substring(1,TEST_ROOT.length()));
  admin.save();
  archive.open(true);
  Node rootNode=admin.getNode(TEST_ROOT);
  ImportOptions opts=getDefaultOptions();
  Importer importer=new Importer(opts);
  importer.run(archive,rootNode);
  assertNodeExists(TEST_ROOT);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFilteredImport() throws IOException, RepositoryException, ConfigurationException {
  ZipArchive archive=new ZipArchive(getTempFile("testpackages/filtered_package.zip"));
  archive.open(true);
  Node rootNode=admin.getRootNode();
  ImportOptions opts=getDefaultOptions();
  Importer importer=new Importer(opts);
  importer.run(archive,rootNode);
  assertNodeExists("/tmp");
  assertNodeExists("/tmp/foo");
  assertNodeExists("/tmp/foo/bar");
  assertNodeExists("/tmp/foo/bar/tobi");
  assertNodeMissing("/tmp/foo/bar/tom");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSNSImport() throws IOException, RepositoryException, ConfigurationException {
  ZipArchive archive=new ZipArchive(getTempFile("testpackages/test_sns.zip"));
  archive.open(true);
  Node rootNode=admin.getRootNode();
  ImportOptions opts=getDefaultOptions();
  Importer importer=new Importer(opts);
  importer.run(archive,rootNode);
  assertNodeExists("/tmp/testroot");
  assertNodeExists("/tmp/testroot/foo");
  assertProperty("/tmp/testroot/foo/name","foo1");
  if (admin.getRepository().getDescriptorValue(Repository.NODE_TYPE_MANAGEMENT_SAME_NAME_SIBLINGS_SUPPORTED).getBoolean()) {
    assertNodeExists("/tmp/testroot/foo[2]");
    assertNodeExists("/tmp/testroot/foo[3]");
    assertProperty("/tmp/testroot/foo[2]/name","foo2");
    assertProperty("/tmp/testroot/foo[3]/name","foo3");
  }
 else {
    assertNodeMissing("/tmp/testroot/foo[2]");
    assertNodeMissing("/tmp/testroot/foo[3]");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.vault.packaging.integration.TestACLAndMerge </h4><pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Installs a package with 3 ACLs and checks if the order of the entries is still correct.
 */
@Test public void testACOrderOverwrite() throws Exception {
  assertNodeMissing("/testroot");
  doOrderTest(AccessControlHandling.OVERWRITE);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Installs a package with 3 ACLs and checks if the order of the entries is still correct.
 */
@Test public void testACOrderMergePreserve() throws Exception {
  assertNodeMissing("/testroot");
  doOrderTest(AccessControlHandling.OVERWRITE);
  doOrderTest(AccessControlHandling.MERGE_PRESERVE);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Installs a package with 3 ACLs and checks if the order of the entries is still correct.
 */
@Test public void testACOrderMerge() throws Exception {
  assertNodeMissing("/testroot");
  doOrderTest(AccessControlHandling.OVERWRITE);
  doOrderTest(AccessControlHandling.MERGE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.vault.packaging.integration.TestImportMode </h4><pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Installs a package with the filter: "/tmp/foo", mode="update"
 */
@Test public void testUpdate() throws RepositoryException, IOException, PackageException {
  Node tmp=admin.getRootNode().addNode("tmp");
  Node foo=tmp.addNode("foo");
  Node old=foo.addNode("old");
  Node bar=foo.addNode("bar");
  bar.setProperty("testProperty","old");
  admin.save();
  assertNodeExists("/tmp/foo/old");
  assertNodeMissing("/tmp/foo/new");
  JcrPackage pack=packMgr.upload(getStream("testpackages/tmp_mode_update.zip"),false);
  pack.extract(getDefaultOptions());
  assertNodeExists("/tmp/foo/old");
  assertNodeExists("/tmp/foo/bar");
  assertNodeExists("/tmp/foo/new");
  assertProperty("/tmp/foo/bar/testProperty","new");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Installs a package with the filter: "/tmp/foo", mode="merge"
 */
@Test public void testMerge() throws RepositoryException, IOException, PackageException {
  Node tmp=admin.getRootNode().addNode("tmp");
  Node foo=tmp.addNode("foo");
  Node old=foo.addNode("old");
  Node bar=foo.addNode("bar");
  bar.setProperty("testProperty","old");
  admin.save();
  assertNodeExists("/tmp/foo/old");
  assertNodeMissing("/tmp/foo/new");
  JcrPackage pack=packMgr.upload(getStream("testpackages/tmp_mode_merge.zip"),false);
  pack.extract(getDefaultOptions());
  assertNodeExists("/tmp/foo/old");
  assertNodeExists("/tmp/foo/bar");
  assertNodeExists("/tmp/foo/new");
  assertProperty("/tmp/foo/bar/testProperty","old");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Installs a package with the filter: "/tmp/foo", mode="replace"
 */
@Test public void testReplace() throws RepositoryException, IOException, PackageException {
  Node tmp=admin.getRootNode().addNode("tmp");
  Node foo=tmp.addNode("foo");
  Node old=foo.addNode("old");
  admin.save();
  assertNodeExists("/tmp/foo/old");
  assertNodeMissing("/tmp/foo/bar");
  JcrPackage pack=packMgr.upload(getStream("testpackages/tmp_mode_replace.zip"),false);
  pack.extract(getDefaultOptions());
  assertNodeMissing("/tmp/foo/old");
  assertNodeExists("/tmp/foo/bar");
  assertProperty("/tmp/foo/bar/testProperty","new");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.vault.packaging.integration.TestMappedImport </h4><pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests if installing the same package at multiple places works
 */
@Test public void testMultiInstall() throws RepositoryException, IOException, PackageException {
  assertNodeMissing("/tmp/foo");
  assertNodeMissing("/tmp/mapped0");
  assertNodeMissing("/tmp/mapped1");
  JcrPackage pack=packMgr.upload(getStream("testpackages/tmp_foo.zip"),false);
  PackageId id=pack.getDefinition().getId();
  ImportOptions opts=getDefaultOptions();
  MultiPathMapping mapping=new MultiPathMapping();
  mapping.link("/tmp/foo","/tmp/mapped0");
  opts.setPathMapping(mapping);
  pack.install(opts);
  pack.close();
  assertNodeMissing("/tmp/foo");
  assertNodeExists("/tmp/mapped0");
  pack=packMgr.open(id);
  opts=getDefaultOptions();
  mapping=new MultiPathMapping();
  mapping.link("/tmp/foo","/tmp/mapped1");
  opts.setPathMapping(mapping);
  pack.install(opts);
  pack.close();
  assertNodeMissing("/tmp/foo");
  assertNodeExists("/tmp/mapped1");
}

</code></pre>

<br>
<pre class="type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is not executed with the test suite
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests if remapping within a generic artifact works.
 * This is currently not implemented.
 */
@Ignore("JCRVLT-79") @Test public void testGenericArtifact() throws RepositoryException, IOException, PackageException {
  JcrPackage pack=packMgr.upload(getStream("testpackages/fullcoverage.zip"),false);
  ImportOptions opts=getDefaultOptions();
  MultiPathMapping mapping=new MultiPathMapping();
  mapping.link("/tmp/fullcoverage/a","/tmp/fullcoverage/mapped");
  opts.setPathMapping(mapping);
  pack.extract(opts);
  assertNodeMissing("/tmp/fullcoverage/a");
  assertNodeExists("/tmp/fullcoverage/mapped");
}

</code></pre>

<br>
<pre class="type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is not executed with the test suite
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests if uninstalling a remapped package works
 */
@Ignore("JCRVLT-80") @Test public void testSimpleUninstall() throws RepositoryException, IOException, PackageException {
  assertNodeMissing("/tmp/foo");
  assertNodeMissing("/tmp/mapped");
  JcrPackage pack=packMgr.upload(getStream("testpackages/tmp_foo.zip"),false);
  PackageId id=pack.getDefinition().getId();
  ImportOptions opts=getDefaultOptions();
  MultiPathMapping mapping=new MultiPathMapping();
  mapping.link("/tmp/foo","/tmp/mapped");
  opts.setPathMapping(mapping);
  pack.install(opts);
  pack.close();
  assertNodeMissing("/tmp/foo");
  assertNodeExists("/tmp/mapped");
  pack=packMgr.open(id);
  pack.uninstall(getDefaultOptions());
  assertNodeMissing("/tmp/foo");
  assertNodeMissing("/tmp/mapped");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNested() throws RepositoryException, IOException, PackageException {
  JcrPackage pack=packMgr.upload(getStream("testpackages/tmp_foo.zip"),false);
  ImportOptions opts=getDefaultOptions();
  MultiPathMapping mapping=new MultiPathMapping();
  mapping.link("/tmp/foo","/tmp/mapped");
  mapping.link("/tmp/mapped/bar/tobi","/tmp/mapped/bar/roby");
  opts.setPathMapping(mapping);
  pack.extract(opts);
  assertNodeMissing("/tmp/mapped/bar/tobi");
  assertNodeExists("/tmp/mapped/bar/roby");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleDelete() throws RepositoryException, IOException, PackageException {
  JcrPackage pack=packMgr.upload(getStream("testpackages/tmp_foo.zip"),false);
  ImportOptions opts=getDefaultOptions();
  MultiPathMapping mapping=new MultiPathMapping();
  mapping.link("/tmp/foo","/tmp/mapped");
  opts.setPathMapping(mapping);
  pack.extract(opts);
  assertNodeMissing("/tmp/foo");
  assertNodeExists("/tmp/mapped");
  pack=packMgr.upload(getStream("testpackages/empty_tmp_foo.zip"),false);
  pack.extract(opts);
  assertNodeMissing("/tmp/mapped");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimple() throws RepositoryException, IOException, PackageException {
  JcrPackage pack=packMgr.upload(getStream("testpackages/tmp_foo.zip"),false);
  ImportOptions opts=getDefaultOptions();
  MultiPathMapping mapping=new MultiPathMapping();
  mapping.link("/tmp/foo","/tmp/mapped");
  opts.setPathMapping(mapping);
  pack.extract(opts);
  assertNodeMissing("/tmp/foo");
  assertNodeExists("/tmp/mapped");
}

</code></pre>

<br>
<pre class="type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is not executed with the test suite
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests if a non-trivial rename remapping works.
 * This is currently not supported
 */
@Ignore("JCRVLT-78") @Test public void testNonRename() throws RepositoryException, IOException, PackageException {
  JcrPackage pack=packMgr.upload(getStream("testpackages/tmp_foo.zip"),false);
  ImportOptions opts=getDefaultOptions();
  MultiPathMapping mapping=new MultiPathMapping();
  mapping.link("/tmp/foo","/libs/foo");
  opts.setPathMapping(mapping);
  pack.extract(opts);
  assertNodeExists("/tmp/foo");
  assertNodeExists("/libs/foo");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.vault.packaging.integration.TestPackageCreation </h4><pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateWithVersion() throws RepositoryException, IOException, PackageException {
  packMgr.create("foo","bar","3.1.2");
  assertNodeExists("/etc/packages/foo/bar-3.1.2.zip");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateGroup() throws RepositoryException, IOException, PackageException {
  for (  String name : GROUP_NAMES) {
    packMgr.create(name,"bar");
    assertNodeExists("/etc/packages/" + name + "/bar.zip");
  }
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreate() throws RepositoryException, IOException, PackageException {
  for (  String name : PACKAGE_NAMES) {
    packMgr.create("foo",name);
    assertNodeExists("/etc/packages/foo/" + name + ".zip");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.vault.packaging.integration.TestUserContentPackage </h4><pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void installUserA_Update() throws RepositoryException, IOException, PackageException {
  installUserA(ImportMode.UPDATE,false,false);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void installUserA_Replace_PkgPath() throws RepositoryException, IOException, PackageException {
  installUserA(ImportMode.REPLACE,true,true);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void installUserA_PkgPath() throws RepositoryException, IOException, PackageException {
  installUserA(null,true,true);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void installUserA_Replace() throws RepositoryException, IOException, PackageException {
  installUserA(ImportMode.REPLACE,false,true);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void installUserA_Merge_PkgPath() throws RepositoryException, IOException, PackageException {
  installUserA(ImportMode.MERGE,true,true);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void installUserA_Update_PkgPath() throws RepositoryException, IOException, PackageException {
  installUserA(ImportMode.UPDATE,true,true);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void installUserA() throws RepositoryException, IOException, PackageException {
  installUserA(null,false,true);
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void installUserA_Merge() throws RepositoryException, IOException, PackageException {
  installUserA(ImportMode.MERGE,false,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.vault.util.RCPTest </h4><pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddMixin() throws IOException, RepositoryException, ConfigurationException {
  Node a=JcrUtils.getOrCreateByPath(SRC_TEST_NODE_PATH,NodeType.NT_FOLDER,NodeType.NT_FOLDER,admin,true);
  RepositoryCopier rcp=new RepositoryCopier();
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertNodeExists(DST_TEST_NODE_PATH);
  assertPropertyMissing(DST_TEST_NODE_PATH + "/jcr:title");
  a.addMixin(NodeType.MIX_TITLE);
  a.setProperty("jcr:title","Hello");
  admin.save();
  assertProperty(SRC_TEST_NODE_PATH + "/jcr:title","Hello");
  rcp=new RepositoryCopier();
  rcp.setOnlyNewer(false);
  rcp.setUpdate(true);
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertProperty(DST_TEST_NODE_PATH + "/jcr:title","Hello");
  assertProperty(DST_TEST_NODE_PATH + "/jcr:mixinTypes",new String[]{"mix:title"});
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveMixin() throws IOException, RepositoryException, ConfigurationException {
  Node a=JcrUtils.getOrCreateByPath(SRC_TEST_NODE_PATH,NodeType.NT_FOLDER,NodeType.NT_FOLDER,admin,true);
  RepositoryCopier rcp=new RepositoryCopier();
  a.addMixin(NodeType.MIX_TITLE);
  a.setProperty("jcr:title","Hello");
  admin.save();
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertProperty(DST_TEST_NODE_PATH + "/jcr:title","Hello");
  assertProperty(DST_TEST_NODE_PATH + "/jcr:mixinTypes",new String[]{"mix:title"});
  a.removeMixin(NodeType.MIX_TITLE);
  admin.save();
  assertPropertyMissing(SRC_TEST_NODE_PATH + "/jcr:title");
  rcp=new RepositoryCopier();
  rcp.setOnlyNewer(false);
  rcp.setUpdate(true);
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertNodeExists(DST_TEST_NODE_PATH);
  assertPropertyMissing(DST_TEST_NODE_PATH + "/jcr:mixinTypes");
  assertPropertyMissing(DST_TEST_NODE_PATH + "/jcr:title");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Special test where the source node is nt:file with no mixins, and the destination node is nt:file with a mixin
 * and properties, and content is updated since it is newer (JCRVLT-87)
 */
@Test public void testMissingMixinWithNewer() throws IOException, RepositoryException, ConfigurationException {
  Calendar now=Calendar.getInstance();
  Calendar then=Calendar.getInstance();
  then.setTimeInMillis(now.getTimeInMillis() + 1);
  Node a=JcrUtils.getOrCreateByPath(SRC_TEST_NODE_PATH,NodeType.NT_FOLDER,NodeType.NT_FILE,admin,false);
  Node content=a.addNode(Node.JCR_CONTENT,NodeType.NT_UNSTRUCTURED);
  content.setProperty(Property.JCR_LAST_MODIFIED,now);
  content.setProperty("p0","0");
  admin.save();
  assertProperty(SRC_TEST_NODE_PATH + "/jcr:content/p0","0");
  RepositoryCopier rcp=new RepositoryCopier();
  rcp.setOnlyNewer(false);
  rcp.setUpdate(true);
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertProperty(DST_TEST_NODE_PATH + "/jcr:content/p0","0");
  content.setProperty("p0","1");
  Node dst=admin.getNode(DST_TEST_NODE_PATH);
  dst.addMixin(NodeType.MIX_TITLE);
  dst.setProperty(Property.JCR_TITLE,"Hello");
  admin.save();
  assertProperty(DST_TEST_NODE_PATH + "/jcr:title","Hello");
  assertProperty(DST_TEST_NODE_PATH + "/jcr:mixinTypes",new String[]{"mix:title"});
  rcp=new RepositoryCopier();
  rcp.setOnlyNewer(true);
  rcp.setUpdate(true);
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertProperty(DST_TEST_NODE_PATH + "/jcr:content/p0","0");
  assertPropertyMissing(DST_TEST_NODE_PATH + "/jcr:mixinTypes");
  assertPropertyMissing(DST_TEST_NODE_PATH + "/jcr:title");
  content.setProperty(Property.JCR_LAST_MODIFIED,then);
  admin.save();
  rcp=new RepositoryCopier();
  rcp.setOnlyNewer(true);
  rcp.setUpdate(true);
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertProperty(DST_TEST_NODE_PATH + "/jcr:content/p0","1");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimple() throws IOException, RepositoryException, ConfigurationException {
  Node a=JcrUtils.getOrCreateByPath(SRC_TEST_NODE_PATH,NodeType.NT_UNSTRUCTURED,NodeType.NT_UNSTRUCTURED,admin,true);
  a.setProperty("p0","0");
  a.setProperty("p1","1");
  a.setProperty("m0",new String[]{"0","1","2"},PropertyType.STRING);
  admin.save();
  assertNodeExists(SRC_TEST_NODE_PATH);
  RepositoryCopier rcp=new RepositoryCopier();
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertProperty(DST_TEST_NODE_PATH + "/p0","0");
  assertProperty(DST_TEST_NODE_PATH + "/p1","1");
  assertProperty(DST_TEST_NODE_PATH + "/m0",new String[]{"0","1","2"});
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnlyNewer() throws IOException, RepositoryException, ConfigurationException {
  Calendar now=Calendar.getInstance();
  Calendar then=Calendar.getInstance();
  then.setTimeInMillis(now.getTimeInMillis() + 1);
  Node a=JcrUtils.getOrCreateByPath(SRC_TEST_NODE_PATH,NodeType.NT_FOLDER,NodeType.NT_FILE,admin,false);
  Node content=a.addNode(Node.JCR_CONTENT,NodeType.NT_UNSTRUCTURED);
  content.setProperty(Property.JCR_LAST_MODIFIED,now);
  content.setProperty("p0","0");
  admin.save();
  assertProperty(SRC_TEST_NODE_PATH + "/jcr:content/p0","0");
  RepositoryCopier rcp=new RepositoryCopier();
  rcp.setOnlyNewer(false);
  rcp.setUpdate(true);
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertProperty(DST_TEST_NODE_PATH + "/jcr:content/p0","0");
  content.setProperty("p0","1");
  admin.save();
  rcp=new RepositoryCopier();
  rcp.setOnlyNewer(true);
  rcp.setUpdate(true);
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertProperty(DST_TEST_NODE_PATH + "/jcr:content/p0","0");
  content.setProperty(Property.JCR_LAST_MODIFIED,then);
  admin.save();
  rcp=new RepositoryCopier();
  rcp.setOnlyNewer(true);
  rcp.setUpdate(true);
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertProperty(DST_TEST_NODE_PATH + "/jcr:content/p0","1");
}

</code></pre>

<br>
<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMixin() throws IOException, RepositoryException, ConfigurationException {
  Node a=JcrUtils.getOrCreateByPath(SRC_TEST_NODE_PATH,NodeType.NT_FOLDER,NodeType.NT_FOLDER,admin,true);
  RepositoryCopier rcp=new RepositoryCopier();
  a.addMixin(NodeType.MIX_TITLE);
  a.setProperty("jcr:title","Hello");
  admin.save();
  rcp.copy(admin,SRC_PATH,admin,DST_PATH,true);
  assertProperty(DST_TEST_NODE_PATH + "/jcr:title","Hello");
  assertProperty(DST_TEST_NODE_PATH + "/jcr:mixinTypes",new String[]{"mix:title"});
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
